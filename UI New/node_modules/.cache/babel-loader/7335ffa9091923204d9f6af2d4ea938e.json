{"ast":null,"code":"var _get = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/get\");\nvar _slicedToArray = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/slicedToArray\");\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/asyncToGenerator\");\nvar _assertThisInitialized = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/assertThisInitialized\");\nvar _wrapNativeSuper = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/wrapNativeSuper\");\nvar _possibleConstructorReturn = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\nvar _inherits = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\nvar _classCallCheck = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\nvar _createClass = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\nvar _toConsumableArray = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/toConsumableArray\");\nvar _defineProperty = require(\"C:\\\\Users\\\\User\\\\GitHub\\\\EmoCare\\\\UI New\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/defineProperty\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e245) { throw _e245; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e246) { didErr = true; err = _e246; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n/**\n * AgoraWebSDK_N-v4.16.1-0-gb268655f-dirty Copyright AgoraInc.\n */\n\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).AgoraRTC = t();\n}(this, function () {\n  \"use strict\";\n\n  var _Sm$ACCESS_POINT, _Sm$UNILBS, _Sm$STRING_UID_ALLOCA, _qA, _XA;\n  function e(e, t) {\n    return t.forEach(function (t) {\n      t && \"string\" != typeof t && !Array.isArray(t) && Object.keys(t).forEach(function (i) {\n        if (\"default\" !== i && !(i in e)) {\n          var r = Object.getOwnPropertyDescriptor(t, i);\n          Object.defineProperty(e, i, r.get ? r : {\n            enumerable: !0,\n            get: function get() {\n              return t[i];\n            }\n          });\n        }\n      });\n    }), Object.freeze(e);\n  }\n  var t = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {},\n    i = function i(e) {\n      try {\n        return !!e();\n      } catch (e) {\n        return !0;\n      }\n    },\n    r = !i(function () {\n      var e = function () {}.bind();\n      return \"function\" != typeof e || e.hasOwnProperty(\"prototype\");\n    }),\n    n = r,\n    o = Function.prototype,\n    s = o.bind,\n    a = o.call,\n    c = n && s.bind(a, a),\n    d = n ? function (e) {\n      return e && c(e);\n    } : function (e) {\n      return e && function () {\n        return a.apply(e, arguments);\n      };\n    },\n    u = d({}.isPrototypeOf),\n    l = function l(e) {\n      return e && e.Math == Math && e;\n    },\n    h = l(\"object\" == typeof globalThis && globalThis) || l(\"object\" == typeof window && window) || l(\"object\" == typeof self && self) || l(\"object\" == typeof t && t) || function () {\n      return this;\n    }() || Function(\"return this\")(),\n    p = r,\n    _ = Function.prototype,\n    E = _.apply,\n    f = _.call,\n    m = \"object\" == typeof Reflect && Reflect.apply || (p ? f.bind(E) : function () {\n      return f.apply(E, arguments);\n    }),\n    g = function g(e) {\n      return \"function\" == typeof e;\n    },\n    S = {},\n    T = !i(function () {\n      return 7 != Object.defineProperty({}, 1, {\n        get: function get() {\n          return 7;\n        }\n      })[1];\n    }),\n    v = r,\n    R = Function.prototype.call,\n    I = v ? R.bind(R) : function () {\n      return R.apply(R, arguments);\n    },\n    y = {},\n    C = {}.propertyIsEnumerable,\n    A = Object.getOwnPropertyDescriptor,\n    O = A && !C.call({\n      1: 2\n    }, 1);\n  y.f = O ? function (e) {\n    var t = A(this, e);\n    return !!t && t.enumerable;\n  } : C;\n  var b,\n    w,\n    N = function N(e, t) {\n      return {\n        enumerable: !(1 & e),\n        configurable: !(2 & e),\n        writable: !(4 & e),\n        value: t\n      };\n    },\n    D = d,\n    P = D({}.toString),\n    L = D(\"\".slice),\n    k = function k(e) {\n      return L(P(e), 8, -1);\n    },\n    M = d,\n    U = i,\n    x = k,\n    V = h.Object,\n    j = M(\"\".split),\n    F = U(function () {\n      return !V(\"z\").propertyIsEnumerable(0);\n    }) ? function (e) {\n      return \"String\" == x(e) ? j(e, \"\") : V(e);\n    } : V,\n    B = h.TypeError,\n    G = function G(e) {\n      if (null == e) throw B(\"Can't call method on \" + e);\n      return e;\n    },\n    W = F,\n    H = G,\n    K = function K(e) {\n      return W(H(e));\n    },\n    Y = g,\n    q = function q(e) {\n      return \"object\" == typeof e ? null !== e : Y(e);\n    },\n    J = {},\n    X = J,\n    z = h,\n    Q = g,\n    Z = function Z(e) {\n      return Q(e) ? e : void 0;\n    },\n    $ = function $(e, t) {\n      return arguments.length < 2 ? Z(X[e]) || Z(z[e]) : X[e] && X[e][t] || z[e] && z[e][t];\n    },\n    ee = $(\"navigator\", \"userAgent\") || \"\",\n    te = h,\n    ie = ee,\n    re = te.process,\n    ne = te.Deno,\n    oe = re && re.versions || ne && ne.version,\n    se = oe && oe.v8;\n  se && (w = (b = se.split(\".\"))[0] > 0 && b[0] < 4 ? 1 : +(b[0] + b[1])), !w && ie && (!(b = ie.match(/Edge\\/(\\d+)/)) || b[1] >= 74) && (b = ie.match(/Chrome\\/(\\d+)/)) && (w = +b[1]);\n  var ae = w,\n    ce = ae,\n    de = i,\n    ue = !!Object.getOwnPropertySymbols && !de(function () {\n      var e = Symbol();\n      return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham && ce && ce < 41;\n    }),\n    le = ue && !Symbol.sham && \"symbol\" == typeof Symbol.iterator,\n    he = $,\n    pe = g,\n    _e = u,\n    Ee = le,\n    fe = h.Object,\n    me = Ee ? function (e) {\n      return \"symbol\" == typeof e;\n    } : function (e) {\n      var t = he(\"Symbol\");\n      return pe(t) && _e(t.prototype, fe(e));\n    },\n    ge = h.String,\n    Se = function Se(e) {\n      try {\n        return ge(e);\n      } catch (e) {\n        return \"Object\";\n      }\n    },\n    Te = g,\n    ve = Se,\n    Re = h.TypeError,\n    Ie = function Ie(e) {\n      if (Te(e)) return e;\n      throw Re(ve(e) + \" is not a function\");\n    },\n    ye = Ie,\n    Ce = function Ce(e, t) {\n      var i = e[t];\n      return null == i ? void 0 : ye(i);\n    },\n    Ae = I,\n    Oe = g,\n    be = q,\n    we = h.TypeError,\n    Ne = {\n      exports: {}\n    },\n    De = h,\n    Pe = Object.defineProperty,\n    Le = function Le(e, t) {\n      try {\n        Pe(De, e, {\n          value: t,\n          configurable: !0,\n          writable: !0\n        });\n      } catch (i) {\n        De[e] = t;\n      }\n      return t;\n    },\n    ke = \"__core-js_shared__\",\n    Me = h[ke] || Le(ke, {}),\n    Ue = Me;\n  (Ne.exports = function (e, t) {\n    return Ue[e] || (Ue[e] = void 0 !== t ? t : {});\n  })(\"versions\", []).push({\n    version: \"3.20.3\",\n    mode: \"pure\",\n    copyright: \"Â© 2014-2022 Denis Pushkarev (zloirock.ru)\",\n    license: \"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE\",\n    source: \"https://github.com/zloirock/core-js\"\n  });\n  var xe = G,\n    Ve = h.Object,\n    je = function je(e) {\n      return Ve(xe(e));\n    },\n    Fe = je,\n    Be = d({}.hasOwnProperty),\n    Ge = Object.hasOwn || function (e, t) {\n      return Be(Fe(e), t);\n    },\n    We = d,\n    He = 0,\n    Ke = Math.random(),\n    Ye = We(1..toString),\n    qe = function qe(e) {\n      return \"Symbol(\" + (void 0 === e ? \"\" : e) + \")_\" + Ye(++He + Ke, 36);\n    },\n    Je = h,\n    Xe = Ne.exports,\n    ze = Ge,\n    Qe = qe,\n    Ze = ue,\n    $e = le,\n    et = Xe(\"wks\"),\n    tt = Je.Symbol,\n    it = tt && tt.for,\n    rt = $e ? tt : tt && tt.withoutSetter || Qe,\n    nt = function nt(e) {\n      if (!ze(et, e) || !Ze && \"string\" != typeof et[e]) {\n        var t = \"Symbol.\" + e;\n        Ze && ze(tt, e) ? et[e] = tt[e] : et[e] = $e && it ? it(t) : rt(t);\n      }\n      return et[e];\n    },\n    ot = I,\n    st = q,\n    at = me,\n    ct = Ce,\n    dt = function dt(e, t) {\n      var i, r;\n      if (\"string\" === t && Oe(i = e.toString) && !be(r = Ae(i, e))) return r;\n      if (Oe(i = e.valueOf) && !be(r = Ae(i, e))) return r;\n      if (\"string\" !== t && Oe(i = e.toString) && !be(r = Ae(i, e))) return r;\n      throw we(\"Can't convert object to primitive value\");\n    },\n    ut = nt,\n    lt = h.TypeError,\n    ht = ut(\"toPrimitive\"),\n    pt = function pt(e, t) {\n      if (!st(e) || at(e)) return e;\n      var i,\n        r = ct(e, ht);\n      if (r) {\n        if (void 0 === t && (t = \"default\"), i = ot(r, e, t), !st(i) || at(i)) return i;\n        throw lt(\"Can't convert object to primitive value\");\n      }\n      return void 0 === t && (t = \"number\"), dt(e, t);\n    },\n    _t = me,\n    Et = function Et(e) {\n      var t = pt(e, \"string\");\n      return _t(t) ? t : t + \"\";\n    },\n    ft = q,\n    mt = h.document,\n    gt = ft(mt) && ft(mt.createElement),\n    St = function St(e) {\n      return gt ? mt.createElement(e) : {};\n    },\n    Tt = St,\n    vt = !T && !i(function () {\n      return 7 != Object.defineProperty(Tt(\"div\"), \"a\", {\n        get: function get() {\n          return 7;\n        }\n      }).a;\n    }),\n    Rt = T,\n    It = I,\n    yt = y,\n    Ct = N,\n    At = K,\n    Ot = Et,\n    bt = Ge,\n    wt = vt,\n    Nt = Object.getOwnPropertyDescriptor;\n  S.f = Rt ? Nt : function (e, t) {\n    if (e = At(e), t = Ot(t), wt) try {\n      return Nt(e, t);\n    } catch (e) {}\n    if (bt(e, t)) return Ct(!It(yt.f, e, t), e[t]);\n  };\n  var Dt = i,\n    Pt = g,\n    Lt = /#|\\.prototype\\./,\n    kt = function kt(e, t) {\n      var i = Ut[Mt(e)];\n      return i == Vt || i != xt && (Pt(t) ? Dt(t) : !!t);\n    },\n    Mt = kt.normalize = function (e) {\n      return String(e).replace(Lt, \".\").toLowerCase();\n    },\n    Ut = kt.data = {},\n    xt = kt.NATIVE = \"N\",\n    Vt = kt.POLYFILL = \"P\",\n    jt = kt,\n    Ft = Ie,\n    Bt = r,\n    Gt = d(d.bind),\n    Wt = function Wt(e, t) {\n      return Ft(e), void 0 === t ? e : Bt ? Gt(e, t) : function () {\n        return e.apply(t, arguments);\n      };\n    },\n    Ht = {},\n    Kt = T && i(function () {\n      return 42 != Object.defineProperty(function () {}, \"prototype\", {\n        value: 42,\n        writable: !1\n      }).prototype;\n    }),\n    Yt = h,\n    qt = q,\n    Jt = Yt.String,\n    Xt = Yt.TypeError,\n    zt = function zt(e) {\n      if (qt(e)) return e;\n      throw Xt(Jt(e) + \" is not an object\");\n    },\n    Qt = T,\n    Zt = vt,\n    $t = Kt,\n    ei = zt,\n    ti = Et,\n    ii = h.TypeError,\n    ri = Object.defineProperty,\n    ni = Object.getOwnPropertyDescriptor,\n    oi = \"enumerable\",\n    si = \"configurable\",\n    ai = \"writable\";\n  Ht.f = Qt ? $t ? function (e, t, i) {\n    if (ei(e), t = ti(t), ei(i), \"function\" == typeof e && \"prototype\" === t && \"value\" in i && ai in i && !i.writable) {\n      var r = ni(e, t);\n      r && r.writable && (e[t] = i.value, i = {\n        configurable: si in i ? i.configurable : r.configurable,\n        enumerable: oi in i ? i.enumerable : r.enumerable,\n        writable: !1\n      });\n    }\n    return ri(e, t, i);\n  } : ri : function (e, t, i) {\n    if (ei(e), t = ti(t), ei(i), Zt) try {\n      return ri(e, t, i);\n    } catch (e) {}\n    if (\"get\" in i || \"set\" in i) throw ii(\"Accessors not supported\");\n    return \"value\" in i && (e[t] = i.value), e;\n  };\n  var ci = Ht,\n    di = N,\n    ui = T ? function (e, t, i) {\n      return ci.f(e, t, di(1, i));\n    } : function (e, t, i) {\n      return e[t] = i, e;\n    },\n    li = h,\n    hi = m,\n    pi = d,\n    _i = g,\n    Ei = S.f,\n    fi = jt,\n    mi = J,\n    gi = Wt,\n    Si = ui,\n    Ti = Ge,\n    vi = function vi(e) {\n      var t = function t(i, r, n) {\n        if (this instanceof t) {\n          switch (arguments.length) {\n            case 0:\n              return new e();\n            case 1:\n              return new e(i);\n            case 2:\n              return new e(i, r);\n          }\n          return new e(i, r, n);\n        }\n        return hi(e, this, arguments);\n      };\n      return t.prototype = e.prototype, t;\n    },\n    Ri = function Ri(e, t) {\n      var i,\n        r,\n        n,\n        o,\n        s,\n        a,\n        c,\n        d,\n        u = e.target,\n        l = e.global,\n        h = e.stat,\n        p = e.proto,\n        _ = l ? li : h ? li[u] : (li[u] || {}).prototype,\n        E = l ? mi : mi[u] || Si(mi, u, {})[u],\n        f = E.prototype;\n      for (n in t) i = !fi(l ? n : u + (h ? \".\" : \"#\") + n, e.forced) && _ && Ti(_, n), s = E[n], i && (a = e.noTargetGet ? (d = Ei(_, n)) && d.value : _[n]), o = i && a ? a : t[n], i && typeof s == typeof o || (c = e.bind && i ? gi(o, li) : e.wrap && i ? vi(o) : p && _i(o) ? pi(o) : o, (e.sham || o && o.sham || s && s.sham) && Si(c, \"sham\", !0), Si(E, n, c), p && (Ti(mi, r = u + \"Prototype\") || Si(mi, r, {}), Si(mi[r], n, o), e.real && f && !f[n] && Si(f, n, o)));\n    },\n    Ii = Math.ceil,\n    yi = Math.floor,\n    Ci = function Ci(e) {\n      var t = +e;\n      return t != t || 0 === t ? 0 : (t > 0 ? yi : Ii)(t);\n    },\n    Ai = Ci,\n    Oi = Math.min,\n    bi = function bi(e) {\n      return e > 0 ? Oi(Ai(e), 9007199254740991) : 0;\n    },\n    wi = function wi(e) {\n      return bi(e.length);\n    },\n    Ni = Ie,\n    Di = je,\n    Pi = F,\n    Li = wi,\n    ki = h.TypeError,\n    Mi = function Mi(e) {\n      return function (t, i, r, n) {\n        Ni(i);\n        var o = Di(t),\n          s = Pi(o),\n          a = Li(o),\n          c = e ? a - 1 : 0,\n          d = e ? -1 : 1;\n        if (r < 2) for (;;) {\n          if (c in s) {\n            n = s[c], c += d;\n            break;\n          }\n          if (c += d, e ? c < 0 : a <= c) throw ki(\"Reduce of empty array with no initial value\");\n        }\n        for (; e ? c >= 0 : a > c; c += d) c in s && (n = i(n, s[c], c, o));\n        return n;\n      };\n    },\n    Ui = {\n      left: Mi(!1),\n      right: Mi(!0)\n    },\n    xi = i,\n    Vi = function Vi(e, t) {\n      var i = [][e];\n      return !!i && xi(function () {\n        i.call(null, t || function () {\n          throw 1;\n        }, 1);\n      });\n    },\n    ji = \"process\" == k(h.process),\n    Fi = Ui.left,\n    Bi = ae,\n    Gi = ji;\n  Ri({\n    target: \"Array\",\n    proto: !0,\n    forced: !Vi(\"reduce\") || !Gi && Bi > 79 && Bi < 83\n  }, {\n    reduce: function reduce(e) {\n      var t = arguments.length;\n      return Fi(this, e, t, t > 1 ? arguments[1] : void 0);\n    }\n  });\n  var Wi = J,\n    Hi = function Hi(e) {\n      return Wi[e + \"Prototype\"];\n    },\n    Ki = Hi(\"Array\").reduce,\n    Yi = u,\n    qi = Ki,\n    Ji = Array.prototype,\n    Xi = function Xi(e) {\n      var t = e.reduce;\n      return e === Ji || Yi(Ji, e) && t === Ji.reduce ? qi : t;\n    },\n    zi = Xi;\n  var Qi = !0,\n    Zi = !0;\n  function $i(e, t, i) {\n    var r = e.match(t);\n    return r && r.length >= i && parseInt(r[i], 10);\n  }\n  function er(e, t, i) {\n    if (!e.RTCPeerConnection) return;\n    var r = e.RTCPeerConnection.prototype,\n      n = r.addEventListener;\n    r.addEventListener = function (e, r) {\n      if (e !== t) return n.apply(this, arguments);\n      var o = function o(e) {\n        var t = i(e);\n        t && (r.handleEvent ? r.handleEvent(t) : r(t));\n      };\n      return this._eventMap = this._eventMap || {}, this._eventMap[t] || (this._eventMap[t] = new Map()), this._eventMap[t].set(r, o), n.apply(this, [e, o]);\n    };\n    var o = r.removeEventListener;\n    r.removeEventListener = function (e, i) {\n      if (e !== t || !this._eventMap || !this._eventMap[t]) return o.apply(this, arguments);\n      if (!this._eventMap[t].has(i)) return o.apply(this, arguments);\n      var r = this._eventMap[t].get(i);\n      return this._eventMap[t].delete(i), 0 === this._eventMap[t].size && delete this._eventMap[t], 0 === Object.keys(this._eventMap).length && delete this._eventMap, o.apply(this, [e, r]);\n    }, Object.defineProperty(r, \"on\" + t, {\n      get: function get() {\n        return this[\"_on\" + t];\n      },\n      set: function set(e) {\n        this[\"_on\" + t] && (this.removeEventListener(t, this[\"_on\" + t]), delete this[\"_on\" + t]), e && this.addEventListener(t, this[\"_on\" + t] = e);\n      },\n      enumerable: !0,\n      configurable: !0\n    });\n  }\n  function tr(e) {\n    return \"boolean\" != typeof e ? new Error(\"Argument type: \" + typeof e + \". Please use a boolean.\") : (Qi = e, e ? \"adapter.js logging disabled\" : \"adapter.js logging enabled\");\n  }\n  function ir(e) {\n    return \"boolean\" != typeof e ? new Error(\"Argument type: \" + typeof e + \". Please use a boolean.\") : (Zi = !e, \"adapter.js deprecation warnings \" + (e ? \"disabled\" : \"enabled\"));\n  }\n  function rr() {\n    if (\"object\" == typeof window) {\n      if (Qi) return;\n      \"undefined\" != typeof console && \"function\" == typeof console.log && console.log.apply(console, arguments);\n    }\n  }\n  function nr(e, t) {\n    Zi && console.warn(e + \" is deprecated, please use \" + t + \" instead.\");\n  }\n  function or(e) {\n    var t = {\n      browser: null,\n      version: null\n    };\n    if (void 0 === e || !e.navigator) return t.browser = \"Not a browser.\", t;\n    var i = e.navigator;\n    if (i.mozGetUserMedia) t.browser = \"firefox\", t.version = $i(i.userAgent, /Firefox\\/(\\d+)\\./, 1);else if (i.webkitGetUserMedia || !1 === e.isSecureContext && e.webkitRTCPeerConnection) t.browser = \"chrome\", t.version = $i(i.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);else {\n      if (!e.RTCPeerConnection || !i.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) return t.browser = \"Not a supported browser.\", t;\n      t.browser = \"safari\", t.version = $i(i.userAgent, /AppleWebKit\\/(\\d+)\\./, 1), t.supportsUnifiedPlan = e.RTCRtpTransceiver && \"currentDirection\" in e.RTCRtpTransceiver.prototype;\n    }\n    return t;\n  }\n  function sr(e) {\n    return \"[object Object]\" === Object.prototype.toString.call(e);\n  }\n  function ar(e) {\n    var t;\n    return sr(e) ? zi(t = Object.keys(e)).call(t, function (t, i) {\n      var r = sr(e[i]),\n        n = r ? ar(e[i]) : e[i],\n        o = r && !Object.keys(n).length;\n      return void 0 === n || o ? t : Object.assign(t, _defineProperty({}, i, n));\n    }, {}) : e;\n  }\n  function cr(e, t, i) {\n    var r = i ? \"outbound-rtp\" : \"inbound-rtp\",\n      n = new Map();\n    if (null === t) return n;\n    var o = [];\n    return e.forEach(function (e) {\n      \"track\" === e.type && e.trackIdentifier === t.id && o.push(e);\n    }), o.forEach(function (t) {\n      e.forEach(function (i) {\n        i.type === r && i.trackId === t.id && function e(t, i, r) {\n          i && !r.has(i.id) && (r.set(i.id, i), Object.keys(i).forEach(function (n) {\n            n.endsWith(\"Id\") ? e(t, t.get(i[n]), r) : n.endsWith(\"Ids\") && i[n].forEach(function (i) {\n              e(t, t.get(i), r);\n            });\n          }));\n        }(e, i, n);\n      });\n    }), n;\n  }\n  var dr = Ne.exports,\n    ur = qe,\n    lr = dr(\"keys\"),\n    hr = function hr(e) {\n      return lr[e] || (lr[e] = ur(e));\n    },\n    pr = !i(function () {\n      function e() {}\n      return e.prototype.constructor = null, Object.getPrototypeOf(new e()) !== e.prototype;\n    }),\n    _r = h,\n    Er = Ge,\n    fr = g,\n    mr = je,\n    gr = pr,\n    Sr = hr(\"IE_PROTO\"),\n    Tr = _r.Object,\n    vr = Tr.prototype,\n    Rr = gr ? Tr.getPrototypeOf : function (e) {\n      var t = mr(e);\n      if (Er(t, Sr)) return t[Sr];\n      var i = t.constructor;\n      return fr(i) && t instanceof i ? i.prototype : t instanceof Tr ? vr : null;\n    },\n    Ir = h,\n    yr = g,\n    Cr = Ir.String,\n    Ar = Ir.TypeError,\n    Or = d,\n    br = zt,\n    wr = function wr(e) {\n      if (\"object\" == typeof e || yr(e)) return e;\n      throw Ar(\"Can't set \" + Cr(e) + \" as a prototype\");\n    },\n    Nr = Object.setPrototypeOf || (\"__proto__\" in {} ? function () {\n      var e,\n        t = !1,\n        i = {};\n      try {\n        (e = Or(Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\").set))(i, []), t = i instanceof Array;\n      } catch (e) {}\n      return function (i, r) {\n        return br(i), wr(r), t ? e(i, r) : i.__proto__ = r, i;\n      };\n    }() : void 0),\n    Dr = {},\n    Pr = Ci,\n    Lr = Math.max,\n    kr = Math.min,\n    Mr = function Mr(e, t) {\n      var i = Pr(e);\n      return i < 0 ? Lr(i + t, 0) : kr(i, t);\n    },\n    Ur = K,\n    xr = Mr,\n    Vr = wi,\n    jr = function jr(e) {\n      return function (t, i, r) {\n        var n,\n          o = Ur(t),\n          s = Vr(o),\n          a = xr(r, s);\n        if (e && i != i) {\n          for (; s > a;) if ((n = o[a++]) != n) return !0;\n        } else for (; s > a; a++) if ((e || a in o) && o[a] === i) return e || a || 0;\n        return !e && -1;\n      };\n    },\n    Fr = {\n      includes: jr(!0),\n      indexOf: jr(!1)\n    },\n    Br = {},\n    Gr = Ge,\n    Wr = K,\n    Hr = Fr.indexOf,\n    Kr = Br,\n    Yr = d([].push),\n    qr = function qr(e, t) {\n      var i,\n        r = Wr(e),\n        n = 0,\n        o = [];\n      for (i in r) !Gr(Kr, i) && Gr(r, i) && Yr(o, i);\n      for (; t.length > n;) Gr(r, i = t[n++]) && (~Hr(o, i) || Yr(o, i));\n      return o;\n    },\n    Jr = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"],\n    Xr = qr,\n    zr = Jr.concat(\"length\", \"prototype\");\n  Dr.f = Object.getOwnPropertyNames || function (e) {\n    return Xr(e, zr);\n  };\n  var Qr = {};\n  Qr.f = Object.getOwnPropertySymbols;\n  var Zr = $,\n    $r = Dr,\n    en = Qr,\n    tn = zt,\n    rn = d([].concat),\n    nn = Zr(\"Reflect\", \"ownKeys\") || function (e) {\n      var t = $r.f(tn(e)),\n        i = en.f;\n      return i ? rn(t, i(e)) : t;\n    },\n    on = Ge,\n    sn = nn,\n    an = S,\n    cn = Ht,\n    dn = {},\n    un = qr,\n    ln = Jr,\n    hn = Object.keys || function (e) {\n      return un(e, ln);\n    },\n    pn = T,\n    _n = Kt,\n    En = Ht,\n    fn = zt,\n    mn = K,\n    gn = hn;\n  dn.f = pn && !_n ? Object.defineProperties : function (e, t) {\n    fn(e);\n    for (var i, r = mn(t), n = gn(t), o = n.length, s = 0; o > s;) En.f(e, i = n[s++], r[i]);\n    return e;\n  };\n  var Sn,\n    Tn = $(\"document\", \"documentElement\"),\n    vn = zt,\n    Rn = dn,\n    In = Jr,\n    yn = Br,\n    Cn = Tn,\n    An = St,\n    On = hr(\"IE_PROTO\"),\n    bn = function bn() {},\n    wn = function wn(e) {\n      return \"<script>\" + e + \"</\" + \"script>\";\n    },\n    Nn = function Nn(e) {\n      e.write(wn(\"\")), e.close();\n      var t = e.parentWindow.Object;\n      return e = null, t;\n    },\n    _Dn = function Dn() {\n      try {\n        Sn = new ActiveXObject(\"htmlfile\");\n      } catch (e) {}\n      var e, t;\n      _Dn = \"undefined\" != typeof document ? document.domain && Sn ? Nn(Sn) : ((t = An(\"iframe\")).style.display = \"none\", Cn.appendChild(t), t.src = String(\"javascript:\"), (e = t.contentWindow.document).open(), e.write(wn(\"document.F=Object\")), e.close(), e.F) : Nn(Sn);\n      for (var i = In.length; i--;) delete _Dn.prototype[In[i]];\n      return _Dn();\n    };\n  yn[On] = !0;\n  var Pn = Object.create || function (e, t) {\n      var i;\n      return null !== e ? (bn.prototype = vn(e), i = new bn(), bn.prototype = null, i[On] = e) : i = _Dn(), void 0 === t ? i : Rn.f(i, t);\n    },\n    Ln = d(\"\".replace),\n    kn = String(Error(\"zxcasd\").stack),\n    Mn = /\\n\\s*at [^:]*:[^\\n]*/,\n    Un = Mn.test(kn),\n    xn = q,\n    Vn = ui,\n    jn = {},\n    Fn = jn,\n    Bn = nt(\"iterator\"),\n    Gn = Array.prototype,\n    Wn = function Wn(e) {\n      return void 0 !== e && (Fn.Array === e || Gn[Bn] === e);\n    },\n    Hn = {};\n  Hn[nt(\"toStringTag\")] = \"z\";\n  var Kn = \"[object z]\" === String(Hn),\n    Yn = h,\n    qn = Kn,\n    Jn = g,\n    Xn = k,\n    zn = nt(\"toStringTag\"),\n    Qn = Yn.Object,\n    Zn = \"Arguments\" == Xn(function () {\n      return arguments;\n    }()),\n    $n = qn ? Xn : function (e) {\n      var t, i, r;\n      return void 0 === e ? \"Undefined\" : null === e ? \"Null\" : \"string\" == typeof (i = function (e, t) {\n        try {\n          return e[t];\n        } catch (e) {}\n      }(t = Qn(e), zn)) ? i : Zn ? Xn(t) : \"Object\" == (r = Xn(t)) && Jn(t.callee) ? \"Arguments\" : r;\n    },\n    eo = $n,\n    to = Ce,\n    io = jn,\n    ro = nt(\"iterator\"),\n    no = function no(e) {\n      if (null != e) return to(e, ro) || to(e, \"@@iterator\") || io[eo(e)];\n    },\n    oo = I,\n    so = Ie,\n    ao = zt,\n    co = Se,\n    uo = no,\n    lo = h.TypeError,\n    ho = function ho(e, t) {\n      var i = arguments.length < 2 ? uo(e) : t;\n      if (so(i)) return ao(oo(i, e));\n      throw lo(co(e) + \" is not iterable\");\n    },\n    po = I,\n    _o = zt,\n    Eo = Ce,\n    fo = function fo(e, t, i) {\n      var r, n;\n      _o(e);\n      try {\n        if (!(r = Eo(e, \"return\"))) {\n          if (\"throw\" === t) throw i;\n          return i;\n        }\n        r = po(r, e);\n      } catch (e) {\n        n = !0, r = e;\n      }\n      if (\"throw\" === t) throw i;\n      if (n) throw r;\n      return _o(r), i;\n    },\n    mo = Wt,\n    go = I,\n    So = zt,\n    To = Se,\n    vo = Wn,\n    Ro = wi,\n    Io = u,\n    yo = ho,\n    Co = no,\n    Ao = fo,\n    Oo = h.TypeError,\n    bo = function bo(e, t) {\n      this.stopped = e, this.result = t;\n    },\n    wo = bo.prototype,\n    No = function No(e, t, i) {\n      var r,\n        n,\n        o,\n        s,\n        a,\n        c,\n        d,\n        u = i && i.that,\n        l = !(!i || !i.AS_ENTRIES),\n        h = !(!i || !i.IS_ITERATOR),\n        p = !(!i || !i.INTERRUPTED),\n        _ = mo(t, u),\n        E = function E(e) {\n          return r && Ao(r, \"normal\", e), new bo(!0, e);\n        },\n        f = function f(e) {\n          return l ? (So(e), p ? _(e[0], e[1], E) : _(e[0], e[1])) : p ? _(e, E) : _(e);\n        };\n      if (h) r = e;else {\n        if (!(n = Co(e))) throw Oo(To(e) + \" is not iterable\");\n        if (vo(n)) {\n          for (o = 0, s = Ro(e); s > o; o++) if ((a = f(e[o])) && Io(wo, a)) return a;\n          return new bo(!1);\n        }\n        r = yo(e, n);\n      }\n      for (c = r.next; !(d = go(c, r)).done;) {\n        try {\n          a = f(d.value);\n        } catch (e) {\n          Ao(r, \"throw\", e);\n        }\n        if (\"object\" == typeof a && a && Io(wo, a)) return a;\n      }\n      return new bo(!1);\n    },\n    Do = $n,\n    Po = h.String,\n    Lo = function Lo(e) {\n      if (\"Symbol\" === Do(e)) throw TypeError(\"Cannot convert a Symbol value to a string\");\n      return Po(e);\n    },\n    ko = Lo,\n    Mo = N,\n    Uo = !i(function () {\n      var e = Error(\"a\");\n      return !(\"stack\" in e) || (Object.defineProperty(e, \"stack\", Mo(1, 7)), 7 !== e.stack);\n    }),\n    xo = Ri,\n    Vo = h,\n    jo = u,\n    Fo = Rr,\n    Bo = Nr,\n    Go = function Go(e, t, i) {\n      for (var r = sn(t), n = cn.f, o = an.f, s = 0; s < r.length; s++) {\n        var a = r[s];\n        on(e, a) || i && on(i, a) || n(e, a, o(t, a));\n      }\n    },\n    Wo = Pn,\n    Ho = ui,\n    Ko = N,\n    Yo = function Yo(e, t) {\n      if (Un && \"string\" == typeof e) for (; t--;) e = Ln(e, Mn, \"\");\n      return e;\n    },\n    qo = function qo(e, t) {\n      xn(t) && \"cause\" in t && Vn(e, \"cause\", t.cause);\n    },\n    Jo = No,\n    Xo = function Xo(e, t) {\n      return void 0 === e ? arguments.length < 2 ? \"\" : t : ko(e);\n    },\n    zo = Uo,\n    Qo = nt(\"toStringTag\"),\n    Zo = Vo.Error,\n    $o = [].push,\n    es = function es(e, t) {\n      var i,\n        r = arguments.length > 2 ? arguments[2] : void 0,\n        n = jo(ts, this);\n      Bo ? i = Bo(new Zo(), n ? Fo(this) : ts) : (i = n ? this : Wo(ts), Ho(i, Qo, \"Error\")), void 0 !== t && Ho(i, \"message\", Xo(t)), zo && Ho(i, \"stack\", Yo(i.stack, 1)), qo(i, r);\n      var o = [];\n      return Jo(e, $o, {\n        that: o\n      }), Ho(i, \"errors\", o), i;\n    };\n  Bo ? Bo(es, Zo) : Go(es, Zo, {\n    name: !0\n  });\n  var ts = es.prototype = Wo(Zo.prototype, {\n    constructor: Ko(1, es),\n    message: Ko(1, \"\"),\n    name: Ko(1, \"AggregateError\")\n  });\n  xo({\n    global: !0\n  }, {\n    AggregateError: es\n  });\n  var is = g,\n    rs = Me,\n    ns = d(Function.toString);\n  is(rs.inspectSource) || (rs.inspectSource = function (e) {\n    return ns(e);\n  });\n  var os,\n    ss,\n    as,\n    cs = rs.inspectSource,\n    ds = g,\n    us = cs,\n    ls = h.WeakMap,\n    hs = ds(ls) && /native code/.test(us(ls)),\n    ps = h,\n    _s = d,\n    Es = q,\n    fs = ui,\n    ms = Ge,\n    gs = Me,\n    Ss = hr,\n    Ts = Br,\n    vs = \"Object already initialized\",\n    Rs = ps.TypeError,\n    Is = ps.WeakMap;\n  if (hs || gs.state) {\n    var ys = gs.state || (gs.state = new Is()),\n      Cs = _s(ys.get),\n      As = _s(ys.has),\n      Os = _s(ys.set);\n    os = function os(e, t) {\n      if (As(ys, e)) throw new Rs(vs);\n      return t.facade = e, Os(ys, e, t), t;\n    }, ss = function ss(e) {\n      return Cs(ys, e) || {};\n    }, as = function as(e) {\n      return As(ys, e);\n    };\n  } else {\n    var bs = Ss(\"state\");\n    Ts[bs] = !0, os = function os(e, t) {\n      if (ms(e, bs)) throw new Rs(vs);\n      return t.facade = e, fs(e, bs, t), t;\n    }, ss = function ss(e) {\n      return ms(e, bs) ? e[bs] : {};\n    }, as = function as(e) {\n      return ms(e, bs);\n    };\n  }\n  var ws,\n    Ns,\n    Ds,\n    Ps = {\n      set: os,\n      get: ss,\n      has: as,\n      enforce: function enforce(e) {\n        return as(e) ? ss(e) : os(e, {});\n      },\n      getterFor: function getterFor(e) {\n        return function (t) {\n          var i;\n          if (!Es(t) || (i = ss(t)).type !== e) throw Rs(\"Incompatible receiver, \" + e + \" required\");\n          return i;\n        };\n      }\n    },\n    Ls = T,\n    ks = Ge,\n    Ms = Function.prototype,\n    Us = Ls && Object.getOwnPropertyDescriptor,\n    xs = ks(Ms, \"name\"),\n    Vs = {\n      EXISTS: xs,\n      PROPER: xs && \"something\" === function () {}.name,\n      CONFIGURABLE: xs && (!Ls || Ls && Us(Ms, \"name\").configurable)\n    },\n    js = ui,\n    Fs = function Fs(e, t, i, r) {\n      r && r.enumerable ? e[t] = i : js(e, t, i);\n    },\n    Bs = i,\n    Gs = g,\n    Ws = Pn,\n    Hs = Rr,\n    Ks = Fs,\n    Ys = nt(\"iterator\"),\n    qs = !1;\n  [].keys && (\"next\" in (Ds = [].keys()) ? (Ns = Hs(Hs(Ds))) !== Object.prototype && (ws = Ns) : qs = !0);\n  var Js = null == ws || Bs(function () {\n    var e = {};\n    return ws[Ys].call(e) !== e;\n  });\n  Gs((ws = Js ? {} : Ws(ws))[Ys]) || Ks(ws, Ys, function () {\n    return this;\n  });\n  var Xs = {\n      IteratorPrototype: ws,\n      BUGGY_SAFARI_ITERATORS: qs\n    },\n    zs = $n,\n    Qs = Kn ? {}.toString : function () {\n      return \"[object \" + zs(this) + \"]\";\n    },\n    Zs = Kn,\n    $s = Ht.f,\n    ea = ui,\n    ta = Ge,\n    ia = Qs,\n    ra = nt(\"toStringTag\"),\n    na = function na(e, t, i, r) {\n      if (e) {\n        var n = i ? e : e.prototype;\n        ta(n, ra) || $s(n, ra, {\n          configurable: !0,\n          value: t\n        }), r && !Zs && ea(n, \"toString\", ia);\n      }\n    },\n    oa = Xs.IteratorPrototype,\n    sa = Pn,\n    aa = N,\n    ca = na,\n    da = jn,\n    ua = function ua() {\n      return this;\n    },\n    la = function la(e, t, i, r) {\n      var n = t + \" Iterator\";\n      return e.prototype = sa(oa, {\n        next: aa(+!r, i)\n      }), ca(e, n, !1, !0), da[n] = ua, e;\n    },\n    ha = Ri,\n    pa = I,\n    _a = la,\n    Ea = Rr,\n    fa = na,\n    ma = Fs,\n    ga = jn,\n    Sa = Vs.PROPER,\n    Ta = Xs.BUGGY_SAFARI_ITERATORS,\n    va = nt(\"iterator\"),\n    Ra = \"keys\",\n    Ia = \"values\",\n    ya = \"entries\",\n    Ca = function Ca() {\n      return this;\n    },\n    Aa = function Aa(e, t, i, r, n, o, s) {\n      _a(i, t, r);\n      var a,\n        c,\n        d,\n        u = function u(e) {\n          if (e === n && E) return E;\n          if (!Ta && e in p) return p[e];\n          switch (e) {\n            case Ra:\n            case Ia:\n            case ya:\n              return function () {\n                return new i(this, e);\n              };\n          }\n          return function () {\n            return new i(this);\n          };\n        },\n        l = t + \" Iterator\",\n        h = !1,\n        p = e.prototype,\n        _ = p[va] || p[\"@@iterator\"] || n && p[n],\n        E = !Ta && _ || u(n),\n        f = \"Array\" == t && p.entries || _;\n      if (f && (a = Ea(f.call(new e()))) !== Object.prototype && a.next && (fa(a, l, !0, !0), ga[l] = Ca), Sa && n == Ia && _ && _.name !== Ia && (h = !0, E = function E() {\n        return pa(_, this);\n      }), n) if (c = {\n        values: u(Ia),\n        keys: o ? E : u(Ra),\n        entries: u(ya)\n      }, s) for (d in c) (Ta || h || !(d in p)) && ma(p, d, c[d]);else ha({\n        target: t,\n        proto: !0,\n        forced: Ta || h\n      }, c);\n      return s && p[va] !== E && ma(p, va, E, {\n        name: n\n      }), ga[t] = E, c;\n    },\n    Oa = K,\n    ba = jn,\n    wa = Ps;\n  Ht.f;\n  var Na = Aa,\n    Da = \"Array Iterator\",\n    Pa = wa.set,\n    La = wa.getterFor(Da);\n  Na(Array, \"Array\", function (e, t) {\n    Pa(this, {\n      type: Da,\n      target: Oa(e),\n      index: 0,\n      kind: t\n    });\n  }, function () {\n    var e = La(this),\n      t = e.target,\n      i = e.kind,\n      r = e.index++;\n    return !t || r >= t.length ? (e.target = void 0, {\n      value: void 0,\n      done: !0\n    }) : \"keys\" == i ? {\n      value: r,\n      done: !1\n    } : \"values\" == i ? {\n      value: t[r],\n      done: !1\n    } : {\n      value: [r, t[r]],\n      done: !1\n    };\n  }, \"values\"), ba.Arguments = ba.Array;\n  var ka = h.Promise,\n    Ma = Fs,\n    Ua = function Ua(e, t, i) {\n      for (var r in t) i && i.unsafe && e[r] ? e[r] = t[r] : Ma(e, r, t[r], i);\n      return e;\n    },\n    xa = $,\n    Va = Ht,\n    ja = T,\n    Fa = nt(\"species\"),\n    Ba = u,\n    Ga = h.TypeError,\n    Wa = function Wa(e, t) {\n      if (Ba(t, e)) return e;\n      throw Ga(\"Incorrect invocation\");\n    },\n    Ha = nt(\"iterator\"),\n    Ka = !1;\n  try {\n    var Ya = 0,\n      qa = {\n        next: function next() {\n          return {\n            done: !!Ya++\n          };\n        },\n        return: function _return() {\n          Ka = !0;\n        }\n      };\n    qa[Ha] = function () {\n      return this;\n    }, Array.from(qa, function () {\n      throw 2;\n    });\n  } catch (e) {}\n  var Ja = d,\n    Xa = i,\n    za = g,\n    Qa = $n,\n    Za = cs,\n    $a = function $a() {},\n    ec = [],\n    tc = $(\"Reflect\", \"construct\"),\n    ic = /^\\s*(?:class|function)\\b/,\n    rc = Ja(ic.exec),\n    nc = !ic.exec($a),\n    oc = function oc(e) {\n      if (!za(e)) return !1;\n      try {\n        return tc($a, ec, e), !0;\n      } catch (e) {\n        return !1;\n      }\n    },\n    sc = function sc(e) {\n      if (!za(e)) return !1;\n      switch (Qa(e)) {\n        case \"AsyncFunction\":\n        case \"GeneratorFunction\":\n        case \"AsyncGeneratorFunction\":\n          return !1;\n      }\n      try {\n        return nc || !!rc(ic, Za(e));\n      } catch (e) {\n        return !0;\n      }\n    };\n  sc.sham = !0;\n  var ac,\n    cc,\n    dc,\n    uc,\n    lc = !tc || Xa(function () {\n      var e;\n      return oc(oc.call) || !oc(Object) || !oc(function () {\n        e = !0;\n      }) || e;\n    }) ? sc : oc,\n    hc = lc,\n    pc = Se,\n    _c = h.TypeError,\n    Ec = zt,\n    fc = function fc(e) {\n      if (hc(e)) return e;\n      throw _c(pc(e) + \" is not a constructor\");\n    },\n    mc = nt(\"species\"),\n    gc = function gc(e, t) {\n      var i,\n        r = Ec(e).constructor;\n      return void 0 === r || null == (i = Ec(r)[mc]) ? t : fc(i);\n    },\n    Sc = d([].slice),\n    Tc = /(?:ipad|iphone|ipod).*applewebkit/i.test(ee),\n    vc = h,\n    Rc = m,\n    Ic = Wt,\n    yc = g,\n    Cc = Ge,\n    Ac = i,\n    Oc = Tn,\n    bc = Sc,\n    wc = St,\n    Nc = Tc,\n    Dc = ji,\n    Pc = vc.setImmediate,\n    Lc = vc.clearImmediate,\n    kc = vc.process,\n    Mc = vc.Dispatch,\n    Uc = vc.Function,\n    xc = vc.MessageChannel,\n    Vc = vc.String,\n    jc = 0,\n    Fc = {},\n    Bc = \"onreadystatechange\";\n  try {\n    ac = vc.location;\n  } catch (e) {}\n  var Gc = function Gc(e) {\n      if (Cc(Fc, e)) {\n        var t = Fc[e];\n        delete Fc[e], t();\n      }\n    },\n    Wc = function Wc(e) {\n      return function () {\n        Gc(e);\n      };\n    },\n    Hc = function Hc(e) {\n      Gc(e.data);\n    },\n    Kc = function Kc(e) {\n      vc.postMessage(Vc(e), ac.protocol + \"//\" + ac.host);\n    };\n  Pc && Lc || (Pc = function Pc(e) {\n    var t = bc(arguments, 1);\n    return Fc[++jc] = function () {\n      Rc(yc(e) ? e : Uc(e), void 0, t);\n    }, cc(jc), jc;\n  }, Lc = function Lc(e) {\n    delete Fc[e];\n  }, Dc ? cc = function cc(e) {\n    kc.nextTick(Wc(e));\n  } : Mc && Mc.now ? cc = function cc(e) {\n    Mc.now(Wc(e));\n  } : xc && !Nc ? (uc = (dc = new xc()).port2, dc.port1.onmessage = Hc, cc = Ic(uc.postMessage, uc)) : vc.addEventListener && yc(vc.postMessage) && !vc.importScripts && ac && \"file:\" !== ac.protocol && !Ac(Kc) ? (cc = Kc, vc.addEventListener(\"message\", Hc, !1)) : cc = Bc in wc(\"script\") ? function (e) {\n    Oc.appendChild(wc(\"script\")).onreadystatechange = function () {\n      Oc.removeChild(this), Gc(e);\n    };\n  } : function (e) {\n    setTimeout(Wc(e), 0);\n  });\n  var Yc,\n    qc,\n    Jc,\n    Xc,\n    zc,\n    Qc,\n    Zc,\n    $c,\n    ed = {\n      set: Pc,\n      clear: Lc\n    },\n    td = h,\n    id = /ipad|iphone|ipod/i.test(ee) && void 0 !== td.Pebble,\n    rd = /web0s(?!.*chrome)/i.test(ee),\n    nd = h,\n    od = Wt,\n    sd = S.f,\n    ad = ed.set,\n    cd = Tc,\n    dd = id,\n    ud = rd,\n    ld = ji,\n    hd = nd.MutationObserver || nd.WebKitMutationObserver,\n    pd = nd.document,\n    _d = nd.process,\n    Ed = nd.Promise,\n    fd = sd(nd, \"queueMicrotask\"),\n    md = fd && fd.value;\n  md || (Yc = function Yc() {\n    var e, t;\n    for (ld && (e = _d.domain) && e.exit(); qc;) {\n      t = qc.fn, qc = qc.next;\n      try {\n        t();\n      } catch (e) {\n        throw qc ? Xc() : Jc = void 0, e;\n      }\n    }\n    Jc = void 0, e && e.enter();\n  }, cd || ld || ud || !hd || !pd ? !dd && Ed && Ed.resolve ? ((Zc = Ed.resolve(void 0)).constructor = Ed, $c = od(Zc.then, Zc), Xc = function Xc() {\n    $c(Yc);\n  }) : ld ? Xc = function Xc() {\n    _d.nextTick(Yc);\n  } : (ad = od(ad, nd), Xc = function Xc() {\n    ad(Yc);\n  }) : (zc = !0, Qc = pd.createTextNode(\"\"), new hd(Yc).observe(Qc, {\n    characterData: !0\n  }), Xc = function Xc() {\n    Qc.data = zc = !zc;\n  }));\n  var gd = md || function (e) {\n      var t = {\n        fn: e,\n        next: void 0\n      };\n      Jc && (Jc.next = t), qc || (qc = t, Xc()), Jc = t;\n    },\n    Sd = {},\n    Td = Ie,\n    vd = function vd(e) {\n      var t, i;\n      this.promise = new e(function (e, r) {\n        if (void 0 !== t || void 0 !== i) throw TypeError(\"Bad Promise constructor\");\n        t = e, i = r;\n      }), this.resolve = Td(t), this.reject = Td(i);\n    };\n  Sd.f = function (e) {\n    return new vd(e);\n  };\n  var Rd = zt,\n    Id = q,\n    yd = Sd,\n    Cd = function Cd(e, t) {\n      if (Rd(e), Id(t) && t.constructor === e) return t;\n      var i = yd.f(e);\n      return (0, i.resolve)(t), i.promise;\n    },\n    Ad = h,\n    Od = function Od(e) {\n      try {\n        return {\n          error: !1,\n          value: e()\n        };\n      } catch (e) {\n        return {\n          error: !0,\n          value: e\n        };\n      }\n    },\n    bd = function bd() {\n      this.head = null, this.tail = null;\n    };\n  bd.prototype = {\n    add: function add(e) {\n      var t = {\n        item: e,\n        next: null\n      };\n      this.head ? this.tail.next = t : this.head = t, this.tail = t;\n    },\n    get: function get() {\n      var e = this.head;\n      if (e) return this.head = e.next, this.tail === e && (this.tail = null), e.item;\n    }\n  };\n  var wd,\n    Nd,\n    Dd,\n    Pd = \"object\" == typeof window,\n    Ld = Ri,\n    kd = h,\n    Md = $,\n    Ud = I,\n    xd = ka,\n    Vd = Ua,\n    jd = na,\n    Fd = function Fd(e) {\n      var t = xa(e),\n        i = Va.f;\n      ja && t && !t[Fa] && i(t, Fa, {\n        configurable: !0,\n        get: function get() {\n          return this;\n        }\n      });\n    },\n    Bd = Ie,\n    Gd = g,\n    Wd = q,\n    Hd = Wa,\n    Kd = cs,\n    Yd = No,\n    qd = function qd(e, t) {\n      if (!t && !Ka) return !1;\n      var i = !1;\n      try {\n        var r = {};\n        r[Ha] = function () {\n          return {\n            next: function next() {\n              return {\n                done: i = !0\n              };\n            }\n          };\n        }, e(r);\n      } catch (e) {}\n      return i;\n    },\n    Jd = gc,\n    Xd = ed.set,\n    zd = gd,\n    Qd = Cd,\n    Zd = function Zd(e, t) {\n      var i = Ad.console;\n      i && i.error && (1 == arguments.length ? i.error(e) : i.error(e, t));\n    },\n    $d = Sd,\n    eu = Od,\n    tu = bd,\n    iu = Ps,\n    ru = jt,\n    nu = Pd,\n    ou = ji,\n    su = ae,\n    au = nt(\"species\"),\n    cu = \"Promise\",\n    du = iu.getterFor(cu),\n    uu = iu.set,\n    lu = iu.getterFor(cu),\n    hu = xd && xd.prototype,\n    pu = xd,\n    _u = hu,\n    Eu = kd.TypeError,\n    fu = kd.document,\n    mu = kd.process,\n    gu = $d.f,\n    Su = gu,\n    Tu = !!(fu && fu.createEvent && kd.dispatchEvent),\n    vu = Gd(kd.PromiseRejectionEvent),\n    Ru = \"unhandledrejection\",\n    Iu = ru(cu, function () {\n      var e = Kd(pu),\n        t = e !== String(pu);\n      if (!t && 66 === su) return !0;\n      if (!_u.finally) return !0;\n      if (su >= 51 && /native code/.test(e)) return !1;\n      var i = new pu(function (e) {\n          e(1);\n        }),\n        r = function r(e) {\n          e(function () {}, function () {});\n        };\n      return (i.constructor = {})[au] = r, !(i.then(function () {}) instanceof r) || !t && nu && !vu;\n    }),\n    yu = Iu || !qd(function (e) {\n      pu.all(e).catch(function () {});\n    }),\n    Cu = function Cu(e) {\n      var t;\n      return !(!Wd(e) || !Gd(t = e.then)) && t;\n    },\n    Au = function Au(e, t) {\n      var i,\n        r,\n        n,\n        o = t.value,\n        s = 1 == t.state,\n        a = s ? e.ok : e.fail,\n        c = e.resolve,\n        d = e.reject,\n        u = e.domain;\n      try {\n        a ? (s || (2 === t.rejection && Du(t), t.rejection = 1), !0 === a ? i = o : (u && u.enter(), i = a(o), u && (u.exit(), n = !0)), i === e.promise ? d(Eu(\"Promise-chain cycle\")) : (r = Cu(i)) ? Ud(r, i, c, d) : c(i)) : d(o);\n      } catch (e) {\n        u && !n && u.exit(), d(e);\n      }\n    },\n    Ou = function Ou(e, t) {\n      e.notified || (e.notified = !0, zd(function () {\n        for (var i, r = e.reactions; i = r.get();) Au(i, e);\n        e.notified = !1, t && !e.rejection && wu(e);\n      }));\n    },\n    bu = function bu(e, t, i) {\n      var r, n;\n      Tu ? ((r = fu.createEvent(\"Event\")).promise = t, r.reason = i, r.initEvent(e, !1, !0), kd.dispatchEvent(r)) : r = {\n        promise: t,\n        reason: i\n      }, !vu && (n = kd[\"on\" + e]) ? n(r) : e === Ru && Zd(\"Unhandled promise rejection\", i);\n    },\n    wu = function wu(e) {\n      Ud(Xd, kd, function () {\n        var t,\n          i = e.facade,\n          r = e.value;\n        if (Nu(e) && (t = eu(function () {\n          ou ? mu.emit(\"unhandledRejection\", r, i) : bu(Ru, i, r);\n        }), e.rejection = ou || Nu(e) ? 2 : 1, t.error)) throw t.value;\n      });\n    },\n    Nu = function Nu(e) {\n      return 1 !== e.rejection && !e.parent;\n    },\n    Du = function Du(e) {\n      Ud(Xd, kd, function () {\n        var t = e.facade;\n        ou ? mu.emit(\"rejectionHandled\", t) : bu(\"rejectionhandled\", t, e.value);\n      });\n    },\n    Pu = function Pu(e, t, i) {\n      return function (r) {\n        e(t, r, i);\n      };\n    },\n    Lu = function Lu(e, t, i) {\n      e.done || (e.done = !0, i && (e = i), e.value = t, e.state = 2, Ou(e, !0));\n    },\n    ku = function ku(e, t, i) {\n      if (!e.done) {\n        e.done = !0, i && (e = i);\n        try {\n          if (e.facade === t) throw Eu(\"Promise can't be resolved itself\");\n          var r = Cu(t);\n          r ? zd(function () {\n            var i = {\n              done: !1\n            };\n            try {\n              Ud(r, t, Pu(ku, i, e), Pu(Lu, i, e));\n            } catch (t) {\n              Lu(i, t, e);\n            }\n          }) : (e.value = t, e.state = 1, Ou(e, !1));\n        } catch (t) {\n          Lu({\n            done: !1\n          }, t, e);\n        }\n      }\n    };\n  Iu && (_u = (pu = function pu(e) {\n    Hd(this, _u), Bd(e), Ud(wd, this);\n    var t = du(this);\n    try {\n      e(Pu(ku, t), Pu(Lu, t));\n    } catch (e) {\n      Lu(t, e);\n    }\n  }).prototype, (wd = function wd(e) {\n    uu(this, {\n      type: cu,\n      done: !1,\n      notified: !1,\n      parent: !1,\n      reactions: new tu(),\n      rejection: !1,\n      state: 0,\n      value: void 0\n    });\n  }).prototype = Vd(_u, {\n    then: function then(e, t) {\n      var i = lu(this),\n        r = gu(Jd(this, pu));\n      return i.parent = !0, r.ok = !Gd(e) || e, r.fail = Gd(t) && t, r.domain = ou ? mu.domain : void 0, 0 == i.state ? i.reactions.add(r) : zd(function () {\n        Au(r, i);\n      }), r.promise;\n    },\n    catch: function _catch(e) {\n      return this.then(void 0, e);\n    }\n  }), Nd = function Nd() {\n    var e = new wd(),\n      t = du(e);\n    this.promise = e, this.resolve = Pu(ku, t), this.reject = Pu(Lu, t);\n  }, $d.f = gu = function gu(e) {\n    return e === pu || e === Dd ? new Nd(e) : Su(e);\n  }), Ld({\n    global: !0,\n    wrap: !0,\n    forced: Iu\n  }, {\n    Promise: pu\n  }), jd(pu, cu, !1, !0), Fd(cu), Dd = Md(cu), Ld({\n    target: cu,\n    stat: !0,\n    forced: Iu\n  }, {\n    reject: function reject(e) {\n      var t = gu(this);\n      return Ud(t.reject, void 0, e), t.promise;\n    }\n  }), Ld({\n    target: cu,\n    stat: !0,\n    forced: true\n  }, {\n    resolve: function resolve(e) {\n      return Qd(this === Dd ? pu : this, e);\n    }\n  }), Ld({\n    target: cu,\n    stat: !0,\n    forced: yu\n  }, {\n    all: function all(e) {\n      var t = this,\n        i = gu(t),\n        r = i.resolve,\n        n = i.reject,\n        o = eu(function () {\n          var i = Bd(t.resolve),\n            o = [],\n            s = 0,\n            a = 1;\n          Yd(e, function (e) {\n            var c = s++,\n              d = !1;\n            a++, Ud(i, t, e).then(function (e) {\n              d || (d = !0, o[c] = e, --a || r(o));\n            }, n);\n          }), --a || r(o);\n        });\n      return o.error && n(o.value), i.promise;\n    },\n    race: function race(e) {\n      var t = this,\n        i = gu(t),\n        r = i.reject,\n        n = eu(function () {\n          var n = Bd(t.resolve);\n          Yd(e, function (e) {\n            Ud(n, t, e).then(i.resolve, r);\n          });\n        });\n      return n.error && r(n.value), i.promise;\n    }\n  });\n  var Mu = I,\n    Uu = Ie,\n    xu = Sd,\n    Vu = Od,\n    ju = No;\n  Ri({\n    target: \"Promise\",\n    stat: !0\n  }, {\n    allSettled: function allSettled(e) {\n      var t = this,\n        i = xu.f(t),\n        r = i.resolve,\n        n = i.reject,\n        o = Vu(function () {\n          var i = Uu(t.resolve),\n            n = [],\n            o = 0,\n            s = 1;\n          ju(e, function (e) {\n            var a = o++,\n              c = !1;\n            s++, Mu(i, t, e).then(function (e) {\n              c || (c = !0, n[a] = {\n                status: \"fulfilled\",\n                value: e\n              }, --s || r(n));\n            }, function (e) {\n              c || (c = !0, n[a] = {\n                status: \"rejected\",\n                reason: e\n              }, --s || r(n));\n            });\n          }), --s || r(n);\n        });\n      return o.error && n(o.value), i.promise;\n    }\n  });\n  var Fu = Ie,\n    Bu = $,\n    Gu = I,\n    Wu = Sd,\n    Hu = Od,\n    Ku = No,\n    Yu = \"No one promise resolved\";\n  Ri({\n    target: \"Promise\",\n    stat: !0\n  }, {\n    any: function any(e) {\n      var t = this,\n        i = Bu(\"AggregateError\"),\n        r = Wu.f(t),\n        n = r.resolve,\n        o = r.reject,\n        s = Hu(function () {\n          var r = Fu(t.resolve),\n            s = [],\n            a = 0,\n            c = 1,\n            d = !1;\n          Ku(e, function (e) {\n            var u = a++,\n              l = !1;\n            c++, Gu(r, t, e).then(function (e) {\n              l || d || (d = !0, n(e));\n            }, function (e) {\n              l || d || (l = !0, s[u] = e, --c || o(new i(s, Yu)));\n            });\n          }), --c || o(new i(s, Yu));\n        });\n      return s.error && o(s.value), r.promise;\n    }\n  });\n  var qu = ka,\n    Ju = $,\n    Xu = g,\n    zu = gc,\n    Qu = Cd;\n  Ri({\n    target: \"Promise\",\n    proto: !0,\n    real: !0,\n    forced: !!qu && i(function () {\n      qu.prototype.finally.call({\n        then: function then() {}\n      }, function () {});\n    })\n  }, {\n    finally: function _finally(e) {\n      var t = zu(this, Ju(\"Promise\")),\n        i = Xu(e);\n      return this.then(i ? function (i) {\n        return Qu(t, e()).then(function () {\n          return i;\n        });\n      } : e, i ? function (i) {\n        return Qu(t, e()).then(function () {\n          throw i;\n        });\n      } : e);\n    }\n  });\n  var Zu = d,\n    $u = Ci,\n    el = Lo,\n    tl = G,\n    il = Zu(\"\".charAt),\n    rl = Zu(\"\".charCodeAt),\n    nl = Zu(\"\".slice),\n    ol = function ol(e) {\n      return function (t, i) {\n        var r,\n          n,\n          o = el(tl(t)),\n          s = $u(i),\n          a = o.length;\n        return s < 0 || s >= a ? e ? \"\" : void 0 : (r = rl(o, s)) < 55296 || r > 56319 || s + 1 === a || (n = rl(o, s + 1)) < 56320 || n > 57343 ? e ? il(o, s) : r : e ? nl(o, s, s + 2) : n - 56320 + (r - 55296 << 10) + 65536;\n      };\n    },\n    sl = {\n      codeAt: ol(!1),\n      charAt: ol(!0)\n    },\n    al = sl.charAt,\n    cl = Lo,\n    dl = Ps,\n    ul = Aa,\n    ll = \"String Iterator\",\n    hl = dl.set,\n    pl = dl.getterFor(ll);\n  ul(String, \"String\", function (e) {\n    hl(this, {\n      type: ll,\n      string: cl(e),\n      index: 0\n    });\n  }, function () {\n    var e,\n      t = pl(this),\n      i = t.string,\n      r = t.index;\n    return r >= i.length ? {\n      value: void 0,\n      done: !0\n    } : (e = al(i, r), t.index += e.length, {\n      value: e,\n      done: !1\n    });\n  });\n  var _l = J.Promise,\n    El = {\n      CSSRuleList: 0,\n      CSSStyleDeclaration: 0,\n      CSSValueList: 0,\n      ClientRectList: 0,\n      DOMRectList: 0,\n      DOMStringList: 0,\n      DOMTokenList: 1,\n      DataTransferItemList: 0,\n      FileList: 0,\n      HTMLAllCollection: 0,\n      HTMLCollection: 0,\n      HTMLFormElement: 0,\n      HTMLSelectElement: 0,\n      MediaList: 0,\n      MimeTypeArray: 0,\n      NamedNodeMap: 0,\n      NodeList: 1,\n      PaintRequestList: 0,\n      Plugin: 0,\n      PluginArray: 0,\n      SVGLengthList: 0,\n      SVGNumberList: 0,\n      SVGPathSegList: 0,\n      SVGPointList: 0,\n      SVGStringList: 0,\n      SVGTransformList: 0,\n      SourceBufferList: 0,\n      StyleSheetList: 0,\n      TextTrackCueList: 0,\n      TextTrackList: 0,\n      TouchList: 0\n    },\n    fl = h,\n    ml = $n,\n    gl = ui,\n    Sl = jn,\n    Tl = nt(\"toStringTag\");\n  for (var vl in El) {\n    var Rl = fl[vl],\n      Il = Rl && Rl.prototype;\n    Il && ml(Il) !== Tl && gl(Il, Tl, vl), Sl[vl] = Sl.Array;\n  }\n  var yl = _l,\n    Cl = yl;\n  var Al = rr;\n  function Ol(e, t) {\n    var i = e && e.navigator;\n    if (!i.mediaDevices) return;\n    var r = function r(e) {\n        if (\"object\" != typeof e || e.mandatory || e.optional) return e;\n        var t = {};\n        return Object.keys(e).forEach(function (i) {\n          if (\"require\" === i || \"advanced\" === i || \"mediaSource\" === i) return;\n          var r = \"object\" == typeof e[i] ? e[i] : {\n            ideal: e[i]\n          };\n          void 0 !== r.exact && \"number\" == typeof r.exact && (r.min = r.max = r.exact);\n          var n = function n(e, t) {\n            return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : \"deviceId\" === t ? \"sourceId\" : t;\n          };\n          if (void 0 !== r.ideal) {\n            t.optional = t.optional || [];\n            var _e2 = {};\n            \"number\" == typeof r.ideal ? (_e2[n(\"min\", i)] = r.ideal, t.optional.push(_e2), _e2 = {}, _e2[n(\"max\", i)] = r.ideal, t.optional.push(_e2)) : (_e2[n(\"\", i)] = r.ideal, t.optional.push(_e2));\n          }\n          void 0 !== r.exact && \"number\" != typeof r.exact ? (t.mandatory = t.mandatory || {}, t.mandatory[n(\"\", i)] = r.exact) : [\"min\", \"max\"].forEach(function (e) {\n            void 0 !== r[e] && (t.mandatory = t.mandatory || {}, t.mandatory[n(e, i)] = r[e]);\n          });\n        }), e.advanced && (t.optional = (t.optional || []).concat(e.advanced)), t;\n      },\n      n = function n(e, _n2) {\n        if (t.version >= 61) return _n2(e);\n        if ((e = JSON.parse(JSON.stringify(e))) && \"object\" == typeof e.audio) {\n          var _t2 = function _t2(e, t, i) {\n            t in e && !(i in e) && (e[i] = e[t], delete e[t]);\n          };\n          _t2((e = JSON.parse(JSON.stringify(e))).audio, \"autoGainControl\", \"googAutoGainControl\"), _t2(e.audio, \"noiseSuppression\", \"googNoiseSuppression\"), e.audio = r(e.audio);\n        }\n        if (e && \"object\" == typeof e.video) {\n          var _o2 = e.video.facingMode;\n          _o2 = _o2 && (\"object\" == typeof _o2 ? _o2 : {\n            ideal: _o2\n          });\n          var _s2 = t.version < 66;\n          if (_o2 && (\"user\" === _o2.exact || \"environment\" === _o2.exact || \"user\" === _o2.ideal || \"environment\" === _o2.ideal) && (!i.mediaDevices.getSupportedConstraints || !i.mediaDevices.getSupportedConstraints().facingMode || _s2)) {\n            var _t3;\n            if (delete e.video.facingMode, \"environment\" === _o2.exact || \"environment\" === _o2.ideal ? _t3 = [\"back\", \"rear\"] : \"user\" !== _o2.exact && \"user\" !== _o2.ideal || (_t3 = [\"front\"]), _t3) return i.mediaDevices.enumerateDevices().then(function (i) {\n              var s = (i = i.filter(function (e) {\n                return \"videoinput\" === e.kind;\n              })).find(function (e) {\n                return _t3.some(function (t) {\n                  return e.label.toLowerCase().includes(t);\n                });\n              });\n              return !s && i.length && _t3.includes(\"back\") && (s = i[i.length - 1]), s && (e.video.deviceId = _o2.exact ? {\n                exact: s.deviceId\n              } : {\n                ideal: s.deviceId\n              }), e.video = r(e.video), Al(\"chrome: \" + JSON.stringify(e)), _n2(e);\n            });\n          }\n          e.video = r(e.video);\n        }\n        return Al(\"chrome: \" + JSON.stringify(e)), _n2(e);\n      },\n      o = function o(e) {\n        return t.version >= 64 ? e : {\n          name: {\n            PermissionDeniedError: \"NotAllowedError\",\n            PermissionDismissedError: \"NotAllowedError\",\n            InvalidStateError: \"NotAllowedError\",\n            DevicesNotFoundError: \"NotFoundError\",\n            ConstraintNotSatisfiedError: \"OverconstrainedError\",\n            TrackStartError: \"NotReadableError\",\n            MediaDeviceFailedDueToShutdown: \"NotAllowedError\",\n            MediaDeviceKillSwitchOn: \"NotAllowedError\",\n            TabCaptureError: \"AbortError\",\n            ScreenCaptureError: \"AbortError\",\n            DeviceCaptureError: \"AbortError\"\n          }[e.name] || e.name,\n          message: e.message,\n          constraint: e.constraint || e.constraintName,\n          toString: function toString() {\n            return this.name + (this.message && \": \") + this.message;\n          }\n        };\n      };\n    if (i.getUserMedia = function (e, t, r) {\n      n(e, function (e) {\n        i.webkitGetUserMedia(e, t, function (e) {\n          r && r(o(e));\n        });\n      });\n    }.bind(i), i.mediaDevices.getUserMedia) {\n      var _e3 = i.mediaDevices.getUserMedia.bind(i.mediaDevices);\n      i.mediaDevices.getUserMedia = function (t) {\n        return n(t, function (t) {\n          return _e3(t).then(function (e) {\n            if (t.audio && !e.getAudioTracks().length || t.video && !e.getVideoTracks().length) throw e.getTracks().forEach(function (e) {\n              e.stop();\n            }), new DOMException(\"\", \"NotFoundError\");\n            return e;\n          }, function (e) {\n            return Cl.reject(o(e));\n          });\n        });\n      };\n    }\n  }\n  function bl(e) {\n    e.MediaStream = e.MediaStream || e.webkitMediaStream;\n  }\n  function wl(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection && !(\"ontrack\" in e.RTCPeerConnection.prototype)) {\n      Object.defineProperty(e.RTCPeerConnection.prototype, \"ontrack\", {\n        get: function get() {\n          return this._ontrack;\n        },\n        set: function set(e) {\n          this._ontrack && this.removeEventListener(\"track\", this._ontrack), this.addEventListener(\"track\", this._ontrack = e);\n        },\n        enumerable: !0,\n        configurable: !0\n      });\n      var _t4 = e.RTCPeerConnection.prototype.setRemoteDescription;\n      e.RTCPeerConnection.prototype.setRemoteDescription = function () {\n        var _this = this;\n        return this._ontrackpoly || (this._ontrackpoly = function (t) {\n          t.stream.addEventListener(\"addtrack\", function (i) {\n            var r;\n            r = e.RTCPeerConnection.prototype.getReceivers ? _this.getReceivers().find(function (e) {\n              return e.track && e.track.id === i.track.id;\n            }) : {\n              track: i.track\n            };\n            var n = new Event(\"track\");\n            n.track = i.track, n.receiver = r, n.transceiver = {\n              receiver: r\n            }, n.streams = [t.stream], _this.dispatchEvent(n);\n          }), t.stream.getTracks().forEach(function (i) {\n            var r;\n            r = e.RTCPeerConnection.prototype.getReceivers ? _this.getReceivers().find(function (e) {\n              return e.track && e.track.id === i.id;\n            }) : {\n              track: i\n            };\n            var n = new Event(\"track\");\n            n.track = i, n.receiver = r, n.transceiver = {\n              receiver: r\n            }, n.streams = [t.stream], _this.dispatchEvent(n);\n          });\n        }, this.addEventListener(\"addstream\", this._ontrackpoly)), _t4.apply(this, arguments);\n      };\n    } else er(e, \"track\", function (e) {\n      return e.transceiver || Object.defineProperty(e, \"transceiver\", {\n        value: {\n          receiver: e.receiver\n        }\n      }), e;\n    });\n  }\n  function Nl(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection && !(\"getSenders\" in e.RTCPeerConnection.prototype) && \"createDTMFSender\" in e.RTCPeerConnection.prototype) {\n      var _t5 = function _t5(e, t) {\n        return {\n          track: t,\n          get dtmf() {\n            return void 0 === this._dtmf && (\"audio\" === t.kind ? this._dtmf = e.createDTMFSender(t) : this._dtmf = null), this._dtmf;\n          },\n          _pc: e\n        };\n      };\n      if (!e.RTCPeerConnection.prototype.getSenders) {\n        e.RTCPeerConnection.prototype.getSenders = function () {\n          return this._senders = this._senders || [], this._senders.slice();\n        };\n        var _i2 = e.RTCPeerConnection.prototype.addTrack;\n        e.RTCPeerConnection.prototype.addTrack = function (e, r) {\n          var n = _i2.apply(this, arguments);\n          return n || (n = _t5(this, e), this._senders.push(n)), n;\n        };\n        var _r2 = e.RTCPeerConnection.prototype.removeTrack;\n        e.RTCPeerConnection.prototype.removeTrack = function (e) {\n          _r2.apply(this, arguments);\n          var t = this._senders.indexOf(e);\n          -1 !== t && this._senders.splice(t, 1);\n        };\n      }\n      var _i3 = e.RTCPeerConnection.prototype.addStream;\n      e.RTCPeerConnection.prototype.addStream = function (e) {\n        var _this2 = this;\n        this._senders = this._senders || [], _i3.apply(this, [e]), e.getTracks().forEach(function (e) {\n          _this2._senders.push(_t5(_this2, e));\n        });\n      };\n      var _r3 = e.RTCPeerConnection.prototype.removeStream;\n      e.RTCPeerConnection.prototype.removeStream = function (e) {\n        var _this3 = this;\n        this._senders = this._senders || [], _r3.apply(this, [e]), e.getTracks().forEach(function (e) {\n          var t = _this3._senders.find(function (t) {\n            return t.track === e;\n          });\n          t && _this3._senders.splice(_this3._senders.indexOf(t), 1);\n        });\n      };\n    } else if (\"object\" == typeof e && e.RTCPeerConnection && \"getSenders\" in e.RTCPeerConnection.prototype && \"createDTMFSender\" in e.RTCPeerConnection.prototype && e.RTCRtpSender && !(\"dtmf\" in e.RTCRtpSender.prototype)) {\n      var _t6 = e.RTCPeerConnection.prototype.getSenders;\n      e.RTCPeerConnection.prototype.getSenders = function () {\n        var _this4 = this;\n        var e = _t6.apply(this, []);\n        return e.forEach(function (e) {\n          return e._pc = _this4;\n        }), e;\n      }, Object.defineProperty(e.RTCRtpSender.prototype, \"dtmf\", {\n        get: function get() {\n          return void 0 === this._dtmf && (\"audio\" === this.track.kind ? this._dtmf = this._pc.createDTMFSender(this.track) : this._dtmf = null), this._dtmf;\n        }\n      });\n    }\n  }\n  function Dl(e) {\n    if (!e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype.getStats;\n    e.RTCPeerConnection.prototype.getStats = function () {\n      var _this5 = this;\n      var _arguments = Array.prototype.slice.call(arguments),\n        e = _arguments[0],\n        i = _arguments[1],\n        r = _arguments[2];\n      if (arguments.length > 0 && \"function\" == typeof e) return t.apply(this, arguments);\n      if (0 === t.length && (0 === arguments.length || \"function\" != typeof e)) return t.apply(this, []);\n      var n = function n(e) {\n          var t = {};\n          return e.result().forEach(function (e) {\n            var i = {\n              id: e.id,\n              timestamp: e.timestamp,\n              type: {\n                localcandidate: \"local-candidate\",\n                remotecandidate: \"remote-candidate\"\n              }[e.type] || e.type\n            };\n            e.names().forEach(function (t) {\n              i[t] = e.stat(t);\n            }), t[i.id] = i;\n          }), t;\n        },\n        o = function o(e) {\n          return new Map(Object.keys(e).map(function (t) {\n            return [t, e[t]];\n          }));\n        };\n      if (arguments.length >= 2) {\n        var _r4 = function _r4(e) {\n          i(o(n(e)));\n        };\n        return t.apply(this, [_r4, e]);\n      }\n      return new Cl(function (e, i) {\n        t.apply(_this5, [function (t) {\n          e(o(n(t)));\n        }, i]);\n      }).then(i, r);\n    };\n  }\n  function Pl(e) {\n    if (!(\"object\" == typeof e && e.RTCPeerConnection && e.RTCRtpSender && e.RTCRtpReceiver)) return;\n    if (!(\"getStats\" in e.RTCRtpSender.prototype)) {\n      var _t7 = e.RTCPeerConnection.prototype.getSenders;\n      _t7 && (e.RTCPeerConnection.prototype.getSenders = function () {\n        var _this6 = this;\n        var e = _t7.apply(this, []);\n        return e.forEach(function (e) {\n          return e._pc = _this6;\n        }), e;\n      });\n      var _i4 = e.RTCPeerConnection.prototype.addTrack;\n      _i4 && (e.RTCPeerConnection.prototype.addTrack = function () {\n        var e = _i4.apply(this, arguments);\n        return e._pc = this, e;\n      }), e.RTCRtpSender.prototype.getStats = function () {\n        var e = this;\n        return this._pc.getStats().then(function (t) {\n          return cr(t, e.track, !0);\n        });\n      };\n    }\n    if (!(\"getStats\" in e.RTCRtpReceiver.prototype)) {\n      var _t8 = e.RTCPeerConnection.prototype.getReceivers;\n      _t8 && (e.RTCPeerConnection.prototype.getReceivers = function () {\n        var _this7 = this;\n        var e = _t8.apply(this, []);\n        return e.forEach(function (e) {\n          return e._pc = _this7;\n        }), e;\n      }), er(e, \"track\", function (e) {\n        return e.receiver._pc = e.srcElement, e;\n      }), e.RTCRtpReceiver.prototype.getStats = function () {\n        var e = this;\n        return this._pc.getStats().then(function (t) {\n          return cr(t, e.track, !1);\n        });\n      };\n    }\n    if (!(\"getStats\" in e.RTCRtpSender.prototype) || !(\"getStats\" in e.RTCRtpReceiver.prototype)) return;\n    var t = e.RTCPeerConnection.prototype.getStats;\n    e.RTCPeerConnection.prototype.getStats = function () {\n      if (arguments.length > 0 && arguments[0] instanceof e.MediaStreamTrack) {\n        var _e4 = arguments[0];\n        var _t9, _i5, _r5;\n        return this.getSenders().forEach(function (i) {\n          i.track === _e4 && (_t9 ? _r5 = !0 : _t9 = i);\n        }), this.getReceivers().forEach(function (t) {\n          return t.track === _e4 && (_i5 ? _r5 = !0 : _i5 = t), t.track === _e4;\n        }), _r5 || _t9 && _i5 ? Cl.reject(new DOMException(\"There are more than one sender or receiver for the track.\", \"InvalidAccessError\")) : _t9 ? _t9.getStats() : _i5 ? _i5.getStats() : Cl.reject(new DOMException(\"There is no sender or receiver for the track.\", \"InvalidAccessError\"));\n      }\n      return t.apply(this, arguments);\n    };\n  }\n  function Ll(e) {\n    e.RTCPeerConnection.prototype.getLocalStreams = function () {\n      var _this8 = this;\n      return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Object.keys(this._shimmedLocalStreams).map(function (e) {\n        return _this8._shimmedLocalStreams[e][0];\n      });\n    };\n    var t = e.RTCPeerConnection.prototype.addTrack;\n    e.RTCPeerConnection.prototype.addTrack = function (e, i) {\n      if (!i) return t.apply(this, arguments);\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      var r = t.apply(this, arguments);\n      return this._shimmedLocalStreams[i.id] ? -1 === this._shimmedLocalStreams[i.id].indexOf(r) && this._shimmedLocalStreams[i.id].push(r) : this._shimmedLocalStreams[i.id] = [i, r], r;\n    };\n    var i = e.RTCPeerConnection.prototype.addStream;\n    e.RTCPeerConnection.prototype.addStream = function (e) {\n      var _this9 = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e.getTracks().forEach(function (e) {\n        if (_this9.getSenders().find(function (t) {\n          return t.track === e;\n        })) throw new DOMException(\"Track already exists.\", \"InvalidAccessError\");\n      });\n      var t = this.getSenders();\n      i.apply(this, arguments);\n      var r = this.getSenders().filter(function (e) {\n        return -1 === t.indexOf(e);\n      });\n      this._shimmedLocalStreams[e.id] = [e].concat(r);\n    };\n    var r = e.RTCPeerConnection.prototype.removeStream;\n    e.RTCPeerConnection.prototype.removeStream = function (e) {\n      return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, delete this._shimmedLocalStreams[e.id], r.apply(this, arguments);\n    };\n    var n = e.RTCPeerConnection.prototype.removeTrack;\n    e.RTCPeerConnection.prototype.removeTrack = function (e) {\n      var _this10 = this;\n      return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e && Object.keys(this._shimmedLocalStreams).forEach(function (t) {\n        var i = _this10._shimmedLocalStreams[t].indexOf(e);\n        -1 !== i && _this10._shimmedLocalStreams[t].splice(i, 1), 1 === _this10._shimmedLocalStreams[t].length && delete _this10._shimmedLocalStreams[t];\n      }), n.apply(this, arguments);\n    };\n  }\n  function kl(e, t) {\n    if (!e.RTCPeerConnection) return;\n    if (e.RTCPeerConnection.prototype.addTrack && t.version >= 65) return Ll(e);\n    var i = e.RTCPeerConnection.prototype.getLocalStreams;\n    e.RTCPeerConnection.prototype.getLocalStreams = function () {\n      var _this11 = this;\n      var e = i.apply(this);\n      return this._reverseStreams = this._reverseStreams || {}, e.map(function (e) {\n        return _this11._reverseStreams[e.id];\n      });\n    };\n    var r = e.RTCPeerConnection.prototype.addStream;\n    e.RTCPeerConnection.prototype.addStream = function (t) {\n      var _this12 = this;\n      if (this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, t.getTracks().forEach(function (e) {\n        if (_this12.getSenders().find(function (t) {\n          return t.track === e;\n        })) throw new DOMException(\"Track already exists.\", \"InvalidAccessError\");\n      }), !this._reverseStreams[t.id]) {\n        var _i6 = new e.MediaStream(t.getTracks());\n        this._streams[t.id] = _i6, this._reverseStreams[_i6.id] = t, t = _i6;\n      }\n      r.apply(this, [t]);\n    };\n    var n = e.RTCPeerConnection.prototype.removeStream;\n    function o(e, t) {\n      var i = t.sdp;\n      return Object.keys(e._reverseStreams || []).forEach(function (t) {\n        var r = e._reverseStreams[t],\n          n = e._streams[r.id];\n        i = i.replace(new RegExp(n.id, \"g\"), r.id);\n      }), new RTCSessionDescription({\n        type: t.type,\n        sdp: i\n      });\n    }\n    function s(e, t) {\n      var i = t.sdp;\n      return Object.keys(e._reverseStreams || []).forEach(function (t) {\n        var r = e._reverseStreams[t],\n          n = e._streams[r.id];\n        i = i.replace(new RegExp(r.id, \"g\"), n.id);\n      }), new RTCSessionDescription({\n        type: t.type,\n        sdp: i\n      });\n    }\n    e.RTCPeerConnection.prototype.removeStream = function (e) {\n      this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, n.apply(this, [this._streams[e.id] || e]), delete this._reverseStreams[this._streams[e.id] ? this._streams[e.id].id : e.id], delete this._streams[e.id];\n    }, e.RTCPeerConnection.prototype.addTrack = function (t, i) {\n      var _this13 = this;\n      if (\"closed\" === this.signalingState) throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\", \"InvalidStateError\");\n      var r = [].slice.call(arguments, 1);\n      if (1 !== r.length || !r[0].getTracks().find(function (e) {\n        return e === t;\n      })) throw new DOMException(\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\", \"NotSupportedError\");\n      var n = this.getSenders().find(function (e) {\n        return e.track === t;\n      });\n      if (n) throw new DOMException(\"Track already exists.\", \"InvalidAccessError\");\n      this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {};\n      var o = this._streams[i.id];\n      if (o) o.addTrack(t), Cl.resolve().then(function () {\n        _this13.dispatchEvent(new Event(\"negotiationneeded\"));\n      });else {\n        var _r6 = new e.MediaStream([t]);\n        this._streams[i.id] = _r6, this._reverseStreams[_r6.id] = i, this.addStream(_r6);\n      }\n      return this.getSenders().find(function (e) {\n        return e.track === t;\n      });\n    }, [\"createOffer\", \"createAnswer\"].forEach(function (t) {\n      var i = e.RTCPeerConnection.prototype[t],\n        r = _defineProperty({}, t, function () {\n          var _this14 = this;\n          var e = arguments;\n          return arguments.length && \"function\" == typeof arguments[0] ? i.apply(this, [function (t) {\n            var i = o(_this14, t);\n            e[0].apply(null, [i]);\n          }, function (t) {\n            e[1] && e[1].apply(null, t);\n          }, arguments[2]]) : i.apply(this, arguments).then(function (e) {\n            return o(_this14, e);\n          });\n        });\n      e.RTCPeerConnection.prototype[t] = r[t];\n    });\n    var a = e.RTCPeerConnection.prototype.setLocalDescription;\n    e.RTCPeerConnection.prototype.setLocalDescription = function () {\n      return arguments.length && arguments[0].type ? (arguments[0] = s(this, arguments[0]), a.apply(this, arguments)) : a.apply(this, arguments);\n    };\n    var c = Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype, \"localDescription\");\n    Object.defineProperty(e.RTCPeerConnection.prototype, \"localDescription\", {\n      get: function get() {\n        var e = c.get.apply(this);\n        return \"\" === e.type ? e : o(this, e);\n      }\n    }), e.RTCPeerConnection.prototype.removeTrack = function (e) {\n      var _this15 = this;\n      if (\"closed\" === this.signalingState) throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\", \"InvalidStateError\");\n      if (!e._pc) throw new DOMException(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\", \"TypeError\");\n      if (!(e._pc === this)) throw new DOMException(\"Sender was not created by this connection.\", \"InvalidAccessError\");\n      var t;\n      this._streams = this._streams || {}, Object.keys(this._streams).forEach(function (i) {\n        _this15._streams[i].getTracks().find(function (t) {\n          return e.track === t;\n        }) && (t = _this15._streams[i]);\n      }), t && (1 === t.getTracks().length ? this.removeStream(this._reverseStreams[t.id]) : t.removeTrack(e.track), this.dispatchEvent(new Event(\"negotiationneeded\")));\n    };\n  }\n  function Ml(e, t) {\n    !e.RTCPeerConnection && e.webkitRTCPeerConnection && (e.RTCPeerConnection = e.webkitRTCPeerConnection), e.RTCPeerConnection && t.version < 53 && [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"].forEach(function (t) {\n      var i = e.RTCPeerConnection.prototype[t],\n        r = _defineProperty({}, t, function () {\n          return arguments[0] = new (\"addIceCandidate\" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), i.apply(this, arguments);\n        });\n      e.RTCPeerConnection.prototype[t] = r[t];\n    });\n  }\n  function Ul(e, t) {\n    er(e, \"negotiationneeded\", function (e) {\n      var i = e.target;\n      if (!(t.version < 72 || i.getConfiguration && \"plan-b\" === i.getConfiguration().sdpSemantics) || \"stable\" === i.signalingState) return e;\n    });\n  }\n  var xl = Object.freeze({\n    __proto__: null,\n    shimMediaStream: bl,\n    shimOnTrack: wl,\n    shimGetSendersWithDtmf: Nl,\n    shimGetStats: Dl,\n    shimSenderReceiverGetStats: Pl,\n    shimAddTrackRemoveTrackWithNative: Ll,\n    shimAddTrackRemoveTrack: kl,\n    shimPeerConnection: Ml,\n    fixNegotiationNeeded: Ul,\n    shimGetUserMedia: Ol,\n    shimGetDisplayMedia: function shimGetDisplayMedia(e, t) {\n      e.navigator.mediaDevices && \"getDisplayMedia\" in e.navigator.mediaDevices || e.navigator.mediaDevices && (\"function\" == typeof t ? e.navigator.mediaDevices.getDisplayMedia = function (i) {\n        return t(i).then(function (t) {\n          var r = i.video && i.video.width,\n            n = i.video && i.video.height,\n            o = i.video && i.video.frameRate;\n          return i.video = {\n            mandatory: {\n              chromeMediaSource: \"desktop\",\n              chromeMediaSourceId: t,\n              maxFrameRate: o || 3\n            }\n          }, r && (i.video.mandatory.maxWidth = r), n && (i.video.mandatory.maxHeight = n), e.navigator.mediaDevices.getUserMedia(i);\n        });\n      } : console.error(\"shimGetDisplayMedia: getSourceId argument is not a function\"));\n    }\n  });\n  function Vl(e, t) {\n    var i = e && e.navigator,\n      r = e && e.MediaStreamTrack;\n    if (i.getUserMedia = function (e, t, r) {\n      nr(\"navigator.getUserMedia\", \"navigator.mediaDevices.getUserMedia\"), i.mediaDevices.getUserMedia(e).then(t, r);\n    }, !(t.version > 55 && \"autoGainControl\" in i.mediaDevices.getSupportedConstraints())) {\n      var _e5 = function _e5(e, t, i) {\n          t in e && !(i in e) && (e[i] = e[t], delete e[t]);\n        },\n        _t10 = i.mediaDevices.getUserMedia.bind(i.mediaDevices);\n      if (i.mediaDevices.getUserMedia = function (i) {\n        return \"object\" == typeof i && \"object\" == typeof i.audio && (i = JSON.parse(JSON.stringify(i)), _e5(i.audio, \"autoGainControl\", \"mozAutoGainControl\"), _e5(i.audio, \"noiseSuppression\", \"mozNoiseSuppression\")), _t10(i);\n      }, r && r.prototype.getSettings) {\n        var _t11 = r.prototype.getSettings;\n        r.prototype.getSettings = function () {\n          var i = _t11.apply(this, arguments);\n          return _e5(i, \"mozAutoGainControl\", \"autoGainControl\"), _e5(i, \"mozNoiseSuppression\", \"noiseSuppression\"), i;\n        };\n      }\n      if (r && r.prototype.applyConstraints) {\n        var _t12 = r.prototype.applyConstraints;\n        r.prototype.applyConstraints = function (i) {\n          return \"audio\" === this.kind && \"object\" == typeof i && (i = JSON.parse(JSON.stringify(i)), _e5(i, \"autoGainControl\", \"mozAutoGainControl\"), _e5(i, \"noiseSuppression\", \"mozNoiseSuppression\")), _t12.apply(this, [i]);\n        };\n      }\n    }\n  }\n  function jl(e) {\n    \"object\" == typeof e && e.RTCTrackEvent && \"receiver\" in e.RTCTrackEvent.prototype && !(\"transceiver\" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, \"transceiver\", {\n      get: function get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n  function Fl(e, t) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection && !e.mozRTCPeerConnection) return;\n    !e.RTCPeerConnection && e.mozRTCPeerConnection && (e.RTCPeerConnection = e.mozRTCPeerConnection), t.version < 53 && [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"].forEach(function (t) {\n      var i = e.RTCPeerConnection.prototype[t],\n        r = _defineProperty({}, t, function () {\n          return arguments[0] = new (\"addIceCandidate\" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), i.apply(this, arguments);\n        });\n      e.RTCPeerConnection.prototype[t] = r[t];\n    });\n    var i = {\n        inboundrtp: \"inbound-rtp\",\n        outboundrtp: \"outbound-rtp\",\n        candidatepair: \"candidate-pair\",\n        localcandidate: \"local-candidate\",\n        remotecandidate: \"remote-candidate\"\n      },\n      r = e.RTCPeerConnection.prototype.getStats;\n    e.RTCPeerConnection.prototype.getStats = function () {\n      var _arguments2 = Array.prototype.slice.call(arguments),\n        e = _arguments2[0],\n        n = _arguments2[1],\n        o = _arguments2[2];\n      return r.apply(this, [e || null]).then(function (e) {\n        if (t.version < 53 && !n) try {\n          e.forEach(function (e) {\n            e.type = i[e.type] || e.type;\n          });\n        } catch (t) {\n          if (\"TypeError\" !== t.name) throw t;\n          e.forEach(function (t, r) {\n            e.set(r, Object.assign({}, t, {\n              type: i[t.type] || t.type\n            }));\n          });\n        }\n        return e;\n      }).then(n, o);\n    };\n  }\n  function Bl(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection || !e.RTCRtpSender) return;\n    if (e.RTCRtpSender && \"getStats\" in e.RTCRtpSender.prototype) return;\n    var t = e.RTCPeerConnection.prototype.getSenders;\n    t && (e.RTCPeerConnection.prototype.getSenders = function () {\n      var _this16 = this;\n      var e = t.apply(this, []);\n      return e.forEach(function (e) {\n        return e._pc = _this16;\n      }), e;\n    });\n    var i = e.RTCPeerConnection.prototype.addTrack;\n    i && (e.RTCPeerConnection.prototype.addTrack = function () {\n      var e = i.apply(this, arguments);\n      return e._pc = this, e;\n    }), e.RTCRtpSender.prototype.getStats = function () {\n      return this.track ? this._pc.getStats(this.track) : Cl.resolve(new Map());\n    };\n  }\n  function Gl(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection || !e.RTCRtpSender) return;\n    if (e.RTCRtpSender && \"getStats\" in e.RTCRtpReceiver.prototype) return;\n    var t = e.RTCPeerConnection.prototype.getReceivers;\n    t && (e.RTCPeerConnection.prototype.getReceivers = function () {\n      var _this17 = this;\n      var e = t.apply(this, []);\n      return e.forEach(function (e) {\n        return e._pc = _this17;\n      }), e;\n    }), er(e, \"track\", function (e) {\n      return e.receiver._pc = e.srcElement, e;\n    }), e.RTCRtpReceiver.prototype.getStats = function () {\n      return this._pc.getStats(this.track);\n    };\n  }\n  function Wl(e) {\n    e.RTCPeerConnection && !(\"removeStream\" in e.RTCPeerConnection.prototype) && (e.RTCPeerConnection.prototype.removeStream = function (e) {\n      var _this18 = this;\n      nr(\"removeStream\", \"removeTrack\"), this.getSenders().forEach(function (t) {\n        t.track && e.getTracks().includes(t.track) && _this18.removeTrack(t);\n      });\n    });\n  }\n  function Hl(e) {\n    e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel);\n  }\n  function Kl(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype.addTransceiver;\n    t && (e.RTCPeerConnection.prototype.addTransceiver = function () {\n      this.setParametersPromises = [];\n      var e = arguments[1] && arguments[1].sendEncodings;\n      void 0 === e && (e = []), e = _toConsumableArray(e);\n      var i = e.length > 0;\n      i && e.forEach(function (e) {\n        if (\"rid\" in e) {\n          if (!/^[a-z0-9]{0,16}$/i.test(e.rid)) throw new TypeError(\"Invalid RID value provided.\");\n        }\n        if (\"scaleResolutionDownBy\" in e && !(parseFloat(e.scaleResolutionDownBy) >= 1)) throw new RangeError(\"scale_resolution_down_by must be >= 1.0\");\n        if (\"maxFramerate\" in e && !(parseFloat(e.maxFramerate) >= 0)) throw new RangeError(\"max_framerate must be >= 0.0\");\n      });\n      var r = t.apply(this, arguments);\n      if (i) {\n        var _t13 = r.sender,\n          _i7 = _t13.getParameters();\n        (!(\"encodings\" in _i7) || 1 === _i7.encodings.length && 0 === Object.keys(_i7.encodings[0]).length) && (_i7.encodings = e, _t13.sendEncodings = e, this.setParametersPromises.push(_t13.setParameters(_i7).then(function () {\n          delete _t13.sendEncodings;\n        }).catch(function () {\n          delete _t13.sendEncodings;\n        })));\n      }\n      return r;\n    });\n  }\n  function Yl(e) {\n    if (\"object\" != typeof e || !e.RTCRtpSender) return;\n    var t = e.RTCRtpSender.prototype.getParameters;\n    t && (e.RTCRtpSender.prototype.getParameters = function () {\n      var e = t.apply(this, arguments);\n      return \"encodings\" in e || (e.encodings = [].concat(this.sendEncodings || [{}])), e;\n    });\n  }\n  function ql(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype.createOffer;\n    e.RTCPeerConnection.prototype.createOffer = function () {\n      var _arguments3 = arguments,\n        _this19 = this;\n      return this.setParametersPromises && this.setParametersPromises.length ? Cl.all(this.setParametersPromises).then(function () {\n        return t.apply(_this19, _arguments3);\n      }).finally(function () {\n        _this19.setParametersPromises = [];\n      }) : t.apply(this, arguments);\n    };\n  }\n  function Jl(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype.createAnswer;\n    e.RTCPeerConnection.prototype.createAnswer = function () {\n      var _arguments4 = arguments,\n        _this20 = this;\n      return this.setParametersPromises && this.setParametersPromises.length ? Cl.all(this.setParametersPromises).then(function () {\n        return t.apply(_this20, _arguments4);\n      }).finally(function () {\n        _this20.setParametersPromises = [];\n      }) : t.apply(this, arguments);\n    };\n  }\n  var Xl = Object.freeze({\n    __proto__: null,\n    shimOnTrack: jl,\n    shimPeerConnection: Fl,\n    shimSenderGetStats: Bl,\n    shimReceiverGetStats: Gl,\n    shimRemoveStream: Wl,\n    shimRTCDataChannel: Hl,\n    shimAddTransceiver: Kl,\n    shimGetParameters: Yl,\n    shimCreateOffer: ql,\n    shimCreateAnswer: Jl,\n    shimGetUserMedia: Vl,\n    shimGetDisplayMedia: function shimGetDisplayMedia(e, t) {\n      e.navigator.mediaDevices && \"getDisplayMedia\" in e.navigator.mediaDevices || e.navigator.mediaDevices && (e.navigator.mediaDevices.getDisplayMedia = function (i) {\n        if (!i || !i.video) {\n          var _e6 = new DOMException(\"getDisplayMedia without video constraints is undefined\");\n          return _e6.name = \"NotFoundError\", _e6.code = 8, Cl.reject(_e6);\n        }\n        return !0 === i.video ? i.video = {\n          mediaSource: t\n        } : i.video.mediaSource = t, e.navigator.mediaDevices.getUserMedia(i);\n      });\n    }\n  });\n  function zl(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection) {\n      if (\"getLocalStreams\" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function () {\n        return this._localStreams || (this._localStreams = []), this._localStreams;\n      }), !(\"addStream\" in e.RTCPeerConnection.prototype)) {\n        var _t14 = e.RTCPeerConnection.prototype.addTrack;\n        e.RTCPeerConnection.prototype.addStream = function (e) {\n          var _this21 = this;\n          this._localStreams || (this._localStreams = []), this._localStreams.includes(e) || this._localStreams.push(e), e.getAudioTracks().forEach(function (i) {\n            return _t14.call(_this21, i, e);\n          }), e.getVideoTracks().forEach(function (i) {\n            return _t14.call(_this21, i, e);\n          });\n        }, e.RTCPeerConnection.prototype.addTrack = function (e) {\n          var _this22 = this;\n          for (var i = arguments.length, r = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) r[n - 1] = arguments[n];\n          return r && r.forEach(function (e) {\n            _this22._localStreams ? _this22._localStreams.includes(e) || _this22._localStreams.push(e) : _this22._localStreams = [e];\n          }), _t14.apply(this, arguments);\n        };\n      }\n      \"removeStream\" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function (e) {\n        var _this23 = this;\n        this._localStreams || (this._localStreams = []);\n        var t = this._localStreams.indexOf(e);\n        if (-1 === t) return;\n        this._localStreams.splice(t, 1);\n        var i = e.getTracks();\n        this.getSenders().forEach(function (e) {\n          i.includes(e.track) && _this23.removeTrack(e);\n        });\n      });\n    }\n  }\n  function Ql(e) {\n    if (\"object\" == typeof e && e.RTCPeerConnection && (\"getRemoteStreams\" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function () {\n      return this._remoteStreams ? this._remoteStreams : [];\n    }), !(\"onaddstream\" in e.RTCPeerConnection.prototype))) {\n      Object.defineProperty(e.RTCPeerConnection.prototype, \"onaddstream\", {\n        get: function get() {\n          return this._onaddstream;\n        },\n        set: function set(e) {\n          var _this24 = this;\n          this._onaddstream && (this.removeEventListener(\"addstream\", this._onaddstream), this.removeEventListener(\"track\", this._onaddstreampoly)), this.addEventListener(\"addstream\", this._onaddstream = e), this.addEventListener(\"track\", this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (e) {\n              if (_this24._remoteStreams || (_this24._remoteStreams = []), _this24._remoteStreams.includes(e)) return;\n              _this24._remoteStreams.push(e);\n              var t = new Event(\"addstream\");\n              t.stream = e, _this24.dispatchEvent(t);\n            });\n          });\n        }\n      });\n      var _t15 = e.RTCPeerConnection.prototype.setRemoteDescription;\n      e.RTCPeerConnection.prototype.setRemoteDescription = function () {\n        var e = this;\n        return this._onaddstreampoly || this.addEventListener(\"track\", this._onaddstreampoly = function (t) {\n          t.streams.forEach(function (t) {\n            if (e._remoteStreams || (e._remoteStreams = []), e._remoteStreams.indexOf(t) >= 0) return;\n            e._remoteStreams.push(t);\n            var i = new Event(\"addstream\");\n            i.stream = t, e.dispatchEvent(i);\n          });\n        }), _t15.apply(e, arguments);\n      };\n    }\n  }\n  function Zl(e) {\n    if (\"object\" != typeof e || !e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection.prototype,\n      i = t.createOffer,\n      r = t.createAnswer,\n      n = t.setLocalDescription,\n      o = t.setRemoteDescription,\n      s = t.addIceCandidate;\n    t.createOffer = function (e, t) {\n      var r = arguments.length >= 2 ? arguments[2] : arguments[0],\n        n = i.apply(this, [r]);\n      return t ? (n.then(e, t), Cl.resolve()) : n;\n    }, t.createAnswer = function (e, t) {\n      var i = arguments.length >= 2 ? arguments[2] : arguments[0],\n        n = r.apply(this, [i]);\n      return t ? (n.then(e, t), Cl.resolve()) : n;\n    };\n    var a = function a(e, t, i) {\n      var r = n.apply(this, [e]);\n      return i ? (r.then(t, i), Cl.resolve()) : r;\n    };\n    t.setLocalDescription = a, a = function a(e, t, i) {\n      var r = o.apply(this, [e]);\n      return i ? (r.then(t, i), Cl.resolve()) : r;\n    }, t.setRemoteDescription = a, a = function a(e, t, i) {\n      var r = s.apply(this, [e]);\n      return i ? (r.then(t, i), Cl.resolve()) : r;\n    }, t.addIceCandidate = a;\n  }\n  function $l(e) {\n    var t = e && e.navigator;\n    if (t.mediaDevices && t.mediaDevices.getUserMedia) {\n      var _e7 = t.mediaDevices,\n        _i8 = _e7.getUserMedia.bind(_e7);\n      t.mediaDevices.getUserMedia = function (e) {\n        return _i8(eh(e));\n      };\n    }\n    !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function (e, i, r) {\n      t.mediaDevices.getUserMedia(e).then(i, r);\n    }.bind(t));\n  }\n  function eh(e) {\n    return e && void 0 !== e.video ? Object.assign({}, e, {\n      video: ar(e.video)\n    }) : e;\n  }\n  function th(e) {\n    if (!e.RTCPeerConnection) return;\n    var t = e.RTCPeerConnection;\n    e.RTCPeerConnection = function (e, i) {\n      if (e && e.iceServers) {\n        var _t16 = [];\n        for (var _i9 = 0; _i9 < e.iceServers.length; _i9++) {\n          var _r10 = e.iceServers[_i9];\n          !_r10.hasOwnProperty(\"urls\") && _r10.hasOwnProperty(\"url\") ? (nr(\"RTCIceServer.url\", \"RTCIceServer.urls\"), _r10 = JSON.parse(JSON.stringify(_r10)), _r10.urls = _r10.url, delete _r10.url, _t16.push(_r10)) : _t16.push(e.iceServers[_i9]);\n        }\n        e.iceServers = _t16;\n      }\n      return new t(e, i);\n    }, e.RTCPeerConnection.prototype = t.prototype, \"generateCertificate\" in t && Object.defineProperty(e.RTCPeerConnection, \"generateCertificate\", {\n      get: function get() {\n        return t.generateCertificate;\n      }\n    });\n  }\n  function ih(e) {\n    \"object\" == typeof e && e.RTCTrackEvent && \"receiver\" in e.RTCTrackEvent.prototype && !(\"transceiver\" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, \"transceiver\", {\n      get: function get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n  function rh(e) {\n    var t = e.RTCPeerConnection.prototype.createOffer;\n    e.RTCPeerConnection.prototype.createOffer = function (e) {\n      if (e) {\n        void 0 !== e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio);\n        var _t17 = this.getTransceivers().find(function (e) {\n          return \"audio\" === e.receiver.track.kind;\n        });\n        !1 === e.offerToReceiveAudio && _t17 ? \"sendrecv\" === _t17.direction ? _t17.setDirection ? _t17.setDirection(\"sendonly\") : _t17.direction = \"sendonly\" : \"recvonly\" === _t17.direction && (_t17.setDirection ? _t17.setDirection(\"inactive\") : _t17.direction = \"inactive\") : !0 !== e.offerToReceiveAudio || _t17 || this.addTransceiver(\"audio\", {\n          direction: \"recvonly\"\n        }), void 0 !== e.offerToReceiveVideo && (e.offerToReceiveVideo = !!e.offerToReceiveVideo);\n        var _i10 = this.getTransceivers().find(function (e) {\n          return \"video\" === e.receiver.track.kind;\n        });\n        !1 === e.offerToReceiveVideo && _i10 ? \"sendrecv\" === _i10.direction ? _i10.setDirection ? _i10.setDirection(\"sendonly\") : _i10.direction = \"sendonly\" : \"recvonly\" === _i10.direction && (_i10.setDirection ? _i10.setDirection(\"inactive\") : _i10.direction = \"inactive\") : !0 !== e.offerToReceiveVideo || _i10 || this.addTransceiver(\"video\", {\n          direction: \"recvonly\"\n        });\n      }\n      return t.apply(this, arguments);\n    };\n  }\n  function nh(e) {\n    \"object\" != typeof e || e.AudioContext || (e.AudioContext = e.webkitAudioContext);\n  }\n  var oh = Object.freeze({\n      __proto__: null,\n      shimLocalStreamsAPI: zl,\n      shimRemoteStreamsAPI: Ql,\n      shimCallbacksAPI: Zl,\n      shimGetUserMedia: $l,\n      shimConstraints: eh,\n      shimRTCIceServerUrls: th,\n      shimTrackEventTransceiver: ih,\n      shimCreateOfferLegacy: rh,\n      shimAudioContext: nh\n    }),\n    sh = \"\\t\\n\\x0B\\f\\r \\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF\",\n    ah = G,\n    ch = Lo,\n    dh = d(\"\".replace),\n    uh = \"[\\t\\n\\x0B\\f\\r \\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]\",\n    lh = RegExp(\"^\" + uh + uh + \"*\"),\n    hh = RegExp(uh + uh + \"*$\"),\n    ph = function ph(e) {\n      return function (t) {\n        var i = ch(ah(t));\n        return 1 & e && (i = dh(i, lh, \"\")), 2 & e && (i = dh(i, hh, \"\")), i;\n      };\n    },\n    _h = {\n      start: ph(1),\n      end: ph(2),\n      trim: ph(3)\n    },\n    Eh = Vs.PROPER,\n    fh = i,\n    mh = sh,\n    gh = _h.trim;\n  Ri({\n    target: \"String\",\n    proto: !0,\n    forced: function (e) {\n      return fh(function () {\n        return !!mh[e]() || \"âÂá \" !== \"âÂá \"[e]() || Eh && mh[e].name !== e;\n      });\n    }(\"trim\")\n  }, {\n    trim: function trim() {\n      return gh(this);\n    }\n  });\n  var Sh = Hi(\"String\").trim,\n    Th = u,\n    vh = Sh,\n    Rh = String.prototype,\n    Ih = function Ih(e) {\n      var t = e.trim;\n      return \"string\" == typeof e || e === Rh || Th(Rh, e) && t === Rh.trim ? vh : t;\n    },\n    yh = {\n      exports: {}\n    };\n  !function (e) {\n    var t = {\n      generateIdentifier: function generateIdentifier() {\n        return Math.random().toString(36).substr(2, 10);\n      }\n    };\n    t.localCName = t.generateIdentifier(), t.splitLines = function (e) {\n      return Ih(e).call(e).split(\"\\n\").map(function (e) {\n        return Ih(e).call(e);\n      });\n    }, t.splitSections = function (e) {\n      return e.split(\"\\nm=\").map(function (e, t) {\n        var i;\n        return Ih(i = t > 0 ? \"m=\" + e : e).call(i) + \"\\r\\n\";\n      });\n    }, t.getDescription = function (e) {\n      var i = t.splitSections(e);\n      return i && i[0];\n    }, t.getMediaSections = function (e) {\n      var i = t.splitSections(e);\n      return i.shift(), i;\n    }, t.matchPrefix = function (e, i) {\n      return t.splitLines(e).filter(function (e) {\n        return 0 === e.indexOf(i);\n      });\n    }, t.parseCandidate = function (e) {\n      var t;\n      t = 0 === e.indexOf(\"a=candidate:\") ? e.substring(12).split(\" \") : e.substring(10).split(\" \");\n      var i = {\n        foundation: t[0],\n        component: {\n          1: \"rtp\",\n          2: \"rtcp\"\n        }[t[1]] || t[1],\n        protocol: t[2].toLowerCase(),\n        priority: parseInt(t[3], 10),\n        ip: t[4],\n        address: t[4],\n        port: parseInt(t[5], 10),\n        type: t[7]\n      };\n      for (var _e8 = 8; _e8 < t.length; _e8 += 2) switch (t[_e8]) {\n        case \"raddr\":\n          i.relatedAddress = t[_e8 + 1];\n          break;\n        case \"rport\":\n          i.relatedPort = parseInt(t[_e8 + 1], 10);\n          break;\n        case \"tcptype\":\n          i.tcpType = t[_e8 + 1];\n          break;\n        case \"ufrag\":\n          i.ufrag = t[_e8 + 1], i.usernameFragment = t[_e8 + 1];\n          break;\n        default:\n          void 0 === i[t[_e8]] && (i[t[_e8]] = t[_e8 + 1]);\n      }\n      return i;\n    }, t.writeCandidate = function (e) {\n      var t = [];\n      t.push(e.foundation);\n      var i = e.component;\n      \"rtp\" === i ? t.push(1) : \"rtcp\" === i ? t.push(2) : t.push(i), t.push(e.protocol.toUpperCase()), t.push(e.priority), t.push(e.address || e.ip), t.push(e.port);\n      var r = e.type;\n      return t.push(\"typ\"), t.push(r), \"host\" !== r && e.relatedAddress && e.relatedPort && (t.push(\"raddr\"), t.push(e.relatedAddress), t.push(\"rport\"), t.push(e.relatedPort)), e.tcpType && \"tcp\" === e.protocol.toLowerCase() && (t.push(\"tcptype\"), t.push(e.tcpType)), (e.usernameFragment || e.ufrag) && (t.push(\"ufrag\"), t.push(e.usernameFragment || e.ufrag)), \"candidate:\" + t.join(\" \");\n    }, t.parseIceOptions = function (e) {\n      return e.substr(14).split(\" \");\n    }, t.parseRtpMap = function (e) {\n      var t = e.substr(9).split(\" \");\n      var i = {\n        payloadType: parseInt(t.shift(), 10)\n      };\n      return t = t[0].split(\"/\"), i.name = t[0], i.clockRate = parseInt(t[1], 10), i.channels = 3 === t.length ? parseInt(t[2], 10) : 1, i.numChannels = i.channels, i;\n    }, t.writeRtpMap = function (e) {\n      var t = e.payloadType;\n      void 0 !== e.preferredPayloadType && (t = e.preferredPayloadType);\n      var i = e.channels || e.numChannels || 1;\n      return \"a=rtpmap:\" + t + \" \" + e.name + \"/\" + e.clockRate + (1 !== i ? \"/\" + i : \"\") + \"\\r\\n\";\n    }, t.parseExtmap = function (e) {\n      var t = e.substr(9).split(\" \");\n      return {\n        id: parseInt(t[0], 10),\n        direction: t[0].indexOf(\"/\") > 0 ? t[0].split(\"/\")[1] : \"sendrecv\",\n        uri: t[1]\n      };\n    }, t.writeExtmap = function (e) {\n      return \"a=extmap:\" + (e.id || e.preferredId) + (e.direction && \"sendrecv\" !== e.direction ? \"/\" + e.direction : \"\") + \" \" + e.uri + \"\\r\\n\";\n    }, t.parseFmtp = function (e) {\n      var t = {};\n      var i;\n      var r = e.substr(e.indexOf(\" \") + 1).split(\";\");\n      for (var _e9 = 0; _e9 < r.length; _e9++) {\n        var n, o;\n        i = Ih(n = r[_e9]).call(n).split(\"=\"), t[Ih(o = i[0]).call(o)] = i[1];\n      }\n      return t;\n    }, t.writeFmtp = function (e) {\n      var t = \"\",\n        i = e.payloadType;\n      if (void 0 !== e.preferredPayloadType && (i = e.preferredPayloadType), e.parameters && Object.keys(e.parameters).length) {\n        var _r11 = [];\n        Object.keys(e.parameters).forEach(function (t) {\n          void 0 !== e.parameters[t] ? _r11.push(t + \"=\" + e.parameters[t]) : _r11.push(t);\n        }), t += \"a=fmtp:\" + i + \" \" + _r11.join(\";\") + \"\\r\\n\";\n      }\n      return t;\n    }, t.parseRtcpFb = function (e) {\n      var t = e.substr(e.indexOf(\" \") + 1).split(\" \");\n      return {\n        type: t.shift(),\n        parameter: t.join(\" \")\n      };\n    }, t.writeRtcpFb = function (e) {\n      var t = \"\",\n        i = e.payloadType;\n      return void 0 !== e.preferredPayloadType && (i = e.preferredPayloadType), e.rtcpFeedback && e.rtcpFeedback.length && e.rtcpFeedback.forEach(function (e) {\n        t += \"a=rtcp-fb:\" + i + \" \" + e.type + (e.parameter && e.parameter.length ? \" \" + e.parameter : \"\") + \"\\r\\n\";\n      }), t;\n    }, t.parseSsrcMedia = function (e) {\n      var t = e.indexOf(\" \"),\n        i = {\n          ssrc: parseInt(e.substr(7, t - 7), 10)\n        },\n        r = e.indexOf(\":\", t);\n      return r > -1 ? (i.attribute = e.substr(t + 1, r - t - 1), i.value = e.substr(r + 1)) : i.attribute = e.substr(t + 1), i;\n    }, t.parseSsrcGroup = function (e) {\n      var t = e.substr(13).split(\" \");\n      return {\n        semantics: t.shift(),\n        ssrcs: t.map(function (e) {\n          return parseInt(e, 10);\n        })\n      };\n    }, t.getMid = function (e) {\n      var i = t.matchPrefix(e, \"a=mid:\")[0];\n      if (i) return i.substr(6);\n    }, t.parseFingerprint = function (e) {\n      var t = e.substr(14).split(\" \");\n      return {\n        algorithm: t[0].toLowerCase(),\n        value: t[1].toUpperCase()\n      };\n    }, t.getDtlsParameters = function (e, i) {\n      return {\n        role: \"auto\",\n        fingerprints: t.matchPrefix(e + i, \"a=fingerprint:\").map(t.parseFingerprint)\n      };\n    }, t.writeDtlsParameters = function (e, t) {\n      var i = \"a=setup:\" + t + \"\\r\\n\";\n      return e.fingerprints.forEach(function (e) {\n        i += \"a=fingerprint:\" + e.algorithm + \" \" + e.value + \"\\r\\n\";\n      }), i;\n    }, t.parseCryptoLine = function (e) {\n      var t = e.substr(9).split(\" \");\n      return {\n        tag: parseInt(t[0], 10),\n        cryptoSuite: t[1],\n        keyParams: t[2],\n        sessionParams: t.slice(3)\n      };\n    }, t.writeCryptoLine = function (e) {\n      return \"a=crypto:\" + e.tag + \" \" + e.cryptoSuite + \" \" + (\"object\" == typeof e.keyParams ? t.writeCryptoKeyParams(e.keyParams) : e.keyParams) + (e.sessionParams ? \" \" + e.sessionParams.join(\" \") : \"\") + \"\\r\\n\";\n    }, t.parseCryptoKeyParams = function (e) {\n      if (0 !== e.indexOf(\"inline:\")) return null;\n      var t = e.substr(7).split(\"|\");\n      return {\n        keyMethod: \"inline\",\n        keySalt: t[0],\n        lifeTime: t[1],\n        mkiValue: t[2] ? t[2].split(\":\")[0] : void 0,\n        mkiLength: t[2] ? t[2].split(\":\")[1] : void 0\n      };\n    }, t.writeCryptoKeyParams = function (e) {\n      return e.keyMethod + \":\" + e.keySalt + (e.lifeTime ? \"|\" + e.lifeTime : \"\") + (e.mkiValue && e.mkiLength ? \"|\" + e.mkiValue + \":\" + e.mkiLength : \"\");\n    }, t.getCryptoParameters = function (e, i) {\n      return t.matchPrefix(e + i, \"a=crypto:\").map(t.parseCryptoLine);\n    }, t.getIceParameters = function (e, i) {\n      var r = t.matchPrefix(e + i, \"a=ice-ufrag:\")[0],\n        n = t.matchPrefix(e + i, \"a=ice-pwd:\")[0];\n      return r && n ? {\n        usernameFragment: r.substr(12),\n        password: n.substr(10)\n      } : null;\n    }, t.writeIceParameters = function (e) {\n      var t = \"a=ice-ufrag:\" + e.usernameFragment + \"\\r\\na=ice-pwd:\" + e.password + \"\\r\\n\";\n      return e.iceLite && (t += \"a=ice-lite\\r\\n\"), t;\n    }, t.parseRtpParameters = function (e) {\n      var i = {\n          codecs: [],\n          headerExtensions: [],\n          fecMechanisms: [],\n          rtcp: []\n        },\n        r = t.splitLines(e)[0].split(\" \");\n      for (var _n3 = 3; _n3 < r.length; _n3++) {\n        var _o3 = r[_n3],\n          _s3 = t.matchPrefix(e, \"a=rtpmap:\" + _o3 + \" \")[0];\n        if (_s3) {\n          var _r12 = t.parseRtpMap(_s3),\n            _n4 = t.matchPrefix(e, \"a=fmtp:\" + _o3 + \" \");\n          switch (_r12.parameters = _n4.length ? t.parseFmtp(_n4[0]) : {}, _r12.rtcpFeedback = t.matchPrefix(e, \"a=rtcp-fb:\" + _o3 + \" \").map(t.parseRtcpFb), i.codecs.push(_r12), _r12.name.toUpperCase()) {\n            case \"RED\":\n            case \"ULPFEC\":\n              i.fecMechanisms.push(_r12.name.toUpperCase());\n          }\n        }\n      }\n      return t.matchPrefix(e, \"a=extmap:\").forEach(function (e) {\n        i.headerExtensions.push(t.parseExtmap(e));\n      }), i;\n    }, t.writeRtpDescription = function (e, i) {\n      var r = \"\";\n      r += \"m=\" + e + \" \", r += i.codecs.length > 0 ? \"9\" : \"0\", r += \" UDP/TLS/RTP/SAVPF \", r += i.codecs.map(function (e) {\n        return void 0 !== e.preferredPayloadType ? e.preferredPayloadType : e.payloadType;\n      }).join(\" \") + \"\\r\\n\", r += \"c=IN IP4 0.0.0.0\\r\\n\", r += \"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\", i.codecs.forEach(function (e) {\n        r += t.writeRtpMap(e), r += t.writeFmtp(e), r += t.writeRtcpFb(e);\n      });\n      var n = 0;\n      return i.codecs.forEach(function (e) {\n        e.maxptime > n && (n = e.maxptime);\n      }), n > 0 && (r += \"a=maxptime:\" + n + \"\\r\\n\"), i.headerExtensions && i.headerExtensions.forEach(function (e) {\n        r += t.writeExtmap(e);\n      }), r;\n    }, t.parseRtpEncodingParameters = function (e) {\n      var i = [],\n        r = t.parseRtpParameters(e),\n        n = -1 !== r.fecMechanisms.indexOf(\"RED\"),\n        o = -1 !== r.fecMechanisms.indexOf(\"ULPFEC\"),\n        s = t.matchPrefix(e, \"a=ssrc:\").map(function (e) {\n          return t.parseSsrcMedia(e);\n        }).filter(function (e) {\n          return \"cname\" === e.attribute;\n        }),\n        a = s.length > 0 && s[0].ssrc;\n      var c;\n      var d = t.matchPrefix(e, \"a=ssrc-group:FID\").map(function (e) {\n        return e.substr(17).split(\" \").map(function (e) {\n          return parseInt(e, 10);\n        });\n      });\n      d.length > 0 && d[0].length > 1 && d[0][0] === a && (c = d[0][1]), r.codecs.forEach(function (e) {\n        if (\"RTX\" === e.name.toUpperCase() && e.parameters.apt) {\n          var _t18 = {\n            ssrc: a,\n            codecPayloadType: parseInt(e.parameters.apt, 10)\n          };\n          a && c && (_t18.rtx = {\n            ssrc: c\n          }), i.push(_t18), n && (_t18 = JSON.parse(JSON.stringify(_t18)), _t18.fec = {\n            ssrc: a,\n            mechanism: o ? \"red+ulpfec\" : \"red\"\n          }, i.push(_t18));\n        }\n      }), 0 === i.length && a && i.push({\n        ssrc: a\n      });\n      var u = t.matchPrefix(e, \"b=\");\n      return u.length && (u = 0 === u[0].indexOf(\"b=TIAS:\") ? parseInt(u[0].substr(7), 10) : 0 === u[0].indexOf(\"b=AS:\") ? 1e3 * parseInt(u[0].substr(5), 10) * .95 - 16e3 : void 0, i.forEach(function (e) {\n        e.maxBitrate = u;\n      })), i;\n    }, t.parseRtcpParameters = function (e) {\n      var i = {},\n        r = t.matchPrefix(e, \"a=ssrc:\").map(function (e) {\n          return t.parseSsrcMedia(e);\n        }).filter(function (e) {\n          return \"cname\" === e.attribute;\n        })[0];\n      r && (i.cname = r.value, i.ssrc = r.ssrc);\n      var n = t.matchPrefix(e, \"a=rtcp-rsize\");\n      i.reducedSize = n.length > 0, i.compound = 0 === n.length;\n      var o = t.matchPrefix(e, \"a=rtcp-mux\");\n      return i.mux = o.length > 0, i;\n    }, t.writeRtcpParameters = function (e) {\n      var t = \"\";\n      return e.reducedSize && (t += \"a=rtcp-rsize\\r\\n\"), e.mux && (t += \"a=rtcp-mux\\r\\n\"), void 0 !== e.ssrc && e.cname && (t += \"a=ssrc:\" + e.ssrc + \" cname:\" + e.cname + \"\\r\\n\"), t;\n    }, t.parseMsid = function (e) {\n      var i;\n      var r = t.matchPrefix(e, \"a=msid:\");\n      if (1 === r.length) return i = r[0].substr(7).split(\" \"), {\n        stream: i[0],\n        track: i[1]\n      };\n      var n = t.matchPrefix(e, \"a=ssrc:\").map(function (e) {\n        return t.parseSsrcMedia(e);\n      }).filter(function (e) {\n        return \"msid\" === e.attribute;\n      });\n      return n.length > 0 ? (i = n[0].value.split(\" \"), {\n        stream: i[0],\n        track: i[1]\n      }) : void 0;\n    }, t.parseSctpDescription = function (e) {\n      var i = t.parseMLine(e),\n        r = t.matchPrefix(e, \"a=max-message-size:\");\n      var n;\n      r.length > 0 && (n = parseInt(r[0].substr(19), 10)), isNaN(n) && (n = 65536);\n      var o = t.matchPrefix(e, \"a=sctp-port:\");\n      if (o.length > 0) return {\n        port: parseInt(o[0].substr(12), 10),\n        protocol: i.fmt,\n        maxMessageSize: n\n      };\n      var s = t.matchPrefix(e, \"a=sctpmap:\");\n      if (s.length > 0) {\n        var _e10 = s[0].substr(10).split(\" \");\n        return {\n          port: parseInt(_e10[0], 10),\n          protocol: _e10[1],\n          maxMessageSize: n\n        };\n      }\n    }, t.writeSctpDescription = function (e, t) {\n      var i = [];\n      return i = \"DTLS/SCTP\" !== e.protocol ? [\"m=\" + e.kind + \" 9 \" + e.protocol + \" \" + t.protocol + \"\\r\\n\", \"c=IN IP4 0.0.0.0\\r\\n\", \"a=sctp-port:\" + t.port + \"\\r\\n\"] : [\"m=\" + e.kind + \" 9 \" + e.protocol + \" \" + t.port + \"\\r\\n\", \"c=IN IP4 0.0.0.0\\r\\n\", \"a=sctpmap:\" + t.port + \" \" + t.protocol + \" 65535\\r\\n\"], void 0 !== t.maxMessageSize && i.push(\"a=max-message-size:\" + t.maxMessageSize + \"\\r\\n\"), i.join(\"\");\n    }, t.generateSessionId = function () {\n      return Math.random().toString().substr(2, 21);\n    }, t.writeSessionBoilerplate = function (e, i, r) {\n      var n;\n      var o = void 0 !== i ? i : 2;\n      n = e || t.generateSessionId();\n      return \"v=0\\r\\no=\" + (r || \"thisisadapterortc\") + \" \" + n + \" \" + o + \" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\";\n    }, t.getDirection = function (e, i) {\n      var r = t.splitLines(e);\n      for (var _e11 = 0; _e11 < r.length; _e11++) switch (r[_e11]) {\n        case \"a=sendrecv\":\n        case \"a=sendonly\":\n        case \"a=recvonly\":\n        case \"a=inactive\":\n          return r[_e11].substr(2);\n      }\n      return i ? t.getDirection(i) : \"sendrecv\";\n    }, t.getKind = function (e) {\n      return t.splitLines(e)[0].split(\" \")[0].substr(2);\n    }, t.isRejected = function (e) {\n      return \"0\" === e.split(\" \", 2)[1];\n    }, t.parseMLine = function (e) {\n      var i = t.splitLines(e)[0].substr(2).split(\" \");\n      return {\n        kind: i[0],\n        port: parseInt(i[1], 10),\n        protocol: i[2],\n        fmt: i.slice(3).join(\" \")\n      };\n    }, t.parseOLine = function (e) {\n      var i = t.matchPrefix(e, \"o=\")[0].substr(2).split(\" \");\n      return {\n        username: i[0],\n        sessionId: i[1],\n        sessionVersion: parseInt(i[2], 10),\n        netType: i[3],\n        addressType: i[4],\n        address: i[5]\n      };\n    }, t.isValidSDP = function (e) {\n      if (\"string\" != typeof e || 0 === e.length) return !1;\n      var i = t.splitLines(e);\n      for (var _e12 = 0; _e12 < i.length; _e12++) if (i[_e12].length < 2 || \"=\" !== i[_e12].charAt(1)) return !1;\n      return !0;\n    }, e.exports = t;\n  }(yh);\n  var Ch = yh.exports,\n    Ah = Object.freeze(e({\n      __proto__: null,\n      default: Ch\n    }, [yh.exports]));\n  function Oh(e) {\n    if (!e.RTCIceCandidate || e.RTCIceCandidate && \"foundation\" in e.RTCIceCandidate.prototype) return;\n    var t = e.RTCIceCandidate;\n    e.RTCIceCandidate = function (e) {\n      if (\"object\" == typeof e && e.candidate && 0 === e.candidate.indexOf(\"a=\") && ((e = JSON.parse(JSON.stringify(e))).candidate = e.candidate.substr(2)), e.candidate && e.candidate.length) {\n        var _i11 = new t(e),\n          _r13 = Ch.parseCandidate(e.candidate),\n          _n5 = Object.assign(_i11, _r13);\n        return _n5.toJSON = function () {\n          return {\n            candidate: _n5.candidate,\n            sdpMid: _n5.sdpMid,\n            sdpMLineIndex: _n5.sdpMLineIndex,\n            usernameFragment: _n5.usernameFragment\n          };\n        }, _n5;\n      }\n      return new t(e);\n    }, e.RTCIceCandidate.prototype = t.prototype, er(e, \"icecandidate\", function (t) {\n      return t.candidate && Object.defineProperty(t, \"candidate\", {\n        value: new e.RTCIceCandidate(t.candidate),\n        writable: \"false\"\n      }), t;\n    });\n  }\n  function bh(e) {\n    !e.RTCIceCandidate || e.RTCIceCandidate && \"relayProtocol\" in e.RTCIceCandidate.prototype || er(e, \"icecandidate\", function (e) {\n      if (e.candidate) {\n        var _t19 = Ch.parseCandidate(e.candidate.candidate);\n        \"relay\" === _t19.type && (e.candidate.relayProtocol = {\n          0: \"tls\",\n          1: \"tcp\",\n          2: \"udp\"\n        }[_t19.priority >> 24]);\n      }\n      return e;\n    });\n  }\n  function wh(e, t) {\n    if (!e.RTCPeerConnection) return;\n    \"sctp\" in e.RTCPeerConnection.prototype || Object.defineProperty(e.RTCPeerConnection.prototype, \"sctp\", {\n      get: function get() {\n        return void 0 === this._sctp ? null : this._sctp;\n      }\n    });\n    var i = function i(e) {\n        if (!e || !e.sdp) return !1;\n        var t = Ch.splitSections(e.sdp);\n        return t.shift(), t.some(function (e) {\n          var t = Ch.parseMLine(e);\n          return t && \"application\" === t.kind && -1 !== t.protocol.indexOf(\"SCTP\");\n        });\n      },\n      r = function r(e) {\n        var t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n        if (null === t || t.length < 2) return -1;\n        var i = parseInt(t[1], 10);\n        return i != i ? -1 : i;\n      },\n      n = function n(e) {\n        var i = 65536;\n        return \"firefox\" === t.browser && (i = t.version < 57 ? -1 === e ? 16384 : 2147483637 : t.version < 60 ? 57 === t.version ? 65535 : 65536 : 2147483637), i;\n      },\n      o = function o(e, i) {\n        var r = 65536;\n        \"firefox\" === t.browser && 57 === t.version && (r = 65535);\n        var n = Ch.matchPrefix(e.sdp, \"a=max-message-size:\");\n        return n.length > 0 ? r = parseInt(n[0].substr(19), 10) : \"firefox\" === t.browser && -1 !== i && (r = 2147483637), r;\n      },\n      s = e.RTCPeerConnection.prototype.setRemoteDescription;\n    e.RTCPeerConnection.prototype.setRemoteDescription = function () {\n      if (this._sctp = null, \"chrome\" === t.browser && t.version >= 76) {\n        var _this$getConfiguratio = this.getConfiguration(),\n          _e13 = _this$getConfiguratio.sdpSemantics;\n        \"plan-b\" === _e13 && Object.defineProperty(this, \"sctp\", {\n          get: function get() {\n            return void 0 === this._sctp ? null : this._sctp;\n          },\n          enumerable: !0,\n          configurable: !0\n        });\n      }\n      if (i(arguments[0])) {\n        var _e14 = r(arguments[0]),\n          _t20 = n(_e14),\n          _i12 = o(arguments[0], _e14);\n        var _s4;\n        _s4 = 0 === _t20 && 0 === _i12 ? Number.POSITIVE_INFINITY : 0 === _t20 || 0 === _i12 ? Math.max(_t20, _i12) : Math.min(_t20, _i12);\n        var _a2 = {};\n        Object.defineProperty(_a2, \"maxMessageSize\", {\n          get: function get() {\n            return _s4;\n          }\n        }), this._sctp = _a2;\n      }\n      return s.apply(this, arguments);\n    };\n  }\n  function Nh(e) {\n    if (!e.RTCPeerConnection || !(\"createDataChannel\" in e.RTCPeerConnection.prototype)) return;\n    function t(e, t) {\n      var i = e.send;\n      e.send = function () {\n        var r = arguments[0],\n          n = r.length || r.size || r.byteLength;\n        if (\"open\" === e.readyState && t.sctp && n > t.sctp.maxMessageSize) throw new TypeError(\"Message too large (can send a maximum of \" + t.sctp.maxMessageSize + \" bytes)\");\n        return i.apply(e, arguments);\n      };\n    }\n    var i = e.RTCPeerConnection.prototype.createDataChannel;\n    e.RTCPeerConnection.prototype.createDataChannel = function () {\n      var e = i.apply(this, arguments);\n      return t(e, this), e;\n    }, er(e, \"datachannel\", function (e) {\n      return t(e.channel, e.target), e;\n    });\n  }\n  function Dh(e) {\n    if (!e.RTCPeerConnection || \"connectionState\" in e.RTCPeerConnection.prototype) return;\n    var t = e.RTCPeerConnection.prototype;\n    Object.defineProperty(t, \"connectionState\", {\n      get: function get() {\n        return {\n          completed: \"connected\",\n          checking: \"connecting\"\n        }[this.iceConnectionState] || this.iceConnectionState;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t, \"onconnectionstatechange\", {\n      get: function get() {\n        return this._onconnectionstatechange || null;\n      },\n      set: function set(e) {\n        this._onconnectionstatechange && (this.removeEventListener(\"connectionstatechange\", this._onconnectionstatechange), delete this._onconnectionstatechange), e && this.addEventListener(\"connectionstatechange\", this._onconnectionstatechange = e);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), [\"setLocalDescription\", \"setRemoteDescription\"].forEach(function (e) {\n      var i = t[e];\n      t[e] = function () {\n        return this._connectionstatechangepoly || (this._connectionstatechangepoly = function (e) {\n          var t = e.target;\n          if (t._lastConnectionState !== t.connectionState) {\n            t._lastConnectionState = t.connectionState;\n            var _i13 = new Event(\"connectionstatechange\", e);\n            t.dispatchEvent(_i13);\n          }\n          return e;\n        }, this.addEventListener(\"iceconnectionstatechange\", this._connectionstatechangepoly)), i.apply(this, arguments);\n      };\n    });\n  }\n  function Ph(e, t) {\n    if (!e.RTCPeerConnection) return;\n    if (\"chrome\" === t.browser && t.version >= 71) return;\n    if (\"safari\" === t.browser && t.version >= 605) return;\n    var i = e.RTCPeerConnection.prototype.setRemoteDescription;\n    e.RTCPeerConnection.prototype.setRemoteDescription = function (t) {\n      if (t && t.sdp && -1 !== t.sdp.indexOf(\"\\na=extmap-allow-mixed\")) {\n        var _i14 = t.sdp.split(\"\\n\").filter(function (e) {\n          return \"a=extmap-allow-mixed\" !== Ih(e).call(e);\n        }).join(\"\\n\");\n        e.RTCSessionDescription && t instanceof e.RTCSessionDescription ? arguments[0] = new e.RTCSessionDescription({\n          type: t.type,\n          sdp: _i14\n        }) : t.sdp = _i14;\n      }\n      return i.apply(this, arguments);\n    };\n  }\n  function Lh(e, t) {\n    if (!e.RTCPeerConnection || !e.RTCPeerConnection.prototype) return;\n    var i = e.RTCPeerConnection.prototype.addIceCandidate;\n    i && 0 !== i.length && (e.RTCPeerConnection.prototype.addIceCandidate = function () {\n      return arguments[0] ? (\"chrome\" === t.browser && t.version < 78 || \"firefox\" === t.browser && t.version < 68 || \"safari\" === t.browser) && arguments[0] && \"\" === arguments[0].candidate ? Cl.resolve() : i.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Cl.resolve());\n    });\n  }\n  function kh(e, t) {\n    if (!e.RTCPeerConnection || !e.RTCPeerConnection.prototype) return;\n    var i = e.RTCPeerConnection.prototype.setLocalDescription;\n    i && 0 !== i.length && (e.RTCPeerConnection.prototype.setLocalDescription = function () {\n      var _this25 = this;\n      var e = arguments[0] || {};\n      if (\"object\" != typeof e || e.type && e.sdp) return i.apply(this, arguments);\n      if (e = {\n        type: e.type,\n        sdp: e.sdp\n      }, !e.type) switch (this.signalingState) {\n        case \"stable\":\n        case \"have-local-offer\":\n        case \"have-remote-pranswer\":\n          e.type = \"offer\";\n          break;\n        default:\n          e.type = \"answer\";\n      }\n      if (e.sdp || \"offer\" !== e.type && \"answer\" !== e.type) return i.apply(this, [e]);\n      var t = \"offer\" === e.type ? this.createOffer : this.createAnswer;\n      return t.apply(this).then(function (e) {\n        return i.apply(_this25, [e]);\n      });\n    });\n  }\n  var Mh = Object.freeze({\n    __proto__: null,\n    shimRTCIceCandidate: Oh,\n    shimRTCIceCandidateRelayProtocol: bh,\n    shimMaxMessageSize: wh,\n    shimSendThrowTypeError: Nh,\n    shimConnectionState: Dh,\n    removeExtmapAllowMixed: Ph,\n    shimAddIceCandidateNullOrEmpty: Lh,\n    shimParameterlessSetLocalDescription: kh\n  });\n  var Uh, xh;\n  !function () {\n    var _ref = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n      e = _ref.window,\n      t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {\n        shimChrome: !0,\n        shimFirefox: !0,\n        shimSafari: !0\n      };\n    var i = rr,\n      r = or(e),\n      n = {\n        browserDetails: r,\n        commonShim: Mh,\n        extractVersion: $i,\n        disableLog: tr,\n        disableWarnings: ir,\n        sdp: Ah\n      };\n    switch (r.browser) {\n      case \"chrome\":\n        if (!xl || !Ml || !t.shimChrome) return i(\"Chrome shim is not included in this adapter release.\"), n;\n        if (null === r.version) return i(\"Chrome shim can not determine version, not shimming.\"), n;\n        i(\"adapter.js shimming chrome.\"), n.browserShim = xl, Lh(e, r), kh(e), Ol(e, r), bl(e), Ml(e, r), wl(e), kl(e, r), Nl(e), Dl(e), Pl(e), Ul(e, r), Oh(e), bh(e), Dh(e), wh(e, r), Nh(e), Ph(e, r);\n        break;\n      case \"firefox\":\n        if (!Xl || !Fl || !t.shimFirefox) return i(\"Firefox shim is not included in this adapter release.\"), n;\n        i(\"adapter.js shimming firefox.\"), n.browserShim = Xl, Lh(e, r), kh(e), Vl(e, r), Fl(e, r), jl(e), Wl(e), Bl(e), Gl(e), Hl(e), Kl(e), Yl(e), ql(e), Jl(e), Oh(e), Dh(e), wh(e, r), Nh(e);\n        break;\n      case \"safari\":\n        if (!oh || !t.shimSafari) return i(\"Safari shim is not included in this adapter release.\"), n;\n        i(\"adapter.js shimming safari.\"), n.browserShim = oh, Lh(e, r), kh(e), th(e), rh(e), Zl(e), zl(e), Ql(e), ih(e), $l(e), nh(e), Oh(e), bh(e), wh(e, r), Nh(e), Ph(e, r);\n        break;\n      default:\n        i(\"Unsupported browser!\");\n    }\n  }({\n    window: \"undefined\" == typeof window ? void 0 : window\n  }), function (e) {\n    e.WIN_10 = \"Windows 10\", e.WIN_81 = \"Windows 8.1\", e.WIN_8 = \"Windows 8\", e.WIN_7 = \"Windows 7\", e.WIN_VISTA = \"Windows Vista\", e.WIN_SERVER_2003 = \"Windows Server 2003\", e.WIN_XP = \"Windows XP\", e.WIN_2000 = \"Windows 2000\", e.ANDROID = \"Android\", e.OPEN_BSD = \"Open BSD\", e.SUN_OS = \"Sun OS\", e.LINUX = \"Linux\", e.IOS = \"iOS\", e.MAC_OS = \"Mac OS\", e.QNX = \"QNX\", e.UNIX = \"UNIX\", e.BEOS = \"BeOS\", e.OS_2 = \"OS/2\", e.SEARCH_BOT = \"Search Bot\";\n  }(Uh || (Uh = {})), function (e) {\n    e.CHROME = \"Chrome\", e.SAFARI = \"Safari\", e.EDGE = \"Edge\", e.FIREFOX = \"Firefox\", e.OPERA = \"OPR\", e.QQ = \"QQBrowser\", e.WECHAT = \"MicroMessenger\";\n  }(xh || (xh = {}));\n  var Vh = {\n    exports: {}\n  };\n  !function (e, i) {\n    !function (t, r) {\n      var n = \"function\",\n        o = \"undefined\",\n        s = \"object\",\n        a = \"string\",\n        c = \"model\",\n        d = \"name\",\n        u = \"type\",\n        l = \"vendor\",\n        h = \"version\",\n        p = \"architecture\",\n        _ = \"console\",\n        E = \"mobile\",\n        f = \"tablet\",\n        m = \"smarttv\",\n        g = \"wearable\",\n        S = \"embedded\",\n        T = \"Amazon\",\n        v = \"Apple\",\n        R = \"ASUS\",\n        I = \"BlackBerry\",\n        y = \"Firefox\",\n        C = \"Google\",\n        A = \"Huawei\",\n        O = \"LG\",\n        b = \"Microsoft\",\n        w = \"Motorola\",\n        N = \"Opera\",\n        D = \"Samsung\",\n        P = \"Sharp\",\n        L = \"Sony\",\n        k = \"Xiaomi\",\n        M = \"Zebra\",\n        U = \"Facebook\",\n        x = function x(e) {\n          for (var t = {}, i = 0; i < e.length; i++) t[e[i].toUpperCase()] = e[i];\n          return t;\n        },\n        V = function V(e, t) {\n          return typeof e === a && -1 !== j(t).indexOf(j(e));\n        },\n        j = function j(e) {\n          return e.toLowerCase();\n        },\n        F = function F(e, t) {\n          if (typeof e === a) return e = e.replace(/^\\s\\s*/, \"\").replace(/\\s\\s*$/, \"\"), typeof t === o ? e : e.substring(0, 350);\n        },\n        B = function B(e, t) {\n          for (var i, o, a, c, d, u, l = 0; l < t.length && !d;) {\n            var h = t[l],\n              p = t[l + 1];\n            for (i = o = 0; i < h.length && !d;) if (d = h[i++].exec(e)) for (a = 0; a < p.length; a++) u = d[++o], typeof (c = p[a]) === s && c.length > 0 ? 2 === c.length ? typeof c[1] == n ? this[c[0]] = c[1].call(this, u) : this[c[0]] = c[1] : 3 === c.length ? typeof c[1] !== n || c[1].exec && c[1].test ? this[c[0]] = u ? u.replace(c[1], c[2]) : r : this[c[0]] = u ? c[1].call(this, u, c[2]) : r : 4 === c.length && (this[c[0]] = u ? c[3].call(this, u.replace(c[1], c[2])) : r) : this[c] = u || r;\n            l += 2;\n          }\n        },\n        G = function G(e, t) {\n          for (var i in t) if (typeof t[i] === s && t[i].length > 0) {\n            for (var n = 0; n < t[i].length; n++) if (V(t[i][n], e)) return \"?\" === i ? r : i;\n          } else if (V(t[i], e)) return \"?\" === i ? r : i;\n          return e;\n        },\n        W = {\n          ME: \"4.90\",\n          \"NT 3.11\": \"NT3.51\",\n          \"NT 4.0\": \"NT4.0\",\n          2e3: \"NT 5.0\",\n          XP: [\"NT 5.1\", \"NT 5.2\"],\n          Vista: \"NT 6.0\",\n          7: \"NT 6.1\",\n          8: \"NT 6.2\",\n          8.1: \"NT 6.3\",\n          10: [\"NT 6.4\", \"NT 10.0\"],\n          RT: \"ARM\"\n        },\n        H = {\n          browser: [[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i], [h, [d, \"Chrome\"]], [/edg(?:e|ios|a)?\\/([\\w\\.]+)/i], [h, [d, \"Edge\"]], [/(opera mini)\\/([-\\w\\.]+)/i, /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i, /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i], [d, h], [/opios[\\/ ]+([\\w\\.]+)/i], [h, [d, \"Opera Mini\"]], [/\\bopr\\/([\\w\\.]+)/i], [h, [d, N]], [/(kindle)\\/([\\w\\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i, /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i, /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i, /(?:ms|\\()(ie) ([\\w\\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i, /(weibo)__([\\d\\.]+)/i], [d, h], [/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i], [h, [d, \"UCBrowser\"]], [/microm.+\\bqbcore\\/([\\w\\.]+)/i, /\\bqbcore\\/([\\w\\.]+).+microm/i], [h, [d, \"WeChat(Win) Desktop\"]], [/micromessenger\\/([\\w\\.]+)/i], [h, [d, \"WeChat\"]], [/konqueror\\/([\\w\\.]+)/i], [h, [d, \"Konqueror\"]], [/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i], [h, [d, \"IE\"]], [/yabrowser\\/([\\w\\.]+)/i], [h, [d, \"Yandex\"]], [/(avast|avg)\\/([\\w\\.]+)/i], [[d, /(.+)/, \"$1 Secure Browser\"], h], [/\\bfocus\\/([\\w\\.]+)/i], [h, [d, \"Firefox Focus\"]], [/\\bopt\\/([\\w\\.]+)/i], [h, [d, \"Opera Touch\"]], [/coc_coc\\w+\\/([\\w\\.]+)/i], [h, [d, \"Coc Coc\"]], [/dolfin\\/([\\w\\.]+)/i], [h, [d, \"Dolphin\"]], [/coast\\/([\\w\\.]+)/i], [h, [d, \"Opera Coast\"]], [/miuibrowser\\/([\\w\\.]+)/i], [h, [d, \"MIUI Browser\"]], [/fxios\\/([-\\w\\.]+)/i], [h, [d, y]], [/\\bqihu|(qi?ho?o?|360)browser/i], [[d, \"360 Browser\"]], [/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i], [[d, /(.+)/, \"$1 Browser\"], h], [/(comodo_dragon)\\/([\\w\\.]+)/i], [[d, /_/g, \" \"], h], [/(electron)\\/([\\w\\.]+) safari/i, /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i, /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i], [d, h], [/(metasr)[\\/ ]?([\\w\\.]+)/i, /(lbbrowser)/i, /\\[(linkedin)app\\]/i], [d], [/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i], [[d, U], h], [/safari (line)\\/([\\w\\.]+)/i, /\\b(line)\\/([\\w\\.]+)\\/iab/i, /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i], [d, h], [/\\bgsa\\/([\\w\\.]+) .*safari\\//i], [h, [d, \"GSA\"]], [/headlesschrome(?:\\/([\\w\\.]+)| )/i], [h, [d, \"Chrome Headless\"]], [/ wv\\).+(chrome)\\/([\\w\\.]+)/i], [[d, \"Chrome WebView\"], h], [/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i], [h, [d, \"Android Browser\"]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i], [d, h], [/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i], [h, [d, \"Mobile Safari\"]], [/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i], [h, d], [/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i], [d, [h, G, {\n            \"1.0\": \"/8\",\n            1.2: \"/1\",\n            1.3: \"/3\",\n            \"2.0\": \"/412\",\n            \"2.0.2\": \"/416\",\n            \"2.0.3\": \"/417\",\n            \"2.0.4\": \"/419\",\n            \"?\": \"/\"\n          }]], [/(webkit|khtml)\\/([\\w\\.]+)/i], [d, h], [/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i], [[d, \"Netscape\"], h], [/mobile vr; rv:([\\w\\.]+)\\).+firefox/i], [h, [d, \"Firefox Reality\"]], [/ekiohf.+(flow)\\/([\\w\\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i, /(firefox)\\/([\\w\\.]+)/i, /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i, /(links) \\(([\\w\\.]+)/i], [d, h]],\n          cpu: [[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i], [[p, \"amd64\"]], [/(ia32(?=;))/i], [[p, j]], [/((?:i[346]|x)86)[;\\)]/i], [[p, \"ia32\"]], [/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i], [[p, \"arm64\"]], [/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i], [[p, \"armhf\"]], [/windows (ce|mobile); ppc;/i], [[p, \"arm\"]], [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i], [[p, /ower/, \"\", j]], [/(sun4\\w)[;\\)]/i], [[p, \"sparc\"]], [/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i], [[p, j]]],\n          device: [[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i], [c, [l, D], [u, f]], [/\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i, /samsung[- ]([-\\w]+)/i, /sec-(sgh\\w+)/i], [c, [l, D], [u, E]], [/\\((ip(?:hone|od)[\\w ]*);/i], [c, [l, v], [u, E]], [/\\((ipad);[-\\w\\),; ]+apple/i, /applecoremedia\\/[\\w\\.]+ \\((ipad)/i, /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i], [c, [l, v], [u, f]], [/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i], [c, [l, A], [u, f]], [/(?:huawei|honor)([-\\w ]+)[;\\)]/i, /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i], [c, [l, A], [u, E]], [/\\b(poco[\\w ]+)(?: bui|\\))/i, /\\b; (\\w+) build\\/hm\\1/i, /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i, /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i, /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i], [[c, /_/g, \" \"], [l, k], [u, E]], [/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i], [[c, /_/g, \" \"], [l, k], [u, f]], [/; (\\w+) bui.+ oppo/i, /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i], [c, [l, \"OPPO\"], [u, E]], [/vivo (\\w+)(?: bui|\\))/i, /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i], [c, [l, \"Vivo\"], [u, E]], [/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i], [c, [l, \"Realme\"], [u, E]], [/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i, /\\bmot(?:orola)?[- ](\\w*)/i, /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i], [c, [l, w], [u, E]], [/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i], [c, [l, w], [u, f]], [/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i], [c, [l, O], [u, f]], [/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i, /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i, /\\blg-?([\\d\\w]+) bui/i], [c, [l, O], [u, E]], [/(ideatab[-\\w ]+)/i, /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i], [c, [l, \"Lenovo\"], [u, f]], [/(?:maemo|nokia).*(n900|lumia \\d+)/i, /nokia[-_ ]?([-\\w\\.]*)/i], [[c, /_/g, \" \"], [l, \"Nokia\"], [u, E]], [/(pixel c)\\b/i], [c, [l, C], [u, f]], [/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i], [c, [l, C], [u, E]], [/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i], [c, [l, L], [u, E]], [/sony tablet [ps]/i, /\\b(?:sony)?sgp\\w+(?: bui|\\))/i], [[c, \"Xperia Tablet\"], [l, L], [u, f]], [/ (kb2005|in20[12]5|be20[12][59])\\b/i, /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i], [c, [l, \"OnePlus\"], [u, E]], [/(alexa)webm/i, /(kf[a-z]{2}wi)( bui|\\))/i, /(kf[a-z]+)( bui|\\)).+silk\\//i], [c, [l, T], [u, f]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i], [[c, /(.+)/g, \"Fire Phone $1\"], [l, T], [u, E]], [/(playbook);[-\\w\\),; ]+(rim)/i], [c, l, [u, f]], [/\\b((?:bb[a-f]|st[hv])100-\\d)/i, /\\(bb10; (\\w+)/i], [c, [l, I], [u, E]], [/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i], [c, [l, R], [u, f]], [/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i], [c, [l, R], [u, E]], [/(nexus 9)/i], [c, [l, \"HTC\"], [u, f]], [/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i, /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i, /(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\\w]*)/i], [l, [c, /_/g, \" \"], [u, E]], [/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i], [c, [l, \"Acer\"], [u, f]], [/droid.+; (m[1-5] note) bui/i, /\\bmz-([-\\w]{2,})/i], [c, [l, \"Meizu\"], [u, E]], [/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i], [c, [l, P], [u, E]], [/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i, /(hp) ([\\w ]+\\w)/i, /(asus)-?(\\w+)/i, /(microsoft); (lumia[\\w ]+)/i, /(lenovo)[-_ ]?([-\\w]+)/i, /(jolla)/i, /(oppo) ?([\\w ]+) bui/i], [l, c, [u, E]], [/(archos) (gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\\/([\\w\\.]+)/i, /(nook)[\\w ]+build\\/(\\w+)/i, /(dell) (strea[kpr\\d ]*[\\dko])/i, /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i, /(trinity)[- ]*(t\\d{3}) bui/i, /(gigaset)[- ]+(q\\w{1,9}) bui/i, /(vodafone) ([\\w ]+)(?:\\)| bui)/i], [l, c, [u, f]], [/(surface duo)/i], [c, [l, b], [u, f]], [/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i], [c, [l, \"Fairphone\"], [u, E]], [/(u304aa)/i], [c, [l, \"AT&T\"], [u, E]], [/\\bsie-(\\w*)/i], [c, [l, \"Siemens\"], [u, E]], [/\\b(rct\\w+) b/i], [c, [l, \"RCA\"], [u, f]], [/\\b(venue[\\d ]{2,7}) b/i], [c, [l, \"Dell\"], [u, f]], [/\\b(q(?:mv|ta)\\w+) b/i], [c, [l, \"Verizon\"], [u, f]], [/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i], [c, [l, \"Barnes & Noble\"], [u, f]], [/\\b(tm\\d{3}\\w+) b/i], [c, [l, \"NuVision\"], [u, f]], [/\\b(k88) b/i], [c, [l, \"ZTE\"], [u, f]], [/\\b(nx\\d{3}j) b/i], [c, [l, \"ZTE\"], [u, E]], [/\\b(gen\\d{3}) b.+49h/i], [c, [l, \"Swiss\"], [u, E]], [/\\b(zur\\d{3}) b/i], [c, [l, \"Swiss\"], [u, f]], [/\\b((zeki)?tb.*\\b) b/i], [c, [l, \"Zeki\"], [u, f]], [/\\b([yr]\\d{2}) b/i, /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i], [[l, \"Dragon Touch\"], c, [u, f]], [/\\b(ns-?\\w{0,9}) b/i], [c, [l, \"Insignia\"], [u, f]], [/\\b((nxa|next)-?\\w{0,9}) b/i], [c, [l, \"NextBook\"], [u, f]], [/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i], [[l, \"Voice\"], c, [u, E]], [/\\b(lvtel\\-)?(v1[12]) b/i], [[l, \"LvTel\"], c, [u, E]], [/\\b(ph-1) /i], [c, [l, \"Essential\"], [u, E]], [/\\b(v(100md|700na|7011|917g).*\\b) b/i], [c, [l, \"Envizen\"], [u, f]], [/\\b(trio[-\\w\\. ]+) b/i], [c, [l, \"MachSpeed\"], [u, f]], [/\\btu_(1491) b/i], [c, [l, \"Rotor\"], [u, f]], [/(shield[\\w ]+) b/i], [c, [l, \"Nvidia\"], [u, f]], [/(sprint) (\\w+)/i], [l, c, [u, E]], [/(kin\\.[onetw]{3})/i], [[c, /\\./g, \" \"], [l, b], [u, E]], [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i], [c, [l, M], [u, f]], [/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i], [c, [l, M], [u, E]], [/(ouya)/i, /(nintendo) ([wids3utch]+)/i], [l, c, [u, _]], [/droid.+; (shield) bui/i], [c, [l, \"Nvidia\"], [u, _]], [/(playstation [345portablevi]+)/i], [c, [l, L], [u, _]], [/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i], [c, [l, b], [u, _]], [/smart-tv.+(samsung)/i], [l, [u, m]], [/hbbtv.+maple;(\\d+)/i], [[c, /^/, \"SmartTV\"], [l, D], [u, m]], [/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i], [[l, O], [u, m]], [/(apple) ?tv/i], [l, [c, \"Apple TV\"], [u, m]], [/crkey/i], [[c, \"Chromecast\"], [l, C], [u, m]], [/droid.+aft(\\w)( bui|\\))/i], [c, [l, T], [u, m]], [/\\(dtv[\\);].+(aquos)/i, /(aquos-tv[\\w ]+)\\)/i], [c, [l, P], [u, m]], [/(bravia[\\w ]+)( bui|\\))/i], [c, [l, L], [u, m]], [/(mitv-\\w{5}) bui/i], [c, [l, k], [u, m]], [/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i, /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i], [[l, F], [c, F], [u, m]], [/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i], [[u, m]], [/((pebble))app/i], [l, c, [u, g]], [/droid.+; (glass) \\d/i], [c, [l, C], [u, g]], [/droid.+; (wt63?0{2,3})\\)/i], [c, [l, M], [u, g]], [/(quest( 2)?)/i], [c, [l, U], [u, g]], [/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i], [l, [u, S]], [/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i], [c, [u, E]], [/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i], [c, [u, f]], [/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i], [[u, f]], [/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i], [[u, E]], [/(android[-\\w\\. ]{0,9});.+buil/i], [c, [l, \"Generic\"]]],\n          engine: [[/windows.+ edge\\/([\\w\\.]+)/i], [h, [d, \"EdgeHTML\"]], [/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i], [h, [d, \"Blink\"]], [/(presto)\\/([\\w\\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, /ekioh(flow)\\/([\\w\\.]+)/i, /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i, /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i], [d, h], [/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i], [h, d]],\n          os: [[/microsoft (windows) (vista|xp)/i], [d, h], [/(windows) nt 6\\.2; (arm)/i, /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i, /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i], [d, [h, G, W]], [/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i], [[d, \"Windows\"], [h, G, W]], [/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i, /cfnetwork\\/.+darwin/i], [[h, /_/g, \".\"], [d, \"iOS\"]], [/(mac os x) ?([\\w\\. ]*)/i, /(macintosh|mac_powerpc\\b)(?!.+haiku)/i], [[d, \"Mac OS\"], [h, /_/g, \".\"]], [/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i], [h, d], [/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i, /(blackberry)\\w*\\/([\\w\\.]*)/i, /(tizen|kaios)[\\/ ]([\\w\\.]+)/i, /\\((series40);/i], [d, h], [/\\(bb(10);/i], [h, [d, I]], [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i], [h, [d, \"Symbian\"]], [/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i], [h, [d, \"Firefox OS\"]], [/web0s;.+rt(tv)/i, /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i], [h, [d, \"webOS\"]], [/crkey\\/([\\d\\.]+)/i], [h, [d, \"Chromecast\"]], [/(cros) [\\w]+ ([\\w\\.]+\\w)/i], [[d, \"Chromium OS\"], h], [/(nintendo|playstation) ([wids345portablevuch]+)/i, /(xbox); +xbox ([^\\);]+)/i, /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i, /(mint)[\\/\\(\\) ]?(\\w*)/i, /(mageia|vectorlinux)[; ]/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i, /(hurd|linux) ?([\\w\\.]*)/i, /(gnu) ?([\\w\\.]*)/i, /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, /(haiku) (\\w+)/i], [d, h], [/(sunos) ?([\\w\\.\\d]*)/i], [[d, \"Solaris\"], h], [/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i, /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i, /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i, /(unix) ?([\\w\\.]*)/i], [d, h]]\n        },\n        K = function K(e, i) {\n          if (typeof e === s && (i = e, e = r), !(this instanceof K)) return new K(e, i).getResult();\n          var n = e || (typeof t !== o && t.navigator && t.navigator.userAgent ? t.navigator.userAgent : \"\"),\n            c = i ? function (e, t) {\n              var i = {};\n              for (var r in e) t[r] && t[r].length % 2 == 0 ? i[r] = t[r].concat(e[r]) : i[r] = e[r];\n              return i;\n            }(H, i) : H;\n          return this.getBrowser = function () {\n            var e = {};\n            return e.name = r, e.version = r, B.call(e, n, c.browser), e.major = function (e) {\n              return typeof e === a ? e.replace(/[^\\d\\.]/g, \"\").split(\".\")[0] : r;\n            }(e.version), e;\n          }, this.getCPU = function () {\n            var e = {};\n            return e.architecture = r, B.call(e, n, c.cpu), e;\n          }, this.getDevice = function () {\n            var e = {};\n            return e.vendor = r, e.model = r, e.type = r, B.call(e, n, c.device), e;\n          }, this.getEngine = function () {\n            var e = {};\n            return e.name = r, e.version = r, B.call(e, n, c.engine), e;\n          }, this.getOS = function () {\n            var e = {};\n            return e.name = r, e.version = r, B.call(e, n, c.os), e;\n          }, this.getResult = function () {\n            return {\n              ua: this.getUA(),\n              browser: this.getBrowser(),\n              engine: this.getEngine(),\n              os: this.getOS(),\n              device: this.getDevice(),\n              cpu: this.getCPU()\n            };\n          }, this.getUA = function () {\n            return n;\n          }, this.setUA = function (e) {\n            return n = typeof e === a && e.length > 350 ? F(e, 350) : e, this;\n          }, this.setUA(n), this;\n        };\n      K.VERSION = \"0.7.32\", K.BROWSER = x([d, h, \"major\"]), K.CPU = x([p]), K.DEVICE = x([c, l, u, _, E, m, f, g, S]), K.ENGINE = K.OS = x([d, h]), e.exports && (i = e.exports = K), i.UAParser = K;\n      var Y = typeof t !== o && (t.jQuery || t.Zepto);\n      if (Y && !Y.ua) {\n        var q = new K();\n        Y.ua = q.getResult(), Y.ua.get = function () {\n          return q.getUA();\n        }, Y.ua.set = function (e) {\n          q.setUA(e);\n          var t = q.getResult();\n          for (var i in t) Y.ua[i] = t[i];\n        };\n      }\n    }(\"object\" == typeof window ? window : t);\n  }(Vh, Vh.exports);\n  var jh = new (0, Vh.exports)();\n  var Fh = jh.getResult();\n  function Bh(e) {\n    return e && jh.setUA(e), Fh = jh.getResult(), {\n      name: Gh(Fh),\n      version: Wh(Fh),\n      os: Hh(Fh),\n      osVersion: Fh.os.version\n    };\n  }\n  function Gh(e) {\n    if (\"Blink\" === e.engine.name && \"WeChat\" !== e.browser.name) return xh.CHROME;\n    switch (e.browser.name) {\n      case \"Chrome Headless\":\n      case \"Chrome\":\n      case \"Chromium\":\n        return xh.CHROME;\n      case \"Safari\":\n      case \"Mobile Safari\":\n        return xh.SAFARI;\n      case \"Edge\":\n        return xh.EDGE;\n      case \"Firefox\":\n        return xh.FIREFOX;\n      case \"QQBrowser\":\n        return xh.QQ;\n      case \"Opera\":\n        return xh.OPERA;\n      case \"WeChat\":\n        return xh.WECHAT;\n      default:\n        return e.browser.name || \"\";\n    }\n  }\n  function Wh(e) {\n    var t;\n    return t = \"Blink\" === e.engine.name ? e.engine.version || \"\" : e.browser.version || \"\", t.split(\".\")[0];\n  }\n  function Hh(e) {\n    switch (e.os.name) {\n      case \"Windows\":\n        return e.os.version ? e.os.name + \" \" + e.os.version : e.os.name;\n      default:\n        return e.os.name || \"\";\n    }\n  }\n  function Kh() {\n    return Bh().os;\n  }\n  function Yh() {\n    var e = Bh();\n    return !!(\"WebKit\" === Fh.engine.name && e.os === Uh.MAC_OS && navigator.maxTouchPoints && navigator.maxTouchPoints > 0 && e.name !== xh.SAFARI || Zh() && e.name !== xh.SAFARI);\n  }\n  function qh() {\n    var e = Bh();\n    if (Yh()) {\n      if (e.os === Uh.MAC_OS) return !0;\n      if (e.os === Uh.IOS) {\n        var _e15 = Fh.os.version && Fh.os.version.split(\".\");\n        if (_e15 && 14 === Number(_e15[0]) && _e15[1] && Number(_e15[1]) >= 3) return !0;\n        if (_e15 && Number(_e15[0]) > 14) return !0;\n      }\n    }\n    return !1;\n  }\n  function Jh() {\n    return \"WebKit\" === Fh.engine.name;\n  }\n  function Xh() {\n    return Bh().name === xh.CHROME;\n  }\n  function zh() {\n    return Bh().name === xh.SAFARI;\n  }\n  function Qh() {\n    return Bh().name === xh.FIREFOX;\n  }\n  function Zh() {\n    return Bh().os === Uh.IOS;\n  }\n  function $h() {\n    var e = Bh();\n    return !(e.name !== xh.CHROME || !e.osVersion) && Number(e.version) <= 90;\n  }\n  function ep() {\n    var e = Bh();\n    if (e.os !== Uh.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]);\n  }\n  function tp() {\n    var e = Bh();\n    if (e.os !== Uh.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]) && 0 === Number(t[1]);\n  }\n  function ip() {\n    var e = Bh();\n    if (e.os !== Uh.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]) && Number(t[1]) >= 1;\n  }\n  function rp() {\n    var e = Bh();\n    if (e.os !== Uh.IOS || !e.osVersion) return !1;\n    var t = e.osVersion.split(\".\");\n    return 15 === Number(t[0]) && Number(t[1]) >= 2;\n  }\n  function np() {\n    return zh() && navigator.maxTouchPoints > 0;\n  }\n  function op() {\n    return Bh().name === xh.WECHAT;\n  }\n  function sp() {\n    return window.navigator.appVersion && null !== window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./) && window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1] <= 35;\n  }\n  function ap() {\n    var e = Bh();\n    if (e.name === xh.EDGE || e.name === xh.SAFARI) return !1;\n    return !!navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]./i);\n  }\n  function cp() {\n    return Bh().os === Uh.ANDROID;\n  }\n  function dp() {\n    var e = Bh();\n    return \"Android\" === e.os && (\"Chrome\" === e.name || e.name === xh.WECHAT || /chrome|chromium/i.test(navigator.userAgent));\n  }\n  var up = {\n      exports: {}\n    },\n    lp = Ri,\n    hp = T,\n    pp = Ht.f;\n  lp({\n    target: \"Object\",\n    stat: !0,\n    forced: Object.defineProperty !== pp,\n    sham: !hp\n  }, {\n    defineProperty: pp\n  });\n  var _p = J.Object,\n    Ep = up.exports = function (e, t, i) {\n      return _p.defineProperty(e, t, i);\n    };\n  _p.defineProperty.sham && (Ep.sham = !0);\n  var fp = up.exports;\n  function mp(e, t, i) {\n    return t in e ? fp(e, t, {\n      value: i,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[t] = i, e;\n  }\n  var gp,\n    Sp = {\n      exports: {}\n    },\n    Tp = function Tp(e, t) {\n      return function () {\n        for (var i = new Array(arguments.length), r = 0; r < i.length; r++) i[r] = arguments[r];\n        return e.apply(t, i);\n      };\n    },\n    vp = Tp,\n    Rp = Object.prototype.toString,\n    Ip = (gp = Object.create(null), function (e) {\n      var t = Rp.call(e);\n      return gp[t] || (gp[t] = t.slice(8, -1).toLowerCase());\n    });\n  function yp(e) {\n    return e = e.toLowerCase(), function (t) {\n      return Ip(t) === e;\n    };\n  }\n  function Cp(e) {\n    return Array.isArray(e);\n  }\n  function Ap(e) {\n    return void 0 === e;\n  }\n  var Op = yp(\"ArrayBuffer\");\n  function bp(e) {\n    return null !== e && \"object\" == typeof e;\n  }\n  function wp(e) {\n    if (\"object\" !== Ip(e)) return !1;\n    var t = Object.getPrototypeOf(e);\n    return null === t || t === Object.prototype;\n  }\n  var Np = yp(\"Date\"),\n    Dp = yp(\"File\"),\n    Pp = yp(\"Blob\"),\n    Lp = yp(\"FileList\");\n  function kp(e) {\n    return \"[object Function]\" === Rp.call(e);\n  }\n  var Mp = yp(\"URLSearchParams\");\n  function Up(e, t) {\n    if (null != e) if (\"object\" != typeof e && (e = [e]), Cp(e)) for (var i = 0, r = e.length; i < r; i++) t.call(null, e[i], i, e);else for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.call(null, e[n], n, e);\n  }\n  var xp,\n    Vp = (xp = \"undefined\" != typeof Uint8Array && Object.getPrototypeOf(Uint8Array), function (e) {\n      return xp && e instanceof xp;\n    }),\n    jp = {\n      isArray: Cp,\n      isArrayBuffer: Op,\n      isBuffer: function isBuffer(e) {\n        return null !== e && !Ap(e) && null !== e.constructor && !Ap(e.constructor) && \"function\" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e);\n      },\n      isFormData: function isFormData(e) {\n        var t = \"[object FormData]\";\n        return e && (\"function\" == typeof FormData && e instanceof FormData || Rp.call(e) === t || kp(e.toString) && e.toString() === t);\n      },\n      isArrayBufferView: function isArrayBufferView(e) {\n        return \"undefined\" != typeof ArrayBuffer && ArrayBuffer.isView ? ArrayBuffer.isView(e) : e && e.buffer && Op(e.buffer);\n      },\n      isString: function isString(e) {\n        return \"string\" == typeof e;\n      },\n      isNumber: function isNumber(e) {\n        return \"number\" == typeof e;\n      },\n      isObject: bp,\n      isPlainObject: wp,\n      isUndefined: Ap,\n      isDate: Np,\n      isFile: Dp,\n      isBlob: Pp,\n      isFunction: kp,\n      isStream: function isStream(e) {\n        return bp(e) && kp(e.pipe);\n      },\n      isURLSearchParams: Mp,\n      isStandardBrowserEnv: function isStandardBrowserEnv() {\n        return (\"undefined\" == typeof navigator || \"ReactNative\" !== navigator.product && \"NativeScript\" !== navigator.product && \"NS\" !== navigator.product) && \"undefined\" != typeof window && \"undefined\" != typeof document;\n      },\n      forEach: Up,\n      merge: function e() {\n        var t = {};\n        function i(i, r) {\n          wp(t[r]) && wp(i) ? t[r] = e(t[r], i) : wp(i) ? t[r] = e({}, i) : Cp(i) ? t[r] = i.slice() : t[r] = i;\n        }\n        for (var r = 0, n = arguments.length; r < n; r++) Up(arguments[r], i);\n        return t;\n      },\n      extend: function extend(e, t, i) {\n        return Up(t, function (t, r) {\n          e[r] = i && \"function\" == typeof t ? vp(t, i) : t;\n        }), e;\n      },\n      trim: function trim(e) {\n        return e.trim ? e.trim() : e.replace(/^\\s+|\\s+$/g, \"\");\n      },\n      stripBOM: function stripBOM(e) {\n        return 65279 === e.charCodeAt(0) && (e = e.slice(1)), e;\n      },\n      inherits: function inherits(e, t, i, r) {\n        e.prototype = Object.create(t.prototype, r), e.prototype.constructor = e, i && Object.assign(e.prototype, i);\n      },\n      toFlatObject: function toFlatObject(e, t, i) {\n        var r,\n          n,\n          o,\n          s = {};\n        t = t || {};\n        do {\n          for (n = (r = Object.getOwnPropertyNames(e)).length; n-- > 0;) s[o = r[n]] || (t[o] = e[o], s[o] = !0);\n          e = Object.getPrototypeOf(e);\n        } while (e && (!i || i(e, t)) && e !== Object.prototype);\n        return t;\n      },\n      kindOf: Ip,\n      kindOfTest: yp,\n      endsWith: function endsWith(e, t, i) {\n        e = String(e), (void 0 === i || i > e.length) && (i = e.length), i -= t.length;\n        var r = e.indexOf(t, i);\n        return -1 !== r && r === i;\n      },\n      toArray: function toArray(e) {\n        if (!e) return null;\n        var t = e.length;\n        if (Ap(t)) return null;\n        for (var i = new Array(t); t-- > 0;) i[t] = e[t];\n        return i;\n      },\n      isTypedArray: Vp,\n      isFileList: Lp\n    },\n    Fp = jp;\n  function Bp(e) {\n    return encodeURIComponent(e).replace(/%3A/gi, \":\").replace(/%24/g, \"$\").replace(/%2C/gi, \",\").replace(/%20/g, \"+\").replace(/%5B/gi, \"[\").replace(/%5D/gi, \"]\");\n  }\n  var Gp = function Gp(e, t, i) {\n      if (!t) return e;\n      var r;\n      if (i) r = i(t);else if (Fp.isURLSearchParams(t)) r = t.toString();else {\n        var n = [];\n        Fp.forEach(t, function (e, t) {\n          null != e && (Fp.isArray(e) ? t += \"[]\" : e = [e], Fp.forEach(e, function (e) {\n            Fp.isDate(e) ? e = e.toISOString() : Fp.isObject(e) && (e = JSON.stringify(e)), n.push(Bp(t) + \"=\" + Bp(e));\n          }));\n        }), r = n.join(\"&\");\n      }\n      if (r) {\n        var o = e.indexOf(\"#\");\n        -1 !== o && (e = e.slice(0, o)), e += (-1 === e.indexOf(\"?\") ? \"?\" : \"&\") + r;\n      }\n      return e;\n    },\n    Wp = jp;\n  function Hp() {\n    this.handlers = [];\n  }\n  Hp.prototype.use = function (e, t, i) {\n    return this.handlers.push({\n      fulfilled: e,\n      rejected: t,\n      synchronous: !!i && i.synchronous,\n      runWhen: i ? i.runWhen : null\n    }), this.handlers.length - 1;\n  }, Hp.prototype.eject = function (e) {\n    this.handlers[e] && (this.handlers[e] = null);\n  }, Hp.prototype.forEach = function (e) {\n    Wp.forEach(this.handlers, function (t) {\n      null !== t && e(t);\n    });\n  };\n  var Kp = Hp,\n    Yp = jp,\n    qp = jp;\n  function Jp(e, t, i, r, n) {\n    Error.call(this), this.message = e, this.name = \"AxiosError\", t && (this.code = t), i && (this.config = i), r && (this.request = r), n && (this.response = n);\n  }\n  qp.inherits(Jp, Error, {\n    toJSON: function toJSON() {\n      return {\n        message: this.message,\n        name: this.name,\n        description: this.description,\n        number: this.number,\n        fileName: this.fileName,\n        lineNumber: this.lineNumber,\n        columnNumber: this.columnNumber,\n        stack: this.stack,\n        config: this.config,\n        code: this.code,\n        status: this.response && this.response.status ? this.response.status : null\n      };\n    }\n  });\n  var Xp = Jp.prototype,\n    zp = {};\n  [\"ERR_BAD_OPTION_VALUE\", \"ERR_BAD_OPTION\", \"ECONNABORTED\", \"ETIMEDOUT\", \"ERR_NETWORK\", \"ERR_FR_TOO_MANY_REDIRECTS\", \"ERR_DEPRECATED\", \"ERR_BAD_RESPONSE\", \"ERR_BAD_REQUEST\", \"ERR_CANCELED\"].forEach(function (e) {\n    zp[e] = {\n      value: e\n    };\n  }), Object.defineProperties(Jp, zp), Object.defineProperty(Xp, \"isAxiosError\", {\n    value: !0\n  }), Jp.from = function (e, t, i, r, n, o) {\n    var s = Object.create(Xp);\n    return qp.toFlatObject(e, s, function (e) {\n      return e !== Error.prototype;\n    }), Jp.call(s, e.message, t, i, r, n), s.name = e.name, o && Object.assign(s, o), s;\n  };\n  var Qp = Jp,\n    Zp = {\n      silentJSONParsing: !0,\n      forcedJSONParsing: !0,\n      clarifyTimeoutError: !1\n    },\n    $p = jp;\n  var e_ = function e_(e, t) {\n      t = t || new FormData();\n      var i = [];\n      function r(e) {\n        return null === e ? \"\" : $p.isDate(e) ? e.toISOString() : $p.isArrayBuffer(e) || $p.isTypedArray(e) ? \"function\" == typeof Blob ? new Blob([e]) : Buffer.from(e) : e;\n      }\n      return function e(n, o) {\n        if ($p.isPlainObject(n) || $p.isArray(n)) {\n          if (-1 !== i.indexOf(n)) throw Error(\"Circular reference detected in \" + o);\n          i.push(n), $p.forEach(n, function (i, n) {\n            if (!$p.isUndefined(i)) {\n              var s,\n                a = o ? o + \".\" + n : n;\n              if (i && !o && \"object\" == typeof i) if ($p.endsWith(n, \"{}\")) i = JSON.stringify(i);else if ($p.endsWith(n, \"[]\") && (s = $p.toArray(i))) return void s.forEach(function (e) {\n                !$p.isUndefined(e) && t.append(a, r(e));\n              });\n              e(i, a);\n            }\n          }), i.pop();\n        } else t.append(o, r(n));\n      }(e), t;\n    },\n    t_ = Qp,\n    i_ = jp,\n    r_ = i_.isStandardBrowserEnv() ? {\n      write: function write(e, t, i, r, n, o) {\n        var s = [];\n        s.push(e + \"=\" + encodeURIComponent(t)), i_.isNumber(i) && s.push(\"expires=\" + new Date(i).toGMTString()), i_.isString(r) && s.push(\"path=\" + r), i_.isString(n) && s.push(\"domain=\" + n), !0 === o && s.push(\"secure\"), document.cookie = s.join(\"; \");\n      },\n      read: function read(e) {\n        var t = document.cookie.match(new RegExp(\"(^|;\\\\s*)(\" + e + \")=([^;]*)\"));\n        return t ? decodeURIComponent(t[3]) : null;\n      },\n      remove: function remove(e) {\n        this.write(e, \"\", Date.now() - 864e5);\n      }\n    } : {\n      write: function write() {},\n      read: function read() {\n        return null;\n      },\n      remove: function remove() {}\n    },\n    n_ = function n_(e) {\n      return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(e);\n    },\n    o_ = function o_(e, t) {\n      return t ? e.replace(/\\/+$/, \"\") + \"/\" + t.replace(/^\\/+/, \"\") : e;\n    },\n    s_ = function s_(e, t) {\n      return e && !n_(t) ? o_(e, t) : t;\n    },\n    a_ = jp,\n    c_ = [\"age\", \"authorization\", \"content-length\", \"content-type\", \"etag\", \"expires\", \"from\", \"host\", \"if-modified-since\", \"if-unmodified-since\", \"last-modified\", \"location\", \"max-forwards\", \"proxy-authorization\", \"referer\", \"retry-after\", \"user-agent\"],\n    d_ = jp,\n    u_ = d_.isStandardBrowserEnv() ? function () {\n      var e,\n        t = /(msie|trident)/i.test(navigator.userAgent),\n        i = document.createElement(\"a\");\n      function r(e) {\n        var r = e;\n        return t && (i.setAttribute(\"href\", r), r = i.href), i.setAttribute(\"href\", r), {\n          href: i.href,\n          protocol: i.protocol ? i.protocol.replace(/:$/, \"\") : \"\",\n          host: i.host,\n          search: i.search ? i.search.replace(/^\\?/, \"\") : \"\",\n          hash: i.hash ? i.hash.replace(/^#/, \"\") : \"\",\n          hostname: i.hostname,\n          port: i.port,\n          pathname: \"/\" === i.pathname.charAt(0) ? i.pathname : \"/\" + i.pathname\n        };\n      }\n      return e = r(window.location.href), function (t) {\n        var i = d_.isString(t) ? r(t) : t;\n        return i.protocol === e.protocol && i.host === e.host;\n      };\n    }() : function () {\n      return !0;\n    },\n    l_ = Qp;\n  function h_(e) {\n    l_.call(this, null == e ? \"canceled\" : e, l_.ERR_CANCELED), this.name = \"CanceledError\";\n  }\n  jp.inherits(h_, l_, {\n    __CANCEL__: !0\n  });\n  var p_ = h_,\n    __ = jp,\n    E_ = function E_(e, t, i) {\n      var r = i.config.validateStatus;\n      i.status && r && !r(i.status) ? t(new t_(\"Request failed with status code \" + i.status, [t_.ERR_BAD_REQUEST, t_.ERR_BAD_RESPONSE][Math.floor(i.status / 100) - 4], i.config, i.request, i)) : e(i);\n    },\n    f_ = r_,\n    m_ = Gp,\n    g_ = s_,\n    S_ = function S_(e) {\n      var t,\n        i,\n        r,\n        n = {};\n      return e ? (a_.forEach(e.split(\"\\n\"), function (e) {\n        if (r = e.indexOf(\":\"), t = a_.trim(e.substr(0, r)).toLowerCase(), i = a_.trim(e.substr(r + 1)), t) {\n          if (n[t] && c_.indexOf(t) >= 0) return;\n          n[t] = \"set-cookie\" === t ? (n[t] ? n[t] : []).concat([i]) : n[t] ? n[t] + \", \" + i : i;\n        }\n      }), n) : n;\n    },\n    T_ = u_,\n    v_ = Zp,\n    R_ = Qp,\n    I_ = p_,\n    y_ = function y_(e) {\n      var t = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(e);\n      return t && t[1] || \"\";\n    },\n    C_ = function C_(e) {\n      return new Promise(function (t, i) {\n        var r,\n          n = e.data,\n          o = e.headers,\n          s = e.responseType;\n        function a() {\n          e.cancelToken && e.cancelToken.unsubscribe(r), e.signal && e.signal.removeEventListener(\"abort\", r);\n        }\n        __.isFormData(n) && __.isStandardBrowserEnv() && delete o[\"Content-Type\"];\n        var c = new XMLHttpRequest();\n        if (e.auth) {\n          var d = e.auth.username || \"\",\n            u = e.auth.password ? unescape(encodeURIComponent(e.auth.password)) : \"\";\n          o.Authorization = \"Basic \" + btoa(d + \":\" + u);\n        }\n        var l = g_(e.baseURL, e.url);\n        function h() {\n          if (c) {\n            var r = \"getAllResponseHeaders\" in c ? S_(c.getAllResponseHeaders()) : null,\n              n = {\n                data: s && \"text\" !== s && \"json\" !== s ? c.response : c.responseText,\n                status: c.status,\n                statusText: c.statusText,\n                headers: r,\n                config: e,\n                request: c\n              };\n            E_(function (e) {\n              t(e), a();\n            }, function (e) {\n              i(e), a();\n            }, n), c = null;\n          }\n        }\n        if (c.open(e.method.toUpperCase(), m_(l, e.params, e.paramsSerializer), !0), c.timeout = e.timeout, \"onloadend\" in c ? c.onloadend = h : c.onreadystatechange = function () {\n          c && 4 === c.readyState && (0 !== c.status || c.responseURL && 0 === c.responseURL.indexOf(\"file:\")) && setTimeout(h);\n        }, c.onabort = function () {\n          c && (i(new R_(\"Request aborted\", R_.ECONNABORTED, e, c)), c = null);\n        }, c.onerror = function () {\n          i(new R_(\"Network Error\", R_.ERR_NETWORK, e, c, c)), c = null;\n        }, c.ontimeout = function () {\n          var t = e.timeout ? \"timeout of \" + e.timeout + \"ms exceeded\" : \"timeout exceeded\",\n            r = e.transitional || v_;\n          e.timeoutErrorMessage && (t = e.timeoutErrorMessage), i(new R_(t, r.clarifyTimeoutError ? R_.ETIMEDOUT : R_.ECONNABORTED, e, c)), c = null;\n        }, __.isStandardBrowserEnv()) {\n          var p = (e.withCredentials || T_(l)) && e.xsrfCookieName ? f_.read(e.xsrfCookieName) : void 0;\n          p && (o[e.xsrfHeaderName] = p);\n        }\n        \"setRequestHeader\" in c && __.forEach(o, function (e, t) {\n          void 0 === n && \"content-type\" === t.toLowerCase() ? delete o[t] : c.setRequestHeader(t, e);\n        }), __.isUndefined(e.withCredentials) || (c.withCredentials = !!e.withCredentials), s && \"json\" !== s && (c.responseType = e.responseType), \"function\" == typeof e.onDownloadProgress && c.addEventListener(\"progress\", e.onDownloadProgress), \"function\" == typeof e.onUploadProgress && c.upload && c.upload.addEventListener(\"progress\", e.onUploadProgress), (e.cancelToken || e.signal) && (r = function r(e) {\n          c && (i(!e || e && e.type ? new I_() : e), c.abort(), c = null);\n        }, e.cancelToken && e.cancelToken.subscribe(r), e.signal && (e.signal.aborted ? r() : e.signal.addEventListener(\"abort\", r))), n || (n = null);\n        var _ = y_(l);\n        _ && -1 === [\"http\", \"https\", \"file\"].indexOf(_) ? i(new R_(\"Unsupported protocol \" + _ + \":\", R_.ERR_BAD_REQUEST, e)) : c.send(n);\n      });\n    },\n    A_ = jp,\n    O_ = function O_(e, t) {\n      Yp.forEach(e, function (i, r) {\n        r !== t && r.toUpperCase() === t.toUpperCase() && (e[t] = i, delete e[r]);\n      });\n    },\n    b_ = Qp,\n    w_ = e_,\n    N_ = {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    };\n  function D_(e, t) {\n    !A_.isUndefined(e) && A_.isUndefined(e[\"Content-Type\"]) && (e[\"Content-Type\"] = t);\n  }\n  var P_,\n    L_ = {\n      transitional: Zp,\n      adapter: ((\"undefined\" != typeof XMLHttpRequest || \"undefined\" != typeof process && \"[object process]\" === Object.prototype.toString.call(process)) && (P_ = C_), P_),\n      transformRequest: [function (e, t) {\n        if (O_(t, \"Accept\"), O_(t, \"Content-Type\"), A_.isFormData(e) || A_.isArrayBuffer(e) || A_.isBuffer(e) || A_.isStream(e) || A_.isFile(e) || A_.isBlob(e)) return e;\n        if (A_.isArrayBufferView(e)) return e.buffer;\n        if (A_.isURLSearchParams(e)) return D_(t, \"application/x-www-form-urlencoded;charset=utf-8\"), e.toString();\n        var i,\n          r = A_.isObject(e),\n          n = t && t[\"Content-Type\"];\n        if ((i = A_.isFileList(e)) || r && \"multipart/form-data\" === n) {\n          var o = this.env && this.env.FormData;\n          return w_(i ? {\n            \"files[]\": e\n          } : e, o && new o());\n        }\n        return r || \"application/json\" === n ? (D_(t, \"application/json\"), function (e, t, i) {\n          if (A_.isString(e)) try {\n            return (t || JSON.parse)(e), A_.trim(e);\n          } catch (e) {\n            if (\"SyntaxError\" !== e.name) throw e;\n          }\n          return (i || JSON.stringify)(e);\n        }(e)) : e;\n      }],\n      transformResponse: [function (e) {\n        var t = this.transitional || L_.transitional,\n          i = t && t.silentJSONParsing,\n          r = t && t.forcedJSONParsing,\n          n = !i && \"json\" === this.responseType;\n        if (n || r && A_.isString(e) && e.length) try {\n          return JSON.parse(e);\n        } catch (e) {\n          if (n) {\n            if (\"SyntaxError\" === e.name) throw b_.from(e, b_.ERR_BAD_RESPONSE, this, null, this.response);\n            throw e;\n          }\n        }\n        return e;\n      }],\n      timeout: 0,\n      xsrfCookieName: \"XSRF-TOKEN\",\n      xsrfHeaderName: \"X-XSRF-TOKEN\",\n      maxContentLength: -1,\n      maxBodyLength: -1,\n      env: {\n        FormData: null\n      },\n      validateStatus: function validateStatus(e) {\n        return e >= 200 && e < 300;\n      },\n      headers: {\n        common: {\n          Accept: \"application/json, text/plain, */*\"\n        }\n      }\n    };\n  A_.forEach([\"delete\", \"get\", \"head\"], function (e) {\n    L_.headers[e] = {};\n  }), A_.forEach([\"post\", \"put\", \"patch\"], function (e) {\n    L_.headers[e] = A_.merge(N_);\n  });\n  var k_ = L_,\n    M_ = jp,\n    U_ = k_,\n    x_ = function x_(e) {\n      return !(!e || !e.__CANCEL__);\n    },\n    V_ = jp,\n    j_ = function j_(e, t, i) {\n      var r = this || U_;\n      return M_.forEach(i, function (i) {\n        e = i.call(r, e, t);\n      }), e;\n    },\n    F_ = x_,\n    B_ = k_,\n    G_ = p_;\n  function W_(e) {\n    if (e.cancelToken && e.cancelToken.throwIfRequested(), e.signal && e.signal.aborted) throw new G_();\n  }\n  var H_ = jp,\n    K_ = function K_(e, t) {\n      t = t || {};\n      var i = {};\n      function r(e, t) {\n        return H_.isPlainObject(e) && H_.isPlainObject(t) ? H_.merge(e, t) : H_.isPlainObject(t) ? H_.merge({}, t) : H_.isArray(t) ? t.slice() : t;\n      }\n      function n(i) {\n        return H_.isUndefined(t[i]) ? H_.isUndefined(e[i]) ? void 0 : r(void 0, e[i]) : r(e[i], t[i]);\n      }\n      function o(e) {\n        if (!H_.isUndefined(t[e])) return r(void 0, t[e]);\n      }\n      function s(i) {\n        return H_.isUndefined(t[i]) ? H_.isUndefined(e[i]) ? void 0 : r(void 0, e[i]) : r(void 0, t[i]);\n      }\n      function a(i) {\n        return i in t ? r(e[i], t[i]) : i in e ? r(void 0, e[i]) : void 0;\n      }\n      var c = {\n        url: o,\n        method: o,\n        data: o,\n        baseURL: s,\n        transformRequest: s,\n        transformResponse: s,\n        paramsSerializer: s,\n        timeout: s,\n        timeoutMessage: s,\n        withCredentials: s,\n        adapter: s,\n        responseType: s,\n        xsrfCookieName: s,\n        xsrfHeaderName: s,\n        onUploadProgress: s,\n        onDownloadProgress: s,\n        decompress: s,\n        maxContentLength: s,\n        maxBodyLength: s,\n        beforeRedirect: s,\n        transport: s,\n        httpAgent: s,\n        httpsAgent: s,\n        cancelToken: s,\n        socketPath: s,\n        responseEncoding: s,\n        validateStatus: a\n      };\n      return H_.forEach(Object.keys(e).concat(Object.keys(t)), function (e) {\n        var t = c[e] || n,\n          r = t(e);\n        H_.isUndefined(r) && t !== a || (i[e] = r);\n      }), i;\n    },\n    Y_ = \"0.27.2\",\n    q_ = Y_,\n    J_ = Qp,\n    X_ = {};\n  [\"object\", \"boolean\", \"number\", \"function\", \"string\", \"symbol\"].forEach(function (e, t) {\n    X_[e] = function (i) {\n      return typeof i === e || \"a\" + (t < 1 ? \"n \" : \" \") + e;\n    };\n  });\n  var z_ = {};\n  X_.transitional = function (e, t, i) {\n    function r(e, t) {\n      return \"[Axios v\" + q_ + \"] Transitional option '\" + e + \"'\" + t + (i ? \". \" + i : \"\");\n    }\n    return function (i, n, o) {\n      if (!1 === e) throw new J_(r(n, \" has been removed\" + (t ? \" in \" + t : \"\")), J_.ERR_DEPRECATED);\n      return t && !z_[n] && (z_[n] = !0, console.warn(r(n, \" has been deprecated since v\" + t + \" and will be removed in the near future\"))), !e || e(i, n, o);\n    };\n  };\n  var Q_ = jp,\n    Z_ = Gp,\n    $_ = Kp,\n    eE = function eE(e) {\n      return W_(e), e.headers = e.headers || {}, e.data = j_.call(e, e.data, e.headers, e.transformRequest), e.headers = V_.merge(e.headers.common || {}, e.headers[e.method] || {}, e.headers), V_.forEach([\"delete\", \"get\", \"head\", \"post\", \"put\", \"patch\", \"common\"], function (t) {\n        delete e.headers[t];\n      }), (e.adapter || B_.adapter)(e).then(function (t) {\n        return W_(e), t.data = j_.call(e, t.data, t.headers, e.transformResponse), t;\n      }, function (t) {\n        return F_(t) || (W_(e), t && t.response && (t.response.data = j_.call(e, t.response.data, t.response.headers, e.transformResponse))), Promise.reject(t);\n      });\n    },\n    tE = K_,\n    iE = s_,\n    rE = {\n      assertOptions: function assertOptions(e, t, i) {\n        if (\"object\" != typeof e) throw new J_(\"options must be an object\", J_.ERR_BAD_OPTION_VALUE);\n        for (var r = Object.keys(e), n = r.length; n-- > 0;) {\n          var o = r[n],\n            s = t[o];\n          if (s) {\n            var a = e[o],\n              c = void 0 === a || s(a, o, e);\n            if (!0 !== c) throw new J_(\"option \" + o + \" must be \" + c, J_.ERR_BAD_OPTION_VALUE);\n          } else if (!0 !== i) throw new J_(\"Unknown option \" + o, J_.ERR_BAD_OPTION);\n        }\n      },\n      validators: X_\n    },\n    nE = rE.validators;\n  function oE(e) {\n    this.defaults = e, this.interceptors = {\n      request: new $_(),\n      response: new $_()\n    };\n  }\n  oE.prototype.request = function (e, t) {\n    \"string\" == typeof e ? (t = t || {}).url = e : t = e || {}, (t = tE(this.defaults, t)).method ? t.method = t.method.toLowerCase() : this.defaults.method ? t.method = this.defaults.method.toLowerCase() : t.method = \"get\";\n    var i = t.transitional;\n    void 0 !== i && rE.assertOptions(i, {\n      silentJSONParsing: nE.transitional(nE.boolean),\n      forcedJSONParsing: nE.transitional(nE.boolean),\n      clarifyTimeoutError: nE.transitional(nE.boolean)\n    }, !1);\n    var r = [],\n      n = !0;\n    this.interceptors.request.forEach(function (e) {\n      \"function\" == typeof e.runWhen && !1 === e.runWhen(t) || (n = n && e.synchronous, r.unshift(e.fulfilled, e.rejected));\n    });\n    var o,\n      s = [];\n    if (this.interceptors.response.forEach(function (e) {\n      s.push(e.fulfilled, e.rejected);\n    }), !n) {\n      var a = [eE, void 0];\n      for (Array.prototype.unshift.apply(a, r), a = a.concat(s), o = Promise.resolve(t); a.length;) o = o.then(a.shift(), a.shift());\n      return o;\n    }\n    for (var c = t; r.length;) {\n      var d = r.shift(),\n        u = r.shift();\n      try {\n        c = d(c);\n      } catch (e) {\n        u(e);\n        break;\n      }\n    }\n    try {\n      o = eE(c);\n    } catch (e) {\n      return Promise.reject(e);\n    }\n    for (; s.length;) o = o.then(s.shift(), s.shift());\n    return o;\n  }, oE.prototype.getUri = function (e) {\n    e = tE(this.defaults, e);\n    var t = iE(e.baseURL, e.url);\n    return Z_(t, e.params, e.paramsSerializer);\n  }, Q_.forEach([\"delete\", \"get\", \"head\", \"options\"], function (e) {\n    oE.prototype[e] = function (t, i) {\n      return this.request(tE(i || {}, {\n        method: e,\n        url: t,\n        data: (i || {}).data\n      }));\n    };\n  }), Q_.forEach([\"post\", \"put\", \"patch\"], function (e) {\n    function t(t) {\n      return function (i, r, n) {\n        return this.request(tE(n || {}, {\n          method: e,\n          headers: t ? {\n            \"Content-Type\": \"multipart/form-data\"\n          } : {},\n          url: i,\n          data: r\n        }));\n      };\n    }\n    oE.prototype[e] = t(), oE.prototype[e + \"Form\"] = t(!0);\n  });\n  var sE = oE,\n    aE = p_;\n  function cE(e) {\n    if (\"function\" != typeof e) throw new TypeError(\"executor must be a function.\");\n    var t;\n    this.promise = new Promise(function (e) {\n      t = e;\n    });\n    var i = this;\n    this.promise.then(function (e) {\n      if (i._listeners) {\n        var t,\n          r = i._listeners.length;\n        for (t = 0; t < r; t++) i._listeners[t](e);\n        i._listeners = null;\n      }\n    }), this.promise.then = function (e) {\n      var t,\n        r = new Promise(function (e) {\n          i.subscribe(e), t = e;\n        }).then(e);\n      return r.cancel = function () {\n        i.unsubscribe(t);\n      }, r;\n    }, e(function (e) {\n      i.reason || (i.reason = new aE(e), t(i.reason));\n    });\n  }\n  cE.prototype.throwIfRequested = function () {\n    if (this.reason) throw this.reason;\n  }, cE.prototype.subscribe = function (e) {\n    this.reason ? e(this.reason) : this._listeners ? this._listeners.push(e) : this._listeners = [e];\n  }, cE.prototype.unsubscribe = function (e) {\n    if (this._listeners) {\n      var t = this._listeners.indexOf(e);\n      -1 !== t && this._listeners.splice(t, 1);\n    }\n  }, cE.source = function () {\n    var e;\n    return {\n      token: new cE(function (t) {\n        e = t;\n      }),\n      cancel: e\n    };\n  };\n  var dE = cE,\n    uE = jp,\n    lE = jp,\n    hE = Tp,\n    pE = sE,\n    _E = K_;\n  var EE = function e(t) {\n    var i = new pE(t),\n      r = hE(pE.prototype.request, i);\n    return lE.extend(r, pE.prototype, i), lE.extend(r, i), r.create = function (i) {\n      return e(_E(t, i));\n    }, r;\n  }(k_);\n  EE.Axios = pE, EE.CanceledError = p_, EE.CancelToken = dE, EE.isCancel = x_, EE.VERSION = Y_, EE.toFormData = e_, EE.AxiosError = Qp, EE.Cancel = EE.CanceledError, EE.all = function (e) {\n    return Promise.all(e);\n  }, EE.spread = function (e) {\n    return function (t) {\n      return e.apply(null, t);\n    };\n  }, EE.isAxiosError = function (e) {\n    return uE.isObject(e) && !0 === e.isAxiosError;\n  }, Sp.exports = EE, Sp.exports.default = EE;\n  var fE = Sp.exports;\n  var mE = /*#__PURE__*/function () {\n    function mE(e) {\n      _classCallCheck(this, mE);\n      mp(this, \"logger\", void 0), mp(this, \"prefixLists\", []), this.logger = e;\n    }\n    _createClass(mE, [{\n      key: \"debug\",\n      value: function debug() {\n        var _this$logger;\n        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n        (_this$logger = this.logger).debug.apply(_this$logger, _toConsumableArray(this.prefixLists).concat(t));\n      }\n    }, {\n      key: \"info\",\n      value: function info() {\n        var _this$logger2;\n        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n        (_this$logger2 = this.logger).info.apply(_this$logger2, _toConsumableArray(this.prefixLists).concat(t));\n      }\n    }, {\n      key: \"warning\",\n      value: function warning() {\n        var _this$logger3;\n        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n        (_this$logger3 = this.logger).warning.apply(_this$logger3, _toConsumableArray(this.prefixLists).concat(t));\n      }\n    }, {\n      key: \"error\",\n      value: function error() {\n        var _this$logger4;\n        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n        (_this$logger4 = this.logger).error.apply(_this$logger4, _toConsumableArray(this.prefixLists).concat(t));\n      }\n    }, {\n      key: \"prefix\",\n      value: function prefix(e) {\n        return this.prefixLists.push(e), this;\n      }\n    }, {\n      key: \"popPrefix\",\n      value: function popPrefix() {\n        return this.prefixLists.pop(), this;\n      }\n    }]);\n    return mE;\n  }();\n  var gE = /*#__PURE__*/function () {\n    function gE() {\n      _classCallCheck(this, gE);\n      mp(this, \"_events\", {}), mp(this, \"addListener\", this.on);\n    }\n    _createClass(gE, [{\n      key: \"getListeners\",\n      value: function getListeners(e) {\n        return this._events[e] ? this._events[e].map(function (e) {\n          return e.listener;\n        }) : [];\n      }\n    }, {\n      key: \"on\",\n      value: function on(e, t) {\n        this._events[e] || (this._events[e] = []);\n        var i = this._events[e];\n        -1 === this._indexOfListener(i, t) && i.push({\n          listener: t,\n          once: !1\n        });\n      }\n    }, {\n      key: \"once\",\n      value: function once(e, t) {\n        this._events[e] || (this._events[e] = []);\n        var i = this._events[e];\n        -1 === this._indexOfListener(i, t) && i.push({\n          listener: t,\n          once: !0\n        });\n      }\n    }, {\n      key: \"off\",\n      value: function off(e, t) {\n        if (!this._events[e]) return;\n        var i = this._events[e],\n          r = this._indexOfListener(i, t);\n        -1 !== r && i.splice(r, 1), 0 === this._events[e].length && delete this._events[e];\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(e) {\n        e ? delete this._events[e] : this._events = {};\n      }\n    }, {\n      key: \"emit\",\n      value: function emit(e) {\n        this._events[e] || (this._events[e] = []);\n        var t = this._events[e].map(function (e) {\n          return e;\n        });\n        for (var i = arguments.length, r = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) r[n - 1] = arguments[n];\n        for (var _i15 = 0; _i15 < t.length; _i15 += 1) {\n          var _n6 = t[_i15];\n          _n6.once && this.off(e, _n6.listener), _n6.listener.apply(this, r || []);\n        }\n      }\n    }, {\n      key: \"_indexOfListener\",\n      value: function _indexOfListener(e, t) {\n        var i = e.length;\n        for (; i--;) if (e[i].listener === t) return i;\n        return -1;\n      }\n    }]);\n    return gE;\n  }();\n  var SE = new ( /*#__PURE__*/function (_gE) {\n    _inherits(_class, _gE);\n    function _class() {\n      _classCallCheck(this, _class);\n      return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n    }\n    _createClass(_class, [{\n      key: \"reportLogUploadError\",\n      value: function reportLogUploadError(e) {\n        this.emit(\"REPORT_LOG_UPLOAD\", e);\n      }\n    }]);\n    return _class;\n  }(gE))();\n  var TE;\n  !function (e) {\n    e.UNEXPECTED_ERROR = \"UNEXPECTED_ERROR\", e.UNEXPECTED_RESPONSE = \"UNEXPECTED_RESPONSE\", e.TIMEOUT = \"TIMEOUT\", e.INVALID_PARAMS = \"INVALID_PARAMS\", e.NOT_READABLE = \"NOT_READABLE\", e.NOT_SUPPORTED = \"NOT_SUPPORTED\", e.INVALID_OPERATION = \"INVALID_OPERATION\", e.OPERATION_ABORTED = \"OPERATION_ABORTED\", e.WEB_SECURITY_RESTRICT = \"WEB_SECURITY_RESTRICT\", e.EXCHANGE_SDP_FAILED = \"EXCHANGE_SDP_FAILED\", e.NETWORK_ERROR = \"NETWORK_ERROR\", e.NETWORK_TIMEOUT = \"NETWORK_TIMEOUT\", e.NETWORK_RESPONSE_ERROR = \"NETWORK_RESPONSE_ERROR\", e.API_INVOKE_TIMEOUT = \"API_INVOKE_TIMEOUT\", e.ENUMERATE_DEVICES_FAILED = \"ENUMERATE_DEVICES_FAILED\", e.DEVICE_NOT_FOUND = \"DEVICE_NOT_FOUND\", e.ELECTRON_IS_NULL = \"ELECTRON_IS_NULL\", e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR = \"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\", e.CHROME_PLUGIN_NO_RESPONSE = \"CHROME_PLUGIN_NO_RESPONSE\", e.CHROME_PLUGIN_NOT_INSTALL = \"CHROME_PLUGIN_NOT_INSTALL\", e.MEDIA_OPTION_INVALID = \"MEDIA_OPTION_INVALID\", e.PERMISSION_DENIED = \"PERMISSION_DENIED\", e.CONSTRAINT_NOT_SATISFIED = \"CONSTRAINT_NOT_SATISFIED\", e.TRACK_IS_DISABLED = \"TRACK_IS_DISABLED\", e.GET_VIDEO_ELEMENT_VISIBLE_ERROR = \"GET_VIDEO_ELEMENT_VISIBLE_ERROR\", e.SHARE_AUDIO_NOT_ALLOWED = \"SHARE_AUDIO_NOT_ALLOWED\", e.LOW_STREAM_ENCODING_ERROR = \"LOW_STREAM_ENCODING_ERROR\", e.SET_ENCODING_PARAMETER_ERROR = \"SET_ENCODING_PARAMETER_ERROR\", e.TRACK_STATE_UNREACHABLE = \"TRACK_STATE_UNREACHABLE\", e.INVALID_UINT_UID_FROM_STRING_UID = \"INVALID_UINT_UID_FROM_STRING_UID\", e.CAN_NOT_GET_PROXY_SERVER = \"CAN_NOT_GET_PROXY_SERVER\", e.CAN_NOT_GET_GATEWAY_SERVER = \"CAN_NOT_GET_GATEWAY_SERVER\", e.VOID_GATEWAY_ADDRESS = \"VOID_GATEWAY_ADDRESS\", e.UID_CONFLICT = \"UID_CONFLICT\", e.MULTI_UNILBS_RESPONSE_ERROR = \"MULTI_UNILBS_RESPONSE_ERROR\", e.UPDATE_TICKET_FAILED = \"UPDATE_TICKET_FAILED\", e.INVALID_LOCAL_TRACK = \"INVALID_LOCAL_TRACK\", e.INVALID_TRACK = \"INVALID_TRACK\", e.SENDER_NOT_FOUND = \"SENDER_NOT_FOUND\", e.CREATE_OFFER_FAILED = \"CREATE_OFFER_FAILED\", e.SET_ANSWER_FAILED = \"SET_ANSWER_FAILED\", e.ICE_FAILED = \"ICE_FAILED\", e.PC_CLOSED = \"PC_CLOSED\", e.SENDER_REPLACE_FAILED = \"SENDER_REPLACE_FAILED\", e.GET_LOCAL_CAPABILITIES_FAILED = \"GET_LOCAL_CAPABILITIES_FAILED\", e.GET_LOCAL_CONNECTION_PARAMS_FAILED = \"GET_LOCAL_CONNECTION_PARAMS_FAILED\", e.SUBSCRIBE_FAILED = \"SUBSCRIBE_FAILED\", e.UNSUBSCRIBE_FAILED = \"UNSUBSCRIBE_FAILED\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NO_ICE_CANDIDATE = \"NO_ICE_CANDIDATE\", e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS = \"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\", e.EXIST_DISABLED_VIDEO_TRACK = \"EXIST_DISABLED_VIDEO_TRACK\", e.INVALID_REMOTE_USER = \"INVALID_REMOTE_USER\", e.REMOTE_USER_IS_NOT_PUBLISHED = \"REMOTE_USER_IS_NOT_PUBLISHED\", e.CUSTOM_REPORT_SEND_FAILED = \"CUSTOM_REPORT_SEND_FAILED\", e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH = \"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\", e.FETCH_AUDIO_FILE_FAILED = \"FETCH_AUDIO_FILE_FAILED\", e.READ_LOCAL_AUDIO_FILE_ERROR = \"READ_LOCAL_AUDIO_FILE_ERROR\", e.DECODE_AUDIO_FILE_FAILED = \"DECODE_AUDIO_FILE_FAILED\", e.WS_ABORT = \"WS_ABORT\", e.WS_DISCONNECT = \"WS_DISCONNECT\", e.WS_ERR = \"WS_ERR\", e.LIVE_STREAMING_TASK_CONFLICT = \"LIVE_STREAMING_TASK_CONFLICT\", e.LIVE_STREAMING_INVALID_ARGUMENT = \"LIVE_STREAMING_INVALID_ARGUMENT\", e.LIVE_STREAMING_INTERNAL_SERVER_ERROR = \"LIVE_STREAMING_INTERNAL_SERVER_ERROR\", e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED = \"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\", e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED = \"LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED\", e.LIVE_STREAMING_CDN_ERROR = \"LIVE_STREAMING_CDN_ERROR\", e.LIVE_STREAMING_INVALID_RAW_STREAM = \"LIVE_STREAMING_INVALID_RAW_STREAM\", e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT = \"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\", e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE = \"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\", e.LIVE_STREAMING_WARN_FREQUENT_REQUEST = \"LIVE_STREAMING_WARN_FREQUENT_REQUEST\", e.WEBGL_INTERNAL_ERROR = \"WEBGL_INTERNAL_ERROR\", e.BEAUTY_PROCESSOR_INTERNAL_ERROR = \"BEAUTY_PROCESSOR_INTERNAL_ERROR\", e.CROSS_CHANNEL_WAIT_STATUS_ERROR = \"CROSS_CHANNEL_WAIT_STATUS_ERROR\", e.CROSS_CHANNEL_FAILED_JOIN_SRC = \"CROSS_CHANNEL_FAILED_JOIN_SEC\", e.CROSS_CHANNEL_FAILED_JOIN_DEST = \"CROSS_CHANNEL_FAILED_JOIN_DEST\", e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST = \"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\", e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE = \"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\", e.METADATA_OUT_OF_RANGE = \"METADATA_OUT_OF_RANGE\", e.LOCAL_AEC_ERROR = \"LOCAL_AEC_ERROR\", e.INVALID_PLUGIN = \"INVALID_PLUGIN\", e.DISCONNECT_P2P = \"DISCONNECT_P2P\", e.INIT_WEBSOCKET_TIMEOUT = \"INIT_WEBSOCKET_TIMEOUT\", e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED = \"CONVERTING_IMAGEDATA_TO_BLOB_FAILED\", e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED = \"CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED\", e.INIT_DATACHANNEL_TIMEOUT = \"INIT_DATACHANNEL_TIMEOUT\", e.DATACHANNEL_CONNECTION_TIMEOUT = \"DATACHANNEL_CONNECTION_TIMEOUT\";\n  }(TE || (TE = {}));\n  var vE = /*#__PURE__*/function (_Error) {\n    _inherits(vE, _Error);\n    function vE(e) {\n      var _this26;\n      _classCallCheck(this, vE);\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : \"\",\n        i = arguments.length > 2 ? arguments[2] : void 0;\n      _this26 = _possibleConstructorReturn(this, _getPrototypeOf(vE).call(this, t)), mp(_assertThisInitialized(_assertThisInitialized(_this26)), \"code\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this26)), \"message\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this26)), \"data\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this26)), \"name\", \"AgoraRTCException\"), _this26.code = e, _this26.message = \"AgoraRTCError \".concat(_this26.code, \": \").concat(t), _this26.data = i;\n      return _this26;\n    }\n    _createClass(vE, [{\n      key: \"toString\",\n      value: function toString() {\n        return this.data ? \"data: \".concat(JSON.stringify(this.data), \"\\n\").concat(this.stack) : \"\".concat(this.stack);\n      }\n    }, {\n      key: \"print\",\n      value: function print() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : \"error\";\n        return \"error\" === e && NE.error(this.toString()), \"warning\" === e && NE.warning(this.toString()), this;\n      }\n    }, {\n      key: \"throw\",\n      value: function _throw() {\n        throw this.print(), this;\n      }\n    }]);\n    return vE;\n  }(_wrapNativeSuper(Error));\n  var RE = {\n    timeout: 500,\n    timeoutFactor: 1.5,\n    maxRetryCount: 1 / 0,\n    maxRetryTimeout: 1e4\n  };\n  function IE(e, t) {\n    var i = Math.floor(t.timeout * Math.pow(t.timeoutFactor, e));\n    return Math.min(t.maxRetryTimeout, i);\n  }\n  function yE(e, t, i, r) {\n    var n = Object.assign({}, RE, r);\n    var o = n.timeout;\n    var s = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return function (e) {\n                return new Cl(function (t) {\n                  window.setTimeout(t, e);\n                });\n              }(o);\n            case 2:\n              o *= n.timeoutFactor;\n              o = Math.min(n.maxRetryTimeout, o);\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function s() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var a = !1;\n    var c = new Cl( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(r, o) {\n        var _c2, _i16;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              t = t || function () {\n                return !1;\n              }, i = i || function () {\n                return !0;\n              };\n              _c2 = 0;\n            case 2:\n              if (!(_c2 < n.maxRetryCount)) {\n                _context2.next = 28;\n                break;\n              }\n              if (!a) {\n                _context2.next = 5;\n                break;\n              }\n              return _context2.abrupt(\"return\", o(new vE(TE.OPERATION_ABORTED)));\n            case 5:\n              _context2.prev = 5;\n              _context2.next = 8;\n              return e();\n            case 8:\n              _i16 = _context2.sent;\n              if (t(_i16, _c2)) {\n                _context2.next = 11;\n                break;\n              }\n              return _context2.abrupt(\"return\", r(_i16));\n            case 11:\n              if (!(_c2 + 1 === n.maxRetryCount)) {\n                _context2.next = 13;\n                break;\n              }\n              return _context2.abrupt(\"return\", r(_i16));\n            case 13:\n              _context2.next = 15;\n              return s();\n            case 15:\n              _context2.next = 25;\n              break;\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](5);\n              if (i(_context2.t0, _c2)) {\n                _context2.next = 21;\n                break;\n              }\n              return _context2.abrupt(\"return\", o(_context2.t0));\n            case 21:\n              if (!(_c2 + 1 === n.maxRetryCount)) {\n                _context2.next = 23;\n                break;\n              }\n              return _context2.abrupt(\"return\", o(_context2.t0));\n            case 23:\n              _context2.next = 25;\n              return s();\n            case 25:\n              _c2 += 1;\n              _context2.next = 2;\n              break;\n            case 28:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[5, 17]]);\n      }));\n      return function (_x, _x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    return c.cancel = function () {\n      return a = !0;\n    }, c;\n  }\n  function CE() {\n    var e = new Date();\n    return e.toTimeString().split(\" \")[0] + \":\" + e.getMilliseconds();\n  }\n  function AE() {\n    var e = new Date(),\n      t = /((\\d+:){2}\\d+)/.exec(new Date().toUTCString());\n    return t ? (null == t ? void 0 : t[0]) + \":\" + e.getUTCMilliseconds() : e.toTimeString().split(\" \")[0] + \":\" + e.getMilliseconds();\n  }\n  var OE = {\n      DEBUG: 0,\n      INFO: 1,\n      WARNING: 2,\n      ERROR: 3,\n      NONE: 4\n    },\n    bE = Date.now(),\n    wE = function wE(e) {\n      for (var _t21 in OE) if (Object.prototype.hasOwnProperty.call(OE, _t21) && OE[_t21] === e) return _t21;\n      return \"DEFAULT\";\n    };\n  var NE = new ( /*#__PURE__*/function () {\n      function _class2() {\n        var _this27 = this;\n        _classCallCheck(this, _class2);\n        mp(this, \"proxyServerURL\", void 0), mp(this, \"logLevel\", OE.DEBUG), mp(this, \"uploadState\", \"collecting\"), mp(this, \"uploadLogWaitingList\", []), mp(this, \"uploadLogUploadingList\", []), mp(this, \"uploadErrorCount\", 0), mp(this, \"currentLogID\", 0), mp(this, \"url\", void 0), mp(this, \"extLog\", function (e, t) {\n          _this27.appendLogToWaitingList.apply(_this27, [e].concat(_toConsumableArray(t)));\n        });\n      }\n      _createClass(_class2, [{\n        key: \"debug\",\n        value: function debug() {\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          var r = [OE.DEBUG].concat(t);\n          this.log.apply(this, r);\n        }\n      }, {\n        key: \"info\",\n        value: function info() {\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          var r = [OE.INFO].concat(t);\n          this.log.apply(this, r);\n        }\n      }, {\n        key: \"warning\",\n        value: function warning() {\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          var r = [OE.WARNING].concat(t);\n          this.log.apply(this, r);\n        }\n      }, {\n        key: \"error\",\n        value: function error() {\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          var r = [OE.ERROR].concat(t);\n          this.log.apply(this, r);\n        }\n      }, {\n        key: \"upload\",\n        value: function upload() {\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          var r = [OE.DEBUG].concat(t);\n          this.uploadLog.apply(this, r);\n        }\n      }, {\n        key: \"setLogLevel\",\n        value: function setLogLevel(e) {\n          e = Math.min(Math.max(0, e), 4), this.logLevel = e;\n        }\n      }, {\n        key: \"enableLogUpload\",\n        value: function enableLogUpload() {\n          WE(\"UPLOAD_LOG\", !0);\n        }\n      }, {\n        key: \"disableLogUpload\",\n        value: function disableLogUpload() {\n          WE(\"UPLOAD_LOG\", !1), this.uploadLogUploadingList = [], this.uploadLogWaitingList = [];\n        }\n      }, {\n        key: \"setProxyServer\",\n        value: function setProxyServer(e) {\n          this.proxyServerURL = e;\n        }\n      }, {\n        key: \"prefix\",\n        value: function prefix(e) {\n          return new mE(this).prefix(e);\n        }\n      }, {\n        key: \"log\",\n        value: function log() {\n          var _this28 = this;\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          if (Date.now() - bE < 100) return void setTimeout(function () {\n            _this28.log.apply(_this28, t);\n          }, Date.now() - bE);\n          var r = Math.max(0, Math.min(4, t[0]));\n          if (t[0] = CE() + \" Agora-SDK [\".concat(wE(r), \"]:\"), this.appendLogToWaitingList.apply(this, [r].concat(t)), r < this.logLevel) return;\n          var n = CE() + \" %cAgora-SDK [\".concat(wE(r), \"]:\");\n          var o = [];\n          if (!HE(\"USE_NEW_LOG\")) switch (r) {\n            case OE.DEBUG:\n              o = [n, \"color: #64B5F6;\"].concat(t.slice(1)), console.log.apply(console, o);\n              break;\n            case OE.INFO:\n              o = [n, \"color: #1E88E5; font-weight: bold;\"].concat(t.slice(1)), console.log.apply(console, o);\n              break;\n            case OE.WARNING:\n              o = [n, \"color: #FB8C00; font-weight: bold;\"].concat(t.slice(1)), console.warn.apply(console, o);\n              break;\n            case OE.ERROR:\n              o = [n, \"color: #B00020; font-weight: bold;\"].concat(t.slice(1)), console.error.apply(console, o);\n          }\n        }\n      }, {\n        key: \"uploadLog\",\n        value: function uploadLog() {\n          var _this29 = this;\n          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n          if (Date.now() - bE < 100) return void setTimeout(function () {\n            _this29.uploadLog.apply(_this29, t);\n          }, Date.now() - bE);\n          var r = Math.max(0, Math.min(4, t[0]));\n          t[0] = CE() + \" Agora-SDK [\".concat(wE(r), \"]:\"), this.appendLogToWaitingList.apply(this, [r].concat(t));\n        }\n      }, {\n        key: \"appendLogToWaitingList\",\n        value: function appendLogToWaitingList(e) {\n          if (!HE(\"UPLOAD_LOG\")) return;\n          for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) i[r - 1] = arguments[r];\n          Array.isArray(i[0]) ? i[0][0] = AE() + \" Agora-SDK [\".concat(wE(e), \"]:\") : i[0] = AE() + \" Agora-SDK [\".concat(wE(e), \"]:\");\n          var n = \"\";\n          i.forEach(function (e) {\n            \"object\" == typeof e && (e = JSON.stringify(e)), n += \"\".concat(e, \" \");\n          }), this.uploadLogWaitingList.push({\n            payload_str: n,\n            log_level: e,\n            log_item_id: this.currentLogID++\n          }), \"uploading\" === this.uploadState && 0 === this.uploadLogUploadingList.length && this.uploadLogInterval();\n        }\n      }, {\n        key: \"startUpload\",\n        value: function startUpload() {\n          this.uploadState = \"uploading\", 0 === this.uploadLogUploadingList.length && this.uploadLogInterval();\n        }\n      }, {\n        key: \"uploadLogs\",\n        value: function () {\n          var _uploadLogs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n            var _this30 = this;\n            var e, t;\n            return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n              while (1) switch (_context4.prev = _context4.next) {\n                case 0:\n                  e = this.uploadLogUploadingList, t = {\n                    sdk_version: PE,\n                    process_id: HE(\"PROCESS_ID\"),\n                    payload: JSON.stringify(e)\n                  };\n                  return _context4.abrupt(\"return\", yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n                    var e, _t22;\n                    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                      while (1) switch (_context3.prev = _context3.next) {\n                        case 0:\n                          _context3.next = 2;\n                          return fE.post(_this30.url || (_this30.proxyServerURL ? \"https://\".concat(_this30.proxyServerURL, \"/ls/?h=\").concat(HE(\"LOG_UPLOAD_SERVER\"), \"&p=443&d=upload/v1\") : \"https://\".concat(HE(\"LOG_UPLOAD_SERVER\"), \"/upload/v1\")), t, {\n                            responseType: \"text\"\n                          });\n                        case 2:\n                          e = _context3.sent;\n                          if (!(\"OK\" !== e.data)) {\n                            _context3.next = 6;\n                            break;\n                          }\n                          _t22 = new Error(\"unexpected upload log response\");\n                          throw _t22.response = e, _t22;\n                        case 6:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }, _callee3);\n                  })), function () {\n                    return _this30.uploadLogUploadingList = [], !1;\n                  }, function (e) {\n                    return e.response ? SE.reportLogUploadError({\n                      status: e.response.status,\n                      data: e.response.data,\n                      headers: e.response.headers,\n                      message: e.message\n                    }) : e.request ? SE.reportLogUploadError({\n                      status: e.request.status,\n                      message: e.message\n                    }) : SE.reportLogUploadError({\n                      status: -1,\n                      message: e.message\n                    }), !0;\n                  }, {\n                    timeout: HE(\"UPLOAD_LOG_REQUEST_RETRY_INTERVAL\"),\n                    maxRetryTimeout: HE(\"UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL\")\n                  }));\n                case 2:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }, _callee4, this);\n          }));\n          function uploadLogs() {\n            return _uploadLogs.apply(this, arguments);\n          }\n          return uploadLogs;\n        }()\n      }, {\n        key: \"uploadLogInterval\",\n        value: function uploadLogInterval() {\n          var _this31 = this;\n          0 === this.uploadLogUploadingList.length && 0 === this.uploadLogWaitingList.length || (0 === this.uploadLogUploadingList.length && (this.uploadLogUploadingList = this.uploadLogWaitingList.splice(0, HE(\"UPLOAD_LOG_LENGTH_EACH_TIME\"))), this.uploadLogs().then(function () {\n            _this31.uploadErrorCount = 0, _this31.uploadLogWaitingList.length > 0 && window.setTimeout(function () {\n              return _this31.uploadLogInterval();\n            }, HE(\"UPLOAD_LOG_INTERVAL\"));\n          }).catch(function (e) {\n            _this31.uploadErrorCount += 1, _this31.uploadErrorCount < 2 ? window.setTimeout(function () {\n              return _this31.uploadLogInterval();\n            }, HE(\"UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1\")) : window.setTimeout(function () {\n              return _this31.uploadLogInterval();\n            }, HE(\"UPLOAD_LOG_RETRY_INTERVAL_V1\"));\n          }));\n        }\n      }]);\n      return _class2;\n    }())(),\n    DE = \"v4.16.1-0-gb268655f-dirty(2/8/2023, 2:53:13 PM)\",\n    PE = function (e) {\n      if (e.match(/[0-9]+\\.[0-9]+\\.[0-9]+$/)) return e;\n      var t = e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-alpha\\.([0-9]+)/);\n      if (t && t[1] && t[2]) {\n        var _e16 = t[1],\n          _i17 = t[2];\n        return \"\".concat(_e16, \".\").concat(_i17);\n      }\n      var i = e.match(/([0-9]+\\.[0-9]+\\.[0-9]+)\\-special\\.([0-9]+)/);\n      if (i && i[1] && i[2]) {\n        var _e17 = i[1],\n          _t23 = i[2];\n        return \"\".concat(_e17, \".\").concat(100 * (Number(_t23) + 1));\n      }\n      return \"4.0.0.999\";\n    }(\"4.16.1\"),\n    LE = function () {\n      try {\n        return !0 === JSON.parse(\"true\");\n      } catch (e) {\n        return !0;\n      }\n    }(),\n    kE = function () {\n      var e = \"us\".concat(\"erna\", \"me\"),\n        t = \"pa\".concat(\"sswo\", \"rd\"),\n        i = [\"t\", \"s\", \"t\"];\n      i.splice(1, 0, \"e\");\n      var r = i.join(\"\"),\n        n = [];\n      for (var _e18 = 0; _e18 < 6; _e18++) n.push(\"1\");\n      var o = n.join(\"\"),\n        s = {};\n      return s[e] = r, s[t] = o, Object.assign(s, {\n        turnServerURL: \"\",\n        tcpport: 3433,\n        udpport: 3478,\n        forceturn: !1\n      });\n    }();\n  window.DEFAULT_TURN_CONFIG = kE;\n  var ME = {\n      \"90p\": JE(160, 90),\n      \"90p_1\": JE(160, 90),\n      \"120p\": JE(160, 120, 15, 30, 65),\n      \"120p_1\": JE(160, 120, 15, 30, 65),\n      \"120p_3\": JE(120, 120, 15, 30, 50),\n      \"120p_4\": JE(212, 120),\n      \"180p\": JE(320, 180, 15, 30, 140),\n      \"180p_1\": JE(320, 180, 15, 30, 140),\n      \"180p_3\": JE(180, 180, 15, 30, 100),\n      \"180p_4\": JE(240, 180, 15, 30, 120),\n      \"240p\": JE(320, 240, 15, 40, 200),\n      \"240p_1\": JE(320, 240, 15, 40, 200),\n      \"240p_3\": JE(240, 240, 15, 40, 140),\n      \"240p_4\": JE(424, 240, 15, 40, 220),\n      \"360p\": JE(640, 360, 15, 80, 400),\n      \"360p_1\": JE(640, 360, 15, 80, 400),\n      \"360p_3\": JE(360, 360, 15, 80, 260),\n      \"360p_4\": JE(640, 360, 30, 80, 600),\n      \"360p_6\": JE(360, 360, 30, 80, 400),\n      \"360p_7\": JE(480, 360, 15, 80, 320),\n      \"360p_8\": JE(480, 360, 30, 80, 490),\n      \"360p_9\": JE(640, 360, 15, 80, 800),\n      \"360p_10\": JE(640, 360, 24, 80, 800),\n      \"360p_11\": JE(640, 360, 24, 80, 1e3),\n      \"480p\": JE(640, 480, 15, 100, 500),\n      \"480p_1\": JE(640, 480, 15, 100, 500),\n      \"480p_2\": JE(640, 480, 30, 100, 1e3),\n      \"480p_3\": JE(480, 480, 15, 100, 400),\n      \"480p_4\": JE(640, 480, 30, 100, 750),\n      \"480p_6\": JE(480, 480, 30, 100, 600),\n      \"480p_8\": JE(848, 480, 15, 100, 610),\n      \"480p_9\": JE(848, 480, 30, 100, 930),\n      \"480p_10\": JE(640, 480, 10, 100, 400),\n      \"720p\": JE(1280, 720, 15, 120, 1130),\n      \"720p_1\": JE(1280, 720, 15, 120, 1130),\n      \"720p_2\": JE(1280, 720, 30, 120, 2e3),\n      \"720p_3\": JE(1280, 720, 30, 120, 1710),\n      \"720p_5\": JE(960, 720, 15, 120, 910),\n      \"720p_6\": JE(960, 720, 30, 120, 1380),\n      \"1080p\": JE(1920, 1080, 15, 120, 2080),\n      \"1080p_1\": JE(1920, 1080, 15, 120, 2080),\n      \"1080p_2\": JE(1920, 1080, 30, 120, 3e3),\n      \"1080p_3\": JE(1920, 1080, 30, 120, 3150),\n      \"1080p_5\": JE(1920, 1080, 60, 120, 4780),\n      \"1440p\": JE(2560, 1440, 30, 120, 4850),\n      \"1440p_1\": JE(2560, 1440, 30, 120, 4850),\n      \"1440p_2\": JE(2560, 1440, 60, 120, 7350),\n      \"4k\": JE(3840, 2160, 30, 120, 8910),\n      \"4k_1\": JE(3840, 2160, 30, 120, 8910),\n      \"4k_3\": JE(3840, 2160, 60, 120, 13500)\n    },\n    UE = {\n      \"480p\": XE(640, 480, 5),\n      \"480p_1\": XE(640, 480, 5),\n      \"480p_2\": XE(640, 480, 30),\n      \"480p_3\": XE(640, 480, 15),\n      \"720p\": XE(1280, 720, 5),\n      \"720p_1\": XE(1280, 720, 5),\n      \"720p_2\": XE(1280, 720, 30),\n      \"720p_3\": XE(1280, 720, 15),\n      \"1080p\": XE(1920, 1080, 5),\n      \"1080p_1\": XE(1920, 1080, 5),\n      \"1080p_2\": XE(1920, 1080, 30),\n      \"1080p_3\": XE(1920, 1080, 15)\n    },\n    xE = {\n      \"1SL1TL\": zE(1, 1),\n      \"3SL3TL\": zE(3, 3),\n      \"2SL3TL\": zE(2, 3)\n    };\n  function VE(e) {\n    return \"string\" == typeof e ? Object.assign({}, ME[e]) : e;\n  }\n  function jE(e) {\n    return \"string\" == typeof e ? Object.assign({}, UE[e]) : e;\n  }\n  function FE(e) {\n    return \"string\" == typeof e ? Object.assign({}, xE[e]) : e;\n  }\n  var BE = {\n    speech_low_quality: qE(16e3, !1),\n    speech_standard: qE(32e3, !1, 18),\n    music_standard: qE(48e3, !1),\n    standard_stereo: qE(48e3, !0, 56),\n    high_quality: qE(48e3, !1, 128),\n    high_quality_stereo: qE(48e3, !0, 192)\n  };\n  function GE(e) {\n    return \"string\" == typeof e ? Object.assign({}, BE[e]) : e;\n  }\n  function WE(e, t, i) {\n    Object.keys(KE).includes(e) && (!i && Object.keys(YE).includes(e) || (KE[e] = t));\n  }\n  function HE(e) {\n    return KE[e];\n  }\n  var KE = {\n      PROCESS_ID: \"\",\n      ENCRYPT_AES: !0,\n      AREAS: [\"CHINA\", \"GLOBAL\"],\n      WEBCS_DOMAIN: [\"webrtc2-ap-web-1.agora.io\", \"webrtc2-2.ap.sd-rtn.com\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-ap-web-3.agora.io\", \"webrtc2-4.ap.sd-rtn.com\"],\n      PROXY_CS: [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"],\n      CDS_AP: [\"cds-ap-web-1.agora.io\", \"cds-web-2.ap.sd-rtn.com\", \"cds-ap-web-3.agora.io\", \"cds-web-4.ap.sd-rtn.com\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-1.agora.io\", \"sua-web-2.ap.sd-rtn.com\", \"sua-ap-web-3.agora.io\", \"sua-web-4.ap.sd-rtn.com\"],\n      UAP_AP: [\"uap-ap-web-1.agora.io\", \"uap-web-2.ap.sd-rtn.com\", \"uap-ap-web-3.agora.io\", \"uap-web-4.ap.sd-rtn.com\"],\n      LOG_UPLOAD_SERVER: \"logservice.agora.io\",\n      EVENT_REPORT_DOMAIN: \"statscollector-1.agora.io\",\n      EVENT_REPORT_BACKUP_DOMAIN: \"web-2.statscollector.sd-rtn.com\",\n      ENABLE_EVENT_REPORT: !0,\n      GATEWAY_ADDRESS: [],\n      GATEWAY_WSS_ADDRESS: \"\",\n      LIVE_STREAMING_ADDRESS: \"\",\n      HTTP_CONNECT_TIMEOUT: 5e3,\n      SIGNAL_REQUEST_TIMEOUT: 1e4,\n      REPORT_STATS: !0,\n      UPLOAD_LOG: !1,\n      NOT_REPORT_EVENT: [],\n      SUBSCRIBE_TCC: !0,\n      PUBLISH_TCC: !1,\n      PING_PONG_TIME_OUT: 10,\n      WEBSOCKET_TIMEOUT_MIN: 1e4,\n      EVENT_REPORT_SEND_INTERVAL: 3e3,\n      CONFIG_DISTRIBUTE_INTERVAL: 3e5,\n      ENABLE_CONFIG_DISTRIBUTE: !0,\n      CANDIDATE_TIMEOUT: 5e3,\n      SHOW_REPORT_INVOKER_LOG: !1,\n      JOIN_EXTEND: \"\",\n      PUB_EXTEND: \"\",\n      SUB_EXTEND: \"\",\n      FORCE_TURN: !1,\n      TURN_ENABLE_TCP: !0,\n      TURN_ENABLE_UDP: !0,\n      MAX_UPLOAD_CACHE: 50,\n      UPLOAD_CACHE_INTERVAL: 2e3,\n      AJAX_REQUEST_CONCURRENT: 3,\n      REPORT_APP_SCENARIO: void 0,\n      GATEWAY_DOMAINS: [\"edge.agora.io\", \"edge.sd-rtn.com\"],\n      WORKER_DOMAIN: \"edge.agora.io\",\n      TURN_DOMAIN: \"edge.agora.io\",\n      EVENT_REPORT_RETRY: !0,\n      CHROME_FORCE_PLAN_B: !1,\n      AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL: 400,\n      AUDIO_SOURCE_AVG_VOLUME_DURATION: 3e3,\n      AUDIO_VOLUME_INDICATION_INTERVAL: 2e3,\n      VOLUME_VOICE_WEIGHT: 10,\n      GET_VOLUME_OF_MUTED_AUDIO_TRACK: !1,\n      NORMAL_EVENT_QUEUE_CAPACITY: 100,\n      CUSTOM_REPORT: !0,\n      CUSTOM_REPORT_LIMIT: 20,\n      PROXY_SERVER_TYPE2: \"webnginx-proxy.agora.io\",\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.sd-rtn.com\", \"webrtc-cloud-proxy.agora.io\"],\n      CUSTOM_PUB_ANSWER_MODIFIER: null,\n      CUSTOM_SUB_ANSWER_MODIFIER: null,\n      CUSTOM_PUB_OFFER_MODIFIER: null,\n      CUSTOM_SUB_OFFER_MODIFIER: null,\n      DSCP_TYPE: \"high\",\n      REMOVE_NEW_CODECS: !0,\n      FRAGEMENT_LENGTH: 3,\n      WEBSOCKET_COMPRESS: !1,\n      SIMULCAST: !1,\n      PRELOAD_MEDIA_COUNT: 0,\n      USE_RTX: !1,\n      CHECK_VIDEO_VISIBLE_INTERVAL: 3e4,\n      ENUMERATE_DEVICES_INTERVAL: !1,\n      ENUMERATE_DEVICES_INTERVAL_TIME: 1e4,\n      USE_NEW_TOKEN: !1,\n      CLOSE_AFB_FOR_LOCAL_AP: !0,\n      JOIN_WITH_FALLBACK_SIGNAL_PROXY: !0,\n      JOIN_WITH_FALLBACK_MEDIA_PROXY: !0,\n      JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE: !1,\n      JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION: 2e3,\n      USE_TURN_SERVER_OF_GATEWAY: !1,\n      H264_PROFILE_LEVEL_ID: \"\",\n      USE_NEW_LOG: !1,\n      LOG_VERSION: 3,\n      MEDIA_DEVICE_CONSTRAINTS: null,\n      ENCRYPT_PROXY_USERNAME_AND_PSW: !0,\n      SDP_LOGGING: !1,\n      CSP_DETECTED_HOSTNAME_LIST: [\"agora.io\", \"sd-rtn.com\"],\n      REMOTE_AUDIO_TRACK_USES_WEB_AUDIO: !1,\n      LOCAL_AUDIO_TRACK_USES_WEB_AUDIO: !0,\n      BITRATE_ADAPTER_TYPE: \"STANDARD_BITRATE\",\n      AI_DENOISER_PARAMETERS: {},\n      ADJUST_3A_FROM_PLUGINS: !0,\n      RAISE_H264_BASELINE_PRIORITY: !0,\n      FILTER_SEND_H264_BASELINE: !1,\n      ENABLE_PUBLISHED_USER_LIST: !0,\n      MAX_SUBSCRIPTION: 50,\n      X_GOOGLE_START_BITRATE: void 0,\n      NEW_REPORT_SERVER: !1,\n      NEW_REPORT_SERVER_DOMAINS: [\"data-reporting.agora.io\", \"data-reporting.agora.io\"],\n      VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT: 3e5,\n      VIDEO_INSPECT_INTERVAL_MINIMUM: 1e3,\n      VIDEO_INSPECT_QUALITY_RATIO: .9,\n      VIDEO_INSPECT_WORKER_MANAGER_HOST: \"edge.agora.io\",\n      VIDEO_INSPECT_WORKER_MANAGER_PORT: \"\",\n      VIDEO_INSPECT_WORKER_PORT: \"\",\n      SHOW_VIDEO_INSPECT_WORKER_MESSAGE: !1,\n      STATS_COLLECTOR_PORT: 443,\n      FORCE_TURN_TCP: !1,\n      SUBSCRIBE_AUDIO_FILTER_TOPN: void 0,\n      ENABLE_PUBLISH_AUDIO_FILTER: void 0,\n      WEBAUDIO_INIT_OPTIONS: void 0,\n      FILTER_VIDEO_FEC: !0,\n      FILTER_AUDIO_FEC: !1,\n      CHROME_DUAL_STREAM_USE_ENCODING: !0,\n      EXTENSION_USAGE_UPLOAD_INTERVAL: 1e4,\n      ICE_RESTART: !0,\n      ENABLE_USER_LICENSE_CHECK: !0,\n      SIGNAL_CHANNEL: 0,\n      TRANSMITTER_INITIAL_RTT: 30,\n      TRANSMITTER_INITIAL_RTO: 30,\n      TRANSMITTER_MAX_BATCH_ACK_COUNT: 2,\n      TRANSMITTER_MAX_RTO: 500,\n      DATACHANNEL_COMPRESS: !1,\n      FINGERPRINT: null,\n      DC_JOIN_WITH_FAILBACK: 5e3,\n      ENABLE_VIDEO_FRAME_CALLBACK: !0,\n      VIDEO_FREEZE_DURATION: 500,\n      SPATIALIZER_PARAMETERS: {},\n      UPLOAD_LOG_INTERVAL: 3e3,\n      UPLOAD_LOG_REQUEST_RETRY_INTERVAL: 2e3,\n      UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL: 2e4,\n      UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF: 5e3,\n      UPLOAD_LOG_RETRY_INTERVAL_V1: 1e4,\n      UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1: 200,\n      UPLOAD_LOG_LENGTH_EACH_TIME: 10,\n      APP_TYPE: 0,\n      DISABLE_WEBAUDIO: !1,\n      CHANNEL_MEDIA_RELAY_SERVERS: void 0,\n      ACCOUNT_REGISTER_RETRY_TIMEOUT: 1,\n      ACCOUNT_REGISTER_RETRY_RATIO: 2,\n      ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX: 6e4,\n      ACCOUNT_REGISTER_RETRY_COUNT_MAX: 1e5,\n      AUDIO_CONTEXT: null,\n      WEBCS_BACKUP_CONNECT_TIMEOUT: 6e3,\n      PLAYER_STATE_DEFER: 2e3,\n      SIGNAL_REQUEST_WATCH_INTERVAL: 1e3,\n      FILEPATH_LENMAX: 255,\n      DUALSTREAM_OPERATION_CHECK: !0,\n      MEDIA_ELEMENT_EXISTS_DEPTH: 3,\n      SHIM_CANDIDATE: !1,\n      LEAVE_MSG_TIMEOUT: 2e3,\n      STATS_FILTER: {\n        transportId: !0,\n        googTrackId: !0\n      }\n    },\n    YE = {};\n  function qE(e, t, i) {\n    return {\n      sampleRate: e,\n      stereo: t,\n      bitrate: i\n    };\n  }\n  function JE(e, t, i, r, n) {\n    return {\n      width: e,\n      height: t,\n      frameRate: i,\n      bitrateMin: r,\n      bitrateMax: n\n    };\n  }\n  function XE(e, t, i, r, n) {\n    return {\n      width: {\n        max: e\n      },\n      height: {\n        max: t\n      },\n      frameRate: i,\n      bitrateMin: r,\n      bitrateMax: n\n    };\n  }\n  function zE(e, t) {\n    return {\n      numSpatialLayers: e,\n      numTemporalLayers: t\n    };\n  }\n  LE || (KE.WEBCS_DOMAIN = [\"ap-web-1-oversea.agora.io\", \"ap-web-1-north-america.agora.io\"], KE.WEBCS_DOMAIN_BACKUP_LIST = [\"ap-web-2-oversea.agora.io\", \"ap-web-2-north-america.agora.io\"], KE.PROXY_CS = [\"proxy-ap-web-oversea.agora.io\", \"proxy-ap-web-america.agora.io\"], KE.CDS_AP = [\"cds-ap-web-oversea.agora.io\", \"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"], KE.ACCOUNT_REGISTER = [\"sua-ap-web-oversea.agora.io\", \"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"], KE.UAP_AP = [\"uap-ap-web-oversea.agora.io\", \"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"], KE.LOG_UPLOAD_SERVER = \"logservice-oversea.agora.io\", KE.EVENT_REPORT_DOMAIN = \"statscollector-1-oversea.agora.io\", KE.EVENT_REPORT_BACKUP_DOMAIN = \"statscollector-2-oversea.agora.io\", KE.PROXY_SERVER_TYPE3 = \"webrtc-cloud-proxy.agora.io\", KE.AREAS = [\"NORTH_AMERICA\", \"OVERSEA\"]);\n  var QE = [[0, 1, 2, 3, 4, 5, 5], [0, 2, 2, 3, 4, 5, 5], [0, 3, 3, 3, 4, 5, 5], [0, 4, 4, 4, 4, 5, 5], [0, 5, 5, 5, 5, 5, 5]],\n    ZE = [],\n    $E = [];\n  var ef = Et,\n    tf = Ht,\n    rf = N,\n    nf = function nf(e, t, i) {\n      var r = ef(t);\n      r in e ? tf.f(e, r, rf(0, i)) : e[r] = i;\n    },\n    of = Mr,\n    sf = wi,\n    af = nf,\n    cf = h.Array,\n    df = Math.max,\n    uf = function uf(e, t, i) {\n      for (var r = sf(e), n = of(t, r), o = of(void 0 === i ? r : i, r), s = cf(df(o - n, 0)), a = 0; n < o; n++, a++) af(s, a, e[n]);\n      return s.length = a, s;\n    },\n    lf = uf,\n    hf = Math.floor,\n    pf = function pf(e, t) {\n      var i = e.length,\n        r = hf(i / 2);\n      return i < 8 ? _f(e, t) : Ef(e, pf(lf(e, 0, r), t), pf(lf(e, r), t), t);\n    },\n    _f = function _f(e, t) {\n      for (var i, r, n = e.length, o = 1; o < n;) {\n        for (r = o, i = e[o]; r && t(e[r - 1], i) > 0;) e[r] = e[--r];\n        r !== o++ && (e[r] = i);\n      }\n      return e;\n    },\n    Ef = function Ef(e, t, i, r) {\n      for (var n = t.length, o = i.length, s = 0, a = 0; s < n || a < o;) e[s + a] = s < n && a < o ? r(t[s], i[a]) <= 0 ? t[s++] : i[a++] : s < n ? t[s++] : i[a++];\n      return e;\n    },\n    ff = pf,\n    mf = ee.match(/firefox\\/(\\d+)/i),\n    gf = !!mf && +mf[1],\n    Sf = /MSIE|Trident/.test(ee),\n    Tf = ee.match(/AppleWebKit\\/(\\d+)\\./),\n    vf = !!Tf && +Tf[1],\n    Rf = Ri,\n    If = d,\n    yf = Ie,\n    Cf = je,\n    Af = wi,\n    Of = Lo,\n    bf = i,\n    wf = ff,\n    Nf = Vi,\n    Df = gf,\n    Pf = Sf,\n    Lf = ae,\n    kf = vf,\n    Mf = [],\n    Uf = If(Mf.sort),\n    xf = If(Mf.push),\n    Vf = bf(function () {\n      Mf.sort(void 0);\n    }),\n    jf = bf(function () {\n      Mf.sort(null);\n    }),\n    Ff = Nf(\"sort\"),\n    Bf = !bf(function () {\n      if (Lf) return Lf < 70;\n      if (!(Df && Df > 3)) {\n        if (Pf) return !0;\n        if (kf) return kf < 603;\n        var e,\n          t,\n          i,\n          r,\n          n = \"\";\n        for (e = 65; e < 76; e++) {\n          switch (t = String.fromCharCode(e), e) {\n            case 66:\n            case 69:\n            case 70:\n            case 72:\n              i = 3;\n              break;\n            case 68:\n            case 71:\n              i = 4;\n              break;\n            default:\n              i = 2;\n          }\n          for (r = 0; r < 47; r++) Mf.push({\n            k: t + r,\n            v: i\n          });\n        }\n        for (Mf.sort(function (e, t) {\n          return t.v - e.v;\n        }), r = 0; r < Mf.length; r++) t = Mf[r].k.charAt(0), n.charAt(n.length - 1) !== t && (n += t);\n        return \"DGBEFHACIJK\" !== n;\n      }\n    });\n  Rf({\n    target: \"Array\",\n    proto: !0,\n    forced: Vf || !jf || !Ff || !Bf\n  }, {\n    sort: function sort(e) {\n      void 0 !== e && yf(e);\n      var t = Cf(this);\n      if (Bf) return void 0 === e ? Uf(t) : Uf(t, e);\n      var i,\n        r,\n        n = [],\n        o = Af(t);\n      for (r = 0; r < o; r++) r in t && xf(n, t[r]);\n      for (wf(n, function (e) {\n        return function (t, i) {\n          return void 0 === i ? -1 : void 0 === t ? 1 : void 0 !== e ? +e(t, i) || 0 : Of(t) > Of(i) ? 1 : -1;\n        };\n      }(e)), i = n.length, r = 0; r < i;) t[r] = n[r++];\n      for (; r < o;) delete t[r++];\n      return t;\n    }\n  });\n  var Gf = Hi(\"Array\").sort,\n    Wf = u,\n    Hf = Gf,\n    Kf = Array.prototype,\n    Yf = function Yf(e) {\n      var t = e.sort;\n      return e === Kf || Wf(Kf, e) && t === Kf.sort ? Hf : t;\n    };\n  function qf(e, t) {\n    if (\"boolean\" != typeof e) throw new vE(TE.INVALID_PARAMS, \"Invalid \".concat(t, \": The value is of the boolean type.\"));\n  }\n  function Jf(e, t, i) {\n    if (i.includes(e)) return;\n    throw new vE(TE.INVALID_PARAMS, \"\".concat(t, \" can only be set as \").concat(JSON.stringify(i)));\n  }\n  function Xf(e, t) {\n    var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,\n      r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1e4,\n      n = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4];\n    if (e < i || e > r || n && !rm(e)) {\n      throw new vE(TE.INVALID_PARAMS, \"invalid \".concat(t, \": the value range is [\").concat(i, \", \").concat(r, \"]. integer only\"));\n    }\n  }\n  function zf(e, t) {\n    if (\"number\" != typeof e) {\n      if (!(e.min || e.max || e.ideal || e.exact)) {\n        throw new vE(TE.INVALID_PARAMS, \"\".concat(t, \" is not a valid ConstrainLong\"));\n      }\n      void 0 !== e.min && Xf(e.min, \"\".concat(t, \".min\"), 0, 1 / 0), void 0 !== e.max && Xf(e.max, \"\".concat(t, \".max\"), 1, 1 / 0), void 0 !== e.exact && Xf(e.exact, \"\".concat(t, \".exact\"), 1, 1 / 0), void 0 !== e.ideal && Xf(e.ideal, \"\".concat(t, \".ideal\"), 1, 1 / 0);\n    } else Xf(e, t, 1, 1 / 0);\n  }\n  function Qf(e, t) {\n    var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,\n      r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 255,\n      n = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4];\n    if (null == e) throw new vE(TE.INVALID_PARAMS, \"\".concat(t || \"param\", \" cannot be empty\"));\n    if (!im(e, i, r, n)) throw new vE(TE.INVALID_PARAMS, \"Invalid \".concat(t || \"string param\", \": Length of the string: [\").concat(i, \",\").concat(r, \"].\").concat(n ? \" ASCII characters only.\" : \"\"));\n  }\n  function Zf(e, t) {\n    if (!Array.isArray(e)) throw new vE(TE.INVALID_PARAMS, \"\".concat(t, \" should be an array\"));\n  }\n  function $f(e) {\n    if (\"string\" != typeof e || !/^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\-\\:\\;\\<\\=\\.\\>\\?\\@\\[\\]\\^\\_\\{\\}\\|\\~\\,]{1,64}$/.test(e)) throw NE.error(\"Invalid Channel Name \".concat(e)), new vE(TE.INVALID_PARAMS, \"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,\");\n  }\n  function em(e) {\n    if (!(t = e, \"number\" == typeof t && Math.floor(t) === t && 0 <= t && t <= 4294967295 || im(e, 1, 255))) throw NE.error(\"Invalid UID \".concat(e, \" \").concat(typeof e)), new vE(TE.INVALID_PARAMS, \"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]\");\n    var t;\n    \"string\" == typeof e && NE.warning(\"You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.\");\n  }\n  function tm(e) {\n    return null == e;\n  }\n  function im(e) {\n    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1,\n      i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 255,\n      r = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3];\n    return \"string\" == typeof e && e.length <= i && e.length >= t && (!r || nm(e));\n  }\n  function rm(e) {\n    return \"number\" == typeof e && e % 1 == 0;\n  }\n  function nm(e) {\n    if (\"string\" != typeof e) return !1;\n    for (var _t24 = 0; _t24 < e.length; _t24 += 1) {\n      var _i18 = e.charCodeAt(_t24);\n      if (_i18 < 0 || _i18 > 255) return !1;\n    }\n    return !0;\n  }\n  var om, sm, am;\n  !function (e) {\n    e.FREE = \"free\", e.UPLOADING = \"uploading\";\n  }(om || (om = {})), function (e) {\n    e[e.MISC = 0] = \"MISC\", e[e.INTERNAL_EVENT = 1] = \"INTERNAL_EVENT\", e[e.PUBLIC_EVENT = 2] = \"PUBLIC_EVENT\", e[e.WEB_EVENT = 3] = \"WEB_EVENT\", e[e.INTERNAL_API = 4] = \"INTERNAL_API\", e[e.WEB_API = 5] = \"WEB_API\", e[e.PUBLIC_API = 6] = \"PUBLIC_API\";\n  }(sm || (sm = {})), function (e) {\n    e.NONE = \"none\", e.INIT = \"init\", e.CANPLAY = \"canplay\", e.PLAYING = \"playing\", e.PAUSED = \"paused\", e.SUSPEND = \"suspend\", e.STALLED = \"stalled\", e.WAITING = \"waiting\", e.ERROR = \"error\", e.DESTROYED = \"destroyed\", e.ABORT = \"abort\", e.ENDED = \"ended\", e.EMPTIED = \"emptied\", e.LOADEDDATA = \"loadeddata\";\n  }(am || (am = {}));\n  var cm = {\n    uninit: 100,\n    none: 110,\n    init: 120,\n    loadeddata: 130,\n    canplay: 200,\n    playing: 210,\n    paused: 220,\n    suspend: 300,\n    stalled: 310,\n    waiting: 320,\n    error: 330,\n    destroyed: 340,\n    abort: 350,\n    ended: 360,\n    emptied: 370\n  };\n  function dm(e) {\n    return Qf(e.reportId, \"params.reportId\", 0, 100, !1), Qf(e.category, \"params.category\", 0, 100, !1), Qf(e.event, \"params.event\", 0, 100, !1), Qf(e.label, \"params.label\", 0, 100, !1), Xf(e.value, \"params.value\", Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, !1), !0;\n  }\n  var um = {\n    sid: \"\",\n    lts: 0,\n    success: null,\n    cname: null,\n    uid: null,\n    peer: null,\n    cid: null,\n    elapse: null,\n    extend: null,\n    vid: 0\n  };\n  var lm, hm, pm, _m, Em, fm, mm, gm, Sm, Tm, vm, Rm, Im, ym, Cm, Am, Om, bm, wm, Nm, Dm, Pm, Lm, km;\n  function Mm(e) {\n    return Xf(e.timeout, \"config.timeout\", 0, 1e5), Xf(e.timeoutFactor, \"config.timeoutFactor\", 0, 100, !1), Xf(e.maxRetryCount, \"config.maxRetryConfig\", 0, 1 / 0), Xf(e.maxRetryTimeout, \"config.maxRetryTimeout\", 0, 1 / 0), !0;\n  }\n  function Um(e) {\n    return Jf(e.codec, \"config.codec\", [\"vp8\", \"vp9\", \"av1\", \"h264\"]), Jf(e.mode, \"config.mode\", [\"rtc\", \"live\"]), void 0 !== e.audioCodec && Jf(e.audioCodec, \"config.audioCodec\", [\"opus\", \"pcmu\", \"pcma\", \"g722\"]), void 0 !== e.proxyServer && Qf(e.proxyServer, \"config.proxyServer\", 1, 1e4), void 0 !== e.turnServer && Vm(e.turnServer), void 0 !== e.httpRetryConfig && Mm(e.httpRetryConfig), void 0 !== e.websocketRetryConfig && Mm(e.websocketRetryConfig), !0;\n  }\n  function xm(e) {\n    if (!Array.isArray(e) || e.length < 1) return !1;\n    try {\n      e.forEach(function (e) {\n        if (!e.urls) throw Error();\n      });\n    } catch (e) {\n      return !1;\n    }\n    return !0;\n  }\n  function Vm(e) {\n    return Qf(e.turnServerURL, \"turnServerURL\"), Qf(e.username, \"username\"), Qf(e.password, \"password\"), e.udpport && Xf(e.udpport, \"udpport\", 1, 99999, !0), e.forceturn && qf(e.forceturn, \"forceturn\"), e.security && qf(e.security, \"security\"), e.tcpport && Xf(e.tcpport, \"tcpport\", 1, 99999, !0), !0;\n  }\n  function jm(e) {\n    return void 0 !== e.level && Jf(e.level, \"level\", [1, 2, 3]), !0;\n  }\n  !function (e) {\n    e.PUBLISH = \"publish\", e.SUBSCRIBE = \"subscribe\", e.WS_COMPRESSOR_INIT = \"ws_compressor_init\", e.SESSION_INIT = \"session_init\", e.JOIN_CHOOSE_SERVER = \"join_choose_server\", e.REQ_USER_ACCOUNT = \"req_user_account\", e.JOIN_GATEWAY = \"join_gateway\", e.REJOIN_GATEWAY = \"rejoin_gateway\", e.STREAM_SWITCH = \"stream_switch\", e.REQUEST_PROXY_WORKER_MANAGER = \"request_proxy_worker_manager\", e.REQUEST_PROXY_APPCENTER = \"request_proxy_appcenter\", e.FIRST_VIDEO_RECEIVED = \"first_video_received\", e.FIRST_AUDIO_RECEIVED = \"first_audio_received\", e.FIRST_VIDEO_DECODE = \"first_video_decode\", e.FIRST_AUDIO_DECODE = \"first_audio_decode\", e.ON_ADD_AUDIO_STREAM = \"on_add_audio_stream\", e.ON_ADD_VIDEO_STREAM = \"on_add_video_stream\", e.ON_UPDATE_STREAM = \"on_update_stream\", e.ON_REMOVE_STREAM = \"on_remove_stream\", e.USER_ANALYTICS = \"req_user_analytics\";\n  }(lm || (lm = {})), function (e) {\n    e.SESSION = \"io.agora.pb.Wrtc.Session\", e.JOIN_CHOOSE_SERVER = \"io.agora.pb.Wrtc.JoinChooseServer\", e.REQ_USER_ACCOUNT = \"io.agora.pb.Wrtc.ReqUserAccount\", e.JOIN_GATEWAY = \"io.agora.pb.Wrtc.JoinGateway\", e.RE_JOIN_GATEWAY = \"io.agora.pb.Wrtc.ReJoinGateway\", e.PUBLISH = \"io.agora.pb.Wrtc.Publish\", e.SUBSCRIBE = \"io.agora.pb.Wrtc.Subscribe\", e.WS_COMPRESSOR_INIT = \"io.agora.pb.Wrtc.WsCompressorInit\", e.STREAM_SWITCH = \"io.agora.pb.Wrtc.StreamSwitch\", e.AUDIO_SENDING_STOPPED = \"io.agora.pb.Wrtc.AudioSendingStopped\", e.VIDEO_SENDING_STOPPED = \"io.agora.pb.Wrtc.VideoSendingStopped\", e.REQUEST_PROXY_APPCENTER = \"io.agora.pb.Wrtc.RequestProxyAppCenter\", e.REQUEST_PROXY_WORKER_MANAGER = \"io.agora.pb.Wrtc.RequestProxyWorkerManager\", e.API_INVOKE = \"io.agora.pb.Wrtc.ApiInvoke\", e.FIRST_VIDEO_RECEIVED = \"io.agora.pb.Wrtc.FirstVideoReceived\", e.FIRST_AUDIO_RECEIVED = \"io.agora.pb.Wrtc.FirstAudioReceived\", e.FIRST_VIDEO_DECODE = \"io.agora.pb.Wrtc.FirstVideoDecode\", e.FIRST_AUDIO_DECODE = \"io.agora.pb.Wrtc.FirstAudioDecode\", e.ON_ADD_AUDIO_STREAM = \"io.agora.pb.Wrtc.OnAddAudioStream\", e.ON_ADD_VIDEO_STREAM = \"io.agora.pb.Wrtc.OnAddVideoStream\", e.ON_UPDATE_STREAM = \"io.agora.pb.Wrtc.OnUpdateStream\", e.ON_REMOVE_STREAM = \"io.agora.pb.Wrtc.OnRemoveStream\", e.JOIN_CHANNEL_TIMEOUT = \"io.agora.pb.Wrtc.JoinChannelTimeout\", e.PEER_PUBLISH_STATUS = \"io.agora.pb.Wrtc.PeerPublishStatus\", e.WORKER_EVENT = \"io.agora.pb.Wrtc.WorkerEvent\", e.AP_WORKER_EVENT = \"io.agora.pb.Wrtc.APWorkerEvent\", e.JOIN_WEB_PROXY_AP = \"io.agora.pb.Wrtc.JoinWebProxyAP\", e.WEBSOCKET_QUIT = \"io.agora.pb.Wrtc.WebSocketQuit\", e.USER_ANALYTICS = \"io.agora.pb.Wrtc.UserAnalytics\", e.AUTOPLAY_FAILED = \"io.agora.pb.Wrtc.AutoplayFailed\";\n  }(hm || (hm = {})), function (e) {\n    e[e.WORKER_EVENT = 156] = \"WORKER_EVENT\", e[e.AP_WORKER_EVENT = 160] = \"AP_WORKER_EVENT\";\n  }(pm || (pm = {})), function (e) {\n    e[e.SESSION = 26] = \"SESSION\", e[e.JOIN_CHOOSE_SERVER = 27] = \"JOIN_CHOOSE_SERVER\", e[e.REQ_USER_ACCOUNT = 196] = \"REQ_USER_ACCOUNT\", e[e.JOIN_GATEWAY = 28] = \"JOIN_GATEWAY\", e[e.PUBLISH = 30] = \"PUBLISH\", e[e.SUBSCRIBE = 29] = \"SUBSCRIBE\", e[e.WS_COMPRESSOR_INIT = 9430] = \"WS_COMPRESSOR_INIT\", e[e.STREAM_SWITCH = 32] = \"STREAM_SWITCH\", e[e.AUDIO_SENDING_STOPPED = 33] = \"AUDIO_SENDING_STOPPED\", e[e.VIDEO_SENDING_STOPPED = 34] = \"VIDEO_SENDING_STOPPED\", e[e.REQUEST_PROXY_APPCENTER = 35] = \"REQUEST_PROXY_APPCENTER\", e[e.REQUEST_PROXY_WORKER_MANAGER = 36] = \"REQUEST_PROXY_WORKER_MANAGER\", e[e.API_INVOKE = 41] = \"API_INVOKE\", e[e.FIRST_VIDEO_RECEIVED = 348] = \"FIRST_VIDEO_RECEIVED\", e[e.FIRST_AUDIO_RECEIVED = 349] = \"FIRST_AUDIO_RECEIVED\", e[e.FIRST_VIDEO_DECODE = 350] = \"FIRST_VIDEO_DECODE\", e[e.FIRST_AUDIO_DECODE = 351] = \"FIRST_AUDIO_DECODE\", e[e.ON_ADD_AUDIO_STREAM = 352] = \"ON_ADD_AUDIO_STREAM\", e[e.ON_ADD_VIDEO_STREAM = 353] = \"ON_ADD_VIDEO_STREAM\", e[e.ON_UPDATE_STREAM = 356] = \"ON_UPDATE_STREAM\", e[e.ON_REMOVE_STREAM = 355] = \"ON_REMOVE_STREAM\", e[e.JOIN_CHANNEL_TIMEOUT = 407] = \"JOIN_CHANNEL_TIMEOUT\", e[e.PEER_PUBLISH_STATUS = 408] = \"PEER_PUBLISH_STATUS\", e[e.WORKER_EVENT = 156] = \"WORKER_EVENT\", e[e.AP_WORKER_EVENT = 160] = \"AP_WORKER_EVENT\", e[e.JOIN_WEB_PROXY_AP = 700] = \"JOIN_WEB_PROXY_AP\", e[e.WEBSOCKET_QUIT = 671] = \"WEBSOCKET_QUIT\", e[e.USER_ANALYTICS = 1e4] = \"USER_ANALYTICS\", e[e.AUTOPLAY_FAILED = 9178] = \"AUTOPLAY_FAILED\";\n  }(_m || (_m = {})), function (e) {\n    e.CREATE_CLIENT = \"createClient\", e.CHECK_SYSTEM_REQUIREMENTS = \"checkSystemRequirements\", e.SET_AREA = \"setArea\", e.CHECK_VIDEO_TRACK_IS_ACTIVE = \"checkVideoTrackIsActive\", e.CHECK_AUDIO_TRACK_IS_ACTIVE = \"checkAudioTrackIsActive\", e.CREATE_MIC_AUDIO_TRACK = \"createMicrophoneAudioTrack\", e.CREATE_CUSTOM_AUDIO_TRACK = \"createCustomAudioTrack\", e.CREATE_BUFFER_AUDIO_TRACK = \"createBufferSourceAudioTrack\", e.CREATE_CAM_VIDEO_TRACK = \"createCameraVideoTrack\", e.CREATE_CUSTOM_VIDEO_TRACK = \"createCustomVideoTrack\", e.CREATE_MIC_AND_CAM_TRACKS = \"createMicrophoneAndCameraTracks\", e.CREATE_SCREEN_VIDEO_TRACK = \"createScreenVideoTrack\", e.SET_ENCRYPTION_CONFIG = \"Client.setEncryptionConfig\", e.START_PROXY_SERVER = \"Client.startProxyServer\", e.STOP_PROXY_SERVER = \"Client.stopProxyServer\", e.SET_PROXY_SERVER = \"Client.setProxyServer\", e.SET_TURN_SERVER = \"Client.setTurnServer\", e.SET_CLIENT_ROLE = \"Client.setClientRole\", e.SET_LOW_STREAM_PARAMETER = \"Client.setLowStreamParameter\", e.ENABLE_DUAL_STREAM = \"Client.enableDualStream\", e.DISABLE_DUAL_STREAM = \"Client.disableDualStream\", e.JOIN = \"Client.join\", e.LEAVE = \"Client.leave\", e.PUBLISH = \"Client.publish\", e.UNPUBLISH = \"Client.unpublish\", e.SUBSCRIBE = \"Client.subscribe\", e.MASS_SUBSCRIBE = \"Client.massSubscribe\", e.MASS_UNSUBSCRIBE = \"Client.massUnsubscribe\", e.UNSUBSCRIBE = \"Client.unsubscribe\", e.RENEW_TOKEN = \"Client.renewToken\", e.SET_REMOTE_VIDEO_STREAM_TYPE = \"Client.setRemoteVideoStreamType\", e.SET_STREAM_FALLBACK_OPTION = \"Client.setStreamFallbackOption\", e.ENABLE_AUDIO_VOLUME_INDICATOR = \"Client.enableAudioVolumeIndicator\", e.SEND_CUSTOM_REPORT_MESSAGE = \"Client.sendCustomReportMessage\", e.INSPECT_VIDEO_CONTENT = \"Client.inspectVideoContent\", e.STOP_INSPECT_VIDEO_CONTENT = \"Client.stopInspectVideoContent\", e.JOIN_FALLBACK_TO_PROXY = \"Client._joinFallbackToProxy\", e.DATACHANNEL_FAILBACK = \"Client._datachannelFailback\", e.ON_LIVE_STREAM_WARNING = \"Client.onLiveStreamWarning\", e.ON_LIVE_STREAM_ERROR = \"Client.onLiveStreamingError\", e.START_LIVE_STREAMING = \"Client.startLiveStreaming\", e.SET_LIVE_TRANSCODING = \"Client.setLiveTranscoding\", e.STOP_LIVE_STREAMING = \"Client.stopLiveStreaming\", e.ADD_INJECT_STREAM_URL = \"Client.addInjectStreamUrl\", e.REMOVE_INJECT_STREAM_URL = \"Client.removeInjectStreamUrl\", e.START_CHANNEL_MEDIA_RELAY = \"Client.startChannelMediaRelay\", e.UPDATE_CHANNEL_MEDIA_RELAY = \"Client.updateChannelMediaRelay\", e.STOP_CHANNEL_MEDIA_RELAY = \"Client.stopChannelMediaRelay\", e.REQUEST_CONFIG_DISTRIBUTE = \"_config-distribute-request\", e.SET_CONFIG_DISTRIBUTE = \"_configDistribute\", e.LOCAL_TRACK_SET_MUTED = \"LocalTrack.setMute\", e.LOCAL_AUDIO_TRACK_PLAY = \"LocalAudioTrack.play\", e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT = \"LocalAudioTrack.playInElement\", e.LOCAL_AUDIO_TRACK_STOP = \"LocalAudioTrack.stop\", e.LOCAL_AUDIO_TRACK_SET_VOLUME = \"LocalAudioTrack.setVolume\", e.MIC_AUDIO_TRACK_SET_DEVICE = \"MicrophoneAudioTrack.setDevice\", e.BUFFER_AUDIO_TRACK_START = \"BufferSourceAudioTrack.startProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_STOP = \"BufferSourceAudioTrack.stopProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_PAUSE = \"BufferSourceAudioTrack.pauseProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_RESUME = \"BufferSourceAudioTrack.resumeProcessAudioBuffer\", e.BUFFER_AUDIO_TRACK_SEEK = \"BufferSourceAudioTrack.seekAudioBuffer\", e.LOCAL_VIDEO_TRACK_PLAY = \"LocalVideoTrack.play\", e.LOCAL_VIDEO_TRACK_STOP = \"LocalVideoTrack.stop\", e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE = \"LocalVideoTrack.getVideoElementVisibleStatus\", e.LOCAL_VIDEO_TRACK_BEAUTY = \"LocalVideoTrack.setBeautyEffect\", e.CAM_VIDEO_TRACK_SET_DEVICE = \"CameraVideoTrack.setDevice\", e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG = \"CameraVideoTrack.setEncoderConfiguration\", e.REMOTE_VIDEO_TRACK_PLAY = \"RemoteVideoTrack.play\", e.REMOTE_VIDEO_TRACK_STOP = \"RemoteVideoTrack.stop\", e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE = \"RemoteVideoTrack.getVideoElementVisibleStatus\", e.REMOTE_AUDIO_TRACK_PLAY = \"RemoteAudioTrack.play\", e.REMOTE_AUDIO_TRACK_STOP = \"RemoteAudioTrack.stop\", e.REMOTE_AUDIO_SET_VOLUME = \"RemoteAudioTrack.setVolume\", e.REMOTE_AUDIO_SET_OUTPUT_DEVICE = \"RemoteAudioTrack.setOutputDevice\", e.GET_MEDIA_STREAM_TRACK = \"Track.getMediaStreamTrack\", e.STREAM_TYPE_CHANGE = \"streamTypeChange\", e.CONNECTION_STATE_CHANGE = \"connectionStateChange\", e.LOAD_CONFIG_FROM_LOCALSTORAGE = \"loadConfigFromLocalStorage\";\n  }(Em || (Em = {})), function (e) {\n    e.TRACER = \"tracer\";\n  }(fm || (fm = {})), function (e) {\n    e.IDLE = \"IDLE\", e.INITING = \"INITING\", e.INITEND = \"INITEND\";\n  }(mm || (mm = {})), function (e) {\n    e.STATE_CHANGE = \"state_change\", e.RECORDING_DEVICE_CHANGED = \"recordingDeviceChanged\", e.PLAYOUT_DEVICE_CHANGED = \"playoutDeviceChanged\", e.CAMERA_DEVICE_CHANGED = \"cameraDeviceChanged\";\n  }(gm || (gm = {})), function (e) {\n    e[e.ACCESS_POINT = 101] = \"ACCESS_POINT\", e[e.UNILBS = 201] = \"UNILBS\", e[e.STRING_UID_ALLOCATOR = 901] = \"STRING_UID_ALLOCATOR\";\n  }(Sm || (Sm = {})), function (e) {\n    e[e.IIIEGAL_APPID = 1] = \"IIIEGAL_APPID\", e[e.IIIEGAL_UID = 2] = \"IIIEGAL_UID\", e[e.INTERNAL_ERROR = 3] = \"INTERNAL_ERROR\";\n  }(Tm || (Tm = {})), function (e) {\n    e[e.INVALID_VENDOR_KEY = 5] = \"INVALID_VENDOR_KEY\", e[e.INVALID_CHANNEL_NAME = 7] = \"INVALID_CHANNEL_NAME\", e[e.INTERNAL_ERROR = 8] = \"INTERNAL_ERROR\", e[e.NO_AUTHORIZED = 9] = \"NO_AUTHORIZED\", e[e.DYNAMIC_KEY_TIMEOUT = 10] = \"DYNAMIC_KEY_TIMEOUT\", e[e.NO_ACTIVE_STATUS = 11] = \"NO_ACTIVE_STATUS\", e[e.DYNAMIC_KEY_EXPIRED = 13] = \"DYNAMIC_KEY_EXPIRED\", e[e.STATIC_USE_DYNAMIC_KEY = 14] = \"STATIC_USE_DYNAMIC_KEY\", e[e.DYNAMIC_USE_STATIC_KEY = 15] = \"DYNAMIC_USE_STATIC_KEY\", e[e.USER_OVERLOAD = 16] = \"USER_OVERLOAD\", e[e.FORBIDDEN_REGION = 18] = \"FORBIDDEN_REGION\", e[e.CANNOT_MEET_AREA_DEMAND = 19] = \"CANNOT_MEET_AREA_DEMAND\";\n  }(vm || (vm = {})), function (e) {\n    e[e.NO_FLAG_SET = 100] = \"NO_FLAG_SET\", e[e.FLAG_SET_BUT_EMPTY = 101] = \"FLAG_SET_BUT_EMPTY\", e[e.INVALID_FALG_SET = 102] = \"INVALID_FALG_SET\", e[e.FLAG_SET_BUT_NO_RE = 103] = \"FLAG_SET_BUT_NO_RE\", e[e.INVALID_SERVICE_ID = 104] = \"INVALID_SERVICE_ID\", e[e.NO_SERVICE_AVAILABLE = 200] = \"NO_SERVICE_AVAILABLE\", e[e.NO_SERVICE_AVAILABLE_P2P = 201] = \"NO_SERVICE_AVAILABLE_P2P\", e[e.NO_SERVICE_AVAILABLE_VOICE = 202] = \"NO_SERVICE_AVAILABLE_VOICE\", e[e.NO_SERVICE_AVAILABLE_WEBRTC = 203] = \"NO_SERVICE_AVAILABLE_WEBRTC\", e[e.NO_SERVICE_AVAILABLE_CDS = 204] = \"NO_SERVICE_AVAILABLE_CDS\", e[e.NO_SERVICE_AVAILABLE_CDN = 205] = \"NO_SERVICE_AVAILABLE_CDN\", e[e.NO_SERVICE_AVAILABLE_TDS = 206] = \"NO_SERVICE_AVAILABLE_TDS\", e[e.NO_SERVICE_AVAILABLE_REPORT = 207] = \"NO_SERVICE_AVAILABLE_REPORT\", e[e.NO_SERVICE_AVAILABLE_APP_CENTER = 208] = \"NO_SERVICE_AVAILABLE_APP_CENTER\", e[e.NO_SERVICE_AVAILABLE_ENV0 = 209] = \"NO_SERVICE_AVAILABLE_ENV0\", e[e.NO_SERVICE_AVAILABLE_VOET = 210] = \"NO_SERVICE_AVAILABLE_VOET\", e[e.NO_SERVICE_AVAILABLE_STRING_UID = 211] = \"NO_SERVICE_AVAILABLE_STRING_UID\", e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS = 212] = \"NO_SERVICE_AVAILABLE_WEBRTC_UNILBS\", e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV = 213] = \"NO_SERVICE_AVAILABLE_UNILBS_FLV\";\n  }(Rm || (Rm = {})), function (e) {\n    e[e.K_TIMESTAMP_EXPIRED = 2] = \"K_TIMESTAMP_EXPIRED\", e[e.K_CHANNEL_PERMISSION_INVALID = 3] = \"K_CHANNEL_PERMISSION_INVALID\", e[e.K_CERTIFICATE_INVALID = 4] = \"K_CERTIFICATE_INVALID\", e[e.K_CHANNEL_NAME_EMPTY = 5] = \"K_CHANNEL_NAME_EMPTY\", e[e.K_CHANNEL_NOT_FOUND = 6] = \"K_CHANNEL_NOT_FOUND\", e[e.K_TICKET_INVALID = 7] = \"K_TICKET_INVALID\", e[e.K_CHANNEL_CONFLICTED = 8] = \"K_CHANNEL_CONFLICTED\", e[e.K_SERVICE_NOT_READY = 9] = \"K_SERVICE_NOT_READY\", e[e.K_SERVICE_TOO_HEAVY = 10] = \"K_SERVICE_TOO_HEAVY\", e[e.K_UID_BANNED = 14] = \"K_UID_BANNED\", e[e.K_IP_BANNED = 15] = \"K_IP_BANNED\", e[e.K_CHANNEL_BANNED = 16] = \"K_CHANNEL_BANNED\", e[e.WARN_NO_AVAILABLE_CHANNEL = 103] = \"WARN_NO_AVAILABLE_CHANNEL\", e[e.WARN_LOOKUP_CHANNEL_TIMEOUT = 104] = \"WARN_LOOKUP_CHANNEL_TIMEOUT\", e[e.WARN_LOOKUP_CHANNEL_REJECTED = 105] = \"WARN_LOOKUP_CHANNEL_REJECTED\", e[e.WARN_OPEN_CHANNEL_TIMEOUT = 106] = \"WARN_OPEN_CHANNEL_TIMEOUT\", e[e.WARN_OPEN_CHANNEL_REJECTED = 107] = \"WARN_OPEN_CHANNEL_REJECTED\", e[e.WARN_REQUEST_DEFERRED = 108] = \"WARN_REQUEST_DEFERRED\", e[e.ERR_DYNAMIC_KEY_TIMEOUT = 109] = \"ERR_DYNAMIC_KEY_TIMEOUT\", e[e.ERR_NO_AUTHORIZED = 110] = \"ERR_NO_AUTHORIZED\", e[e.ERR_VOM_SERVICE_UNAVAILABLE = 111] = \"ERR_VOM_SERVICE_UNAVAILABLE\", e[e.ERR_NO_CHANNEL_AVAILABLE_CODE = 112] = \"ERR_NO_CHANNEL_AVAILABLE_CODE\", e[e.ERR_MASTER_VOCS_UNAVAILABLE = 114] = \"ERR_MASTER_VOCS_UNAVAILABLE\", e[e.ERR_INTERNAL_ERROR = 115] = \"ERR_INTERNAL_ERROR\", e[e.ERR_NO_ACTIVE_STATUS = 116] = \"ERR_NO_ACTIVE_STATUS\", e[e.ERR_INVALID_UID = 117] = \"ERR_INVALID_UID\", e[e.ERR_DYNAMIC_KEY_EXPIRED = 118] = \"ERR_DYNAMIC_KEY_EXPIRED\", e[e.ERR_STATIC_USE_DYANMIC_KE = 119] = \"ERR_STATIC_USE_DYANMIC_KE\", e[e.ERR_DYNAMIC_USE_STATIC_KE = 120] = \"ERR_DYNAMIC_USE_STATIC_KE\", e[e.ERR_NO_VOCS_AVAILABLE = 2e3] = \"ERR_NO_VOCS_AVAILABLE\", e[e.ERR_NO_VOS_AVAILABLE = 2001] = \"ERR_NO_VOS_AVAILABLE\", e[e.ERR_JOIN_CHANNEL_TIMEOUT = 2002] = \"ERR_JOIN_CHANNEL_TIMEOUT\", e[e.ERR_REPEAT_JOIN_CHANNEL = 2003] = \"ERR_REPEAT_JOIN_CHANNEL\", e[e.ERR_JOIN_BY_MULTI_IP = 2004] = \"ERR_JOIN_BY_MULTI_IP\", e[e.ERR_NOT_JOINED = 2011] = \"ERR_NOT_JOINED\", e[e.ERR_REPEAT_JOIN_REQUEST = 2012] = \"ERR_REPEAT_JOIN_REQUEST\", e[e.ERR_INVALID_VENDOR_KEY = 2013] = \"ERR_INVALID_VENDOR_KEY\", e[e.ERR_INVALID_CHANNEL_NAME = 2014] = \"ERR_INVALID_CHANNEL_NAME\", e[e.ERR_INVALID_STRINGUID = 2015] = \"ERR_INVALID_STRINGUID\", e[e.ERR_TOO_MANY_USERS = 2016] = \"ERR_TOO_MANY_USERS\", e[e.ERR_SET_CLIENT_ROLE_TIMEOUT = 2017] = \"ERR_SET_CLIENT_ROLE_TIMEOUT\", e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION = 2018] = \"ERR_SET_CLIENT_ROLE_NO_PERMISSION\", e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE = 2019] = \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\", e[e.ERR_PUBLISH_REQUEST_INVALID = 2020] = \"ERR_PUBLISH_REQUEST_INVALID\", e[e.ERR_SUBSCRIBE_REQUEST_INVALID = 2021] = \"ERR_SUBSCRIBE_REQUEST_INVALID\", e[e.ERR_NOT_SUPPORTED_MESSAGE = 2022] = \"ERR_NOT_SUPPORTED_MESSAGE\", e[e.ERR_ILLEAGAL_PLUGIN = 2023] = \"ERR_ILLEAGAL_PLUGIN\", e[e.ERR_REJOIN_TOKEN_INVALID = 2024] = \"ERR_REJOIN_TOKEN_INVALID\", e[e.ERR_REJOIN_USER_NOT_JOINED = 2025] = \"ERR_REJOIN_USER_NOT_JOINED\", e[e.ERR_INVALID_OPTIONAL_INFO = 2027] = \"ERR_INVALID_OPTIONAL_INFO\", e[e.ILLEGAL_AES_PASSWORD = 2028] = \"ILLEGAL_AES_PASSWORD\", e[e.ILLEGAL_CLIENT_ROLE_LEVEL = 2029] = \"ILLEGAL_CLIENT_ROLE_LEVEL\", e[e.ERR_TOO_MANY_BROADCASTERS = 2031] = \"ERR_TOO_MANY_BROADCASTERS\", e[e.ERR_TOO_MANY_SUBSCRIBERS = 2032] = \"ERR_TOO_MANY_SUBSCRIBERS\", e[e.ERR_LICENSE_MISSING = 32769] = \"ERR_LICENSE_MISSING\", e[e.ERR_LICENSE_EXPIRED = 32771] = \"ERR_LICENSE_EXPIRED\", e[e.ERR_LICENSE_MINUTES_EXCEEDED = 32773] = \"ERR_LICENSE_MINUTES_EXCEEDED\", e[e.ERR_LICENSE_PERIOD_INVALID = 32774] = \"ERR_LICENSE_PERIOD_INVALID\", e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE = 32778] = \"ERR_LICENSE_MULTIPLE_SDK_SERVICE\", e[e.ERR_LICENSE_ILLEGAL = 32783] = \"ERR_LICENSE_ILLEGAL\", e[e.ERR_TEST_RECOVER = 9e3] = \"ERR_TEST_RECOVER\", e[e.ERR_TEST_TRYNEXT = 9001] = \"ERR_TEST_TRYNEXT\", e[e.ERR_TEST_RETRY = 9002] = \"ERR_TEST_RETRY\";\n  }(Im || (Im = {})), function (e) {\n    e[e.AUDIENCE_LEVEL_LOW_LATENCY = 1] = \"AUDIENCE_LEVEL_LOW_LATENCY\", e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY = 2] = \"AUDIENCE_LEVEL_ULTRA_LOW_LATENCY\", e[e.AUDIENCE_LEVEL_SYNC_LATENCY = 3] = \"AUDIENCE_LEVEL_SYNC_LATENCY\";\n  }(ym || (ym = {})), function (e) {\n    e.LEAVE = \"LEAVE\", e.NETWORK_ERROR = \"NETWORK_ERROR\", e.SERVER_ERROR = \"SERVER_ERROR\", e.UID_BANNED = \"UID_BANNED\", e.IP_BANNED = \"IP_BANNED\", e.CHANNEL_BANNED = \"CHANNEL_BANNED\", e.FALLBACK = \"FALLBACK\", e.LICENSE_MISSING = \"LICENSE_MISSING\", e.LICENSE_EXPIRED = \"LICENSE_EXPIRED\", e.LICENSE_MINUTES_EXCEEDED = \"LICENSE_MINUTES_EXCEEDED\", e.LICENSE_PERIOD_INVALID = \"LICENSE_PERIOD_INVALID\", e.LICENSE_MULTIPLE_SDK_SERVICE = \"LICENSE_MULTIPLE_SDK_SERVICE\", e.LICENSE_ILLEGAL = \"LICENSE_ILLEGAL\";\n  }(Cm || (Cm = {})), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.MEDIA_RECONNECT_START = \"media-reconnect-start\", e.MEDIA_RECONNECT_END = \"media-reconnect-end\", e.IS_USING_CLOUD_PROXY = \"is-using-cloud-proxy\", e.USER_JOINED = \"user-joined\", e.USER_LEAVED = \"user-left\", e.USER_PUBLISHED = \"user-published\", e.USER_UNPUBLISHED = \"user-unpublished\", e.USER_INFO_UPDATED = \"user-info-updated\", e.CLIENT_BANNED = \"client-banned\", e.CHANNEL_MEDIA_RELAY_STATE = \"channel-media-relay-state\", e.CHANNEL_MEDIA_RELAY_EVENT = \"channel-media-relay-event\", e.VOLUME_INDICATOR = \"volume-indicator\", e.CRYPT_ERROR = \"crypt-error\", e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE = \"token-privilege-will-expire\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"token-privilege-did-expire\", e.NETWORK_QUALITY = \"network-quality\", e.STREAM_TYPE_CHANGED = \"stream-type-changed\", e.STREAM_FALLBACK = \"stream-fallback\", e.RECEIVE_METADATA = \"receive-metadata\", e.STREAM_MESSAGE = \"stream-message\", e.LIVE_STREAMING_ERROR = \"live-streaming-error\", e.LIVE_STREAMING_WARNING = \"live-streaming-warning\", e.INJECT_STREAM_STATUS = \"stream-inject-status\", e.EXCEPTION = \"exception\", e.ERROR = \"error\", e.P2P_LOST = \"p2p_lost\", e.JOIN_FALLBACK_TO_PROXY = \"join-fallback-to-proxy\", e.CHANNEL_FALLBACK_TO_WEBSOCKET = \"channel-fallback-to-websocket\", e.MEDIA_CONNECTION_TYPE_CHANGE = \"media-connection-type-change\", e.PUBLISHED_USER_LIST = \"published-user-list\", e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE = \"content-inspect-connection-state-change\", e.CONTENT_INSPECT_ERROR = \"content-inspect-error\", e.CONTENT_INSPECT_RESULT = \"content-inspect-result\";\n  }(Am || (Am = {})), function (e) {\n    e.NETWORK_ERROR = \"NETWORK_ERROR\", e.SERVER_ERROR = \"SERVER_ERROR\", e.MULTI_IP = \"MULTI_IP\", e.TIMEOUT = \"TIMEOUT\", e.OFFLINE = \"OFFLINE\", e.LEAVE = \"LEAVE\", e.P2P_FAILED = \"P2P_FAILED\", e.FALLBACK = \"FALLBACK\";\n  }(Om || (Om = {})), function (e) {\n    e.CONNECTING = \"connecting\", e.CONNECTED = \"connected\", e.RECONNECTING = \"reconnecting\", e.CLOSED = \"closed\";\n  }(bm || (bm = {})), function (e) {\n    e.WS_CONNECTED = \"ws_connected\", e.WS_RECONNECTING = \"ws_reconnecting\", e.WS_CLOSED = \"ws_closed\", e.WS_RECONNECT_WAITTING_FINISH = \"ws_reconnect_waitting_finish\", e.WS_RECONNECT_CREATE_CONNECTION = \"ws_reconnect_create_connection\", e.ON_BINARY_DATA = \"on_binary_data\", e.REQUEST_RECOVER = \"request_recover\", e.REQUEST_JOIN_INFO = \"request_join_info\", e.REQUEST_REJOIN_INFO = \"req_rejoin_info\", e.IS_P2P_DISCONNECTED = \"is_p2p_dis\", e.DISCONNECT_P2P = \"dis_p2p\", e.ABORT_P2P_EXECUTION = \"abort_p2p_execution\", e.NEED_RENEW_SESSION = \"need-sid\", e.REPORT_JOIN_GATEWAY = \"report_join_gateway\", e.REQUEST_TIMEOUT = \"request_timeout\", e.REQUEST_SUCCESS = \"request_success\", e.JOIN_RESPONSE = \"join_response\", e.DATACHANNEL_PRECONNECT = \"datachannel_preconnect\", e.DATACHANNEL_CONNECTING = \"datachannel_connecting\", e.DATACHANNEL_FAILBACK = \"datachannel_failback\";\n  }(wm || (wm = {})), function (e) {\n    e.PING = \"ping\", e.PING_BACK = \"ping_back\", e.JOIN = \"join_v3\", e.REJOIN = \"rejoin_v3\", e.LEAVE = \"leave\", e.SET_CLIENT_ROLE = \"set_client_role\", e.PUBLISH = \"publish\", e.UNPUBLISH = \"unpublish\", e.SUBSCRIBE = \"subscribe\", e.SUBSCRIBE_STREAMS = \"subscribe_streams\", e.UNSUBSCRIBE = \"unsubscribe\", e.UNSUBSCRIBE_STREAMS = \"unsubscribe_streams\", e.SUBSCRIBE_CHANGE = \"subscribe_change\", e.TRAFFIC_STATS = \"traffic_stats\", e.RENEW_TOKEN = \"renew_token\", e.SWITCH_VIDEO_STREAM = \"switch_video_stream\", e.DEFAULT_VIDEO_STREAM = \"default_video_stream\", e.SET_FALLBACK_OPTION = \"set_fallback_option\", e.GATEWAY_INFO = \"gateway_info\", e.CONTROL = \"control\", e.SEND_METADATA = \"send_metadata\", e.DATA_STREAM = \"data_stream\", e.PICK_SVC_LAYER = \"pick_svc_layer\", e.RESTART_ICE = \"restart_ice\", e.CONNECT_PC = \"connect_pc\", e.SET_VIDEO_PROFILE = \"set_video_profile\", e.SET_PARAMETER = \"set_parameter\";\n  }(Nm || (Nm = {})), function (e) {\n    e.PUBLISH_STATS = \"publish_stats\", e.PUBLISH_RELATED_STATS = \"publish_related_stats\", e.SUBSCRIBE_STATS = \"subscribe_stats\", e.SUBSCRIBE_RELATED_STATS = \"subscribe_related_stats\", e.WS_INFLATE_DATA_LENGTH = \"ws_inflate_data_length\", e.DENOISER_STATS = \"denoiser_stats\", e.TRANSPORT_STATS = \"transport_stats\", e.EXTENSION_USAGE_STATS = \"extension_usage_stats\";\n  }(Dm || (Dm = {})), function (e) {\n    e.ON_USER_ONLINE = \"on_user_online\", e.ON_USER_OFFLINE = \"on_user_offline\", e.ON_STREAM_FALLBACK_UPDATE = \"on_stream_fallback_update\", e.ON_PUBLISH_STREAM = \"on_publish_stream\", e.ON_UPLINK_STATS = \"on_uplink_stats\", e.ON_P2P_LOST = \"on_p2p_lost\", e.ON_REMOVE_STREAM = \"on_remove_stream\", e.ON_ADD_AUDIO_STREAM = \"on_add_audio_stream\", e.ON_ADD_VIDEO_STREAM = \"on_add_video_stream\", e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE = \"on_token_privilege_will_expire\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"on_token_privilege_did_expire\", e.ON_USER_BANNED = \"on_user_banned\", e.ON_USER_LICENSE_BANNED = \"on_user_license_banned\", e.ON_NOTIFICATION = \"on_notification\", e.ON_CRYPT_ERROR = \"on_crypt_error\", e.MUTE_AUDIO = \"mute_audio\", e.MUTE_VIDEO = \"mute_video\", e.UNMUTE_AUDIO = \"unmute_audio\", e.UNMUTE_VIDEO = \"unmute_video\", e.ON_P2P_OK = \"on_p2p_ok\", e.RECEIVE_METADATA = \"receive_metadata\", e.ON_DATA_STREAM = \"on_data_stream\", e.ENABLE_LOCAL_VIDEO = \"enable_local_video\", e.DISABLE_LOCAL_VIDEO = \"disable_local_video\", e.ENABLE_LOCAL_AUDIO = \"enable_local_audio\", e.DISABLE_LOCAL_AUDIO = \"disable_local_audio\", e.ON_PUBLISHED_USER_LIST = \"on_published_user_list\";\n  }(Pm || (Pm = {})), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"CONNECTION_STATE_CHANGE\", e.NEED_ANSWER = \"NEED_ANSWER\", e.NEED_RENEGOTIATE = \"NEED_RENEGOTIATE\", e.P2P_LOST = \"P2P_LOST\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NEED_UNPUB = \"NEED_UNPUB\", e.NEED_UNSUB = \"NEED_UNSUB\", e.NEED_UPLOAD = \"NEED_UPLOAD\", e.NEED_CONTROL = \"NEED_CONTROL\", e.START_RECONNECT = \"START_RECONNECT\", e.END_RECONNECT = \"END_RECONNECT\", e.NEED_SIGNAL_RTT = \"NEED_SIGNAL_RTT\";\n  }(Lm || (Lm = {})), function (e) {\n    e.AUDIO_SOURCE_STATE_CHANGE = \"audio_source_state_change\", e.RECEIVE_TRACK_BUFFER = \"receive_track_buffer\", e.ON_AUDIO_BUFFER = \"on_audio_buffer\", e.UPDATE_SOURCE = \"update_source\";\n  }(km || (km = {}));\n  var Fm = {\n      sendVolumeLevel: 0,\n      sendBitrate: 0,\n      sendBytes: 0,\n      sendPackets: 0,\n      sendPacketsLost: 0,\n      currentPacketLossRate: 0\n    },\n    Bm = {\n      sendBytes: 0,\n      sendBitrate: 0,\n      sendPackets: 0,\n      sendPacketsLost: 0,\n      sendResolutionHeight: 0,\n      sendResolutionWidth: 0,\n      captureResolutionHeight: 0,\n      captureResolutionWidth: 0,\n      targetSendBitrate: 0,\n      totalDuration: 0,\n      totalFreezeTime: 0,\n      currentPacketLossRate: 0\n    },\n    Gm = {\n      transportDelay: 0,\n      end2EndDelay: 0,\n      receiveBitrate: 0,\n      receiveLevel: 0,\n      receiveBytes: 0,\n      receiveDelay: 0,\n      receivePackets: 0,\n      receivePacketsLost: 0,\n      totalDuration: 0,\n      totalFreezeTime: 0,\n      freezeRate: 0,\n      packetLossRate: 0,\n      currentPacketLossRate: 0,\n      publishDuration: -1\n    },\n    Wm = {\n      uplinkNetworkQuality: 0,\n      downlinkNetworkQuality: 0\n    },\n    Hm = {\n      transportDelay: 0,\n      end2EndDelay: 0,\n      receiveBitrate: 0,\n      receiveBytes: 0,\n      receiveDelay: 0,\n      receivePackets: 0,\n      receivePacketsLost: 0,\n      receiveResolutionHeight: 0,\n      receiveResolutionWidth: 0,\n      totalDuration: 0,\n      totalFreezeTime: 0,\n      freezeRate: 0,\n      packetLossRate: 0,\n      currentPacketLossRate: 0,\n      publishDuration: -1\n    };\n  var Km, Ym, qm;\n  !function (e) {\n    e.CONNECTED = \"websocket:connected\", e.RECONNECTING = \"websocket:reconnecting\", e.WILL_RECONNECT = \"websocket:will_reconnect\", e.CLOSED = \"websocket:closed\", e.FAILED = \"websocket:failed\", e.ON_MESSAGE = \"websocket:on_message\", e.REQUEST_NEW_URLS = \"websocket:request_new_urls\", e.RECONNECT_WAITTING_FINISH = \"websocket:reconnect_waitting_finish\", e.RECONNECT_CREATE_CONNECTION = \"websocket:reconnect_create_connection\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"websocket:on_token_privilege_did_expire\";\n  }(Km || (Km = {})), function (e) {\n    e.TRANSCODE = \"mix_streaming\", e.RAW = \"raw_streaming\", e.INJECT = \"inject_streaming\";\n  }(Ym || (Ym = {})), function (e) {\n    e[e.INJECT_STREAM_STATUS_START_SUCCESS = 0] = \"INJECT_STREAM_STATUS_START_SUCCESS\", e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS = 1] = \"INJECT_STREAM_STATUS_START_ALREADY_EXISTS\", e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED = 2] = \"INJECT_STREAM_STATUS_START_UNAUTHORIZED\", e[e.INJECT_STREAM_STATUS_START_TIMEOUT = 3] = \"INJECT_STREAM_STATUS_START_TIMEOUT\", e[e.INJECT_STREAM_STATUS_START_FAILED = 4] = \"INJECT_STREAM_STATUS_START_FAILED\", e[e.INJECT_STREAM_STATUS_STOP_SUCCESS = 5] = \"INJECT_STREAM_STATUS_STOP_SUCCESS\", e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND = 6] = \"INJECT_STREAM_STATUS_STOP_NOT_FOUND\", e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED = 7] = \"INJECT_STREAM_STATUS_STOP_UNAUTHORIZED\", e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT = 8] = \"INJECT_STREAM_STATUS_STOP_TIMEOUT\", e[e.INJECT_STREAM_STATUS_STOP_FAILED = 9] = \"INJECT_STREAM_STATUS_STOP_FAILED\", e[e.INJECT_STREAM_STATUS_BROKEN = 10] = \"INJECT_STREAM_STATUS_BROKEN\";\n  }(qm || (qm = {}));\n  var Jm = {\n      alpha: 1,\n      height: 640,\n      width: 360,\n      x: 0,\n      y: 0,\n      zOrder: 0,\n      audioChannel: 0\n    },\n    Xm = {\n      x: 0,\n      y: 0,\n      width: 160,\n      height: 160,\n      zOrder: 255,\n      alpha: 1\n    };\n  function zm(e, t) {\n    Qf(e.url, \"\".concat(t, \".url\"), 1, 1e3, !1), tm(e.x) || Xf(e.x, \"\".concat(t, \".x\"), 0, 1e4), tm(e.y) || Xf(e.y, \"\".concat(t, \".y\"), 0, 1e4), tm(e.width) || Xf(e.width, \"\".concat(t, \".width\"), 0, 1e4), tm(e.height) || Xf(e.height, \"\".concat(t, \".height\"), 0, 1e4), tm(e.zOrder) || Xf(e.zOrder, \"\".concat(t, \".zOrder\"), 0, 255), tm(e.alpha) || Xf(e.alpha, \"\".concat(t, \".alpha\"), 0, 1, !1);\n  }\n  var Qm = {\n      audioBitrate: 48,\n      audioChannels: 1,\n      audioSampleRate: 48e3,\n      backgroundColor: 0,\n      height: 360,\n      lowLatency: !1,\n      videoBitrate: 400,\n      videoCodecProfile: 100,\n      videoCodecType: 1,\n      videoFrameRate: 15,\n      videoGop: 30,\n      width: 640,\n      images: [],\n      userConfigs: [],\n      userConfigExtraInfo: \"\"\n    },\n    Zm = {\n      audioBitrate: 48,\n      audioChannels: 2,\n      audioVolume: 100,\n      audioSampleRate: 48e3,\n      height: 0,\n      width: 0,\n      videoBitrate: 400,\n      videoFramerate: 15,\n      videoGop: 30\n    };\n  var $m, eg, tg, ig, rg, ng, og, sg, ag, cg, dg, ug, lg, hg, pg, _g, Eg, fg;\n  function mg(e) {\n    if (!e.channelName) throw new vE(TE.INVALID_PARAMS, \"invalid channelName in info\");\n    if (\"number\" != typeof e.uid) throw new vE(TE.INVALID_PARAMS, \"invalid uid in info, uid must be a number\");\n    return e.token && Qf(e.token, \"info.token\", 1, 2047), em(e.uid), $f(e.channelName), !0;\n  }\n  function gg(e) {\n    return Jf(e, \"mediaSource\", [\"screen\", \"window\", \"application\"]), !0;\n  }\n  !function (e) {\n    e.WARNING = \"@live_uap-warning\", e.ERROR = \"@line_uap-error\", e.PUBLISH_STREAM_STATUS = \"@live_uap-publish-status\", e.INJECT_STREAM_STATUS = \"@live_uap-inject-status\", e.WORKER_STATUS = \"@live_uap-worker-status\", e.REQUEST_NEW_ADDRESS = \"@live_uap-request-address\";\n  }($m || ($m = {})), function (e) {\n    e.REQUEST_WORKER_MANAGER_LIST = \"@live_req_worker_manager\";\n  }(eg || (eg = {})), function (e) {\n    e[e.LIVE_STREAM_RESPONSE_SUCCEED = 200] = \"LIVE_STREAM_RESPONSE_SUCCEED\", e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM = 454] = \"LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM\", e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR = 450] = \"LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_BAD_STREAM = 451] = \"LIVE_STREAM_RESPONSE_BAD_STREAM\", e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR = 400] = \"LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST = 404] = \"LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST\", e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED = 456] = \"LIVE_STREAM_RESPONSE_NOT_AUTHORIZED\", e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE = 457] = \"LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE\", e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN = 429] = \"LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN\", e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH = 452] = \"LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH\", e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED = 453] = \"LIVE_STREAM_RESPONSE_NOT_SUPPORTED\", e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM = 455] = \"LIVE_STREAM_RESPONSE_MAX_STREAM_NUM\", e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR = 500] = \"LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WORKER_LOST = 501] = \"LIVE_STREAM_RESPONSE_WORKER_LOST\", e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT = 502] = \"LIVE_STREAM_RESPONSE_RESOURCE_LIMIT\", e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT = 503] = \"LIVE_STREAM_RESPONSE_WORKER_QUIT\", e[e.ERROR_FAIL_SEND_MESSAGE = 504] = \"ERROR_FAIL_SEND_MESSAGE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE = 30] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT = 31] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH = 32] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH\", e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN = 33] = \"PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN\";\n  }(tg || (tg = {})), function (e) {\n    e.CONNECT_FAILED = \"connect failed\", e.CONNECT_TIMEOUT = \"connect timeout\", e.WS_DISCONNECTED = \"websocket disconnected\", e.REQUEST_TIMEOUT = \"request timeout\", e.REQUEST_FAILED = \"request failed\", e.WAIT_STATUS_TIMEOUT = \"wait status timeout\", e.WAIT_STATUS_ERROR = \"wait status error\", e.BAD_STATE = \"bad state\", e.WS_ABORT = \"ws abort\", e.AP_REQUEST_TIMEOUT = \"AP request timeout\", e.AP_JSON_PARSE_ERROR = \"AP json parse error\", e.AP_REQUEST_ERROR = \"AP request error\", e.AP_REQUEST_ABORT = \"AP request abort\";\n  }(ig || (ig = {})), function (e) {\n    e[e.SetSdkProfile = 0] = \"SetSdkProfile\", e[e.SetSourceChannel = 1] = \"SetSourceChannel\", e[e.SetSourceUserId = 2] = \"SetSourceUserId\", e[e.SetDestChannel = 3] = \"SetDestChannel\", e[e.StartPacketTransfer = 4] = \"StartPacketTransfer\", e[e.StopPacketTransfer = 5] = \"StopPacketTransfer\", e[e.UpdateDestChannel = 6] = \"UpdateDestChannel\", e[e.Reconnect = 7] = \"Reconnect\", e[e.SetVideoProfile = 8] = \"SetVideoProfile\";\n  }(rg || (rg = {})), function (e) {\n    e.NETWORK_DISCONNECTED = \"NETWORK_DISCONNECTED\", e.NETWORK_CONNECTED = \"NETWORK_CONNECTED\", e.PACKET_JOINED_SRC_CHANNEL = \"PACKET_JOINED_SRC_CHANNEL\", e.PACKET_JOINED_DEST_CHANNEL = \"PACKET_JOINED_DEST_CHANNEL\", e.PACKET_SENT_TO_DEST_CHANNEL = \"PACKET_SENT_TO_DEST_CHANNEL\", e.PACKET_RECEIVED_VIDEO_FROM_SRC = \"PACKET_RECEIVED_VIDEO_FROM_SRC\", e.PACKET_RECEIVED_AUDIO_FROM_SRC = \"PACKET_RECEIVED_AUDIO_FROM_SRC\", e.PACKET_UPDATE_DEST_CHANNEL = \"PACKET_UPDATE_DEST_CHANNEL\", e.PACKET_UPDATE_DEST_CHANNEL_REFUSED = \"PACKET_UPDATE_DEST_CHANNEL_REFUSED\", e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE = \"PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE\";\n  }(ng || (ng = {})), function (e) {\n    e.RELAY_STATE_IDLE = \"RELAY_STATE_IDLE\", e.RELAY_STATE_CONNECTING = \"RELAY_STATE_CONNECTING\", e.RELAY_STATE_RUNNING = \"RELAY_STATE_RUNNING\", e.RELAY_STATE_FAILURE = \"RELAY_STATE_FAILURE\";\n  }(og || (og = {})), function (e) {\n    e.RELAY_OK = \"RELAY_OK\", e.SERVER_CONNECTION_LOST = \"SERVER_CONNECTION_LOST\", e.SRC_TOKEN_EXPIRED = \"SRC_TOKEN_EXPIRED\", e.DEST_TOKEN_EXPIRED = \"DEST_TOKEN_EXPIRED\";\n  }(sg || (sg = {})), function (e) {\n    e.High = \"high\", e.Low = \"low\", e.Audio = \"audio\", e.Screen = \"screen\", e.ScreenLow = \"screen_low\";\n  }(ag || (ag = {})), function (e) {\n    e.DISCONNECT = \"disconnect\", e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.NETWORK_QUALITY = \"network-quality\", e.STREAM_TYPE_CHANGE = \"stream-type-change\", e.IS_P2P_DISCONNECTED = \"is-p2p-dis\", e.DISCONNECT_P2P = \"dis-p2p\", e.REQUEST_NEW_GATEWAY_LIST = \"req-gate-url\", e.NEED_RENEW_SESSION = \"need-sid\", e.REQUEST_P2P_CONNECTION_PARAMS = \"request-p2p-connection-params\", e.JOIN_RESPONSE = \"join-response\", e.REQUEST_DC_CONNECTION_PARAMS = \"request-dc-connection-params\", e.RESET_CONNECTION_EVENTS = \"reset-connection-events\", e.DATACHANNEL_PRECONNECT = \"datachannel_preconnect\", e.DATACHANNEL_FAILBACK = \"datachannel_failback\";\n  }(cg || (cg = {})), function (e) {\n    e[e.Nothing = 0] = \"Nothing\", e[e.Audio = 1] = \"Audio\", e[e.LwoVideo = 2] = \"LwoVideo\", e[e.Video = 4] = \"Video\", e[e.Data = 8] = \"Data\";\n  }(dg || (dg = {})), function (e) {\n    e.NEED_RENEGOTIATE = \"@need_renegotiate\", e.NEED_REPLACE_TRACK = \"@need_replace_track\", e.NEED_CLOSE = \"@need_close\", e.NEED_ENABLE_TRACK = \"@need_enable_track\", e.NEED_DISABLE_TRACK = \"@need_disable_track\", e.NEED_SESSION_ID = \"@need_sid\", e.SET_OPTIMIZATION_MODE = \"@set_optimization_mode\", e.GET_STATS = \"@get_stats\", e.GET_LOW_VIDEO_TRACK = \"@get_low_video_track\", e.NEED_RESET_REMOTE_SDP = \"@need_reset_remote_sdp\", e.NEED_UPDATE_VIDEO_ENCODER = \"@need_update_video_encoder\", e.NEED_MUTE_TRACK = \"@need_mute_track\", e.NEED_UNMUTE_TRACK = \"@need_unmute_track\";\n  }(ug || (ug = {})), function (e) {\n    e.SCREEN_TRACK = \"screen_track\", e.LOW_STREAM = \"low_stream\";\n  }(lg || (lg = {})), function (e) {\n    e[e.HIGH_STREAM = 0] = \"HIGH_STREAM\", e[e.LOW_STREAM = 1] = \"LOW_STREAM\";\n  }(hg || (hg = {})), function (e) {\n    e[e.DISABLE = 0] = \"DISABLE\", e[e.LOW_STREAM = 1] = \"LOW_STREAM\", e[e.AUDIO_ONLY = 2] = \"AUDIO_ONLY\";\n  }(pg || (pg = {})), function (e) {\n    e.SOURCE_STATE_CHANGE = \"source-state-change\", e.TRACK_ENDED = \"track-ended\", e.BEAUTY_EFFECT_OVERLOAD = \"beauty-effect-overload\", e.VIDEO_ELEMENT_VISIBLE_STATUS = \"video-element-visible-status\", e.CLOSED = \"closed\";\n  }(_g || (_g = {})), function (e) {\n    e.FIRST_FRAME_DECODED = \"first-frame-decoded\", e.VIDEO_ELEMENT_VISIBLE_STATUS = \"video-element-visible-status\";\n  }(Eg || (Eg = {})), function (e) {\n    e.CHINA = \"CHINA\", e.ASIA = \"ASIA\", e.NORTH_AMERICA = \"NORTH_AMERICA\", e.EUROPE = \"EUROPE\", e.JAPAN = \"JAPAN\", e.INDIA = \"INDIA\", e.KOREA = \"KOREA\", e.HKMC = \"HKMC\", e.US = \"US\", e.OCEANIA = \"OCEANIA\", e.SOUTH_AMERICA = \"SOUTH_AMERICA\", e.AFRICA = \"AFRICA\", e.OVERSEA = \"OVERSEA\", e.GLOBAL = \"GLOBAL\";\n  }(fg || (fg = {}));\n  var Sg = [fg.AFRICA, fg.ASIA, fg.CHINA, fg.EUROPE, fg.GLOBAL, fg.INDIA, fg.JAPAN, fg.NORTH_AMERICA, fg.OCEANIA, fg.OVERSEA, fg.SOUTH_AMERICA];\n  var Tg;\n  !function (e) {\n    e.CHINA = \"CN\", e.ASIA = \"AS\", e.NORTH_AMERICA = \"NA\", e.EUROPE = \"EU\", e.JAPAN = \"JP\", e.INDIA = \"IN\", e.KOREA = \"KR\", e.HKMC = \"HK\", e.US = \"US\", e.OCEANIA = \"OC\", e.SOUTH_AMERICA = \"SA\", e.AFRICA = \"AF\", e.OVERSEA = \"OVERSEA\", e.GLOBAL = \"GLOBAL\";\n  }(Tg || (Tg = {}));\n  var vg = {\n    CHINA: {},\n    ASIA: {\n      CODE: Tg.ASIA,\n      WEBCS_DOMAIN: [\"ap-web-1-asia.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-asia.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-asia.agora.io\"],\n      CDS_AP: [\"cds-ap-web-asia.agora.io\", \"cds-ap-web-asia2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-asia.agora.io\", \"sua-ap-web-asia2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-asia.agora.io\", \"uap-ap-web-asia2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-asia.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-asia.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-asia.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    NORTH_AMERICA: {\n      CODE: Tg.NORTH_AMERICA,\n      WEBCS_DOMAIN: [\"ap-web-1-north-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-north-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-north-america.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-north-america.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-north-america.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    EUROPE: {\n      CODE: Tg.EUROPE,\n      WEBCS_DOMAIN: [\"ap-web-1-europe.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-europe.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-europe.agora.io\"],\n      CDS_AP: [\"cds-ap-web-europe.agora.io\", \"cds-ap-web-europe2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-europe.agora.io\", \"sua-ap-web-europe.agora.io\"],\n      UAP_AP: [\"uap-ap-web-europe.agora.io\", \"uap-ap-web-europe2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-europe.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-europe.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-europe.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"europe.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    JAPAN: {\n      CODE: Tg.JAPAN,\n      WEBCS_DOMAIN: [\"ap-web-1-japan.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-japan.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-japan.agora.io\"],\n      CDS_AP: [\"cds-ap-web-japan.agora.io\", \"cds-ap-web-japan2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-japan.agora.io\", \"sua-ap-web-japan2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-japan.agora.io\", \"\\tuap-ap-web-japan2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-japan.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-japan.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-japan.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"japan.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    INDIA: {\n      CODE: Tg.INDIA,\n      WEBCS_DOMAIN: [\"ap-web-1-india.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-india.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-india.agora.io\"],\n      CDS_AP: [\"cds-ap-web-india.agora.io\", \"cds-ap-web-india2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-india.agora.io\", \"sua-ap-web-india2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-india.agora.io\", \"uap-ap-web-india2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-india.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-india.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-india.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"india.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    KOREA: {\n      CODE: Tg.KOREA,\n      WEBCS_DOMAIN: [\"ap-web-1-korea.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-korea.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-korea.agora.io\"],\n      CDS_AP: [\"cds-ap-web-korea.agora.io\", \"cds-ap-web-korea2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-korea.agora.io\", \"sua-ap-web-korea2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-korea.agora.io\", \"uap-ap-web-korea2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-korea.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-korea.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-korea.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"korea.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    HKMC: {\n      CODE: Tg.HKMC,\n      WEBCS_DOMAIN: [\"ap-web-1-hkmc.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-hkmc.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-hkmc.agora.io\"],\n      CDS_AP: [\"cds-ap-web-hkmc.agora.io\", \"cds-ap-web-hkmc2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-hkmc.agora.io\", \"sua-ap-web-hkmc2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-hkmc.agora.io\", \"uap-ap-web-hkmc2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-hkmc.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-hkmc.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-hkmc.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"hkmc.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    US: {\n      CODE: Tg.US,\n      WEBCS_DOMAIN: [\"ap-web-1-us.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-us.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-us.agora.io\"],\n      CDS_AP: [\"cds-ap-web-us.agora.io\", \"cds-ap-web-us2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-us.agora.io\", \"sua-ap-web-us2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-us.agora.io\", \"uap-ap-web-us2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-us.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-us.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-us.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"us.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    OVERSEA: {\n      CODE: Tg.OVERSEA,\n      WEBCS_DOMAIN: [\"ap-web-1-oversea.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oversea.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oversea.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oversea.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oversea.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oversea.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-oversea.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oversea.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-oversea.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.agora.io\"]\n    },\n    GLOBAL: {\n      CODE: Tg.GLOBAL,\n      WEBCS_DOMAIN: [\"webrtc2-ap-web-1.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-ap-web-3.agora.io\"],\n      PROXY_CS: [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"],\n      CDS_AP: [\"cds-ap-web-1.agora.io\", \"cds-ap-web-3.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-1.agora.io\", \"sua-ap-web-3.agora.io\"],\n      UAP_AP: [\"uap-ap-web-1.agora.io\", \"uap-ap-web-3.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    OCEANIA: {\n      CODE: Tg.OCEANIA,\n      WEBCS_DOMAIN: [\"ap-web-1-oceania.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oceania.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oceania.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oceania.agora.io\", \"cds-ap-web-oceania2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oceania.agora.io\", \"sua-ap-web-oceania2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oceania.agora.io\", \"uap-ap-web-oceania2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-oceania.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oceania.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-oceania.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    SOUTH_AMERICA: {\n      CODE: Tg.SOUTH_AMERICA,\n      WEBCS_DOMAIN: [\"ap-web-1-south-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-south-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-south-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-south-america.agora.io\", \"cds-ap-web-south-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-south-america.agora.io\", \"sua-ap-web-south-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-south-america.agora.io\", \"uap-ap-web-south-america2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-south-america.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-south-america.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-south-america.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]\n    },\n    AFRICA: {\n      CODE: Tg.AFRICA,\n      WEBCS_DOMAIN: [\"ap-web-1-africa.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-africa.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-africa.agora.io\"],\n      CDS_AP: [\"cds-ap-web-africa.agora.io\", \"cds-ap-web-africa2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-africa.agora.io\", \"sua-ap-web-africa2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-africa.agora.io\", \"uap-ap-web-africa2.agora.io\"],\n      EVENT_REPORT_DOMAIN: [\"statscollector-1-africa.agora.io\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-africa.agora.io\"],\n      LOG_UPLOAD_SERVER: [\"logservice-south-africa.agora.io\"],\n      PROXY_SERVER_TYPE3: [\"africa.webrtc-cloud-proxy.sd-rtn.com\"]\n    }\n  };\n  var Rg, Ig, yg, Cg, Ag, Og, bg, wg, Ng, Dg, Pg, Lg, kg, Mg, Ug;\n  LE && (vg.CHINA = {\n    CODE: Tg.CHINA,\n    WEBCS_DOMAIN: [\"webrtc2-2.ap.sd-rtn.com\"],\n    WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-4.ap.sd-rtn.com\"],\n    PROXY_CS: [\"proxy-web.ap.sd-rtn.com\"],\n    CDS_AP: [\"cds-web-2.ap.sd-rtn.com\", \"cds-web-4.ap.sd-rtn.com\"],\n    ACCOUNT_REGISTER: [\"sua-web-2.ap.sd-rtn.com\", \"sua-web-4.ap.sd-rtn.com\"],\n    UAP_AP: [\"uap-web-2.ap.sd-rtn.com\", \"uap-web-4.ap.sd-rtn.com\"],\n    EVENT_REPORT_DOMAIN: [\"web-3.statscollector.sd-rtn.com\"],\n    EVENT_REPORT_BACKUP_DOMAIN: [\"web-4.statscollector.sd-rtn.com\"],\n    LOG_UPLOAD_SERVER: [\"logservice-china.agora.io\"],\n    PROXY_SERVER_TYPE3: [\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]\n  }), function (e) {\n    e.UPDATE_BITRATE_LIMIT = \"update_bitrate_limit\";\n  }(Rg || (Rg = {}));\n  var xg = /*#__PURE__*/function (_gE2) {\n    _inherits(xg, _gE2);\n    function xg(e, t) {\n      var _this32;\n      _classCallCheck(this, xg);\n      _this32 = _possibleConstructorReturn(this, _getPrototypeOf(xg).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onICEConnectionStateChange\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onConnectionStateChange\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onDTLSTransportStateChange\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onDTLSTransportError\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onICETransportStateChange\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onFirstAudioReceived\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onFirstVideoReceived\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onFirstAudioDecoded\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onFirstVideoDecoded\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onFirstVideoDecodedTimeout\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onSelectedLocalCandidateChanged\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this32)), \"onSelectedRemoteCandidateChanged\", void 0);\n      return _this32;\n    }\n    return xg;\n  }(gE);\n  !function (e) {\n    e.SEND = \"sendonly\", e.RECV = \"recvonly\", e.SENDRECV = \"sendrecv\", e.INACTIVE = \"inactive\";\n  }(Ig || (Ig = {})), function (e) {\n    e.VIDEO = \"video\", e.AUDIO = \"audio\";\n  }(yg || (yg = {})), function (e) {\n    e.LocalVideoTrack = \"videoTrack\", e.LocalAudioTrack = \"audioTrack\", e.LocalVideoLowTrack = \"videoLowTrack\";\n  }(Cg || (Cg = {})), function (e) {\n    e.New = \"new\", e.Connected = \"connected\", e.Reconnecting = \"reconnecting\", e.Disconnected = \"disconnected\";\n  }(Ag || (Ag = {})), function (e) {\n    e.StateChange = \"stateChange\", e.IceConnectionStateChange = \"iceConnectionStateChange\", e.RequestMuteLocal = \"requestMuteLocal\", e.RequestUnmuteLocal = \"requestUnmuteLocal\", e.RequestRePublish = \"requestRePublish\", e.RequestReSubscribe = \"requestReSubscribe\", e.RequestUploadStats = \"requestUploadStats\", e.MediaReconnectStart = \"MediaReconnectStart\", e.MediaReconnectEnd = \"MediaReconnectEnd\", e.NeedSignalRTT = \"NeedSignalRTT\", e.RequestRestartICE = \"RequestRestartIce\", e.PeerConnectionStateChange = \"PeerConnectionStateChange\", e.RequestReconnect = \"RequestReconnect\", e.RequestReconnectPC = \"RequestReconnectPC\", e.RequestUnpublishForReconnectPC = \"RequestUnpublishForReconnectPC\", e.P2PLost = \"P2PLost\", e.UpdateVideoEncoder = \"UpdateVideoEncoder\", e.ConnectionTypeChange = \"ConnectionTypeChange\", e.RequestLowStreamParameter = \"RequestLowStreamParameter\", e.QueryClientConnectionState = \"QueryClientConnectionState\";\n  }(Og || (Og = {})), function (e) {\n    e.ONLINE = \"ONLINE\", e.OFFLINE = \"OFFLINE\";\n  }(bg || (bg = {})), function (e) {\n    e.NETWORK_STATE_CHANGE = \"NETWORK_STATE_CHANGE\", e.ONLINE = \"ONLINE\", e.OFFLINE = \"OFFLINE\";\n  }(wg || (wg = {})), function (e) {\n    e.ON_TRACK = \"on_track\", e.ON_NODE = \"on_node\";\n  }(Ng || (Ng = {})), function (e) {\n    e.REQUEST_UPDATE_CONSTRAINTS = \"request_update_constraints\", e.REQUEST_CONSTRAINTS = \"request_constraints\";\n  }(Dg || (Dg = {})), function (e) {\n    e.CONNECTING = \"CONNECTING\", e.RECONNECTING = \"RECONNECTING\", e.CONNECTED = \"CONNECTED\", e.CLOSED = \"CLOSED\";\n  }(Pg || (Pg = {})), function (e) {\n    e[e.CONNECT_AP = 0] = \"CONNECT_AP\", e[e.AP_CONNECTED = 1] = \"AP_CONNECTED\", e[e.CONNECT_WORKER_MANAGER = 2] = \"CONNECT_WORKER_MANAGER\", e[e.WORKER_MANAGER_CONNECTED = 3] = \"WORKER_MANAGER_CONNECTED\", e[e.GET_WORKER_MANAGER_RESPONSE = 4] = \"GET_WORKER_MANAGER_RESPONSE\", e[e.CONNECT_WORKER = 5] = \"CONNECT_WORKER\", e[e.WORKER_CONNECTED = 6] = \"WORKER_CONNECTED\", e[e.CLOSED = 7] = \"CLOSED\";\n  }(Lg || (Lg = {})), function (e) {\n    e.CONNECTION_STATE_CHANGE = \"connection-state-change\", e.STATE_CHANGE = \"state-change\", e.INSPECT_RESULT = \"inspect-result\", e.CLIENT_LOCAL_VIDEO_TRACK = \"client-local-video-track\", e.REQUEST_NEW_WORKER_URL = \"request-new-worker-url\";\n  }(kg || (kg = {})), function (e) {\n    e.NETWORK_ERROR = \"NETWORK_ERROR\", e.SERVER_ERROR = \"SERVER_ERROR\", e.MULTI_IP = \"MULTI_IP\", e.TIMEOUT = \"TIMEOUT\", e.OFFLINE = \"OFFLINE\", e.LEAVE = \"LEAVE\", e.P2P_FAILED = \"P2P_FAILED\", e.FALLBACK = \"FALLBACK\";\n  }(Mg || (Mg = {})), function (e) {\n    e.CONNECTED = \"transmitter:connected\", e.RECONNECTING = \"transmitter:reconnecting\", e.WILL_RECONNECT = \"transmitter:will_reconnect\", e.CLOSED = \"transmitter:closed\", e.FAILED = \"transmitter:failed\", e.ON_MESSAGE = \"transmitter:on_message\", e.REQUEST_NEW_URLS = \"transmitter:request_new_urls\", e.RECONNECT_WAITTING_FINISH = \"transmitter:reconnect_waitting_finish\", e.RECONNECT_CREATE_CONNECTION = \"transmitter:reconnect_create_connection\", e.ON_TOKEN_PRIVILEGE_DID_EXPIRE = \"transmitter:on_token_privilege_did_expire\", e.TO_CONNECT_DATACHANNEL = \"transmitter:to_connect_datachannel\", e.FAILBACK = \"transmitter:failback\";\n  }(Ug || (Ug = {}));\n  var Vg = {\n    getDisplayMedia: !1,\n    getStreamFromExtension: !1,\n    supportUnifiedPlan: !1,\n    supportMinBitrate: !1,\n    supportSetRtpSenderParameters: !1,\n    supportDualStream: !0,\n    webAudioMediaStreamDest: !1,\n    supportReplaceTrack: !1,\n    supportWebGL: !1,\n    webAudioWithAEC: !1,\n    supportRequestFrame: !1,\n    supportShareAudio: !1,\n    supportDualStreamEncoding: !1,\n    supportDataChannel: !1\n  };\n  function jg() {\n    return Vg;\n  }\n  var Fg;\n  !function (e) {\n    e[e.CHOOSE_SERVER = 11] = \"CHOOSE_SERVER\", e[e.CLOUD_PROXY = 18] = \"CLOUD_PROXY\", e[e.CLOUD_PROXY_5 = 20] = \"CLOUD_PROXY_5\", e[e.CLOUD_PROXY_FALLBACK = 26] = \"CLOUD_PROXY_FALLBACK\";\n  }(Fg || (Fg = {}));\n  var Bg = k,\n    Gg = Array.isArray || function (e) {\n      return \"Array\" == Bg(e);\n    },\n    Wg = h,\n    Hg = Gg,\n    Kg = lc,\n    Yg = q,\n    qg = nt(\"species\"),\n    Jg = Wg.Array,\n    Xg = function Xg(e) {\n      var t;\n      return Hg(e) && (t = e.constructor, (Kg(t) && (t === Jg || Hg(t.prototype)) || Yg(t) && null === (t = t[qg])) && (t = void 0)), void 0 === t ? Jg : t;\n    },\n    zg = function zg(e, t) {\n      return new (Xg(e))(0 === t ? 0 : t);\n    },\n    Qg = Wt,\n    Zg = F,\n    $g = je,\n    eS = wi,\n    tS = zg,\n    iS = d([].push),\n    rS = function rS(e) {\n      var t = 1 == e,\n        i = 2 == e,\n        r = 3 == e,\n        n = 4 == e,\n        o = 6 == e,\n        s = 7 == e,\n        a = 5 == e || o;\n      return function (c, d, u, l) {\n        for (var h, p, _ = $g(c), E = Zg(_), f = Qg(d, u), m = eS(E), g = 0, S = l || tS, T = t ? S(c, m) : i || s ? S(c, 0) : void 0; m > g; g++) if ((a || g in E) && (p = f(h = E[g], g, _), e)) if (t) T[g] = p;else if (p) switch (e) {\n          case 3:\n            return !0;\n          case 5:\n            return h;\n          case 6:\n            return g;\n          case 2:\n            iS(T, h);\n        } else switch (e) {\n          case 4:\n            return !1;\n          case 7:\n            iS(T, h);\n        }\n        return o ? -1 : r || n ? n : T;\n      };\n    },\n    nS = {\n      forEach: rS(0),\n      map: rS(1),\n      filter: rS(2),\n      some: rS(3),\n      every: rS(4),\n      find: rS(5),\n      findIndex: rS(6),\n      filterReject: rS(7)\n    },\n    oS = nS.forEach,\n    sS = Vi(\"forEach\") ? [].forEach : function (e) {\n      return oS(this, e, arguments.length > 1 ? arguments[1] : void 0);\n    };\n  Ri({\n    target: \"Array\",\n    proto: !0,\n    forced: [].forEach != sS\n  }, {\n    forEach: sS\n  });\n  var aS = Hi(\"Array\").forEach,\n    cS = $n,\n    dS = Ge,\n    uS = u,\n    lS = aS,\n    hS = Array.prototype,\n    pS = {\n      DOMTokenList: !0,\n      NodeList: !0\n    },\n    _S = function _S(e) {\n      var t = e.forEach;\n      return e === hS || uS(hS, e) && t === hS.forEach || dS(pS, cS(e)) ? lS : t;\n    },\n    ES = je,\n    fS = hn;\n  Ri({\n    target: \"Object\",\n    stat: !0,\n    forced: i(function () {\n      fS(1);\n    })\n  }, {\n    keys: function keys(e) {\n      return fS(ES(e));\n    }\n  });\n  var mS = J.Object.keys,\n    gS = Xi,\n    SS = Ri,\n    TS = Gg,\n    vS = d([].reverse),\n    RS = [1, 2];\n  SS({\n    target: \"Array\",\n    proto: !0,\n    forced: String(RS) === String(RS.reverse())\n  }, {\n    reverse: function reverse() {\n      return TS(this) && (this.length = this.length), vS(this);\n    }\n  });\n  var IS = Hi(\"Array\").reverse,\n    yS = u,\n    CS = IS,\n    AS = Array.prototype,\n    OS = function OS(e) {\n      var t = e.reverse;\n      return e === AS || yS(AS, e) && t === AS.reverse ? CS : t;\n    },\n    bS = i,\n    wS = ae,\n    NS = nt(\"species\"),\n    DS = function DS(e) {\n      return wS >= 51 || !bS(function () {\n        var t = [];\n        return (t.constructor = {})[NS] = function () {\n          return {\n            foo: 1\n          };\n        }, 1 !== t[e](Boolean).foo;\n      });\n    },\n    PS = Ri,\n    LS = h,\n    kS = Gg,\n    MS = lc,\n    US = q,\n    xS = Mr,\n    VS = wi,\n    jS = K,\n    FS = nf,\n    BS = nt,\n    GS = Sc,\n    WS = DS(\"slice\"),\n    HS = BS(\"species\"),\n    KS = LS.Array,\n    YS = Math.max;\n  PS({\n    target: \"Array\",\n    proto: !0,\n    forced: !WS\n  }, {\n    slice: function slice(e, t) {\n      var i,\n        r,\n        n,\n        o = jS(this),\n        s = VS(o),\n        a = xS(e, s),\n        c = xS(void 0 === t ? s : t, s);\n      if (kS(o) && (i = o.constructor, (MS(i) && (i === KS || kS(i.prototype)) || US(i) && null === (i = i[HS])) && (i = void 0), i === KS || void 0 === i)) return GS(o, a, c);\n      for (r = new (void 0 === i ? KS : i)(YS(c - a, 0)), n = 0; a < c; a++, n++) a in o && FS(r, n, o[a]);\n      return r.length = n, r;\n    }\n  });\n  var qS = Hi(\"Array\").slice,\n    JS = u,\n    XS = qS,\n    zS = Array.prototype,\n    QS = function QS(e) {\n      var t = e.slice;\n      return e === zS || JS(zS, e) && t === zS.slice ? XS : t;\n    };\n  function ZS(e, t, i, r, n) {\n    var o,\n      s,\n      a,\n      c = {};\n    return _S(o = mS(r)).call(o, function (e) {\n      c[e] = r[e];\n    }), c.enumerable = !!c.enumerable, c.configurable = !!c.configurable, (\"value\" in c || c.initializer) && (c.writable = !0), c = gS(s = OS(a = QS(i).call(i)).call(a)).call(s, function (i, r) {\n      return r(e, t, i) || i;\n    }, c), n && void 0 !== c.initializer && (c.value = c.initializer ? c.initializer.call(n) : void 0, c.initializer = void 0), void 0 === c.initializer && (fp(e, t, c), c = null), c;\n  }\n  var $S = Hi(\"Array\").keys,\n    eT = $n,\n    tT = Ge,\n    iT = u,\n    rT = $S,\n    nT = Array.prototype,\n    oT = {\n      DOMTokenList: !0,\n      NodeList: !0\n    },\n    sT = function sT(e) {\n      var t = e.keys;\n      return e === nT || iT(nT, e) && t === nT.keys || tT(oT, eT(e)) ? rT : t;\n    };\n  function aT(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function cT(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? aT(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : aT(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var dT = 0,\n    uT = 0;\n  function lT(e, t, i, r) {\n    return new Cl(function (n, o) {\n      t.timeout = t.timeout || HE(\"HTTP_CONNECT_TIMEOUT\"), t.responseType = t.responseType || \"json\", t.data && !i ? (t.data = JSON.stringify(t.data), dT += PR(t.data)) : i && (t.data.size ? dT += t.data.size : t.data instanceof FormData ? dT += function (e) {\n        var t = 0;\n        /DingTalk/i.test(navigator.userAgent) && e.realFormData && (e = e.realFormData);\n        return e.forEach(function (e) {\n          t += \"string\" == typeof e ? PR(e) : e.size;\n        }), t + 138;\n      }(t.data) : dT += PR(JSON.stringify(t.data))), t.headers = t.headers || {}, t.headers[\"Content-Type\"] = t.headers[\"Content-Type\"] || \"application/json\", t.method = \"POST\", t.url = e, fE.request(t).then(function (e) {\n        \"string\" == typeof e.data ? uT += PR(e.data) : e.data instanceof ArrayBuffer || e.data instanceof Uint8Array ? uT += e.data.byteLength : uT += PR(JSON.stringify(e.data)), r && n({\n          data: e.data,\n          headers: e.headers\n        }), n(e.data);\n      }).catch(function (e) {\n        fE.isCancel(e) ? o(new vE(TE.OPERATION_ABORTED, \"cancel token canceled\")) : \"ECONNABORTED\" === e.code ? o(new vE(TE.NETWORK_TIMEOUT, e.message)) : e.response ? o(new vE(TE.NETWORK_RESPONSE_ERROR, e.response.status)) : o(new vE(TE.NETWORK_ERROR, e.message));\n      });\n    });\n  }\n  function hT(_x3, _x4) {\n    return _hT.apply(this, arguments);\n  }\n  function _hT() {\n    _hT = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee324(e, t) {\n      var i;\n      return _regeneratorRuntime().wrap(function _callee324$(_context327) {\n        while (1) switch (_context327.prev = _context327.next) {\n          case 0:\n            i = new Blob([t.data], {\n              type: \"buffer\"\n            });\n            _context327.next = 3;\n            return lT(e, cT(cT({}, t), {}, {\n              data: i,\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              }\n            }), !0);\n          case 3:\n            return _context327.abrupt(\"return\", _context327.sent);\n          case 4:\n          case \"end\":\n            return _context327.stop();\n        }\n      }, _callee324);\n    }));\n    return _hT.apply(this, arguments);\n  }\n  var pT = new ( /*#__PURE__*/function (_gE3) {\n    _inherits(_class3, _gE3);\n    _createClass(_class3, [{\n      key: \"networkState\",\n      set: function set(e) {\n        var _this34 = this;\n        NE.info(\"[\".concat(this._moduleName, \"]\") + \"network state changed, \" + this._networkState + \" -> \" + e), this.emit(wg.NETWORK_STATE_CHANGE, e, this._networkState), e === bg.ONLINE ? this.emit(wg.ONLINE) : e === bg.OFFLINE && (this.onlineWaiter = new Cl(function (e) {\n          _this34.once(wg.ONLINE, function () {\n            _this34.onlineWaiter = void 0, e(bg.ONLINE);\n          });\n        }), this.emit(wg.OFFLINE)), this._networkState = e;\n      },\n      get: function get() {\n        return this._networkState;\n      }\n    }]);\n    function _class3() {\n      var _this33;\n      _classCallCheck(this, _class3);\n      _this33 = _possibleConstructorReturn(this, _getPrototypeOf(_class3).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this33)), \"_moduleName\", \"network-indicator\"), mp(_assertThisInitialized(_assertThisInitialized(_this33)), \"_networkState\", bg.ONLINE), mp(_assertThisInitialized(_assertThisInitialized(_this33)), \"onlineWaiter\", void 0), window.addEventListener(\"online\", function () {\n        _this33.networkState = bg.ONLINE;\n      }), window.addEventListener(\"offline\", function () {\n        _this33.networkState = bg.OFFLINE;\n      });\n      return _this33;\n    }\n    return _class3;\n  }(gE))();\n  var _T = !1;\n  var ET = new ( /*#__PURE__*/function (_gE4) {\n    _inherits(_class4, _gE4);\n    function _class4() {\n      var _this35;\n      _classCallCheck(this, _class4);\n      _this35 = _possibleConstructorReturn(this, _getPrototypeOf(_class4).apply(this, arguments)), mp(_assertThisInitialized(_assertThisInitialized(_this35)), \"onAutoplayFailed\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this35)), \"onAudioAutoplayFailed\", void 0);\n      return _this35;\n    }\n    return _class4;\n  }(gE))();\n  function fT() {\n    if (Bh(), !_T) {\n      var _e19 = function _e19(t) {\n        t.preventDefault(), _T = !1, dp() ? document.body.removeEventListener(\"click\", _e19, !0) : (document.body.removeEventListener(\"touchstart\", _e19, !0), document.body.removeEventListener(\"mousedown\", _e19, !0));\n      };\n      _T = !0, dp() ? document.body.addEventListener(\"click\", _e19, !0) : (document.body.addEventListener(\"touchstart\", _e19, !0), document.body.addEventListener(\"mousedown\", _e19, !0)), NE.info(\"detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web\"), ET.onAutoplayFailed ? ET.onAutoplayFailed() : ET.onAudioAutoplayFailed ? NE.warning(\"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\\n\\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\") : NE.warning(\"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\\n\\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\\n\\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .\"), ET.emit(\"autoplay-failed\");\n    }\n  }\n  function mT(e) {\n    return new TextEncoder().encode(e);\n  }\n  var gT = function gT(e, t) {\n    var i = new Uint8Array(e.byteLength + t.byteLength);\n    return i.set(new Uint8Array(e), 0), i.set(new Uint8Array(t), e.byteLength), i;\n  };\n  var ST = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e) {\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.t0 = function (e, t) {\n              var i = \"\";\n              return new Uint8Array(e).forEach(function (e) {\n                i += e.toString(t).padStart(2, \"0\");\n              }), i;\n            };\n            _context5.next = 3;\n            return crypto.subtle.digest(\"SHA-256\", mT(e));\n          case 3:\n            _context5.t1 = _context5.sent;\n            return _context5.abrupt(\"return\", (0, _context5.t0)(_context5.t1, 16));\n          case 5:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }));\n    return function ST(_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  function TT(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function vT(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? TT(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : TT(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  function RT() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n    return function (t, i, r) {\n      var n = r.value;\n      if (\"function\" == typeof n) {\n        var _o4 = e.className || t.__className__ || (\"AgoraRTCClient\" === t.constructor.name ? \"Client\" : t.constructor.name);\n        r.value = function () {\n          for (var t = arguments.length, r = new Array(t), s = 0; s < t; s++) r[s] = arguments[s];\n          var a = r;\n          if (e.argsMap) try {\n            a = e.argsMap.apply(e, [this].concat(r));\n          } catch (e) {\n            NE.warning(e), a = [];\n          }\n          try {\n            JSON.stringify(a);\n          } catch (e) {\n            NE.warning(\"arguments for method \".concat(_o4, \".\").concat(i, \" not serializable for apiInvoke.\")), a = [];\n          }\n          var c = (e.report || IT).reportApiInvoke(this._sessionId || null, {\n            name: \"\".concat(_o4, \".\").concat(i),\n            options: a,\n            tag: fm.TRACER,\n            reportResult: e.reportResult\n          }, e.throttleTime);\n          try {\n            var _t25 = n.apply(this, r);\n            return _t25 instanceof Cl ? _t25.then(function (t) {\n              return c.onSuccess(e.reportResult && t), t;\n            }).catch(function (e) {\n              throw c.onError(e), e;\n            }) : (c.onSuccess(e.reportResult && _t25), _t25);\n          } catch (e) {\n            throw c.onError(e), e;\n          }\n        };\n      }\n      return r;\n    };\n  }\n  var IT = new ( /*#__PURE__*/function () {\n    function _class5() {\n      var _this36 = this;\n      _classCallCheck(this, _class5);\n      mp(this, \"baseInfoMap\", new Map()), mp(this, \"proxyServer\", void 0), mp(this, \"clientList\", ZE), mp(this, \"eventUploadTimer\", void 0), mp(this, \"setSessionIdTimer\", void 0), mp(this, \"url\", void 0), mp(this, \"backupUrl\", void 0), mp(this, \"_appId\", void 0), mp(this, \"keyEventUploadPendingItems\", []), mp(this, \"normalEventUploadPendingItems\", []), mp(this, \"apiInvokeUploadPendingItems\", []), mp(this, \"apiInvokeCount\", 0), mp(this, \"ltsList\", []), mp(this, \"lastSendNormalEventTime\", Date.now()), mp(this, \"customReportCounterTimer\", void 0), mp(this, \"customReportCount\", 0), mp(this, \"extApiInvoke\", /*#__PURE__*/function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(e) {\n          var _iterator, _step, _t26, _e20;\n          return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                _iterator = _createForOfIteratorHelper(e);\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    _t26 = _step.value;\n                    _e20 = vT(vT({}, _t26), {}, {\n                      sid: null,\n                      invokeId: ++_this36.apiInvokeCount,\n                      tag: fm.TRACER\n                    });\n                    _this36.sendApiInvoke(_e20);\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }, _callee6);\n        }));\n        return function (_x6) {\n          return _ref6.apply(this, arguments);\n        };\n      }()), this.eventUploadTimer = window.setInterval(this.doSend.bind(this), HE(\"EVENT_REPORT_SEND_INTERVAL\")), this.setSessionIdTimer = window.setInterval(this.appendSessionId.bind(this), HE(\"EVENT_REPORT_SEND_INTERVAL\"));\n    }\n    _createClass(_class5, [{\n      key: \"adjustSessionStartTime\",\n      value: function adjustSessionStartTime(e) {\n        if (!this.baseInfoMap.has(e) && !this.baseInfoMap.get(e)) return void NE.error(\"adjust session \".concat(e, \" start time, sid is not exist or info is undefined\"));\n        var t = this.baseInfoMap.get(e),\n          i = Date.now(),\n          r = t.startTime;\n        t.startTime = i, NE.debug(\"rewrite session \".concat(e, \" startTime: \").concat(i, \" , \").concat(i - r, \"ms\")), this.baseInfoMap.set(e, t);\n      }\n    }, {\n      key: \"setAppId\",\n      value: function setAppId(e) {\n        this._appId = e;\n      }\n    }, {\n      key: \"reportApiInvoke\",\n      value: function reportApiInvoke(e, t, i) {\n        var _this37 = this;\n        t.timeout = t.timeout || 6e4, t.reportResult = void 0 === t.reportResult || t.reportResult;\n        var r = Date.now();\n        this.apiInvokeCount += 1;\n        var n = this.apiInvokeCount,\n          o = function o() {\n            return {\n              tag: t.tag,\n              invokeId: n,\n              sid: e,\n              name: t.name,\n              apiInvokeTime: r,\n              options: t.options,\n              states: t.states || null\n            };\n          },\n          s = !!HE(\"SHOW_REPORT_INVOKER_LOG\");\n        s && NE.info(\"\".concat(t.name, \" start\"), t.options);\n        var a = !1;\n        LR(t.timeout).then(function () {\n          a || (_this37.sendApiInvoke(vT(vT({}, o()), {}, {\n            error: TE.API_INVOKE_TIMEOUT,\n            success: !1\n          })), NE.debug(\"\".concat(t.name, \" timeout\")));\n        });\n        var c = new vE(TE.UNEXPECTED_ERROR, \"\".concat(t.name, \": this api invoke is end\"));\n        return {\n          onSuccess: function onSuccess(e) {\n            var r = function r() {\n              if (a) throw c;\n              return a = !0, _this37.sendApiInvoke(vT(vT({}, o()), {}, {\n                success: !0\n              }, t.reportResult && {\n                result: e\n              })), s && NE.info(\"\".concat(t.name, \" onSuccess\")), e;\n            };\n            return i ? $R(r, t.name + \"Success\", i, function () {\n              return a = !0;\n            }) : r();\n          },\n          onError: function onError(e) {\n            var r = function r() {\n              if (a) throw e;\n              a = !0, _this37.sendApiInvoke(vT(vT({}, o()), {}, {\n                success: !1,\n                error: e\n              })), s && NE.info(\"\".concat(t.name, \" onFailure\"), e.toString());\n            };\n            return i ? $R(r, t.name + \"Error\", i, function () {\n              return a = !0;\n            }) : r();\n          }\n        };\n      }\n    }, {\n      key: \"sessionInit\",\n      value: function sessionInit(e, t) {\n        if (this.baseInfoMap.has(e)) return;\n        var i = Date.now(),\n          r = this.createBaseInfo(e, i);\n        r.cname = t.cname;\n        var n = Object.assign({}, {\n            willUploadConsoleLog: HE(\"UPLOAD_LOG\"),\n            maxTouchPoints: navigator.maxTouchPoints,\n            areaVersion: LE ? \"global\" : \"oversea\",\n            areas: HE(\"AREAS\") && HE(\"AREAS\").join(\",\")\n          }, t.extend),\n          o = Date.now(),\n          s = vT(vT({}, r), {}, {\n            eventType: lm.SESSION_INIT,\n            appid: t.appid,\n            browser: navigator.userAgent,\n            build: DE,\n            lts: o,\n            elapse: o - i,\n            extend: JSON.stringify(n),\n            mode: t.mode,\n            process: HE(\"PROCESS_ID\"),\n            appType: HE(\"APP_TYPE\"),\n            success: !0,\n            version: PE\n          });\n        this.send({\n          type: hm.SESSION,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"joinChooseServer\",\n      value: function joinChooseServer(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            eventType: lm.JOIN_CHOOSE_SERVER,\n            lts: n,\n            eventElapse: n - t.lts,\n            chooseServerAddr: t.csAddr,\n            errorCode: t.ec,\n            elapse: n - i.startTime,\n            success: t.succ,\n            chooseServerAddrList: JSON.stringify(t.serverList),\n            uid: t.uid ? parseInt(t.uid) : null,\n            cid: t.cid ? parseInt(t.cid) : null,\n            chooseServerIp: t.csIp || \"\",\n            opid: t.opid,\n            unilbsServerIds: t.unilbsServerIds,\n            extend: t.extend || void 0,\n            isHttp3: t.isHttp3\n          });\n        this.send({\n          type: hm.JOIN_CHOOSE_SERVER,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"reqUserAccount\",\n      value: function reqUserAccount(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            eventType: lm.REQ_USER_ACCOUNT,\n            lts: n,\n            success: t.success,\n            serverAddress: t.serverAddr,\n            stringUid: t.stringUid,\n            uid: t.uid,\n            errorCode: t.errorCode,\n            elapse: n - i.startTime,\n            eventElapse: n - t.lts,\n            extend: JSON.stringify(t.extend)\n          });\n        this.send({\n          type: hm.REQ_USER_ACCOUNT,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"joinGateway\",\n      value: function joinGateway(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info;\n        t.vid && (r.vid = t.vid), r.uid = t.uid, r.cid = t.cid;\n        var n = Date.now(),\n          o = t.firstSuccess,\n          s = t.avoidJoinStartTime,\n          a = t.isProxy,\n          c = t.addr,\n          d = n - (o && s ? s : i.startTime),\n          u = vT(vT({}, r), {}, {\n            eventType: lm.JOIN_GATEWAY,\n            lts: n,\n            gatewayAddr: t.addr,\n            success: t.succ,\n            errorCode: t.ec,\n            elapse: d,\n            eventElapse: n - t.lts,\n            firstSuccess: o,\n            signalChannel: t.signalChannel\n          }),\n          l = u.success ? 1 : 0;\n        if (t.succ && (i.lastJoinSuccessTime = n), o) this.send({\n          type: hm.JOIN_GATEWAY,\n          data: u\n        }, !0);else {\n          var _e21;\n          if (c) {\n            if (a) {\n              var _t27 = c.match(/h=(\\d{1,3}-){3}\\d{1,3}/g),\n                _i19 = c.match(/p=[0-9]{1,6}/g);\n              _e21 = {\n                isSuccess: l,\n                gatewayIp: _t27 && _t27.length ? _t27[0].split(\"=\")[1].replace(/-/g, \".\") : \"\",\n                port: _i19 && _i19.length ? _i19[0].split(\"=\")[1] : \"\",\n                isProxy: a ? 1 : 0\n              };\n            } else {\n              var _t28 = c.match(/wss:\\/\\/(\\d{1,3}-){3}\\d{1,3}/g),\n                _i20 = c.match(/:[0-9]{1,6}/g);\n              _e21 = {\n                isSuccess: l,\n                gatewayIp: _t28 && _t28.length ? _t28[0].split(\"//\")[1].replace(/-/g, \".\") : \"\",\n                port: _i20 && _i20.length ? _i20[0].split(\":\")[1] : \"\",\n                isProxy: a ? 1 : 0\n              };\n            }\n          } else _e21 = {\n            isSuccess: l,\n            gatewayIp: \"\",\n            port: \"\",\n            isProxy: a ? 1 : 0\n          };\n          delete u.success, delete u.eventType, delete u.firstSuccess, u.vid = Number(u.vid);\n          var _t29 = Object.assign({}, u, _e21, {\n            eventType: lm.REJOIN_GATEWAY\n          });\n          this.send({\n            type: hm.RE_JOIN_GATEWAY,\n            data: _t29\n          }, !0);\n        }\n      }\n    }, {\n      key: \"joinChannelTimeout\",\n      value: function joinChannelTimeout(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = Date.now(),\n          n = vT(vT({}, i.info), {}, {\n            lts: r,\n            timeout: t,\n            elapse: r - i.startTime\n          });\n        this.send({\n          type: hm.JOIN_CHANNEL_TIMEOUT,\n          data: n\n        }, !0);\n      }\n    }, {\n      key: \"publish\",\n      value: function publish(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            eventType: lm.PUBLISH,\n            lts: n,\n            eventElapse: t.eventElapse,\n            elapse: n - i.startTime,\n            success: t.succ,\n            errorCode: t.ec,\n            videoName: t.videoName,\n            audioName: t.audioName,\n            screenName: t.screenName,\n            screenshare: t.screenshare,\n            audio: t.audio,\n            video: t.video,\n            p2pid: t.p2pid,\n            publishRequestid: t.publishRequestid\n          });\n        this.send({\n          type: hm.PUBLISH,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(e, t, i) {\n        var r = this.baseInfoMap.get(e);\n        if (!r) return;\n        var n = r.info,\n          o = Date.now(),\n          s = vT(vT({}, n), {}, {\n            eventType: lm.SUBSCRIBE,\n            lts: o,\n            eventElapse: t.eventElapse,\n            elapse: o - r.startTime,\n            success: t.succ,\n            errorCode: t.ec,\n            video: t.video,\n            audio: t.audio,\n            subscribeRequestid: t.subscribeRequestid,\n            p2pid: t.p2pid\n          }, i && {\n            extend: JSON.stringify({\n              isMassSubscribe: !0\n            })\n          });\n        \"string\" == typeof t.peerid ? s.peerSuid = t.peerid : s.peer = t.peerid, this.send({\n          type: hm.SUBSCRIBE,\n          data: s\n        }, !0);\n      }\n    }, {\n      key: \"wsCompressorInit\",\n      value: function wsCompressorInit(e) {\n        var t;\n        var i = _toConsumableArray(sT(t = this.baseInfoMap).call(t)),\n          r = i.length ? i[0] : \"UnableToGetSid\",\n          n = this.baseInfoMap.get(r);\n        if (!n) return;\n        var o = n.info,\n          s = Date.now(),\n          a = vT(vT({}, o), {}, {\n            eventType: lm.WS_COMPRESSOR_INIT,\n            lts: s,\n            eventElapse: e.eventElapse,\n            elapse: s - n.startTime,\n            status: e.status ? 1 : 2\n          });\n        this.send({\n          type: hm.WS_COMPRESSOR_INIT,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"firstRemoteVideoDecode\",\n      value: function firstRemoteVideoDecode(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var o = n.info,\n          s = Date.now(),\n          a = vT(vT(vT({}, o), r), {}, {\n            elapse: s - n.startTime,\n            eventType: t,\n            lts: s,\n            firstDecodeFrame: Math.max(s - n.startTime, 0),\n            apEnd: Math.max(r.apEnd - n.startTime, 0),\n            apStart: Math.max(r.apStart - n.startTime, 0),\n            joinGwEnd: Math.max(r.joinGwEnd - n.startTime, 0),\n            joinGwStart: Math.max(r.joinGwStart - n.startTime, 0),\n            pcEnd: Math.max(r.pcEnd - n.startTime, 0),\n            pcStart: Math.max(r.pcStart - n.startTime, 0),\n            subscriberEnd: Math.max(r.subscriberEnd - n.startTime, 0),\n            subscriberStart: Math.max(r.subscriberStart - n.startTime, 0),\n            videoAddNotify: Math.max(r.videoAddNotify - n.startTime, 0)\n          });\n        this.send({\n          type: i,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"firstRemoteFrame\",\n      value: function firstRemoteFrame(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var o = n.info,\n          s = Date.now(),\n          a = vT(vT(vT({}, o), r), {}, {\n            elapse: s - n.startTime,\n            eventType: t,\n            lts: s\n          });\n        this.send({\n          type: i,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"onGatewayStream\",\n      value: function onGatewayStream(e, t, i, r) {\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var o = n.info,\n          s = Date.now(),\n          a = vT(vT(vT({}, o), r), {}, {\n            eventType: t,\n            lts: s\n          });\n        this.send({\n          type: i,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"streamSwitch\",\n      value: function streamSwitch(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            eventType: lm.STREAM_SWITCH,\n            lts: n,\n            isDual: t.isdual,\n            elapse: n - i.startTime,\n            success: t.succ\n          });\n        this.send({\n          type: hm.STREAM_SWITCH,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"requestProxyAppCenter\",\n      value: function requestProxyAppCenter(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            eventType: lm.REQUEST_PROXY_APPCENTER,\n            lts: n,\n            eventElapse: n - t.lts,\n            elapse: n - i.startTime,\n            APAddr: t.APAddr,\n            workerManagerList: t.workerManagerList,\n            response: t.response,\n            errorCode: t.ec,\n            success: t.succ\n          });\n        this.send({\n          type: hm.REQUEST_PROXY_APPCENTER,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"requestProxyWorkerManager\",\n      value: function requestProxyWorkerManager(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            eventType: lm.REQUEST_PROXY_WORKER_MANAGER,\n            lts: n,\n            eventElapse: n - t.lts,\n            elapse: n - i.startTime,\n            workerManagerAddr: t.workerManagerAddr,\n            response: t.response,\n            errorCode: t.ec,\n            success: t.succ\n          });\n        this.send({\n          type: hm.REQUEST_PROXY_WORKER_MANAGER,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e) {\n        this.proxyServer = e, e ? NE.debug(\"reportProxyServerurl: \".concat(e)) : NE.debug(\"disable reportProxyServerurl: \".concat(e));\n      }\n    }, {\n      key: \"peerPublishStatus\",\n      value: function peerPublishStatus(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT({}, r), {}, {\n            subscribeElapse: t.subscribeElapse,\n            peer: t.peer,\n            peerPublishDuration: Math.max(t.audioPublishDuration, t.videoPublishDuration),\n            audiotag: t.audioPublishDuration > 0 ? 1 : -1,\n            videotag: t.videoPublishDuration > 0 ? 1 : -1,\n            lts: n,\n            elapse: n - i.startTime,\n            joinChannelSuccessElapse: n - (i.lastJoinSuccessTime || n),\n            peerPublishDurationVideo: t.videoPublishDuration,\n            peerPublishDurationAudio: t.audioPublishDuration\n          });\n        this.send({\n          type: hm.PEER_PUBLISH_STATUS,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"workerEvent\",\n      value: function workerEvent(e, t) {\n        var _this38 = this;\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now();\n        (function (e, t, i) {\n          var r = e[t];\n          if (!r || \"string\" != typeof r) return [e];\n          e[t] = \"\";\n          var n = PR(JSON.stringify(e));\n          var o = 0;\n          var s = [];\n          var a = 0;\n          for (var _c3 = 0; _c3 < r.length; _c3++) a += r.charCodeAt(_c3) <= 127 ? 1 : 3, a <= i - n || (s[s.length] = DR(DR({}, e), {}, _defineProperty({}, t, r.substring(o, _c3))), o = _c3, a = r.charCodeAt(_c3) <= 127 ? 1 : 3);\n          o !== r.length - 1 && (s[s.length] = DR(DR({}, e), {}, _defineProperty({}, t, r.substring(o))));\n          return s;\n        })(vT(vT(vT({}, r), t), {}, {\n          elapse: n - i.startTime,\n          lts: n,\n          productType: \"WebRTC\"\n        }), \"payload\", 1300).forEach(function (e) {\n          return _this38.send({\n            type: hm.WORKER_EVENT,\n            data: e\n          }, !0);\n        });\n      }\n    }, {\n      key: \"apworkerEvent\",\n      value: function apworkerEvent(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT(vT({}, r), t), {}, {\n            elapse: n - i.startTime,\n            lts: n\n          });\n        this.send({\n          type: hm.AP_WORKER_EVENT,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"joinWebProxyAP\",\n      value: function joinWebProxyAP(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT(vT({}, r), t), {}, {\n            elapse: n - i.startTime,\n            lts: n,\n            extend: t.extend || void 0\n          });\n        this.send({\n          type: hm.JOIN_WEB_PROXY_AP,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"WebSocketQuit\",\n      value: function WebSocketQuit(e, t) {\n        var i = this.baseInfoMap.get(e);\n        if (!i) return;\n        var r = i.info,\n          n = Date.now(),\n          o = vT(vT(vT({}, r), t), {}, {\n            elapse: n - i.startTime,\n            lts: n\n          });\n        this.send({\n          type: hm.WEBSOCKET_QUIT,\n          data: o\n        }, !0);\n      }\n    }, {\n      key: \"sendCustomReportMessage\",\n      value: function () {\n        var _sendCustomReportMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(e, t) {\n          var _this39 = this;\n          var i;\n          return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n            while (1) switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(this.customReportCount += t.length, this.customReportCount > HE(\"CUSTOM_REPORT_LIMIT\"))) {\n                  _context7.next = 2;\n                  break;\n                }\n                throw new vE(TE.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);\n              case 2:\n                this.customReportCounterTimer || (this.customReportCounterTimer = window.setInterval(function () {\n                  _this39.customReportCount = 0;\n                }, 5e3));\n                i = t.map(function (t) {\n                  return {\n                    type: hm.USER_ANALYTICS,\n                    data: vT({\n                      sid: e\n                    }, t)\n                  };\n                });\n                _context7.prev = 4;\n                if (!HE(\"NEW_REPORT_SERVER\")) {\n                  _context7.next = 10;\n                  break;\n                }\n                _context7.next = 8;\n                return this.postDataToStatsCollector2(i);\n              case 8:\n                _context7.next = 12;\n                break;\n              case 10:\n                _context7.next = 12;\n                return this.postDataToStatsCollector(i);\n              case 12:\n                _context7.next = 17;\n                break;\n              case 14:\n                _context7.prev = 14;\n                _context7.t0 = _context7[\"catch\"](4);\n                throw NE.error(\"send custom report message failed\", _context7.t0.toString()), new vE(TE.CUSTOM_REPORT_SEND_FAILED, _context7.t0.message);\n              case 17:\n              case \"end\":\n                return _context7.stop();\n            }\n          }, _callee7, this, [[4, 14]]);\n        }));\n        function sendCustomReportMessage(_x7, _x8) {\n          return _sendCustomReportMessage.apply(this, arguments);\n        }\n        return sendCustomReportMessage;\n      }()\n    }, {\n      key: \"autoplayFailed\",\n      value: function autoplayFailed(e, t, i, r) {\n        if (!e) return;\n        var n = this.baseInfoMap.get(e);\n        if (!n) return;\n        var o = n.info,\n          s = Date.now(),\n          a = vT(vT({}, o), {}, {\n            vid: void 0 === o.vid ? 0 : Number(o.vid),\n            lts: s,\n            elapse: s - n.startTime,\n            cbRegistered: ET.onAutoplayFailed || ET.onAudioAutoplayFailed ? 1 : -1,\n            errorMsg: i,\n            mediaType: t,\n            trackId: r,\n            extend: void 0\n          });\n        this.send({\n          type: hm.AUTOPLAY_FAILED,\n          data: a\n        }, !0);\n      }\n    }, {\n      key: \"sendApiInvoke\",\n      value: function sendApiInvoke(e) {\n        var t = HE(\"NOT_REPORT_EVENT\");\n        if (e.tag && t.includes && t.includes(e.tag)) return !1;\n        if (null === e.sid) return this.apiInvokeUploadPendingItems.push(e), !1;\n        var i = this.baseInfoMap.get(e.sid);\n        if (!i) return this.apiInvokeUploadPendingItems.push(e), !1;\n        var _i$info = i.info,\n          r = _i$info.cname,\n          n = _i$info.uid,\n          o = _i$info.cid;\n        e.lts = e.lts || Date.now();\n        var s = void 0;\n        if (e.error) if (e.error instanceof vE) {\n          var _e$error = e.error,\n            _t30 = _e$error.code,\n            _i21 = _e$error.message;\n          s = _t30 || _i21 || e.error.toString();\n        } else s = e.error.toString();\n        var a = {\n          invokeId: e.invokeId,\n          sid: e.sid,\n          cname: r,\n          cid: o,\n          uid: n,\n          lts: e.lts,\n          success: e.success,\n          elapse: e.lts - i.startTime,\n          execElapse: e.lts - e.apiInvokeTime,\n          apiName: e.name,\n          options: e.options ? JSON.stringify(e.options) : void 0,\n          execStates: e.states ? JSON.stringify(e.states) : void 0,\n          execResult: e.result ? JSON.stringify(e.result) : void 0,\n          errorCode: e.error ? s : void 0,\n          errorMsg: e.error ? JSON.stringify(e.error) : void 0\n        };\n        return this.send({\n          type: hm.API_INVOKE,\n          data: a\n        }, !1), !0;\n      }\n    }, {\n      key: \"appendSessionId\",\n      value: function appendSessionId() {\n        var _this40 = this;\n        this.clientList.forEach(function (e) {\n          if (e._sessionId) {\n            var _t31 = _this40.apiInvokeUploadPendingItems.length;\n            for (var _i22 = 0; _i22 < _t31; _i22++) {\n              var _t32 = _this40.apiInvokeUploadPendingItems.shift();\n              _t32 && (_t32.sid = e._sessionId, _this40.sendApiInvoke(Object.assign({}, _t32)));\n            }\n          }\n        });\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        if (t) return this.keyEventUploadPendingItems.push(e), void this.sendItems(this.keyEventUploadPendingItems, !0);\n        this.normalEventUploadPendingItems.push(e), this.normalEventUploadPendingItems.length > HE(\"NORMAL_EVENT_QUEUE_CAPACITY\") && this.normalEventUploadPendingItems.splice(0, 1), this.normalEventUploadPendingItems.length >= 10 && this.sendItems(this.normalEventUploadPendingItems, !1);\n      }\n    }, {\n      key: \"doSend\",\n      value: function doSend() {\n        this.keyEventUploadPendingItems.length > 0 && this.sendItems(this.keyEventUploadPendingItems, !0), this.normalEventUploadPendingItems.length > 0 && Date.now() - this.lastSendNormalEventTime >= 5e3 && this.sendItems(this.normalEventUploadPendingItems, !1);\n      }\n    }, {\n      key: \"sendItems\",\n      value: function sendItems(e, t) {\n        var _this41 = this;\n        var i = [],\n          r = [];\n        for (; e.length;) {\n          var _t33 = e.shift();\n          i.length < 20 ? i.push(_t33) : r.push(_t33);\n        }\n        e.push.apply(e, r);\n        for (var _i23 = 0, _arr = [].concat(i); _i23 < _arr.length; _i23++) {\n          var _e22 = _arr[_i23];\n          var n;\n          if (-1 !== this.ltsList.indexOf(_e22.data.lts)) _e22.data.lts = this.ltsList[this.ltsList.length - 1] + 1, this.ltsList.push(_e22.data.lts);else this.ltsList.push(_e22.data.lts), Yf(n = this.ltsList).call(n, function (e, t) {\n            return e - t;\n          });\n        }\n        t || (this.lastSendNormalEventTime = Date.now());\n        return HE(\"ENABLE_EVENT_REPORT\") ? (i.length && (HE(\"NEW_REPORT_SERVER\") ? this.postDataToStatsCollector2(i) : this.postDataToStatsCollector(i)).catch(function (e) {\n          return function (i) {\n            HE(\"EVENT_REPORT_RETRY\") && (t ? _this41.keyEventUploadPendingItems = _this41.keyEventUploadPendingItems.concat(e) : (_this41.normalEventUploadPendingItems = _this41.normalEventUploadPendingItems.concat(e), _this41.normalEventUploadPendingItems.length > HE(\"NORMAL_EVENT_QUEUE_CAPACITY\") && (_this41.normalEventUploadPendingItems.splice(0, _this41.normalEventUploadPendingItems.length - HE(\"NORMAL_EVENT_QUEUE_CAPACITY\")), NE.warning(\"report: drop normal events\"))));\n          };\n        }(i)), e) : e;\n      }\n    }, {\n      key: \"postDataToStatsCollector2\",\n      value: function () {\n        var _postDataToStatsCollector = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(e) {\n          var t, i, r, _n7;\n          return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n            while (1) switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.t0 = pT.networkState === bg.OFFLINE;\n                if (!_context8.t0) {\n                  _context8.next = 4;\n                  break;\n                }\n                _context8.next = 4;\n                return Cl.race([pT.onlineWaiter, LR(2 * RE.maxRetryTimeout)]);\n              case 4:\n                t = function t(e) {\n                  var t = new Uint8Array();\n                  return e.forEach(function (e) {\n                    var i = mT(JSON.stringify(e.data)),\n                      r = new ArrayBuffer(5),\n                      n = function (e) {\n                        var t = 0;\n                        return Object.entries(hm).forEach(function (i) {\n                          var _i24 = _slicedToArray(i, 2),\n                            r = _i24[0],\n                            n = _i24[1];\n                          n === e.type && (t = _m[r]);\n                        }), t;\n                      }(e),\n                      o = new DataView(r);\n                    o.setUint16(0, i.byteLength, !0), o.setUint8(2, 255 & n), o.setUint8(3, n >>> 8 & 255), o.setUint8(4, n >>> 16 & 255), t = gT(t, new Uint8Array(r)), t = gT(t, i);\n                  }), t;\n                }, i = \"event\";\n                r = this.proxyServer ? \"https://\".concat(this.proxyServer, \"/rs/?h=\").concat(HE(\"NEW_REPORT_SERVER_DOMAINS\")[0], \"&p=443&d=\").concat(i) : \"https://\".concat(HE(\"NEW_REPORT_SERVER_DOMAINS\")[0], \"/\").concat(i);\n                _n7 = 0;\n              case 7:\n                if (!(_n7 < 2)) {\n                  _context8.next = 23;\n                  break;\n                }\n                1 === _n7 && (r = this.proxyServer ? \"https://\".concat(this.proxyServer, \"/rs/?h=\").concat(HE(\"NEW_REPORT_SERVER_DOMAINS\")[1], \"&p=443&d=\").concat(i) : \"https://\".concat(HE(\"NEW_REPORT_SERVER_DOMAINS\")[1], \"/\").concat(i));\n                _context8.prev = 9;\n                _context8.next = 12;\n                return lT(r, {\n                  timeout: 1e4,\n                  data: t(e),\n                  headers: vT(vT({\n                    token: \"32f24ab2ddb74f508aa9286c356cec84\",\n                    biz: \"webrtc\",\n                    sendts: Math.round(Date.now() / 1e3),\n                    debug: \"false\"\n                  }, this._appId && {\n                    appid: this._appId\n                  }), {}, {\n                    \"Content-Type\": \"application/octet-stream\"\n                  })\n                }, !0);\n              case 12:\n                _context8.next = 19;\n                break;\n              case 14:\n                _context8.prev = 14;\n                _context8.t1 = _context8[\"catch\"](9);\n                if (!(1 === _n7)) {\n                  _context8.next = 18;\n                  break;\n                }\n                throw _context8.t1;\n              case 18:\n                return _context8.abrupt(\"continue\", 20);\n              case 19:\n                return _context8.abrupt(\"return\");\n              case 20:\n                _n7 += 1;\n                _context8.next = 7;\n                break;\n              case 23:\n              case \"end\":\n                return _context8.stop();\n            }\n          }, _callee8, this, [[9, 14]]);\n        }));\n        function postDataToStatsCollector2(_x9) {\n          return _postDataToStatsCollector.apply(this, arguments);\n        }\n        return postDataToStatsCollector2;\n      }()\n    }, {\n      key: \"postDataToStatsCollector\",\n      value: function () {\n        var _postDataToStatsCollector2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(e) {\n          var _this42 = this;\n          var t,\n            i,\n            r,\n            n,\n            _e23,\n            _args9 = arguments;\n          return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n            while (1) switch (_context9.prev = _context9.next) {\n              case 0:\n                t = _args9.length > 1 && void 0 !== _args9[1] && _args9[1];\n                i = {\n                  msgType: \"EventMessages\",\n                  sentTs: Math.round(Date.now() / 1e3),\n                  payloads: e.map(function (e) {\n                    return JSON.stringify(e);\n                  }),\n                  vid: function (e) {\n                    var t = e && e.data.sid && _this42.baseInfoMap.get(e.data.sid);\n                    return t && t.info.vid && +t.info.vid || 0;\n                  }(e[0])\n                };\n                _context9.t0 = pT.networkState === bg.OFFLINE;\n                if (!_context9.t0) {\n                  _context9.next = 6;\n                  break;\n                }\n                _context9.next = 6;\n                return Cl.race([pT.onlineWaiter, LR(2 * RE.maxRetryTimeout)]);\n              case 6:\n                r = t ? \"/events/proto-raws\" : \"/events/messages\";\n                n = this.url || (this.proxyServer ? \"https://\".concat(this.proxyServer, \"/rs/?h=\").concat(HE(\"EVENT_REPORT_DOMAIN\"), \"&p=\").concat(HE(\"STATS_COLLECTOR_PORT\"), \"&d=\").concat(r) : \"https://\".concat(HE(\"EVENT_REPORT_DOMAIN\"), \":\").concat(HE(\"STATS_COLLECTOR_PORT\")).concat(r));\n                _e23 = 0;\n              case 9:\n                if (!(_e23 < 2)) {\n                  _context9.next = 30;\n                  break;\n                }\n                1 === _e23 && (n = this.backupUrl || (this.proxyServer ? \"https://\".concat(this.proxyServer, \"/rs/?h=\").concat(HE(\"EVENT_REPORT_BACKUP_DOMAIN\"), \"&p=\").concat(HE(\"STATS_COLLECTOR_PORT\"), \"&d=\").concat(r) : \"https://\".concat(HE(\"EVENT_REPORT_BACKUP_DOMAIN\"), \":\").concat(HE(\"STATS_COLLECTOR_PORT\")).concat(r)));\n                _context9.prev = 11;\n                if (!t) {\n                  _context9.next = 17;\n                  break;\n                }\n                _context9.next = 15;\n                return hT(n, {\n                  timeout: 1e4,\n                  data: i\n                });\n              case 15:\n                _context9.next = 19;\n                break;\n              case 17:\n                _context9.next = 19;\n                return lT(n, {\n                  timeout: 1e4,\n                  data: i\n                });\n              case 19:\n                _context9.next = 26;\n                break;\n              case 21:\n                _context9.prev = 21;\n                _context9.t1 = _context9[\"catch\"](11);\n                if (!(1 === _e23)) {\n                  _context9.next = 25;\n                  break;\n                }\n                throw _context9.t1;\n              case 25:\n                return _context9.abrupt(\"continue\", 27);\n              case 26:\n                return _context9.abrupt(\"return\");\n              case 27:\n                _e23 += 1;\n                _context9.next = 9;\n                break;\n              case 30:\n              case \"end\":\n                return _context9.stop();\n            }\n          }, _callee9, this, [[11, 21]]);\n        }));\n        function postDataToStatsCollector(_x10) {\n          return _postDataToStatsCollector2.apply(this, arguments);\n        }\n        return postDataToStatsCollector;\n      }()\n    }, {\n      key: \"createBaseInfo\",\n      value: function createBaseInfo(e, t) {\n        var i = Object.assign({}, um);\n        return i.sid = e, this.baseInfoMap.set(e, {\n          info: i,\n          startTime: t\n        }), i;\n      }\n    }, {\n      key: \"reportResourceTiming\",\n      value: function reportResourceTiming(e, t) {\n        var i = performance.getEntriesByName(e),\n          r = i[i.length - 1];\n        r && this.reportApiInvoke(t, {\n          name: \"Client.resourceTiming\",\n          options: r,\n          tag: fm.TRACER\n        }).onSuccess();\n      }\n    }]);\n    return _class5;\n  }())();\n  SE.on(\"REPORT_LOG_UPLOAD\", function (e) {\n    e.networkState = pT.networkState, IT.reportApiInvoke(null, {\n      name: \"logUploadError\",\n      options: e,\n      tag: fm.TRACER\n    });\n  });\n  var yT = /*#__PURE__*/function (_gE5) {\n    _inherits(yT, _gE5);\n    function yT(e, t) {\n      var _this43;\n      _classCallCheck(this, yT);\n      _this43 = _possibleConstructorReturn(this, _getPrototypeOf(yT).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"trackMediaType\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"_ID\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"_hints\", []), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"_isClosed\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"_originMediaStreamTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"_mediaStreamTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this43)), \"_external\", {}), _this43._ID = t || MR(8, \"track-\"), _this43._originMediaStreamTrack = e, _this43._mediaStreamTrack = e, function (e) {\n        $E.includes(e) || $E.push(e);\n      }(_assertThisInitialized(_assertThisInitialized(_this43)));\n      return _this43;\n    }\n    _createClass(yT, [{\n      key: \"toString\",\n      value: function toString() {\n        return this._ID;\n      }\n    }, {\n      key: \"getTrackId\",\n      value: function getTrackId() {\n        return this._ID;\n      }\n    }, {\n      key: \"getMediaStreamTrack\",\n      value: function getMediaStreamTrack(e) {\n        if (!e) {\n          var _e24 = IT.reportApiInvoke(null, {\n            name: Em.GET_MEDIA_STREAM_TRACK,\n            options: [],\n            tag: fm.TRACER\n          });\n          this._mediaStreamTrack && \"string\" == typeof this._mediaStreamTrack.label ? _e24.onSuccess(this._mediaStreamTrack.label) : _e24.onSuccess(\"\");\n        }\n        return this._mediaStreamTrack;\n      }\n    }, {\n      key: \"getMediaStreamTrackSettings\",\n      value: function getMediaStreamTrackSettings() {\n        return this.getMediaStreamTrack(!0).getSettings();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._isClosed = !0, function (e) {\n          var t = $E.indexOf(e);\n          -1 !== t && $E.splice(t, 1);\n        }(this), this.emit(_g.CLOSED);\n      }\n    }]);\n    return yT;\n  }(gE);\n  var CT,\n    AT = 1;\n  var OT = /*#__PURE__*/function () {\n    function OT(e) {\n      _classCallCheck(this, OT);\n      mp(this, \"lockingPromise\", Cl.resolve()), mp(this, \"locks\", 0), mp(this, \"name\", \"\"), mp(this, \"lockId\", void 0), this.lockId = AT++, e && (this.name = e), NE.debug(\"[lock-\".concat(this.name, \"-\").concat(this.lockId, \"] is created.\"));\n    }\n    _createClass(OT, [{\n      key: \"lock\",\n      value: function lock(e) {\n        var _this44 = this;\n        var t;\n        this.locks += 1, NE.debug(\"[lock-\".concat(this.name, \"-\").concat(this.lockId, \"] is locked, current queue \").concat(this.locks, \". \").concat(\"string\" == typeof e ? e : \"\"));\n        var i = new Cl(function (i) {\n            t = function t() {\n              _this44.locks -= 1, NE.debug(\"[lock-\".concat(_this44.name, \"-\").concat(_this44.lockId, \"] is not locked, current queue \").concat(_this44.locks, \". \").concat(\"string\" == typeof e ? e : \"\")), i();\n            };\n          }),\n          r = this.lockingPromise.then(function () {\n            return t;\n          });\n        return this.lockingPromise = this.lockingPromise.then(function () {\n          return i;\n        }), r;\n      }\n    }, {\n      key: \"isLocked\",\n      get: function get() {\n        return this.locks > 0;\n      }\n    }]);\n    return OT;\n  }();\n  function bT(e, t) {\n    return function (i, r, n) {\n      var o = n.value;\n      if (\"function\" != typeof o) throw new Error(\"Cannot use mutex on object property.\");\n      return n.value = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var i,\n          n,\n          s,\n          a,\n          c,\n          _args10 = arguments;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              i = this[t];\n              if (i) {\n                _context10.next = 3;\n                break;\n              }\n              throw new Error(\"mutex property key \".concat(t, \" doesn't exist on \").concat(e));\n            case 3:\n              _context10.next = 5;\n              return i.lock(\"From \".concat(e, \".\").concat(r));\n            case 5:\n              n = _context10.sent;\n              _context10.prev = 6;\n              for (s = _args10.length, a = new Array(s), c = 0; c < s; c++) a[c] = _args10[c];\n              _context10.next = 10;\n              return o.apply(this, a);\n            case 10:\n              return _context10.abrupt(\"return\", _context10.sent);\n            case 11:\n              _context10.prev = 11;\n              n();\n              return _context10.finish(11);\n            case 14:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this, [[6,, 11, 14]]);\n      })), n;\n    };\n  }\n  var wT = /*#__PURE__*/function (_yT) {\n    _inherits(wT, _yT);\n    _createClass(wT, [{\n      key: \"muted\",\n      get: function get() {\n        return this._muted;\n      }\n    }, {\n      key: \"enabled\",\n      get: function get() {\n        return this._enabled;\n      }\n    }]);\n    function wT(e, t) {\n      var _this45;\n      _classCallCheck(this, wT);\n      _this45 = _possibleConstructorReturn(this, _getPrototypeOf(wT).call(this, e, t)), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"_enabled\", !0), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"_muted\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"_isClosed\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"_enabledMutex\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"processor\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"processorContext\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this45)), \"_handleTrackEnded\", function () {\n        _this45.onTrackEnded();\n      }), _this45._enabledMutex = new OT(\"\".concat(t)), e.addEventListener(\"ended\", _this45._handleTrackEnded);\n      return _this45;\n    }\n    _createClass(wT, [{\n      key: \"getTrackLabel\",\n      value: function getTrackLabel() {\n        return this._originMediaStreamTrack.label;\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._isClosed || (this.stop(), this._originMediaStreamTrack.stop(), this._mediaStreamTrack !== this._originMediaStreamTrack && (this._mediaStreamTrack.stop(), this._mediaStreamTrack = null), this._originMediaStreamTrack = null, this._enabledMutex = null, NE.debug(\"[\".concat(this.getTrackId(), \"] close\")), this.emit(ug.NEED_CLOSE), _get(_getPrototypeOf(wT.prototype), \"close\", this).call(this));\n      }\n    }, {\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function () {\n        var _updateOriginMediaStreamTrack2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(e, t) {\n          return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n            while (1) switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.t0 = e !== this._originMediaStreamTrack;\n                if (!_context11.t0) {\n                  _context11.next = 12;\n                  break;\n                }\n                this._originMediaStreamTrack.removeEventListener(\"ended\", this._handleTrackEnded);\n                t && this._originMediaStreamTrack.stop();\n                e.addEventListener(\"ended\", this._handleTrackEnded);\n                this._originMediaStreamTrack = e;\n                this._muted && (this._originMediaStreamTrack.enabled = !1);\n                this._mediaStreamTrack = this._originMediaStreamTrack;\n                this._updatePlayerSource();\n                _context11.next = 11;\n                return BR(this, ug.NEED_REPLACE_TRACK, this);\n              case 11:\n                this.processor && this.processor.updateInput({\n                  track: this._originMediaStreamTrack,\n                  context: this.processorContext\n                });\n              case 12:\n              case \"end\":\n                return _context11.stop();\n            }\n          }, _callee11, this);\n        }));\n        function _updateOriginMediaStreamTrack(_x11, _x12) {\n          return _updateOriginMediaStreamTrack2.apply(this, arguments);\n        }\n        return _updateOriginMediaStreamTrack;\n      }()\n    }, {\n      key: \"_getDefaultPlayerConfig\",\n      value: function _getDefaultPlayerConfig() {\n        return {};\n      }\n    }, {\n      key: \"onTrackEnded\",\n      value: function onTrackEnded() {\n        NE.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(_g.TRACK_ENDED);\n      }\n    }, {\n      key: \"stateCheck\",\n      value: function stateCheck(e, t) {\n        if (NE.debug(\"check track state, [muted: \".concat(this._muted, \", enabled: \").concat(this._enabled, \"] to [\").concat(e, \": \").concat(t, \"]\")), qf(t, e), this._enabled && this._muted && \"enabled\" === e && !1 === t) throw new vE(TE.TRACK_STATE_UNREACHABLE, \"cannot set enabled while the track is muted\").print();\n        if (!this._enabled && !this._muted && \"muted\" === e && !0 === t) throw new vE(TE.TRACK_STATE_UNREACHABLE, \"cannot set muted while the track is disabled\").print();\n      }\n    }, {\n      key: \"getProcessorStats\",\n      value: function getProcessorStats() {\n        return this.processorContext.gatherStats();\n      }\n    }, {\n      key: \"getProcessorUsage\",\n      value: function getProcessorUsage() {\n        return this.processorContext.gatherUsage();\n      }\n    }]);\n    return wT;\n  }(yT);\n  function NT(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  !function (e) {\n    e.IOS_15_INTERRUPTION_START = \"ios15-interruption-start\", e.IOS_15_INTERRUPTION_END = \"ios15-interruption-end\", e.IOS_INTERRUPTION_START = \"ios-interruption-start\", e.IOS_INTERRUPTION_END = \"ios-interruption-end\", e.STATE_CHANGE = \"state-change\";\n  }(CT || (CT = {}));\n  var DT = window.AudioContext || window.webkitAudioContext;\n  var PT = null;\n  var LT = new ( /*#__PURE__*/function (_gE6) {\n    _inherits(_class6, _gE6);\n    function _class6() {\n      var _this46;\n      _classCallCheck(this, _class6);\n      _this46 = _possibleConstructorReturn(this, _getPrototypeOf(_class6).apply(this, arguments)), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"prevState\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"curState\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"currentTime\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"currentTimeStuckAt\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"interruptDetectorTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"onLocalAudioTrackMute\", function () {\n        NE.info(\"ios15-interruption-start\"), _this46.emit(CT.IOS_15_INTERRUPTION_START);\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this46)), \"onLocalAudioTrackUnmute\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              NE.info(\"ios15-interruption-end\");\n              if (!(\"running\" !== _this46.curState || _this46.duringInterruption)) {\n                _context12.next = 5;\n                break;\n              }\n              NE.info(\"ios15-interruption-end-canceled\");\n              _context12.next = 10;\n              break;\n            case 5:\n              _context12.t0 = PT;\n              if (!_context12.t0) {\n                _context12.next = 9;\n                break;\n              }\n              _context12.next = 9;\n              return PT.suspend();\n            case 9:\n              _this46.emit(CT.IOS_15_INTERRUPTION_END);\n            case 10:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12);\n      })));\n      return _this46;\n    }\n    _createClass(_class6, [{\n      key: \"bindInterruptDetectorTrack\",\n      value: function bindInterruptDetectorTrack(e) {\n        NE.debug(\"webaudio bindInterruptDetectorTrack \".concat(e.getTrackId())), this.interruptDetectorTrack || (this.interruptDetectorTrack = e, this.interruptDetectorTrack._mediaStreamTrack.onmute = this.onLocalAudioTrackMute, this.interruptDetectorTrack._mediaStreamTrack.onunmute = this.onLocalAudioTrackUnmute);\n      }\n    }, {\n      key: \"unbindInterruptDetectorTrack\",\n      value: function unbindInterruptDetectorTrack(e) {\n        NE.debug(\"webaudio unbindInterruptDetectorTrack \".concat(e.getTrackId())), this.interruptDetectorTrack && this.interruptDetectorTrack === e && (this.interruptDetectorTrack._mediaStreamTrack && (this.interruptDetectorTrack._mediaStreamTrack.onmute = null, this.interruptDetectorTrack._mediaStreamTrack.onunmute = null), this.interruptDetectorTrack = void 0);\n      }\n    }, {\n      key: \"duringInterruption\",\n      get: function get() {\n        return \"running\" === this.prevState && \"interrupted\" === this.curState;\n      }\n    }]);\n    return _class6;\n  }(gE))();\n  function kT() {\n    if (!DT) return void NE.error(\"your browser is not support web audio\");\n    NE.info(\"create audio context\");\n    var e = function (e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var i = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? NT(Object(i), !0).forEach(function (t) {\n          mp(e, t, i[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : NT(Object(i)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n        });\n      }\n      return e;\n    }({}, HE(\"WEBAUDIO_INIT_OPTIONS\"));\n    NE.debug(\"audio context init option:\", JSON.stringify(e)), PT = new DT(e), LT.curState = PT.state, PT.onstatechange = function () {\n      LT.prevState = LT.curState, LT.curState = PT ? PT.state : void 0, (Zh() || np()) && \"running\" === LT.prevState && \"interrupted\" === LT.curState && (NE.info(\"ios-interruption-start\"), LT.emit(CT.IOS_INTERRUPTION_START)), (Zh() || np()) && \"interrupted\" === LT.prevState && \"running\" === LT.curState && (NE.info(\"ios-interruption-end\"), LT.emit(CT.IOS_INTERRUPTION_END)), LT.prevState !== LT.curState && (NE.debug(\"AudioContext State Change\", \"\".concat(LT.prevState, \"=>\").concat(LT.curState)), LT.emit(CT.STATE_CHANGE));\n    }, setInterval(function () {\n      var e;\n      var t = null === (e = PT) || void 0 === e ? void 0 : e.currentTime;\n      if (LT.currentTime !== t) LT.currentTimeStuckAt && (NE.debug(\"AudioContext current time resume at \".concat(t)), LT.currentTimeStuckAt = void 0), LT.currentTime = t;else {\n        if (t !== LT.currentTimeStuckAt) {\n          IT.reportApiInvoke(null, {\n            name: \"WEB_AUDIO_CURRENT_TIME_STUCK\",\n            options: {\n              currentTime: t\n            },\n            tag: fm.TRACER\n          }).onSuccess(), NE.warning(\"AudioContext current time stuck at \".concat(t));\n        }\n        LT.currentTimeStuckAt = t;\n      }\n    }, 5e3), function () {\n      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(e) {\n        var t, i, r, n, o, s, a, c, d, u, l, h, p, _, _t36, _r16;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              _ = function _ref10() {\n                l(!0);\n              };\n              p = function _p2() {\n                i.removeEventListener(\"playing\", p), i.removeEventListener(\"abort\", p), i.removeEventListener(\"error\", p), o = !1, l(!1);\n              };\n              h = function _h2(e) {\n                if (n !== e) {\n                  n = e;\n                  for (var _i26 = 0, _r15 = t; _i26 < _r15.length; _i26++) {\n                    var _t35 = _r15[_i26];\n                    e ? window.addEventListener(_t35, _, {\n                      capture: !0,\n                      passive: !0\n                    }) : window.removeEventListener(_t35, _, {\n                      capture: !0,\n                      passive: !0\n                    });\n                  }\n                }\n              };\n              l = function _l2(e) {\n                if (!o) if (i.paused) {\n                  if (e) {\n                    h(!1), o = !0;\n                    var _e25 = void 0;\n                    try {\n                      _e25 = i.play(), _e25 ? _e25.then(p, p) : (i.addEventListener(\"playing\", p), i.addEventListener(\"abort\", p), i.addEventListener(\"error\", p));\n                    } catch (e) {\n                      p();\n                    }\n                  } else h(!0);\n                } else h(!1);\n              };\n              u = function _u2() {\n                s(!0);\n              };\n              d = function _d2() {\n                s(!1);\n              };\n              c = function _c4() {\n                s(!0);\n              };\n              a = function _a3(e) {\n                if (r !== e) {\n                  r = e;\n                  for (var _i25 = 0, _r14 = t; _i25 < _r14.length; _i25 += 1) {\n                    var _t34 = _r14[_i25];\n                    e ? window.addEventListener(_t34, u, {\n                      capture: !0,\n                      passive: !0\n                    }) : window.removeEventListener(_t34, u, {\n                      capture: !0,\n                      passive: !0\n                    });\n                  }\n                }\n              };\n              s = function _s5(t) {\n                \"running\" === e.state ? a(!1) : Zh() || np() ? \"suspended\" === e.state && (a(!0), t && e.resume().then(d, d)) : \"closed\" !== e.state && (a(!0), t && e.resume().then(d, d));\n              };\n              t = [\"click\", \"contextmenu\", \"auxclick\", \"dblclick\", \"mousedown\", \"mouseup\", \"touchend\", \"keydown\", \"keyup\"];\n              r = !1, n = !1, o = !1;\n              if (Zh()) {\n                _t36 = e.createMediaStreamDestination(), _r16 = document.createElement(\"div\");\n                _r16.innerHTML = \"<audio x-webkit-airplay='deny'></audio>\", i = _r16.children.item(0), i.controls = !1, i.disableRemotePlayback = !0, i.preload = \"auto\", i.srcObject = _t36.stream, l(!0);\n              }\n              LT.on(CT.STATE_CHANGE, c), s(!1);\n            case 13:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13);\n      }));\n      return function (_x13) {\n        return _ref9.apply(this, arguments);\n      };\n    }()(PT);\n  }\n  function MT() {\n    if (!PT) {\n      if (kT(), !PT) throw new vE(TE.NOT_SUPPORTED, \"can not create audio context\");\n      return PT;\n    }\n    return PT;\n  }\n  function UT(e) {\n    if (function () {\n      if (null !== xT) return xT;\n      var e = MT(),\n        t = e.createBufferSource(),\n        i = e.createGain(),\n        r = e.createGain();\n      t.connect(i), t.connect(r), t.disconnect(i);\n      var n = !1;\n      try {\n        t.disconnect(i);\n      } catch (e) {\n        n = !0;\n      }\n      return t.disconnect(), xT = n, n;\n    }()) return;\n    var t = e.connect,\n      i = e.disconnect;\n    e.connect = function (i, r, n) {\n      return e._inputNodes || (e._inputNodes = []), e._inputNodes.includes(i) || (i instanceof AudioNode ? (e._inputNodes.push(i), t.call(e, i, r, n)) : t.call(e, i, r)), e;\n    }, e.disconnect = function (r, n, o) {\n      i.call(e), r ? HR(e._inputNodes, r) : e._inputNodes = [];\n      var _iterator2 = _createForOfIteratorHelper(e._inputNodes),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _i27 = _step2.value;\n          t.call(e, _i27);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    };\n  }\n  var xT = null;\n  function VT(e, t) {\n    var i = !1;\n    var r = 1 / t;\n    if (HE(\"DISABLE_WEBAUDIO\")) {\n      var _t37 = window.setInterval(function () {\n        i ? window.clearInterval(_t37) : e(performance.now() / 1e3);\n      }, 1e3 * r);\n    } else {\n      var _t38 = MT();\n      var _n8 = _t38.createGain();\n      _n8.gain.value = 0, _n8.connect(_t38.destination);\n      var _o5 = function _o5() {\n        if (i) return void (_n8 = null);\n        var s = _t38.createOscillator();\n        s.onended = _o5, s.connect(_n8), s.start(0), s.stop(_t38.currentTime + r), e(_t38.currentTime);\n      };\n      _o5();\n    }\n    return function () {\n      i = !0;\n    };\n  }\n  var jT = NE.prefix(\"[inject-node]\");\n  var FT = /*#__PURE__*/function () {\n    function FT() {\n      _classCallCheck(this, FT);\n      mp(this, \"nodeLists\", []), mp(this, \"prevNode\", void 0), mp(this, \"nextNode\", void 0);\n    }\n    _createClass(FT, [{\n      key: \"connect\",\n      value: function connect(e, t) {\n        var _this47 = this;\n        jT.debug(\"connect audio node, current list:\" + this.nodeLists.length), this.nodeLists.length ? (this.prevNode && this.prevNode.disconnect(), e.connect(this.firstNode), this.nextNode && this.lastNode && this.lastNode.disconnect(), this.lastNode.connect(t), this.nodeLists.forEach(function (e, t) {\n          var i = _this47.nodeLists[t + 1];\n          i && e.connect(i);\n        })) : e.connect(t), this.nextNode = t, this.prevNode = e;\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        var e;\n        jT.debug(\"disconnect audio node, current list:\" + this.nodeLists.length), this.nodeLists.forEach(function (e) {\n          e.disconnect();\n        }), null === (e = this.prevNode) || void 0 === e || e.disconnect(), this.prevNode = void 0, this.nextNode = void 0;\n      }\n    }, {\n      key: \"addNode\",\n      value: function addNode(e) {\n        jT.debug(\"add node in inject node, current list:\", this.nodeLists.length), this.prevNode && this.nextNode ? (this.firstNode || (jT.debug(\"new node is the first node\"), this.prevNode.disconnect(), this.prevNode.connect(e), e.connect(this.nextNode)), this.nextNode && this.lastNode && (this.lastNode.disconnect(this.nextNode), this.lastNode.connect(e), e.connect(this.nextNode)), this.nodeLists.push(e)) : jT.debug(\"add node is called before inject node connected\");\n      }\n    }, {\n      key: \"removeNode\",\n      value: function removeNode(e) {\n        jT.debug(\"remove node in inject node, current list:\", this.nodeLists.length);\n        var t = this.nodeLists.indexOf(e);\n        if (-1 === t) return void jT.debug(\"$[inject-node] cannot find the node to be removed\");\n        var i = this.nodeLists[t + 1],\n          r = this.nodeLists[t - 1];\n        0 === t && this.prevNode && this.nextNode && (this.prevNode.disconnect(e), i ? this.prevNode.connect(i) : this.prevNode.connect(this.nextNode)), t === this.nodeLists.length - 1 && this.nextNode && r && (r.disconnect(e), r.connect(this.nextNode)), 0 !== t && t !== this.nodeLists.length - 1 && (r.disconnect(e), r.connect(i)), jT.debug(\"remove node in inject node success, current list:\", this.nodeLists.length);\n      }\n    }, {\n      key: \"firstNode\",\n      get: function get() {\n        return this.nodeLists[0];\n      }\n    }, {\n      key: \"lastNode\",\n      get: function get() {\n        return this.nodeLists[this.nodeLists.length - 1];\n      }\n    }, {\n      key: \"isActive\",\n      get: function get() {\n        return !!this.nodeLists.length;\n      }\n    }, {\n      key: \"isConnected\",\n      get: function get() {\n        return !(!this.prevNode || !this.nextNode);\n      }\n    }]);\n    return FT;\n  }();\n  var BT = /*#__PURE__*/function () {\n    function BT() {\n      _classCallCheck(this, BT);\n      mp(this, \"context\", void 0), mp(this, \"analyserNode\", void 0), mp(this, \"sourceNode\", void 0), this.context = MT(), this.analyserNode = this.context.createAnalyser(), this.analyserNode.fftSize = 2048, this.analyserNode.smoothingTimeConstant = .4;\n    }\n    _createClass(BT, [{\n      key: \"updateSource\",\n      value: function updateSource(e) {\n        if (e !== this.sourceNode) {\n          if (this.sourceNode) try {\n            this.sourceNode.disconnect(this.analyserNode);\n          } catch (e) {}\n          this.sourceNode = e, null == e || e.connect(this.analyserNode);\n        }\n      }\n    }, {\n      key: \"getVolumeLevel\",\n      value: function getVolumeLevel() {\n        if (!this.sourceNode) return 0;\n        if (!this.context || Zh() || np() || \"running\" !== this.context.state && this.context.resume(), !this.analyserNode) return 0;\n        var e = new Float32Array(this.analyserNode.fftSize);\n        if (this.analyserNode.getFloatTimeDomainData) this.analyserNode.getFloatTimeDomainData(e);else {\n          var _t39 = new Uint8Array(this.analyserNode.fftSize);\n          this.analyserNode.getByteTimeDomainData(_t39);\n          for (var _i28 = 0; _i28 < e.length; ++_i28) e[_i28] = _t39[_i28] / 128 - 1;\n        }\n        var t = zi(e).call(e, function (e, t) {\n          return e + t * t;\n        }, 0) / e.length;\n        return Math.max(10 * Math.log10(t) + 100, 0) / 100;\n      }\n    }, {\n      key: \"getAnalyserNode\",\n      value: function getAnalyserNode() {\n        return this.analyserNode;\n      }\n    }, {\n      key: \"rebuildAnalyser\",\n      value: function rebuildAnalyser() {\n        try {\n          var e, t;\n          null === (e = this.sourceNode) || void 0 === e || e.disconnect(this.analyserNode), this.analyserNode = this.context.createAnalyser(), this.analyserNode.fftSize = 2048, this.analyserNode.smoothingTimeConstant = .4, null === (t = this.sourceNode) || void 0 === t || t.connect(this.analyserNode);\n        } catch (e) {\n          NE.warning(\"rebuild analyser node failed.\");\n        }\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.updateSource(void 0);\n      }\n    }]);\n    return BT;\n  }();\n  var GT = /*#__PURE__*/function (_gE7) {\n    _inherits(GT, _gE7);\n    _createClass(GT, [{\n      key: \"processSourceNode\",\n      get: function get() {\n        return this.sourceNode;\n      }\n    }, {\n      key: \"processedNode\",\n      set: function set(e) {\n        var t;\n        if (!this.isDestroyed && this._processedNode !== e) {\n          try {\n            var i;\n            null === (i = this.sourceNode) || void 0 === i || i.disconnect(this.outputNode);\n          } catch (e) {}\n          null === (t = this._processedNode) || void 0 === t || t.disconnect(), this._processedNode = e, this.connect();\n        }\n      },\n      get: function get() {\n        return this._processedNode;\n      }\n    }]);\n    function GT() {\n      var _this48;\n      _classCallCheck(this, GT);\n      _this48 = _possibleConstructorReturn(this, _getPrototypeOf(GT).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"outputNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"outputTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"isPlayed\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"sourceNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"context\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"audioBufferNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"destNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"injectNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"audioOutputLevel\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"volumeLevelAnalyser\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"_processedNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"playNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"isDestroyed\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"onNoAudioInput\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"isNoAudioInput\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this48)), \"_noAudioInputCount\", 0), _this48.context = MT(), _this48.playNode = _this48.context.destination, _this48.outputNode = _this48.context.createGain(), UT(_this48.outputNode), _this48.injectNode = new FT(), _this48.volumeLevelAnalyser = new BT();\n      return _this48;\n    }\n    _createClass(GT, [{\n      key: \"startGetAudioBuffer\",\n      value: function startGetAudioBuffer(e) {\n        var _this49 = this;\n        this.audioBufferNode || (this.audioBufferNode = this.context.createScriptProcessor(e), this.outputNode.connect(this.audioBufferNode), this.audioBufferNode.connect(this.context.destination), this.audioBufferNode.onaudioprocess = function (e) {\n          _this49.emit(km.ON_AUDIO_BUFFER, function (e) {\n            for (var _t40 = 0; _t40 < e.outputBuffer.numberOfChannels; _t40 += 1) {\n              var _i29 = e.outputBuffer.getChannelData(_t40);\n              for (var _e26 = 0; _e26 < _i29.length; _e26 += 1) _i29[_e26] = 0;\n            }\n            return e.inputBuffer;\n          }(e));\n        });\n      }\n    }, {\n      key: \"stopGetAudioBuffer\",\n      value: function stopGetAudioBuffer() {\n        this.audioBufferNode && (this.audioBufferNode.onaudioprocess = null, this.outputNode.disconnect(this.audioBufferNode), this.audioBufferNode = void 0);\n      }\n    }, {\n      key: \"createOutputTrack\",\n      value: function createOutputTrack() {\n        if (!jg().webAudioMediaStreamDest) throw new vE(TE.NOT_SUPPORTED, \"your browser is not support audio processor\");\n        return this.destNode && this.outputTrack || (this.destNode = this.context.createMediaStreamDestination(), this.outputNode.connect(this.destNode), this.outputTrack = this.destNode.stream.getAudioTracks()[0]), this.outputTrack;\n      }\n    }, {\n      key: \"play\",\n      value: function play(e) {\n        \"running\" !== this.context.state && YR(function () {\n          LT.emit(\"autoplay-failed\");\n        }), this.isPlayed = !0, this.playNode = e || this.context.destination, this.outputNode.connect(this.playNode);\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        if (this.isPlayed) try {\n          this.outputNode.disconnect(this.playNode);\n        } catch (e) {}\n        this.isPlayed = !1;\n      }\n    }, {\n      key: \"getAccurateVolumeLevel\",\n      value: function getAccurateVolumeLevel() {\n        return this.volumeLevelAnalyser.getVolumeLevel();\n      }\n    }, {\n      key: \"checkHasAudioInput\",\n      value: function () {\n        var _checkHasAudioInput = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n          var e,\n            t,\n            i,\n            r,\n            _e27,\n            _args14 = arguments;\n          return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n            while (1) switch (_context14.prev = _context14.next) {\n              case 0:\n                e = _args14.length > 0 && void 0 !== _args14[0] ? _args14[0] : 0;\n                if (!(e > 5)) {\n                  _context14.next = 3;\n                  break;\n                }\n                return _context14.abrupt(\"return\", (this.isNoAudioInput = !0, this.onNoAudioInput && this.onNoAudioInput(), !1));\n              case 3:\n                Zh() || np() ? \"suspended\" === this.context.state && this.context.resume() : \"running\" !== this.context.state && this.context.resume();\n                t = this.volumeLevelAnalyser.getAnalyserNode();\n                t.getFloatTimeDomainData ? (i = new Float32Array(t.fftSize), t.getFloatTimeDomainData(i)) : (i = new Uint8Array(t.fftSize), t.getByteTimeDomainData(i));\n                r = !1;\n                for (_e27 = 0; _e27 < i.length; _e27++) 0 !== i[_e27] && (r = !0);\n                if (!r) {\n                  _context14.next = 12;\n                  break;\n                }\n                _context14.t0 = (this.isNoAudioInput = !1, !0);\n                _context14.next = 20;\n                break;\n              case 12:\n                _context14.next = 14;\n                return LR(200);\n              case 14:\n                _context14.next = 16;\n                return this.checkHasAudioInput(e ? e + 1 : 1);\n              case 16:\n                _context14.t1 = _context14.sent;\n                if (!_context14.t1) {\n                  _context14.next = 19;\n                  break;\n                }\n                _context14.t1 = r;\n              case 19:\n                _context14.t0 = _context14.t1;\n              case 20:\n                return _context14.abrupt(\"return\", _context14.t0);\n              case 21:\n              case \"end\":\n                return _context14.stop();\n            }\n          }, _callee14, this);\n        }));\n        function checkHasAudioInput() {\n          return _checkHasAudioInput.apply(this, arguments);\n        }\n        return checkHasAudioInput;\n      }()\n    }, {\n      key: \"getAudioVolume\",\n      value: function getAudioVolume() {\n        return this.outputNode.gain.value;\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(e) {\n        this.outputNode.gain.setValueAtTime(e, this.context.currentTime);\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.disconnect(), this.stop(), this.isDestroyed = !0, this.onNoAudioInput = void 0;\n      }\n    }, {\n      key: \"injectAudioNode\",\n      value: function injectAudioNode(e) {\n        this.injectNode.addNode(e);\n      }\n    }, {\n      key: \"removeAudioNode\",\n      value: function removeAudioNode(e) {\n        this.injectNode.removeNode(e);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        var e, t;\n        null === (e = this.processedNode) || void 0 === e || e.disconnect(), null === (t = this.sourceNode) || void 0 === t || t.disconnect(), this.outputNode && this.outputNode.disconnect();\n      }\n    }, {\n      key: \"connect\",\n      value: function connect() {\n        var e;\n        this.processedNode ? null === (e = this.processedNode) || void 0 === e || e.connect(this.outputNode) : this.sourceNode && this.sourceNode.connect(this.outputNode);\n        this.volumeLevelAnalyser.updateSource(this.outputNode);\n      }\n    }]);\n    return GT;\n  }(gE);\n  var WT = /*#__PURE__*/function (_GT) {\n    _inherits(WT, _GT);\n    _createClass(WT, [{\n      key: \"isFreeze\",\n      get: function get() {\n        return !1;\n      }\n    }]);\n    function WT(e, t, i) {\n      var _this50;\n      _classCallCheck(this, WT);\n      var r;\n      if (_this50 = _possibleConstructorReturn(this, _getPrototypeOf(WT).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"sourceNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"track\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"clonedTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"audioElement\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"isCurrentTrackCloned\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"isRemoteTrack\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"originVolumeLevelAnalyser\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this50)), \"rebuildWebAudio\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n        var e, t, i;\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) switch (_context15.prev = _context15.next) {\n            case 0:\n              NE.debug(\"ready to rebuild web audio, state:\", _this50.context.state);\n              _context15.t0 = _this50.isNoAudioInput;\n              if (!_context15.t0) {\n                _context15.next = 5;\n                break;\n              }\n              _context15.next = 5;\n              return _this50.checkHasAudioInput();\n            case 5:\n              if (!(!_this50.isNoAudioInput || _this50.isDestroyed)) {\n                _context15.next = 7;\n                break;\n              }\n              return _context15.abrupt(\"return\", (document.body.removeEventListener(\"click\", _this50.rebuildWebAudio, !0), void NE.debug(\"rebuild web audio success, current volume status\", _this50.getAccurateVolumeLevel())));\n            case 7:\n              _this50.context.resume().then(function () {\n                return NE.info(\"resume success\");\n              }), NE.debug(\"rebuild web audio because of ios 12 bugs\"), _this50.disconnect();\n              e = _this50.track;\n              _this50.track = _this50.track.clone(), _this50.isCurrentTrackCloned ? e.stop() : _this50.isCurrentTrackCloned = !0;\n              t = new MediaStream([_this50.track]);\n              _this50.sourceNode = _this50.context.createMediaStreamSource(t), UT(_this50.sourceNode), _this50.volumeLevelAnalyser.rebuildAnalyser();\n              i = _this50.outputNode.gain.value;\n              _this50.outputNode = _this50.context.createGain(), _this50.outputNode.gain.setValueAtTime(i, _this50.context.currentTime), UT(_this50.outputNode), _this50.emit(km.UPDATE_SOURCE), _this50.connect(), _this50.audioElement.srcObject = t, _this50.isPlayed && _this50.play(_this50.playNode), _this50.checkHasAudioInput();\n            case 14:\n            case \"end\":\n              return _context15.stop();\n          }\n        }, _callee15);\n      }))), \"audio\" !== e.kind) throw new vE(TE.UNEXPECTED_ERROR);\n      _this50.track = e;\n      var n = new MediaStream([_this50.track]);\n      if (_this50.isRemoteTrack = !!t, _this50.sourceNode = _this50.context.createMediaStreamSource(n), UT(_this50.sourceNode), i) {\n        var _e28 = i.clone();\n        _e28.enabled = !0, _this50.clonedTrack = _e28, NE.debug(\"create an unmuted track \".concat(_e28.id, \" from the original track \").concat(i.id, \" to get the volume\"));\n        var _t41 = _this50.context.createMediaStreamSource(new MediaStream([_e28]));\n        UT(_t41), _this50.originVolumeLevelAnalyser = new BT(), _this50.originVolumeLevelAnalyser.updateSource(_t41);\n      }\n      _this50.connect(), _this50.audioElement = document.createElement(\"audio\"), _this50.audioElement.srcObject = n;\n      var o = Bh();\n      t && o.os === Uh.IOS && Number(null === (r = o.osVersion) || void 0 === r ? void 0 : r.split(\".\")[0]) < 15 && (LT.on(CT.STATE_CHANGE, function () {\n        \"suspended\" === _this50.context.state ? document.body.addEventListener(\"click\", _this50.rebuildWebAudio, !0) : \"running\" === _this50.context.state && _this50.rebuildWebAudio();\n      }), _this50.checkHasAudioInput().then(function (e) {\n        e || document.body.addEventListener(\"click\", _this50.rebuildWebAudio, !0);\n      }));\n      return _possibleConstructorReturn(_this50);\n    }\n    _createClass(WT, [{\n      key: \"updateTrack\",\n      value: function updateTrack(e) {\n        this.sourceNode.disconnect(), this.track = e, this.isCurrentTrackCloned = !1;\n        var t = new MediaStream([e]);\n        this.sourceNode = this.context.createMediaStreamSource(t), UT(this.sourceNode), this.processedNode || this.sourceNode.connect(this.outputNode), this.emit(km.UPDATE_SOURCE), this.audioElement.srcObject = t;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        var e;\n        this.audioElement.srcObject = null, this.audioElement.remove(), LT.off(\"state-change\", this.rebuildWebAudio), null === (e = this.originVolumeLevelAnalyser) || void 0 === e || e.destroy(), this.clonedTrack = void 0, _get(_getPrototypeOf(WT.prototype), \"destroy\", this).call(this);\n      }\n    }, {\n      key: \"createMediaStreamSourceNode\",\n      value: function createMediaStreamSourceNode(e) {\n        return this.context.createMediaStreamSource(new MediaStream([e]));\n      }\n    }, {\n      key: \"updateOriginTrack\",\n      value: function updateOriginTrack(e) {\n        var t = e.clone();\n        t.enabled = !0, this.clonedTrack && (this.clonedTrack.stop(), this.clonedTrack = t), NE.debug(\"create an unmuted track \".concat(t.id, \" from the original track \").concat(e.id, \" to get the volume\"));\n        var i = this.context.createMediaStreamSource(new MediaStream([t]));\n        UT(i), this.originVolumeLevelAnalyser && this.originVolumeLevelAnalyser.updateSource(i);\n      }\n    }, {\n      key: \"getOriginVolumeLevel\",\n      value: function getOriginVolumeLevel() {\n        return this.originVolumeLevelAnalyser ? this.originVolumeLevelAnalyser.getVolumeLevel() : this.getAccurateVolumeLevel();\n      }\n    }]);\n    return WT;\n  }(GT);\n  function HT(_x14, _x15) {\n    return _HT.apply(this, arguments);\n  }\n  function _HT() {\n    _HT = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee325(e, t) {\n      var i, r;\n      return _regeneratorRuntime().wrap(function _callee325$(_context328) {\n        while (1) switch (_context328.prev = _context328.next) {\n          case 0:\n            i = function i(e, t) {\n              return e ? \"number\" != typeof e ? e.max || e.exact || e.ideal || e.min || t : e : t;\n            }, r = {\n              audio: !1,\n              video: {\n                mandatory: {\n                  chromeMediaSource: \"desktop\",\n                  chromeMediaSourceId: e,\n                  maxHeight: i(t.height, 1080),\n                  maxWidth: i(t.width, 1920)\n                }\n              }\n            };\n            t.frameRate && \"number\" != typeof t.frameRate ? (r.video.mandatory.maxFrameRate = t.frameRate.max, r.video.mandatory.minFrameRate = t.frameRate.min) : \"number\" == typeof t.frameRate && (r.video.mandatory.maxFrameRate = t.frameRate);\n            _context328.next = 4;\n            return navigator.mediaDevices.getUserMedia(r);\n          case 4:\n            return _context328.abrupt(\"return\", _context328.sent);\n          case 5:\n          case \"end\":\n            return _context328.stop();\n        }\n      }, _callee325);\n    }));\n    return _HT.apply(this, arguments);\n  }\n  function KT(_x16) {\n    return _KT.apply(this, arguments);\n  }\n  function _KT() {\n    _KT = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee326(e) {\n      var t, i;\n      return _regeneratorRuntime().wrap(function _callee326$(_context329) {\n        while (1) switch (_context329.prev = _context329.next) {\n          case 0:\n            _context329.next = 2;\n            return YT(e.mediaSource);\n          case 2:\n            t = _context329.sent;\n            _context329.next = 5;\n            return function (e) {\n              return new Cl(function (t, i) {\n                var r = document.createElement(\"div\");\n                r.innerText = \"share screen\", r.setAttribute(\"style\", \"text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;\");\n                var n = document.createElement(\"div\");\n                n.setAttribute(\"style\", \"width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;\");\n                var o = document.createElement(\"div\");\n                o.innerText = \"Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.\", o.setAttribute(\"style\", \"height: 12%;\");\n                var s = document.createElement(\"div\");\n                s.setAttribute(\"style\", \"width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;\");\n                var a = document.createElement(\"div\");\n                a.setAttribute(\"style\", \"text-align: right; padding: 16px 0;\");\n                var c = document.createElement(\"button\");\n                c.innerHTML = \"cancel\", c.setAttribute(\"style\", \"width: 85px;\"), c.onclick = function () {\n                  document.body.removeChild(d);\n                  var e = new Error(\"NotAllowedError\");\n                  e.name = \"NotAllowedError\", i(e);\n                }, a.appendChild(c), n.appendChild(o), n.appendChild(s), n.appendChild(a);\n                var d = document.createElement(\"div\");\n                d.setAttribute(\"style\", \"position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\"), d.appendChild(r), d.appendChild(n), document.body.appendChild(d), e.map(function (e) {\n                  if (e.id) {\n                    var _i125 = document.createElement(\"div\");\n                    _i125.setAttribute(\"style\", \"width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;\");\n                    var _r59 = e.thumbnail;\n                    var _r59$getSize = _r59.getSize(),\n                      _n71 = _r59$getSize.width;\n                    _n71 > 1920 && (_r59 = _r59.resize({\n                      width: 1920\n                    })), _i125.innerHTML = '<div style=\"height: 120px; display: table-cell; vertical-align: middle;\"><img style=\"width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);\" src=' + _r59.toDataURL() + ' /></div><span style=\"\\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">' + (e.name.replace(/[\\u00A0-\\u9999<>\\&]/g, function (e) {\n                      return \"&#\" + e.charCodeAt(0) + \";\";\n                    }) + \"</span>\"), _i125.onclick = function () {\n                      document.body.removeChild(d), t(e.id);\n                    }, s.appendChild(_i125);\n                  }\n                });\n              });\n            }(t);\n          case 5:\n            i = _context329.sent;\n            _context329.next = 8;\n            return HT(i, e);\n          case 8:\n            return _context329.abrupt(\"return\", _context329.sent);\n          case 9:\n          case \"end\":\n            return _context329.stop();\n        }\n      }, _callee326);\n    }));\n    return _KT.apply(this, arguments);\n  }\n  function YT(_x17) {\n    return _YT.apply(this, arguments);\n  }\n  function _YT() {\n    _YT = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee327(e) {\n      var t, i, r, n;\n      return _regeneratorRuntime().wrap(function _callee327$(_context330) {\n        while (1) switch (_context330.prev = _context330.next) {\n          case 0:\n            t = [\"window\", \"screen\"];\n            \"application\" !== e && \"window\" !== e || (t = [\"window\"]), \"screen\" === e && (t = [\"screen\"]);\n            i = JT();\n            if (i) {\n              _context330.next = 5;\n              break;\n            }\n            throw new vE(TE.ELECTRON_IS_NULL);\n          case 5:\n            r = null;\n            try {\n              r = (null === (n = i.desktopCapturer) || void 0 === n ? void 0 : n.getSources({\n                types: t\n              })) || i.ipcRenderer.invoke(\"DESKTOP_CAPTURER_GET_SOURCES\", {\n                types: t\n              });\n            } catch (e) {\n              r = null;\n            }\n            r && r.then || (r = new Cl(function (e, r) {\n              i.desktopCapturer.getSources({\n                types: t\n              }, function (t, i) {\n                t ? r(t) : e(i);\n              });\n            }));\n            _context330.prev = 8;\n            _context330.next = 11;\n            return r;\n          case 11:\n            return _context330.abrupt(\"return\", _context330.sent);\n          case 14:\n            _context330.prev = 14;\n            _context330.t0 = _context330[\"catch\"](8);\n            throw new vE(TE.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR, _context330.t0.toString());\n          case 17:\n          case \"end\":\n            return _context330.stop();\n        }\n      }, _callee327, null, [[8, 14]]);\n    }));\n    return _YT.apply(this, arguments);\n  }\n  var qT = null;\n  function JT() {\n    if (qT) return qT;\n    try {\n      return qT = window.require(\"electron\"), qT;\n    } catch (e) {\n      return null;\n    }\n  }\n  var XT = new OT(\"safari\");\n  var zT = !1,\n    QT = !1;\n  function ZT(_x18, _x19) {\n    return _ZT.apply(this, arguments);\n  }\n  function _ZT() {\n    _ZT = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee328(e, t) {\n      var i, r, _r60;\n      return _regeneratorRuntime().wrap(function _callee328$(_context331) {\n        while (1) switch (_context331.prev = _context331.next) {\n          case 0:\n            i = 0, r = null;\n          case 1:\n            if (!(i < 2)) {\n              _context331.next = 23;\n              break;\n            }\n            _context331.prev = 2;\n            _context331.next = 5;\n            return $T(e, t, i > 0);\n          case 5:\n            r = _context331.sent;\n            return _context331.abrupt(\"break\", 23);\n          case 9:\n            _context331.prev = 9;\n            _context331.t0 = _context331[\"catch\"](2);\n            if (!(_context331.t0 instanceof vE)) {\n              _context331.next = 13;\n              break;\n            }\n            throw NE.error(\"[\".concat(t, \"] \").concat(_context331.t0.toString())), _context331.t0;\n          case 13:\n            _r60 = ev(_context331.t0.name || _context331.t0.code || _context331.t0, _context331.t0.message);\n            if (!(_r60.code === TE.MEDIA_OPTION_INVALID)) {\n              _context331.next = 20;\n              break;\n            }\n            NE.debug(\"[\".concat(t, \"] detect media option invalid, retry\"));\n            i += 1;\n            _context331.next = 19;\n            return LR(500);\n          case 19:\n            return _context331.abrupt(\"continue\", 21);\n          case 20:\n            throw NE.error(\"[\".concat(t, \"] \").concat(_r60.toString())), _r60;\n          case 21:\n            _context331.next = 1;\n            break;\n          case 23:\n            if (r) {\n              _context331.next = 25;\n              break;\n            }\n            throw new vE(TE.UNEXPECTED_ERROR, \"can not find stream after getUserMedia\");\n          case 25:\n            return _context331.abrupt(\"return\", r);\n          case 26:\n          case \"end\":\n            return _context331.stop();\n        }\n      }, _callee328, null, [[2, 9]]);\n    }));\n    return _ZT.apply(this, arguments);\n  }\n  function $T(_x20, _x21, _x22) {\n    return _$T.apply(this, arguments);\n  }\n  function _$T() {\n    _$T = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee329(e, t, i) {\n      var r, n, _i126, _i127, _i128, o, s, a, c, d, u;\n      return _regeneratorRuntime().wrap(function _callee329$(_context332) {\n        while (1) switch (_context332.prev = _context332.next) {\n          case 0:\n            if (!(!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia)) {\n              _context332.next = 2;\n              break;\n            }\n            throw new vE(TE.NOT_SUPPORTED, \"can not find getUserMedia\");\n          case 2:\n            i && (e.video && (delete e.video.width, delete e.video.height), e.screen && (delete e.screen.width, delete e.screen.height));\n            r = jg(), n = new MediaStream();\n            if (!(e.audioSource && n.addTrack(e.audioSource), e.videoSource && n.addTrack(e.videoSource), !e.audio && !e.video && !e.screen)) {\n              _context332.next = 6;\n              break;\n            }\n            return _context332.abrupt(\"return\", (NE.debug(\"Using Video Source/ Audio Source\"), n));\n          case 6:\n            if (!e.screen) {\n              _context332.next = 64;\n              break;\n            }\n            if (!JT()) {\n              _context332.next = 25;\n              break;\n            }\n            if (!e.screen.sourceId) {\n              _context332.next = 17;\n              break;\n            }\n            _context332.t0 = tv;\n            _context332.t1 = n;\n            _context332.next = 13;\n            return HT(e.screen.sourceId, e.screen);\n          case 13:\n            _context332.t2 = _context332.sent;\n            (0, _context332.t0)(_context332.t1, _context332.t2);\n            _context332.next = 23;\n            break;\n          case 17:\n            _context332.t3 = tv;\n            _context332.t4 = n;\n            _context332.next = 21;\n            return KT(e.screen);\n          case 21:\n            _context332.t5 = _context332.sent;\n            (0, _context332.t3)(_context332.t4, _context332.t5);\n          case 23:\n            _context332.next = 64;\n            break;\n          case 25:\n            if (!(Xh() && e.screen.extensionId && e.screen.mandatory)) {\n              _context332.next = 41;\n              break;\n            }\n            if (r.getStreamFromExtension) {\n              _context332.next = 28;\n              break;\n            }\n            throw new vE(TE.NOT_SUPPORTED, \"This browser does not support screen sharing\");\n          case 28:\n            NE.debug(\"[\".concat(t, '] Screen access on chrome stable, looking for extension\"'));\n            _context332.next = 31;\n            return o = e.screen.extensionId, s = t, new Cl(function (e, t) {\n              try {\n                chrome.runtime.sendMessage(o, {\n                  getStream: !0\n                }, function (i) {\n                  if (!i || !i.streamId) return NE.error(\"[\".concat(s, \"] No response from Chrome Plugin. Plugin not installed properly\"), i), void t(new vE(TE.CHROME_PLUGIN_NO_RESPONSE, \"No response from Chrome Plugin. Plugin not installed properly\"));\n                  e(i.streamId);\n                });\n              } catch (e) {\n                NE.error(\"[\".concat(s, \"] AgoraRTC screensharing plugin is not accessible(\").concat(o, \")\"), e.toString()), t(new vE(TE.CHROME_PLUGIN_NOT_INSTALL));\n              }\n            });\n          case 31:\n            _i126 = _context332.sent;\n            e.screen.mandatory.chromeMediaSourceId = _i126;\n            _context332.t6 = tv;\n            _context332.t7 = n;\n            _context332.next = 37;\n            return navigator.mediaDevices.getUserMedia({\n              video: {\n                mandatory: e.screen.mandatory\n              }\n            });\n          case 37:\n            _context332.t8 = _context332.sent;\n            (0, _context332.t6)(_context332.t7, _context332.t8);\n            _context332.next = 64;\n            break;\n          case 41:\n            if (!r.getDisplayMedia) {\n              _context332.next = 53;\n              break;\n            }\n            e.screen.mediaSource && gg(e.screen.mediaSource);\n            _i127 = {\n              width: e.screen.width,\n              height: e.screen.height,\n              frameRate: e.screen.frameRate,\n              displaySurface: \"screen\" === e.screen.mediaSource ? \"monitor\" : e.screen.mediaSource\n            };\n            NE.debug(\"[\".concat(t, \"] getDisplayMedia:\"), JSON.stringify({\n              video: _i127,\n              audio: !!e.screenAudio\n            }));\n            _context332.t9 = tv;\n            _context332.t10 = n;\n            _context332.next = 49;\n            return navigator.mediaDevices.getDisplayMedia({\n              video: _i127,\n              audio: !!e.screenAudio\n            });\n          case 49:\n            _context332.t11 = _context332.sent;\n            (0, _context332.t9)(_context332.t10, _context332.t11);\n            _context332.next = 64;\n            break;\n          case 53:\n            if (Qh()) {\n              _context332.next = 55;\n              break;\n            }\n            throw NE.error(\"[\".concat(t, \"] This browser does not support screenSharing\")), new vE(TE.NOT_SUPPORTED, \"This browser does not support screen sharing\");\n          case 55:\n            e.screen.mediaSource && gg(e.screen.mediaSource);\n            _i128 = {\n              video: {\n                mediaSource: e.screen.mediaSource,\n                width: e.screen.width,\n                height: e.screen.height,\n                frameRate: e.screen.frameRate\n              }\n            };\n            NE.debug(\"[\".concat(t, \"] getUserMedia: \").concat(JSON.stringify(_i128)));\n            _context332.t12 = tv;\n            _context332.t13 = n;\n            _context332.next = 62;\n            return navigator.mediaDevices.getUserMedia(_i128);\n          case 62:\n            _context332.t14 = _context332.sent;\n            (0, _context332.t12)(_context332.t13, _context332.t14);\n          case 64:\n            if (!(!e.video && !e.audio)) {\n              _context332.next = 66;\n              break;\n            }\n            return _context332.abrupt(\"return\", n);\n          case 66:\n            a = {\n              video: e.video,\n              audio: e.audio\n            }, c = HE(\"MEDIA_DEVICE_CONSTRAINTS\");\n            if (c) try {\n              \"string\" == typeof c && (c = JSON.parse(c)), a = function e(t, i) {\n                if (!tI(t) || !tI(i)) return i;\n                if (Array.isArray(t) && !Array.isArray(i) || !Array.isArray(t) && Array.isArray(i)) return i;\n                if (Array.isArray(i) && Array.isArray(t)) {\n                  var _r61 = _toConsumableArray(t);\n                  for (var _n72 = 0; _n72 < i.length; _n72++) _r61[_n72] = e(t[_n72], i[_n72]);\n                  return _r61;\n                }\n                {\n                  var _r62 = DR({}, t);\n                  for (var _n73 in i) Object.prototype.hasOwnProperty.call(i, _n73) && (Object.prototype.hasOwnProperty.call(t, _n73) ? _r62[_n73] = e(t[_n73], i[_n73]) : _r62[_n73] = i[_n73]);\n                  return _r62;\n                }\n              }(a, c);\n            } catch (e) {}\n            NE.debug(\"[\".concat(t, \"] GetUserMedia\"), JSON.stringify(a)), Bh();\n            u = null;\n            _context332.t15 = zh() || Zh() || Yh();\n            if (!_context332.t15) {\n              _context332.next = 75;\n              break;\n            }\n            _context332.next = 74;\n            return XT.lock();\n          case 74:\n            u = _context332.sent;\n          case 75:\n            _context332.prev = 75;\n            _context332.next = 78;\n            return navigator.mediaDevices.getUserMedia(a);\n          case 78:\n            d = _context332.sent;\n            _context332.next = 84;\n            break;\n          case 81:\n            _context332.prev = 81;\n            _context332.t16 = _context332[\"catch\"](75);\n            throw u && u(), _context332.t16;\n          case 84:\n            return _context332.abrupt(\"return\", (a.audio && (zT = !0), a.video && (QT = !0), tv(n, d), u && u(), n));\n          case 85:\n          case \"end\":\n            return _context332.stop();\n        }\n      }, _callee329, null, [[75, 81]]);\n    }));\n    return _$T.apply(this, arguments);\n  }\n  function ev(e, t) {\n    switch (e) {\n      case \"Starting video failed\":\n      case \"OverconstrainedError\":\n      case \"TrackStartError\":\n        return new vE(TE.MEDIA_OPTION_INVALID, \"\".concat(e, \": \").concat(t));\n      case \"NotFoundError\":\n      case \"DevicesNotFoundError\":\n        return new vE(TE.DEVICE_NOT_FOUND, \"\".concat(e, \": \").concat(t));\n      case \"NotSupportedError\":\n        return new vE(TE.NOT_SUPPORTED, \"\".concat(e, \": \").concat(t));\n      case \"NotReadableError\":\n        return new vE(TE.NOT_READABLE, \"\".concat(e, \": \").concat(t));\n      case \"InvalidStateError\":\n      case \"NotAllowedError\":\n      case \"PERMISSION_DENIED\":\n      case \"PermissionDeniedError\":\n        return new vE(TE.PERMISSION_DENIED, \"\".concat(e, \": \").concat(t));\n      case \"ConstraintNotSatisfiedError\":\n        return new vE(TE.CONSTRAINT_NOT_SATISFIED, \"\".concat(e, \": \").concat(t));\n      default:\n        return NE.error(\"getUserMedia unexpected error\", e), new vE(TE.UNEXPECTED_ERROR, \"\".concat(e, \": \").concat(t));\n    }\n  }\n  function tv(e, t) {\n    var i = e.getVideoTracks()[0],\n      r = e.getAudioTracks()[0],\n      n = t.getVideoTracks()[0],\n      o = t.getAudioTracks()[0];\n    o && (r && e.removeTrack(r), e.addTrack(o)), n && (i && e.removeTrack(i), e.addTrack(n));\n  }\n  var iv = new ( /*#__PURE__*/function (_gE8) {\n    _inherits(_class7, _gE8);\n    _createClass(_class7, [{\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        e !== this._state && (this.emit(gm.STATE_CHANGE, e), this._state = e);\n      }\n    }]);\n    function _class7() {\n      var _this51;\n      _classCallCheck(this, _class7);\n      _this51 = _possibleConstructorReturn(this, _getPrototypeOf(_class7).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"_state\", mm.IDLE), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"isAccessMicrophonePermission\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"isAccessCameraPermission\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"lastAccessMicrophonePermission\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"lastAccessCameraPermission\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"checkdeviceMatched\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this51)), \"deviceInfoMap\", new Map()), _this51.init().then(function () {\n        navigator.mediaDevices.addEventListener && navigator.mediaDevices.addEventListener(\"devicechange\", _this51.updateDevicesInfo.bind(_assertThisInitialized(_assertThisInitialized(_this51)))), window.setInterval(function () {\n          (HE(\"ENUMERATE_DEVICES_INTERVAL\") || cp() && ap()) && _this51.updateDevicesInfo();\n        }, HE(\"ENUMERATE_DEVICES_INTERVAL_TIME\"));\n      }).catch(function (e) {\n        return NE.error(e.toString());\n      });\n      return _this51;\n    }\n    _createClass(_class7, [{\n      key: \"enumerateDevices\",\n      value: function () {\n        var _enumerateDevices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(e, t) {\n          var i,\n            r,\n            n,\n            o,\n            s,\n            a,\n            c,\n            d,\n            _t42,\n            _t43,\n            _t44,\n            _e29,\n            _args16 = arguments;\n          return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n            while (1) switch (_context16.prev = _context16.next) {\n              case 0:\n                i = _args16.length > 2 && void 0 !== _args16[2] && _args16[2];\n                if (!(!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices)) {\n                  _context16.next = 3;\n                  break;\n                }\n                return _context16.abrupt(\"return\", new vE(TE.NOT_SUPPORTED, \"enumerateDevices() not supported.\").throw());\n              case 3:\n                _context16.next = 5;\n                return navigator.mediaDevices.enumerateDevices();\n              case 5:\n                r = _context16.sent;\n                n = this.checkMediaDeviceInfoIsOk(r);\n                o = !this.isAccessMicrophonePermission && e, s = !this.isAccessCameraPermission && t;\n                n.audio && (o = !1), n.video && (s = !1);\n                a = null, c = null, d = null;\n                if (!(!i && (o || s))) {\n                  _context16.next = 65;\n                  break;\n                }\n                if (!XT.isLocked) {\n                  _context16.next = 18;\n                  break;\n                }\n                NE.debug(\"[device manager] wait GUM lock\");\n                _context16.next = 15;\n                return XT.lock();\n              case 15:\n                _context16.t0 = _context16.sent;\n                (0, _context16.t0)();\n                NE.debug(\"[device manager] GUM unlock\");\n              case 18:\n                if (!(zT && (o = !1, this.isAccessMicrophonePermission = !0), QT && (s = !1, this.isAccessCameraPermission = !0), NE.debug(\"[device manager] check media device permissions\", e, t, o, s), o && s)) {\n                  _context16.next = 34;\n                  break;\n                }\n                _context16.prev = 19;\n                _context16.next = 22;\n                return navigator.mediaDevices.getUserMedia({\n                  audio: !0,\n                  video: !0\n                });\n              case 22:\n                d = _context16.sent;\n                _context16.next = 31;\n                break;\n              case 25:\n                _context16.prev = 25;\n                _context16.t1 = _context16[\"catch\"](19);\n                _t42 = ev(_context16.t1.name || _context16.t1.code || _context16.t1, _context16.t1.message);\n                if (!(_t42.code === TE.PERMISSION_DENIED)) {\n                  _context16.next = 30;\n                  break;\n                }\n                throw _t42;\n              case 30:\n                NE.warning(\"getUserMedia failed in getDevices\", _t42);\n              case 31:\n                this.isAccessCameraPermission = !0, this.isAccessMicrophonePermission = !0;\n                _context16.next = 64;\n                break;\n              case 34:\n                if (!o) {\n                  _context16.next = 50;\n                  break;\n                }\n                _context16.prev = 35;\n                _context16.next = 38;\n                return navigator.mediaDevices.getUserMedia({\n                  audio: e\n                });\n              case 38:\n                a = _context16.sent;\n                _context16.next = 47;\n                break;\n              case 41:\n                _context16.prev = 41;\n                _context16.t2 = _context16[\"catch\"](35);\n                _t43 = ev(_context16.t2.name || _context16.t2.code || _context16.t2, _context16.t2.message);\n                if (!(_t43.code === TE.PERMISSION_DENIED)) {\n                  _context16.next = 46;\n                  break;\n                }\n                throw _t43;\n              case 46:\n                NE.warning(\"getUserMedia failed in getDevices\", _t43);\n              case 47:\n                this.isAccessMicrophonePermission = !0;\n                _context16.next = 64;\n                break;\n              case 50:\n                if (!s) {\n                  _context16.next = 64;\n                  break;\n                }\n                _context16.prev = 51;\n                _context16.next = 54;\n                return navigator.mediaDevices.getUserMedia({\n                  video: t\n                });\n              case 54:\n                c = _context16.sent;\n                _context16.next = 63;\n                break;\n              case 57:\n                _context16.prev = 57;\n                _context16.t3 = _context16[\"catch\"](51);\n                _t44 = ev(_context16.t3.name || _context16.t3.code || _context16.t3, _context16.t3.message);\n                if (!(_t44.code === TE.PERMISSION_DENIED)) {\n                  _context16.next = 62;\n                  break;\n                }\n                throw _t44;\n              case 62:\n                NE.warning(\"getUserMedia failed in getDevices\", _t44);\n              case 63:\n                this.isAccessCameraPermission = !0;\n              case 64:\n                NE.debug(\"[device manager] mic permission\", e, \"cam permission\", t);\n              case 65:\n                _context16.prev = 65;\n                _context16.next = 68;\n                return navigator.mediaDevices.enumerateDevices();\n              case 68:\n                _e29 = _context16.sent;\n                return _context16.abrupt(\"return\", (a && a.getTracks().forEach(function (e) {\n                  return e.stop();\n                }), c && c.getTracks().forEach(function (e) {\n                  return e.stop();\n                }), d && d.getTracks().forEach(function (e) {\n                  return e.stop();\n                }), a = null, c = null, d = null, _e29));\n              case 72:\n                _context16.prev = 72;\n                _context16.t4 = _context16[\"catch\"](65);\n                a && a.getTracks().forEach(function (e) {\n                  return e.stop();\n                }), c && c.getTracks().forEach(function (e) {\n                  return e.stop();\n                }), d && d.getTracks().forEach(function (e) {\n                  return e.stop();\n                }), a = null, c = null, d = null;\n                return _context16.abrupt(\"return\", new vE(TE.ENUMERATE_DEVICES_FAILED, _context16.t4.toString()).throw());\n              case 76:\n              case \"end\":\n                return _context16.stop();\n            }\n          }, _callee16, this, [[19, 25], [35, 41], [51, 57], [65, 72]]);\n        }));\n        function enumerateDevices(_x23, _x24) {\n          return _enumerateDevices.apply(this, arguments);\n        }\n        return enumerateDevices;\n      }()\n    }, {\n      key: \"getRecordingDevices\",\n      value: function () {\n        var _getRecordingDevices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n          var e,\n            _args17 = arguments;\n          return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n            while (1) switch (_context17.prev = _context17.next) {\n              case 0:\n                e = _args17.length > 0 && void 0 !== _args17[0] && _args17[0];\n                _context17.next = 3;\n                return this.enumerateDevices(!0, !1, e);\n              case 3:\n                return _context17.abrupt(\"return\", _context17.sent.filter(function (e) {\n                  return \"audioinput\" === e.kind;\n                }));\n              case 4:\n              case \"end\":\n                return _context17.stop();\n            }\n          }, _callee17, this);\n        }));\n        function getRecordingDevices() {\n          return _getRecordingDevices.apply(this, arguments);\n        }\n        return getRecordingDevices;\n      }()\n    }, {\n      key: \"getCamerasDevices\",\n      value: function () {\n        var _getCamerasDevices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {\n          var e,\n            _args18 = arguments;\n          return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n            while (1) switch (_context18.prev = _context18.next) {\n              case 0:\n                e = _args18.length > 0 && void 0 !== _args18[0] && _args18[0];\n                _context18.next = 3;\n                return this.enumerateDevices(!1, !0, e);\n              case 3:\n                return _context18.abrupt(\"return\", _context18.sent.filter(function (e) {\n                  return \"videoinput\" === e.kind;\n                }));\n              case 4:\n              case \"end\":\n                return _context18.stop();\n            }\n          }, _callee18, this);\n        }));\n        function getCamerasDevices() {\n          return _getCamerasDevices.apply(this, arguments);\n        }\n        return getCamerasDevices;\n      }()\n    }, {\n      key: \"getSpeakers\",\n      value: function () {\n        var _getSpeakers = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {\n          var e,\n            _args19 = arguments;\n          return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n            while (1) switch (_context19.prev = _context19.next) {\n              case 0:\n                e = _args19.length > 0 && void 0 !== _args19[0] && _args19[0];\n                _context19.next = 3;\n                return this.enumerateDevices(!0, !1, e);\n              case 3:\n                return _context19.abrupt(\"return\", _context19.sent.filter(function (e) {\n                  return \"audiooutput\" === e.kind;\n                }));\n              case 4:\n              case \"end\":\n                return _context19.stop();\n            }\n          }, _callee19, this);\n        }));\n        function getSpeakers() {\n          return _getSpeakers.apply(this, arguments);\n        }\n        return getSpeakers;\n      }()\n    }, {\n      key: \"searchDeviceIdByName\",\n      value: function searchDeviceIdByName(e) {\n        var t = null;\n        return this.deviceInfoMap.forEach(function (i) {\n          i.device.label === e && (t = i.device.deviceId);\n        }), t;\n      }\n    }, {\n      key: \"getDeviceById\",\n      value: function () {\n        var _getDeviceById = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n            while (1) switch (_context20.prev = _context20.next) {\n              case 0:\n                _context20.next = 2;\n                return this.enumerateDevices(!0, !0, !0);\n              case 2:\n                t = _context20.sent.find(function (t) {\n                  return t.deviceId === e;\n                });\n                if (t) {\n                  _context20.next = 5;\n                  break;\n                }\n                throw new vE(TE.DEVICE_NOT_FOUND, \"deviceId: \".concat(e));\n              case 5:\n                return _context20.abrupt(\"return\", t);\n              case 6:\n              case \"end\":\n                return _context20.stop();\n            }\n          }, _callee20, this);\n        }));\n        function getDeviceById(_x25) {\n          return _getDeviceById.apply(this, arguments);\n        }\n        return getDeviceById;\n      }()\n    }, {\n      key: \"init\",\n      value: function () {\n        var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {\n          return _regeneratorRuntime().wrap(function _callee21$(_context21) {\n            while (1) switch (_context21.prev = _context21.next) {\n              case 0:\n                this.state = mm.INITING;\n                _context21.prev = 1;\n                _context21.next = 4;\n                return this.updateDevicesInfo();\n              case 4:\n                this.state = mm.INITEND;\n                _context21.next = 11;\n                break;\n              case 7:\n                _context21.prev = 7;\n                _context21.t0 = _context21[\"catch\"](1);\n                if (NE.warning(\"Device Detection functionality cannot start properly.\", _context21.t0.toString()), this.state = mm.IDLE, !function () {\n                  if (\"boolean\" == typeof isSecureContext) return isSecureContext;\n                  return \"https:\" === location.protocol || \"file:\" === location.protocol || \"localhost\" === location.hostname || \"127.0.0.1\" === location.hostname || \"::1\" === location.hostname;\n                }()) {\n                  new vE(TE.WEB_SECURITY_RESTRICT, \"Your context is limited by web security, please try using https protocol or localhost.\").throw();\n                }\n                throw _context21.t0;\n              case 11:\n              case \"end\":\n                return _context21.stop();\n            }\n          }, _callee21, this, [[1, 7]]);\n        }));\n        function init() {\n          return _init.apply(this, arguments);\n        }\n        return init;\n      }()\n    }, {\n      key: \"updateDevicesInfo\",\n      value: function () {\n        var _updateDevicesInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {\n          var _this52 = this;\n          var e, t, i, _t45, _i30, r;\n          return _regeneratorRuntime().wrap(function _callee22$(_context22) {\n            while (1) switch (_context22.prev = _context22.next) {\n              case 0:\n                _context22.next = 2;\n                return this.enumerateDevices(!0, !0, !0);\n              case 2:\n                e = _context22.sent;\n                t = Date.now();\n                i = [];\n                if (e[0] && e[0].label && !1 === this.checkdeviceMatched) {\n                  this.checkdeviceMatched = !0;\n                  _t45 = e.find(function (e) {\n                    return \"audioinput\" === e.kind && \"default\" === e.deviceId;\n                  }), _i30 = e.find(function (e) {\n                    return \"audiooutput\" === e.kind && \"default\" === e.deviceId;\n                  });\n                  _t45 && _i30 ? _i30.groupId === _t45.groupId ? NE.debug(\"[device-check] default input \".concat(_t45.label, \" and output \").concat(_i30.label, \" is the same group\")) : NE.warning(\"[device-check] default input \".concat(_t45.label, \" and output \").concat(_i30.label, \" is not the same group\")) : NE.debug(\"[device-check] default input or output not found\");\n                }\n                r = this.checkMediaDeviceInfoIsOk(e);\n                if (!(e.forEach(function (e) {\n                  if (!e.deviceId) return;\n                  var r = _this52.deviceInfoMap.get(\"\".concat(e.kind, \"_\").concat(e.deviceId));\n                  if (\"ACTIVE\" !== (r ? r.state : \"INACTIVE\")) {\n                    var _r17 = {\n                      initAt: t,\n                      updateAt: t,\n                      device: e,\n                      state: \"ACTIVE\"\n                    };\n                    _this52.deviceInfoMap.set(\"\".concat(e.kind, \"_\").concat(e.deviceId), _r17), i.push(_r17);\n                  }\n                  r && (r.updateAt = t);\n                }), this.deviceInfoMap.forEach(function (e, r) {\n                  \"ACTIVE\" === e.state && e.updateAt !== t && (e.state = \"INACTIVE\", i.push(e));\n                }), this.state !== mm.INITEND)) {\n                  _context22.next = 9;\n                  break;\n                }\n                return _context22.abrupt(\"return\", (r.audio && (this.lastAccessMicrophonePermission = !0, this.isAccessMicrophonePermission = !0), void (r.video && (this.lastAccessCameraPermission = !0, this.isAccessCameraPermission = !0))));\n              case 9:\n                i.forEach(function (e) {\n                  switch (e.device.kind) {\n                    case \"audioinput\":\n                      _this52.lastAccessMicrophonePermission && _this52.isAccessMicrophonePermission && _this52.emit(gm.RECORDING_DEVICE_CHANGED, e);\n                      break;\n                    case \"videoinput\":\n                      _this52.lastAccessCameraPermission && _this52.isAccessCameraPermission && _this52.emit(gm.CAMERA_DEVICE_CHANGED, e);\n                      break;\n                    case \"audiooutput\":\n                      _this52.lastAccessMicrophonePermission && _this52.isAccessMicrophonePermission && _this52.emit(gm.PLAYOUT_DEVICE_CHANGED, e);\n                  }\n                }), r.audio && (this.lastAccessMicrophonePermission = !0, this.isAccessMicrophonePermission = !0), r.video && (this.lastAccessCameraPermission = !0, this.isAccessCameraPermission = !0);\n              case 10:\n              case \"end\":\n                return _context22.stop();\n            }\n          }, _callee22, this);\n        }));\n        function updateDevicesInfo() {\n          return _updateDevicesInfo.apply(this, arguments);\n        }\n        return updateDevicesInfo;\n      }()\n    }, {\n      key: \"checkMediaDeviceInfoIsOk\",\n      value: function checkMediaDeviceInfoIsOk(e) {\n        var t = e.filter(function (e) {\n            return \"audioinput\" === e.kind;\n          }),\n          i = e.filter(function (e) {\n            return \"videoinput\" === e.kind;\n          }),\n          r = {\n            audio: !1,\n            video: !1\n          };\n        var _iterator3 = _createForOfIteratorHelper(t),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _e30 = _step3.value;\n            if (_e30.label && _e30.deviceId) {\n              r.audio = !0;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        var _iterator4 = _createForOfIteratorHelper(i),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _e31 = _step4.value;\n            if (_e31.label && _e31.deviceId) {\n              r.video = !0;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n        return r;\n      }\n    }]);\n    return _class7;\n  }(gE))();\n  var rv = [\"play\", \"playing\", \"loadeddata\", \"canplay\", \"pause\", \"stalled\", \"suspend\", \"waiting\", \"abort\", \"emptied\", \"ended\", \"error\"],\n    nv = new ( /*#__PURE__*/function () {\n      function _class8() {\n        var _this53 = this;\n        _classCallCheck(this, _class8);\n        mp(this, \"onAutoplayFailed\", void 0), mp(this, \"elementMap\", new Map()), mp(this, \"elementStateMap\", new Map()), mp(this, \"elementsNeedToResume\", []), mp(this, \"sinkIdMap\", new Map()), mp(this, \"autoResumeAfterInterruption\", function () {\n          Array.from(_this53.elementMap.entries()).forEach(function (e) {\n            var _e32 = _slicedToArray(e, 2),\n              t = _e32[0],\n              i = _e32[1];\n            var r = _this53.elementStateMap.get(t),\n              n = i.srcObject.getAudioTracks()[0];\n            ep() ? n && \"live\" === n.readyState && \"running\" === LT.curState && (NE.debug(\"auto resume after interruption for iOS 15\"), i.pause(), i.play()) : r && \"paused\" === r && n && \"live\" === n.readyState && \"running\" === LT.curState && (NE.debug(\"auto resume after interruption for iOS\"), i.play());\n          });\n        }), mp(this, \"autoResumeAfterInterruptionOnIOS15\", function () {\n          Array.from(_this53.elementMap.entries()).forEach(function (e) {\n            var _e33 = _slicedToArray(e, 2),\n              t = _e33[0],\n              i = _e33[1];\n            var r = i.srcObject.getAudioTracks()[0];\n            r && \"live\" === r.readyState && (NE.debug(\"auto resume after interruption inside autoResumeAfterInterruptionOnIOS15\"), i.pause(), i.play());\n          });\n        }), this.autoResumeAudioElement(), LT.on(CT.IOS_INTERRUPTION_END, this.autoResumeAfterInterruption), LT.on(CT.IOS_15_INTERRUPTION_END, this.autoResumeAfterInterruptionOnIOS15), LT.on(CT.STATE_CHANGE, function () {\n          Zh() && \"suspended\" === LT.prevState && \"running\" === LT.curState && _this53.autoResumeAfterInterruption();\n        });\n      }\n      _createClass(_class8, [{\n        key: \"setSinkID\",\n        value: function () {\n          var _setSinkID = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee23(e, t) {\n            var i;\n            return _regeneratorRuntime().wrap(function _callee23$(_context23) {\n              while (1) switch (_context23.prev = _context23.next) {\n                case 0:\n                  i = this.elementMap.get(e);\n                  if (!(this.sinkIdMap.set(e, t), i)) {\n                    _context23.next = 10;\n                    break;\n                  }\n                  _context23.prev = 2;\n                  _context23.next = 5;\n                  return i.setSinkId(t);\n                case 5:\n                  _context23.next = 10;\n                  break;\n                case 7:\n                  _context23.prev = 7;\n                  _context23.t0 = _context23[\"catch\"](2);\n                  throw new vE(TE.PERMISSION_DENIED, \"can not set sink id: \" + _context23.t0.toString());\n                case 10:\n                case \"end\":\n                  return _context23.stop();\n              }\n            }, _callee23, this, [[2, 7]]);\n          }));\n          function setSinkID(_x26, _x27) {\n            return _setSinkID.apply(this, arguments);\n          }\n          return setSinkID;\n        }()\n      }, {\n        key: \"play\",\n        value: function play(e, t, i, r) {\n          var _this54 = this;\n          if (this.elementMap.has(t)) return;\n          var n = document.createElement(\"audio\");\n          n.autoplay = !0, n.srcObject = new MediaStream([e]), this.bindAudioElementEvents(t, n), this.elementMap.set(t, n), this.elementStateMap.set(t, am.INIT), this.setVolume(t, i);\n          var o = this.sinkIdMap.get(t);\n          if (o) try {\n            n.setSinkId(o).catch(function (e) {\n              NE.warning(\"[\".concat(t, \"] set sink id failed\"), e.toString());\n            });\n          } catch (e) {\n            NE.warning(\"[\".concat(t, \"] set sink id failed\"), e.toString());\n          }\n          var s = n.play();\n          s && s.then && s.catch(function (e) {\n            r && IT.autoplayFailed(r, \"audio\", e.message, t), NE.warning(\"audio element play warning\", e.toString()), _this54.elementMap.has(t) && \"NotAllowedError\" === e.name && (NE.warning(\"detected audio element autoplay failed\"), _this54.elementsNeedToResume.push(n), YR(function () {\n              _this54.onAutoplayFailed && _this54.onAutoplayFailed(), fT();\n            }));\n          });\n        }\n      }, {\n        key: \"updateTrack\",\n        value: function updateTrack(e, t) {\n          var i = this.elementMap.get(e);\n          i && (i.srcObject = new MediaStream([t]));\n        }\n      }, {\n        key: \"isPlaying\",\n        value: function isPlaying(e) {\n          return this.elementMap.has(e);\n        }\n      }, {\n        key: \"setVolume\",\n        value: function setVolume(e, t) {\n          var i = this.elementMap.get(e);\n          i && (t = Math.max(0, Math.min(100, t)), i.volume = t / 100);\n        }\n      }, {\n        key: \"stop\",\n        value: function stop(e) {\n          var t = this.elementMap.get(e);\n          if (this.sinkIdMap.delete(e), !t) return;\n          var i = this.elementsNeedToResume.indexOf(t);\n          this.elementsNeedToResume.splice(i, 1), t.srcObject = null, t.remove(), this.elementMap.delete(e), this.elementStateMap.delete(e);\n        }\n      }, {\n        key: \"bindAudioElementEvents\",\n        value: function bindAudioElementEvents(e, t) {\n          var _this55 = this;\n          rv.forEach(function (i) {\n            t.addEventListener(i, function (i) {\n              var r = _this55.elementStateMap.get(e),\n                n = \"pause\" === i.type ? \"paused\" : i.type;\n              if (NE.debug(\"[\".concat(e, \"] audio-element-status change \").concat(r, \" => \").concat(n)), \"error\" === i.type) {\n                var _i31 = null == t ? void 0 : t.error;\n                _i31 && NE.error(\"[\".concat(e, \"] media error, code: \").concat(_i31.code, \", message: \").concat(_i31.message));\n              }\n              _this55.elementStateMap.set(e, n);\n            });\n          });\n        }\n      }, {\n        key: \"getPlayerState\",\n        value: function getPlayerState(e) {\n          return this.elementStateMap.get(e) || \"uninit\";\n        }\n      }, {\n        key: \"autoResumeAudioElement\",\n        value: function autoResumeAudioElement() {\n          var _this56 = this;\n          var e = function e() {\n            _this56.elementsNeedToResume.forEach(function (e) {\n              e.play().then(function (e) {\n                NE.debug(\"Auto resume audio element success\");\n              }).catch(function (e) {\n                NE.warning(\"Auto resume audio element failed!\", e);\n              });\n            }), _this56.elementsNeedToResume = [];\n          };\n          new Cl(function (e) {\n            document.body ? e() : window.addEventListener(\"load\", function () {\n              return e();\n            });\n          }).then(function () {\n            dp() ? document.body.addEventListener(\"click\", e, !0) : (document.body.addEventListener(\"touchstart\", e, !0), document.body.addEventListener(\"mousedown\", e, !0));\n          });\n        }\n      }]);\n      return _class8;\n    }())();\n  function ov() {\n    return function (e, t, i) {\n      var r = i.value;\n      return \"function\" == typeof r && (i.value = function () {\n        this._isClosed && new vE(TE.INVALID_OPERATION, \"[\".concat(this.getTrackId(), \"] cannot operate a closed track\")).print(\"warning\");\n        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n        var n = r.apply(this, t);\n        return n instanceof Cl ? new Cl(function (e, t) {\n          n.then(e).catch(t);\n        }) : n;\n      }), i;\n    };\n  }\n  var sv,\n    av,\n    cv,\n    dv,\n    uv,\n    lv,\n    hv,\n    pv,\n    _v,\n    Ev,\n    fv,\n    mv,\n    gv,\n    Sv,\n    Tv,\n    vv,\n    Rv,\n    Iv,\n    yv,\n    Cv,\n    Av,\n    Ov,\n    bv,\n    wv,\n    Nv,\n    Dv,\n    Pv,\n    Lv,\n    kv,\n    Mv,\n    Uv,\n    xv,\n    Vv,\n    jv,\n    Fv,\n    Bv,\n    Gv,\n    Wv = Hi(\"Array\").values,\n    Hv = $n,\n    Kv = Ge,\n    Yv = u,\n    qv = Wv,\n    Jv = Array.prototype,\n    Xv = {\n      DOMTokenList: !0,\n      NodeList: !0\n    },\n    zv = function zv(e) {\n      var t = e.values;\n      return e === Jv || Yv(Jv, e) && t === Jv.values || Kv(Xv, Hv(e)) ? qv : t;\n    };\n  function Qv(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function Zv(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? Qv(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : Qv(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var $v = /*#__PURE__*/function (_gE9) {\n    _inherits($v, _gE9);\n    function $v(e) {\n      var _this57;\n      _classCallCheck(this, $v);\n      _this57 = _possibleConstructorReturn(this, _getPrototypeOf($v).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this57)), \"name\", \"VideoProcessorDestination\"), mp(_assertThisInitialized(_assertThisInitialized(_this57)), \"ID\", \"0\"), mp(_assertThisInitialized(_assertThisInitialized(_this57)), \"_source\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this57)), \"videoContext\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this57)), \"inputTrack\", void 0), _this57.videoContext = e;\n      return _this57;\n    }\n    _createClass($v, [{\n      key: \"pipe\",\n      value: function pipe() {\n        throw new vE(TE.NOT_SUPPORTED, \"VideoProcessor cannot pipe to any other Processor\");\n      }\n    }, {\n      key: \"unpipe\",\n      value: function unpipe() {\n        throw new vE(TE.NOT_SUPPORTED, \"VideoProcessor cannot unpipe to any other Processor\");\n      }\n    }, {\n      key: \"enable\",\n      value: function enable() {}\n    }, {\n      key: \"disable\",\n      value: function disable() {}\n    }, {\n      key: \"updateInput\",\n      value: function updateInput(e) {\n        if (e.context !== this.videoContext) throw new Error(\"ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\\nProbably you are making pipeline like this:\\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).\");\n        e.track && e.track !== this.inputTrack && (this.videoContext.chained = !0, this.inputTrack = e.track, this.emit(Ng.ON_TRACK, e.track));\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.inputTrack = void 0, this.videoContext.chained = !1, this.emit(Ng.ON_TRACK, void 0);\n      }\n    }, {\n      key: \"kind\",\n      get: function get() {\n        return \"video\";\n      }\n    }, {\n      key: \"enabled\",\n      get: function get() {\n        return !0;\n      }\n    }]);\n    return $v;\n  }(gE);\n  var eR = /*#__PURE__*/function (_gE10) {\n    _inherits(eR, _gE10);\n    _createClass(eR, [{\n      key: \"chained\",\n      set: function set(e) {\n        this._chained = e;\n      },\n      get: function get() {\n        return this._chained;\n      }\n    }]);\n    function eR(e, t) {\n      var _this58;\n      _classCallCheck(this, eR);\n      _this58 = _possibleConstructorReturn(this, _getPrototypeOf(eR).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this58)), \"constraintsMap\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this58)), \"statsRegistry\", []), mp(_assertThisInitialized(_assertThisInitialized(_this58)), \"usageRegistry\", []), mp(_assertThisInitialized(_assertThisInitialized(_this58)), \"trackId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this58)), \"direction\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this58)), \"_chained\", !1), _this58.trackId = e, _this58.direction = t;\n      return _this58;\n    }\n    _createClass(eR, [{\n      key: \"getConstraints\",\n      value: function () {\n        var _getConstraints = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee24() {\n          return _regeneratorRuntime().wrap(function _callee24$(_context24) {\n            while (1) switch (_context24.prev = _context24.next) {\n              case 0:\n                _context24.next = 2;\n                return FR(this, Dg.REQUEST_CONSTRAINTS);\n              case 2:\n                return _context24.abrupt(\"return\", _context24.sent);\n              case 3:\n              case \"end\":\n                return _context24.stop();\n            }\n          }, _callee24, this);\n        }));\n        function getConstraints() {\n          return _getConstraints.apply(this, arguments);\n        }\n        return getConstraints;\n      }()\n    }, {\n      key: \"requestApplyConstraints\",\n      value: function () {\n        var _requestApplyConstraints = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee25(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee25$(_context25) {\n            while (1) switch (_context25.prev = _context25.next) {\n              case 0:\n                return _context25.abrupt(\"return\", (NE.info(\"processor \".concat(t.name, \" requestApplyConstraints for \").concat(this.trackId)), e && this.constraintsMap.set(t, e), BR(this, Dg.REQUEST_UPDATE_CONSTRAINTS, Array.from(zv(i = this.constraintsMap).call(i)))));\n              case 1:\n              case \"end\":\n                return _context25.stop();\n            }\n          }, _callee25, this);\n        }));\n        function requestApplyConstraints(_x28, _x29) {\n          return _requestApplyConstraints.apply(this, arguments);\n        }\n        return requestApplyConstraints;\n      }()\n    }, {\n      key: \"requestRevertConstraints\",\n      value: function () {\n        var _requestRevertConstraints = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee26(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee26$(_context26) {\n            while (1) switch (_context26.prev = _context26.next) {\n              case 0:\n                if (!this.constraintsMap.has(e)) {\n                  _context26.next = 2;\n                  break;\n                }\n                return _context26.abrupt(\"return\", (NE.info(\"processor \".concat(e.name, \" requestRevertConstraints for \").concat(this.trackId)), this.constraintsMap.delete(e), BR(this, Dg.REQUEST_UPDATE_CONSTRAINTS, Array.from(zv(t = this.constraintsMap).call(t)))));\n              case 2:\n              case \"end\":\n                return _context26.stop();\n            }\n          }, _callee26, this);\n        }));\n        function requestRevertConstraints(_x30) {\n          return _requestRevertConstraints.apply(this, arguments);\n        }\n        return requestRevertConstraints;\n      }()\n    }, {\n      key: \"registerStats\",\n      value: function registerStats(e, t, i) {\n        this.statsRegistry.find(function (i) {\n          return i.processorID === e.ID && i.processorName === e.name && i.type === t;\n        }) || this.statsRegistry.push({\n          processorName: e.name,\n          processorID: e.ID,\n          type: t,\n          cb: i\n        });\n      }\n    }, {\n      key: \"unregisterStats\",\n      value: function unregisterStats(e, t) {\n        var i = this.statsRegistry.findIndex(function (i) {\n          return i.processorID === e.ID && i.processorName === e.name && i.type === t;\n        });\n        -1 !== i && this.statsRegistry.splice(i, 1);\n      }\n    }, {\n      key: \"gatherStats\",\n      value: function gatherStats() {\n        var e = [];\n        var _iterator5 = _createForOfIteratorHelper(this.statsRegistry),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _step5$value = _step5.value,\n              t = _step5$value.processorID,\n              i = _step5$value.processorName,\n              _r18 = _step5$value.type,\n              _n9 = _step5$value.cb;\n            try {\n              var _o6 = _n9();\n              e.push({\n                processorID: t,\n                processorName: i,\n                type: _r18,\n                stats: _o6\n              });\n            } catch (e) {\n              NE.error(new vE(TE.UNEXPECTED_ERROR, e.message));\n            }\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        return e;\n      }\n    }, {\n      key: \"registerUsage\",\n      value: function registerUsage(e, t) {\n        this.usageRegistry.find(function (t) {\n          return t.processorID === e.ID && t.processorName === e.name;\n        }) || this.usageRegistry.push({\n          processorID: e.ID,\n          processorName: e.name,\n          cb: t\n        });\n      }\n    }, {\n      key: \"unregisterUsage\",\n      value: function unregisterUsage(e) {\n        var t = this.usageRegistry.findIndex(function (t) {\n          return t.processorID === e.ID && t.processorName === e.name;\n        });\n        -1 !== t && this.usageRegistry.splice(t, 1);\n      }\n    }, {\n      key: \"gatherUsage\",\n      value: function () {\n        var _gatherUsage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee27() {\n          var e, _iterator6, _step6, t, i;\n          return _regeneratorRuntime().wrap(function _callee27$(_context27) {\n            while (1) switch (_context27.prev = _context27.next) {\n              case 0:\n                e = [];\n                if (this.chained) {\n                  _context27.next = 3;\n                  break;\n                }\n                return _context27.abrupt(\"return\", []);\n              case 3:\n                _iterator6 = _createForOfIteratorHelper(this.usageRegistry);\n                _context27.prev = 4;\n                _iterator6.s();\n              case 6:\n                if ((_step6 = _iterator6.n()).done) {\n                  _context27.next = 23;\n                  break;\n                }\n                t = _step6.value.cb;\n                _context27.prev = 8;\n                i = t();\n                _context27.t0 = i instanceof Cl;\n                if (!_context27.t0) {\n                  _context27.next = 15;\n                  break;\n                }\n                _context27.next = 14;\n                return i;\n              case 14:\n                i = _context27.sent;\n              case 15:\n                e.push(Zv(Zv({}, i), {}, {\n                  direction: this.direction\n                }));\n                _context27.next = 21;\n                break;\n              case 18:\n                _context27.prev = 18;\n                _context27.t1 = _context27[\"catch\"](8);\n                NE.error(\"gather extension usage error\", _context27.t1);\n              case 21:\n                _context27.next = 6;\n                break;\n              case 23:\n                _context27.next = 28;\n                break;\n              case 25:\n                _context27.prev = 25;\n                _context27.t2 = _context27[\"catch\"](4);\n                _iterator6.e(_context27.t2);\n              case 28:\n                _context27.prev = 28;\n                _iterator6.f();\n                return _context27.finish(28);\n              case 31:\n                return _context27.abrupt(\"return\", e);\n              case 32:\n              case \"end\":\n                return _context27.stop();\n            }\n          }, _callee27, this, [[4, 25, 28, 31], [8, 18]]);\n        }));\n        function gatherUsage() {\n          return _gatherUsage.apply(this, arguments);\n        }\n        return gatherUsage;\n      }()\n    }, {\n      key: \"getDirection\",\n      value: function getDirection() {\n        return this.direction;\n      }\n    }]);\n    return eR;\n  }(gE);\n  var tR = /*#__PURE__*/function (_gE11) {\n    _inherits(tR, _gE11);\n    function tR(e) {\n      var _this59;\n      _classCallCheck(this, tR);\n      _this59 = _possibleConstructorReturn(this, _getPrototypeOf(tR).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this59)), \"name\", \"AudioProcessorDestination\"), mp(_assertThisInitialized(_assertThisInitialized(_this59)), \"ID\", \"0\"), mp(_assertThisInitialized(_assertThisInitialized(_this59)), \"inputTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this59)), \"inputNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this59)), \"audioProcessorContext\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this59)), \"_source\", void 0), _this59.audioProcessorContext = e;\n      return _this59;\n    }\n    _createClass(tR, [{\n      key: \"pipe\",\n      value: function pipe() {\n        throw new vE(TE.NOT_SUPPORTED, \"AudioProcessorDestination cannot pipe to any other Processor\");\n      }\n    }, {\n      key: \"unpipe\",\n      value: function unpipe() {\n        throw new vE(TE.NOT_SUPPORTED, \"AudioProcessor cannot unpipe to any other Processor\");\n      }\n    }, {\n      key: \"enable\",\n      value: function enable() {}\n    }, {\n      key: \"disable\",\n      value: function disable() {}\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.inputTrack = void 0, this.inputNode = void 0, this.audioProcessorContext.chained = !1, this.emit(Ng.ON_TRACK, void 0), this.emit(Ng.ON_NODE, void 0);\n      }\n    }, {\n      key: \"updateInput\",\n      value: function updateInput(e) {\n        if (e.context !== this.audioProcessorContext) throw new Error(\"ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).\");\n        e.track && this.inputTrack !== e.track && (this.audioProcessorContext.chained = !0, this.inputTrack = e.track, this.emit(Ng.ON_TRACK, this.inputTrack)), e.node && this.inputNode !== e.node && (this.audioProcessorContext.chained = !0, this.inputNode = e.node, this.emit(Ng.ON_NODE, this.inputNode));\n      }\n    }, {\n      key: \"kind\",\n      get: function get() {\n        return \"audio\";\n      }\n    }, {\n      key: \"enabled\",\n      get: function get() {\n        return !0;\n      }\n    }]);\n    return tR;\n  }(gE);\n  var iR = /*#__PURE__*/function (_gE12) {\n    _inherits(iR, _gE12);\n    _createClass(iR, [{\n      key: \"chained\",\n      set: function set(e) {\n        this._chained = e;\n      },\n      get: function get() {\n        return this._chained;\n      }\n    }]);\n    function iR(e, t, i) {\n      var _this60;\n      _classCallCheck(this, iR);\n      _this60 = _possibleConstructorReturn(this, _getPrototypeOf(iR).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"constraintsMap\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"statsRegistry\", []), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"audioContext\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"trackId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"direction\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"usageRegistry\", []), mp(_assertThisInitialized(_assertThisInitialized(_this60)), \"_chained\", !1), _this60.audioContext = e, _this60.trackId = t, _this60.direction = i;\n      return _this60;\n    }\n    _createClass(iR, [{\n      key: \"getConstraints\",\n      value: function () {\n        var _getConstraints2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee28() {\n          return _regeneratorRuntime().wrap(function _callee28$(_context28) {\n            while (1) switch (_context28.prev = _context28.next) {\n              case 0:\n                return _context28.abrupt(\"return\", FR(this, Dg.REQUEST_CONSTRAINTS));\n              case 1:\n              case \"end\":\n                return _context28.stop();\n            }\n          }, _callee28, this);\n        }));\n        function getConstraints() {\n          return _getConstraints2.apply(this, arguments);\n        }\n        return getConstraints;\n      }()\n    }, {\n      key: \"getAudioContext\",\n      value: function getAudioContext() {\n        return this.audioContext;\n      }\n    }, {\n      key: \"requestApplyConstraints\",\n      value: function () {\n        var _requestApplyConstraints2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee29(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee29$(_context29) {\n            while (1) switch (_context29.prev = _context29.next) {\n              case 0:\n                return _context29.abrupt(\"return\", (NE.info(\"processor \".concat(t.name, \" requestApplyConstraints for \").concat(this.trackId)), e && this.constraintsMap.set(t, e), BR(this, Dg.REQUEST_UPDATE_CONSTRAINTS, Array.from(zv(i = this.constraintsMap).call(i)))));\n              case 1:\n              case \"end\":\n                return _context29.stop();\n            }\n          }, _callee29, this);\n        }));\n        function requestApplyConstraints(_x31, _x32) {\n          return _requestApplyConstraints2.apply(this, arguments);\n        }\n        return requestApplyConstraints;\n      }()\n    }, {\n      key: \"requestRevertConstraints\",\n      value: function () {\n        var _requestRevertConstraints2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee30(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee30$(_context30) {\n            while (1) switch (_context30.prev = _context30.next) {\n              case 0:\n                if (!this.constraintsMap.has(e)) {\n                  _context30.next = 2;\n                  break;\n                }\n                return _context30.abrupt(\"return\", (this.constraintsMap.delete(e), BR(this, Dg.REQUEST_UPDATE_CONSTRAINTS, Array.from(zv(t = this.constraintsMap).call(t)))));\n              case 2:\n              case \"end\":\n                return _context30.stop();\n            }\n          }, _callee30, this);\n        }));\n        function requestRevertConstraints(_x33) {\n          return _requestRevertConstraints2.apply(this, arguments);\n        }\n        return requestRevertConstraints;\n      }()\n    }, {\n      key: \"registerStats\",\n      value: function registerStats(e, t, i) {\n        this.statsRegistry.find(function (i) {\n          return i.processorID === e.ID && i.processorName === e.name && i.type === t;\n        }) || this.statsRegistry.push({\n          processorName: e.name,\n          processorID: e.ID,\n          type: t,\n          cb: i\n        });\n      }\n    }, {\n      key: \"unregisterStats\",\n      value: function unregisterStats(e, t) {\n        var i = this.statsRegistry.findIndex(function (i) {\n          return i.processorID === e.ID && i.processorName === e.name && i.type === t;\n        });\n        -1 !== i && this.statsRegistry.splice(i, 1);\n      }\n    }, {\n      key: \"gatherStats\",\n      value: function gatherStats() {\n        var e = [];\n        var _iterator7 = _createForOfIteratorHelper(this.statsRegistry),\n          _step7;\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var _step7$value = _step7.value,\n              t = _step7$value.processorID,\n              i = _step7$value.processorName,\n              _r19 = _step7$value.type,\n              _n10 = _step7$value.cb;\n            try {\n              var _o7 = _n10();\n              e.push({\n                processorID: t,\n                processorName: i,\n                type: _r19,\n                stats: _o7\n              });\n            } catch (e) {\n              NE.error(new vE(TE.UNEXPECTED_ERROR, e.message));\n            }\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n        return e;\n      }\n    }, {\n      key: \"registerUsage\",\n      value: function registerUsage(e, t) {\n        this.usageRegistry.find(function (t) {\n          return t.processorID === e.ID && t.processorName === e.name;\n        }) || this.usageRegistry.push({\n          processorID: e.ID,\n          processorName: e.name,\n          cb: t\n        });\n      }\n    }, {\n      key: \"unregisterUsage\",\n      value: function unregisterUsage(e) {\n        var t = this.usageRegistry.findIndex(function (t) {\n          return t.processorID === e.ID && t.processorName === e.name;\n        });\n        -1 !== t && this.usageRegistry.splice(t, 1);\n      }\n    }, {\n      key: \"gatherUsage\",\n      value: function () {\n        var _gatherUsage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee31() {\n          var e, _iterator8, _step8, t, i;\n          return _regeneratorRuntime().wrap(function _callee31$(_context31) {\n            while (1) switch (_context31.prev = _context31.next) {\n              case 0:\n                e = [];\n                if (this.chained) {\n                  _context31.next = 3;\n                  break;\n                }\n                return _context31.abrupt(\"return\", []);\n              case 3:\n                _iterator8 = _createForOfIteratorHelper(this.usageRegistry);\n                _context31.prev = 4;\n                _iterator8.s();\n              case 6:\n                if ((_step8 = _iterator8.n()).done) {\n                  _context31.next = 23;\n                  break;\n                }\n                t = _step8.value.cb;\n                _context31.prev = 8;\n                i = t();\n                _context31.t0 = i instanceof Cl;\n                if (!_context31.t0) {\n                  _context31.next = 15;\n                  break;\n                }\n                _context31.next = 14;\n                return i;\n              case 14:\n                i = _context31.sent;\n              case 15:\n                e.push(Zv(Zv({}, i), {}, {\n                  direction: this.direction\n                }));\n                _context31.next = 21;\n                break;\n              case 18:\n                _context31.prev = 18;\n                _context31.t1 = _context31[\"catch\"](8);\n                NE.error(\"gather extension usage error\", _context31.t1);\n              case 21:\n                _context31.next = 6;\n                break;\n              case 23:\n                _context31.next = 28;\n                break;\n              case 25:\n                _context31.prev = 25;\n                _context31.t2 = _context31[\"catch\"](4);\n                _iterator8.e(_context31.t2);\n              case 28:\n                _context31.prev = 28;\n                _iterator8.f();\n                return _context31.finish(28);\n              case 31:\n                return _context31.abrupt(\"return\", e);\n              case 32:\n              case \"end\":\n                return _context31.stop();\n            }\n          }, _callee31, this, [[4, 25, 28, 31], [8, 18]]);\n        }));\n        function gatherUsage() {\n          return _gatherUsage2.apply(this, arguments);\n        }\n        return gatherUsage;\n      }()\n    }, {\n      key: \"getDirection\",\n      value: function getDirection() {\n        return this.direction;\n      }\n    }]);\n    return iR;\n  }(gE);\n  var rR = /*#__PURE__*/function (_gE13) {\n    _inherits(rR, _gE13);\n    _createClass(rR, [{\n      key: \"isPlayed\",\n      get: function get() {\n        return !0;\n      }\n    }, {\n      key: \"isFreeze\",\n      get: function get() {\n        return !1;\n      }\n    }]);\n    function rR() {\n      var _this61;\n      _classCallCheck(this, rR);\n      _this61 = _possibleConstructorReturn(this, _getPrototypeOf(rR).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this61)), \"context\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this61)), \"processSourceNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this61)), \"outputTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this61)), \"processedNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this61)), \"clonedTrack\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this61)), \"outputNode\", void 0), _this61.outputNode = new nR();\n      return _this61;\n    }\n    _createClass(rR, [{\n      key: \"setVolume\",\n      value: function setVolume() {}\n    }, {\n      key: \"createOutputTrack\",\n      value: function createOutputTrack() {\n        throw new vE(TE.NOT_SUPPORTED, \"can not create output MediaStreamTrack when WebAudio disabled\");\n      }\n    }, {\n      key: \"getOriginVolumeLevel\",\n      value: function getOriginVolumeLevel() {\n        return 0;\n      }\n    }, {\n      key: \"getAccurateVolumeLevel\",\n      value: function getAccurateVolumeLevel() {\n        return 0;\n      }\n    }, {\n      key: \"stopGetAudioBuffer\",\n      value: function stopGetAudioBuffer() {}\n    }, {\n      key: \"startGetAudioBuffer\",\n      value: function startGetAudioBuffer() {}\n    }, {\n      key: \"play\",\n      value: function play() {}\n    }, {\n      key: \"stop\",\n      value: function stop() {}\n    }, {\n      key: \"destroy\",\n      value: function destroy() {}\n    }, {\n      key: \"updateTrack\",\n      value: function updateTrack() {}\n    }, {\n      key: \"updateOriginTrack\",\n      value: function updateOriginTrack() {}\n    }, {\n      key: \"createMediaStreamSourceNode\",\n      value: function createMediaStreamSourceNode() {}\n    }]);\n    return rR;\n  }(gE);\n  var nR = /*#__PURE__*/function () {\n    function nR() {\n      _classCallCheck(this, nR);\n    }\n    _createClass(nR, [{\n      key: \"disconnect\",\n      value: function disconnect() {}\n    }, {\n      key: \"connect\",\n      value: function connect() {}\n    }]);\n    return nR;\n  }();\n  function oR(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function sR(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? oR(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : oR(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var aR = (sv = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      },\n      throttleTime: 300\n    }), av = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), cv = ov(), dv = bT(\"LocalAudioTrack\", \"_enabledMutex\"), uv = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), lv = ov(), hv = bT(\"LocalAudioTrack\", \"_enabledMutex\"), pv = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), _v = ov(), Ev = ov(), fv = ov(), mv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), gv = ov(), Sv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), Tv = ov(), vv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), Rv = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t.name];\n      }\n    }), Iv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), ZS((yv = /*#__PURE__*/function (_wT) {\n      _inherits(yv, _wT);\n      _createClass(yv, [{\n        key: \"isPlaying\",\n        get: function get() {\n          return this._useAudioElement ? nv.isPlaying(this.getTrackId()) : this._source.isPlayed;\n        }\n      }, {\n        key: \"__className__\",\n        get: function get() {\n          return \"LocalAudioTrack\";\n        }\n      }]);\n      function yv(e, t, i, r) {\n        var _this62;\n        _classCallCheck(this, yv);\n        _this62 = _possibleConstructorReturn(this, _getPrototypeOf(yv).call(this, e, i)), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"trackMediaType\", \"audio\"), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_encoderConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_source\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_enabled\", !0), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_volume\", 100), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_useAudioElement\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_bypassWebAudio\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"processor\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"processorContext\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"processorDestination\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this62)), \"_getOriginVolumeLevel\", void 0), _this62._encoderConfig = t, _this62._getOriginVolumeLevel = !!r, HE(\"DISABLE_WEBAUDIO\") ? (_this62._source = new rR(), _this62._useAudioElement = !0, _this62._bypassWebAudio = !0) : (_this62._source = new WT(e, !1, _this62._getOriginVolumeLevel ? e : void 0), HE(\"LOCAL_AUDIO_TRACK_USES_WEB_AUDIO\") || (_this62._useAudioElement = !0)), _this62.processorContext = new iR(_this62._source.context, _this62.getTrackId(), \"local\"), _this62.processorDestination = new tR(_this62.processorContext), _this62.bindProcessorDestinationEvents(), _this62._source.on(km.UPDATE_SOURCE, function () {\n          _this62.processor && _this62.processor.updateInput({\n            node: _this62._source.processSourceNode,\n            context: _this62.processorContext\n          });\n        });\n        return _this62;\n      }\n      _createClass(yv, [{\n        key: \"setVolume\",\n        value: function setVolume(e) {\n          var _this63 = this;\n          Xf(e, \"volume\", 0, 1e3), this._volume = e, this._source.setVolume(e / 100), this._useAudioElement && nv.setVolume(this.getTrackId(), e);\n          try {\n            if (this._bypassWebAudio) return void NE.debug(\"[\".concat(this.getTrackId(), \"] setVolume returned because no pass through WebAudio.\"));\n            var _e34 = this._source.createOutputTrack();\n            this._mediaStreamTrack !== _e34 && (this._mediaStreamTrack = _e34, BR(this, ug.NEED_REPLACE_TRACK, this).then(function () {\n              NE.debug(\"[\".concat(_this63.getTrackId(), \"] replace web audio track success\"));\n            }).catch(function (e) {\n              NE.warning(\"[\".concat(_this63.getTrackId(), \"] replace web audio track failed\"), e);\n            }));\n          } catch (e) {}\n        }\n      }, {\n        key: \"getVolumeLevel\",\n        value: function getVolumeLevel() {\n          return this._muted && this.enabled && this._getOriginVolumeLevel ? this._source.getOriginVolumeLevel() : this._source.getAccurateVolumeLevel();\n        }\n      }, {\n        key: \"setPlaybackDevice\",\n        value: function () {\n          var _setPlaybackDevice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee32(e) {\n            return _regeneratorRuntime().wrap(function _callee32$(_context32) {\n              while (1) switch (_context32.prev = _context32.next) {\n                case 0:\n                  if (this._useAudioElement) {\n                    _context32.next = 2;\n                    break;\n                  }\n                  throw new vE(TE.NOT_SUPPORTED, \"your browser does not support setting the audio output device\");\n                case 2:\n                  _context32.next = 4;\n                  return nv.setSinkID(this.getTrackId(), e);\n                case 4:\n                case \"end\":\n                  return _context32.stop();\n              }\n            }, _callee32, this);\n          }));\n          function setPlaybackDevice(_x34) {\n            return _setPlaybackDevice.apply(this, arguments);\n          }\n          return setPlaybackDevice;\n        }()\n      }, {\n        key: \"setEnabled\",\n        value: function () {\n          var _setEnabled2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee33(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee33$(_context33) {\n              while (1) switch (_context33.prev = _context33.next) {\n                case 0:\n                  return _context33.abrupt(\"return\", this._setEnabled(e, t, i));\n                case 1:\n                case \"end\":\n                  return _context33.stop();\n              }\n            }, _callee33, this);\n          }));\n          function setEnabled(_x35, _x36, _x37) {\n            return _setEnabled2.apply(this, arguments);\n          }\n          return setEnabled;\n        }()\n      }, {\n        key: \"_setEnabled\",\n        value: function () {\n          var _setEnabled3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee34(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee34$(_context34) {\n              while (1) switch (_context34.prev = _context34.next) {\n                case 0:\n                  if (i) {\n                    _context34.next = 4;\n                    break;\n                  }\n                  if (!(e === this._enabled)) {\n                    _context34.next = 3;\n                    break;\n                  }\n                  return _context34.abrupt(\"return\");\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n                case 4:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), e)) {\n                    _context34.next = 18;\n                    break;\n                  }\n                  this._originMediaStreamTrack.enabled = !0;\n                  _context34.prev = 6;\n                  i || (this._enabled = !0);\n                  _context34.next = 10;\n                  return BR(this, ug.NEED_ENABLE_TRACK, this);\n                case 10:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] setEnabled to \").concat(e, \" success\"));\n                  _context34.next = 16;\n                  break;\n                case 13:\n                  _context34.prev = 13;\n                  _context34.t0 = _context34[\"catch\"](6);\n                  throw i || (this._enabled = !1), NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled to true error\"), _context34.t0.toString()), _context34.t0;\n                case 16:\n                  _context34.next = 27;\n                  break;\n                case 18:\n                  this._originMediaStreamTrack.enabled = !1, i || (this._enabled = !1);\n                  _context34.prev = 19;\n                  _context34.next = 22;\n                  return BR(this, ug.NEED_DISABLE_TRACK, this);\n                case 22:\n                  _context34.next = 27;\n                  break;\n                case 24:\n                  _context34.prev = 24;\n                  _context34.t1 = _context34[\"catch\"](19);\n                  throw i || (this._enabled = !0), NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context34.t1.toString()), _context34.t1;\n                case 27:\n                case \"end\":\n                  return _context34.stop();\n              }\n            }, _callee34, this, [[6, 13], [19, 24]]);\n          }));\n          function _setEnabled(_x38, _x39, _x40) {\n            return _setEnabled3.apply(this, arguments);\n          }\n          return _setEnabled;\n        }()\n      }, {\n        key: \"setMuted\",\n        value: function () {\n          var _setMuted = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee35(e) {\n            return _regeneratorRuntime().wrap(function _callee35$(_context35) {\n              while (1) switch (_context35.prev = _context35.next) {\n                case 0:\n                  _context35.t0 = e !== this._muted;\n                  if (!_context35.t0) {\n                    _context35.next = 13;\n                    break;\n                  }\n                  this.stateCheck(\"muted\", e);\n                  this._muted = e;\n                  this._originMediaStreamTrack.enabled = !e;\n                  NE.debug(\"[\".concat(this.getTrackId(), \"] start set muted: \").concat(e));\n                  if (!e) {\n                    _context35.next = 11;\n                    break;\n                  }\n                  _context35.next = 9;\n                  return BR(this, ug.NEED_MUTE_TRACK, this);\n                case 9:\n                  _context35.next = 13;\n                  break;\n                case 11:\n                  _context35.next = 13;\n                  return BR(this, ug.NEED_UNMUTE_TRACK, this);\n                case 13:\n                case \"end\":\n                  return _context35.stop();\n              }\n            }, _callee35, this);\n          }));\n          function setMuted(_x41) {\n            return _setMuted.apply(this, arguments);\n          }\n          return setMuted;\n        }()\n      }, {\n        key: \"getStats\",\n        value: function getStats() {\n          XR(function () {\n            NE.warning(\"[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead\");\n          }, \"localAudioTrackGetStatsWarning\");\n          var e = GR(this, ug.GET_STATS);\n          return e || sR({}, Fm);\n        }\n      }, {\n        key: \"setAudioFrameCallback\",\n        value: function setAudioFrameCallback(e) {\n          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 4096;\n          if (!e) return this._source.removeAllListeners(km.ON_AUDIO_BUFFER), void this._source.stopGetAudioBuffer();\n          this._source.startGetAudioBuffer(t), this._source.removeAllListeners(km.ON_AUDIO_BUFFER), this._source.on(km.ON_AUDIO_BUFFER, function (t) {\n            return e(t);\n          });\n        }\n      }, {\n        key: \"play\",\n        value: function play() {\n          NE.debug(\"[\".concat(this.getTrackId(), \"] start audio playback\")), this._useAudioElement ? (NE.debug(\"[\".concat(this.getTrackId(), \"] start audio playback in element\")), nv.play(this._mediaStreamTrack, this.getTrackId(), this._volume)) : this._source.play();\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          NE.debug(\"[\".concat(this.getTrackId(), \"] stop audio playback\")), this._useAudioElement ? nv.stop(this.getTrackId()) : this._source.stop();\n        }\n      }, {\n        key: \"close\",\n        value: function close() {\n          _get(_getPrototypeOf(yv.prototype), \"close\", this).call(this), this.unbindProcessorDestinationEvents(), this.unbindProcessorContextEvents(), this.unpipe(), this.processorDestination._source && this.processorDestination._source.unpipe(), this._source.destroy();\n        }\n      }, {\n        key: \"_updatePlayerSource\",\n        value: function _updatePlayerSource() {\n          var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];\n          NE.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), e && this._source.updateTrack(this._mediaStreamTrack), this._useAudioElement && nv.updateTrack(this.getTrackId(), this._mediaStreamTrack);\n        }\n      }, {\n        key: \"_updateOriginMediaStreamTrack\",\n        value: function () {\n          var _updateOriginMediaStreamTrack3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee36(e, t) {\n            return _regeneratorRuntime().wrap(function _callee36$(_context36) {\n              while (1) switch (_context36.prev = _context36.next) {\n                case 0:\n                  _context36.t0 = this._originMediaStreamTrack !== e;\n                  if (!_context36.t0) {\n                    _context36.next = 17;\n                    break;\n                  }\n                  this._originMediaStreamTrack.removeEventListener(\"ended\", this._handleTrackEnded);\n                  e.addEventListener(\"ended\", this._handleTrackEnded);\n                  t && this._originMediaStreamTrack.stop();\n                  this._originMediaStreamTrack = e;\n                  this._muted && (this._originMediaStreamTrack.enabled = !1);\n                  this.processor && this.processor.updateInput({\n                    track: e,\n                    context: this.processorContext\n                  });\n                  if (!(this._mediaStreamTrack !== this._source.outputTrack)) {\n                    _context36.next = 15;\n                    break;\n                  }\n                  this._mediaStreamTrack = this._originMediaStreamTrack;\n                  this._updatePlayerSource();\n                  _context36.next = 13;\n                  return BR(this, ug.NEED_REPLACE_TRACK, this);\n                case 13:\n                  _context36.next = 16;\n                  break;\n                case 15:\n                  this._source.updateTrack(this._originMediaStreamTrack);\n                case 16:\n                  this._getOriginVolumeLevel && this._source.updateOriginTrack(e);\n                case 17:\n                case \"end\":\n                  return _context36.stop();\n              }\n            }, _callee36, this);\n          }));\n          function _updateOriginMediaStreamTrack(_x42, _x43) {\n            return _updateOriginMediaStreamTrack3.apply(this, arguments);\n          }\n          return _updateOriginMediaStreamTrack;\n        }()\n      }, {\n        key: \"renewMediaStreamTrack\",\n        value: function renewMediaStreamTrack(e) {\n          return Cl.resolve(void 0);\n        }\n      }, {\n        key: \"pipe\",\n        value: function pipe(e) {\n          if (this._bypassWebAudio) throw new vE(TE.INVALID_OPERATION, \"Can not process AudioTrack when bypassWebAudio set to true.\");\n          if (this.processor === e) return e;\n          if (e._source) throw new vE(TE.INVALID_OPERATION, \"Processor \".concat(e.name, \" already piped, please call unpipe beforehand.\"));\n          return this.unpipe(), this.processor = e, this.processor._source = this, e.updateInput({\n            track: this._originMediaStreamTrack,\n            node: this._source.processSourceNode,\n            context: this.processorContext\n          }), e;\n        }\n      }, {\n        key: \"unpipe\",\n        value: function unpipe() {\n          var e;\n          if (!this.processor) return;\n          var t = this.processor;\n          null === (e = this._source.processSourceNode) || void 0 === e || e.disconnect(), this.processor._source = !1, this.processor = void 0, t.reset();\n        }\n      }, {\n        key: \"bindProcessorDestinationEvents\",\n        value: function bindProcessorDestinationEvents() {\n          var _this64 = this;\n          this.processorDestination.on(Ng.ON_TRACK, /*#__PURE__*/function () {\n            var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee37(e) {\n              return _regeneratorRuntime().wrap(function _callee37$(_context37) {\n                while (1) switch (_context37.prev = _context37.next) {\n                  case 0:\n                    if (!e) {\n                      _context37.next = 10;\n                      break;\n                    }\n                    _context37.t0 = e !== _this64._mediaStreamTrack;\n                    if (!_context37.t0) {\n                      _context37.next = 8;\n                      break;\n                    }\n                    _this64._mediaStreamTrack = e;\n                    _this64._updatePlayerSource(!1);\n                    _this64._source.processedNode = _this64._source.createMediaStreamSourceNode(e);\n                    _context37.next = 8;\n                    return BR(_this64, ug.NEED_REPLACE_TRACK, _this64);\n                  case 8:\n                    _context37.next = 16;\n                    break;\n                  case 10:\n                    _context37.t1 = _this64._mediaStreamTrack !== _this64._originMediaStreamTrack;\n                    if (!_context37.t1) {\n                      _context37.next = 16;\n                      break;\n                    }\n                    _this64._mediaStreamTrack = _this64._originMediaStreamTrack;\n                    _this64._updatePlayerSource();\n                    _context37.next = 16;\n                    return BR(_this64, ug.NEED_REPLACE_TRACK, _this64);\n                  case 16:\n                  case \"end\":\n                    return _context37.stop();\n                }\n              }, _callee37);\n            }));\n            return function (_x44) {\n              return _ref12.apply(this, arguments);\n            };\n          }()), this.processorDestination.on(Ng.ON_NODE, function (e) {\n            _this64._source.processedNode = e;\n          });\n        }\n      }, {\n        key: \"unbindProcessorDestinationEvents\",\n        value: function unbindProcessorDestinationEvents() {\n          this.processorDestination.removeAllListeners(Ng.ON_TRACK), this.processorDestination.removeAllListeners(Ng.ON_NODE);\n        }\n      }, {\n        key: \"unbindProcessorContextEvents\",\n        value: function unbindProcessorContextEvents() {\n          this.processorContext.removeAllListeners(Dg.REQUEST_UPDATE_CONSTRAINTS), this.processorContext.removeAllListeners(Dg.REQUEST_CONSTRAINTS);\n        }\n      }]);\n      return yv;\n    }(wT)).prototype, \"setVolume\", [sv], Object.getOwnPropertyDescriptor(yv.prototype, \"setVolume\"), yv.prototype), ZS(yv.prototype, \"setPlaybackDevice\", [av, cv], Object.getOwnPropertyDescriptor(yv.prototype, \"setPlaybackDevice\"), yv.prototype), ZS(yv.prototype, \"setEnabled\", [dv, uv, lv], Object.getOwnPropertyDescriptor(yv.prototype, \"setEnabled\"), yv.prototype), ZS(yv.prototype, \"setMuted\", [hv, pv, _v], Object.getOwnPropertyDescriptor(yv.prototype, \"setMuted\"), yv.prototype), ZS(yv.prototype, \"getStats\", [Ev], Object.getOwnPropertyDescriptor(yv.prototype, \"getStats\"), yv.prototype), ZS(yv.prototype, \"setAudioFrameCallback\", [fv], Object.getOwnPropertyDescriptor(yv.prototype, \"setAudioFrameCallback\"), yv.prototype), ZS(yv.prototype, \"play\", [mv, gv], Object.getOwnPropertyDescriptor(yv.prototype, \"play\"), yv.prototype), ZS(yv.prototype, \"stop\", [Sv, Tv], Object.getOwnPropertyDescriptor(yv.prototype, \"stop\"), yv.prototype), ZS(yv.prototype, \"close\", [vv], Object.getOwnPropertyDescriptor(yv.prototype, \"close\"), yv.prototype), ZS(yv.prototype, \"pipe\", [Rv], Object.getOwnPropertyDescriptor(yv.prototype, \"pipe\"), yv.prototype), ZS(yv.prototype, \"unpipe\", [Iv], Object.getOwnPropertyDescriptor(yv.prototype, \"unpipe\"), yv.prototype), yv),\n    cR = (Cv = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), Av = ov(), Ov = bT(\"MicrophoneAudioTrack\", \"_enabledMutex\"), bv = RT({\n      argsMap: function argsMap(e, t, i) {\n        return [e.getTrackId(), t, i];\n      }\n    }), wv = ov(), Nv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), ZS((Dv = /*#__PURE__*/function (_aR) {\n      _inherits(Dv, _aR);\n      _createClass(Dv, [{\n        key: \"__className__\",\n        get: function get() {\n          return \"MicrophoneAudioTrack\";\n        }\n      }]);\n      function Dv(e, t, i, r) {\n        var _this65;\n        _classCallCheck(this, Dv);\n        _this65 = _possibleConstructorReturn(this, _getPrototypeOf(Dv).call(this, e, t.encoderConfig ? GE(t.encoderConfig) : {}, r, HE(\"GET_VOLUME_OF_MUTED_AUDIO_TRACK\"))), mp(_assertThisInitialized(_assertThisInitialized(_this65)), \"_config\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this65)), \"_deviceName\", \"default\"), mp(_assertThisInitialized(_assertThisInitialized(_this65)), \"_constraints\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this65)), \"_originalConstraints\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this65)), \"_enabled\", !0), _this65._config = t, _this65._constraints = i, _this65._originalConstraints = i, _this65._deviceName = e.label, \"boolean\" == typeof t.bypassWebAudio && (_this65._bypassWebAudio = t.bypassWebAudio), ep() && LT.bindInterruptDetectorTrack(_assertThisInitialized(_assertThisInitialized(_this65))), _this65.bindProcessorContextEvents();\n        return _this65;\n      }\n      _createClass(Dv, [{\n        key: \"setDevice\",\n        value: function () {\n          var _setDevice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee38(e) {\n            var t, i, _r20, _t46;\n            return _regeneratorRuntime().wrap(function _callee38$(_context38) {\n              while (1) switch (_context38.prev = _context38.next) {\n                case 0:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] start set device to \").concat(e)), this._enabled)) {\n                    _context38.next = 35;\n                    break;\n                  }\n                  _context38.prev = 1;\n                  _context38.next = 4;\n                  return iv.getDeviceById(e);\n                case 4:\n                  t = _context38.sent;\n                  i = {};\n                  i.audio = sR({}, this._constraints), i.audio.deviceId = {\n                    exact: e\n                  }, this._originMediaStreamTrack.stop();\n                  _r20 = null;\n                  _context38.prev = 8;\n                  _context38.next = 11;\n                  return ZT(i, this.getTrackId());\n                case 11:\n                  _r20 = _context38.sent;\n                  _context38.next = 23;\n                  break;\n                case 14:\n                  _context38.prev = 14;\n                  _context38.t0 = _context38[\"catch\"](8);\n                  NE.error(\"[\".concat(this.getTrackId(), \"] setDevice failed\"), _context38.t0.toString());\n                  _context38.next = 19;\n                  return ZT({\n                    video: this._constraints\n                  }, this.getTrackId());\n                case 19:\n                  _r20 = _context38.sent;\n                  _context38.next = 22;\n                  return this._updateOriginMediaStreamTrack(_r20.getAudioTracks()[0], !1);\n                case 22:\n                  throw _context38.t0;\n                case 23:\n                  _context38.next = 25;\n                  return this._updateOriginMediaStreamTrack(_r20.getAudioTracks()[0], !1);\n                case 25:\n                  this._deviceName = t.label;\n                  this._config.microphoneId = e;\n                  this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context38.next = 33;\n                  break;\n                case 30:\n                  _context38.prev = 30;\n                  _context38.t1 = _context38[\"catch\"](1);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context38.t1.toString()), _context38.t1;\n                case 33:\n                  _context38.next = 45;\n                  break;\n                case 35:\n                  _context38.prev = 35;\n                  _context38.next = 38;\n                  return iv.getDeviceById(e);\n                case 38:\n                  _t46 = _context38.sent;\n                  this._deviceName = _t46.label, this._config.microphoneId = e, this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context38.next = 45;\n                  break;\n                case 42:\n                  _context38.prev = 42;\n                  _context38.t2 = _context38[\"catch\"](35);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context38.t2.toString()), _context38.t2;\n                case 45:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] set device to \").concat(e, \" success\"));\n                case 46:\n                case \"end\":\n                  return _context38.stop();\n              }\n            }, _callee38, this, [[1, 30], [8, 14], [35, 42]]);\n          }));\n          function setDevice(_x45) {\n            return _setDevice.apply(this, arguments);\n          }\n          return setDevice;\n        }()\n      }, {\n        key: \"setEnabled\",\n        value: function () {\n          var _setEnabled4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee39(e, t, i) {\n            var r, n, o, _e35;\n            return _regeneratorRuntime().wrap(function _callee39$(_context39) {\n              while (1) switch (_context39.prev = _context39.next) {\n                case 0:\n                  if (!t) {\n                    _context39.next = 5;\n                    break;\n                  }\n                  NE.debug(\"[\".concat(this.getTrackId(), \"] setEnabled false (do not close microphone)\"));\n                  _context39.next = 4;\n                  return _get(_getPrototypeOf(Dv.prototype), \"_setEnabled\", this).call(this, e);\n                case 4:\n                  return _context39.abrupt(\"return\", _context39.sent);\n                case 5:\n                  if (i) {\n                    _context39.next = 9;\n                    break;\n                  }\n                  if (!(e === this._enabled)) {\n                    _context39.next = 8;\n                    break;\n                  }\n                  return _context39.abrupt(\"return\");\n                case 8:\n                  this.stateCheck(\"enabled\", e);\n                case 9:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), !e)) {\n                    _context39.next = 20;\n                    break;\n                  }\n                  this._originMediaStreamTrack.onended = null, this._originMediaStreamTrack.stop(), null === (r = this._source.clonedTrack) || void 0 === r || r.stop(), i || (this._enabled = !1);\n                  _context39.prev = 11;\n                  _context39.next = 14;\n                  return BR(this, ug.NEED_DISABLE_TRACK, this);\n                case 14:\n                  _context39.next = 19;\n                  break;\n                case 16:\n                  _context39.prev = 16;\n                  _context39.t0 = _context39[\"catch\"](11);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled false failed\"), _context39.t0.toString()), _context39.t0;\n                case 19:\n                  return _context39.abrupt(\"return\");\n                case 20:\n                  n = sR({}, this._constraints), o = iv.searchDeviceIdByName(this._deviceName);\n                  o && !n.deviceId && (n.deviceId = o);\n                  _context39.prev = 22;\n                  i || (this._enabled = !0);\n                  _context39.next = 26;\n                  return ZT({\n                    audio: this._constraints\n                  }, this.getTrackId());\n                case 26:\n                  _e35 = _context39.sent;\n                  _context39.next = 29;\n                  return this._updateOriginMediaStreamTrack(_e35.getAudioTracks()[0], !1);\n                case 29:\n                  _context39.next = 31;\n                  return BR(this, ug.NEED_ENABLE_TRACK, this);\n                case 31:\n                  _context39.next = 36;\n                  break;\n                case 33:\n                  _context39.prev = 33;\n                  _context39.t1 = _context39[\"catch\"](22);\n                  throw i || (this._enabled = !1), NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled true failed\"), _context39.t1.toString()), _context39.t1;\n                case 36:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] setEnabled success\"));\n                case 37:\n                case \"end\":\n                  return _context39.stop();\n              }\n            }, _callee39, this, [[11, 16], [22, 33]]);\n          }));\n          function setEnabled(_x46, _x47, _x48) {\n            return _setEnabled4.apply(this, arguments);\n          }\n          return setEnabled;\n        }()\n      }, {\n        key: \"close\",\n        value: function close() {\n          _get(_getPrototypeOf(Dv.prototype), \"close\", this).call(this), ep() && LT.unbindInterruptDetectorTrack(this);\n        }\n      }, {\n        key: \"onTrackEnded\",\n        value: function onTrackEnded() {\n          var _this66 = this;\n          if ((Zh() || np()) && this._enabled && !this._isClosed && LT.duringInterruption) {\n            var _e36 = /*#__PURE__*/function () {\n              var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee40() {\n                return _regeneratorRuntime().wrap(function _callee40$(_context40) {\n                  while (1) switch (_context40.prev = _context40.next) {\n                    case 0:\n                      LT.off(CT.IOS_INTERRUPTION_END, _e36);\n                      _context40.t0 = _this66._enabled && !_this66._isClosed;\n                      if (!_context40.t0) {\n                        _context40.next = 8;\n                        break;\n                      }\n                      NE.debug(\"[\".concat(_this66.getTrackId(), \"] try capture microphone media device for interrupted iOS device.\"));\n                      _context40.next = 6;\n                      return _this66.setEnabled(!1);\n                    case 6:\n                      _context40.next = 8;\n                      return _this66.setEnabled(!0);\n                    case 8:\n                    case \"end\":\n                      return _context40.stop();\n                  }\n                }, _callee40);\n              }));\n              return function _e36() {\n                return _ref13.apply(this, arguments);\n              };\n            }();\n            LT.on(CT.IOS_INTERRUPTION_END, _e36);\n          } else NE.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(_g.TRACK_ENDED);\n        }\n      }, {\n        key: \"renewMediaStreamTrack\",\n        value: function () {\n          var _renewMediaStreamTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee41(e) {\n            var t, i, _e37;\n            return _regeneratorRuntime().wrap(function _callee41$(_context41) {\n              while (1) switch (_context41.prev = _context41.next) {\n                case 0:\n                  t = e || this._constraints, i = iv.searchDeviceIdByName(this._deviceName);\n                  if (!(i && !t.deviceId && (t.deviceId = i), this._constraints = t, this._enabled)) {\n                    _context41.next = 8;\n                    break;\n                  }\n                  this._originMediaStreamTrack.stop();\n                  _context41.next = 5;\n                  return ZT({\n                    audio: this._constraints\n                  }, this.getTrackId());\n                case 5:\n                  _e37 = _context41.sent;\n                  _context41.next = 8;\n                  return this._updateOriginMediaStreamTrack(_e37.getAudioTracks()[0], !0);\n                case 8:\n                case \"end\":\n                  return _context41.stop();\n              }\n            }, _callee41, this);\n          }));\n          function renewMediaStreamTrack(_x49) {\n            return _renewMediaStreamTrack.apply(this, arguments);\n          }\n          return renewMediaStreamTrack;\n        }()\n      }, {\n        key: \"bindProcessorContextEvents\",\n        value: function bindProcessorContextEvents() {\n          var _this67 = this;\n          this.processorContext.on(Dg.REQUEST_UPDATE_CONSTRAINTS, /*#__PURE__*/function () {\n            var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee42(e, t, i) {\n              var _i32;\n              return _regeneratorRuntime().wrap(function _callee42$(_context42) {\n                while (1) switch (_context42.prev = _context42.next) {\n                  case 0:\n                    _context42.prev = 0;\n                    _i32 = Object.assign.apply(Object, [{}, _this67._originalConstraints].concat(_toConsumableArray(e)));\n                    _context42.next = 4;\n                    return _this67.renewMediaStreamTrack(_i32);\n                  case 4:\n                    t();\n                    _context42.next = 10;\n                    break;\n                  case 7:\n                    _context42.prev = 7;\n                    _context42.t0 = _context42[\"catch\"](0);\n                    i(_context42.t0);\n                  case 10:\n                  case \"end\":\n                    return _context42.stop();\n                }\n              }, _callee42, null, [[0, 7]]);\n            }));\n            return function (_x50, _x51, _x52) {\n              return _ref14.apply(this, arguments);\n            };\n          }()), this.processorContext.on(Dg.REQUEST_CONSTRAINTS, /*#__PURE__*/function () {\n            var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee43(e) {\n              return _regeneratorRuntime().wrap(function _callee43$(_context43) {\n                while (1) switch (_context43.prev = _context43.next) {\n                  case 0:\n                    e(_this67._originMediaStreamTrack.getSettings());\n                  case 1:\n                  case \"end\":\n                    return _context43.stop();\n                }\n              }, _callee43);\n            }));\n            return function (_x53) {\n              return _ref15.apply(this, arguments);\n            };\n          }());\n        }\n      }]);\n      return Dv;\n    }(aR)).prototype, \"setDevice\", [Cv, Av], Object.getOwnPropertyDescriptor(Dv.prototype, \"setDevice\"), Dv.prototype), ZS(Dv.prototype, \"setEnabled\", [Ov, bv, wv], Object.getOwnPropertyDescriptor(Dv.prototype, \"setEnabled\"), Dv.prototype), ZS(Dv.prototype, \"close\", [Nv], Object.getOwnPropertyDescriptor(Dv.prototype, \"close\"), Dv.prototype), Dv),\n    dR = (Pv = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t, e.duration];\n      }\n    }), Lv = ov(), kv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), Mv = ov(), Uv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), xv = ov(), Vv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), jv = ov(), Fv = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), Bv = ov(), ZS((Gv = /*#__PURE__*/function (_aR2) {\n      _inherits(Gv, _aR2);\n      _createClass(Gv, [{\n        key: \"__className__\",\n        get: function get() {\n          return \"BufferSourceAudioTrack\";\n        }\n      }]);\n      function Gv(e, t, i, r) {\n        var _this68;\n        _classCallCheck(this, Gv);\n        _this68 = _possibleConstructorReturn(this, _getPrototypeOf(Gv).call(this, t.createOutputTrack(), i, r)), mp(_assertThisInitialized(_assertThisInitialized(_this68)), \"source\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this68)), \"_bufferSource\", void 0), _this68.source = e, _this68._bufferSource = t, _this68._bufferSource.on(km.AUDIO_SOURCE_STATE_CHANGE, function (e) {\n          _this68.emit(_g.SOURCE_STATE_CHANGE, e);\n        });\n        try {\n          _this68._mediaStreamTrack = _this68._source.createOutputTrack();\n        } catch (e) {}\n        return _this68;\n      }\n      _createClass(Gv, [{\n        key: \"getCurrentTime\",\n        value: function getCurrentTime() {\n          return this._bufferSource.currentTime;\n        }\n      }, {\n        key: \"startProcessAudioBuffer\",\n        value: function startProcessAudioBuffer(e) {\n          e && this._bufferSource.updateOptions(e), this._bufferSource.startProcessAudioBuffer();\n        }\n      }, {\n        key: \"pauseProcessAudioBuffer\",\n        value: function pauseProcessAudioBuffer() {\n          this._bufferSource.pauseProcessAudioBuffer();\n        }\n      }, {\n        key: \"seekAudioBuffer\",\n        value: function seekAudioBuffer(e) {\n          this._bufferSource.seekAudioBuffer(e);\n        }\n      }, {\n        key: \"resumeProcessAudioBuffer\",\n        value: function resumeProcessAudioBuffer() {\n          this._bufferSource.resumeProcessAudioBuffer();\n        }\n      }, {\n        key: \"stopProcessAudioBuffer\",\n        value: function stopProcessAudioBuffer() {\n          this._bufferSource.stopProcessAudioBuffer();\n        }\n      }, {\n        key: \"currentState\",\n        get: function get() {\n          return this._bufferSource.currentState;\n        }\n      }, {\n        key: \"duration\",\n        get: function get() {\n          return this._bufferSource.duration;\n        }\n      }]);\n      return Gv;\n    }(aR)).prototype, \"startProcessAudioBuffer\", [Pv, Lv], Object.getOwnPropertyDescriptor(Gv.prototype, \"startProcessAudioBuffer\"), Gv.prototype), ZS(Gv.prototype, \"pauseProcessAudioBuffer\", [kv, Mv], Object.getOwnPropertyDescriptor(Gv.prototype, \"pauseProcessAudioBuffer\"), Gv.prototype), ZS(Gv.prototype, \"seekAudioBuffer\", [Uv, xv], Object.getOwnPropertyDescriptor(Gv.prototype, \"seekAudioBuffer\"), Gv.prototype), ZS(Gv.prototype, \"resumeProcessAudioBuffer\", [Vv, jv], Object.getOwnPropertyDescriptor(Gv.prototype, \"resumeProcessAudioBuffer\"), Gv.prototype), ZS(Gv.prototype, \"stopProcessAudioBuffer\", [Fv, Bv], Object.getOwnPropertyDescriptor(Gv.prototype, \"stopProcessAudioBuffer\"), Gv.prototype), Gv);\n  var uR = /*#__PURE__*/function (_aR3) {\n    _inherits(uR, _aR3);\n    _createClass(uR, [{\n      key: \"__className__\",\n      get: function get() {\n        return \"MixingAudioTrack\";\n      }\n    }, {\n      key: \"isActive\",\n      get: function get() {\n        var _iterator9 = _createForOfIteratorHelper(this.trackList),\n          _step9;\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var _e38 = _step9.value;\n            if (_e38._enabled && !_e38._isClosed && !_e38.muted) return !0;\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n        return !1;\n      }\n    }]);\n    function uR() {\n      var _this69;\n      _classCallCheck(this, uR);\n      var e = MT().createMediaStreamDestination();\n      _this69 = _possibleConstructorReturn(this, _getPrototypeOf(uR).call(this, e.stream.getAudioTracks()[0], void 0, MR(8, \"track-mix-\"))), mp(_assertThisInitialized(_assertThisInitialized(_this69)), \"trackList\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this69)), \"destNode\", void 0);\n      try {\n        _this69._mediaStreamTrack = _this69._source.createOutputTrack();\n      } catch (e) {}\n      _this69.destNode = e, _this69.trackList = [];\n      return _this69;\n    }\n    _createClass(uR, [{\n      key: \"hasAudioTrack\",\n      value: function hasAudioTrack(e) {\n        return -1 !== this.trackList.indexOf(e);\n      }\n    }, {\n      key: \"addAudioTrack\",\n      value: function addAudioTrack(e) {\n        -1 === this.trackList.indexOf(e) ? (NE.debug(\"add \".concat(e.getTrackId(), \" to mixing track\")), e._source.outputNode.connect(this.destNode), this.trackList.push(e), this.updateEncoderConfig()) : NE.debug(\"track \".concat(e.getTrackId(), \" is already added\"));\n      }\n    }, {\n      key: \"removeAudioTrack\",\n      value: function removeAudioTrack(e) {\n        if (-1 !== this.trackList.indexOf(e)) {\n          NE.debug(\"remove \".concat(e.getTrackId(), \" from mixing track\"));\n          try {\n            e._source.outputNode.disconnect(this.destNode);\n          } catch (e) {}\n          HR(this.trackList, e), this.updateEncoderConfig();\n        }\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function updateEncoderConfig() {\n        var e = {};\n        this.trackList.forEach(function (t) {\n          t._encoderConfig && ((t._encoderConfig.bitrate || 0) > (e.bitrate || 0) && (e.bitrate = t._encoderConfig.bitrate), (t._encoderConfig.sampleRate || 0) > (e.sampleRate || 0) && (e.sampleRate = t._encoderConfig.sampleRate), (t._encoderConfig.sampleSize || 0) > (e.sampleSize || 0) && (e.sampleSize = t._encoderConfig.sampleSize), t._encoderConfig.stereo && (e.stereo = !0));\n        }), this._encoderConfig = e;\n      }\n    }]);\n    return uR;\n  }(aR);\n  var lR = /*#__PURE__*/function (_gE14) {\n    _inherits(lR, _gE14);\n    function lR() {\n      var _this70;\n      _classCallCheck(this, lR);\n      _this70 = _possibleConstructorReturn(this, _getPrototypeOf(lR).apply(this, arguments)), mp(_assertThisInitialized(_assertThisInitialized(_this70)), \"resultStorage\", new Map());\n      return _this70;\n    }\n    _createClass(lR, [{\n      key: \"setLocalAudioStats\",\n      value: function setLocalAudioStats(e, t, i) {\n        this.record(\"AUDIO_INPUT_LEVEL_TOO_LOW\", e, this.checkAudioInputLevel(i, t)), this.record(\"SEND_AUDIO_BITRATE_TOO_LOW\", e, this.checkSendAudioBitrate(i, t));\n      }\n    }, {\n      key: \"setLocalVideoStats\",\n      value: function setLocalVideoStats(e, t, i) {\n        this.record(\"SEND_VIDEO_BITRATE_TOO_LOW\", e, this.checkSendVideoBitrate(i, t)), this.record(\"FRAMERATE_INPUT_TOO_LOW\", e, this.checkFramerateInput(i, t)), this.record(\"FRAMERATE_SENT_TOO_LOW\", e, this.checkFramerateSent(i));\n      }\n    }, {\n      key: \"setRemoteAudioStats\",\n      value: function setRemoteAudioStats(e, t) {\n        var i = e.getUserId();\n        this.record(\"AUDIO_OUTPUT_LEVEL_TOO_LOW\", i, this.checkAudioOutputLevel(t));\n      }\n    }, {\n      key: \"setRemoteVideoStats\",\n      value: function setRemoteVideoStats(e, t) {\n        var i = e.getUserId();\n        this.record(\"RECV_VIDEO_DECODE_FAILED\", i, this.checkVideoDecode(t));\n      }\n    }, {\n      key: \"record\",\n      value: function record(e, t, i) {\n        this.resultStorage.has(e) || this.resultStorage.set(e, {\n          result: [],\n          isPrevNormal: !0\n        });\n        var r = this.resultStorage.get(e);\n        if (r && (r.result.push(i), r.result.length >= 5)) {\n          var _i33 = r.result.includes(!0);\n          r.isPrevNormal && !_i33 && this.emit(\"exception\", hR[e], e, t), !r.isPrevNormal && _i33 && this.emit(\"exception\", hR[e] + 2e3, e + \"_RECOVER\", t), r.isPrevNormal = _i33, r.result = [];\n        }\n      }\n    }, {\n      key: \"checkAudioOutputLevel\",\n      value: function checkAudioOutputLevel(e) {\n        return !(e.receiveBitrate > 0 && 0 === e.receiveLevel);\n      }\n    }, {\n      key: \"checkAudioInputLevel\",\n      value: function checkAudioInputLevel(e, t) {\n        return t instanceof uR && !t.isActive || !!t.muted || 0 !== e.sendVolumeLevel;\n      }\n    }, {\n      key: \"checkFramerateInput\",\n      value: function checkFramerateInput(e, t) {\n        var i = null;\n        t._encoderConfig && t._encoderConfig.frameRate && (i = RR(t._encoderConfig.frameRate));\n        var r = e.captureFrameRate;\n        return !i || !r || !(i > 10 && r < 5 || i < 10 && i >= 5 && r <= 1);\n      }\n    }, {\n      key: \"checkFramerateSent\",\n      value: function checkFramerateSent(e) {\n        return !(e.captureFrameRate && e.sendFrameRate && e.captureFrameRate > 5 && e.sendFrameRate <= 1);\n      }\n    }, {\n      key: \"checkSendVideoBitrate\",\n      value: function checkSendVideoBitrate(e, t) {\n        return !!t.muted || 0 !== e.sendBitrate;\n      }\n    }, {\n      key: \"checkSendAudioBitrate\",\n      value: function checkSendAudioBitrate(e, t) {\n        return t instanceof uR && !t.isActive || !!t.muted || 0 !== e.sendBitrate;\n      }\n    }, {\n      key: \"checkVideoDecode\",\n      value: function checkVideoDecode(e) {\n        return 0 === e.receiveBitrate || 0 !== e.decodeFrameRate;\n      }\n    }]);\n    return lR;\n  }(gE);\n  var hR = {\n    FRAMERATE_INPUT_TOO_LOW: 1001,\n    FRAMERATE_SENT_TOO_LOW: 1002,\n    SEND_VIDEO_BITRATE_TOO_LOW: 1003,\n    RECV_VIDEO_DECODE_FAILED: 1005,\n    AUDIO_INPUT_LEVEL_TOO_LOW: 2001,\n    AUDIO_OUTPUT_LEVEL_TOO_LOW: 2002,\n    SEND_AUDIO_BITRATE_TOO_LOW: 2003\n  };\n  var pR = new ( /*#__PURE__*/function () {\n    function _class9() {\n      _classCallCheck(this, _class9);\n    }\n    _createClass(_class9, [{\n      key: \"markSubscribeStart\",\n      value: function markSubscribeStart(e, t) {\n        performance.mark(\"agora-web-sdk/\".concat(e, \"/subscribe-\").concat(t));\n      }\n    }, {\n      key: \"markPublishStart\",\n      value: function markPublishStart(e, t) {\n        performance.mark(\"agora-web-sdk/\".concat(e, \"/publish-\").concat(t));\n      }\n    }, {\n      key: \"measureFromSubscribeStart\",\n      value: function measureFromSubscribeStart(e, t) {\n        var i = performance.getEntriesByName(\"agora-web-sdk/\".concat(e, \"/subscribe-\").concat(t));\n        if (i.length > 0) {\n          var _e39 = i[i.length - 1];\n          return Math.round(performance.now() - _e39.startTime);\n        }\n        return 0;\n      }\n    }, {\n      key: \"measureFromPublishStart\",\n      value: function measureFromPublishStart(e, t) {\n        var i = performance.getEntriesByName(\"agora-web-sdk/\".concat(e, \"/publish-\").concat(t));\n        if (i.length > 0) {\n          var _e40 = i[i.length - 1];\n          return Math.round(performance.now() - _e40.startTime);\n        }\n        return 0;\n      }\n    }]);\n    return _class9;\n  }())();\n  function _R(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function ER(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? _R(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : _R(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var fR = /*#__PURE__*/function () {\n    function fR(e) {\n      var _this71 = this;\n      _classCallCheck(this, fR);\n      mp(this, \"store\", void 0), mp(this, \"onStatsException\", void 0), mp(this, \"onUploadPublishDuration\", void 0), mp(this, \"localStats\", new Map()), mp(this, \"remoteStats\", new Map()), mp(this, \"updateStatsInterval\", void 0), mp(this, \"trafficStats\", void 0), mp(this, \"trafficStatsPeerList\", []), mp(this, \"uplinkStats\", void 0), mp(this, \"exceptionMonitor\", void 0), mp(this, \"p2pChannel\", void 0), mp(this, \"updateStats\", function () {\n        _this71.p2pChannel && (_this71.updateRemoteStats(_this71.p2pChannel), _this71.updateLocalStats(_this71.p2pChannel));\n      }), this.store = e, this.updateStatsInterval = window.setInterval(this.updateStats, 1e3), this.exceptionMonitor = new lR(), this.exceptionMonitor.on(\"exception\", function (e, t, i) {\n        _this71.onStatsException && _this71.onStatsException(e, t, i);\n      });\n    }\n    _createClass(fR, [{\n      key: \"reset\",\n      value: function reset() {\n        this.localStats = new Map(), this.remoteStats = new Map(), this.trafficStats = void 0, this.trafficStatsPeerList = [], this.uplinkStats = void 0;\n      }\n    }, {\n      key: \"getLocalAudioTrackStats\",\n      value: function getLocalAudioTrackStats() {\n        return this.localStats.get(Cg.LocalAudioTrack) || ER({}, Fm);\n      }\n    }, {\n      key: \"getLocalVideoTrackStats\",\n      value: function getLocalVideoTrackStats() {\n        return this.localStats.get(Cg.LocalVideoTrack) || ER({}, Bm);\n      }\n    }, {\n      key: \"getRemoteAudioTrackStats\",\n      value: function getRemoteAudioTrackStats(e) {\n        var _this72 = this;\n        var t = function t(e, _t47) {\n            if (!_this72.trafficStats) return _t47;\n            var i = _this72.trafficStats.peer_delay.find(function (t) {\n              return t.peer_uid === e;\n            });\n            return i && (_t47.publishDuration = i.B_ppad + (Date.now() - _this72.trafficStats.timestamp)), _t47;\n          },\n          i = {};\n        if (e) {\n          var r;\n          var _n11 = null === (r = this.remoteStats.get(e)) || void 0 === r ? void 0 : r.audioStats;\n          _n11 && (i[e] = t(e, _n11));\n        } else Array.from(this.remoteStats.entries()).forEach(function (e) {\n          var _e41 = _slicedToArray(e, 2),\n            r = _e41[0],\n            n = _e41[1].audioStats;\n          n && (i[r] = t(r, n));\n        });\n        return i;\n      }\n    }, {\n      key: \"getRemoteNetworkQualityStats\",\n      value: function getRemoteNetworkQualityStats(e) {\n        var t = {};\n        if (e) {\n          var i;\n          var r = null === (i = this.remoteStats.get(e)) || void 0 === i ? void 0 : i.networkStats;\n          r && (t[e] = r);\n        } else Array.from(this.remoteStats.entries()).forEach(function (e) {\n          var _e42 = _slicedToArray(e, 2),\n            i = _e42[0],\n            r = _e42[1].networkStats;\n          r && (t[i] = r);\n        });\n        return t;\n      }\n    }, {\n      key: \"getRemoteVideoTrackStats\",\n      value: function getRemoteVideoTrackStats(e) {\n        var _this73 = this;\n        var t = function t(e, _t48) {\n            if (!_this73.trafficStats) return _t48;\n            var i = _this73.trafficStats.peer_delay.find(function (t) {\n              return t.peer_uid === e;\n            });\n            return i && (_t48.publishDuration = i.B_ppvd + (Date.now() - _this73.trafficStats.timestamp)), _t48;\n          },\n          i = {};\n        if (e) {\n          var r;\n          var _n12 = null === (r = this.remoteStats.get(e)) || void 0 === r ? void 0 : r.videoStats;\n          _n12 && (i[e] = t(e, _n12));\n        } else Array.from(this.remoteStats.entries()).forEach(function (e) {\n          var _e43 = _slicedToArray(e, 2),\n            r = _e43[0],\n            n = _e43[1].videoStats;\n          n && (i[r] = t(r, n));\n        });\n        return i;\n      }\n    }, {\n      key: \"getRTCStats\",\n      value: function getRTCStats() {\n        var e = 0,\n          t = 0,\n          i = 0,\n          r = 0;\n        var n = this.localStats.get(Cg.LocalAudioTrack);\n        n && (e += n.sendBytes, t += n.sendBitrate);\n        var o = this.localStats.get(Cg.LocalVideoTrack);\n        o && (e += o.sendBytes, t += o.sendBitrate);\n        var s = this.localStats.get(Cg.LocalVideoLowTrack);\n        s && (e += s.sendBytes, t += s.sendBitrate), this.remoteStats.forEach(function (e) {\n          var t = e.audioStats,\n            n = e.videoStats;\n          t && (i += t.receiveBytes, r += t.receiveBitrate), n && (i += n.receiveBytes, r += n.receiveBitrate);\n        });\n        var a = 1;\n        return this.trafficStats && (a += this.trafficStats.peer_delay.length), {\n          Duration: 0,\n          UserCount: a,\n          SendBitrate: t,\n          SendBytes: e,\n          RecvBytes: i,\n          RecvBitrate: r,\n          OutgoingAvailableBandwidth: this.uplinkStats ? this.uplinkStats.B_uab / 1e3 : 0,\n          RTT: this.trafficStats ? 2 * this.trafficStats.B_acd : 0\n        };\n      }\n    }, {\n      key: \"addLocalStats\",\n      value: function addLocalStats(e) {\n        this.localStats.set(e, void 0);\n      }\n    }, {\n      key: \"removeLocalStats\",\n      value: function removeLocalStats(e) {\n        e ? this.localStats.delete(e) : this.localStats.clear();\n      }\n    }, {\n      key: \"addRemoteStats\",\n      value: function addRemoteStats(e) {\n        this.remoteStats.set(e, {});\n      }\n    }, {\n      key: \"removeRemoteStats\",\n      value: function removeRemoteStats(e) {\n        e ? this.remoteStats.delete(e) : this.remoteStats.clear();\n      }\n    }, {\n      key: \"addP2PChannel\",\n      value: function addP2PChannel(e) {\n        this.p2pChannel = e;\n      }\n    }, {\n      key: \"updateTrafficStats\",\n      value: function updateTrafficStats(e) {\n        var _this74 = this;\n        e.peer_delay = e.peer_delay.filter(function (e) {\n          return void 0 !== e.B_ppad || void 0 !== e.B_ppvd;\n        });\n        e.peer_delay.filter(function (e) {\n          return -1 === _this74.trafficStatsPeerList.indexOf(e.peer_uid);\n        }).forEach(function (e) {\n          var t;\n          var i = null === (t = _this74.p2pChannel) || void 0 === t ? void 0 : t.getRemoteMedia(e.peer_uid),\n            r = null != i && i.videoSSRC ? pR.measureFromSubscribeStart(_this74.store.clientId, i.videoSSRC) : 0,\n            n = null != i && i.audioSSRC ? pR.measureFromSubscribeStart(_this74.store.clientId, i.audioSSRC) : 0;\n          void 0 !== e.B_ppad && void 0 !== e.B_ppvd && (_this74.onUploadPublishDuration && _this74.onUploadPublishDuration(e.peer_uid, e.B_ppad, e.B_ppvd, r > n ? r : n), _this74.trafficStatsPeerList.push(e.peer_uid));\n        }), this.trafficStats = e;\n      }\n    }, {\n      key: \"updateUplinkStats\",\n      value: function updateUplinkStats(e) {\n        this.uplinkStats && this.uplinkStats.B_fir !== e.B_fir && NE.debug(\"[\".concat(this.store.clientId, \"]: Period fir changes to \").concat(e.B_fir)), this.uplinkStats = e;\n      }\n    }, {\n      key: \"isLocalVideoFreeze\",\n      value: function isLocalVideoFreeze(e) {\n        return !(!e.inputFrame || !e.sentFrame) && e.inputFrame.frameRate > 5 && e.sentFrame.frameRate < 3;\n      }\n    }, {\n      key: \"updateLocalStats\",\n      value: function updateLocalStats(e) {\n        var _this75 = this;\n        Array.from(this.localStats.entries()).forEach(function (t) {\n          var _t49 = _slicedToArray(t, 2),\n            i = _t49[0],\n            r = _t49[1];\n          switch (i) {\n            case Cg.LocalVideoTrack:\n            case Cg.LocalVideoLowTrack:\n              {\n                var _t50 = r,\n                  _n13 = ER({}, Bm),\n                  _o8 = e.getStats(),\n                  _s6 = e.getLocalMedia(i);\n                if (_o8) {\n                  var _i34 = _o8.videoSend.find(function (e) {\n                    return e.ssrc === (null == _s6 ? void 0 : _s6.ssrcs[0].ssrcId);\n                  });\n                  if (_i34) {\n                    var _r21 = e.getLocalVideoSize(),\n                      _o9 = e.getEncoderConfig(Cg.LocalVideoTrack);\n                    \"H264\" !== _i34.codec && \"VP8\" !== _i34.codec && \"VP9\" !== _i34.codec && \"AV1X\" !== _i34.codec && \"AV1\" !== _i34.codec || (_n13.codecType = _i34.codec), _n13.sendBytes = _i34.bytes, _n13.sendBitrate = _t50 ? 8 * Math.max(0, _n13.sendBytes - _t50.sendBytes) : 0, _i34.inputFrame ? (_n13.captureFrameRate = _i34.inputFrame.frameRate, _n13.captureResolutionHeight = _i34.inputFrame.height, _n13.captureResolutionWidth = _i34.inputFrame.width) : _r21 && (_n13.captureResolutionWidth = _r21.width, _n13.captureResolutionHeight = _r21.height), _i34.sentFrame ? (_n13.sendFrameRate = _i34.sentFrame.frameRate, _n13.sendResolutionHeight = _i34.sentFrame.height, _n13.sendResolutionWidth = _i34.sentFrame.width) : _r21 && (_n13.sendResolutionWidth = _r21.width, _n13.sendResolutionHeight = _r21.height), _i34.avgEncodeMs && (_n13.encodeDelay = _i34.avgEncodeMs), _o9 && _o9.bitrateMax && (_n13.targetSendBitrate = 1e3 * _o9.bitrateMax), _n13.sendPackets = _i34.packets, _n13.sendPacketsLost = _i34.packetsLost, _n13.totalDuration = _t50 ? _t50.totalDuration + 1 : 1, _n13.totalFreezeTime = _t50 ? _t50.totalFreezeTime : 0, _this75.isLocalVideoFreeze(_i34) && (_n13.totalFreezeTime += 1);\n                  }\n                  _this75.trafficStats && (_n13.sendPacketsLost = _this75.trafficStats.B_pvlr4 / 100);\n                }\n                _this75.localStats.set(i, _n13), _n13 && _s6 && _this75.exceptionMonitor.setLocalVideoStats(_this75.store.uid, _s6.track, _n13);\n                break;\n              }\n            case Cg.LocalAudioTrack:\n              {\n                var _t51 = r,\n                  _n14 = ER({}, Fm),\n                  _o10 = e.getStats(),\n                  _s7 = e.getLocalMedia(i);\n                if (_o10) {\n                  var _i35 = _o10.audioSend.find(function (e) {\n                    return e.ssrc === (null == _s7 ? void 0 : _s7.ssrcs[0].ssrcId);\n                  });\n                  if (_i35) {\n                    if (\"opus\" !== _i35.codec && \"aac\" !== _i35.codec && \"PCMU\" !== _i35.codec && \"PCMA\" !== _i35.codec && \"G722\" !== _i35.codec || (_n14.codecType = _i35.codec), _i35.inputLevel) _n14.sendVolumeLevel = Math.round(32767 * _i35.inputLevel);else {\n                      var _t52 = e.getLocalAudioVolume();\n                      _t52 && (_n14.sendVolumeLevel = Math.round(32767 * _t52));\n                    }\n                    _n14.sendBytes = _i35.bytes, _n14.sendPackets = _i35.packets, _n14.sendPacketsLost = _i35.packetsLost, _n14.sendBitrate = _t51 ? 8 * Math.max(0, _n14.sendBytes - _t51.sendBytes) : 0;\n                  }\n                }\n                _this75.trafficStats && (_n14.sendPacketsLost = _this75.trafficStats.B_pvlr4 / 100), _this75.localStats.set(Cg.LocalAudioTrack, _n14), _n14 && _s7 && _this75.exceptionMonitor.setLocalAudioStats(_this75.store.uid, _s7.track, _n14);\n                break;\n              }\n          }\n        });\n      }\n    }, {\n      key: \"updateRemoteStats\",\n      value: function updateRemoteStats(e) {\n        var _this76 = this;\n        Array.from(this.remoteStats.entries()).forEach(function (t) {\n          var _t53 = _slicedToArray(t, 2),\n            i = _t53[0],\n            _t53$ = _t53[1],\n            r = _t53$.videoStats,\n            n = _t53$.audioStats,\n            o = _t53$.videoPcStats;\n          var s = n,\n            a = r,\n            c = o,\n            d = ER({}, Gm),\n            u = ER({}, Hm),\n            l = ER({}, Wm),\n            _e$getRemoteMedia = e.getRemoteMedia(i),\n            h = _e$getRemoteMedia.audioTrack,\n            p = _e$getRemoteMedia.videoTrack,\n            _ = _e$getRemoteMedia.audioSSRC,\n            E = _e$getRemoteMedia.videoSSRC,\n            f = e.getStats(),\n            m = null == f ? void 0 : f.audioRecv.find(function (e) {\n              return e.ssrc === _;\n            }),\n            g = null == f ? void 0 : f.videoRecv.find(function (e) {\n              return e.ssrc === E;\n            }),\n            S = _this76.trafficStats && _this76.trafficStats.peer_delay.find(function (e) {\n              return e.peer_uid === i;\n            });\n          if (m && (\"opus\" !== m.codec && \"aac\" !== m.codec && \"PCMU\" !== m.codec && \"PCMA\" !== m.codec && \"G722\" !== m.codec || (d.codecType = m.codec), m.outputLevel ? d.receiveLevel = Math.round(32767 * m.outputLevel) : h && (d.receiveLevel = Math.round(32767 * h.getVolumeLevel())), d.receiveBytes = m.bytes, d.receivePackets = m.packets, d.receivePacketsLost = m.packetsLost, d.packetLossRate = d.receivePacketsLost / (d.receivePackets + d.receivePacketsLost), d.receiveBitrate = s ? 8 * Math.max(0, d.receiveBytes - s.receiveBytes) : 0, d.totalDuration = s ? s.totalDuration + 1 : 1, d.totalFreezeTime = s ? s.totalFreezeTime : 0, d.freezeRate = d.totalFreezeTime / d.totalDuration, d.receiveDelay = m.jitterBufferMs, d.totalDuration > 10 && fR.isRemoteAudioFreeze(h) && (d.totalFreezeTime += 1)), g) {\n            \"H264\" !== g.codec && \"VP8\" !== g.codec && \"VP9\" !== g.codec && \"AV1X\" !== g.codec && \"AV1\" !== g.codec || (u.codecType = g.codec), u.receiveBytes = g.bytes, u.receiveBitrate = a ? 8 * Math.max(0, u.receiveBytes - a.receiveBytes) : 0, u.decodeFrameRate = g.decodeFrameRate < 0 ? 0 : g.decodeFrameRate, u.renderFrameRate = g.decodeFrameRate < 0 ? 0 : g.decodeFrameRate, g.outputFrame && (u.renderFrameRate = g.outputFrame.frameRate), g.receivedFrame ? (u.receiveFrameRate = g.receivedFrame.frameRate, u.receiveResolutionHeight = g.receivedFrame.height, u.receiveResolutionWidth = g.receivedFrame.width) : p && (u.receiveResolutionHeight = p._videoHeight || 0, u.receiveResolutionWidth = p._videoWidth || 0), void 0 !== g.framesRateFirefox && (u.receiveFrameRate = Math.round(g.framesRateFirefox)), u.receivePackets = g.packets, u.receivePacketsLost = g.packetsLost, u.packetLossRate = u.receivePacketsLost / (u.receivePackets + u.receivePacketsLost), u.totalDuration = a ? a.totalDuration + 1 : 1, u.totalFreezeTime = a ? a.totalFreezeTime : 0, u.receiveDelay = g.jitterBufferMs || 0;\n            var _t54 = !!E && e.getRemoteVideoIsReady(E);\n            p && _t54 && fR.isRemoteVideoFreeze(p, g, c) && (u.totalFreezeTime += 1), u.freezeRate = u.totalFreezeTime / u.totalDuration;\n          }\n          S && (d.end2EndDelay = S.B_ad, u.end2EndDelay = S.B_vd, d.transportDelay = S.B_ed, u.transportDelay = S.B_ed, d.currentPacketLossRate = S.B_ealr4 / 100, u.currentPacketLossRate = S.B_evlr4 / 100, l.uplinkNetworkQuality = S.B_punq ? S.B_punq : 0, l.downlinkNetworkQuality = S.B_pdnq ? S.B_pdnq : 0), _this76.remoteStats.set(i, {\n            audioStats: d,\n            videoStats: u,\n            videoPcStats: g,\n            networkStats: l\n          }), h && _this76.exceptionMonitor.setRemoteAudioStats(h, d), p && _this76.exceptionMonitor.setRemoteVideoStats(p, u);\n        });\n      }\n    }], [{\n      key: \"isRemoteVideoFreeze\",\n      value: function isRemoteVideoFreeze(e, t, i) {\n        if (!e) return !1;\n        var r = !!i && t.framesDecodeFreezeTime > i.framesDecodeFreezeTime,\n          n = !i || t.framesDecodeCount > i.framesDecodeCount;\n        return r || !n;\n      }\n    }, {\n      key: \"isRemoteAudioFreeze\",\n      value: function isRemoteAudioFreeze(e) {\n        return !!e && e._isFreeze();\n      }\n    }]);\n    return fR;\n  }();\n  var mR = new ( /*#__PURE__*/function (_gE15) {\n    _inherits(_class10, _gE15);\n    _createClass(_class10, [{\n      key: \"visibility\",\n      get: function get() {\n        return document.visibilityState;\n      }\n    }, {\n      key: \"lastHiddenTime\",\n      get: function get() {\n        return this._lastHiddenTime;\n      }\n    }, {\n      key: \"lastVisibleTime\",\n      get: function get() {\n        return this._lastVisibleTime;\n      }\n    }]);\n    function _class10() {\n      var _this77;\n      _classCallCheck(this, _class10);\n      _this77 = _possibleConstructorReturn(this, _getPrototypeOf(_class10).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this77)), \"_lastHiddenTime\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this77)), \"_lastVisibleTime\", 0), document.addEventListener(\"visibilitychange\", function () {\n        \"hidden\" === document.visibilityState ? _this77._lastHiddenTime = performance.now() : _this77._lastVisibleTime = performance.now(), NE.debug(\"document visibility went \".concat(document.visibilityState)), _this77.emit(\"VISIBILITY_CHANGE\", document.visibilityState);\n      });\n      return _this77;\n    }\n    return _class10;\n  }(gE))();\n  function gR(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function SR(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? gR(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : gR(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  function TR(e) {\n    return e.match(/^[\\.\\:\\d]+$/) ? \"\".concat(e.replace(/[^\\d]/g, \"-\"), \".\").concat(HE(\"TURN_DOMAIN\")) : (NE.info(\"Cannot recognized as IP address \".concat(e, \". Used As Host instead\")), e);\n  }\n  function vR(e, t) {\n    var i, r;\n    var n = HE(\"GATEWAY_DOMAINS\");\n    var o = n[1] && -1 !== t.indexOf(n[1]) ? 1 : 0;\n    e.addresses = e.addresses || [];\n    var s = e.addresses.map(function (e) {\n      return e.domain_prefix ? {\n        address: \"\".concat(e.domain_prefix, \".\").concat(n[o++ % n.length], \":\").concat(e.port)\n      } : e.ip.match(/^[\\.\\:\\d]+$/) ? {\n        ip: e.ip,\n        port: e.port,\n        address: \"\".concat(e.ip.replace(/[^\\d]/g, \"-\"), \".\").concat(n[o++ % n.length], \":\").concat(e.port)\n      } : (NE.info(\"Cannot recognized as IP address \".concat(e.ip, \". Used As Host instead\")), {\n        ip: e.ip,\n        port: e.port,\n        address: \"\".concat(e.ip, \":\").concat(e.port)\n      });\n    });\n    if (null !== (i = e.detail) && void 0 !== i && i[18] && \"string\" == typeof (null === (r = e.detail) || void 0 === r ? void 0 : r[18])) {\n      var _t55 = e.detail[18],\n        _i36 = null == _t55 ? void 0 : _t55.split(\";\");\n      for (var _e44 = 0; _e44 < _i36.length; _e44++) {\n        var a;\n        var _t56 = Ih(a = _i36[_e44]).call(a);\n        s[_e44] && _t56 && (s[_e44].ip6 = _t56);\n      }\n    }\n    return {\n      gatewayAddrs: s,\n      uid: e.uid,\n      cid: e.cid,\n      cert: e.cert,\n      vid: e.detail && e.detail[8],\n      uni_lbs_ip: e.detail && e.detail[1],\n      res: e,\n      csIp: e.detail && e.detail[502]\n    };\n  }\n  function RR(e) {\n    return \"number\" == typeof e ? e : e.exact || e.ideal || e.max || e.min || 0;\n  }\n  function IR(e) {\n    var t = e._encoderConfig;\n    if (!t) return {};\n    var i = {\n      resolution: t.width && t.height ? \"\".concat(RR(t.width), \"x\").concat(RR(t.height)) : void 0,\n      maxVideoBW: t.bitrateMax,\n      minVideoBW: t.bitrateMin\n    };\n    return \"number\" == typeof t.frameRate ? (i.maxFrameRate = t.frameRate, i.minFrameRate = t.frameRate) : t.frameRate && (i.maxFrameRate = t.frameRate.max || t.frameRate.ideal || t.frameRate.exact || t.frameRate.min, i.minFrameRate = t.frameRate.min || t.frameRate.ideal || t.frameRate.exact || t.frameRate.max), i;\n  }\n  function yR(e, t, i) {\n    var r;\n    var n = t.videoSend.find(function (t) {\n      return t.ssrc === e;\n    });\n    if (!n) return null;\n    var o = null == i || null === (r = i.videoSend.find(function (t) {\n        return t.ssrc === e;\n      })) || void 0 === r ? void 0 : r.inputFrame,\n      s = {\n        id: MR(10, \"\"),\n        timestamp: new Date(t.timestamp).toISOString(),\n        mediaType: \"video\",\n        type: \"ssrc\",\n        ssrc: n.ssrc.toString()\n      };\n    return n.inputFrame && (o && n.inputFrame.height === o.height || (s.A_fhi = n.inputFrame.height ? n.inputFrame.height.toString() : \"0\"), o && n.inputFrame.width === o.width || (s.A_fwi = n.inputFrame.width ? n.inputFrame.width.toString() : \"0\"), o && n.inputFrame.frameRate === o.frameRate || (s.A_fri = n.inputFrame.frameRate ? n.inputFrame.frameRate.toString() : \"0\")), s;\n  }\n  function CR(e) {\n    return e >= 0 && e < .17 ? 1 : e >= .17 && e < .36 ? 2 : e >= .36 && e < .59 ? 3 : e >= .59 && e <= 1 ? 4 : e > 1 ? 5 : 0;\n  }\n  function AR(e, t) {\n    var i,\n      r,\n      n = void 0;\n    switch (t) {\n      case Fg.CHOOSE_SERVER:\n        i = 4096, r = \"choose server\";\n        break;\n      case Fg.CLOUD_PROXY:\n        i = 1048576, r = \"proxy\";\n        break;\n      case Fg.CLOUD_PROXY_5:\n        i = 4194304, r = \"proxy5\";\n        break;\n      case Fg.CLOUD_PROXY_FALLBACK:\n        i = 4194310, r = \"proxy fallback\";\n        break;\n      default:\n        throw new vE(TE.UNEXPECTED_ERROR, \"multi unlibs response transformer get unknown service id\", {\n          csIp: e.detail && e.detail[502],\n          retry: !1\n        });\n    }\n    if (e.response_body.forEach(function (t) {\n      t.buffer && t.buffer.flag === i && (n = {\n        code: t.buffer.code,\n        addresses: (t.buffer.edges_services || []).map(function (e) {\n          return SR(SR({}, e), {}, {\n            ticket: t.buffer.cert\n          });\n        }),\n        server_ts: e.enter_ts,\n        uid: t.buffer.uid,\n        cid: t.buffer.cid,\n        cname: t.buffer.cname,\n        detail: SR(SR({}, t.buffer.detail), e.detail),\n        flag: t.buffer.flag,\n        opid: e.opid,\n        cert: t.buffer.cert\n      });\n    }), !n) throw new vE(TE.MULTI_UNILBS_RESPONSE_ERROR, \"cannot parse response \".concat(r, \" from multi unilbs response\"), {\n      csIp: e.detail && e.detail[502]\n    });\n    return n;\n  }\n  function OR(_x54, _x55) {\n    return _OR.apply(this, arguments);\n  }\n  function _OR() {\n    _OR = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee331(e, t) {\n      return _regeneratorRuntime().wrap(function _callee331$(_context334) {\n        while (1) switch (_context334.prev = _context334.next) {\n          case 0:\n            _context334.next = 2;\n            return Cl.all(e.addresses.map( /*#__PURE__*/function () {\n              var _ref84 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee330(e) {\n                return _regeneratorRuntime().wrap(function _callee330$(_context333) {\n                  while (1) switch (_context333.prev = _context333.next) {\n                    case 0:\n                      _context333.t0 = TR(e.ip);\n                      _context333.t1 = e.port;\n                      _context333.t2 = e.port;\n                      _context333.t3 = t && HE(\"ENCRYPT_PROXY_USERNAME_AND_PSW\") && window.isSecureContext ? t.toString() : kE.username;\n                      if (!(t && HE(\"ENCRYPT_PROXY_USERNAME_AND_PSW\") && window.isSecureContext)) {\n                        _context333.next = 10;\n                        break;\n                      }\n                      _context333.next = 7;\n                      return ST(t.toString());\n                    case 7:\n                      _context333.t4 = _context333.sent;\n                      _context333.next = 11;\n                      break;\n                    case 10:\n                      _context333.t4 = kE.password;\n                    case 11:\n                      _context333.t5 = _context333.t4;\n                      return _context333.abrupt(\"return\", {\n                        address: _context333.t0,\n                        tcpport: _context333.t1,\n                        udpport: _context333.t2,\n                        username: _context333.t3,\n                        password: _context333.t5\n                      });\n                    case 13:\n                    case \"end\":\n                      return _context333.stop();\n                  }\n                }, _callee330);\n              }));\n              return function (_x483) {\n                return _ref84.apply(this, arguments);\n              };\n            }()));\n          case 2:\n            return _context334.abrupt(\"return\", _context334.sent);\n          case 3:\n          case \"end\":\n            return _context334.stop();\n        }\n      }, _callee331);\n    }));\n    return _OR.apply(this, arguments);\n  }\n  function bR(e, t) {\n    var i = t._videoWidth || t.getMediaStreamTrack(!0).getSettings().width;\n    return i || NE.warning(\"cannot get original video track's width, default scale down 4 times for low stream\"), i ? i / RR(e.width) : 4;\n  }\n  function wR(e) {\n    var t = e.candidateType,\n      i = e.relayProtocol,\n      r = e.type,\n      n = e.address,\n      o = e.port,\n      s = e.protocol;\n    return \"local-candidate\" === r ? {\n      candidateType: t,\n      relayProtocol: i,\n      protocol: s\n    } : {\n      candidateType: t,\n      relayProtocol: i,\n      address: n,\n      port: o,\n      protocol: s\n    };\n  }\n  function NR(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function DR(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? NR(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : NR(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  function PR(e) {\n    return window.TextEncoder ? new TextEncoder().encode(e).length : e.length;\n  }\n  function LR(e) {\n    return new Cl(function (t) {\n      window.setTimeout(t, e);\n    });\n  }\n  function kR(e) {\n    var t = new vE(TE.TIMEOUT, \"timeout\");\n    return new Cl(function (i, r) {\n      window.setTimeout(function () {\n        return r(t);\n      }, e);\n    });\n  }\n  function MR() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 7,\n      t = arguments.length > 1 ? arguments[1] : void 0;\n    var i = Math.random().toString(16).substr(2, e).toLowerCase();\n    return i.length === e ? \"\".concat(t).concat(i) : \"\".concat(t).concat(i) + MR(e - i.length, \"\");\n  }\n  function UR() {\n    return MR(32, \"\").toUpperCase();\n  }\n  var xR = function xR() {};\n  function VR(e) {\n    return new Cl(function (t, i) {\n      var r = !1;\n      var n = document.createElement(\"video\");\n      n.setAttribute(\"autoplay\", \"\"), n.setAttribute(\"muted\", \"\"), n.muted = !0, n.autoplay = !0, n.setAttribute(\"playsinline\", \"\"), n.setAttribute(\"style\", \"position: fixed; top: 0; left: 0; width: 1px; height: 1px\"), document.body.appendChild(n);\n      var o = Zh() ? \"canplay\" : \"playing\";\n      n.addEventListener(o, function () {\n        var e = n.videoWidth,\n          i = n.videoHeight;\n        !e && Qh() || (r = !0, n.srcObject = null, n.remove(), t([e, i]));\n      }), n.srcObject = new MediaStream([e]), n.play().catch(xR), setTimeout(function () {\n        r || (n.srcObject = null, n.remove(), t([n.videoWidth, n.videoHeight]));\n      }, 4e3);\n    });\n  }\n  function jR(e) {\n    return Cl.all(e.map(function (e) {\n      return e.then(function (e) {\n        throw e;\n      }, function (e) {\n        return e;\n      });\n    })).then(function (e) {\n      throw e;\n    }, function (e) {\n      return e;\n    });\n  }\n  function FR(e, t) {\n    for (var i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), n = 2; n < i; n++) r[n - 2] = arguments[n];\n    return 0 === e.getListeners(t).length ? Cl.reject(new vE(TE.UNEXPECTED_ERROR, \"can not emit promise\")) : new Cl(function (i, n) {\n      e.emit.apply(e, [t].concat(r, [i, n]));\n    });\n  }\n  function BR(e, t) {\n    if (0 === e.getListeners(t).length) return Cl.resolve();\n    for (var i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), n = 2; n < i; n++) r[n - 2] = arguments[n];\n    return FR.apply(void 0, [e, t].concat(r));\n  }\n  function GR(e, t) {\n    if (0 === e.getListeners(t).length) return null;\n    for (var i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), n = 2; n < i; n++) r[n - 2] = arguments[n];\n    return WR.apply(void 0, [e, t].concat(r));\n  }\n  function WR(e, t) {\n    var i = null,\n      r = null;\n    for (var n = arguments.length, o = new Array(n > 2 ? n - 2 : 0), s = 2; s < n; s++) o[s - 2] = arguments[s];\n    if (e.emit.apply(e, [t].concat(o, [function (e) {\n      i = e;\n    }, function (e) {\n      r = e;\n    }])), null !== r) throw r;\n    if (null === i) throw new vE(TE.UNEXPECTED_ERROR, \"handler is not sync\");\n    return i;\n  }\n  function HR(e, t) {\n    var i = e.indexOf(t);\n    -1 !== i && e.splice(i, 1);\n  }\n  function KR(e) {\n    var t = [];\n    return e.forEach(function (e) {\n      -1 === t.indexOf(e) && t.push(e);\n    }), t;\n  }\n  function YR(e) {\n    Cl.resolve().then(e);\n  }\n  function qR(e) {\n    return JSON.parse(JSON.stringify(e));\n  }\n  var JR = {};\n  function XR(e, t) {\n    JR[t] || (JR[t] = !0, e());\n  }\n  function zR(e) {\n    var t = window.atob(e),\n      i = new Uint8Array(new ArrayBuffer(t.length));\n    for (var _e45 = 0; _e45 < t.length; _e45 += 1) i[_e45] = t.charCodeAt(_e45);\n    return i;\n  }\n  function QR(e) {\n    var t = \"\";\n    for (var i = 0; i < e.length; i += 1) t += String.fromCharCode(e[i]);\n    return window.btoa(t);\n  }\n  var ZR = new ( /*#__PURE__*/function () {\n      function _class11() {\n        _classCallCheck(this, _class11);\n        mp(this, \"fnMap\", new Map());\n      }\n      _createClass(_class11, [{\n        key: \"throttleByKey\",\n        value: function throttleByKey(e, t, i, r) {\n          var _this78 = this;\n          for (var n = arguments.length, o = new Array(n > 4 ? n - 4 : 0), s = 4; s < n; s++) o[s - 4] = arguments[s];\n          if (this.fnMap.has(t)) {\n            var _n15 = this.fnMap.get(t);\n            if (_n15.threshold !== i) {\n              _n15.fn.apply(_n15, _toConsumableArray(_n15.args)), clearTimeout(_n15.timer);\n              var _s8 = window.setTimeout(function () {\n                var e = _this78.fnMap.get(t);\n                e && e.fn.apply(e, _toConsumableArray(e.args)), _this78.fnMap.delete(t);\n              }, i);\n              this.fnMap.set(t, {\n                fn: e,\n                threshold: i,\n                timer: _s8,\n                args: o,\n                skipFn: r\n              });\n            } else _n15.skipFn && _n15.skipFn.apply(_n15, _toConsumableArray(_n15.args)), this.fnMap.set(t, DR(DR({}, _n15), {}, {\n              fn: e,\n              args: o,\n              skipFn: r\n            }));\n          } else {\n            var _n16 = window.setTimeout(function () {\n              var e = _this78.fnMap.get(t);\n              e && e.fn.apply(e, _toConsumableArray(e.args)), _this78.fnMap.delete(t);\n            }, i);\n            this.fnMap.set(t, {\n              fn: e,\n              threshold: i,\n              timer: _n16,\n              args: o,\n              skipFn: r\n            });\n          }\n        }\n      }]);\n      return _class11;\n    }())(),\n    $R = ZR.throttleByKey.bind(ZR),\n    eI = /*#__PURE__*/function () {\n      var _ref16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee45(e) {\n        var t, i, r, n, o, s, a, c, d, u;\n        return _regeneratorRuntime().wrap(function _callee45$(_context45) {\n          while (1) switch (_context45.prev = _context45.next) {\n            case 0:\n              t = e.fragementLength, i = e.referenceList, r = e.asyncMapHandler, n = e.allFailedhandler, o = e.promisesCollector, s = 0;\n              a = t;\n              d = 0;\n              u = /*#__PURE__*/function () {\n                var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee44() {\n                  var e;\n                  return _regeneratorRuntime().wrap(function _callee44$(_context44) {\n                    while (1) switch (_context44.prev = _context44.next) {\n                      case 0:\n                        e = function () {\n                          var e = s * a,\n                            t = e + a;\n                          return i.slice(e, t).map(r);\n                        }();\n                        o && o.push.apply(o, _toConsumableArray(e));\n                        _context44.prev = 2;\n                        _context44.next = 5;\n                        return jR(e);\n                      case 5:\n                        c = _context44.sent;\n                        _context44.next = 15;\n                        break;\n                      case 8:\n                        _context44.prev = 8;\n                        _context44.t0 = _context44[\"catch\"](2);\n                        if (!(d += a, s++, !(d >= i.length))) {\n                          _context44.next = 14;\n                          break;\n                        }\n                        _context44.next = 13;\n                        return u();\n                      case 13:\n                        return _context44.abrupt(\"return\", void _context44.sent);\n                      case 14:\n                        n(_context44.t0);\n                      case 15:\n                        e.forEach(function (e) {\n                          return e.cancel();\n                        });\n                      case 16:\n                      case \"end\":\n                        return _context44.stop();\n                    }\n                  }, _callee44, null, [[2, 8]]);\n                }));\n                return function u() {\n                  return _ref17.apply(this, arguments);\n                };\n              }();\n              _context45.next = 6;\n              return u();\n            case 6:\n              return _context45.abrupt(\"return\", c);\n            case 7:\n            case \"end\":\n              return _context45.stop();\n          }\n        }, _callee45);\n      }));\n      return function eI(_x56) {\n        return _ref16.apply(this, arguments);\n      };\n    }();\n  function tI(e) {\n    return \"object\" == typeof e && null !== e && !(e instanceof RegExp);\n  }\n  var iI = i,\n    rI = nt(\"iterator\"),\n    nI = !iI(function () {\n      var e = new URL(\"b?a=1&b=2&c=3\", \"http://a\"),\n        t = e.searchParams,\n        i = \"\";\n      return e.pathname = \"c%20d\", t.forEach(function (e, r) {\n        t.delete(\"b\"), i += r + e;\n      }), !e.toJSON || !t.sort || \"http://a/c%20d?a=1&c=3\" !== e.href || \"3\" !== t.get(\"c\") || \"a=1\" !== String(new URLSearchParams(\"?a=1\")) || !t[rI] || \"a\" !== new URL(\"https://a@b\").username || \"b\" !== new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\") || \"xn--e1aybc\" !== new URL(\"http://ÑÐµÑÑ\").host || \"#%D0%B1\" !== new URL(\"http://a#Ð±\").hash || \"a1c3\" !== i || \"x\" !== new URL(\"http://x\", void 0).host;\n    }),\n    oI = T,\n    sI = d,\n    aI = I,\n    cI = i,\n    dI = hn,\n    uI = Qr,\n    lI = y,\n    hI = je,\n    pI = F,\n    _I = Object.assign,\n    EI = Object.defineProperty,\n    fI = sI([].concat),\n    mI = !_I || cI(function () {\n      if (oI && 1 !== _I({\n        b: 1\n      }, _I(EI({}, \"a\", {\n        enumerable: !0,\n        get: function get() {\n          EI(this, \"b\", {\n            value: 3,\n            enumerable: !1\n          });\n        }\n      }), {\n        b: 2\n      })).b) return !0;\n      var e = {},\n        t = {},\n        i = Symbol(),\n        r = \"abcdefghijklmnopqrst\";\n      return e[i] = 7, r.split(\"\").forEach(function (e) {\n        t[e] = e;\n      }), 7 != _I({}, e)[i] || dI(_I({}, t)).join(\"\") != r;\n    }) ? function (e, t) {\n      for (var i = hI(e), r = arguments.length, n = 1, o = uI.f, s = lI.f; r > n;) for (var a, c = pI(arguments[n++]), d = o ? fI(dI(c), o(c)) : dI(c), u = d.length, l = 0; u > l;) a = d[l++], oI && !aI(s, c, a) || (i[a] = c[a]);\n      return i;\n    } : _I,\n    gI = zt,\n    SI = fo,\n    TI = Wt,\n    vI = I,\n    RI = je,\n    II = function II(e, t, i, r) {\n      try {\n        return r ? t(gI(i)[0], i[1]) : t(i);\n      } catch (t) {\n        SI(e, \"throw\", t);\n      }\n    },\n    yI = Wn,\n    CI = lc,\n    AI = wi,\n    OI = nf,\n    bI = ho,\n    wI = no,\n    NI = h.Array,\n    DI = d,\n    PI = 2147483647,\n    LI = /[^\\0-\\u007E]/,\n    kI = /[.\\u3002\\uFF0E\\uFF61]/g,\n    MI = \"Overflow: input needs wider integers to process\",\n    UI = h.RangeError,\n    xI = DI(kI.exec),\n    VI = Math.floor,\n    jI = String.fromCharCode,\n    FI = DI(\"\".charCodeAt),\n    BI = DI([].join),\n    GI = DI([].push),\n    WI = DI(\"\".replace),\n    HI = DI(\"\".split),\n    KI = DI(\"\".toLowerCase),\n    YI = function YI(e) {\n      return e + 22 + 75 * (e < 26);\n    },\n    qI = function qI(e, t, i) {\n      var r = 0;\n      for (e = i ? VI(e / 700) : e >> 1, e += VI(e / t); e > 455;) e = VI(e / 35), r += 36;\n      return VI(r + 36 * e / (e + 38));\n    },\n    JI = function JI(e) {\n      var t,\n        i,\n        r = [],\n        n = (e = function (e) {\n          for (var t = [], i = 0, r = e.length; i < r;) {\n            var n = FI(e, i++);\n            if (n >= 55296 && n <= 56319 && i < r) {\n              var o = FI(e, i++);\n              56320 == (64512 & o) ? GI(t, ((1023 & n) << 10) + (1023 & o) + 65536) : (GI(t, n), i--);\n            } else GI(t, n);\n          }\n          return t;\n        }(e)).length,\n        o = 128,\n        s = 0,\n        a = 72;\n      for (t = 0; t < e.length; t++) (i = e[t]) < 128 && GI(r, jI(i));\n      var c = r.length,\n        d = c;\n      for (c && GI(r, \"-\"); d < n;) {\n        var u = PI;\n        for (t = 0; t < e.length; t++) (i = e[t]) >= o && i < u && (u = i);\n        var l = d + 1;\n        if (u - o > VI((PI - s) / l)) throw UI(MI);\n        for (s += (u - o) * l, o = u, t = 0; t < e.length; t++) {\n          if ((i = e[t]) < o && ++s > PI) throw UI(MI);\n          if (i == o) {\n            for (var h = s, p = 36;;) {\n              var _ = p <= a ? 1 : p >= a + 26 ? 26 : p - a;\n              if (h < _) break;\n              var E = h - _,\n                f = 36 - _;\n              GI(r, jI(YI(_ + E % f))), h = VI(E / f), p += 36;\n            }\n            GI(r, jI(YI(h))), a = qI(s, l, d == c), s = 0, d++;\n          }\n        }\n        s++, o++;\n      }\n      return BI(r, \"\");\n    },\n    XI = h.TypeError,\n    zI = Ri,\n    QI = h,\n    ZI = $,\n    $I = I,\n    ey = d,\n    ty = nI,\n    iy = Fs,\n    ry = Ua,\n    ny = na,\n    oy = la,\n    sy = Ps,\n    ay = Wa,\n    cy = g,\n    dy = Ge,\n    uy = Wt,\n    ly = $n,\n    hy = zt,\n    py = q,\n    _y = Lo,\n    Ey = Pn,\n    fy = N,\n    my = ho,\n    gy = no,\n    Sy = function Sy(e, t) {\n      if (e < t) throw XI(\"Not enough arguments\");\n      return e;\n    },\n    Ty = ff,\n    vy = nt(\"iterator\"),\n    Ry = \"URLSearchParams\",\n    Iy = \"URLSearchParamsIterator\",\n    yy = sy.set,\n    Cy = sy.getterFor(Ry),\n    Ay = sy.getterFor(Iy),\n    Oy = ZI(\"fetch\"),\n    by = ZI(\"Request\"),\n    wy = ZI(\"Headers\"),\n    Ny = by && by.prototype,\n    Dy = wy && wy.prototype,\n    Py = QI.RegExp,\n    Ly = QI.TypeError,\n    ky = QI.decodeURIComponent,\n    My = QI.encodeURIComponent,\n    Uy = ey(\"\".charAt),\n    xy = ey([].join),\n    Vy = ey([].push),\n    jy = ey(\"\".replace),\n    Fy = ey([].shift),\n    By = ey([].splice),\n    Gy = ey(\"\".split),\n    Wy = ey(\"\".slice),\n    Hy = /\\+/g,\n    Ky = Array(4),\n    Yy = function Yy(e) {\n      return Ky[e - 1] || (Ky[e - 1] = Py(\"((?:%[\\\\da-f]{2}){\" + e + \"})\", \"gi\"));\n    },\n    qy = function qy(e) {\n      try {\n        return ky(e);\n      } catch (t) {\n        return e;\n      }\n    },\n    Jy = function Jy(e) {\n      var t = jy(e, Hy, \" \"),\n        i = 4;\n      try {\n        return ky(t);\n      } catch (e) {\n        for (; i;) t = jy(t, Yy(i--), qy);\n        return t;\n      }\n    },\n    Xy = /[!'()~]|%20/g,\n    zy = {\n      \"!\": \"%21\",\n      \"'\": \"%27\",\n      \"(\": \"%28\",\n      \")\": \"%29\",\n      \"~\": \"%7E\",\n      \"%20\": \"+\"\n    },\n    Qy = function Qy(e) {\n      return zy[e];\n    },\n    Zy = function Zy(e) {\n      return jy(My(e), Xy, Qy);\n    },\n    $y = oy(function (e, t) {\n      yy(this, {\n        type: Iy,\n        iterator: my(Cy(e).entries),\n        kind: t\n      });\n    }, \"Iterator\", function () {\n      var e = Ay(this),\n        t = e.kind,\n        i = e.iterator.next(),\n        r = i.value;\n      return i.done || (i.value = \"keys\" === t ? r.key : \"values\" === t ? r.value : [r.key, r.value]), i;\n    }, !0),\n    eC = function eC(e) {\n      this.entries = [], this.url = null, void 0 !== e && (py(e) ? this.parseObject(e) : this.parseQuery(\"string\" == typeof e ? \"?\" === Uy(e, 0) ? Wy(e, 1) : e : _y(e)));\n    };\n  eC.prototype = {\n    type: Ry,\n    bindURL: function bindURL(e) {\n      this.url = e, this.update();\n    },\n    parseObject: function parseObject(e) {\n      var t,\n        i,\n        r,\n        n,\n        o,\n        s,\n        a,\n        c = gy(e);\n      if (c) for (i = (t = my(e, c)).next; !(r = $I(i, t)).done;) {\n        if (o = (n = my(hy(r.value))).next, (s = $I(o, n)).done || (a = $I(o, n)).done || !$I(o, n).done) throw Ly(\"Expected sequence with length 2\");\n        Vy(this.entries, {\n          key: _y(s.value),\n          value: _y(a.value)\n        });\n      } else for (var d in e) dy(e, d) && Vy(this.entries, {\n        key: d,\n        value: _y(e[d])\n      });\n    },\n    parseQuery: function parseQuery(e) {\n      if (e) for (var t, i, r = Gy(e, \"&\"), n = 0; n < r.length;) (t = r[n++]).length && (i = Gy(t, \"=\"), Vy(this.entries, {\n        key: Jy(Fy(i)),\n        value: Jy(xy(i, \"=\"))\n      }));\n    },\n    serialize: function serialize() {\n      for (var e, t = this.entries, i = [], r = 0; r < t.length;) e = t[r++], Vy(i, Zy(e.key) + \"=\" + Zy(e.value));\n      return xy(i, \"&\");\n    },\n    update: function update() {\n      this.entries.length = 0, this.parseQuery(this.url.query);\n    },\n    updateURL: function updateURL() {\n      this.url && this.url.update();\n    }\n  };\n  var tC = function tC() {\n      ay(this, iC);\n      var e = arguments.length > 0 ? arguments[0] : void 0;\n      yy(this, new eC(e));\n    },\n    iC = tC.prototype;\n  if (ry(iC, {\n    append: function append(e, t) {\n      Sy(arguments.length, 2);\n      var i = Cy(this);\n      Vy(i.entries, {\n        key: _y(e),\n        value: _y(t)\n      }), i.updateURL();\n    },\n    delete: function _delete(e) {\n      Sy(arguments.length, 1);\n      for (var t = Cy(this), i = t.entries, r = _y(e), n = 0; n < i.length;) i[n].key === r ? By(i, n, 1) : n++;\n      t.updateURL();\n    },\n    get: function get(e) {\n      Sy(arguments.length, 1);\n      for (var t = Cy(this).entries, i = _y(e), r = 0; r < t.length; r++) if (t[r].key === i) return t[r].value;\n      return null;\n    },\n    getAll: function getAll(e) {\n      Sy(arguments.length, 1);\n      for (var t = Cy(this).entries, i = _y(e), r = [], n = 0; n < t.length; n++) t[n].key === i && Vy(r, t[n].value);\n      return r;\n    },\n    has: function has(e) {\n      Sy(arguments.length, 1);\n      for (var t = Cy(this).entries, i = _y(e), r = 0; r < t.length;) if (t[r++].key === i) return !0;\n      return !1;\n    },\n    set: function set(e, t) {\n      Sy(arguments.length, 1);\n      for (var i, r = Cy(this), n = r.entries, o = !1, s = _y(e), a = _y(t), c = 0; c < n.length; c++) (i = n[c]).key === s && (o ? By(n, c--, 1) : (o = !0, i.value = a));\n      o || Vy(n, {\n        key: s,\n        value: a\n      }), r.updateURL();\n    },\n    sort: function sort() {\n      var e = Cy(this);\n      Ty(e.entries, function (e, t) {\n        return e.key > t.key ? 1 : -1;\n      }), e.updateURL();\n    },\n    forEach: function forEach(e) {\n      for (var t, i = Cy(this).entries, r = uy(e, arguments.length > 1 ? arguments[1] : void 0), n = 0; n < i.length;) r((t = i[n++]).value, t.key, this);\n    },\n    keys: function keys() {\n      return new $y(this, \"keys\");\n    },\n    values: function values() {\n      return new $y(this, \"values\");\n    },\n    entries: function entries() {\n      return new $y(this, \"entries\");\n    }\n  }, {\n    enumerable: !0\n  }), iy(iC, vy, iC.entries, {\n    name: \"entries\"\n  }), iy(iC, \"toString\", function () {\n    return Cy(this).serialize();\n  }, {\n    enumerable: !0\n  }), ny(tC, Ry), zI({\n    global: !0,\n    forced: !ty\n  }, {\n    URLSearchParams: tC\n  }), !ty && cy(wy)) {\n    var rC = ey(Dy.has),\n      nC = ey(Dy.set),\n      oC = function oC(e) {\n        if (py(e)) {\n          var t,\n            i = e.body;\n          if (ly(i) === Ry) return t = e.headers ? new wy(e.headers) : new wy(), rC(t, \"content-type\") || nC(t, \"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\"), Ey(e, {\n            body: fy(0, _y(i)),\n            headers: fy(0, t)\n          });\n        }\n        return e;\n      };\n    if (cy(Oy) && zI({\n      global: !0,\n      enumerable: !0,\n      forced: !0\n    }, {\n      fetch: function fetch(e) {\n        return Oy(e, arguments.length > 1 ? oC(arguments[1]) : {});\n      }\n    }), cy(by)) {\n      var sC = function sC(e) {\n        return ay(this, Ny), new by(e, arguments.length > 1 ? oC(arguments[1]) : {});\n      };\n      Ny.constructor = sC, sC.prototype = Ny, zI({\n        global: !0,\n        forced: !0\n      }, {\n        Request: sC\n      });\n    }\n  }\n  var aC,\n    cC = {\n      URLSearchParams: tC,\n      getState: Cy\n    },\n    dC = Ri,\n    uC = T,\n    lC = nI,\n    hC = h,\n    pC = Wt,\n    _C = d,\n    EC = dn.f,\n    fC = Fs,\n    mC = Wa,\n    gC = Ge,\n    SC = mI,\n    TC = function TC(e) {\n      var t = RI(e),\n        i = CI(this),\n        r = arguments.length,\n        n = r > 1 ? arguments[1] : void 0,\n        o = void 0 !== n;\n      o && (n = TI(n, r > 2 ? arguments[2] : void 0));\n      var s,\n        a,\n        c,\n        d,\n        u,\n        l,\n        h = wI(t),\n        p = 0;\n      if (!h || this == NI && yI(h)) for (s = AI(t), a = i ? new this(s) : NI(s); s > p; p++) l = o ? n(t[p], p) : t[p], OI(a, p, l);else for (u = (d = bI(t, h)).next, a = i ? new this() : []; !(c = vI(u, d)).done; p++) l = o ? II(d, n, [c.value, p], !0) : c.value, OI(a, p, l);\n      return a.length = p, a;\n    },\n    vC = uf,\n    RC = sl.codeAt,\n    IC = function IC(e) {\n      var t,\n        i,\n        r = [],\n        n = HI(WI(KI(e), kI, \".\"), \".\");\n      for (t = 0; t < n.length; t++) i = n[t], GI(r, xI(LI, i) ? \"xn--\" + JI(i) : i);\n      return BI(r, \".\");\n    },\n    yC = Lo,\n    CC = na,\n    AC = cC,\n    OC = Ps,\n    bC = OC.set,\n    wC = OC.getterFor(\"URL\"),\n    NC = AC.URLSearchParams,\n    DC = AC.getState,\n    PC = hC.URL,\n    LC = hC.TypeError,\n    kC = hC.parseInt,\n    MC = Math.floor,\n    UC = Math.pow,\n    xC = _C(\"\".charAt),\n    VC = _C(/./.exec),\n    jC = _C([].join),\n    FC = _C(1..toString),\n    BC = _C([].pop),\n    GC = _C([].push),\n    WC = _C(\"\".replace),\n    HC = _C([].shift),\n    KC = _C(\"\".split),\n    YC = _C(\"\".slice),\n    qC = _C(\"\".toLowerCase),\n    JC = _C([].unshift),\n    XC = \"Invalid scheme\",\n    zC = \"Invalid host\",\n    QC = \"Invalid port\",\n    ZC = /[a-z]/i,\n    $C = /[\\d+-.a-z]/i,\n    eA = /\\d/,\n    tA = /^0x/i,\n    iA = /^[0-7]+$/,\n    rA = /^\\d+$/,\n    nA = /^[\\da-f]+$/i,\n    oA = /[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/,\n    sA = /[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/,\n    aA = /^[\\u0000-\\u0020]+|[\\u0000-\\u0020]+$/g,\n    cA = /[\\t\\n\\r]/g,\n    dA = function dA(e) {\n      var t, i, r, n;\n      if (\"number\" == typeof e) {\n        for (t = [], i = 0; i < 4; i++) JC(t, e % 256), e = MC(e / 256);\n        return jC(t, \".\");\n      }\n      if (\"object\" == typeof e) {\n        for (t = \"\", r = function (e) {\n          for (var t = null, i = 1, r = null, n = 0, o = 0; o < 8; o++) 0 !== e[o] ? (n > i && (t = r, i = n), r = null, n = 0) : (null === r && (r = o), ++n);\n          return n > i && (t = r, i = n), t;\n        }(e), i = 0; i < 8; i++) n && 0 === e[i] || (n && (n = !1), r === i ? (t += i ? \":\" : \"::\", n = !0) : (t += FC(e[i], 16), i < 7 && (t += \":\")));\n        return \"[\" + t + \"]\";\n      }\n      return e;\n    },\n    uA = {},\n    lA = SC({}, uA, {\n      \" \": 1,\n      '\"': 1,\n      \"<\": 1,\n      \">\": 1,\n      \"`\": 1\n    }),\n    hA = SC({}, lA, {\n      \"#\": 1,\n      \"?\": 1,\n      \"{\": 1,\n      \"}\": 1\n    }),\n    pA = SC({}, hA, {\n      \"/\": 1,\n      \":\": 1,\n      \";\": 1,\n      \"=\": 1,\n      \"@\": 1,\n      \"[\": 1,\n      \"\\\\\": 1,\n      \"]\": 1,\n      \"^\": 1,\n      \"|\": 1\n    }),\n    _A = function _A(e, t) {\n      var i = RC(e, 0);\n      return i > 32 && i < 127 && !gC(t, e) ? e : encodeURIComponent(e);\n    },\n    EA = {\n      ftp: 21,\n      file: null,\n      http: 80,\n      https: 443,\n      ws: 80,\n      wss: 443\n    },\n    fA = function fA(e, t) {\n      var i;\n      return 2 == e.length && VC(ZC, xC(e, 0)) && (\":\" == (i = xC(e, 1)) || !t && \"|\" == i);\n    },\n    mA = function mA(e) {\n      var t;\n      return e.length > 1 && fA(YC(e, 0, 2)) && (2 == e.length || \"/\" === (t = xC(e, 2)) || \"\\\\\" === t || \"?\" === t || \"#\" === t);\n    },\n    gA = function gA(e) {\n      return \".\" === e || \"%2e\" === qC(e);\n    },\n    SA = {},\n    TA = {},\n    vA = {},\n    RA = {},\n    IA = {},\n    yA = {},\n    CA = {},\n    AA = {},\n    OA = {},\n    bA = {},\n    wA = {},\n    NA = {},\n    DA = {},\n    PA = {},\n    LA = {},\n    kA = {},\n    MA = {},\n    UA = {},\n    xA = {},\n    VA = {},\n    jA = {},\n    FA = function FA(e, t, i) {\n      var r,\n        n,\n        o,\n        s = yC(e);\n      if (t) {\n        if (n = this.parse(s)) throw LC(n);\n        this.searchParams = null;\n      } else {\n        if (void 0 !== i && (r = new FA(i, !0)), n = this.parse(s, null, r)) throw LC(n);\n        (o = DC(new NC())).bindURL(this), this.searchParams = o;\n      }\n    };\n  FA.prototype = {\n    type: \"URL\",\n    parse: function parse(e, t, i) {\n      var r,\n        n,\n        o,\n        s,\n        a,\n        c = this,\n        d = t || SA,\n        u = 0,\n        l = \"\",\n        h = !1,\n        p = !1,\n        _ = !1;\n      for (e = yC(e), t || (c.scheme = \"\", c.username = \"\", c.password = \"\", c.host = null, c.port = null, c.path = [], c.query = null, c.fragment = null, c.cannotBeABaseURL = !1, e = WC(e, aA, \"\")), e = WC(e, cA, \"\"), r = TC(e); u <= r.length;) {\n        switch (n = r[u], d) {\n          case SA:\n            if (!n || !VC(ZC, n)) {\n              if (t) return XC;\n              d = vA;\n              continue;\n            }\n            l += qC(n), d = TA;\n            break;\n          case TA:\n            if (n && (VC($C, n) || \"+\" == n || \"-\" == n || \".\" == n)) l += qC(n);else {\n              if (\":\" != n) {\n                if (t) return XC;\n                l = \"\", d = vA, u = 0;\n                continue;\n              }\n              if (t && (c.isSpecial() != gC(EA, l) || \"file\" == l && (c.includesCredentials() || null !== c.port) || \"file\" == c.scheme && !c.host)) return;\n              if (c.scheme = l, t) return void (c.isSpecial() && EA[c.scheme] == c.port && (c.port = null));\n              l = \"\", \"file\" == c.scheme ? d = PA : c.isSpecial() && i && i.scheme == c.scheme ? d = RA : c.isSpecial() ? d = AA : \"/\" == r[u + 1] ? (d = IA, u++) : (c.cannotBeABaseURL = !0, GC(c.path, \"\"), d = xA);\n            }\n            break;\n          case vA:\n            if (!i || i.cannotBeABaseURL && \"#\" != n) return XC;\n            if (i.cannotBeABaseURL && \"#\" == n) {\n              c.scheme = i.scheme, c.path = vC(i.path), c.query = i.query, c.fragment = \"\", c.cannotBeABaseURL = !0, d = jA;\n              break;\n            }\n            d = \"file\" == i.scheme ? PA : yA;\n            continue;\n          case RA:\n            if (\"/\" != n || \"/\" != r[u + 1]) {\n              d = yA;\n              continue;\n            }\n            d = OA, u++;\n            break;\n          case IA:\n            if (\"/\" == n) {\n              d = bA;\n              break;\n            }\n            d = UA;\n            continue;\n          case yA:\n            if (c.scheme = i.scheme, n == aC) c.username = i.username, c.password = i.password, c.host = i.host, c.port = i.port, c.path = vC(i.path), c.query = i.query;else if (\"/\" == n || \"\\\\\" == n && c.isSpecial()) d = CA;else if (\"?\" == n) c.username = i.username, c.password = i.password, c.host = i.host, c.port = i.port, c.path = vC(i.path), c.query = \"\", d = VA;else {\n              if (\"#\" != n) {\n                c.username = i.username, c.password = i.password, c.host = i.host, c.port = i.port, c.path = vC(i.path), c.path.length--, d = UA;\n                continue;\n              }\n              c.username = i.username, c.password = i.password, c.host = i.host, c.port = i.port, c.path = vC(i.path), c.query = i.query, c.fragment = \"\", d = jA;\n            }\n            break;\n          case CA:\n            if (!c.isSpecial() || \"/\" != n && \"\\\\\" != n) {\n              if (\"/\" != n) {\n                c.username = i.username, c.password = i.password, c.host = i.host, c.port = i.port, d = UA;\n                continue;\n              }\n              d = bA;\n            } else d = OA;\n            break;\n          case AA:\n            if (d = OA, \"/\" != n || \"/\" != xC(l, u + 1)) continue;\n            u++;\n            break;\n          case OA:\n            if (\"/\" != n && \"\\\\\" != n) {\n              d = bA;\n              continue;\n            }\n            break;\n          case bA:\n            if (\"@\" == n) {\n              h && (l = \"%40\" + l), h = !0, o = TC(l);\n              for (var E = 0; E < o.length; E++) {\n                var f = o[E];\n                if (\":\" != f || _) {\n                  var m = _A(f, pA);\n                  _ ? c.password += m : c.username += m;\n                } else _ = !0;\n              }\n              l = \"\";\n            } else if (n == aC || \"/\" == n || \"?\" == n || \"#\" == n || \"\\\\\" == n && c.isSpecial()) {\n              if (h && \"\" == l) return \"Invalid authority\";\n              u -= TC(l).length + 1, l = \"\", d = wA;\n            } else l += n;\n            break;\n          case wA:\n          case NA:\n            if (t && \"file\" == c.scheme) {\n              d = kA;\n              continue;\n            }\n            if (\":\" != n || p) {\n              if (n == aC || \"/\" == n || \"?\" == n || \"#\" == n || \"\\\\\" == n && c.isSpecial()) {\n                if (c.isSpecial() && \"\" == l) return zC;\n                if (t && \"\" == l && (c.includesCredentials() || null !== c.port)) return;\n                if (s = c.parseHost(l)) return s;\n                if (l = \"\", d = MA, t) return;\n                continue;\n              }\n              \"[\" == n ? p = !0 : \"]\" == n && (p = !1), l += n;\n            } else {\n              if (\"\" == l) return zC;\n              if (s = c.parseHost(l)) return s;\n              if (l = \"\", d = DA, t == NA) return;\n            }\n            break;\n          case DA:\n            if (!VC(eA, n)) {\n              if (n == aC || \"/\" == n || \"?\" == n || \"#\" == n || \"\\\\\" == n && c.isSpecial() || t) {\n                if (\"\" != l) {\n                  var g = kC(l, 10);\n                  if (g > 65535) return QC;\n                  c.port = c.isSpecial() && g === EA[c.scheme] ? null : g, l = \"\";\n                }\n                if (t) return;\n                d = MA;\n                continue;\n              }\n              return QC;\n            }\n            l += n;\n            break;\n          case PA:\n            if (c.scheme = \"file\", \"/\" == n || \"\\\\\" == n) d = LA;else {\n              if (!i || \"file\" != i.scheme) {\n                d = UA;\n                continue;\n              }\n              if (n == aC) c.host = i.host, c.path = vC(i.path), c.query = i.query;else if (\"?\" == n) c.host = i.host, c.path = vC(i.path), c.query = \"\", d = VA;else {\n                if (\"#\" != n) {\n                  mA(jC(vC(r, u), \"\")) || (c.host = i.host, c.path = vC(i.path), c.shortenPath()), d = UA;\n                  continue;\n                }\n                c.host = i.host, c.path = vC(i.path), c.query = i.query, c.fragment = \"\", d = jA;\n              }\n            }\n            break;\n          case LA:\n            if (\"/\" == n || \"\\\\\" == n) {\n              d = kA;\n              break;\n            }\n            i && \"file\" == i.scheme && !mA(jC(vC(r, u), \"\")) && (fA(i.path[0], !0) ? GC(c.path, i.path[0]) : c.host = i.host), d = UA;\n            continue;\n          case kA:\n            if (n == aC || \"/\" == n || \"\\\\\" == n || \"?\" == n || \"#\" == n) {\n              if (!t && fA(l)) d = UA;else if (\"\" == l) {\n                if (c.host = \"\", t) return;\n                d = MA;\n              } else {\n                if (s = c.parseHost(l)) return s;\n                if (\"localhost\" == c.host && (c.host = \"\"), t) return;\n                l = \"\", d = MA;\n              }\n              continue;\n            }\n            l += n;\n            break;\n          case MA:\n            if (c.isSpecial()) {\n              if (d = UA, \"/\" != n && \"\\\\\" != n) continue;\n            } else if (t || \"?\" != n) {\n              if (t || \"#\" != n) {\n                if (n != aC && (d = UA, \"/\" != n)) continue;\n              } else c.fragment = \"\", d = jA;\n            } else c.query = \"\", d = VA;\n            break;\n          case UA:\n            if (n == aC || \"/\" == n || \"\\\\\" == n && c.isSpecial() || !t && (\"?\" == n || \"#\" == n)) {\n              if (\"..\" === (a = qC(a = l)) || \"%2e.\" === a || \".%2e\" === a || \"%2e%2e\" === a ? (c.shortenPath(), \"/\" == n || \"\\\\\" == n && c.isSpecial() || GC(c.path, \"\")) : gA(l) ? \"/\" == n || \"\\\\\" == n && c.isSpecial() || GC(c.path, \"\") : (\"file\" == c.scheme && !c.path.length && fA(l) && (c.host && (c.host = \"\"), l = xC(l, 0) + \":\"), GC(c.path, l)), l = \"\", \"file\" == c.scheme && (n == aC || \"?\" == n || \"#\" == n)) for (; c.path.length > 1 && \"\" === c.path[0];) HC(c.path);\n              \"?\" == n ? (c.query = \"\", d = VA) : \"#\" == n && (c.fragment = \"\", d = jA);\n            } else l += _A(n, hA);\n            break;\n          case xA:\n            \"?\" == n ? (c.query = \"\", d = VA) : \"#\" == n ? (c.fragment = \"\", d = jA) : n != aC && (c.path[0] += _A(n, uA));\n            break;\n          case VA:\n            t || \"#\" != n ? n != aC && (\"'\" == n && c.isSpecial() ? c.query += \"%27\" : c.query += \"#\" == n ? \"%23\" : _A(n, uA)) : (c.fragment = \"\", d = jA);\n            break;\n          case jA:\n            n != aC && (c.fragment += _A(n, lA));\n        }\n        u++;\n      }\n    },\n    parseHost: function parseHost(e) {\n      var t, i, r;\n      if (\"[\" == xC(e, 0)) {\n        if (\"]\" != xC(e, e.length - 1)) return zC;\n        if (!(t = function (e) {\n          var t,\n            i,\n            r,\n            n,\n            o,\n            s,\n            a,\n            c = [0, 0, 0, 0, 0, 0, 0, 0],\n            d = 0,\n            u = null,\n            l = 0,\n            h = function h() {\n              return xC(e, l);\n            };\n          if (\":\" == h()) {\n            if (\":\" != xC(e, 1)) return;\n            l += 2, u = ++d;\n          }\n          for (; h();) {\n            if (8 == d) return;\n            if (\":\" != h()) {\n              for (t = i = 0; i < 4 && VC(nA, h());) t = 16 * t + kC(h(), 16), l++, i++;\n              if (\".\" == h()) {\n                if (0 == i) return;\n                if (l -= i, d > 6) return;\n                for (r = 0; h();) {\n                  if (n = null, r > 0) {\n                    if (!(\".\" == h() && r < 4)) return;\n                    l++;\n                  }\n                  if (!VC(eA, h())) return;\n                  for (; VC(eA, h());) {\n                    if (o = kC(h(), 10), null === n) n = o;else {\n                      if (0 == n) return;\n                      n = 10 * n + o;\n                    }\n                    if (n > 255) return;\n                    l++;\n                  }\n                  c[d] = 256 * c[d] + n, 2 != ++r && 4 != r || d++;\n                }\n                if (4 != r) return;\n                break;\n              }\n              if (\":\" == h()) {\n                if (l++, !h()) return;\n              } else if (h()) return;\n              c[d++] = t;\n            } else {\n              if (null !== u) return;\n              l++, u = ++d;\n            }\n          }\n          if (null !== u) for (s = d - u, d = 7; 0 != d && s > 0;) a = c[d], c[d--] = c[u + s - 1], c[u + --s] = a;else if (8 != d) return;\n          return c;\n        }(YC(e, 1, -1)))) return zC;\n        this.host = t;\n      } else if (this.isSpecial()) {\n        if (e = IC(e), VC(oA, e)) return zC;\n        if (null === (t = function (e) {\n          var t,\n            i,\n            r,\n            n,\n            o,\n            s,\n            a,\n            c = KC(e, \".\");\n          if (c.length && \"\" == c[c.length - 1] && c.length--, (t = c.length) > 4) return e;\n          for (i = [], r = 0; r < t; r++) {\n            if (\"\" == (n = c[r])) return e;\n            if (o = 10, n.length > 1 && \"0\" == xC(n, 0) && (o = VC(tA, n) ? 16 : 8, n = YC(n, 8 == o ? 1 : 2)), \"\" === n) s = 0;else {\n              if (!VC(10 == o ? rA : 8 == o ? iA : nA, n)) return e;\n              s = kC(n, o);\n            }\n            GC(i, s);\n          }\n          for (r = 0; r < t; r++) if (s = i[r], r == t - 1) {\n            if (s >= UC(256, 5 - t)) return null;\n          } else if (s > 255) return null;\n          for (a = BC(i), r = 0; r < i.length; r++) a += i[r] * UC(256, 3 - r);\n          return a;\n        }(e))) return zC;\n        this.host = t;\n      } else {\n        if (VC(sA, e)) return zC;\n        for (t = \"\", i = TC(e), r = 0; r < i.length; r++) t += _A(i[r], uA);\n        this.host = t;\n      }\n    },\n    cannotHaveUsernamePasswordPort: function cannotHaveUsernamePasswordPort() {\n      return !this.host || this.cannotBeABaseURL || \"file\" == this.scheme;\n    },\n    includesCredentials: function includesCredentials() {\n      return \"\" != this.username || \"\" != this.password;\n    },\n    isSpecial: function isSpecial() {\n      return gC(EA, this.scheme);\n    },\n    shortenPath: function shortenPath() {\n      var e = this.path,\n        t = e.length;\n      !t || \"file\" == this.scheme && 1 == t && fA(e[0], !0) || e.length--;\n    },\n    serialize: function serialize() {\n      var e = this,\n        t = e.scheme,\n        i = e.username,\n        r = e.password,\n        n = e.host,\n        o = e.port,\n        s = e.path,\n        a = e.query,\n        c = e.fragment,\n        d = t + \":\";\n      return null !== n ? (d += \"//\", e.includesCredentials() && (d += i + (r ? \":\" + r : \"\") + \"@\"), d += dA(n), null !== o && (d += \":\" + o)) : \"file\" == t && (d += \"//\"), d += e.cannotBeABaseURL ? s[0] : s.length ? \"/\" + jC(s, \"/\") : \"\", null !== a && (d += \"?\" + a), null !== c && (d += \"#\" + c), d;\n    },\n    setHref: function setHref(e) {\n      var t = this.parse(e);\n      if (t) throw LC(t);\n      this.searchParams.update();\n    },\n    getOrigin: function getOrigin() {\n      var e = this.scheme,\n        t = this.port;\n      if (\"blob\" == e) try {\n        return new BA(e.path[0]).origin;\n      } catch (e) {\n        return \"null\";\n      }\n      return \"file\" != e && this.isSpecial() ? e + \"://\" + dA(this.host) + (null !== t ? \":\" + t : \"\") : \"null\";\n    },\n    getProtocol: function getProtocol() {\n      return this.scheme + \":\";\n    },\n    setProtocol: function setProtocol(e) {\n      this.parse(yC(e) + \":\", SA);\n    },\n    getUsername: function getUsername() {\n      return this.username;\n    },\n    setUsername: function setUsername(e) {\n      var t = TC(yC(e));\n      if (!this.cannotHaveUsernamePasswordPort()) {\n        this.username = \"\";\n        for (var i = 0; i < t.length; i++) this.username += _A(t[i], pA);\n      }\n    },\n    getPassword: function getPassword() {\n      return this.password;\n    },\n    setPassword: function setPassword(e) {\n      var t = TC(yC(e));\n      if (!this.cannotHaveUsernamePasswordPort()) {\n        this.password = \"\";\n        for (var i = 0; i < t.length; i++) this.password += _A(t[i], pA);\n      }\n    },\n    getHost: function getHost() {\n      var e = this.host,\n        t = this.port;\n      return null === e ? \"\" : null === t ? dA(e) : dA(e) + \":\" + t;\n    },\n    setHost: function setHost(e) {\n      this.cannotBeABaseURL || this.parse(e, wA);\n    },\n    getHostname: function getHostname() {\n      var e = this.host;\n      return null === e ? \"\" : dA(e);\n    },\n    setHostname: function setHostname(e) {\n      this.cannotBeABaseURL || this.parse(e, NA);\n    },\n    getPort: function getPort() {\n      var e = this.port;\n      return null === e ? \"\" : yC(e);\n    },\n    setPort: function setPort(e) {\n      this.cannotHaveUsernamePasswordPort() || (\"\" == (e = yC(e)) ? this.port = null : this.parse(e, DA));\n    },\n    getPathname: function getPathname() {\n      var e = this.path;\n      return this.cannotBeABaseURL ? e[0] : e.length ? \"/\" + jC(e, \"/\") : \"\";\n    },\n    setPathname: function setPathname(e) {\n      this.cannotBeABaseURL || (this.path = [], this.parse(e, MA));\n    },\n    getSearch: function getSearch() {\n      var e = this.query;\n      return e ? \"?\" + e : \"\";\n    },\n    setSearch: function setSearch(e) {\n      \"\" == (e = yC(e)) ? this.query = null : (\"?\" == xC(e, 0) && (e = YC(e, 1)), this.query = \"\", this.parse(e, VA)), this.searchParams.update();\n    },\n    getSearchParams: function getSearchParams() {\n      return this.searchParams.facade;\n    },\n    getHash: function getHash() {\n      var e = this.fragment;\n      return e ? \"#\" + e : \"\";\n    },\n    setHash: function setHash(e) {\n      \"\" != (e = yC(e)) ? (\"#\" == xC(e, 0) && (e = YC(e, 1)), this.fragment = \"\", this.parse(e, jA)) : this.fragment = null;\n    },\n    update: function update() {\n      this.query = this.searchParams.serialize() || null;\n    }\n  };\n  var BA = function BA(e) {\n      var t = mC(this, GA),\n        i = arguments.length > 1 ? arguments[1] : void 0,\n        r = bC(t, new FA(e, !1, i));\n      uC || (t.href = r.serialize(), t.origin = r.getOrigin(), t.protocol = r.getProtocol(), t.username = r.getUsername(), t.password = r.getPassword(), t.host = r.getHost(), t.hostname = r.getHostname(), t.port = r.getPort(), t.pathname = r.getPathname(), t.search = r.getSearch(), t.searchParams = r.getSearchParams(), t.hash = r.getHash());\n    },\n    GA = BA.prototype,\n    WA = function WA(e, t) {\n      return {\n        get: function get() {\n          return wC(this)[e]();\n        },\n        set: t && function (e) {\n          return wC(this)[t](e);\n        },\n        configurable: !0,\n        enumerable: !0\n      };\n    };\n  if (uC && EC(GA, {\n    href: WA(\"serialize\", \"setHref\"),\n    origin: WA(\"getOrigin\"),\n    protocol: WA(\"getProtocol\", \"setProtocol\"),\n    username: WA(\"getUsername\", \"setUsername\"),\n    password: WA(\"getPassword\", \"setPassword\"),\n    host: WA(\"getHost\", \"setHost\"),\n    hostname: WA(\"getHostname\", \"setHostname\"),\n    port: WA(\"getPort\", \"setPort\"),\n    pathname: WA(\"getPathname\", \"setPathname\"),\n    search: WA(\"getSearch\", \"setSearch\"),\n    searchParams: WA(\"getSearchParams\"),\n    hash: WA(\"getHash\", \"setHash\")\n  }), fC(GA, \"toJSON\", function () {\n    return wC(this).serialize();\n  }, {\n    enumerable: !0\n  }), fC(GA, \"toString\", function () {\n    return wC(this).serialize();\n  }, {\n    enumerable: !0\n  }), PC) {\n    var HA = PC.createObjectURL,\n      KA = PC.revokeObjectURL;\n    HA && fC(BA, \"createObjectURL\", pC(HA, PC)), KA && fC(BA, \"revokeObjectURL\", pC(KA, PC));\n  }\n  CC(BA, \"URL\"), dC({\n    global: !0,\n    forced: !lC,\n    sham: !uC\n  }, {\n    URL: BA\n  });\n  var YA = J.URL;\n  var qA = (_qA = {}, _defineProperty(_qA, Sm.ACCESS_POINT, (_Sm$ACCESS_POINT = {}, _defineProperty(_Sm$ACCESS_POINT, Rm.NO_FLAG_SET, {\n    desc: \"flag is zero\",\n    retry: !1\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.FLAG_SET_BUT_EMPTY, {\n    desc: \"flag is empty\",\n    retry: !1\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.INVALID_FALG_SET, {\n    desc: \"invalid flag\",\n    retry: !1\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.FLAG_SET_BUT_NO_RE, {\n    desc: \"flag set unilbs but no request\",\n    retry: !1\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.INVALID_SERVICE_ID, {\n    desc: \"invalid service id\",\n    retry: !1\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE, {\n    desc: \"no service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_P2P, {\n    desc: \"no unilbs p2p service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_VOET, {\n    desc: \"no unilbs voice service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_WEBRTC, {\n    desc: \"no unilbs webrtc service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_CDS, {\n    desc: \"no cds service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_CDN, {\n    desc: \"no cdn dispatcher service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_TDS, {\n    desc: \"no tds service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_REPORT, {\n    desc: \"no unilbs report service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_APP_CENTER, {\n    desc: \"no app center service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_ENV0, {\n    desc: \"no unilbs sig env0 service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_VOET, {\n    desc: \"no unilbs voet service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_STRING_UID, {\n    desc: \"no string uid service available\",\n    retry: !0\n  }), _defineProperty(_Sm$ACCESS_POINT, Rm.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS, {\n    desc: \"no webrtc unilbs service available\",\n    retry: !0\n  }), _Sm$ACCESS_POINT)), _defineProperty(_qA, Sm.UNILBS, (_Sm$UNILBS = {}, _defineProperty(_Sm$UNILBS, vm.INVALID_VENDOR_KEY, {\n    desc: \"invalid vendor key, can not find appid\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.INVALID_CHANNEL_NAME, {\n    desc: \"invalid channel name\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.INTERNAL_ERROR, {\n    desc: \"unilbs internal error\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.NO_AUTHORIZED, {\n    desc: \"invalid token, authorized failed\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.DYNAMIC_KEY_TIMEOUT, {\n    desc: \"dynamic key or token timeout\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.NO_ACTIVE_STATUS, {\n    desc: \"no active status\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.DYNAMIC_KEY_EXPIRED, {\n    desc: \"dynamic key expired\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.STATIC_USE_DYNAMIC_KEY, {\n    desc: \"static use dynamic key\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.DYNAMIC_USE_STATIC_KEY, {\n    desc: \"dynamic use static key\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.USER_OVERLOAD, {\n    desc: \"amount of users over load\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.FORBIDDEN_REGION, {\n    desc: \"the request is forbidden in this area\",\n    retry: !1\n  }), _defineProperty(_Sm$UNILBS, vm.CANNOT_MEET_AREA_DEMAND, {\n    desc: \"unable to allocate services in this area\",\n    retry: !1\n  }), _Sm$UNILBS)), _defineProperty(_qA, Sm.STRING_UID_ALLOCATOR, (_Sm$STRING_UID_ALLOCA = {}, _defineProperty(_Sm$STRING_UID_ALLOCA, Tm.IIIEGAL_APPID, {\n    desc: \"invalid appid\",\n    retry: !1\n  }), _defineProperty(_Sm$STRING_UID_ALLOCA, Tm.IIIEGAL_UID, {\n    desc: \"invalid string uid\",\n    retry: !1\n  }), _defineProperty(_Sm$STRING_UID_ALLOCA, Tm.INTERNAL_ERROR, {\n    desc: \"string uid allocator internal error\",\n    retry: !0\n  }), _Sm$STRING_UID_ALLOCA)), _qA);\n  function JA(e) {\n    var t = qA[Math.floor(e / 1e4)];\n    if (!t) return {\n      desc: \"unkonw error\",\n      retry: !1\n    };\n    var i = t[e % 1e4];\n    if (!i) {\n      if (Math.floor(e / 1e4) === Sm.ACCESS_POINT) {\n        var _t57 = e % 1e4;\n        if (\"1\" === _t57.toString()[0]) return {\n          desc: e.toString(),\n          retry: !1\n        };\n        if (\"2\" === _t57.toString()[0]) return {\n          desc: e.toString(),\n          retry: !0\n        };\n      }\n      return {\n        desc: \"unkonw error\",\n        retry: !1\n      };\n    }\n    return i;\n  }\n  var XA = (_XA = {}, _defineProperty(_XA, Im.K_TIMESTAMP_EXPIRED, {\n    desc: \"K_TIMESTAMP_EXPIRED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_CHANNEL_PERMISSION_INVALID, {\n    desc: \"K_CHANNEL_PERMISSION_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_CERTIFICATE_INVALID, {\n    desc: \"K_CERTIFICATE_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_CHANNEL_NAME_EMPTY, {\n    desc: \"K_CHANNEL_NAME_EMPTY\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_CHANNEL_NOT_FOUND, {\n    desc: \"K_CHANNEL_NOT_FOUND\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_TICKET_INVALID, {\n    desc: \"K_TICKET_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_CHANNEL_CONFLICTED, {\n    desc: \"K_CHANNEL_CONFLICTED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_SERVICE_NOT_READY, {\n    desc: \"K_SERVICE_NOT_READY\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.K_SERVICE_TOO_HEAVY, {\n    desc: \"K_SERVICE_TOO_HEAVY\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.K_UID_BANNED, {\n    desc: \"K_UID_BANNED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.K_IP_BANNED, {\n    desc: \"K_IP_BANNED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_VENDOR_KEY, {\n    desc: \"ERR_INVALID_VENDOR_KEY\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_CHANNEL_NAME, {\n    desc: \"ERR_INVALID_CHANNEL_NAME\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.WARN_NO_AVAILABLE_CHANNEL, {\n    desc: \"WARN_NO_AVAILABLE_CHANNEL\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.WARN_LOOKUP_CHANNEL_TIMEOUT, {\n    desc: \"WARN_LOOKUP_CHANNEL_TIMEOUT\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.WARN_LOOKUP_CHANNEL_REJECTED, {\n    desc: \"WARN_LOOKUP_CHANNEL_REJECTED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.WARN_OPEN_CHANNEL_TIMEOUT, {\n    desc: \"WARN_OPEN_CHANNEL_TIMEOUT\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.WARN_OPEN_CHANNEL_REJECTED, {\n    desc: \"WARN_OPEN_CHANNEL_REJECTED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.WARN_REQUEST_DEFERRED, {\n    desc: \"WARN_REQUEST_DEFERRED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_DYNAMIC_KEY_TIMEOUT, {\n    desc: \"ERR_DYNAMIC_KEY_TIMEOUT\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_NO_AUTHORIZED, {\n    desc: \"ERR_NO_AUTHORIZED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_VOM_SERVICE_UNAVAILABLE, {\n    desc: \"ERR_VOM_SERVICE_UNAVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_NO_CHANNEL_AVAILABLE_CODE, {\n    desc: \"ERR_NO_CHANNEL_AVAILABLE_CODE\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_MASTER_VOCS_UNAVAILABLE, {\n    desc: \"ERR_MASTER_VOCS_UNAVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_INTERNAL_ERROR, {\n    desc: \"ERR_INTERNAL_ERROR\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_NO_ACTIVE_STATUS, {\n    desc: \"ERR_NO_ACTIVE_STATUS\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_UID, {\n    desc: \"ERR_INVALID_UID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_DYNAMIC_KEY_EXPIRED, {\n    desc: \"ERR_DYNAMIC_KEY_EXPIRED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_STATIC_USE_DYANMIC_KE, {\n    desc: \"ERR_STATIC_USE_DYANMIC_KE\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_DYNAMIC_USE_STATIC_KE, {\n    desc: \"ERR_DYNAMIC_USE_STATIC_KE\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_NO_VOCS_AVAILABLE, {\n    desc: \"ERR_NO_VOCS_AVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_NO_VOS_AVAILABLE, {\n    desc: \"ERR_NO_VOS_AVAILABLE\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_JOIN_CHANNEL_TIMEOUT, {\n    desc: \"ERR_JOIN_CHANNEL_TIMEOUT\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_JOIN_BY_MULTI_IP, {\n    desc: \"ERR_JOIN_BY_MULTI_IP\",\n    action: \"recover\"\n  }), _defineProperty(_XA, Im.ERR_NOT_JOINED, {\n    desc: \"ERR_NOT_JOINED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_REPEAT_JOIN_REQUEST, {\n    desc: \"ERR_REPEAT_JOIN_REQUEST\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_REPEAT_JOIN_CHANNEL, {\n    desc: \"ERR_REPEAT_JOIN_CHANNEL\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_VENDOR_KEY, {\n    desc: \"ERR_INVALID_VENDOR_KEY\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_CHANNEL_NAME, {\n    desc: \"ERR_INVALID_CHANNEL_NAME\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_STRINGUID, {\n    desc: \"ERR_INVALID_STRINGUID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_TOO_MANY_USERS, {\n    desc: \"ERR_TOO_MANY_USERS\",\n    action: \"tryNext\"\n  }), _defineProperty(_XA, Im.ERR_SET_CLIENT_ROLE_TIMEOUT, {\n    desc: \"ERR_SET_CLIENT_ROLE_TIMEOUT\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_SET_CLIENT_ROLE_NO_PERMISSION, {\n    desc: \"ERR_SET_CLIENT_ROLE_TIMEOUT\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE, {\n    desc: \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",\n    action: \"success\"\n  }), _defineProperty(_XA, Im.ERR_PUBLISH_REQUEST_INVALID, {\n    desc: \"ERR_PUBLISH_REQUEST_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_SUBSCRIBE_REQUEST_INVALID, {\n    desc: \"ERR_SUBSCRIBE_REQUEST_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_NOT_SUPPORTED_MESSAGE, {\n    desc: \"ERR_NOT_SUPPORTED_MESSAGE\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_ILLEAGAL_PLUGIN, {\n    desc: \"ERR_ILLEAGAL_PLUGIN\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ILLEGAL_CLIENT_ROLE_LEVEL, {\n    desc: \"ILLEGAL_CLIENT_ROLE_LEVEL\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_REJOIN_TOKEN_INVALID, {\n    desc: \"ERR_REJOIN_TOKEN_INVALID\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_REJOIN_USER_NOT_JOINED, {\n    desc: \"ERR_REJOIN_NOT_JOINED\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_INVALID_OPTIONAL_INFO, {\n    desc: \"ERR_INVALID_OPTIONAL_INFO\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_TEST_RECOVER, {\n    desc: \"ERR_TEST_RECOVER\",\n    action: \"recover\"\n  }), _defineProperty(_XA, Im.ERR_TEST_TRYNEXT, {\n    desc: \"ERR_TEST_TRYNEXT\",\n    action: \"recover\"\n  }), _defineProperty(_XA, Im.ERR_TEST_RETRY, {\n    desc: \"ERR_TEST_RETRY\",\n    action: \"recover\"\n  }), _defineProperty(_XA, Im.ILLEGAL_AES_PASSWORD, {\n    desc: \"ERR_TEST_RETRY\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_TOO_MANY_BROADCASTERS, {\n    desc: \"ERR_TOO_MANY_BROADCASTERS\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_TOO_MANY_SUBSCRIBERS, {\n    desc: \"ERR_TOO_MANY_SUBSCRIBERS\",\n    action: \"failed\"\n  }), _defineProperty(_XA, Im.ERR_LICENSE_ILLEGAL, {\n    desc: \"ERR_LICENSE_ILLEGAL\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_LICENSE_MISSING, {\n    desc: \"ERR_LICENSE_MISSING\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_LICENSE_EXPIRED, {\n    desc: \"ERR_LICENSE_EXPIRED\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_LICENSE_MINUTES_EXCEEDED, {\n    desc: \"ERR_LICENSE_MINUTES_EXCEEDED\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_LICENSE_PERIOD_INVALID, {\n    desc: \"ERR_LICENSE_PERIOD_INVALID\",\n    action: \"quit\"\n  }), _defineProperty(_XA, Im.ERR_LICENSE_MULTIPLE_SDK_SERVICE, {\n    desc: \"ERR_LICENSE_MULTIPLE_SDK_SERVICE\",\n    action: \"quit\"\n  }), _XA);\n  function zA(e) {\n    var t = XA[e];\n    return t || {\n      desc: \"UNKNOW_ERROR_\".concat(e),\n      action: \"failed\"\n    };\n  }\n  var QA = /*#__PURE__*/function (_gE16) {\n    _inherits(QA, _gE16);\n    _createClass(QA, [{\n      key: \"queue\",\n      get: function get() {\n        return [].concat(_toConsumableArray(this.highPriorityQueue), _toConsumableArray(this.lowPriorityQueue));\n      }\n    }]);\n    function QA(e) {\n      var _this79;\n      _classCallCheck(this, QA);\n      _this79 = _possibleConstructorReturn(this, _getPrototypeOf(QA).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this79)), \"lowPriorityQueue\", []), mp(_assertThisInitialized(_assertThisInitialized(_this79)), \"highPriorityQueue\", []), mp(_assertThisInitialized(_assertThisInitialized(_this79)), \"AgoraWebSocketManager\", void 0), _this79.AgoraWebSocketManager = e;\n      return _this79;\n    }\n    _createClass(QA, [{\n      key: \"reset\",\n      value: function reset() {\n        this.lowPriorityQueue = [], this.highPriorityQueue = [];\n      }\n    }, {\n      key: \"pushMessage\",\n      value: function pushMessage(e) {\n        arguments.length > 1 && void 0 !== arguments[1] && arguments[1] ? this.highPriorityQueue.push(e) : this.lowPriorityQueue.push(e), this.sendMessage();\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage() {\n        var _this80 = this;\n        var e = this.queue.length;\n        var t = 0;\n        t = e < 5 ? 15 * e : 60 + 3 * (e - 4), setTimeout(function () {\n          _this80._sendMessage();\n        }, t);\n      }\n    }, {\n      key: \"_sendMessage\",\n      value: function _sendMessage() {\n        if (!this.queue.length) return;\n        var e = this.AgoraWebSocketManager.getConnection();\n        if (!e || 1 !== e.readyState) return;\n        var t = this.queue.shift();\n        return this.lowPriorityQueue.includes(t) ? this.lowPriorityQueue.shift() : this.highPriorityQueue.shift(), e.send(t.compressed), t;\n      }\n    }]);\n    return QA;\n  }(gE);\n  function ZA(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  var $A = /*#__PURE__*/function (_gE17) {\n    _inherits($A, _gE17);\n    _createClass($A, [{\n      key: \"resetReconnectCount\",\n      value: function resetReconnectCount(e) {\n        NE.debug(\"websocket reset reconnect count, reason: \" + e), this.reconnectCount = 0;\n      }\n    }, {\n      key: \"url\",\n      get: function get() {\n        return this.websocket ? this.websocket.url : null;\n      }\n    }, {\n      key: \"reconnectMode\",\n      get: function get() {\n        return this._reconnectMode;\n      },\n      set: function set(e) {\n        [\"tryNext\", \"recover\"].includes(e) && this.resetReconnectCount(e), this._reconnectMode = e;\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        e !== this._state && (this._state = e, \"reconnecting\" === this._state ? this.emit(Km.RECONNECTING, this.reconnectReason) : \"connected\" === this._state ? this.emit(Km.CONNECTED) : \"closed\" === this._state ? this.emit(Km.CLOSED) : \"failed\" === this._state && this.emit(Km.FAILED));\n      }\n    }]);\n    function $A(e, t) {\n      var _this81;\n      _classCallCheck(this, $A);\n      var i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],\n        r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],\n        n = arguments.length > 4 ? arguments[4] : void 0;\n      _this81 = _possibleConstructorReturn(this, _getPrototypeOf($A).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"connectionID\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"currentURLIndex\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"urls\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"_reconnectMode\", \"tryNext\"), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"reconnectReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"_initMutex\", new OT(\"websocket\")), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"name\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"_state\", \"closed\"), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"reconnectInterrupter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"websocket\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"retryConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"reconnectCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"forceCloseTimeout\", 5e3), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"onlineReconnectListener\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"messageSender\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"useCompress\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"tryDoubleDomain\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"wsInflateLength\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"wsDeflateLength\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"closeEstablishingWs\", function () {}), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this81)), \"joinChannelServiceRecordIndex\", void 0), _this81.store = n, _this81.name = e, _this81.retryConfig = function (e) {\n        for (var t = 1; t < arguments.length; t++) {\n          var i = null != arguments[t] ? arguments[t] : {};\n          t % 2 ? ZA(Object(i), !0).forEach(function (t) {\n            mp(e, t, i[t]);\n          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : ZA(Object(i)).forEach(function (t) {\n            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n          });\n        }\n        return e;\n      }({}, t), _this81.useCompress = i, _this81.tryDoubleDomain = r;\n      var o = t.timeout,\n        s = t.timeoutFactor,\n        a = Math.max(300, Math.floor(3 * o / 5)),\n        c = Math.max(1.2, Math.floor(8 * s) / 10);\n      bg.ONLINE && (_this81.retryConfig.timeout = a, _this81.retryConfig.timeoutFactor = c), pT.on(wg.NETWORK_STATE_CHANGE, function (e, t) {\n        e !== t && (_this81.resetReconnectCount(\"network state change: \".concat(t, \" -> \").concat(e)), e === bg.ONLINE ? (_this81.retryConfig.timeout = a, _this81.retryConfig.timeoutFactor = c) : (_this81.retryConfig.timeout = o, _this81.retryConfig.timeoutFactor = s));\n      });\n      return _this81;\n    }\n    _createClass($A, [{\n      key: \"getConnection\",\n      value: function getConnection() {\n        return this.websocket || void 0;\n      }\n    }, {\n      key: \"init\",\n      value: function init(e) {\n        var _this82 = this;\n        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 5e3;\n        this.forceCloseTimeout = t;\n        var i = function i(t, _i37) {\n          _this82.urls = e;\n          var r = _this82.urls[_this82.currentURLIndex];\n          _this82.state = \"connecting\", _this82.messageSender = new QA(_this82), _this82.createWebSocketConnection(r).then(t).catch(_i37), _this82.once(Km.CLOSED, function () {\n            return _i37(new vE(TE.WS_DISCONNECT));\n          }), _this82.once(Km.CONNECTED, function () {\n            return t();\n          });\n        };\n        return this._initMutex.lock().then(function (e) {\n          return new Cl(function (e, t) {\n            i(e, t);\n          }).then(function () {\n            e();\n          }).catch(function () {\n            e();\n          });\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close(e, t) {\n        if (this.currentURLIndex = 0, this.resetReconnectCount(\"close\"), this.reconnectInterrupter && this.reconnectInterrupter(), this.websocket) {\n          this.websocket.onclose = null, this.websocket.onopen = null, this.websocket.onmessage = null;\n          var _e46 = this.websocket;\n          t ? setTimeout(function () {\n            return _e46.close();\n          }, 500) : _e46.close(), this.websocket = void 0;\n        }\n        this.state = e ? \"failed\" : \"closed\", this.closeEstablishingWs && this.closeEstablishingWs();\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        if (!this.websocket) return void NE.warning(\"[\".concat(this.name, \"] can not reconnect, no websocket\"));\n        var i;\n        (void 0 !== e && (this.reconnectMode = e), NE.debug(\"[\".concat(this.name, \"] reconnect is triggered initiative\")), \"number\" == typeof this.joinChannelServiceRecordIndex) && (null === (i = this.store) || void 0 === i || i.recordJoinChannelService({\n          status: \"error\",\n          errors: [new Error(t)]\n        }, this.joinChannelServiceRecordIndex));\n        var r = this.websocket.onclose;\n        this.websocket.onclose = null, this.websocket.close(), r && r.bind(this.websocket)({\n          code: 9999,\n          reason: t\n        });\n      }\n    }, {\n      key: \"sendMessageWithJSON\",\n      value: function sendMessageWithJSON(e) {\n        var t = JSON.stringify(e);\n        return {\n          compressed: t,\n          compressedLength: t.length,\n          origin: e\n        };\n      }\n    }, {\n      key: \"sendMessageWithUint8Array\",\n      value: function sendMessageWithUint8Array(e) {\n        return {\n          compressed: e,\n          compressedLength: e.byteLength,\n          origin: e\n        };\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(e) {\n        var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],\n          i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];\n        if (!this.websocket || this.websocket.readyState !== WebSocket.OPEN) throw new vE(TE.WS_ABORT, \"websocket is not ready\");\n        try {\n          var r = null;\n          r = i ? this.sendMessageWithUint8Array(e) : this.sendMessageWithJSON(e), t ? this.websocket.send(r.compressed) : this.messageSender.pushMessage(r);\n        } catch (e) {\n          throw new vE(TE.WS_ERR, \"send websocket message error\" + e.toString());\n        }\n      }\n    }, {\n      key: \"setWsInflateData\",\n      value: function setWsInflateData(e) {\n        this.wsDeflateLength = this.wsDeflateLength + e.originLength, this.wsInflateLength = this.wsInflateLength + e.compressedLength;\n      }\n    }, {\n      key: \"getWsInflateData\",\n      value: function getWsInflateData() {\n        var e = this.wsInflateLength,\n          t = this.wsDeflateLength;\n        return this.clearWsInflateData(), {\n          wsInflateLength: e,\n          wsDeflateLength: t\n        };\n      }\n    }, {\n      key: \"clearWsInflateData\",\n      value: function clearWsInflateData() {\n        this.wsInflateLength = 0, this.wsDeflateLength = 0;\n      }\n    }, {\n      key: \"createWebSocketConnection\",\n      value: function () {\n        var _createWebSocketConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee47(e, t) {\n          var _this83 = this;\n          return _regeneratorRuntime().wrap(function _callee47$(_context47) {\n            while (1) switch (_context47.prev = _context47.next) {\n              case 0:\n                return _context47.abrupt(\"return\", (this.connectionID += 1, this.connectionID, this.joinChannelServiceRecordIndex = void 0, new Cl(function (i, r) {\n                  var n;\n                  var o = function o(e) {\n                      var t;\n                      null === (t = _this83.store) || void 0 === t || t.signalChannelOpen(), NE.debug(\"[\".concat(_this83.name, \"] websocket opened:\"), e), _this83.reconnectMode = \"retry\", _this83.state = \"connected\", _this83.resetReconnectCount(\"opened\"), i();\n                    },\n                    s = /*#__PURE__*/function () {\n                      var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee46(e) {\n                        var _t58, _n17;\n                        return _regeneratorRuntime().wrap(function _callee46$(_context46) {\n                          while (1) switch (_context46.prev = _context46.next) {\n                            case 0:\n                              if (!(NE.debug(\"[\".concat(_this83.name, \"] websocket close \").concat(_this83.websocket && _this83.websocket.url, \", code: \").concat(e.code, \", reason: \").concat(e.reason, \", current mode: \").concat(_this83.reconnectMode)), _this83.reconnectCount < _this83.retryConfig.maxRetryCount)) {\n                                _context46.next = 13;\n                                break;\n                              }\n                              \"connected\" === _this83.state && (_this83.reconnectReason = e.reason, _this83.state = \"reconnecting\");\n                              _t58 = GR(_this83, Km.WILL_RECONNECT, _this83.reconnectMode) || _this83.reconnectMode;\n                              _context46.next = 5;\n                              return _this83.reconnectWithAction(_t58);\n                            case 5:\n                              _n17 = _context46.sent;\n                              if (!(\"closed\" === _this83.state)) {\n                                _context46.next = 8;\n                                break;\n                              }\n                              return _context46.abrupt(\"return\", void NE.debug(\"[\".concat(_this83.connectionID, \"] ws is closed, no need to reconnect\")));\n                            case 8:\n                              if (_n17) {\n                                _context46.next = 10;\n                                break;\n                              }\n                              return _context46.abrupt(\"return\", (r(new vE(TE.WS_DISCONNECT, \"websocket reconnect failed: \".concat(e.code))), void _this83.close(!0)));\n                            case 10:\n                              i();\n                              _context46.next = 14;\n                              break;\n                            case 13:\n                              r(new vE(TE.WS_DISCONNECT, \"websocket close: \".concat(e.code))), _this83.close();\n                            case 14:\n                            case \"end\":\n                              return _context46.stop();\n                          }\n                        }, _callee46);\n                      }));\n                      return function s(_x59) {\n                        return _ref18.apply(this, arguments);\n                      };\n                    }(),\n                    a = function a(e) {\n                      _this83.emit(Km.ON_MESSAGE, e);\n                    };\n                  _this83.websocket && (_this83.websocket.onclose = null, _this83.websocket.close()), HE(\"GATEWAY_WSS_ADDRESS\") && _this83.name.startsWith(\"gateway\") && (e = HE(\"GATEWAY_WSS_ADDRESS\")), NE.debug(\"[\".concat(_this83.name, \"] start connect, url: \").concat(e));\n                  var c = null === (n = _this83.store) || void 0 === n ? void 0 : n.recordJoinChannelService({\n                    startTs: Date.now(),\n                    status: \"pending\",\n                    service: \"gateway\"\n                  });\n                  _this83.chooseBestWebsocketConnection(e, !!t, c).then(function (e) {\n                    var t;\n                    _this83.websocket = e, o && o(e.url), e.onclose = s, e.onmessage = a, null === (t = _this83.store) || void 0 === t || t.recordJoinChannelService({\n                      endTs: Date.now(),\n                      status: \"success\"\n                    }, c), _this83.joinChannelServiceRecordIndex = c;\n                  }).catch(function (e) {\n                    var t;\n                    if (null === (t = _this83.store) || void 0 === t || t.recordJoinChannelService({\n                      endTs: Date.now(),\n                      status: e instanceof vE && e.code === TE.WS_ABORT ? \"aborted\" : \"error\",\n                      errors: [e]\n                    }, c), \"closed\" !== _this83.state) {\n                      if (e instanceof vE && e.code === TE.WS_ERR) {\n                        var _t59 = new vE(TE.WS_ERR, \"init websocket failed! Error: \".concat(e.toString()));\n                        return NE.error(\"[\".concat(_this83.name, \"]\").concat(_t59)), void r(_t59);\n                      }\n                      s && s(e);\n                    } else r(new vE(TE.WS_DISCONNECT, \"websocket is closed: \".concat(e.toString())));\n                  });\n                })));\n              case 1:\n              case \"end\":\n                return _context47.stop();\n            }\n          }, _callee47, this);\n        }));\n        function createWebSocketConnection(_x57, _x58) {\n          return _createWebSocketConnection.apply(this, arguments);\n        }\n        return createWebSocketConnection;\n      }()\n    }, {\n      key: \"reconnectWithAction\",\n      value: function () {\n        var _reconnectWithAction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee49(e) {\n          var _this84 = this;\n          var t,\n            i,\n            _t60,\n            r,\n            _t61,\n            _t62,\n            _t63,\n            n,\n            _args49 = arguments;\n          return _regeneratorRuntime().wrap(function _callee49$(_context49) {\n            while (1) switch (_context49.prev = _context49.next) {\n              case 0:\n                t = !(_args49.length > 1 && void 0 !== _args49[1]) || _args49[1];\n                if (!(this.reconnectCount >= this.retryConfig.maxRetryCount)) {\n                  _context49.next = 3;\n                  break;\n                }\n                return _context49.abrupt(\"return\", !1);\n              case 3:\n                if (this.urls) {\n                  _context49.next = 5;\n                  break;\n                }\n                return _context49.abrupt(\"return\", !1);\n              case 5:\n                if (!(\"closed\" === this.state)) {\n                  _context49.next = 7;\n                  break;\n                }\n                return _context49.abrupt(\"return\", !1);\n              case 7:\n                this.onlineReconnectListener || pT.networkState !== bg.OFFLINE || (this.onlineReconnectListener = pT.onlineWaiter && pT.onlineWaiter.then(function () {\n                  _this84.onlineReconnectListener = void 0;\n                }));\n                i = !0;\n                if (!(this.reconnectInterrupter = function () {\n                  i = !1;\n                }, t)) {\n                  _context49.next = 14;\n                  break;\n                }\n                _t60 = IE(this.reconnectCount, this.retryConfig);\n                NE.debug(\"[\".concat(this.name, \"] wait \").concat(_t60, \"ms to reconnect websocket, mode: \").concat(e));\n                _context49.next = 14;\n                return Cl.race([LR(_t60), this.onlineReconnectListener || new Cl(function () {})]);\n              case 14:\n                if (!(\"closed\" === this.state || !i)) {\n                  _context49.next = 16;\n                  break;\n                }\n                return _context49.abrupt(\"return\", !1);\n              case 16:\n                this.reconnectCount += 1;\n                r = /*#__PURE__*/function () {\n                  var _ref19 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee48(e, t) {\n                    return _regeneratorRuntime().wrap(function _callee48$(_context48) {\n                      while (1) switch (_context48.prev = _context48.next) {\n                        case 0:\n                          _this84.emit(Km.RECONNECT_CREATE_CONNECTION, t);\n                          _context48.next = 3;\n                          return _this84.createWebSocketConnection(e);\n                        case 3:\n                        case \"end\":\n                          return _context48.stop();\n                      }\n                    }, _callee48);\n                  }));\n                  return function r(_x61, _x62) {\n                    return _ref19.apply(this, arguments);\n                  };\n                }();\n                _context49.prev = 18;\n                if (!(\"retry\" === e)) {\n                  _context49.next = 26;\n                  break;\n                }\n                _t61 = this.urls[this.currentURLIndex];\n                this.emit(Km.RECONNECT_WAITTING_FINISH, e);\n                _context49.next = 24;\n                return r(_t61, e);\n              case 24:\n                _context49.next = 49;\n                break;\n              case 26:\n                if (!(\"tryNext\" === e)) {\n                  _context49.next = 38;\n                  break;\n                }\n                if (!(this.currentURLIndex += 1, this.currentURLIndex >= this.urls.length)) {\n                  _context49.next = 31;\n                  break;\n                }\n                _context49.next = 30;\n                return this.reconnectWithAction(\"recover\", !1);\n              case 30:\n                return _context49.abrupt(\"return\", _context49.sent);\n              case 31:\n                NE.debug(\"[\".concat(this.name, \"] websocket url length: \").concat(this.urls.length, \" current index: \").concat(this.currentURLIndex));\n                _t62 = this.urls[this.currentURLIndex];\n                this.emit(Km.RECONNECT_WAITTING_FINISH, e);\n                _context49.next = 36;\n                return r(_t62, e);\n              case 36:\n                _context49.next = 49;\n                break;\n              case 38:\n                if (!(\"recover\" === e)) {\n                  _context49.next = 49;\n                  break;\n                }\n                NE.debug(\"[\".concat(this.name, \"] request new urls\"));\n                this.resetReconnectCount(\"recover mode\");\n                this.emit(Km.RECONNECT_WAITTING_FINISH, e);\n                _context49.next = 44;\n                return FR(this, Km.REQUEST_NEW_URLS);\n              case 44:\n                this.urls = _context49.sent;\n                this.currentURLIndex = 0;\n                _t63 = this.urls[this.currentURLIndex];\n                _context49.next = 49;\n                return r(_t63, e);\n              case 49:\n                return _context49.abrupt(\"return\", !0);\n              case 52:\n                _context49.prev = 52;\n                _context49.t0 = _context49[\"catch\"](18);\n                NE.error(\"[\".concat(this.name, \"] reconnect failed\"), _context49.t0.toString());\n                if (!(null != _context49.t0 && null !== (n = _context49.t0.data) && void 0 !== n && n.desc && Array.isArray(_context49.t0.data.desc) && _context49.t0.data.desc.length && _context49.t0.data.desc.includes(\"dynamic key expired\"))) {\n                  _context49.next = 59;\n                  break;\n                }\n                _context49.t1 = (this.emit(Km.ON_TOKEN_PRIVILEGE_DID_EXPIRE), !1);\n                _context49.next = 62;\n                break;\n              case 59:\n                _context49.next = 61;\n                return this.reconnectWithAction(e, t);\n              case 61:\n                _context49.t1 = _context49.sent;\n              case 62:\n                return _context49.abrupt(\"return\", _context49.t1);\n              case 63:\n              case \"end\":\n                return _context49.stop();\n            }\n          }, _callee49, this, [[18, 52]]);\n        }));\n        function reconnectWithAction(_x60) {\n          return _reconnectWithAction.apply(this, arguments);\n        }\n        return reconnectWithAction;\n      }()\n    }, {\n      key: \"chooseBestWebsocketConnection\",\n      value: function () {\n        var _chooseBestWebsocketConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee50(e, t, i) {\n          var _this85 = this;\n          return _regeneratorRuntime().wrap(function _callee50$(_context50) {\n            while (1) switch (_context50.prev = _context50.next) {\n              case 0:\n                return _context50.abrupt(\"return\", new Cl(function (r, n) {\n                  var o = !1;\n                  var s = [];\n                  _this85.closeEstablishingWs = function () {\n                    NE.debug(\"[choose-best-ws] close establishing websockets\"), s.forEach(function (e) {\n                      e.onclose = null, e.onopen = null, e.onmessage = null, e.close();\n                    }), n(new vE(TE.WS_ABORT, \"choose best websocket aborted\"));\n                  };\n                  var a = HE(\"GATEWAY_DOMAINS\");\n                  var c;\n                  var d = e.indexOf(\"?h=\"),\n                    u = a.find(function (t) {\n                      return -1 !== d ? e.includes(t, d) : e.includes(t);\n                    });\n                  NE.debug(\"[choose-best-ws] currentDomain: \", u, \", domains: \", a);\n                  var l = !_this85.tryDoubleDomain || t || !u;\n                  if (!l && u) {\n                    var h;\n                    var _t64 = Date.now();\n                    try {\n                      a.forEach(function (t) {\n                        var i = -1 === d ? e.replace(u, t) : e.substr(0, d) + e.substr(d).replace(u, t),\n                          r = new WebSocket(i);\n                        r.binaryType = \"arraybuffer\", s.push(r), NE.debug(\"[choose-best-ws] ws is connecting:\", r.url);\n                      });\n                    } catch (e) {\n                      for (NE.debug(\"[choose-best-ws] ws create failed, fallback to single url\"), s.forEach(function (e) {\n                        return e.close();\n                      }); s.length;) s.pop();\n                      l = !0;\n                    }\n                    null === (h = _this85.store) || void 0 === h || h.recordJoinChannelService({\n                      urls: s.map(function (e) {\n                        return e.url;\n                      }),\n                      service: \"gateway\"\n                    }, i), s.forEach(function (e) {\n                      e.onopen = function () {\n                        if (o) return;\n                        var i = Date.now() - _t64;\n                        NE.debug(\"[choose-best-ws] ws open cost \".concat(i, \"ms\")), s.filter(function (t) {\n                          return t !== e;\n                        }).forEach(function (e) {\n                          NE.debug(\"[choose-best-ws]close backup websocket: \".concat(e.url)), e.close();\n                        }), o = !0, r(e);\n                      }, e.onclose = function (e) {\n                        if (c = e, o) return;\n                        s.find(function (e) {\n                          return !(e.readyState === WebSocket.CLOSED || e.readyState === WebSocket.CLOSING);\n                        }) || (NE.debug(\"[choose-best-ws] all websocket is closed\"), o = !0, n(c));\n                      }, e.onmessage = function (t) {\n                        NE.debug(\"[choose-best-ws]\".concat(e.url, \" onmessage: \").concat(t.data));\n                      };\n                    }), LR(_this85.forceCloseTimeout).then(function () {\n                      s.forEach(function (e) {\n                        e.readyState !== WebSocket.OPEN && e.close();\n                      });\n                    });\n                  }\n                  if (l) {\n                    var p;\n                    var _t65;\n                    NE.debug(\"[choose-best-ws] use single url: \", e), null === (p = _this85.store) || void 0 === p || p.recordJoinChannelService({\n                      urls: [e],\n                      service: \"gateway\"\n                    }, i);\n                    try {\n                      _t65 = new WebSocket(e), s.push(_t65), _t65.binaryType = \"arraybuffer\";\n                    } catch (e) {\n                      var _t66 = new vE(TE.WS_ERR, \"init websocket failed! Error: \".concat(e.toString()));\n                      return NE.error(\"[\".concat(_this85.name, \"]\").concat(_t66)), void n(_t66);\n                    }\n                    _t65.onopen = function () {\n                      r(_t65);\n                    }, _t65.onclose = function (e) {\n                      n(e);\n                    }, _t65.onmessage = function (e) {\n                      NE.debug(\"[choose-best-ws]\".concat(_t65.url, \" onmessage: \").concat(e.data));\n                    }, LR(_this85.forceCloseTimeout).then(function () {\n                      _t65 && _t65.readyState !== WebSocket.OPEN && _t65.close();\n                    });\n                  }\n                }).then(function (e) {\n                  return _this85.closeEstablishingWs = void 0, e;\n                }).catch(function (e) {\n                  throw _this85.closeEstablishingWs = void 0, e;\n                }));\n              case 1:\n              case \"end\":\n                return _context50.stop();\n            }\n          }, _callee50);\n        }));\n        function chooseBestWebsocketConnection(_x63, _x64, _x65) {\n          return _chooseBestWebsocketConnection.apply(this, arguments);\n        }\n        return chooseBestWebsocketConnection;\n      }()\n    }]);\n    return $A;\n  }(gE);\n  var eO = /*#__PURE__*/function () {\n    function eO(e) {\n      _classCallCheck(this, eO);\n      mp(this, \"input\", []), mp(this, \"size\", void 0), this.size = e;\n    }\n    _createClass(eO, [{\n      key: \"add\",\n      value: function add(e) {\n        this.input.push(e), this.input.length > this.size && this.input.splice(0, 1);\n      }\n    }, {\n      key: \"mean\",\n      value: function mean() {\n        var e;\n        return 0 === this.input.length ? 0 : zi(e = this.input).call(e, function (e, t) {\n          return e + t;\n        }) / this.input.length;\n      }\n    }]);\n    return eO;\n  }();\n  var tO = /*#__PURE__*/function (_gE18) {\n    _inherits(tO, _gE18);\n    _createClass(tO, [{\n      key: \"connectionState\",\n      get: function get() {\n        return this._connectionState;\n      },\n      set: function set(e) {\n        e !== this._connectionState && (this._connectionState = e, e === bm.CONNECTED ? this.emit(wm.WS_CONNECTED) : e === bm.RECONNECTING ? this.emit(wm.WS_RECONNECTING, this._websocketReconnectReason) : e === bm.CLOSED && this.emit(wm.WS_CLOSED, this._disconnectedReason));\n      }\n    }, {\n      key: \"currentURLIndex\",\n      get: function get() {\n        return this.websocket.currentURLIndex;\n      }\n    }, {\n      key: \"url\",\n      get: function get() {\n        return this.websocket ? this.websocket.url : null;\n      }\n    }, {\n      key: \"rtt\",\n      get: function get() {\n        return this.rttRolling.mean();\n      }\n    }]);\n    function tO(e, t) {\n      var _this86;\n      _classCallCheck(this, tO);\n      _this86 = _possibleConstructorReturn(this, _getPrototypeOf(tO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"_disconnectedReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"_websocketReconnectReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"_connectionState\", bm.CLOSED), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"reconnectToken\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"websocket\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"openConnectionTime\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"clientId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"lastMsgTime\", Date.now()), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"uploadCache\", []), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"uploadCacheInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"rttRolling\", new eO(5)), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"pingpongTimer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"wsInflateDataTimer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"pingpongTimeoutCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"joinResponse\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"multiIpOption\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"initError\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"spec\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this86)), \"onWebsocketMessage\", function (e) {\n        if (e.data instanceof ArrayBuffer) return void _this86.emit(wm.ON_BINARY_DATA, e.data);\n        var t = JSON.parse(e.data);\n        if (_this86.lastMsgTime = Date.now(), Object.prototype.hasOwnProperty.call(t, \"_id\")) {\n          var _e47 = \"res-@\".concat(t._id);\n          _this86.emit(_e47, t._result, t._message);\n        } else if (Object.prototype.hasOwnProperty.call(t, \"_type\")) {\n          if (_this86.emit(t._type, t._message), t._type === Pm.ON_NOTIFICATION && _this86.handleNotification(t._message), t._type === Pm.ON_USER_BANNED) switch (t._message.error_code) {\n            case 14:\n              _this86.close(Cm.UID_BANNED);\n              break;\n            case 15:\n              _this86.close(Cm.IP_BANNED);\n              break;\n            case 16:\n              _this86.close(Cm.CHANNEL_BANNED);\n          }\n          if (t._type === Pm.ON_USER_LICENSE_BANNED) switch (t._message.error_code) {\n            case Im.ERR_LICENSE_MISSING:\n              _this86.close(Cm.LICENSE_MISSING);\n              break;\n            case Im.ERR_LICENSE_EXPIRED:\n              _this86.close(Cm.LICENSE_EXPIRED);\n              break;\n            case Im.ERR_LICENSE_MINUTES_EXCEEDED:\n              _this86.close(Cm.LICENSE_MINUTES_EXCEEDED);\n              break;\n            case Im.ERR_LICENSE_PERIOD_INVALID:\n              _this86.close(Cm.LICENSE_PERIOD_INVALID);\n              break;\n            case Im.ERR_LICENSE_MULTIPLE_SDK_SERVICE:\n              _this86.close(Cm.LICENSE_MULTIPLE_SDK_SERVICE);\n              break;\n            case Im.ERR_LICENSE_ILLEGAL:\n              _this86.close(Cm.LICENSE_ILLEGAL);\n              break;\n            default:\n              _this86.close();\n          }\n        }\n      }), _this86.clientId = e.clientId, _this86.spec = e, _this86.store = t, _this86.websocket = new $A(\"gateway-\".concat(_this86.clientId), _this86.spec.retryConfig, !0, !0, t), _this86.handleWebsocketEvents(), window.addEventListener(\"offline\", function () {\n        _this86.connectionState === bm.CONNECTED && _this86.reconnect(\"retry\", Om.OFFLINE);\n      });\n      return _this86;\n    }\n    _createClass(tO, [{\n      key: \"request\",\n      value: function () {\n        var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee51(e, t, i, r) {\n          var _this87 = this;\n          var n, o, s, a, c, d, u, l, h;\n          return _regeneratorRuntime().wrap(function _callee51$(_context51) {\n            while (1) switch (_context51.prev = _context51.next) {\n              case 0:\n                n = MR(6, \"\"), o = {\n                  _id: n,\n                  _type: e,\n                  _message: t\n                }, s = this.websocket.connectionID, a = function a() {\n                  return new Cl(function (t, i) {\n                    if (_this87.connectionState === bm.CONNECTED) return t();\n                    var r = function r() {\n                        _this87.off(wm.WS_CLOSED, n), t();\n                      },\n                      n = function n() {\n                        _this87.off(wm.WS_CONNECTED, r), i(new vE(TE.WS_ABORT));\n                      };\n                    _this87.once(wm.WS_CONNECTED, r), _this87.once(wm.WS_CLOSED, n), e !== Nm.PUBLISH && e !== Nm.SUBSCRIBE && e !== Nm.UNSUBSCRIBE && e !== Nm.UNPUBLISH && e !== Nm.CONTROL && e !== Nm.RESTART_ICE || _this87.once(wm.DISCONNECT_P2P, function () {\n                      i(new vE(TE.DISCONNECT_P2P));\n                    }), e !== Nm.PUBLISH && e !== Nm.RESTART_ICE || _this87.once(wm.ABORT_P2P_EXECUTION, function () {\n                      i(new vE(TE.DISCONNECT_P2P));\n                    });\n                  });\n                };\n                _context51.t0 = this.connectionState !== bm.CONNECTING && this.connectionState !== bm.RECONNECTING || e === Nm.JOIN || e === Nm.REJOIN;\n                if (_context51.t0) {\n                  _context51.next = 5;\n                  break;\n                }\n                _context51.next = 5;\n                return a();\n              case 5:\n                this.websocket.sendMessage(o, !0);\n                if (!r) {\n                  _context51.next = 8;\n                  break;\n                }\n                return _context51.abrupt(\"return\");\n              case 8:\n                c = new Cl(function (i, r) {\n                  var o = !1;\n                  var a = function a(r, n) {\n                    o = !0, i({\n                      isSuccess: \"success\" === r,\n                      message: n || {}\n                    }), _this87.off(wm.WS_CLOSED, c), _this87.off(wm.WS_RECONNECTING, c), _this87.emit(wm.REQUEST_SUCCESS, e, t);\n                  };\n                  _this87.once(\"res-@\".concat(n), a);\n                  var c = function c() {\n                    r(new vE(TE.WS_ABORT, \"type: \".concat(e))), _this87.off(wm.WS_CLOSED, c), _this87.off(wm.WS_RECONNECTING, c), _this87.off(\"res-@\".concat(n), a);\n                  };\n                  _this87.once(wm.WS_CLOSED, c), _this87.once(wm.WS_RECONNECTING, c), LR(HE(\"SIGNAL_REQUEST_TIMEOUT\")).then(function () {\n                    _this87.websocket.connectionID !== s || o || (NE.warning(\"ws request timeout, type: \".concat(e)), _this87.emit(wm.REQUEST_TIMEOUT, e, t));\n                  });\n                });\n                d = null;\n                _context51.prev = 10;\n                _context51.next = 13;\n                return c;\n              case 13:\n                d = _context51.sent;\n                _context51.next = 35;\n                break;\n              case 16:\n                _context51.prev = 16;\n                _context51.t1 = _context51[\"catch\"](10);\n                if (!(this.connectionState === bm.CLOSED || e === Nm.LEAVE)) {\n                  _context51.next = 20;\n                  break;\n                }\n                throw new vE(TE.WS_ABORT);\n              case 20:\n                if (!(!this.spec.forceWaitGatewayResponse || i)) {\n                  _context51.next = 24;\n                  break;\n                }\n                _context51.t2 = _context51.t1.throw();\n                _context51.next = 34;\n                break;\n              case 24:\n                if (!(e === Nm.JOIN || e === Nm.REJOIN)) {\n                  _context51.next = 28;\n                  break;\n                }\n                _context51.t3 = null;\n                _context51.next = 33;\n                break;\n              case 28:\n                _context51.next = 30;\n                return a();\n              case 30:\n                _context51.next = 32;\n                return this.request(e, t);\n              case 32:\n                _context51.t3 = _context51.sent;\n              case 33:\n                _context51.t2 = _context51.t3;\n              case 34:\n                return _context51.abrupt(\"return\", _context51.t2);\n              case 35:\n                if (!d.isSuccess) {\n                  _context51.next = 37;\n                  break;\n                }\n                return _context51.abrupt(\"return\", d.message);\n              case 37:\n                u = Number(d.message.error_code || d.message.code), l = zA(u), h = new vE(TE.UNEXPECTED_RESPONSE, \"\".concat(l.desc, \": \").concat(d.message.error_str), {\n                  code: u,\n                  data: d.message\n                });\n                if (!(\"success\" === l.action)) {\n                  _context51.next = 42;\n                  break;\n                }\n                _context51.t4 = d.message;\n                _context51.next = 67;\n                break;\n              case 42:\n                NE.warning(\"[\".concat(this.websocket.connectionID, \"] unexpected response from type \").concat(e, \", error_code: \").concat(u, \", message: \").concat(l.desc, \", action: \").concat(l.action));\n                if (!(u === Im.ERR_TOO_MANY_BROADCASTERS)) {\n                  _context51.next = 47;\n                  break;\n                }\n                _context51.t5 = e === Nm.JOIN || e === Nm.REJOIN ? (this.initError = h, this.close(), h.throw()) : h.throw();\n                _context51.next = 66;\n                break;\n              case 47:\n                if (!(\"failed\" === l.action)) {\n                  _context51.next = 51;\n                  break;\n                }\n                _context51.t6 = h.throw();\n                _context51.next = 65;\n                break;\n              case 51:\n                if (!(\"quit\" === l.action)) {\n                  _context51.next = 55;\n                  break;\n                }\n                _context51.t7 = (this.initError = h, this.close(), h.throw());\n                _context51.next = 64;\n                break;\n              case 55:\n                u === Im.ERR_JOIN_BY_MULTI_IP ? (this.multiIpOption = d.message.option, NE.warning(\"[\".concat(this.clientId, \"] detect multi ip, recover\")), this.reconnect(\"recover\", Om.MULTI_IP)) : this.reconnect(l.action, Om.SERVER_ERROR);\n                if (!(e === Nm.JOIN || e === Nm.REJOIN)) {\n                  _context51.next = 60;\n                  break;\n                }\n                _context51.t8 = null;\n                _context51.next = 63;\n                break;\n              case 60:\n                _context51.next = 62;\n                return this.request(e, t);\n              case 62:\n                _context51.t8 = _context51.sent;\n              case 63:\n                _context51.t7 = _context51.t8;\n              case 64:\n                _context51.t6 = _context51.t7;\n              case 65:\n                _context51.t5 = _context51.t6;\n              case 66:\n                _context51.t4 = _context51.t5;\n              case 67:\n                return _context51.abrupt(\"return\", _context51.t4);\n              case 68:\n              case \"end\":\n                return _context51.stop();\n            }\n          }, _callee51, this, [[10, 16]]);\n        }));\n        function request(_x66, _x67, _x68, _x69) {\n          return _request.apply(this, arguments);\n        }\n        return request;\n      }()\n    }, {\n      key: \"waitMessage\",\n      value: function waitMessage(e, t) {\n        var _this88 = this;\n        return new Cl(function (i) {\n          var r = function r(n) {\n            (!t || t(n)) && (_this88.off(e, r), i(n));\n          };\n          _this88.on(e, r);\n        });\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(e, t) {\n        var _this89 = this;\n        var i = {\n          _type: e,\n          _message: t\n        };\n        try {\n          this.websocket.sendMessage(i);\n        } catch (e) {\n          var _t67 = HE(\"MAX_UPLOAD_CACHE\") || 50;\n          this.uploadCache.push(i), this.uploadCache.length > _t67 && this.uploadCache.splice(0, 1), this.uploadCache.length > 0 && !this.uploadCacheInterval && (this.uploadCacheInterval = window.setInterval(function () {\n            if (_this89.connectionState !== bm.CONNECTED) return;\n            var e = _this89.uploadCache.splice(0, 1)[0];\n            0 === _this89.uploadCache.length && (window.clearInterval(_this89.uploadCacheInterval), _this89.uploadCacheInterval = void 0), _this89.upload(e._type, e._message);\n          }, HE(\"UPLOAD_CACHE_INTERVAL\") || 2e3));\n        }\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = {\n          _type: e,\n          _message: t\n        };\n        this.websocket.sendMessage(i);\n      }\n    }, {\n      key: \"init\",\n      value: function init(e, t) {\n        var _this90 = this;\n        return this.initError = void 0, this.multiIpOption = void 0, this.joinResponse = void 0, this.reconnectToken = void 0, this.openConnectionTime = void 0, new Cl(function (i, r) {\n          _this90.once(wm.WS_CONNECTED, function () {\n            return i(_this90.joinResponse);\n          }), _this90.once(wm.WS_CLOSED, function () {\n            return r(_this90.initError || new vE(TE.WS_ABORT));\n          }), _this90.connectionState = bm.CONNECTING, _this90.websocket.init(e).catch(r), _this90.wsInflateDataTimer && window.clearInterval(_this90.wsInflateDataTimer), _this90.wsInflateDataTimer = window.setInterval(function () {\n            _this90.handleWsInflateData();\n          }, 2e4), setTimeout(function () {\n            t && void 0 === _this90.openConnectionTime && (NE.debug(\"[\".concat(_this90.clientId, \"] init websocket timeout while join with fallback to proxy\")), r(new vE(TE.INIT_WEBSOCKET_TIMEOUT)));\n          }, HE(\"JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION\"));\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close(e) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.wsInflateDataTimer && (this.handleWsInflateData(), window.clearInterval(this.wsInflateDataTimer), this.wsInflateDataTimer = void 0), this.reconnectToken = void 0, this.joinResponse = void 0, this._disconnectedReason = e || Cm.LEAVE, this.connectionState = bm.CLOSED, NE.debug(\"[\".concat(this.clientId, \"] \") + \"will close websocket in signal\"), this.websocket.close(), e === Cm.FALLBACK && (this.websocket.removeAllListeners(), this.websocket = new $A(\"gateway-\".concat(this.clientId), this.spec.retryConfig, !0, !0, this.store), this.handleWebsocketEvents());\n      }\n    }, {\n      key: \"join\",\n      value: function () {\n        var _join = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee52() {\n          var _e48, t;\n          return _regeneratorRuntime().wrap(function _callee52$(_context52) {\n            while (1) switch (_context52.prev = _context52.next) {\n              case 0:\n                if (this.joinResponse) {\n                  _context52.next = 11;\n                  break;\n                }\n                this.emit(wm.ABORT_P2P_EXECUTION);\n                _context52.next = 4;\n                return FR(this, wm.REQUEST_JOIN_INFO);\n              case 4:\n                _e48 = _context52.sent;\n                _context52.next = 7;\n                return this.request(Nm.JOIN, _e48);\n              case 7:\n                t = _context52.sent;\n                if (t) {\n                  _context52.next = 10;\n                  break;\n                }\n                return _context52.abrupt(\"return\", (this.emit(wm.REPORT_JOIN_GATEWAY, TE.TIMEOUT, this.url || \"\"), !1));\n              case 10:\n                this.joinResponse = t, this.emit(wm.JOIN_RESPONSE, this.joinResponse), this.reconnectToken = this.joinResponse.rejoin_token;\n              case 11:\n                return _context52.abrupt(\"return\", (this.connectionState = bm.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(this.handlePingPong.bind(this), 3e3), !0));\n              case 12:\n              case \"end\":\n                return _context52.stop();\n            }\n          }, _callee52, this);\n        }));\n        function join() {\n          return _join.apply(this, arguments);\n        }\n        return join;\n      }()\n    }, {\n      key: \"rejoin\",\n      value: function () {\n        var _rejoin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee53() {\n          var _this91 = this;\n          var e, t;\n          return _regeneratorRuntime().wrap(function _callee53$(_context53) {\n            while (1) switch (_context53.prev = _context53.next) {\n              case 0:\n                if (this.reconnectToken) {\n                  _context53.next = 2;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"can not rejoin, no rejoin token\");\n              case 2:\n                e = WR(this, wm.REQUEST_REJOIN_INFO);\n                e.token = this.reconnectToken;\n                _context53.next = 6;\n                return this.request(Nm.REJOIN, e);\n              case 6:\n                t = _context53.sent;\n                return _context53.abrupt(\"return\", !!t && (this.connectionState = bm.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(this.handlePingPong.bind(this), 3e3), t.peers && t.peers.forEach(function (e) {\n                  _this91.emit(Pm.ON_USER_ONLINE, {\n                    uid: e.uid\n                  }), e.audio && _this91.emit(Pm.ON_ADD_AUDIO_STREAM, {\n                    uid: e.uid,\n                    uint_id: e.uint_id,\n                    audio: !0,\n                    ssrcId: e.audio_ssrc\n                  }), e.video && _this91.emit(Pm.ON_ADD_VIDEO_STREAM, {\n                    uid: e.uid,\n                    uint_id: e.uint_id,\n                    video: !0,\n                    ssrcId: e.video_ssrc\n                  }), e.audio_mute ? _this91.emit(Pm.MUTE_AUDIO, {\n                    uid: e.uid\n                  }) : _this91.emit(Pm.UNMUTE_AUDIO, {\n                    uid: e.uid\n                  }), e.video_mute ? _this91.emit(Pm.MUTE_VIDEO, {\n                    uid: e.uid\n                  }) : _this91.emit(Pm.UNMUTE_VIDEO, {\n                    uid: e.uid\n                  }), e.audio_enable_local ? _this91.emit(Pm.ENABLE_LOCAL_AUDIO, {\n                    uid: e.uid\n                  }) : _this91.emit(Pm.DISABLE_LOCAL_AUDIO, {\n                    uid: e.uid\n                  }), e.video_enable_local ? _this91.emit(Pm.ENABLE_LOCAL_VIDEO, {\n                    uid: e.uid\n                  }) : _this91.emit(Pm.DISABLE_LOCAL_VIDEO, {\n                    uid: e.uid\n                  }), e.audio || e.video || _this91.emit(Pm.ON_REMOVE_STREAM, {\n                    uid: e.uid,\n                    uint_id: e.uint_id\n                  });\n                }), !0));\n              case 8:\n              case \"end\":\n                return _context53.stop();\n            }\n          }, _callee53, this);\n        }));\n        function rejoin() {\n          return _rejoin.apply(this, arguments);\n        }\n        return rejoin;\n      }()\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.websocket.reconnect(e, t);\n      }\n    }, {\n      key: \"handleNotification\",\n      value: function handleNotification(e) {\n        NE.debug(\"[\".concat(this.clientId, \"] receive notification: \"), e);\n        var t = zA(e.code);\n        if (\"success\" !== t.action) {\n          if (\"failed\" !== t.action) return \"quit\" === t.action ? (\"ERR_REPEAT_JOIN_CHANNEL\" === t.desc && this.close(Cm.UID_BANNED), void this.close()) : void this.reconnect(t.action, Om.SERVER_ERROR);\n          NE.error(\"[\".concat(this.clientId, \"] ignore error: \"), t.desc);\n        }\n      }\n    }, {\n      key: \"handlePingPong\",\n      value: function handlePingPong() {\n        var _this92 = this;\n        if (!this.websocket || \"connected\" !== this.websocket.state) return;\n        this.pingpongTimeoutCount > 0 && this.rttRolling.add(3e3), this.pingpongTimeoutCount += 1;\n        var e = HE(\"PING_PONG_TIME_OUT\"),\n          t = Date.now();\n        this.pingpongTimeoutCount >= e && (NE.warning(\"PINGPONG Timeout. Last Socket Message: \".concat(t - this.lastMsgTime, \"ms\")), t - this.lastMsgTime > HE(\"WEBSOCKET_TIMEOUT_MIN\")) ? this.reconnect(\"retry\", Om.TIMEOUT) : this.request(Nm.PING, void 0, !0).then(function () {\n          _this92.pingpongTimeoutCount = 0;\n          var e = Date.now() - t;\n          _this92.rttRolling.add(e), HE(\"REPORT_STATS\") && _this92.send(Nm.PING_BACK, {\n            pingpongElapse: e\n          });\n        }).catch(function (e) {});\n      }\n    }, {\n      key: \"handleWsInflateData\",\n      value: function handleWsInflateData() {\n        var _this$websocket$getWs = this.websocket.getWsInflateData(),\n          e = _this$websocket$getWs.wsInflateLength,\n          t = _this$websocket$getWs.wsDeflateLength;\n        0 !== e && 0 !== t && this.upload(Dm.WS_INFLATE_DATA_LENGTH, {\n          ws_deflate_length: t,\n          ws_inflate_length: e\n        });\n      }\n    }, {\n      key: \"handleWebsocketEvents\",\n      value: function handleWebsocketEvents() {\n        var _this93 = this;\n        this.websocket.on(Km.RECONNECT_WAITTING_FINISH, function (e) {\n          _this93.emit(wm.WS_RECONNECT_WAITTING_FINISH, e);\n        }), this.websocket.on(Km.RECONNECT_CREATE_CONNECTION, function (e) {\n          _this93.emit(wm.WS_RECONNECT_CREATE_CONNECTION, e);\n        }), this.websocket.on(Km.ON_MESSAGE, this.onWebsocketMessage), this.websocket.on(Km.CLOSED, function () {\n          _this93.connectionState = bm.CLOSED;\n        }), this.websocket.on(Km.FAILED, function () {\n          _this93._disconnectedReason = Cm.NETWORK_ERROR, _this93.connectionState = bm.CLOSED;\n        }), this.websocket.on(Km.RECONNECTING, function (e) {\n          _this93._websocketReconnectReason = e, _this93.joinResponse = void 0, _this93.connectionState === bm.CONNECTED ? _this93.connectionState = bm.RECONNECTING : _this93.connectionState = bm.CONNECTING;\n        }), this.websocket.on(Km.WILL_RECONNECT, function (e, t) {\n          if (WR(_this93, wm.IS_P2P_DISCONNECTED) && \"retry\" === e) return NE.debug(\"\".concat(_this93.clientId, \" reconnect mode is retry, but p2p lost, change to tryNext\")), _this93.reconnectToken = void 0, _this93.emit(wm.NEED_RENEW_SESSION), _this93.emit(wm.DISCONNECT_P2P), t(\"tryNext\");\n          \"retry\" !== e && (NE.debug(\"\".concat(_this93.clientId, \" websockt will_connect event, renewSession reconnectMode is \").concat(e)), _this93.reconnectToken = void 0, _this93.emit(wm.NEED_RENEW_SESSION), _this93.emit(wm.DISCONNECT_P2P)), t(e);\n        }), this.websocket.on(Km.CONNECTED, function () {\n          _this93.openConnectionTime = Date.now(), _this93.reconnectToken ? _this93.rejoin().catch(function (e) {\n            NE.warning(\"[\".concat(_this93.clientId, \"] rejoin failed \").concat(e)), _this93.reconnect(\"tryNext\", Om.SERVER_ERROR);\n          }) : _this93.join().catch(function (e) {\n            if (_this93.emit(wm.REPORT_JOIN_GATEWAY, e.message || e.code, _this93.url || \"\"), e instanceof vE && e.code === TE.UNEXPECTED_RESPONSE && e.data.code === Im.ERR_NO_AUTHORIZED) return NE.warning(\"[\".concat(_this93.clientId, \"] reconnect no authorized, recover\")), void _this93.reconnect(\"recover\", Om.SERVER_ERROR);\n            NE.error(\"[\".concat(_this93.clientId, \"] join gateway request failed\"), e.toString()), _this93.spec.forceWaitGatewayResponse ? _this93.reconnect(\"tryNext\", Om.SERVER_ERROR) : (_this93.initError = e, _this93.close());\n          });\n        }), this.websocket.on(Km.REQUEST_NEW_URLS, function (e, t) {\n          FR(_this93, wm.REQUEST_RECOVER, _this93.multiIpOption).then(e).catch(t);\n        }), this.websocket.on(Km.ON_TOKEN_PRIVILEGE_DID_EXPIRE, function () {\n          _this93.emit(Pm.ON_TOKEN_PRIVILEGE_DID_EXPIRE);\n        });\n      }\n    }]);\n    return tO;\n  }(gE);\n  function iO(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  var rO = /*#__PURE__*/function (_gE19) {\n    _inherits(rO, _gE19);\n    _createClass(rO, [{\n      key: \"url\",\n      get: function get() {\n        return this._url ? this._url : null;\n      }\n    }, {\n      key: \"reconnectMode\",\n      get: function get() {\n        return this._reconnectMode;\n      },\n      set: function set(e) {\n        [\"tryNext\", \"recover\"].includes(e) && this.resetReconnectCount(e), this._reconnectMode = e;\n      }\n    }, {\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        e !== this._state && (this._state = e, \"reconnecting\" === this._state ? this.emit(Ug.RECONNECTING, this.reconnectReason) : \"connected\" === this._state ? this.emit(Ug.CONNECTED) : \"closed\" === this._state ? this.emit(Ug.CLOSED) : \"failed\" === this._state && this.emit(Ug.FAILED));\n      }\n    }]);\n    function rO(e, t, i, r) {\n      var _this94;\n      _classCallCheck(this, rO);\n      _this94 = _possibleConstructorReturn(this, _getPrototypeOf(rO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"connectionID\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"currentURLIndex\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"reconnectReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_reconnectMode\", \"tryNext\"), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_initMutex\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_name\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_state\", \"closed\"), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_reconnectInterrupter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_url\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_retryConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_reconnectCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_forceCloseTimeout\", 5e3), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_onlineReconnectListener\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_messageSender\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_closeEstablishingTransmitter\", function () {}), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_joinChannelServiceRecordIndex\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_transmitter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_useCompress\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_inflateLength\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this94)), \"_deflateLength\", 0), _this94._store = r, _this94._name = e, _this94._retryConfig = function (e) {\n        for (var t = 1; t < arguments.length; t++) {\n          var i = null != arguments[t] ? arguments[t] : {};\n          t % 2 ? iO(Object(i), !0).forEach(function (t) {\n            mp(e, t, i[t]);\n          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : iO(Object(i)).forEach(function (t) {\n            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n          });\n        }\n        return e;\n      }({}, t), _this94._useCompress = i;\n      return _this94;\n    }\n    _createClass(rO, [{\n      key: \"resetReconnectCount\",\n      value: function resetReconnectCount(e) {\n        NE.debug(\"\".concat(this._name, \" reset reconnect count, reason: \").concat(e)), this._reconnectCount = 0;\n      }\n    }, {\n      key: \"close\",\n      value: function close(e, t) {\n        var i;\n        if (this.currentURLIndex = 0, this.resetReconnectCount(\"close\"), null === (i = this._messageSender) || void 0 === i || i.reset(), this._reconnectInterrupter && this._reconnectInterrupter(), this._transmitter) {\n          this._transmitter.onclose = null, this._transmitter.onopen = null, this._transmitter.onmessage = null;\n          var _e49 = this._transmitter;\n          t ? setTimeout(function () {\n            return _e49.close();\n          }, 500) : _e49.close(), this._transmitter = void 0;\n        }\n        this.state = e ? \"failed\" : \"closed\", this._closeEstablishingTransmitter && this._closeEstablishingTransmitter();\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        if (!this._transmitter) return void NE.warning(\"[\".concat(this._name, \"] can not reconnect, no websocket\"));\n        var i;\n        (void 0 !== e && (this.reconnectMode = e), NE.debug(\"[\".concat(this._name, \"] reconnect is triggered initiative\")), \"number\" == typeof this._joinChannelServiceRecordIndex) && (null === (i = this._store) || void 0 === i || i.recordJoinChannelService({\n          status: \"error\",\n          errors: [new Error(t)]\n        }, this._joinChannelServiceRecordIndex));\n        var r = this._transmitter.onclose;\n        this._transmitter.onclose = null, this._transmitter.close(), r && r.bind(this._transmitter)({\n          code: 9999,\n          reason: t\n        });\n      }\n    }, {\n      key: \"getInflateData\",\n      value: function getInflateData() {\n        var e = this._inflateLength,\n          t = this._deflateLength;\n        return this.clearInflateData(), {\n          inflateLength: e,\n          deflateLength: t\n        };\n      }\n    }, {\n      key: \"setInflateData\",\n      value: function setInflateData(e) {\n        this._deflateLength = this._deflateLength + e.originLength, this._inflateLength = this._inflateLength + e.compressedLength;\n      }\n    }, {\n      key: \"clearInflateData\",\n      value: function clearInflateData() {\n        this._inflateLength = 0, this._deflateLength = 0;\n      }\n    }]);\n    return rO;\n  }(gE);\n  function nO(e, t, i) {\n    if (\"getBigUint64\" in DataView.prototype) return e.getBigUint64(t, i);\n    var r = e.getUint32(t, i),\n      n = e.getUint32(t + 4, i),\n      o = Number(!!i),\n      s = Number(!i);\n    return BigInt(r * s + n * o) << BigInt(32) | BigInt(r * o + n * s);\n  }\n  function oO(e, t, i, r) {\n    if (\"setBigUint64\" in DataView.prototype) return e.setBigUint64(t, i, r);\n    var n = Number(i >> BigInt(32)),\n      o = Number(i & BigInt(4294967295));\n    r ? (e.setUint32(t + 4, n, r), e.setUint32(t, o, r)) : (e.setUint32(t, n, r), e.setUint32(t + 4, o, r));\n  }\n  var sO;\n  !function (e) {\n    e[e.Default = 0] = \"Default\", e[e.Ack = 1] = \"Ack\";\n  }(sO || (sO = {}));\n  var aO = /*#__PURE__*/function () {\n    function aO(e, t, i) {\n      _classCallCheck(this, aO);\n      mp(this, \"version\", 1), mp(this, \"initialRTO\", void 0), mp(this, \"maxBatchAckCount\", void 0), mp(this, \"maxRTO\", void 0), mp(this, \"initialRTT\", void 0), mp(this, \"ID\", void 0), mp(this, \"rtt\", void 0), mp(this, \"packetNumber\", 1), mp(this, \"rtoRatioMap\", new Map()), mp(this, \"timeoutMap\", new Map()), mp(this, \"unorderedPacketQueue\", []), mp(this, \"batchAckPacketQueue\", []), mp(this, \"lastOrderedPacketNumber\", 0), mp(this, \"batchAckTimer\", void 0), mp(this, \"sendImpl\", void 0), mp(this, \"receiveImpl\", void 0), this.sendImpl = e, this.receiveImpl = t, this.ID = MR(7, \"transmitter-\"), this.initialRTO = void 0 !== (null == i ? void 0 : i.initialRTO) ? i.initialRTO : HE(\"TRANSMITTER_INITIAL_RTO\"), this.initialRTT = void 0 !== (null == i ? void 0 : i.initialRTT) ? i.initialRTT : HE(\"TRANSMITTER_INITIAL_RTT\"), this.rtt = void 0 !== (null == i ? void 0 : i.initialRTT) ? i.initialRTT : HE(\"TRANSMITTER_INITIAL_RTT\"), this.maxBatchAckCount = void 0 !== (null == i ? void 0 : i.maxBatchAckCount) ? i.maxBatchAckCount : HE(\"TRANSMITTER_MAX_BATCH_ACK_COUNT\"), this.maxRTO = void 0 !== (null == i ? void 0 : i.maxRTO) ? i.maxRTO : HE(\"TRANSMITTER_MAX_RTO\");\n    }\n    _createClass(aO, [{\n      key: \"packetize\",\n      value: function packetize(e, t) {\n        return {\n          type: sO.Default,\n          version: this.version,\n          packetNumber: t,\n          payload: e\n        };\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize(e) {\n        switch (e.type) {\n          case sO.Default:\n            {\n              var t;\n              if (\"string\" == typeof e.payload) {\n                t = new TextEncoder().encode(e.payload);\n              } else t = e.payload;\n              var i = new ArrayBuffer(t.length + 15),\n                r = new DataView(i);\n              r.setUint16(0, e.version), r.setUint8(2, e.type), r.setUint32(3, e.packetNumber), oO(r, 7, BigInt(e.sendTs));\n              return new Uint8Array(r.buffer).set(t, 15), i;\n            }\n          case sO.Ack:\n            {\n              var _t68 = new ArrayBuffer(16),\n                _i38 = new DataView(_t68);\n              return _i38.setUint16(0, e.version), _i38.setUint8(2, e.type), _i38.setUint32(3, e.maxAckPacketNumber), _i38.setUint8(7, e.shift), oO(_i38, 8, BigInt(e.ackSendTs)), _t68;\n            }\n        }\n      }\n    }, {\n      key: \"deserialize\",\n      value: function deserialize(e) {\n        var t = new DataView(e),\n          i = t.getUint16(0),\n          r = t.getUint8(2);\n        switch (r) {\n          case sO.Default:\n            {\n              var n = t.getUint32(3),\n                _o11 = nO(t, 7),\n                _s9 = e.slice(15),\n                _a4 = new TextDecoder().decode(_s9);\n              return {\n                version: i,\n                type: r,\n                packetNumber: n,\n                sendTs: Number(_o11),\n                payload: _a4\n              };\n            }\n          case sO.Ack:\n            {\n              var _e50 = t.getUint32(3),\n                _n18 = t.getUint8(7),\n                _o12 = nO(t, 8);\n              return {\n                version: i,\n                type: r,\n                maxAckPacketNumber: _e50,\n                shift: _n18,\n                ackSendTs: Number(_o12)\n              };\n            }\n          default:\n            throw NE.error(\"[\".concat(this.ID, \"] Unrecognized packet type \").concat(r)), new Error(\"Unrecognized packet type \".concat(r));\n        }\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(e) {\n        var _this95 = this;\n        var t = this.packetize(e, this.packetNumber);\n        this.packetNumber = 4294967295 === this.packetNumber ? 1 : this.packetNumber + 1;\n        var i = this.calculateRTO(t),\n          r = window.setTimeout(function () {\n            _this95.resendMessage(t);\n          }, i);\n        this.timeoutMap.set(t.packetNumber, r), this.sendPacket(t);\n      }\n    }, {\n      key: \"onData\",\n      value: function onData(e) {\n        var t = this.deserialize(e);\n        t.type === sO.Default ? this.ack(t) : t.type === sO.Ack && (this.updateRTT(t, Math.round(performance.now())), this.clearRTO(t));\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this.rtt = this.initialRTT, this.packetNumber = 1, Array.from(this.timeoutMap.entries()).forEach(function (e) {\n          var _e51 = _slicedToArray(e, 2),\n            t = _e51[0],\n            i = _e51[1];\n          window.clearTimeout(i);\n        }), this.timeoutMap = new Map(), this.rtoRatioMap = new Map(), this.unorderedPacketQueue = [], this.batchAckPacketQueue = [], this.lastOrderedPacketNumber = 0, void 0 !== this.batchAckTimer && window.clearTimeout(this.batchAckTimer);\n      }\n    }, {\n      key: \"resendMessage\",\n      value: function resendMessage(e) {\n        var _this96 = this;\n        var t = this.calculateRTO(e),\n          i = window.setTimeout(function () {\n            _this96.resendMessage(e);\n          }, t);\n        this.timeoutMap.set(e.packetNumber, i), this.sendPacket(e);\n      }\n    }, {\n      key: \"calculateRTO\",\n      value: function calculateRTO(e) {\n        var t = this.rtoRatioMap.get(e.packetNumber);\n        if (void 0 === t) return this.rtoRatioMap.set(e.packetNumber, 1), this.initialRTO;\n        {\n          var i = 9 * this.rtt / 8 * t;\n          return this.rtoRatioMap.set(e.packetNumber, t + 1), i > this.maxRTO ? this.maxRTO : i;\n        }\n      }\n    }, {\n      key: \"updateRTT\",\n      value: function updateRTT(e, t) {\n        var i = e.ackSendTs;\n        this.rtt = this.rtt * (7 / 8) + (t - i - this.rtt) / 8;\n      }\n    }, {\n      key: \"ack\",\n      value: function ack(e) {\n        var _this97 = this;\n        if (e.packetNumber === this.lastOrderedPacketNumber + 1) for (this.batchAckPacketQueue.length >= this.maxBatchAckCount && this.batchAck(), this.batchAckTimer ? this.batchAckPacketQueue.push(e) : (this.batchAckPacketQueue.push(e), this.batchAckTimer = window.setTimeout(function () {\n          _this97.batchAck();\n        }, this.rtt / 8)), this.lastOrderedPacketNumber += 1, this.receiveImpl(e.payload);;) {\n          var _e52 = this.unorderedPacketQueue[0];\n          if (!_e52) {\n            this.unorderedPacketQueue.shift();\n            break;\n          }\n          this.batchAckTimer && this.batchAck(), this.receiveImpl(_e52.payload), this.unorderedPacketQueue.shift(), this.lastOrderedPacketNumber += 1;\n        } else if (e.packetNumber <= this.lastOrderedPacketNumber) {\n          var t = {\n            ackSendTs: e.sendTs,\n            maxAckPacketNumber: e.packetNumber,\n            shift: 0,\n            type: sO.Ack,\n            version: this.version\n          };\n          this.sendPacket(t);\n        } else if (e.packetNumber > this.lastOrderedPacketNumber) {\n          this.unorderedPacketQueue[e.packetNumber - this.lastOrderedPacketNumber - 2] = e;\n          var _t69 = {\n            ackSendTs: e.sendTs,\n            maxAckPacketNumber: e.packetNumber,\n            shift: 0,\n            type: sO.Ack,\n            version: this.version\n          };\n          this.sendPacket(_t69);\n        }\n      }\n    }, {\n      key: \"batchAck\",\n      value: function batchAck() {\n        window.clearTimeout(this.batchAckTimer), this.batchAckTimer = void 0;\n        var e = {\n          ackSendTs: this.batchAckPacketQueue[this.batchAckPacketQueue.length - 1].sendTs,\n          maxAckPacketNumber: this.batchAckPacketQueue[this.batchAckPacketQueue.length - 1].packetNumber,\n          shift: this.batchAckPacketQueue.length - 1,\n          type: sO.Ack,\n          version: this.version\n        };\n        this.sendPacket(e), this.batchAckPacketQueue = [];\n      }\n    }, {\n      key: \"sendPacket\",\n      value: function sendPacket(e) {\n        e.type === sO.Default && (e.sendTs = Math.round(performance.now()));\n        var t = this.serialize(e);\n        this.sendImpl(t);\n      }\n    }, {\n      key: \"clearRTO\",\n      value: function clearRTO(e) {\n        for (var t = e.maxAckPacketNumber - e.shift; t <= e.maxAckPacketNumber; t++) {\n          var _e53 = this.timeoutMap.get(t);\n          void 0 !== _e53 && window.clearTimeout(_e53), this.timeoutMap.delete(t), this.rtoRatioMap.delete(t);\n        }\n      }\n    }]);\n    return aO;\n  }();\n  var cO = /*#__PURE__*/function (_gE20) {\n    _inherits(cO, _gE20);\n    _createClass(cO, [{\n      key: \"queue\",\n      get: function get() {\n        return [].concat(_toConsumableArray(this.highPriorityQueue), _toConsumableArray(this.lowPriorityQueue));\n      }\n    }]);\n    function cO(e) {\n      var _this98;\n      _classCallCheck(this, cO);\n      _this98 = _possibleConstructorReturn(this, _getPrototypeOf(cO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this98)), \"lowPriorityQueue\", []), mp(_assertThisInitialized(_assertThisInitialized(_this98)), \"highPriorityQueue\", []), mp(_assertThisInitialized(_assertThisInitialized(_this98)), \"AgoraTransmissionManager\", void 0), _this98.AgoraTransmissionManager = e;\n      return _this98;\n    }\n    _createClass(cO, [{\n      key: \"reset\",\n      value: function reset() {\n        this.lowPriorityQueue = [], this.highPriorityQueue = [];\n      }\n    }, {\n      key: \"pushMessage\",\n      value: function pushMessage(e) {\n        arguments.length > 1 && void 0 !== arguments[1] && arguments[1] ? this.highPriorityQueue.push(e) : this.lowPriorityQueue.push(e), this.sendMessage();\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage() {\n        var _this99 = this;\n        var e = this.queue.length;\n        var t = 0;\n        t = e < 5 ? 15 * e : 60 + 3 * (e - 4), setTimeout(function () {\n          _this99._sendMessage();\n        }, t);\n      }\n    }, {\n      key: \"_sendMessage\",\n      value: function _sendMessage() {\n        if (!this.queue.length) return;\n        var e = this.AgoraTransmissionManager.getConnection();\n        if (!e) return;\n        var t = this.queue.shift();\n        return this.lowPriorityQueue.includes(t) ? this.lowPriorityQueue.shift() : this.highPriorityQueue.shift(), e.sendMessage(t.compressed), t;\n      }\n    }]);\n    return cO;\n  }(gE);\n  var dO = /*#__PURE__*/function (_rO) {\n    _inherits(dO, _rO);\n    function dO(e, t) {\n      var _this100;\n      _classCallCheck(this, dO);\n      _this100 = _possibleConstructorReturn(this, _getPrototypeOf(dO).call(this, e, t, arguments.length > 2 && void 0 !== arguments[2] && arguments[2], arguments.length > 3 ? arguments[3] : void 0)), mp(_assertThisInitialized(_assertThisInitialized(_this100)), \"_initMutex\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this100)), \"_reconnectInterrupter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this100)), \"_url\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this100)), \"_transmitter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this100)), \"_addresses\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this100)), \"_reliableTransmission\", void 0), _this100._initMutex = new OT(\"datachannel\");\n      var i = t.timeout,\n        r = t.timeoutFactor,\n        n = Math.max(300, Math.floor(3 * i / 5)),\n        o = Math.max(1.2, Math.floor(8 * r) / 10);\n      bg.ONLINE && (_this100._retryConfig.timeout = n, _this100._retryConfig.timeoutFactor = o), pT.on(wg.NETWORK_STATE_CHANGE, function (e, t) {\n        e !== t && (_this100.resetReconnectCount(\"network state change: \".concat(t, \" -> \").concat(e)), e === bg.ONLINE ? (_this100._retryConfig.timeout = n, _this100._retryConfig.timeoutFactor = o) : (_this100._retryConfig.timeout = i, _this100._retryConfig.timeoutFactor = r));\n      });\n      return _this100;\n    }\n    _createClass(dO, [{\n      key: \"getConnection\",\n      value: function getConnection() {\n        if (this._reliableTransmission) return this._reliableTransmission;\n      }\n    }, {\n      key: \"init\",\n      value: function () {\n        var _init2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee54(e) {\n          var _this101 = this;\n          var t,\n            i,\n            _args54 = arguments;\n          return _regeneratorRuntime().wrap(function _callee54$(_context54) {\n            while (1) switch (_context54.prev = _context54.next) {\n              case 0:\n                t = _args54.length > 1 && void 0 !== _args54[1] ? _args54[1] : 5e3;\n                this._forceCloseTimeout = t;\n                i = function i(t, _i39) {\n                  _this101._addresses = e, _this101.currentURLIndex = _this101._addresses.findIndex(function (e) {\n                    return e.fingerprint || HE(\"FINGERPRINT\");\n                  });\n                  var r = _this101._addresses[_this101.currentURLIndex];\n                  _this101.state = \"connecting\", _this101._messageSender = new cO(_this101), _this101.createTransmitterConnection(r).then(t).catch(_i39), _this101.once(Ug.CLOSED, function () {\n                    return _i39(new vE(TE.WS_DISCONNECT));\n                  }), _this101.once(Ug.CONNECTED, function () {\n                    return t();\n                  });\n                };\n                return _context54.abrupt(\"return\", this._initMutex.lock().then(function (e) {\n                  return new Cl(function (e, t) {\n                    i(e, t);\n                  }).then(function () {\n                    e();\n                  }).catch(function () {\n                    e();\n                  });\n                }));\n              case 4:\n              case \"end\":\n                return _context54.stop();\n            }\n          }, _callee54, this);\n        }));\n        function init(_x70) {\n          return _init2.apply(this, arguments);\n        }\n        return init;\n      }()\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(e) {\n        var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],\n          i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];\n        if (!this._transmitter || !this._reliableTransmission) throw new vE(TE.WS_ABORT, \"datachannel is not ready\");\n        try {\n          var r = null;\n          r = i ? this.sendMessageWithUint8Array(e) : this.sendMessageWithJSON(e), t ? this._reliableTransmission.sendMessage(r.compressed) : this._messageSender.pushMessage(r);\n        } catch (e) {\n          throw new vE(TE.WS_ERR, \"send datachannel signal message error\" + e.toString());\n        }\n      }\n    }, {\n      key: \"unbindDcCloseEventListener\",\n      value: function unbindDcCloseEventListener() {\n        this._transmitter && (this._transmitter.onclose = null);\n      }\n    }, {\n      key: \"sendMessageWithJSON\",\n      value: function sendMessageWithJSON(e) {\n        var t = JSON.stringify(e);\n        return {\n          compressed: t,\n          compressedLength: t.length,\n          origin: e\n        };\n      }\n    }, {\n      key: \"sendMessageWithUint8Array\",\n      value: function sendMessageWithUint8Array(e) {\n        return {\n          compressed: e,\n          compressedLength: e.byteLength,\n          origin: e\n        };\n      }\n    }, {\n      key: \"createTransmitterConnection\",\n      value: function createTransmitterConnection(e) {\n        var _this102 = this;\n        return this.connectionID += 1, this._joinChannelServiceRecordIndex = void 0, this._url = \"dc://\".concat(e.ip, \":\").concat(e.port), new Cl(function (t, i) {\n          var r;\n          var n = function n() {\n              NE.debug(\"[\".concat(_this102._name, \"] datachannel opened:\"), _this102._url), _this102.reconnectMode = \"retry\", _this102.state = \"connected\", _this102.resetReconnectCount(\"opened\"), t();\n            },\n            o = /*#__PURE__*/function () {\n              var _ref20 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee55(e) {\n                var r, _r22, _n19;\n                return _regeneratorRuntime().wrap(function _callee55$(_context55) {\n                  while (1) switch (_context55.prev = _context55.next) {\n                    case 0:\n                      if (!(null === (r = _this102._closeEstablishingTransmitter) || void 0 === r || r.call(_this102), NE.debug(\"[\".concat(_this102._name, \"] datachannel close \").concat(_this102._url, \", code: \").concat(e.code, \", reason: \").concat(e.reason, \", current mode: \").concat(_this102.reconnectMode)), _this102._reconnectCount < _this102._retryConfig.maxRetryCount)) {\n                        _context55.next = 13;\n                        break;\n                      }\n                      \"connected\" === _this102.state && (_this102.reconnectReason = e.reason, _this102.state = \"reconnecting\");\n                      _r22 = GR(_this102, Ug.WILL_RECONNECT, _this102.reconnectMode) || _this102.reconnectMode;\n                      _context55.next = 5;\n                      return _this102.reconnectWithAction(_r22);\n                    case 5:\n                      _n19 = _context55.sent;\n                      if (!(\"closed\" === _this102.state)) {\n                        _context55.next = 8;\n                        break;\n                      }\n                      return _context55.abrupt(\"return\", void NE.debug(\"[\".concat(_this102.connectionID, \"] dc is closed, no need to reconnect\")));\n                    case 8:\n                      if (_n19) {\n                        _context55.next = 10;\n                        break;\n                      }\n                      return _context55.abrupt(\"return\", (i(new vE(TE.WS_DISCONNECT, \"datachannel reconnect failed: \".concat(e.code))), void _this102.close(!0)));\n                    case 10:\n                      t();\n                      _context55.next = 14;\n                      break;\n                    case 13:\n                      i(new vE(TE.WS_DISCONNECT, \"datachannel close: \".concat(e.code))), _this102.close();\n                    case 14:\n                    case \"end\":\n                      return _context55.stop();\n                  }\n                }, _callee55);\n              }));\n              return function o(_x71) {\n                return _ref20.apply(this, arguments);\n              };\n            }(),\n            s = function s(e) {\n              var t;\n              null === (t = _this102._reliableTransmission) || void 0 === t || t.onData(e.data);\n            };\n          _this102._transmitter && (_this102._transmitter.onclose = null, _this102._transmitter.close()), _this102._reliableTransmission && (_this102._reliableTransmission.close(), _this102._reliableTransmission = void 0), NE.debug(\"[\".concat(_this102._name, \"] start connect, address: \").concat(JSON.stringify(e)));\n          var a = null === (r = _this102._store) || void 0 === r ? void 0 : r.recordJoinChannelService({\n              startTs: Date.now(),\n              status: \"pending\",\n              service: \"gateway\"\n            }),\n            c = Date.now();\n          FR(_this102, Ug.TO_CONNECT_DATACHANNEL, e).then(function (e) {\n            var t, i;\n            if (!e) throw new Error(\"transmissonInfo not exist yet\");\n            var r = e.transmitter,\n              d = e.close;\n            _this102._transmitter = r, null === (t = _this102._store) || void 0 === t || t.signalChannelOpen();\n            var u = Date.now() - c;\n            NE.debug(\"[choose dc] dc open cost \".concat(u, \"ms\"));\n            _this102._reliableTransmission = new aO(function (e) {\n              var t;\n              _this102._transmitter && \"open\" === _this102._transmitter.readyState && (null === (t = _this102._transmitter) || void 0 === t || t.send(e));\n            }, function (e) {\n              \"string\" == typeof e && _this102.emit(Ug.ON_MESSAGE, e);\n            }), _this102._closeEstablishingTransmitter = function () {\n              var e;\n              null === (e = _this102._reliableTransmission) || void 0 === e || e.close(), _this102._reliableTransmission = void 0, d();\n            }, n && n(), r.onclose = o, r.onmessage = s, null === (i = _this102._store) || void 0 === i || i.recordJoinChannelService({\n              endTs: Date.now(),\n              status: \"success\"\n            }, a), _this102._joinChannelServiceRecordIndex = a;\n          }).catch(function (e) {\n            var t;\n            if (null === (t = _this102._store) || void 0 === t || t.recordJoinChannelService({\n              endTs: Date.now(),\n              status: e instanceof vE && e.code === TE.WS_ABORT ? \"aborted\" : \"error\",\n              errors: [e]\n            }, a), \"closed\" !== _this102.state) {\n              if (e instanceof vE && e.code === TE.WS_ERR) {\n                var _t70 = new vE(TE.WS_ERR, \"init datachannel failed! Error: \".concat(e.toString()));\n                return NE.error(\"[\".concat(_this102._name, \"]\").concat(_t70)), void i(_t70);\n              }\n              o && o(e);\n            } else i(new vE(TE.WS_DISCONNECT, \"datachannel is closed: \".concat(e.toString())));\n          });\n        });\n      }\n    }, {\n      key: \"reconnectWithAction\",\n      value: function () {\n        var _reconnectWithAction2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee57(e) {\n          var _this103 = this;\n          var t,\n            i,\n            _t71,\n            r,\n            _t72,\n            _e54,\n            _t73,\n            n,\n            _args57 = arguments;\n          return _regeneratorRuntime().wrap(function _callee57$(_context57) {\n            while (1) switch (_context57.prev = _context57.next) {\n              case 0:\n                t = !(_args57.length > 1 && void 0 !== _args57[1]) || _args57[1];\n                if (!(this._reconnectCount >= this._retryConfig.maxRetryCount)) {\n                  _context57.next = 3;\n                  break;\n                }\n                return _context57.abrupt(\"return\", !1);\n              case 3:\n                if (this._addresses) {\n                  _context57.next = 5;\n                  break;\n                }\n                return _context57.abrupt(\"return\", !1);\n              case 5:\n                if (!(\"closed\" === this.state)) {\n                  _context57.next = 7;\n                  break;\n                }\n                return _context57.abrupt(\"return\", !1);\n              case 7:\n                this._onlineReconnectListener || pT.networkState !== bg.OFFLINE || (this._onlineReconnectListener = pT.onlineWaiter && pT.onlineWaiter.then(function () {\n                  _this103._onlineReconnectListener = void 0;\n                }));\n                i = !0;\n                if (!(this._reconnectInterrupter = function () {\n                  i = !1;\n                }, t)) {\n                  _context57.next = 14;\n                  break;\n                }\n                _t71 = IE(this._reconnectCount, this._retryConfig);\n                NE.debug(\"[\".concat(this._name, \"] wait \").concat(_t71, \"ms to reconnect datachannel, mode: \").concat(e));\n                _context57.next = 14;\n                return Cl.race([LR(_t71), this._onlineReconnectListener || new Cl(function () {})]);\n              case 14:\n                if (!(\"closed\" === this.state || !i)) {\n                  _context57.next = 16;\n                  break;\n                }\n                return _context57.abrupt(\"return\", !1);\n              case 16:\n                this._reconnectCount += 1;\n                r = /*#__PURE__*/function () {\n                  var _ref21 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee56(e, t) {\n                    return _regeneratorRuntime().wrap(function _callee56$(_context56) {\n                      while (1) switch (_context56.prev = _context56.next) {\n                        case 0:\n                          _this103.emit(Ug.RECONNECT_CREATE_CONNECTION, t);\n                          _context56.next = 3;\n                          return _this103.createTransmitterConnection(e);\n                        case 3:\n                        case \"end\":\n                          return _context56.stop();\n                      }\n                    }, _callee56);\n                  }));\n                  return function r(_x73, _x74) {\n                    return _ref21.apply(this, arguments);\n                  };\n                }();\n                _context57.prev = 18;\n                if (!(\"retry\" === e)) {\n                  _context57.next = 26;\n                  break;\n                }\n                _t72 = this._addresses[this.currentURLIndex];\n                this.emit(Ug.RECONNECT_WAITTING_FINISH, e);\n                _context57.next = 24;\n                return r(_t72, e);\n              case 24:\n                _context57.next = 50;\n                break;\n              case 26:\n                if (!(\"tryNext\" === e)) {\n                  _context57.next = 49;\n                  break;\n                }\n                this.currentURLIndex += 1;\n                _e54 = this.currentURLIndex;\n              case 29:\n                if (!(_e54 < this._addresses.length)) {\n                  _context57.next = 37;\n                  break;\n                }\n                if (!(this._addresses[_e54].fingerprint || HE(\"FINGERPRINT\"))) {\n                  _context57.next = 33;\n                  break;\n                }\n                this.currentURLIndex = _e54;\n                return _context57.abrupt(\"break\", 37);\n              case 33:\n                this.currentURLIndex += 1;\n              case 34:\n                _e54++;\n                _context57.next = 29;\n                break;\n              case 37:\n                if (!(this.currentURLIndex >= this._addresses.length)) {\n                  _context57.next = 42;\n                  break;\n                }\n                NE.debug(\"[\".concat(this._name, \"] the available addresses are exhausted, change to recover\"));\n                _context57.next = 41;\n                return this.reconnectWithAction(\"recover\", !1);\n              case 41:\n                return _context57.abrupt(\"return\", _context57.sent);\n              case 42:\n                NE.debug(\"[\".concat(this._name, \"] datachannel url length: \").concat(this._addresses.length, \" current index: \").concat(this.currentURLIndex));\n                _t73 = this._addresses[this.currentURLIndex];\n                this.emit(Ug.RECONNECT_WAITTING_FINISH, e);\n                _context57.next = 47;\n                return r(_t73, e);\n              case 47:\n                _context57.next = 50;\n                break;\n              case 49:\n                \"recover\" === e && (NE.debug(\"[\".concat(this._name, \"] start to failback to websocket\")), this.resetReconnectCount(\"recover mode\"), this.emit(Ug.RECONNECT_WAITTING_FINISH, e), this.emit(Ug.FAILBACK));\n              case 50:\n                return _context57.abrupt(\"return\", !0);\n              case 53:\n                _context57.prev = 53;\n                _context57.t0 = _context57[\"catch\"](18);\n                NE.error(\"[\".concat(this._name, \"] reconnect failed\"), _context57.t0.toString());\n                if (!(null != _context57.t0 && null !== (n = _context57.t0.data) && void 0 !== n && n.desc && Array.isArray(_context57.t0.data.desc) && _context57.t0.data.desc.length && _context57.t0.data.desc.includes(\"dynamic key expired\"))) {\n                  _context57.next = 60;\n                  break;\n                }\n                _context57.t1 = (this.emit(Ug.ON_TOKEN_PRIVILEGE_DID_EXPIRE), !1);\n                _context57.next = 63;\n                break;\n              case 60:\n                _context57.next = 62;\n                return this.reconnectWithAction(e, t);\n              case 62:\n                _context57.t1 = _context57.sent;\n              case 63:\n                return _context57.abrupt(\"return\", _context57.t1);\n              case 64:\n              case \"end\":\n                return _context57.stop();\n            }\n          }, _callee57, this, [[18, 53]]);\n        }));\n        function reconnectWithAction(_x72) {\n          return _reconnectWithAction2.apply(this, arguments);\n        }\n        return reconnectWithAction;\n      }()\n    }]);\n    return dO;\n  }(rO);\n  var uO = /*#__PURE__*/function (_gE21) {\n    _inherits(uO, _gE21);\n    _createClass(uO, [{\n      key: \"connectionState\",\n      get: function get() {\n        return this._connectionState;\n      },\n      set: function set(e) {\n        e !== this._connectionState && (this._connectionState = e, e === bm.CONNECTED ? this.emit(wm.WS_CONNECTED) : e === bm.RECONNECTING ? this.emit(wm.WS_RECONNECTING, this._websocketReconnectReason) : e === bm.CLOSED && this.emit(wm.WS_CLOSED, this._disconnectedReason));\n      }\n    }, {\n      key: \"currentURLIndex\",\n      get: function get() {\n        return this.websocket.currentURLIndex;\n      }\n    }, {\n      key: \"url\",\n      get: function get() {\n        return this.websocket ? this.websocket.url : null;\n      }\n    }, {\n      key: \"rtt\",\n      get: function get() {\n        return this.rttRolling.mean();\n      }\n    }]);\n    function uO(e, t) {\n      var _this104;\n      _classCallCheck(this, uO);\n      _this104 = _possibleConstructorReturn(this, _getPrototypeOf(uO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"_disconnectedReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"_websocketReconnectReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"_connectionState\", bm.CLOSED), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"reconnectToken\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"websocket\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"openConnectionTime\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"clientId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"lastMsgTime\", Date.now()), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"uploadCache\", []), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"uploadCacheInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"rttRolling\", new eO(5)), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"pingpongTimer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"inflateDataTimer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"pingpongTimeoutCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"joinResponse\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"multiIpOption\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"initError\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"spec\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this104)), \"onWebsocketMessage\", function (e) {\n        if (e instanceof ArrayBuffer) return void _this104.emit(wm.ON_BINARY_DATA, e);\n        var t = JSON.parse(e);\n        if (_this104.lastMsgTime = Date.now(), Object.prototype.hasOwnProperty.call(t, \"_id\")) {\n          var _e55 = \"res-@\".concat(t._id);\n          _this104.emit(_e55, t._result, t._message);\n        } else if (Object.prototype.hasOwnProperty.call(t, \"_type\") && (_this104.emit(t._type, t._message), t._type === Pm.ON_NOTIFICATION && _this104.handleNotification(t._message), t._type === Pm.ON_USER_BANNED)) switch (t._message.error_code) {\n          case 14:\n            _this104.close(Cm.UID_BANNED);\n            break;\n          case 15:\n            _this104.close(Cm.IP_BANNED);\n            break;\n          case 16:\n            _this104.close(Cm.CHANNEL_BANNED);\n        }\n      }), _this104.clientId = e.clientId, _this104.spec = e, _this104.store = t, _this104.websocket = new dO(\"gateway-\".concat(_this104.clientId), _this104.spec.retryConfig, !0, t), _this104.handleWebsocketEvents(), window.addEventListener(\"offline\", function () {\n        _this104.connectionState === bm.CONNECTED && _this104.reconnect(\"retry\", Mg.OFFLINE);\n      });\n      return _this104;\n    }\n    _createClass(uO, [{\n      key: \"request\",\n      value: function () {\n        var _request2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee58(e, t, i, r) {\n          var _this105 = this;\n          var n, o, s, a, c, d, u, l, h;\n          return _regeneratorRuntime().wrap(function _callee58$(_context58) {\n            while (1) switch (_context58.prev = _context58.next) {\n              case 0:\n                n = MR(6, \"\"), o = {\n                  _id: n,\n                  _type: e,\n                  _message: t\n                }, s = this.websocket.connectionID, a = function a() {\n                  return new Cl(function (t, i) {\n                    if (_this105.connectionState === bm.CONNECTED) return t();\n                    var r = function r() {\n                        _this105.off(wm.WS_CLOSED, n), t();\n                      },\n                      n = function n() {\n                        _this105.off(wm.WS_CONNECTED, r), i(new vE(TE.WS_ABORT));\n                      };\n                    _this105.once(wm.WS_CONNECTED, r), _this105.once(wm.WS_CLOSED, n), e !== Nm.PUBLISH && e !== Nm.SUBSCRIBE && e !== Nm.UNSUBSCRIBE && e !== Nm.UNPUBLISH && e !== Nm.CONTROL && e !== Nm.RESTART_ICE || _this105.once(wm.DISCONNECT_P2P, function () {\n                      i(new vE(TE.DISCONNECT_P2P));\n                    }), e !== Nm.PUBLISH && e !== Nm.RESTART_ICE || _this105.once(wm.ABORT_P2P_EXECUTION, function () {\n                      i(new vE(TE.DISCONNECT_P2P));\n                    });\n                  });\n                };\n                _context58.t0 = this.connectionState !== bm.CONNECTING && this.connectionState !== bm.RECONNECTING || e === Nm.JOIN || e === Nm.REJOIN;\n                if (_context58.t0) {\n                  _context58.next = 5;\n                  break;\n                }\n                _context58.next = 5;\n                return a();\n              case 5:\n                e === Nm.LEAVE && (this.websocket.unbindDcCloseEventListener(), r = !0);\n                this.websocket.sendMessage(o, !0, !1);\n                if (!r) {\n                  _context58.next = 9;\n                  break;\n                }\n                return _context58.abrupt(\"return\");\n              case 9:\n                c = new Cl(function (i, r) {\n                  var o = !1;\n                  var a = function a(r, n) {\n                    o = !0, i({\n                      isSuccess: \"success\" === r,\n                      message: n || {}\n                    }), _this105.off(wm.WS_CLOSED, c), _this105.off(wm.WS_RECONNECTING, c), _this105.emit(wm.REQUEST_SUCCESS, e, t);\n                  };\n                  _this105.once(\"res-@\".concat(n), a);\n                  var c = function c() {\n                    r(new vE(TE.WS_ABORT, \"type: \".concat(e))), _this105.off(wm.WS_CLOSED, c), _this105.off(wm.WS_RECONNECTING, c), _this105.off(\"res-@\".concat(n), a);\n                  };\n                  _this105.once(wm.WS_CLOSED, c), _this105.once(wm.WS_RECONNECTING, c), LR(HE(\"SIGNAL_REQUEST_TIMEOUT\")).then(function () {\n                    _this105.websocket.connectionID !== s || o || (NE.warning(\"dc request timeout, type: \".concat(e)), _this105.emit(wm.REQUEST_TIMEOUT, e, t));\n                  });\n                });\n                d = null;\n                _context58.prev = 11;\n                _context58.next = 14;\n                return c;\n              case 14:\n                d = _context58.sent;\n                _context58.next = 36;\n                break;\n              case 17:\n                _context58.prev = 17;\n                _context58.t1 = _context58[\"catch\"](11);\n                if (!(this.connectionState === bm.CLOSED || e === Nm.LEAVE)) {\n                  _context58.next = 21;\n                  break;\n                }\n                throw new vE(TE.WS_ABORT);\n              case 21:\n                if (!(!this.spec.forceWaitGatewayResponse || i)) {\n                  _context58.next = 25;\n                  break;\n                }\n                _context58.t2 = _context58.t1.throw();\n                _context58.next = 35;\n                break;\n              case 25:\n                if (!(e === Nm.JOIN || e === Nm.REJOIN)) {\n                  _context58.next = 29;\n                  break;\n                }\n                _context58.t3 = null;\n                _context58.next = 34;\n                break;\n              case 29:\n                _context58.next = 31;\n                return a();\n              case 31:\n                _context58.next = 33;\n                return this.request(e, t);\n              case 33:\n                _context58.t3 = _context58.sent;\n              case 34:\n                _context58.t2 = _context58.t3;\n              case 35:\n                return _context58.abrupt(\"return\", _context58.t2);\n              case 36:\n                if (!d.isSuccess) {\n                  _context58.next = 38;\n                  break;\n                }\n                return _context58.abrupt(\"return\", d.message);\n              case 38:\n                u = Number(d.message.error_code || d.message.code), l = zA(u), h = new vE(TE.UNEXPECTED_RESPONSE, \"\".concat(l.desc, \": \").concat(d.message.error_str), {\n                  code: u,\n                  data: d.message\n                });\n                if (!(\"success\" === l.action)) {\n                  _context58.next = 43;\n                  break;\n                }\n                _context58.t4 = d.message;\n                _context58.next = 68;\n                break;\n              case 43:\n                NE.warning(\"[\".concat(this.websocket.connectionID, \"] unexpected response from type \").concat(e, \", error_code: \").concat(u, \", message: \").concat(l.desc, \", action: \").concat(l.action));\n                if (!(u === Im.ERR_TOO_MANY_BROADCASTERS)) {\n                  _context58.next = 48;\n                  break;\n                }\n                _context58.t5 = e === Nm.JOIN || e === Nm.REJOIN ? (this.initError = h, this.close(), h.throw()) : h.throw();\n                _context58.next = 67;\n                break;\n              case 48:\n                if (!(\"failed\" === l.action)) {\n                  _context58.next = 52;\n                  break;\n                }\n                _context58.t6 = h.throw();\n                _context58.next = 66;\n                break;\n              case 52:\n                if (!(\"quit\" === l.action)) {\n                  _context58.next = 56;\n                  break;\n                }\n                _context58.t7 = (this.initError = h, this.close(), h.throw());\n                _context58.next = 65;\n                break;\n              case 56:\n                u === Im.ERR_JOIN_BY_MULTI_IP ? (this.multiIpOption = d.message.option, NE.warning(\"[\".concat(this.clientId, \"] detect multi ip, recover\")), this.reconnect(\"recover\", Mg.MULTI_IP)) : this.reconnect(l.action, Mg.SERVER_ERROR);\n                if (!(e === Nm.JOIN || e === Nm.REJOIN)) {\n                  _context58.next = 61;\n                  break;\n                }\n                _context58.t8 = null;\n                _context58.next = 64;\n                break;\n              case 61:\n                _context58.next = 63;\n                return this.request(e, t);\n              case 63:\n                _context58.t8 = _context58.sent;\n              case 64:\n                _context58.t7 = _context58.t8;\n              case 65:\n                _context58.t6 = _context58.t7;\n              case 66:\n                _context58.t5 = _context58.t6;\n              case 67:\n                _context58.t4 = _context58.t5;\n              case 68:\n                return _context58.abrupt(\"return\", _context58.t4);\n              case 69:\n              case \"end\":\n                return _context58.stop();\n            }\n          }, _callee58, this, [[11, 17]]);\n        }));\n        function request(_x75, _x76, _x77, _x78) {\n          return _request2.apply(this, arguments);\n        }\n        return request;\n      }()\n    }, {\n      key: \"waitMessage\",\n      value: function waitMessage(e, t) {\n        var _this106 = this;\n        return new Cl(function (i) {\n          var r = function r(n) {\n            (!t || t(n)) && (_this106.off(e, r), i(n));\n          };\n          _this106.on(e, r);\n        });\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(e, t) {\n        var _this107 = this;\n        var i = {\n          _type: e,\n          _message: t\n        };\n        try {\n          this.websocket.sendMessage(i);\n        } catch (e) {\n          var _t74 = HE(\"MAX_UPLOAD_CACHE\") || 50;\n          this.uploadCache.push(i), this.uploadCache.length > _t74 && this.uploadCache.splice(0, 1), this.uploadCache.length > 0 && !this.uploadCacheInterval && (this.uploadCacheInterval = window.setInterval(function () {\n            if (_this107.connectionState !== bm.CONNECTED) return;\n            var e = _this107.uploadCache.splice(0, 1)[0];\n            0 === _this107.uploadCache.length && (window.clearInterval(_this107.uploadCacheInterval), _this107.uploadCacheInterval = void 0), _this107.upload(e._type, e._message);\n          }, HE(\"UPLOAD_CACHE_INTERVAL\") || 2e3));\n        }\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = {\n          _type: e,\n          _message: t\n        };\n        this.websocket.sendMessage(i);\n      }\n    }, {\n      key: \"init\",\n      value: function init(e, t) {\n        var _this108 = this;\n        return this.initError = void 0, this.multiIpOption = void 0, this.joinResponse = void 0, this.reconnectToken = void 0, this.openConnectionTime = void 0, new Cl(function (i, r) {\n          _this108.once(wm.WS_CONNECTED, function () {\n            return i(_this108.joinResponse);\n          }), _this108.once(wm.WS_CLOSED, function () {\n            return r(_this108.initError || new vE(TE.WS_ABORT));\n          }), _this108.connectionState = bm.CONNECTING, _this108.websocket.init(e).catch(r), _this108.websocket.once(Ug.FAILBACK, function () {\n            void 0 === _this108.openConnectionTime && r(new vE(TE.INIT_DATACHANNEL_TIMEOUT));\n          }), _this108.inflateDataTimer && window.clearInterval(_this108.inflateDataTimer), _this108.inflateDataTimer = window.setInterval(function () {\n            _this108.handleInflateData();\n          }, 2e4), setTimeout(function () {\n            t && void 0 === _this108.openConnectionTime && (NE.debug(\"[\".concat(_this108.clientId, \"] init datachannel timeout while join with failback to websocket\")), r(new vE(TE.INIT_DATACHANNEL_TIMEOUT)));\n          }, HE(\"DC_JOIN_WITH_FAILBACK\"));\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close(e) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.inflateDataTimer && (this.handleInflateData(), window.clearInterval(this.inflateDataTimer), this.inflateDataTimer = void 0), this.reconnectToken = void 0, this.joinResponse = void 0, this._disconnectedReason = e || Cm.LEAVE, this.connectionState = bm.CLOSED, NE.debug(\"[\".concat(this.clientId, \"] \") + \"will close datachannel in signal\"), this.websocket.close(), e === Cm.FALLBACK && (this.websocket.removeAllListeners(), this.websocket = new dO(\"gateway-\".concat(this.clientId), this.spec.retryConfig, !0, this.store), this.handleWebsocketEvents());\n      }\n    }, {\n      key: \"join\",\n      value: function () {\n        var _join2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee59() {\n          var _e56, t;\n          return _regeneratorRuntime().wrap(function _callee59$(_context59) {\n            while (1) switch (_context59.prev = _context59.next) {\n              case 0:\n                if (this.joinResponse) {\n                  _context59.next = 11;\n                  break;\n                }\n                this.emit(wm.ABORT_P2P_EXECUTION);\n                _context59.next = 4;\n                return FR(this, wm.DATACHANNEL_CONNECTING);\n              case 4:\n                _e56 = _context59.sent;\n                _context59.next = 7;\n                return this.request(Nm.JOIN, _e56);\n              case 7:\n                t = _context59.sent;\n                if (t) {\n                  _context59.next = 10;\n                  break;\n                }\n                return _context59.abrupt(\"return\", (this.emit(wm.REPORT_JOIN_GATEWAY, TE.TIMEOUT, this.url || \"\"), !1));\n              case 10:\n                this.joinResponse = t, this.emit(wm.JOIN_RESPONSE, this.joinResponse), this.reconnectToken = this.joinResponse.rejoin_token;\n              case 11:\n                return _context59.abrupt(\"return\", (this.connectionState = bm.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(this.handlePingPong.bind(this), 3e3), !0));\n              case 12:\n              case \"end\":\n                return _context59.stop();\n            }\n          }, _callee59, this);\n        }));\n        function join() {\n          return _join2.apply(this, arguments);\n        }\n        return join;\n      }()\n    }, {\n      key: \"rejoin\",\n      value: function () {\n        var _rejoin2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee60() {\n          var _this109 = this;\n          var e, t;\n          return _regeneratorRuntime().wrap(function _callee60$(_context60) {\n            while (1) switch (_context60.prev = _context60.next) {\n              case 0:\n                if (this.reconnectToken) {\n                  _context60.next = 2;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"can not rejoin, no rejoin token\");\n              case 2:\n                e = WR(this, wm.REQUEST_REJOIN_INFO);\n                e.token = this.reconnectToken;\n                _context60.next = 6;\n                return this.request(Nm.REJOIN, e);\n              case 6:\n                t = _context60.sent;\n                return _context60.abrupt(\"return\", !!t && (this.connectionState = bm.CONNECTED, this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(this.handlePingPong.bind(this), 3e3), t.peers && t.peers.forEach(function (e) {\n                  _this109.emit(Pm.ON_USER_ONLINE, {\n                    uid: e.uid\n                  }), e.audio && _this109.emit(Pm.ON_ADD_AUDIO_STREAM, {\n                    uid: e.uid,\n                    uint_id: e.uint_id,\n                    audio: !0,\n                    ssrcId: e.audio_ssrc\n                  }), e.video && _this109.emit(Pm.ON_ADD_VIDEO_STREAM, {\n                    uid: e.uid,\n                    uint_id: e.uint_id,\n                    video: !0,\n                    ssrcId: e.video_ssrc\n                  }), e.audio_mute ? _this109.emit(Pm.MUTE_AUDIO, {\n                    uid: e.uid\n                  }) : _this109.emit(Pm.UNMUTE_AUDIO, {\n                    uid: e.uid\n                  }), e.video_mute ? _this109.emit(Pm.MUTE_VIDEO, {\n                    uid: e.uid\n                  }) : _this109.emit(Pm.UNMUTE_VIDEO, {\n                    uid: e.uid\n                  }), e.audio_enable_local ? _this109.emit(Pm.ENABLE_LOCAL_AUDIO, {\n                    uid: e.uid\n                  }) : _this109.emit(Pm.DISABLE_LOCAL_AUDIO, {\n                    uid: e.uid\n                  }), e.video_enable_local ? _this109.emit(Pm.ENABLE_LOCAL_VIDEO, {\n                    uid: e.uid\n                  }) : _this109.emit(Pm.DISABLE_LOCAL_VIDEO, {\n                    uid: e.uid\n                  }), e.audio || e.video || _this109.emit(Pm.ON_REMOVE_STREAM, {\n                    uid: e.uid,\n                    uint_id: e.uint_id\n                  });\n                }), !0));\n              case 8:\n              case \"end\":\n                return _context60.stop();\n            }\n          }, _callee60, this);\n        }));\n        function rejoin() {\n          return _rejoin2.apply(this, arguments);\n        }\n        return rejoin;\n      }()\n    }, {\n      key: \"reconnect\",\n      value: function reconnect(e, t) {\n        this.pingpongTimer && (this.pingpongTimeoutCount = 0, window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0), this.websocket.reconnect(e, t);\n      }\n    }, {\n      key: \"handleNotification\",\n      value: function handleNotification(e) {\n        NE.debug(\"[\".concat(this.clientId, \"] receive notification: \"), e);\n        var t = zA(e.code);\n        if (\"success\" !== t.action) {\n          if (\"failed\" !== t.action) return \"quit\" === t.action ? (\"ERR_REPEAT_JOIN_CHANNEL\" === t.desc && this.close(Cm.UID_BANNED), void this.close()) : void this.reconnect(t.action, Mg.SERVER_ERROR);\n          NE.error(\"[\".concat(this.clientId, \"] ignore error: \"), t.desc);\n        }\n      }\n    }, {\n      key: \"handlePingPong\",\n      value: function handlePingPong() {\n        var _this110 = this;\n        if (!this.websocket || \"connected\" !== this.websocket.state) return;\n        this.pingpongTimeoutCount > 0 && this.rttRolling.add(3e3), this.pingpongTimeoutCount += 1;\n        var e = HE(\"PING_PONG_TIME_OUT\"),\n          t = Date.now();\n        this.pingpongTimeoutCount >= e && (NE.warning(\"PINGPONG Timeout. Last Socket Message: \".concat(t - this.lastMsgTime, \"ms\")), t - this.lastMsgTime > HE(\"WEBSOCKET_TIMEOUT_MIN\")) ? this.reconnect(\"retry\", Mg.TIMEOUT) : this.request(Nm.PING, void 0, !0).then(function () {\n          _this110.pingpongTimeoutCount = 0;\n          var e = Date.now() - t;\n          _this110.rttRolling.add(e), HE(\"REPORT_STATS\") && _this110.send(Nm.PING_BACK, {\n            pingpongElapse: e\n          });\n        }).catch(function (e) {});\n      }\n    }, {\n      key: \"handleInflateData\",\n      value: function handleInflateData() {\n        var _this$websocket$getIn = this.websocket.getInflateData(),\n          e = _this$websocket$getIn.inflateLength,\n          t = _this$websocket$getIn.deflateLength;\n        0 !== e && 0 !== t && this.upload(Dm.WS_INFLATE_DATA_LENGTH, {\n          ws_deflate_length: t,\n          ws_inflate_length: e\n        });\n      }\n    }, {\n      key: \"handleWebsocketEvents\",\n      value: function handleWebsocketEvents() {\n        var _this111 = this;\n        this.websocket.on(Ug.RECONNECT_WAITTING_FINISH, function (e) {\n          _this111.emit(wm.WS_RECONNECT_WAITTING_FINISH, e);\n        }), this.websocket.on(Ug.RECONNECT_CREATE_CONNECTION, function (e) {\n          _this111.emit(wm.WS_RECONNECT_CREATE_CONNECTION, e);\n        }), this.websocket.on(Ug.ON_MESSAGE, this.onWebsocketMessage), this.websocket.on(Ug.CLOSED, function () {\n          _this111.connectionState = bm.CLOSED;\n        }), this.websocket.on(Ug.FAILED, function () {\n          _this111._disconnectedReason = Cm.NETWORK_ERROR, _this111.connectionState = bm.CLOSED;\n        }), this.websocket.on(Ug.RECONNECTING, function (e) {\n          _this111._websocketReconnectReason = e, _this111.joinResponse = void 0, _this111.connectionState === bm.CONNECTED ? _this111.connectionState = bm.RECONNECTING : _this111.connectionState = bm.CONNECTING;\n        }), this.websocket.on(Ug.WILL_RECONNECT, function (e, t) {\n          if (WR(_this111, wm.IS_P2P_DISCONNECTED) && \"retry\" === e) return NE.debug(\"\".concat(_this111.clientId, \" reconnect mode is retry, but p2p lost, change to tryNext\")), _this111.reconnectToken = void 0, _this111.emit(wm.NEED_RENEW_SESSION), _this111.emit(wm.DISCONNECT_P2P), t(\"tryNext\");\n          \"retry\" !== e && (NE.debug(\"\".concat(_this111.clientId, \" websockt will_connect event, renewSession reconnectMode is \").concat(e)), _this111.reconnectToken = void 0, _this111.emit(wm.NEED_RENEW_SESSION), _this111.emit(wm.DISCONNECT_P2P)), t(e);\n        }), this.websocket.on(Ug.CONNECTED, function () {\n          _this111.openConnectionTime = Date.now(), _this111.reconnectToken ? _this111.rejoin().catch(function (e) {\n            NE.warning(\"[\".concat(_this111.clientId, \"] rejoin failed \").concat(e)), _this111.reconnect(\"tryNext\", Mg.SERVER_ERROR);\n          }) : _this111.join().catch(function (e) {\n            if (_this111.emit(wm.REPORT_JOIN_GATEWAY, e.message || e.code, _this111.url || \"\"), e instanceof vE && e.code === TE.UNEXPECTED_RESPONSE && e.data.code === Im.ERR_NO_AUTHORIZED) return NE.warning(\"[\".concat(_this111.clientId, \"] reconnect no authorized, recover\")), void _this111.reconnect(\"recover\", Mg.SERVER_ERROR);\n            NE.error(\"[\".concat(_this111.clientId, \"] join gateway request failed\"), e.toString()), _this111.spec.forceWaitGatewayResponse ? _this111.reconnect(\"tryNext\", Mg.SERVER_ERROR) : (_this111.initError = e, _this111.close());\n          });\n        }), this.websocket.on(Ug.REQUEST_NEW_URLS, function (e, t) {\n          FR(_this111, wm.REQUEST_RECOVER, _this111.multiIpOption).then(e).catch(t);\n        }), this.websocket.on(Ug.ON_TOKEN_PRIVILEGE_DID_EXPIRE, function () {\n          _this111.emit(Pm.ON_TOKEN_PRIVILEGE_DID_EXPIRE);\n        }), this.websocket.on(Ug.TO_CONNECT_DATACHANNEL, /*#__PURE__*/function () {\n          var _ref22 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee61(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee61$(_context61) {\n              while (1) switch (_context61.prev = _context61.next) {\n                case 0:\n                  return _context61.abrupt(\"return\", FR(_this111, wm.DATACHANNEL_PRECONNECT, e).then(t).catch(i));\n                case 1:\n                case \"end\":\n                  return _context61.stop();\n              }\n            }, _callee61);\n          }));\n          return function (_x79, _x80, _x81) {\n            return _ref22.apply(this, arguments);\n          };\n        }()), this.websocket.on(Ug.FAILBACK, function () {\n          void 0 !== _this111.openConnectionTime && _this111.emit(wm.DATACHANNEL_FAILBACK);\n        });\n      }\n    }]);\n    return uO;\n  }(gE);\n  function lO(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function hO(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? lO(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : lO(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var pO = new Map();\n  var _O = /*#__PURE__*/function (_gE22) {\n    _inherits(_O, _gE22);\n    _createClass(_O, [{\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        if (e === this._state) return;\n        var t = this._state;\n        this._state = e, \"DISCONNECTED\" === e && this._disconnectedReason ? this.emit(cg.CONNECTION_STATE_CHANGE, e, t, this._disconnectedReason) : this.emit(cg.CONNECTION_STATE_CHANGE, e, t);\n      }\n    }, {\n      key: \"joinGatewayStartTime\",\n      get: function get() {\n        return this._joinGatewayStartTime;\n      },\n      set: function set(e) {\n        NE.debug(\"[\".concat(this.store.clientId, \"] set joinGatewayStartTime at \").concat(e)), this._joinGatewayStartTime = e;\n      }\n    }]);\n    function _O(e, t) {\n      var _this112;\n      _classCallCheck(this, _O);\n      _this112 = _possibleConstructorReturn(this, _getPrototypeOf(_O).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"joinInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"key\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"signal\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"role\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"inChannelInfo\", {\n        joinAt: null,\n        duration: 0\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"spec\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_state\", \"DISCONNECTED\"), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_statsCollector\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_disconnectedReason\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"isSignalRecover\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"hasChangeBGPAddress\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"trafficStatsInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"networkQualityInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_joinGatewayStartTime\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_signalTimeout\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_clientRoleOptions\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this112)), \"_isProactiveJoin\", !1), _this112.store = e, _this112.spec = t;\n      var i = jg().supportDataChannel && HE(\"SIGNAL_CHANNEL\");\n      _this112.signal = i ? new uO(hO(hO({}, t), {}, {\n        retryConfig: t.websocketRetryConfig\n      }), e) : new tO(hO(hO({}, t), {}, {\n        retryConfig: t.websocketRetryConfig\n      }), e), _this112._statsCollector = t.statsCollector, _this112.role = t.role || \"audience\", _this112._clientRoleOptions = t.clientRoleOptions, _this112.handleSignalEvents();\n      return _this112;\n    }\n    _createClass(_O, [{\n      key: \"join\",\n      value: function () {\n        var _join3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee62(e, t, i) {\n          var _this113 = this;\n          var _t75, r, n, _t76, o, s, _t77, _r23, _n20;\n          return _regeneratorRuntime().wrap(function _callee62$(_context62) {\n            while (1) switch (_context62.prev = _context62.next) {\n              case 0:\n                if (this.signal instanceof uO) {\n                  _t75 = !1;\n                  \"disabled\" !== e.cloudProxyServer ? (NE.debug(\"[\".concat(this.store.clientId, \"] Dc is not supported, because cloudProxyServer are not supported (\").concat(e.cloudProxyServer, \")\")), _t75 = !0) : \"\".concat(e.apResponse.cid, \"_\").concat(e.apResponse.cert).length > 255 || \"\".concat(e.apResponse.cid, \"_\").concat(e.apResponse.cert).length < 22 ? (NE.debug(\"[\".concat(this.store.clientId, \"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255\")), _t75 = !0) : e.apResponse.addresses.some(function (e) {\n                    return e.fingerprint;\n                  }) || HE(\"FINGERPRINT\") || (NE.debug(\"[\".concat(this.store.clientId, \"] Dc is not supported, because fingerprint does not exist\")), _t75 = !0), _t75 && this.resetSignal();\n                }\n                this.store.joinGatewayStart(), \"disabled\" !== e.cloudProxyServer && (this.hasChangeBGPAddress = !0);\n                r = Date.now();\n                n = pO.get(e.cname);\n                if (!(n || (n = new Map(), pO.set(e.cname, n)), this._isProactiveJoin = !0, n.has(e.uid))) {\n                  _context62.next = 7;\n                  break;\n                }\n                _t76 = new vE(TE.UID_CONFLICT);\n                throw IT.joinGateway(e.sid, {\n                  lts: r,\n                  succ: !1,\n                  ec: _t76.message,\n                  addr: null,\n                  uid: e.uid,\n                  cid: e.cid,\n                  firstSuccess: this._isProactiveJoin,\n                  avoidJoinStartTime: this.store.avoidJoinStart,\n                  isProxy: !!e.proxyServer,\n                  signalChannel: this.signal instanceof uO ? \"1\" : \"0\"\n                }), this._isProactiveJoin = !1, _t76;\n              case 7:\n                n.set(e.uid, !0), this.joinInfo = e, this.key = t;\n                o = 0;\n                this.joinGatewayStartTime = r;\n                s = e.proxyServer;\n                _context62.prev = 11;\n                if (!(NE.debug(\"[\".concat(this.store.clientId, \"] use \").concat(this.signal instanceof uO ? \"datachannel\" : \"websocket\", \" join uid \").concat(o)), this.signal instanceof uO)) {\n                  _context62.next = 18;\n                  break;\n                }\n                _context62.next = 15;\n                return this.signal.init(e.apResponse.addresses, i);\n              case 15:\n                _t77 = _context62.sent;\n                _context62.next = 22;\n                break;\n              case 18:\n                _r23 = e.proxyServer, _n20 = _r23 ? e.gatewayAddrs.map(function (e) {\n                  var t = e.address.split(\":\");\n                  return \"wss://\".concat(_r23, \"/ws/?h=\").concat(t[0], \"&p=\").concat(t[1]);\n                }) : e.gatewayAddrs.map(function (e) {\n                  return \"wss://\".concat(e.address);\n                });\n                _context62.next = 21;\n                return this.signal.init(_n20, i);\n              case 21:\n                _t77 = _context62.sent;\n              case 22:\n                o = _t77.uid, NE.debug(\"[\".concat(this.store.clientId, \"] \").concat(this.signal instanceof uO ? \"datachannel\" : \"websocket\", \" join uid \").concat(o, \" cost \").concat(Date.now() - this.joinGatewayStartTime));\n                _context62.next = 32;\n                break;\n              case 25:\n                _context62.prev = 25;\n                _context62.t0 = _context62[\"catch\"](11);\n                if (!(_context62.t0 && _context62.t0.code === TE.INIT_WEBSOCKET_TIMEOUT)) {\n                  _context62.next = 29;\n                  break;\n                }\n                throw NE.warning(\"[\".concat(this.store.clientId, \"] User join failed\"), _context62.t0.toString()), _context62.t0;\n              case 29:\n                if (!(_context62.t0 && _context62.t0.code === TE.INIT_DATACHANNEL_TIMEOUT)) {\n                  _context62.next = 31;\n                  break;\n                }\n                throw NE.warning(\"[\".concat(this.store.clientId, \"] User join datachannel failed\"), _context62.t0.toString()), this.resetSignal(), _context62.t0;\n              case 31:\n                throw NE.error(\"[\".concat(this.store.clientId, \"] User join failed\"), _context62.t0.toString()), IT.joinGateway(e.sid, {\n                  lts: r,\n                  succ: !1,\n                  ec: _context62.t0.message,\n                  addr: this.signal.url,\n                  uid: e.uid,\n                  cid: e.cid,\n                  firstSuccess: this._isProactiveJoin,\n                  avoidJoinStartTime: this.store.avoidJoinStart,\n                  isProxy: !!s,\n                  signalChannel: this.signal instanceof uO ? \"1\" : \"0\"\n                }), this._isProactiveJoin = !1, n.delete(e.uid), this.signal.close(), _context62.t0;\n              case 32:\n                return _context62.abrupt(\"return\", (this.state = \"CONNECTED\", this.inChannelInfo.joinAt = Date.now(), NE.debug(\"[\".concat(this.store.clientId, \"] Connected to gateway server\")), this.trafficStatsInterval = window.setInterval(function () {\n                  _this113.updateTrafficStats().catch(function (e) {\n                    NE.warning(\"[\".concat(_this113.store.clientId, \"] get traffic stats error\"), e.toString());\n                  });\n                }, 3e3), this.networkQualityInterval = window.setInterval(function () {\n                  navigator && void 0 !== navigator.onLine && !navigator.onLine ? _this113.emit(cg.NETWORK_QUALITY, {\n                    downlinkNetworkQuality: 6,\n                    uplinkNetworkQuality: 6\n                  }) : _this113._signalTimeout ? _this113.emit(cg.NETWORK_QUALITY, {\n                    downlinkNetworkQuality: 5,\n                    uplinkNetworkQuality: 5\n                  }) : \"CONNECTED\" === _this113.state && _this113._statsCollector.trafficStats ? _this113.emit(cg.NETWORK_QUALITY, {\n                    uplinkNetworkQuality: CR(_this113._statsCollector.trafficStats.B_unq),\n                    downlinkNetworkQuality: CR(_this113._statsCollector.trafficStats.B_dnq)\n                  }) : _this113.emit(cg.NETWORK_QUALITY, {\n                    uplinkNetworkQuality: 0,\n                    downlinkNetworkQuality: 0\n                  });\n                }, 2e3), this.store.joinGatewayEnd(), o));\n              case 33:\n              case \"end\":\n                return _context62.stop();\n            }\n          }, _callee62, this, [[11, 25]]);\n        }));\n        function join(_x82, _x83, _x84) {\n          return _join3.apply(this, arguments);\n        }\n        return join;\n      }()\n    }, {\n      key: \"leave\",\n      value: function () {\n        var _leave = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee63() {\n          var e,\n            t,\n            _args63 = arguments;\n          return _regeneratorRuntime().wrap(function _callee63$(_context63) {\n            while (1) switch (_context63.prev = _context63.next) {\n              case 0:\n                e = _args63.length > 0 && void 0 !== _args63[0] && _args63[0], t = _args63.length > 1 ? _args63[1] : void 0;\n                if (!(\"DISCONNECTED\" !== this.state)) {\n                  _context63.next = 14;\n                  break;\n                }\n                t !== Cm.FALLBACK && (this.state = \"DISCONNECTING\");\n                _context63.prev = 3;\n                _context63.t0 = e || this.signal.connectionState !== bm.CONNECTED;\n                if (_context63.t0) {\n                  _context63.next = 8;\n                  break;\n                }\n                _context63.next = 8;\n                return function (e, t) {\n                  return t === 1 / 0 ? e : Cl.race([e, kR(t)]);\n                }(this.signal.request(Nm.LEAVE, void 0, !0), 3e3);\n              case 8:\n                _context63.next = 13;\n                break;\n              case 10:\n                _context63.prev = 10;\n                _context63.t1 = _context63[\"catch\"](3);\n                NE.warning(\"[\".concat(this.store.clientId, \"] leave request failed, ignore\"), _context63.t1);\n              case 13:\n                this.signal.close(t), t !== Cm.FALLBACK && (this.state = \"DISCONNECTED\"), this.reset();\n              case 14:\n              case \"end\":\n                return _context63.stop();\n            }\n          }, _callee63, this, [[3, 10]]);\n        }));\n        function leave() {\n          return _leave.apply(this, arguments);\n        }\n        return leave;\n      }()\n    }, {\n      key: \"publish\",\n      value: function () {\n        var _publish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee64(e, t, i) {\n          var r;\n          return _regeneratorRuntime().wrap(function _callee64$(_context64) {\n            while (1) switch (_context64.prev = _context64.next) {\n              case 0:\n                if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                  _context64.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not publish when connection state is \".concat(this.state));\n              case 2:\n                r = {\n                  state: \"offer\",\n                  p2p_id: this.store.p2pId,\n                  ortc: t,\n                  mode: this.spec.mode,\n                  extend: HE(\"PUB_EXTEND\"),\n                  tcc: !!HE(\"PUBLISH_TCC\")\n                };\n                _context64.prev = 3;\n                _context64.next = 6;\n                return this.signal.request(Nm.PUBLISH, r, !0);\n              case 6:\n                return _context64.abrupt(\"return\", _context64.sent._message);\n              case 9:\n                _context64.prev = 9;\n                _context64.t0 = _context64[\"catch\"](3);\n                if (!(i && _context64.t0.data && _context64.t0.data.code === Im.ERR_PUBLISH_REQUEST_INVALID)) {\n                  _context64.next = 16;\n                  break;\n                }\n                NE.warning(\"[\".concat(this.store.clientId, \"] receive publish error code, retry\"), _context64.t0.toString());\n                _context64.next = 15;\n                return this.tryUnpubBeforeRepub(e, t);\n              case 15:\n                return _context64.abrupt(\"return\", this.publish(e, t, !1));\n              case 16:\n                throw _context64.t0;\n              case 17:\n              case \"end\":\n                return _context64.stop();\n            }\n          }, _callee64, this, [[3, 9]]);\n        }));\n        function publish(_x85, _x86, _x87) {\n          return _publish.apply(this, arguments);\n        }\n        return publish;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee65(e, t) {\n          return _regeneratorRuntime().wrap(function _callee65$(_context65) {\n            while (1) switch (_context65.prev = _context65.next) {\n              case 0:\n                _context65.prev = 0;\n                if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                  _context65.next = 3;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not publish when connection state is \".concat(this.state));\n              case 3:\n                _context65.next = 5;\n                return this.signal.request(Nm.UNPUBLISH, {\n                  stream_id: t,\n                  ortc: e\n                }, !0);\n              case 5:\n                _context65.next = 10;\n                break;\n              case 7:\n                _context65.prev = 7;\n                _context65.t0 = _context65[\"catch\"](0);\n                NE.warning(\"unpublish warning: \", _context65.t0);\n              case 10:\n              case \"end\":\n                return _context65.stop();\n            }\n          }, _callee65, this, [[0, 7]]);\n        }));\n        function unpublish(_x88, _x89) {\n          return _unpublish.apply(this, arguments);\n        }\n        return unpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee66(e, t, i) {\n          var r;\n          return _regeneratorRuntime().wrap(function _callee66$(_context66) {\n            while (1) switch (_context66.prev = _context66.next) {\n              case 0:\n                if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                  _context66.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not subscribe when connection state is \".concat(this.state));\n              case 2:\n                r = {\n                  stream_id: e,\n                  stream_type: t.stream_type,\n                  mode: this.spec.mode,\n                  codec: this.spec.codec,\n                  p2p_id: this.store.p2pId,\n                  tcc: !!HE(\"SUBSCRIBE_TCC\"),\n                  extend: HE(\"SUB_EXTEND\"),\n                  ssrcId: t.ssrcId\n                };\n                _context66.prev = 3;\n                _context66.next = 6;\n                return this.signal.request(Nm.SUBSCRIBE, r, !0);\n              case 6:\n                return _context66.abrupt(\"return\", _context66.sent._message);\n              case 9:\n                _context66.prev = 9;\n                _context66.t0 = _context66[\"catch\"](3);\n                if (!(i && _context66.t0.data && _context66.t0.data.code === Im.ERR_SUBSCRIBE_REQUEST_INVALID)) {\n                  _context66.next = 18;\n                  break;\n                }\n                NE.warning(\"[\".concat(this.store.clientId, \"] receiver subscribe error code, retry\"), _context66.t0.toString());\n                _context66.next = 15;\n                return this.tryUnsubBeforeResub(e, t);\n              case 15:\n                _context66.next = 17;\n                return this.subscribe(e, t, !1);\n              case 17:\n                return _context66.abrupt(\"return\", _context66.sent);\n              case 18:\n                throw _context66.t0;\n              case 19:\n              case \"end\":\n                return _context66.stop();\n            }\n          }, _callee66, this, [[3, 9]]);\n        }));\n        function subscribe(_x90, _x91, _x92) {\n          return _subscribe.apply(this, arguments);\n        }\n        return subscribe;\n      }()\n    }, {\n      key: \"subscribeAll\",\n      value: function () {\n        var _subscribeAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee67(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee67$(_context67) {\n            while (1) switch (_context67.prev = _context67.next) {\n              case 0:\n                if (!(\"CONNECTED\" !== this.state && \"RECONNECTING\" !== this.state)) {\n                  _context67.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not massSubscribe when connection state is \".concat(this.state));\n              case 2:\n                i = {\n                  p2p_id: this.store.p2pId,\n                  users: e,\n                  dtx: !1\n                };\n                _context67.prev = 3;\n                _context67.next = 6;\n                return this.signal.request(Nm.SUBSCRIBE_STREAMS, i, !0);\n              case 6:\n                return _context67.abrupt(\"return\", _context67.sent);\n              case 9:\n                _context67.prev = 9;\n                _context67.t0 = _context67[\"catch\"](3);\n                if (!(t && _context67.t0.data && _context67.t0.data.code === Im.ERR_SUBSCRIBE_REQUEST_INVALID)) {\n                  _context67.next = 18;\n                  break;\n                }\n                NE.warning(\"[\".concat(this.store.clientId, \"] receiver massSubscribe error code, retry\"), _context67.t0.toString());\n                _context67.next = 15;\n                return this.tryMassUnsubBeforeResub(e);\n              case 15:\n                _context67.next = 17;\n                return this.subscribeAll(e, !1);\n              case 17:\n                return _context67.abrupt(\"return\", _context67.sent);\n              case 18:\n                throw _context67.t0;\n              case 19:\n              case \"end\":\n                return _context67.stop();\n            }\n          }, _callee67, this, [[3, 9]]);\n        }));\n        function subscribeAll(_x93, _x94) {\n          return _subscribeAll.apply(this, arguments);\n        }\n        return subscribeAll;\n      }()\n    }, {\n      key: \"setVideoProfile\",\n      value: function () {\n        var _setVideoProfile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee68(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee68$(_context68) {\n            while (1) switch (_context68.prev = _context68.next) {\n              case 0:\n                t = function (e) {\n                  if (!(e.bitrateMax && e.bitrateMin && e.frameRate && e.height && e.width)) return;\n                  var t = e.frameRate,\n                    i = e.width,\n                    r = e.height,\n                    n = !0;\n                  return \"number\" != typeof t && (t = t.exact || t.ideal || t.max || t.min || 0, t || (n = !1)), \"number\" != typeof i && (i = i.exact || i.ideal || i.max || i.min || 0, i || (n = !1)), \"number\" != typeof r && (r = r.exact || r.ideal || r.max || r.min || 0, t || (n = !1)), n ? {\n                    stream_type: 0,\n                    width: i,\n                    height: r,\n                    fps: t,\n                    start_bps: 1e3 * e.bitrateMax,\n                    min_bps: 1e3 * e.bitrateMin,\n                    target_bps: 1e3 * e.bitrateMax\n                  } : void 0;\n                }(e);\n                if (!t) {\n                  _context68.next = 3;\n                  break;\n                }\n                return _context68.abrupt(\"return\", this.signal.request(Nm.SET_VIDEO_PROFILE, t));\n              case 3:\n                NE.debug(\"[\".concat(this.store.clientId, \"] encoder config is not complete, do not report to gateway\"));\n              case 4:\n              case \"end\":\n                return _context68.stop();\n            }\n          }, _callee68, this);\n        }));\n        function setVideoProfile(_x95) {\n          return _setVideoProfile.apply(this, arguments);\n        }\n        return setVideoProfile;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee69(e, t) {\n          return _regeneratorRuntime().wrap(function _callee69$(_context69) {\n            while (1) switch (_context69.prev = _context69.next) {\n              case 0:\n                _context69.prev = 0;\n                _context69.next = 3;\n                return this.signal.request(Nm.UNSUBSCRIBE, {\n                  p2p_id: this.store.p2pId,\n                  ortc: e,\n                  stream_id: t\n                }, !0);\n              case 3:\n                _context69.next = 8;\n                break;\n              case 5:\n                _context69.prev = 5;\n                _context69.t0 = _context69[\"catch\"](0);\n                NE.warning(\"unsubscribe warning: \", _context69.t0);\n              case 8:\n              case \"end\":\n                return _context69.stop();\n            }\n          }, _callee69, this, [[0, 5]]);\n        }));\n        function unsubscribe(_x96, _x97) {\n          return _unsubscribe.apply(this, arguments);\n        }\n        return unsubscribe;\n      }()\n    }, {\n      key: \"massUnsubscribe\",\n      value: function () {\n        var _massUnsubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee70(e) {\n          return _regeneratorRuntime().wrap(function _callee70$(_context70) {\n            while (1) switch (_context70.prev = _context70.next) {\n              case 0:\n                _context70.prev = 0;\n                _context70.next = 3;\n                return this.signal.request(Nm.UNSUBSCRIBE_STREAMS, e, !0);\n              case 3:\n                _context70.next = 8;\n                break;\n              case 5:\n                _context70.prev = 5;\n                _context70.t0 = _context70[\"catch\"](0);\n                NE.warning(\"unsubscribeAll warning: \", _context70.t0);\n              case 8:\n              case \"end\":\n                return _context70.stop();\n            }\n          }, _callee70, this, [[0, 5]]);\n        }));\n        function massUnsubscribe(_x98) {\n          return _massUnsubscribe.apply(this, arguments);\n        }\n        return massUnsubscribe;\n      }()\n    }, {\n      key: \"reconnectPC\",\n      value: function () {\n        var _reconnectPC = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee71(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee71$(_context71) {\n            while (1) switch (_context71.prev = _context71.next) {\n              case 0:\n                t = e.iceParameters, i = e.dtlsParameters, r = e.rtpCapabilities;\n                _context71.next = 3;\n                return this.signal.request(Nm.CONNECT_PC, {\n                  p2p_id: this.store.p2pId,\n                  stream_id: this.store.uid,\n                  ortc: {\n                    iceParameters: t,\n                    dtlsParameters: i,\n                    rtpCapabilities: r\n                  }\n                }, !0);\n              case 3:\n                _context71.t0 = _context71.sent;\n                _context71.t1 = this.getCurrentGatewayAddress();\n                return _context71.abrupt(\"return\", {\n                  gatewayEstablishParams: _context71.t0,\n                  gatewayAddress: _context71.t1\n                });\n              case 6:\n              case \"end\":\n                return _context71.stop();\n            }\n          }, _callee71, this);\n        }));\n        function reconnectPC(_x99) {\n          return _reconnectPC.apply(this, arguments);\n        }\n        return reconnectPC;\n      }()\n    }, {\n      key: \"getGatewayInfo\",\n      value: function getGatewayInfo() {\n        return this.signal.request(Nm.GATEWAY_INFO);\n      }\n    }, {\n      key: \"renewToken\",\n      value: function renewToken(e) {\n        return this.signal.request(Nm.RENEW_TOKEN, e);\n      }\n    }, {\n      key: \"setClientRole\",\n      value: function () {\n        var _setClientRole = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee72(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee72$(_context72) {\n            while (1) switch (_context72.prev = _context72.next) {\n              case 0:\n                if (!(t && (this._clientRoleOptions = Object.assign({}, t)), \"CONNECTED\" !== this.state)) {\n                  _context72.next = 2;\n                  break;\n                }\n                return _context72.abrupt(\"return\", void (this.role = e));\n              case 2:\n                i = void 0;\n                i = \"audience\" === e ? this._clientRoleOptions && this._clientRoleOptions.level ? this._clientRoleOptions.level : 2 : 0;\n                _context72.next = 6;\n                return this.signal.request(Nm.SET_CLIENT_ROLE, {\n                  role: e,\n                  level: i,\n                  client_ts: Date.now()\n                });\n              case 6:\n                this.role = e;\n              case 7:\n              case \"end\":\n                return _context72.stop();\n            }\n          }, _callee72, this);\n        }));\n        function setClientRole(_x100, _x101) {\n          return _setClientRole.apply(this, arguments);\n        }\n        return setClientRole;\n      }()\n    }, {\n      key: \"setRemoteVideoStreamType\",\n      value: function () {\n        var _setRemoteVideoStreamType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee73(e, t) {\n          return _regeneratorRuntime().wrap(function _callee73$(_context73) {\n            while (1) switch (_context73.prev = _context73.next) {\n              case 0:\n                _context73.next = 2;\n                return this.signal.request(Nm.SWITCH_VIDEO_STREAM, {\n                  stream_id: e,\n                  stream_type: t\n                });\n              case 2:\n              case \"end\":\n                return _context73.stop();\n            }\n          }, _callee73, this);\n        }));\n        function setRemoteVideoStreamType(_x102, _x103) {\n          return _setRemoteVideoStreamType.apply(this, arguments);\n        }\n        return setRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setDefaultRemoteVideoStreamType\",\n      value: function () {\n        var _setDefaultRemoteVideoStreamType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee74(e) {\n          return _regeneratorRuntime().wrap(function _callee74$(_context74) {\n            while (1) switch (_context74.prev = _context74.next) {\n              case 0:\n                _context74.next = 2;\n                return this.signal.request(Nm.DEFAULT_VIDEO_STREAM, {\n                  stream_type: e\n                });\n              case 2:\n              case \"end\":\n                return _context74.stop();\n            }\n          }, _callee74, this);\n        }));\n        function setDefaultRemoteVideoStreamType(_x104) {\n          return _setDefaultRemoteVideoStreamType.apply(this, arguments);\n        }\n        return setDefaultRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setStreamFallbackOption\",\n      value: function () {\n        var _setStreamFallbackOption = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee75(e, t) {\n          return _regeneratorRuntime().wrap(function _callee75$(_context75) {\n            while (1) switch (_context75.prev = _context75.next) {\n              case 0:\n                _context75.next = 2;\n                return this.signal.request(Nm.SET_FALLBACK_OPTION, {\n                  stream_id: e,\n                  fallback_type: t\n                });\n              case 2:\n              case \"end\":\n                return _context75.stop();\n            }\n          }, _callee75, this);\n        }));\n        function setStreamFallbackOption(_x105, _x106) {\n          return _setStreamFallbackOption.apply(this, arguments);\n        }\n        return setStreamFallbackOption;\n      }()\n    }, {\n      key: \"pickSVCLayer\",\n      value: function () {\n        var _pickSVCLayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee76(e, t) {\n          return _regeneratorRuntime().wrap(function _callee76$(_context76) {\n            while (1) switch (_context76.prev = _context76.next) {\n              case 0:\n                _context76.next = 2;\n                return this.signal.request(Nm.PICK_SVC_LAYER, {\n                  stream_id: e,\n                  spatial_layer: t.spatialLayer,\n                  temporal_layer: t.temporalLayer\n                });\n              case 2:\n              case \"end\":\n                return _context76.stop();\n            }\n          }, _callee76, this);\n        }));\n        function pickSVCLayer(_x107, _x108) {\n          return _pickSVCLayer.apply(this, arguments);\n        }\n        return pickSVCLayer;\n      }()\n    }, {\n      key: \"getInChannelInfo\",\n      value: function getInChannelInfo() {\n        return this.inChannelInfo.joinAt && (this.inChannelInfo.duration = Date.now() - this.inChannelInfo.joinAt), hO({}, this.inChannelInfo);\n      }\n    }, {\n      key: \"getGatewayVersion\",\n      value: function () {\n        var _getGatewayVersion = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee77() {\n          return _regeneratorRuntime().wrap(function _callee77$(_context77) {\n            while (1) switch (_context77.prev = _context77.next) {\n              case 0:\n                _context77.next = 2;\n                return this.signal.request(Nm.GATEWAY_INFO);\n              case 2:\n                return _context77.abrupt(\"return\", _context77.sent.version);\n              case 3:\n              case \"end\":\n                return _context77.stop();\n            }\n          }, _callee77, this);\n        }));\n        function getGatewayVersion() {\n          return _getGatewayVersion.apply(this, arguments);\n        }\n        return getGatewayVersion;\n      }()\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        if (this.inChannelInfo.joinAt && (this.inChannelInfo.duration = Date.now() - this.inChannelInfo.joinAt, this.inChannelInfo.joinAt = null), this.trafficStatsInterval && (window.clearInterval(this.trafficStatsInterval), this.trafficStatsInterval = void 0), this.joinInfo) {\n          var _e57 = pO.get(this.joinInfo.cname);\n          _e57 && _e57.delete(this.joinInfo.uid);\n        }\n        this.joinInfo = void 0, this.key = void 0, this.networkQualityInterval && (window.clearInterval(this.networkQualityInterval), this.networkQualityInterval = void 0);\n      }\n    }, {\n      key: \"updateTurnConfigFromSignal\",\n      value: function updateTurnConfigFromSignal() {\n        if (!this.joinInfo) return;\n        var e = function (e) {\n          var t;\n          return t = e.startsWith(\"dc\") ? e.match(/(dc\\:\\/\\/)?([^:]+):(\\d+)/) : e.match(/(wss\\:\\/\\/)?([^:]+):(\\d+)/), t ? {\n            username: kE.username,\n            password: kE.password,\n            turnServerURL: t[2],\n            tcpport: parseInt(t[3]) + 30,\n            udpport: parseInt(t[3]) + 30,\n            forceturn: !1\n          } : null;\n        }((\"disabled\" === this.joinInfo.cloudProxyServer ? this.signal.url : this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address) || \"\");\n        this.joinInfo.turnServer.serversFromGateway = [], e && \"off\" !== this.joinInfo.turnServer.mode && \"disabled\" === this.joinInfo.cloudProxyServer && this.joinInfo.turnServer.serversFromGateway.push(hO(hO({}, kE), {}, {\n          turnServerURL: e.turnServerURL,\n          tcpport: e.tcpport,\n          udpport: e.udpport,\n          username: this.joinInfo.uid.toString(),\n          password: this.joinInfo.token\n        }));\n      }\n    }, {\n      key: \"updateTrafficStats\",\n      value: function () {\n        var _updateTrafficStats = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee78() {\n          var _this114 = this;\n          var e;\n          return _regeneratorRuntime().wrap(function _callee78$(_context78) {\n            while (1) switch (_context78.prev = _context78.next) {\n              case 0:\n                if (!(\"CONNECTED\" !== this.state)) {\n                  _context78.next = 2;\n                  break;\n                }\n                return _context78.abrupt(\"return\");\n              case 2:\n                _context78.next = 4;\n                return this.signal.request(Nm.TRAFFIC_STATS, void 0, !0);\n              case 4:\n                e = _context78.sent;\n                e.timestamp = Date.now(), e.peer_delay.forEach(function (e) {\n                  var t = _this114._statsCollector.trafficStats && _this114._statsCollector.trafficStats.peer_delay.find(function (t) {\n                    return t.peer_uid === e.peer_uid;\n                  });\n                  t && t.B_st !== e.B_st && YR(function () {\n                    _this114.emit(cg.STREAM_TYPE_CHANGE, e.peer_uid, e.B_st);\n                  });\n                }), this._statsCollector.updateTrafficStats(e);\n              case 6:\n              case \"end\":\n                return _context78.stop();\n            }\n          }, _callee78, this);\n        }));\n        function updateTrafficStats() {\n          return _updateTrafficStats.apply(this, arguments);\n        }\n        return updateTrafficStats;\n      }()\n    }, {\n      key: \"getJoinMessage\",\n      value: function getJoinMessage(e) {\n        if (!this.joinInfo || !this.key) throw new vE(TE.UNEXPECTED_ERROR, \"can not generate join message, no join info\");\n        var t = Object.assign({}, this.joinInfo.apResponse);\n        var i = HE(\"REPORT_APP_SCENARIO\");\n        if (\"string\" != typeof i) try {\n          i = JSON.stringify(i);\n        } catch (e) {\n          i = void 0;\n        }\n        i && i.length > 128 && (i = void 0);\n        var r = hO({\n          license: this.joinInfo.license,\n          p2p_id: this.store.p2pId,\n          session_id: this.joinInfo.sid,\n          app_id: this.joinInfo.appId,\n          channel_key: this.key,\n          channel_name: this.joinInfo.cname,\n          sdk_version: PE,\n          browser: navigator.userAgent,\n          process_id: HE(\"PROCESS_ID\"),\n          mode: this.spec.mode,\n          codec: this.spec.codec,\n          role: this.role,\n          has_changed_gateway: this.hasChangeBGPAddress,\n          ap_response: t,\n          extend: HE(\"JOIN_EXTEND\"),\n          details: {\n            6: this.joinInfo.stringUid,\n            cservice_map: \"proxy3\" === this.joinInfo.cloudProxyServer ? \"1\" : \"proxy5\" === this.joinInfo.cloudProxyServer ? \"2\" : void 0\n          },\n          features: {\n            rejoin: !0\n          },\n          optionalInfo: this.joinInfo.optionalInfo,\n          appScenario: i,\n          attributes: {\n            userAttributes: {\n              enablePublishedUserList: HE(\"ENABLE_PUBLISHED_USER_LIST\"),\n              maxSubscription: HE(\"MAX_SUBSCRIPTION\"),\n              subscribeAudioFilterTopN: \"number\" == typeof HE(\"SUBSCRIBE_AUDIO_FILTER_TOPN\") ? HE(\"SUBSCRIBE_AUDIO_FILTER_TOPN\") : void 0,\n              enablePublishAudioFilter: \"boolean\" == typeof HE(\"ENABLE_PUBLISH_AUDIO_FILTER\") ? HE(\"ENABLE_PUBLISH_AUDIO_FILTER\") : void 0,\n              enableUserLicenseCheck: \"boolean\" == typeof HE(\"ENABLE_USER_LICENSE_CHECK\") ? HE(\"ENABLE_USER_LICENSE_CHECK\") : void 0\n            }\n          },\n          join_ts: this.joinGatewayStartTime\n        }, e);\n        return this.joinInfo.stringUid && (r.string_uid = this.joinInfo.stringUid), this.joinInfo.aesmode && this.joinInfo.aespassword && (r.aes_mode = this.joinInfo.aesmode, HE(\"ENCRYPT_AES\") ? (r.aes_secret = this.joinInfo.aespassword, r.aes_encrypt = !0) : r.aes_secret = this.joinInfo.aespassword, this.joinInfo.aessalt && (r.aes_salt = this.joinInfo.aessalt)), t.addresses[this.signal.websocket.currentURLIndex] && (r.ap_response.ticket = t.addresses[this.signal.websocket.currentURLIndex].ticket, delete t.addresses), void 0 !== this.joinInfo.defaultVideoStream && (r.default_video_stream = this.joinInfo.defaultVideoStream), r;\n      }\n    }, {\n      key: \"getRejoinMessage\",\n      value: function getRejoinMessage() {\n        if (!this.joinInfo) throw new vE(TE.UNEXPECTED_ERROR, \"can not generate rejoin message, no join info\");\n        return {\n          session_id: this.joinInfo.sid,\n          channel_name: this.joinInfo.cname,\n          cid: this.joinInfo.cid,\n          uid: this.joinInfo.uid,\n          vid: Number(this.joinInfo.vid)\n        };\n      }\n    }, {\n      key: \"handleSignalEvents\",\n      value: function handleSignalEvents() {\n        var _this115 = this;\n        this.signal.on(wm.WS_RECONNECT_WAITTING_FINISH, function (e) {\n          [\"tryNext\", \"recover\"].includes(e) && _this115.joinInfo && IT.adjustSessionStartTime(_this115.joinInfo.sid);\n        }), this.signal.on(wm.WS_RECONNECT_CREATE_CONNECTION, function (e) {\n          _this115.joinGatewayStartTime = Date.now();\n        }), this.signal.on(wm.WS_RECONNECTING, function (e) {\n          _this115.joinInfo && IT.WebSocketQuit(_this115.joinInfo.sid, {\n            lts: Date.now(),\n            succ: -1,\n            cname: _this115.joinInfo.cname,\n            uid: _this115.joinInfo.uid,\n            cid: _this115.joinInfo.cid,\n            errorCode: e || Om.NETWORK_ERROR\n          }), _this115.joinInfo && (_this115.state = \"RECONNECTING\", IT.sessionInit(_this115.joinInfo.sid, {\n            lts: new Date().getTime(),\n            extend: _this115.isSignalRecover ? {\n              recover: !0\n            } : {\n              rejoin: !0\n            },\n            cname: _this115.joinInfo.cname,\n            appid: _this115.joinInfo.appId,\n            mode: _this115.spec.mode\n          }), _this115.isSignalRecover = !1, _this115.joinGatewayStartTime = Date.now());\n        }), this.signal.on(wm.WS_CLOSED, function (e) {\n          var t;\n          switch (e) {\n            case Cm.LEAVE:\n              t = Om.LEAVE;\n              break;\n            case Cm.UID_BANNED:\n            case Cm.IP_BANNED:\n            case Cm.CHANNEL_BANNED:\n            case Cm.SERVER_ERROR:\n              t = Om.SERVER_ERROR;\n              break;\n            case Cm.FALLBACK:\n              t = Om.FALLBACK;\n              break;\n            case Cm.LICENSE_MISSING:\n            case Cm.LICENSE_EXPIRED:\n            case Cm.LICENSE_MINUTES_EXCEEDED:\n            case Cm.LICENSE_PERIOD_INVALID:\n            case Cm.LICENSE_MULTIPLE_SDK_SERVICE:\n            case Cm.LICENSE_ILLEGAL:\n              t = e;\n              break;\n            default:\n              t = Om.NETWORK_ERROR;\n          }\n          NE.debug(\"[signal] websocket closed, reason: \".concat(t || \"undefined -> \" + Om.NETWORK_ERROR)), _this115.joinInfo && IT.WebSocketQuit(_this115.joinInfo.sid, {\n            lts: Date.now(),\n            succ: e === Cm.LEAVE ? 1 : -1,\n            cname: _this115.joinInfo.cname,\n            uid: _this115.joinInfo.uid,\n            cid: _this115.joinInfo.cid,\n            errorCode: t\n          }), _this115._disconnectedReason = e, e !== Cm.FALLBACK && (_this115.state = \"DISCONNECTED\"), _this115.reset();\n        }), this.signal.on(wm.WS_CONNECTED, function () {\n          if (_this115.updateTurnConfigFromSignal(), _this115.state = \"CONNECTED\", _this115.joinInfo && (\"audience\" === _this115.role && _this115._clientRoleOptions && _this115._clientRoleOptions.level && (NE.debug(\"[\".concat(_this115.store.clientId, \"] patch to send set client role, role: \").concat(_this115.role, \", mode: \").concat(_this115.spec.mode, \", level: \").concat(_this115._clientRoleOptions && _this115._clientRoleOptions.level)), _this115.setClientRole(_this115.role, _this115._clientRoleOptions)), IT.joinGateway(_this115.joinInfo.sid, {\n            lts: _this115.joinGatewayStartTime,\n            succ: !0,\n            ec: null,\n            vid: _this115.joinInfo.vid,\n            addr: _this115.signal.url,\n            uid: _this115.joinInfo.uid,\n            cid: _this115.joinInfo.cid,\n            firstSuccess: _this115._isProactiveJoin,\n            avoidJoinStartTime: _this115.store.avoidJoinStart,\n            isProxy: !!_this115.joinInfo.proxyServer,\n            signalChannel: _this115.signal instanceof uO ? \"1\" : \"0\"\n          }), _this115._isProactiveJoin = !1, _this115.joinInfo.useLocalAccessPoint && 1 === _this115.joinInfo.setLocalAPVersion)) {\n            var _e58 = _this115.signal.url && _this115.signal.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/);\n            if (!_e58) return void NE.error(\"[\".concat(_this115.store.clientId, \"] set local access point after joined failed: \").concat(_e58));\n            WE(\"EVENT_REPORT_DOMAIN\", _e58[1]), WE(\"EVENT_REPORT_BACKUP_DOMAIN\", _e58[1]), WE(\"LOG_UPLOAD_SERVER\", \"\".concat(_e58[1], \":6444\"));\n          }\n        }), this.signal.on(Pm.ON_UPLINK_STATS, function (e) {\n          _this115._statsCollector.updateUplinkStats(e);\n        }), this.signal.on(wm.REQUEST_RECOVER, function (e, t, i) {\n          if (!_this115.joinInfo) return i(new vE(TE.UNEXPECTED_ERROR, \"gateway: can not recover, no join info\"));\n          e && (_this115.joinInfo.multiIP = e, _this115.hasChangeBGPAddress = !0), _this115.isSignalRecover = !0, FR(_this115, cg.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i);\n        }), this.signal.on(wm.REQUEST_JOIN_INFO, /*#__PURE__*/function () {\n          var _ref23 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee79(e) {\n            var t, _yield$FR, i, r, n;\n            return _regeneratorRuntime().wrap(function _callee79$(_context79) {\n              while (1) switch (_context79.prev = _context79.next) {\n                case 0:\n                  _this115.updateTurnConfigFromSignal();\n                  _context79.next = 3;\n                  return FR(_this115, cg.REQUEST_P2P_CONNECTION_PARAMS, {\n                    turnServer: null === (t = _this115.joinInfo) || void 0 === t ? void 0 : t.turnServer\n                  });\n                case 3:\n                  _yield$FR = _context79.sent;\n                  i = _yield$FR.iceParameters;\n                  r = _yield$FR.dtlsParameters;\n                  n = _yield$FR.rtpCapabilities;\n                  e(_this115.getJoinMessage({\n                    ortc: {\n                      iceParameters: i,\n                      dtlsParameters: r,\n                      rtpCapabilities: n,\n                      version: \"2\"\n                    }\n                  }));\n                case 8:\n                case \"end\":\n                  return _context79.stop();\n              }\n            }, _callee79);\n          }));\n          return function (_x109) {\n            return _ref23.apply(this, arguments);\n          };\n        }()), this.signal.on(wm.REQUEST_REJOIN_INFO, function (e) {\n          e(_this115.getRejoinMessage());\n        }), this.signal.on(wm.REPORT_JOIN_GATEWAY, function (e, t) {\n          _this115.joinInfo && (IT.joinGateway(_this115.joinInfo.sid, {\n            lts: _this115.joinGatewayStartTime,\n            succ: !1,\n            ec: e,\n            addr: t,\n            uid: _this115.joinInfo.uid,\n            cid: _this115.joinInfo.cid,\n            firstSuccess: _this115._isProactiveJoin,\n            avoidJoinStartTime: _this115.store.avoidJoinStart,\n            isProxy: !!_this115.joinInfo.proxyServer,\n            signalChannel: _this115.signal instanceof uO ? \"1\" : \"0\"\n          }), _this115._isProactiveJoin = !1);\n        }), this.signal.on(wm.IS_P2P_DISCONNECTED, function (e) {\n          e(WR(_this115, cg.IS_P2P_DISCONNECTED));\n        }), this.signal.on(wm.DISCONNECT_P2P, function () {\n          _this115.emit(cg.DISCONNECT_P2P);\n        }), this.signal.on(wm.NEED_RENEW_SESSION, function () {\n          _this115.emit(cg.NEED_RENEW_SESSION);\n        }), this.signal.on(wm.REQUEST_SUCCESS, function () {\n          _this115._signalTimeout = !1;\n        }), this.signal.on(wm.REQUEST_TIMEOUT, function () {\n          _this115._signalTimeout = !0;\n        }), this.signal.on(wm.JOIN_RESPONSE, function (e) {\n          var t = _this115.getCurrentGatewayAddress();\n          _this115.emit(cg.JOIN_RESPONSE, e, t);\n        }), this.signal.on(wm.DATACHANNEL_PRECONNECT, /*#__PURE__*/function () {\n          var _ref24 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee80(e, t, i) {\n            var r;\n            return _regeneratorRuntime().wrap(function _callee80$(_context80) {\n              while (1) switch (_context80.prev = _context80.next) {\n                case 0:\n                  _this115.updateTurnConfigFromSignal();\n                  r = _this115.getCurrentGatewayAddress();\n                  return _context80.abrupt(\"return\", FR(_this115, cg.DATACHANNEL_PRECONNECT, e, r).then(t).catch(i));\n                case 3:\n                case \"end\":\n                  return _context80.stop();\n              }\n            }, _callee80);\n          }));\n          return function (_x110, _x111, _x112) {\n            return _ref24.apply(this, arguments);\n          };\n        }()), this.signal.on(wm.DATACHANNEL_CONNECTING, /*#__PURE__*/function () {\n          var _ref25 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee81(e) {\n            var _yield$FR2, t, i, r;\n            return _regeneratorRuntime().wrap(function _callee81$(_context81) {\n              while (1) switch (_context81.prev = _context81.next) {\n                case 0:\n                  _context81.next = 2;\n                  return FR(_this115, cg.REQUEST_DC_CONNECTION_PARAMS);\n                case 2:\n                  _yield$FR2 = _context81.sent;\n                  t = _yield$FR2.iceParameters;\n                  i = _yield$FR2.dtlsParameters;\n                  r = _yield$FR2.rtpCapabilities;\n                  e(_this115.getJoinMessage({\n                    ortc: {\n                      iceParameters: t,\n                      dtlsParameters: i,\n                      rtpCapabilities: r,\n                      version: \"2\"\n                    }\n                  }));\n                case 7:\n                case \"end\":\n                  return _context81.stop();\n              }\n            }, _callee81);\n          }));\n          return function (_x113) {\n            return _ref25.apply(this, arguments);\n          };\n        }()), this.signal.on(wm.DATACHANNEL_FAILBACK, function () {\n          NE.warning(\"[\".concat(_this115.store.clientId, \"] User join datachannel failed\")), _this115.reset(), _this115.resetSignal(), _this115.emit(cg.DATACHANNEL_FAILBACK);\n        });\n      }\n    }, {\n      key: \"tryUnsubBeforeResub\",\n      value: function () {\n        var _tryUnsubBeforeResub = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee82(e, t) {\n          return _regeneratorRuntime().wrap(function _callee82$(_context82) {\n            while (1) switch (_context82.prev = _context82.next) {\n              case 0:\n                _context82.prev = 0;\n                _context82.next = 3;\n                return this.signal.request(Nm.UNSUBSCRIBE, {\n                  p2p_id: this.store.p2pId,\n                  stream_id: e,\n                  ortc: [t]\n                }, !0);\n              case 3:\n                _context82.next = 8;\n                break;\n              case 5:\n                _context82.prev = 5;\n                _context82.t0 = _context82[\"catch\"](0);\n                throw NE.warning(\"unsubscribe warning\", _context82.t0), _context82.t0;\n              case 8:\n              case \"end\":\n                return _context82.stop();\n            }\n          }, _callee82, this, [[0, 5]]);\n        }));\n        function tryUnsubBeforeResub(_x114, _x115) {\n          return _tryUnsubBeforeResub.apply(this, arguments);\n        }\n        return tryUnsubBeforeResub;\n      }()\n    }, {\n      key: \"tryUnpubBeforeRepub\",\n      value: function () {\n        var _tryUnpubBeforeRepub = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee83(e, t) {\n          return _regeneratorRuntime().wrap(function _callee83$(_context83) {\n            while (1) switch (_context83.prev = _context83.next) {\n              case 0:\n                _context83.prev = 0;\n                _context83.next = 3;\n                return this.signal.request(Nm.UNPUBLISH, {\n                  stream_id: e,\n                  ortc: t\n                }, !0);\n              case 3:\n                _context83.next = 8;\n                break;\n              case 5:\n                _context83.prev = 5;\n                _context83.t0 = _context83[\"catch\"](0);\n                throw NE.warning(\"unpublish warning: \", _context83.t0), _context83.t0;\n              case 8:\n              case \"end\":\n                return _context83.stop();\n            }\n          }, _callee83, this, [[0, 5]]);\n        }));\n        function tryUnpubBeforeRepub(_x116, _x117) {\n          return _tryUnpubBeforeRepub.apply(this, arguments);\n        }\n        return tryUnpubBeforeRepub;\n      }()\n    }, {\n      key: \"tryMassUnsubBeforeResub\",\n      value: function () {\n        var _tryMassUnsubBeforeResub = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee84(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee84$(_context84) {\n            while (1) switch (_context84.prev = _context84.next) {\n              case 0:\n                t = {\n                  users: e.map(function (e) {\n                    return {\n                      stream_id: e.stream_id,\n                      stream_type: e.stream_type\n                    };\n                  })\n                };\n                _context84.prev = 1;\n                _context84.next = 4;\n                return this.signal.request(Nm.UNSUBSCRIBE_STREAMS, t, !0);\n              case 4:\n                _context84.next = 9;\n                break;\n              case 6:\n                _context84.prev = 6;\n                _context84.t0 = _context84[\"catch\"](1);\n                throw NE.warning(\"massUnsubscribe warning\", _context84.t0), _context84.t0;\n              case 9:\n              case \"end\":\n                return _context84.stop();\n            }\n          }, _callee84, this, [[1, 6]]);\n        }));\n        function tryMassUnsubBeforeResub(_x118) {\n          return _tryMassUnsubBeforeResub.apply(this, arguments);\n        }\n        return tryMassUnsubBeforeResub;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee85(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee85$(_context85) {\n            while (1) switch (_context85.prev = _context85.next) {\n              case 0:\n                i = {\n                  action: e.find(function (e) {\n                    return e.stream_type === ag.Audio;\n                  }) ? \"mute_local_audio\" : \"mute_local_video\",\n                  p2p_id: this.store.p2pId,\n                  ortc: e,\n                  stream_id: t\n                };\n                _context85.prev = 1;\n                _context85.next = 4;\n                return this.signal.request(Nm.CONTROL, i, !0, !0);\n              case 4:\n                _context85.next = 9;\n                break;\n              case 6:\n                _context85.prev = 6;\n                _context85.t0 = _context85[\"catch\"](1);\n                throw NE.warning(\"gateway unmuteLocal warning: \", _context85.t0), _context85.t0;\n              case 9:\n              case \"end\":\n                return _context85.stop();\n            }\n          }, _callee85, this, [[1, 6]]);\n        }));\n        function muteLocal(_x119, _x120) {\n          return _muteLocal.apply(this, arguments);\n        }\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee86(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee86$(_context86) {\n            while (1) switch (_context86.prev = _context86.next) {\n              case 0:\n                i = {\n                  action: e.find(function (e) {\n                    return e.stream_type === ag.Audio;\n                  }) ? \"unmute_local_audio\" : \"unmute_local_video\",\n                  p2p_id: this.store.p2pId,\n                  ortc: e,\n                  stream_id: t\n                };\n                _context86.prev = 1;\n                _context86.next = 4;\n                return this.signal.request(Nm.CONTROL, i, !0, !0);\n              case 4:\n                _context86.next = 9;\n                break;\n              case 6:\n                _context86.prev = 6;\n                _context86.t0 = _context86[\"catch\"](1);\n                throw NE.warning(\"gateway muteLocal warning: \", _context86.t0), _context86.t0;\n              case 9:\n              case \"end\":\n                return _context86.stop();\n            }\n          }, _callee86, this, [[1, 6]]);\n        }));\n        function unmuteLocal(_x121, _x122) {\n          return _unmuteLocal.apply(this, arguments);\n        }\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"uploadStats\",\n      value: function uploadStats(e, t) {\n        this.signal.upload(e, t);\n      }\n    }, {\n      key: \"getSignalRTT\",\n      value: function getSignalRTT() {\n        return this.signal.rtt;\n      }\n    }, {\n      key: \"restartICE\",\n      value: function () {\n        var _restartICE = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee87(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee87$(_context87) {\n            while (1) switch (_context87.prev = _context87.next) {\n              case 0:\n                t = {\n                  p2p_id: this.store.p2pId,\n                  stream_id: this.store.uid,\n                  ortc: e\n                };\n                _context87.prev = 1;\n                _context87.next = 4;\n                return this.signal.request(Nm.RESTART_ICE, t, !0);\n              case 4:\n                return _context87.abrupt(\"return\", _context87.sent);\n              case 7:\n                _context87.prev = 7;\n                _context87.t0 = _context87[\"catch\"](1);\n                throw NE.warning(\"P2PChannel.restartICE warning: \", _context87.t0), _context87.t0;\n              case 10:\n              case \"end\":\n                return _context87.stop();\n            }\n          }, _callee87, this, [[1, 7]]);\n        }));\n        function restartICE(_x123) {\n          return _restartICE.apply(this, arguments);\n        }\n        return restartICE;\n      }()\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        \"CONNECTED\" === this.state && this.signal.reconnect(void 0, Om.P2P_FAILED);\n      }\n    }, {\n      key: \"getCurrentGatewayAddress\",\n      value: function getCurrentGatewayAddress() {\n        var e;\n        if (!HE(\"GATEWAY_WSS_ADDRESS\")) return null !== (e = this.joinInfo) && void 0 !== e && e.gatewayAddrs ? this.joinInfo.gatewayAddrs[this.signal.currentURLIndex] : void 0;\n      }\n    }, {\n      key: \"setPublishAudioFilterEnabled\",\n      value: function () {\n        var _setPublishAudioFilterEnabled = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee88(e) {\n          return _regeneratorRuntime().wrap(function _callee88$(_context88) {\n            while (1) switch (_context88.prev = _context88.next) {\n              case 0:\n                _context88.next = 2;\n                return this.signal.request(Nm.SET_PARAMETER, {\n                  enablePublishAudioFilter: e\n                });\n              case 2:\n              case \"end\":\n                return _context88.stop();\n            }\n          }, _callee88, this);\n        }));\n        function setPublishAudioFilterEnabled(_x124) {\n          return _setPublishAudioFilterEnabled.apply(this, arguments);\n        }\n        return setPublishAudioFilterEnabled;\n      }()\n    }, {\n      key: \"resetSignal\",\n      value: function resetSignal() {\n        this.signal && (this.signal.removeAllListeners(), this.signal.close(Cm.FALLBACK)), this.signal = new tO(hO(hO({}, this.spec), {}, {\n          retryConfig: this.spec.websocketRetryConfig\n        }), this.store), this.handleSignalEvents(), this.emit(cg.RESET_CONNECTION_EVENTS);\n      }\n    }]);\n    return _O;\n  }(gE);\n  /*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */\n  function EO(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function fO(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? EO(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : EO(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  !function () {\n    var e;\n    function i(e) {\n      var t = 0;\n      return function () {\n        return t < e.length ? {\n          done: !1,\n          value: e[t++]\n        } : {\n          done: !0\n        };\n      };\n    }\n    var r = \"function\" == typeof Object.defineProperties ? Object.defineProperty : function (e, t, i) {\n      return e == Array.prototype || e == Object.prototype || (e[t] = i.value), e;\n    };\n    var n,\n      o = function (e) {\n        e = [\"object\" == typeof globalThis && globalThis, e, \"object\" == typeof window && window, \"object\" == typeof self && self, \"object\" == typeof t && t];\n        for (var i = 0; i < e.length; ++i) {\n          var r = e[i];\n          if (r && r.Math == Math) return r;\n        }\n        throw Error(\"Cannot find global object\");\n      }(this);\n    function s(e, t) {\n      if (t) e: {\n        var i = o;\n        e = e.split(\".\");\n        for (var n = 0; n < e.length - 1; n++) {\n          var s = e[n];\n          if (!(s in i)) break e;\n          i = i[s];\n        }\n        (t = t(n = i[e = e[e.length - 1]])) != n && null != t && r(i, e, {\n          configurable: !0,\n          writable: !0,\n          value: t\n        });\n      }\n    }\n    function a(e) {\n      return (e = {\n        next: e\n      })[Symbol.iterator] = function () {\n        return this;\n      }, e;\n    }\n    function c(e) {\n      var t = \"undefined\" != typeof Symbol && Symbol.iterator && e[Symbol.iterator];\n      return t ? t.call(e) : {\n        next: i(e)\n      };\n    }\n    if (s(\"Symbol\", function (e) {\n      function t(e, t) {\n        this.A = e, r(this, \"description\", {\n          configurable: !0,\n          writable: !0,\n          value: t\n        });\n      }\n      if (e) return e;\n      t.prototype.toString = function () {\n        return this.A;\n      };\n      var i = \"jscomp_symbol_\" + (1e9 * Math.random() >>> 0) + \"_\",\n        n = 0;\n      return function e(r) {\n        if (this instanceof e) throw new TypeError(\"Symbol is not a constructor\");\n        return new t(i + (r || \"\") + \"_\" + n++, r);\n      };\n    }), s(\"Symbol.iterator\", function (e) {\n      if (e) return e;\n      e = Symbol(\"Symbol.iterator\");\n      for (var t = \"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"), n = 0; n < t.length; n++) {\n        var s = o[t[n]];\n        \"function\" == typeof s && \"function\" != typeof s.prototype[e] && r(s.prototype, e, {\n          configurable: !0,\n          writable: !0,\n          value: function value() {\n            return a(i(this));\n          }\n        });\n      }\n      return e;\n    }), \"function\" == typeof Object.setPrototypeOf) n = Object.setPrototypeOf;else {\n      var d;\n      e: {\n        var u = {};\n        try {\n          u.__proto__ = {\n            a: !0\n          }, d = u.a;\n          break e;\n        } catch (e) {}\n        d = !1;\n      }\n      n = d ? function (e, t) {\n        if (e.__proto__ = t, e.__proto__ !== t) throw new TypeError(e + \" is not extensible\");\n        return e;\n      } : null;\n    }\n    var l = n;\n    function h() {\n      this.m = !1, this.j = null, this.v = void 0, this.h = 1, this.u = this.C = 0, this.l = null;\n    }\n    function p(e) {\n      if (e.m) throw new TypeError(\"Generator is already running\");\n      e.m = !0;\n    }\n    function _(e, t) {\n      return e.h = 3, {\n        value: t\n      };\n    }\n    function E(e) {\n      this.g = new h(), this.G = e;\n    }\n    function f(e, t, i, r) {\n      try {\n        var n = t.call(e.g.j, i);\n        if (!(n instanceof Object)) throw new TypeError(\"Iterator result \" + n + \" is not an object\");\n        if (!n.done) return e.g.m = !1, n;\n        var o = n.value;\n      } catch (t) {\n        return e.g.j = null, e.g.s(t), m(e);\n      }\n      return e.g.j = null, r.call(e.g, o), m(e);\n    }\n    function m(e) {\n      for (; e.g.h;) try {\n        var t = e.G(e.g);\n        if (t) return e.g.m = !1, {\n          value: t.value,\n          done: !1\n        };\n      } catch (t) {\n        e.g.v = void 0, e.g.s(t);\n      }\n      if (e.g.m = !1, e.g.l) {\n        if (t = e.g.l, e.g.l = null, t.F) throw t.D;\n        return {\n          value: t.return,\n          done: !0\n        };\n      }\n      return {\n        value: void 0,\n        done: !0\n      };\n    }\n    function g(e) {\n      this.next = function (t) {\n        return e.o(t);\n      }, this.throw = function (t) {\n        return e.s(t);\n      }, this.return = function (t) {\n        return function (e, t) {\n          p(e.g);\n          var i = e.g.j;\n          return i ? f(e, \"return\" in i ? i.return : function (e) {\n            return {\n              value: e,\n              done: !0\n            };\n          }, t, e.g.return) : (e.g.return(t), m(e));\n        }(e, t);\n      }, this[Symbol.iterator] = function () {\n        return this;\n      };\n    }\n    function S(e, t) {\n      return t = new g(new E(t)), l && e.prototype && l(t, e.prototype), t;\n    }\n    if (h.prototype.o = function (e) {\n      this.v = e;\n    }, h.prototype.s = function (e) {\n      this.l = {\n        D: e,\n        F: !0\n      }, this.h = this.C || this.u;\n    }, h.prototype.return = function (e) {\n      this.l = {\n        return: e\n      }, this.h = this.u;\n    }, E.prototype.o = function (e) {\n      return p(this.g), this.g.j ? f(this, this.g.j.next, e, this.g.o) : (this.g.o(e), m(this));\n    }, E.prototype.s = function (e) {\n      return p(this.g), this.g.j ? f(this, this.g.j.throw, e, this.g.o) : (this.g.s(e), m(this));\n    }, s(\"Array.prototype.entries\", function (e) {\n      return e || function () {\n        return function (e, t) {\n          e instanceof String && (e += \"\");\n          var i = 0,\n            r = !1,\n            n = {\n              next: function next() {\n                if (!r && i < e.length) {\n                  var n = i++;\n                  return {\n                    value: t(n, e[n]),\n                    done: !1\n                  };\n                }\n                return r = !0, {\n                  done: !0,\n                  value: void 0\n                };\n              }\n            };\n          return n[Symbol.iterator] = function () {\n            return n;\n          }, n;\n        }(this, function (e, t) {\n          return [e, t];\n        });\n      };\n    }), \"undefined\" != typeof Blob && (\"undefined\" == typeof FormData || !FormData.prototype.keys)) {\n      var T = function T(e, t) {\n          for (var i = 0; i < e.length; i++) t(e[i]);\n        },\n        v = function v(e) {\n          return e.replace(/\\r?\\n|\\r/g, \"\\r\\n\");\n        },\n        R = function R(e, t, i) {\n          return t instanceof Blob ? (i = void 0 !== i ? String(i + \"\") : \"string\" == typeof t.name ? t.name : \"blob\", t.name === i && \"[object Blob]\" !== Object.prototype.toString.call(t) || (t = new File([t], i)), [String(e), t]) : [String(e), String(t)];\n        },\n        I = function I(e, t) {\n          if (e.length < t) throw new TypeError(t + \" argument required, but only \" + e.length + \" present.\");\n        },\n        y = \"object\" == typeof globalThis ? globalThis : \"object\" == typeof window ? window : \"object\" == typeof self ? self : this,\n        C = y.FormData,\n        A = y.XMLHttpRequest && y.XMLHttpRequest.prototype.send,\n        O = y.Request && y.fetch,\n        b = y.navigator && y.navigator.sendBeacon,\n        w = y.Element && y.Element.prototype,\n        N = y.Symbol && Symbol.toStringTag;\n      N && (Blob.prototype[N] || (Blob.prototype[N] = \"Blob\"), \"File\" in y && !File.prototype[N] && (File.prototype[N] = \"File\"));\n      try {\n        new File([], \"\");\n      } catch (e) {\n        y.File = function (e, t, i) {\n          return e = new Blob(e, i || {}), Object.defineProperties(e, {\n            name: {\n              value: t\n            },\n            lastModified: {\n              value: +(i && void 0 !== i.lastModified ? new Date(i.lastModified) : new Date())\n            },\n            toString: {\n              value: function value() {\n                return \"[object File]\";\n              }\n            }\n          }), N && Object.defineProperty(e, N, {\n            value: \"File\"\n          }), e;\n        };\n      }\n      var D = function D(e) {\n          return e.replace(/\\n/g, \"%0A\").replace(/\\r/g, \"%0D\").replace(/\"/g, \"%22\");\n        },\n        P = function P(e) {\n          this.i = [];\n          var t = this;\n          e && T(e.elements, function (e) {\n            if (e.name && !e.disabled && \"submit\" !== e.type && \"button\" !== e.type && !e.matches(\"form fieldset[disabled] *\")) if (\"file\" === e.type) {\n              var i = e.files && e.files.length ? e.files : [new File([], \"\", {\n                type: \"application/octet-stream\"\n              })];\n              T(i, function (i) {\n                t.append(e.name, i);\n              });\n            } else \"select-multiple\" === e.type || \"select-one\" === e.type ? T(e.options, function (i) {\n              !i.disabled && i.selected && t.append(e.name, i.value);\n            }) : \"checkbox\" === e.type || \"radio\" === e.type ? e.checked && t.append(e.name, e.value) : (i = \"textarea\" === e.type ? v(e.value) : e.value, t.append(e.name, i));\n          });\n        };\n      if ((e = P.prototype).append = function (e, t, i) {\n        I(arguments, 2), this.i.push(R(e, t, i));\n      }, e.delete = function (e) {\n        I(arguments, 1);\n        var t = [];\n        e = String(e), T(this.i, function (i) {\n          i[0] !== e && t.push(i);\n        }), this.i = t;\n      }, e.entries = function e() {\n        var t,\n          i = this;\n        return S(e, function (e) {\n          if (1 == e.h && (t = 0), 3 != e.h) return t < i.i.length ? e = _(e, i.i[t]) : (e.h = 0, e = void 0), e;\n          t++, e.h = 2;\n        });\n      }, e.forEach = function (e, t) {\n        I(arguments, 1);\n        for (var i = c(this), r = i.next(); !r.done; r = i.next()) {\n          var n = c(r.value);\n          r = n.next().value, n = n.next().value, e.call(t, n, r, this);\n        }\n      }, e.get = function (e) {\n        I(arguments, 1);\n        var t = this.i;\n        e = String(e);\n        for (var i = 0; i < t.length; i++) if (t[i][0] === e) return t[i][1];\n        return null;\n      }, e.getAll = function (e) {\n        I(arguments, 1);\n        var t = [];\n        return e = String(e), T(this.i, function (i) {\n          i[0] === e && t.push(i[1]);\n        }), t;\n      }, e.has = function (e) {\n        I(arguments, 1), e = String(e);\n        for (var t = 0; t < this.i.length; t++) if (this.i[t][0] === e) return !0;\n        return !1;\n      }, e.keys = function e() {\n        var t,\n          i,\n          r,\n          n,\n          o = this;\n        return S(e, function (e) {\n          if (1 == e.h && (t = c(o), i = t.next()), 3 != e.h) return i.done ? void (e.h = 0) : (r = i.value, n = c(r), _(e, n.next().value));\n          i = t.next(), e.h = 2;\n        });\n      }, e.set = function (e, t, i) {\n        I(arguments, 2), e = String(e);\n        var r = [],\n          n = R(e, t, i),\n          o = !0;\n        T(this.i, function (t) {\n          t[0] === e ? o && (o = !r.push(n)) : r.push(t);\n        }), o && r.push(n), this.i = r;\n      }, e.values = function e() {\n        var t,\n          i,\n          r,\n          n,\n          o = this;\n        return S(e, function (e) {\n          if (1 == e.h && (t = c(o), i = t.next()), 3 != e.h) return i.done ? void (e.h = 0) : (r = i.value, (n = c(r)).next(), _(e, n.next().value));\n          i = t.next(), e.h = 2;\n        });\n      }, P.prototype._asNative = function () {\n        for (var e = new C(), t = c(this), i = t.next(); !i.done; i = t.next()) {\n          var r = c(i.value);\n          i = r.next().value, r = r.next().value, e.append(i, r);\n        }\n        return e;\n      }, P.prototype._blob = function () {\n        var e = \"----formdata-polyfill-\" + Math.random(),\n          t = [],\n          i = \"--\" + e + '\\r\\nContent-Disposition: form-data; name=\"';\n        return this.forEach(function (e, r) {\n          return \"string\" == typeof e ? t.push(i + D(v(r)) + '\"\\r\\n\\r\\n' + v(e) + \"\\r\\n\") : t.push(i + D(v(r)) + '\"; filename=\"' + D(e.name) + '\"\\r\\nContent-Type: ' + (e.type || \"application/octet-stream\") + \"\\r\\n\\r\\n\", e, \"\\r\\n\");\n        }), t.push(\"--\" + e + \"--\"), new Blob(t, {\n          type: \"multipart/form-data; boundary=\" + e\n        });\n      }, P.prototype[Symbol.iterator] = function () {\n        return this.entries();\n      }, P.prototype.toString = function () {\n        return \"[object FormData]\";\n      }, w && !w.matches && (w.matches = w.matchesSelector || w.mozMatchesSelector || w.msMatchesSelector || w.oMatchesSelector || w.webkitMatchesSelector || function (e) {\n        for (var t = (e = (this.document || this.ownerDocument).querySelectorAll(e)).length; 0 <= --t && e.item(t) !== this;);\n        return -1 < t;\n      }), N && (P.prototype[N] = \"FormData\"), A) {\n        var L = y.XMLHttpRequest.prototype.setRequestHeader;\n        y.XMLHttpRequest.prototype.setRequestHeader = function (e, t) {\n          L.call(this, e, t), \"content-type\" === e.toLowerCase() && (this.B = !0);\n        }, y.XMLHttpRequest.prototype.send = function (e) {\n          e instanceof P ? (e = e._blob(), this.B || this.setRequestHeader(\"Content-Type\", e.type), A.call(this, e)) : A.call(this, e);\n        };\n      }\n      O && (y.fetch = function (e, t) {\n        return t && t.body && t.body instanceof P && (t.body = t.body._blob()), O.call(this, e, t);\n      }), b && (y.navigator.sendBeacon = function (e, t) {\n        return t instanceof P && (t = t._asNative()), b.call(this, e, t);\n      }), y.FormData = P;\n    }\n  }();\n  var mO = 1;\n  function gO(e, t, i, r, n) {\n    mO += 1;\n    var o = {\n        sid: i.sid,\n        command: \"convergeAllocateEdge\",\n        uid: \"666\",\n        appId: i.appId,\n        ts: Math.floor(Date.now() / 1e3),\n        seq: mO,\n        requestId: mO,\n        version: PE,\n        cname: i.cname\n      },\n      s = {\n        service_name: t,\n        json_body: JSON.stringify(o)\n      };\n    var a,\n      c,\n      d = e[0];\n    return yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee89() {\n      var e, _t78, i, _e59, _e60, n;\n      return _regeneratorRuntime().wrap(function _callee89$(_context89) {\n        while (1) switch (_context89.prev = _context89.next) {\n          case 0:\n            a = Date.now();\n            _context89.next = 3;\n            return lT(d, {\n              data: s,\n              cancelToken: r,\n              headers: {\n                \"X-Packet-Service-Type\": \"0\",\n                \"X-Packet-URI\": \"61\"\n              }\n            });\n          case 3:\n            e = _context89.sent;\n            if (!(c = Date.now() - a, 0 !== e.code)) {\n              _context89.next = 7;\n              break;\n            }\n            _t78 = new vE(TE.UNEXPECTED_RESPONSE, \"live streaming ap error, code\" + e.code, {\n              retry: !0,\n              responseTime: c\n            });\n            throw NE.error(_t78.toString()), _t78;\n          case 7:\n            i = JSON.parse(e.json_body);\n            if (!(200 !== i.code)) {\n              _context89.next = 11;\n              break;\n            }\n            _e59 = new vE(TE.UNEXPECTED_RESPONSE, \"live streaming app center error, code: \".concat(i.code, \", reason: \").concat(i.reason), {\n              code: i.code,\n              responseTime: c\n            });\n            throw NE.error(_e59.toString()), _e59;\n          case 11:\n            if (!(!i.servers || 0 === i.servers.length)) {\n              _context89.next = 14;\n              break;\n            }\n            _e60 = new vE(TE.UNEXPECTED_RESPONSE, \"live streaming app center empty server\", {\n              code: i.code,\n              responseTime: c\n            });\n            throw NE.error(_e60.toString()), _e60;\n          case 14:\n            n = function (e, t) {\n              return {\n                addressList: e.servers.map(function (e) {\n                  return \"wss://\".concat(e.address.replace(/\\./g, \"-\"), \".\").concat(HE(\"WORKER_DOMAIN\"), \":\").concat(e.wss, \"?serviceName=\").concat(encodeURIComponent(t));\n                }),\n                workerToken: e.workerToken,\n                vid: e.vid\n              };\n            }(i, t);\n            return _context89.abrupt(\"return\", (HE(\"LIVE_STREAMING_ADDRESS\") && (n.addressList = HE(\"LIVE_STREAMING_ADDRESS\") instanceof Array ? HE(\"LIVE_STREAMING_ADDRESS\") : [HE(\"LIVE_STREAMING_ADDRESS\")]), fO(fO({}, n), {}, {\n              responseTime: c\n            })));\n          case 16:\n          case \"end\":\n            return _context89.stop();\n        }\n      }, _callee89);\n    })), function (r, n) {\n      return IT.apworkerEvent(i.sid, {\n        success: !0,\n        sc: 200,\n        serviceName: t,\n        responseDetail: JSON.stringify(r.addressList),\n        firstSuccess: 0 === n,\n        responseTime: c,\n        serverIp: e[n % e.length]\n      }), !1;\n    }, function (r, n) {\n      return IT.apworkerEvent(i.sid, {\n        success: !1,\n        sc: r.data && r.data.code || 200,\n        serviceName: t,\n        responseTime: c,\n        serverIp: e[n % e.length]\n      }), !!(r.code !== TE.OPERATION_ABORTED && r.code !== TE.UNEXPECTED_RESPONSE || r.data && r.data.retry) && (d = e[(n + 1) % e.length], !0);\n    }, n);\n  }\n  var SO = 1;\n  function TO(e, t, i, r) {\n    var n = e.url,\n      o = e.areaCode;\n    var s = Date.now();\n    var a;\n    var _CO = CO(t, o, [Fg.CHOOSE_SERVER]),\n      _CO2 = _slicedToArray(_CO, 2),\n      c = _CO2[0],\n      d = _CO2[1];\n    var u = pT.networkState;\n    return yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee90() {\n      var _yield$lT, e, o, d;\n      return _regeneratorRuntime().wrap(function _callee90$(_context90) {\n        while (1) switch (_context90.prev = _context90.next) {\n          case 0:\n            _context90.t0 = u && pT.networkState === bg.OFFLINE && pT.onlineWaiter;\n            if (!_context90.t0) {\n              _context90.next = 4;\n              break;\n            }\n            _context90.next = 4;\n            return Cl.race([pT.onlineWaiter, LR(r && r.maxRetryTimeout || RE.maxRetryTimeout)]);\n          case 4:\n            u = pT.networkState;\n            _context90.next = 7;\n            return lT(n, {\n              data: c,\n              cancelToken: i,\n              headers: {\n                \"Content-Type\": \"multipart/form-data;\"\n              }\n            }, !0, !0);\n          case 7:\n            _yield$lT = _context90.sent;\n            e = _yield$lT.data;\n            o = _yield$lT.headers;\n            a = \"1\" === o.http3 ? 1 : -1, IT.reportResourceTiming(n, t.sid), RO(e, n, t, s, [Fg.CHOOSE_SERVER], a);\n            d = AR(e, Fg.CHOOSE_SERVER);\n            return _context90.abrupt(\"return\", (IO(d), vR(d, n)));\n          case 13:\n          case \"end\":\n            return _context90.stop();\n        }\n      }, _callee90);\n    })), function (e) {\n      return e && IT.joinChooseServer(t.sid, {\n        lts: s,\n        succ: !0,\n        csAddr: n,\n        opid: d,\n        serverList: e.gatewayAddrs.map(function (e) {\n          return e.address;\n        }),\n        ec: null,\n        cid: e.cid.toString(),\n        uid: e.uid.toString(),\n        csIp: e.csIp,\n        unilbsServerIds: [Fg.CHOOSE_SERVER].toString(),\n        isHttp3: a\n      }), !1;\n    }, function (e) {\n      return e.code !== TE.OPERATION_ABORTED && (e.code === TE.CAN_NOT_GET_GATEWAY_SERVER ? e.data.retry : (IT.joinChooseServer(t.sid, {\n        lts: s,\n        succ: !1,\n        csAddr: n,\n        serverList: null,\n        opid: d,\n        ec: e.code,\n        csIp: e.data && e.data.csIp,\n        unilbsServerIds: [Fg.CHOOSE_SERVER].toString(),\n        extend: JSON.stringify({\n          networkState: u\n        }),\n        isHttp3: a\n      }), NE.warning(\"[\".concat(t.clientId, \"] Choose server network error, retry\"), e), !0));\n    }, r);\n  }\n  function vO(e, t, i, r) {\n    var n,\n      o = e.url,\n      s = e.areaCode,\n      a = e.serviceIds;\n    var c = Date.now(),\n      _CO3 = CO(t, s, a),\n      _CO4 = _slicedToArray(_CO3, 2),\n      d = _CO4[0],\n      u = _CO4[1];\n    var l = void 0;\n    return yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee91() {\n      var _yield$lT2, e, s, u, h;\n      return _regeneratorRuntime().wrap(function _callee91$(_context91) {\n        while (1) switch (_context91.prev = _context91.next) {\n          case 0:\n            _context91.t0 = l && pT.networkState === bg.OFFLINE && pT.onlineWaiter;\n            if (!_context91.t0) {\n              _context91.next = 4;\n              break;\n            }\n            _context91.next = 4;\n            return Cl.race([pT.onlineWaiter, LR(r && r.maxRetryTimeout || RE.maxRetryTimeout)]);\n          case 4:\n            l = pT.networkState;\n            _context91.next = 7;\n            return lT(o, {\n              data: d,\n              cancelToken: i,\n              headers: {\n                \"Content-Type\": \"multipart/form-data;\"\n              }\n            }, !0, !0);\n          case 7:\n            _yield$lT2 = _context91.sent;\n            e = _yield$lT2.data;\n            s = _yield$lT2.headers;\n            n = \"1\" === s.http3 ? 1 : -1, IT.reportResourceTiming(o, t.sid), RO(e, o, t, c, a, n);\n            u = AR(e, Fg.CHOOSE_SERVER), h = AR(e, \"proxy5\" === t.cloudProxyServer ? Fg.CLOUD_PROXY_5 : \"proxy3\" === t.cloudProxyServer || \"proxy4\" === t.cloudProxyServer ? Fg.CLOUD_PROXY : Fg.CLOUD_PROXY_FALLBACK);\n            return _context91.abrupt(\"return\", (IO(u), {\n              gatewayInfo: vR(u, o),\n              proxyInfo: h,\n              url: o\n            }));\n          case 13:\n          case \"end\":\n            return _context91.stop();\n        }\n      }, _callee91);\n    })), function (e) {\n      return e.gatewayInfo && IT.joinChooseServer(t.sid, {\n        lts: c,\n        succ: !0,\n        csAddr: o,\n        serverList: e.gatewayInfo.gatewayAddrs.map(function (e) {\n          return e.address;\n        }),\n        ec: null,\n        opid: u,\n        cid: e.gatewayInfo.cid.toString(),\n        uid: e.gatewayInfo.uid.toString(),\n        csIp: e.gatewayInfo.csIp,\n        unilbsServerIds: a.toString(),\n        isHttp3: n\n      }), e.proxyInfo && IT.joinWebProxyAP(t.sid, {\n        lts: c,\n        sucess: 1,\n        apServerAddr: o,\n        turnServerAddrList: e.proxyInfo.addresses.map(function (e) {\n          return e.ip;\n        }).join(\",\"),\n        errorCode: null,\n        eventType: t.cloudProxyServer,\n        unilbsServerIds: a.toString()\n      }), !1;\n    }, function (e) {\n      return e.code !== TE.OPERATION_ABORTED && (e.code === TE.CAN_NOT_GET_GATEWAY_SERVER ? e.data.retry : (IT.joinWebProxyAP(t.sid, {\n        lts: c,\n        sucess: 0,\n        apServerAddr: o,\n        turnServerAddrList: null,\n        errorCode: e.code,\n        eventType: t.cloudProxyServer,\n        unilbsServerIds: a.toString(),\n        extend: JSON.stringify({\n          networkState: l\n        })\n      }), NE.warning(\"[\".concat(t.clientId, \"] multi unilbs network error, retry\"), e), !0));\n    }, r);\n  }\n  var RO = function RO(e, t, i, r, n, o) {\n      var s = [],\n        a = function a(s) {\n          4096 === s.flag ? IT.joinChooseServer(i.sid, {\n            lts: r,\n            succ: !1,\n            csAddr: t,\n            opid: e.opid,\n            serverList: null,\n            ec: s.error.message,\n            csIp: s.error.data && s.error.data.csIp,\n            unilbsServerIds: n.toString(),\n            isHttp3: o\n          }) : 1048576 !== s.flag && 4194304 !== s.flag && 4194310 !== s.flag || IT.joinWebProxyAP(i.sid, {\n            lts: r,\n            sucess: 0,\n            apServerAddr: t,\n            turnServerAddrList: null,\n            errorCode: s.error.code,\n            eventType: i.cloudProxyServer,\n            unilbsServerIds: n.toString()\n          });\n        };\n      if (e.response_body.forEach(function (t) {\n        var i = t.buffer.code;\n        if (23 === t.uri && 0 === i && !t.buffer.edges_services) if (4194310 === t.buffer.flag) NE.warning(\"no edge services in ap response of proxy fallback, will not set proxy in iceServers\"), t.buffer.edges_services = [];else {\n          var _i40 = {\n            error: new vE(TE.CAN_NOT_GET_GATEWAY_SERVER, \"no edge services in ap response\", {\n              retry: !0,\n              csIp: e.detail[502]\n            }),\n            flag: t.buffer.flag\n          };\n          s.push(_i40), a(_i40);\n        }\n        if (0 !== i) {\n          var _r24 = JA(i),\n            _n21 = {\n              error: new vE(TE.CAN_NOT_GET_GATEWAY_SERVER, _r24.desc, {\n                desc: _r24.desc,\n                retry: _r24.retry,\n                csIp: e.detail[502]\n              }),\n              flag: t.buffer.flag\n            };\n          4194310 === t.buffer.flag ? NE.warning(_n21.error.toString()) : s.push(_n21), a(_n21);\n        }\n      }), s.length) throw NE.warning(\"[\".concat(i.clientId, \"] multi unilbs \").concat(t, \" failed, \").concat(s.map(function (e) {\n        return \"flag: \".concat(e.flag, \", message: \").concat(e.error.message, \", retry: \").concat(e.error.data.retry);\n      }).join(\" | \"))), new vE(TE.CAN_NOT_GET_GATEWAY_SERVER, s.map(function (e) {\n        return \"flag: \".concat(e.flag, \", message: \").concat(e.error.message);\n      }).join(\" | \"), {\n        retry: !!s.find(function (e) {\n          return e.error.data.retry;\n        }),\n        csIp: e.detail[502],\n        desc: _toConsumableArray(new Set(s.map(function (e) {\n          var t, i;\n          return null == e || null === (t = e.error) || void 0 === t || null === (i = t.data) || void 0 === i ? void 0 : i.desc;\n        }).filter(function (e) {\n          return !!e;\n        })))\n      });\n    },\n    IO = function IO(e) {\n      var t, i;\n      if (e.addresses && 0 === e.addresses.length && 0 === e.code) throw new vE(TE.CAN_NOT_GET_GATEWAY_SERVER, \"void gateway address\", {\n        retry: !0,\n        csIp: e.detail && e.detail[502]\n      });\n      if (null !== (t = e.detail) && void 0 !== t && t[19] && \"string\" == typeof (null === (i = e.detail) || void 0 === i ? void 0 : i[19])) {\n        var _t79 = e.detail[19],\n          _i41 = null == _t79 ? void 0 : _t79.split(\";\");\n        for (var _t80 = 0; _t80 < _i41.length; _t80++) {\n          var r;\n          var n = Ih(r = _i41[_t80]).call(r);\n          e.addresses[_t80] && _i41 && (e.addresses[_t80].fingerprint = n);\n        }\n      }\n      if (HE(\"GATEWAY_ADDRESS\") && HE(\"GATEWAY_ADDRESS\").length > 0) {\n        NE.debug(\"assign gateway address to\", HE(\"GATEWAY_ADDRESS\"));\n        var _t81 = HE(\"GATEWAY_ADDRESS\").map(function (t) {\n          var i, r;\n          var n = null !== (i = null === (r = e.addresses.find(function (e) {\n            return e.ip === t.ip && e.port === t.port;\n          })) || void 0 === r ? void 0 : r.fingerprint) && void 0 !== i ? i : \"\";\n          return {\n            ip: t.ip,\n            port: t.port,\n            ticket: e.addresses[0] && e.addresses[0].ticket,\n            fingerprint: n\n          };\n        });\n        e.addresses = _t81;\n      }\n    },\n    yO = function yO(e, t) {\n      if (e.response_body && e.response_body.length) {\n        var _t82 = e.response_body[0];\n        if (0 !== _t82.buffer.code) {\n          var _e61 = JA(_t82.buffer.code);\n          throw new vE(TE.UPDATE_TICKET_FAILED, \"[\".concat(_t82.buffer.code, \"]: \").concat(_e61.desc), {\n            retry: _e61.retry\n          });\n        }\n        return _t82.buffer.ticket;\n      }\n      throw NE.debug(\"update ticket request received ap response without response body:\", t), new vE(TE.UPDATE_TICKET_FAILED, \"cannot find response body from ap response\", {\n        retry: !1\n      });\n    },\n    CO = function CO(e, t, i) {\n      var r = Math.floor(Math.random() * Math.pow(10, 12)),\n        n = {\n          appid: e.appId,\n          client_ts: Date.now(),\n          opid: r,\n          sid: e.sid,\n          request_bodies: [{\n            uri: 22,\n            buffer: {\n              cname: e.cname,\n              detail: {\n                6: e.stringUid,\n                11: t,\n                12: HE(\"USE_NEW_TOKEN\") ? \"1\" : void 0\n              },\n              key: e.token,\n              service_ids: i,\n              uid: e.uid || 0\n            }\n          }]\n        };\n      n.request_bodies.forEach(function (t) {\n        e.multiIP && e.multiIP.gateway_ip && (t.buffer.detail[5] = JSON.stringify({\n          vocs_ip: [e.multiIP.uni_lbs_ip],\n          vos_ip: [e.multiIP.gateway_ip]\n        }));\n      });\n      var o = new FormData();\n      return o.append(\"request\", JSON.stringify(n)), [o, r];\n    },\n    AO = function AO(e, t) {\n      var i = Math.floor(Math.random() * Math.pow(10, 12)),\n        r = {\n          appid: e.appId,\n          client_ts: Date.now(),\n          opid: i,\n          sid: e.sid,\n          request_bodies: [{\n            uri: 28,\n            buffer: {\n              cname: e.cname,\n              detail: {\n                1: \"\",\n                6: e.stringUid,\n                12: \"1\"\n              },\n              token: e.token,\n              service_ids: t,\n              uid: e.uid || 0,\n              edges_services: e.apResponse.addresses.map(function (e) {\n                return {\n                  ip: e.ip,\n                  port: e.port\n                };\n              })\n            }\n          }]\n        },\n        n = new FormData();\n      return n.append(\"request\", JSON.stringify(r)), [n, i];\n    };\n  var OO = 0;\n  var bO = function bO() {\n      var e = HE(\"AREAS\");\n      0 === e.length && e.push(fg.GLOBAL);\n      return zi(e).call(e, function (e, t, i) {\n        var r = wO(t);\n        return r ? 0 === i ? r : \"\".concat(e, \",\").concat(r) : e;\n      }, \"\");\n    },\n    wO = function wO(e) {\n      return e === fg.OVERSEA ? \"\".concat(Tg.ASIA, \",\").concat(Tg.EUROPE, \",\").concat(Tg.AFRICA, \",\").concat(Tg.NORTH_AMERICA, \",\").concat(Tg.SOUTH_AMERICA, \",\").concat(Tg.OCEANIA) : Tg[e];\n    },\n    NO = {\n      GLOBAL: {\n        ASIA: [fg.CHINA, fg.JAPAN, fg.INDIA, fg.KOREA, fg.HKMC],\n        EUROPE: [],\n        NORTH_AMERICA: [fg.US],\n        SOUTH_AMERICA: [],\n        OCEANIA: [],\n        AFRICA: []\n      }\n    },\n    DO = Object.keys(NO[fg.GLOBAL]),\n    PO = [fg.CHINA, fg.NORTH_AMERICA, fg.EUROPE, fg.ASIA, fg.JAPAN, fg.INDIA, fg.OCEANIA, fg.SOUTH_AMERICA, fg.AFRICA, fg.KOREA, fg.HKMC, fg.US],\n    LO = function LO(e, t) {\n      var i = [];\n      if (e.includes(fg.GLOBAL)) {\n        var _o13 = [fg.GLOBAL, fg.OVERSEA],\n          _s10 = Object.keys(vg);\n        if (t === fg.GLOBAL) throw new vE(TE.INVALID_PARAMS, \"GLOBAL is an invalid excludedArea value\");\n        if (t === fg.CHINA) i = [fg.OVERSEA];else if (n = t, DO.includes(n)) {\n          var _e62 = (r = t, NO[fg.GLOBAL][r] || []),\n            _n22 = [].concat(_o13, [t], _toConsumableArray(_e62));\n          i = _s10.filter(function (e) {\n            return !_n22.includes(e);\n          });\n        } else if (function (e) {\n          var t = !1;\n          return DO.forEach(function (i) {\n            NO[fg.GLOBAL][i].includes(e) && (t = !0);\n          }), t;\n        }(t)) {\n          var _e63 = function (e) {\n              var t;\n              return DO.forEach(function (i) {\n                NO[fg.GLOBAL][i].includes(e) && (t = i);\n              }), t;\n            }(t),\n            _r25 = [].concat(_o13, [_e63, t]);\n          i = _s10.filter(function (e) {\n            return !_r25.includes(e);\n          });\n        } else i = e;\n        i = function (e) {\n          var t = [];\n          return PO.forEach(function (i) {\n            e.includes(i) && t.push(i);\n          }), t.concat(e.filter(function (e) {\n            return !PO.includes(e);\n          }));\n        }(i);\n      } else i = e;\n      var r, n;\n      return i;\n    };\n  function kO(_x125, _x126, _x127, _x128) {\n    return _kO.apply(this, arguments);\n  }\n  function _kO() {\n    _kO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee335(e, t, i, r) {\n      var n;\n      return _regeneratorRuntime().wrap(function _callee335$(_context338) {\n        while (1) switch (_context338.prev = _context338.next) {\n          case 0:\n            n = function () {\n              var _ref85 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee334(e, t, i, r) {\n                var n, o, s, a;\n                return _regeneratorRuntime().wrap(function _callee334$(_context337) {\n                  while (1) switch (_context337.prev = _context337.next) {\n                    case 0:\n                      n = null;\n                      o = [], s = /*#__PURE__*/function () {\n                        var _ref86 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee332() {\n                          var n, s, a;\n                          return _regeneratorRuntime().wrap(function _callee332$(_context335) {\n                            while (1) switch (_context335.prev = _context335.next) {\n                              case 0:\n                                n = HE(\"WEBCS_DOMAIN\").slice(0, HE(\"AJAX_REQUEST_CONCURRENT\")).map(function (t) {\n                                  return {\n                                    url: e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"),\n                                    areaCode: bO()\n                                  };\n                                });\n                                s = r.recordJoinChannelService({\n                                  startTs: Date.now(),\n                                  status: \"pending\",\n                                  service: \"chooseServer\",\n                                  urls: n.map(function (e) {\n                                    return e.url;\n                                  })\n                                });\n                                _context335.next = 4;\n                                return eI({\n                                  fragementLength: HE(\"FRAGEMENT_LENGTH\"),\n                                  referenceList: n,\n                                  asyncMapHandler: function asyncMapHandler(r) {\n                                    return NE.debug(\"[\".concat(e.clientId, \"] Connect to choose_server:\"), r.url), TO(r, e, t, i);\n                                  },\n                                  allFailedhandler: function allFailedhandler(e) {\n                                    throw r.recordJoinChannelService({\n                                      endTs: Date.now(),\n                                      status: \"error\",\n                                      errors: e\n                                    }, s), e[0];\n                                  },\n                                  promisesCollector: o\n                                });\n                              case 4:\n                                a = _context335.sent;\n                                return _context335.abrupt(\"return\", (r.recordJoinChannelService({\n                                  endTs: Date.now(),\n                                  status: \"success\"\n                                }, s), a));\n                              case 6:\n                              case \"end\":\n                                return _context335.stop();\n                            }\n                          }, _callee332);\n                        }));\n                        return function s() {\n                          return _ref86.apply(this, arguments);\n                        };\n                      }(), a = /*#__PURE__*/function () {\n                        var _ref87 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee333() {\n                          var s, a, c;\n                          return _regeneratorRuntime().wrap(function _callee333$(_context336) {\n                            while (1) switch (_context336.prev = _context336.next) {\n                              case 0:\n                                _context336.next = 2;\n                                return LR(1e3);\n                              case 2:\n                                if (!(null !== n)) {\n                                  _context336.next = 4;\n                                  break;\n                                }\n                                return _context336.abrupt(\"return\", n);\n                              case 4:\n                                s = HE(\"WEBCS_DOMAIN_BACKUP_LIST\").map(function (t) {\n                                  return {\n                                    url: e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"),\n                                    areaCode: bO()\n                                  };\n                                });\n                                a = r.recordJoinChannelService({\n                                  endTs: void 0,\n                                  startTs: Date.now(),\n                                  status: \"pending\",\n                                  service: \"chooseServer\",\n                                  urls: s.map(function (e) {\n                                    return e.url;\n                                  })\n                                });\n                                _context336.next = 8;\n                                return eI({\n                                  fragementLength: HE(\"FRAGEMENT_LENGTH\"),\n                                  referenceList: s,\n                                  asyncMapHandler: function asyncMapHandler(r) {\n                                    return NE.debug(\"[\".concat(e.clientId, \"] Connect to backup choose_server:\"), r.url), TO(r, e, t, i);\n                                  },\n                                  allFailedhandler: function allFailedhandler(e) {\n                                    throw r.recordJoinChannelService({\n                                      endTs: Date.now(),\n                                      status: \"error\",\n                                      errors: e\n                                    }, a), e[0];\n                                  },\n                                  promisesCollector: o\n                                });\n                              case 8:\n                                c = _context336.sent;\n                                return _context336.abrupt(\"return\", (r.recordJoinChannelService({\n                                  endTs: Date.now(),\n                                  status: \"success\"\n                                }, a), c));\n                              case 10:\n                              case \"end\":\n                                return _context336.stop();\n                            }\n                          }, _callee333);\n                        }));\n                        return function a() {\n                          return _ref87.apply(this, arguments);\n                        };\n                      }();\n                      _context337.prev = 2;\n                      _context337.next = 5;\n                      return jR([s(), a()]);\n                    case 5:\n                      n = _context337.sent;\n                      o.length && o.forEach(function (e) {\n                        return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n                      });\n                      return _context337.abrupt(\"return\", n);\n                    case 10:\n                      _context337.prev = 10;\n                      _context337.t0 = _context337[\"catch\"](2);\n                      throw _context337.t0[0];\n                    case 13:\n                    case \"end\":\n                      return _context337.stop();\n                  }\n                }, _callee334, null, [[2, 10]]);\n              }));\n              return function (_x484, _x485, _x486, _x487) {\n                return _ref85.apply(this, arguments);\n              };\n            }()(e, t, i, r);\n            _context338.next = 3;\n            return n;\n          case 3:\n            _context338.t0 = _context338.sent;\n            return _context338.abrupt(\"return\", {\n              gatewayInfo: _context338.t0\n            });\n          case 5:\n          case \"end\":\n            return _context338.stop();\n        }\n      }, _callee335);\n    }));\n    return _kO.apply(this, arguments);\n  }\n  function MO(_x129, _x130, _x131, _x132, _x133) {\n    return _MO.apply(this, arguments);\n  }\n  function _MO() {\n    _MO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee336(e, t, i, r, n) {\n      var o, _yield$VO, _r63, _o37, _yield$VO2, s, a, c;\n      return _regeneratorRuntime().wrap(function _callee336$(_context339) {\n        while (1) switch (_context339.prev = _context339.next) {\n          case 0:\n            o = e.cloudProxyServer;\n            if (!(\"disabled\" === o)) {\n              _context339.next = 18;\n              break;\n            }\n            if (r) {\n              _context339.next = 4;\n              break;\n            }\n            return _context339.abrupt(\"return\");\n          case 4:\n            if (!e.useLocalAccessPoint) {\n              _context339.next = 8;\n              break;\n            }\n            _context339.next = 7;\n            return kO(e, t, i, n);\n          case 7:\n            return _context339.abrupt(\"return\", _context339.sent);\n          case 8:\n            if (!HE(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\")) {\n              _context339.next = 15;\n              break;\n            }\n            _context339.next = 11;\n            return VO(e, t, i, n);\n          case 11:\n            _yield$VO = _context339.sent;\n            _r63 = _yield$VO.gatewayInfo;\n            _o37 = _yield$VO.proxyInfo;\n            return _context339.abrupt(\"return\", (e.turnServer && \"auto\" !== e.turnServer.mode || (e.turnServer = {\n              mode: \"manual\",\n              servers: _o37.map(function (e) {\n                return {\n                  turnServerURL: e.address,\n                  tcpport: e.tcpport || kE.tcpport,\n                  udpport: e.udpport || kE.udpport,\n                  username: e.username || kE.username,\n                  password: e.password || kE.password,\n                  forceturn: HE(\"JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE\"),\n                  security: !0\n                };\n              })\n            }), {\n              gatewayInfo: _r63\n            }));\n          case 15:\n            _context339.next = 17;\n            return kO(e, t, i, n);\n          case 17:\n            return _context339.abrupt(\"return\", _context339.sent);\n          case 18:\n            _context339.next = 20;\n            return VO(e, t, i, n);\n          case 20:\n            _yield$VO2 = _context339.sent;\n            s = _yield$VO2.proxyInfo;\n            a = _yield$VO2.gatewayInfo;\n            c = {\n              gatewayInfo: a\n            };\n            return _context339.abrupt(\"return\", (e.turnServer = {\n              mode: \"manual\",\n              servers: s.map(function (e) {\n                return {\n                  turnServerURL: e.address,\n                  tcpport: \"proxy3\" === o ? void 0 : e.tcpport ? e.tcpport : kE.tcpport,\n                  udpport: \"proxy4\" === o ? void 0 : e.udpport ? e.udpport : kE.udpport,\n                  username: e.username || kE.username,\n                  password: e.password || kE.password,\n                  forceturn: \"proxy4\" !== o,\n                  security: \"proxy5\" === o\n                };\n              })\n            }, NE.debug(\"[\".concat(e.clientId, \"] set proxy server: \").concat(e.proxyServer, \", mode: \").concat(o)), c));\n          case 25:\n          case \"end\":\n            return _context339.stop();\n        }\n      }, _callee336);\n    }));\n    return _MO.apply(this, arguments);\n  }\n  function UO(_x134, _x135, _x136, _x137, _x138) {\n    return _UO.apply(this, arguments);\n  }\n  function _UO() {\n    _UO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee338(e, t, i, r, n) {\n      var o, s, a, _o38;\n      return _regeneratorRuntime().wrap(function _callee338$(_context341) {\n        while (1) switch (_context341.prev = _context341.next) {\n          case 0:\n            o = HE(\"ACCOUNT_REGISTER\").slice(0, HE(\"AJAX_REQUEST_CONCURRENT\"));\n            s = [];\n            s = t.proxyServer ? o.map(function (e) {\n              return \"https://\".concat(t.proxyServer, \"/ap/?url=\").concat(e + \"/api/v1\");\n            }) : o.map(function (e) {\n              return \"https://\".concat(e, \"/api/v1\");\n            });\n            a = null == n ? void 0 : n.recordJoinChannelService({\n              startTs: Date.now(),\n              status: \"pending\",\n              service: \"stringUID\",\n              urls: s\n            });\n            _context341.prev = 4;\n            _context341.next = 7;\n            return function () {\n              var _ref88 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee337(e, t, i, r, n) {\n                var o, s, a, c, _e239;\n                return _regeneratorRuntime().wrap(function _callee337$(_context340) {\n                  while (1) switch (_context340.prev = _context340.next) {\n                    case 0:\n                      o = Date.now(), s = {\n                        sid: i.sid,\n                        opid: 10,\n                        appid: i.appId,\n                        string_uid: t\n                      };\n                      a = e[0];\n                      _context340.next = 4;\n                      return yE(function () {\n                        return lT(a + \"\".concat(-1 === a.indexOf(\"?\") ? \"?\" : \"&\", \"action=stringuid\"), {\n                          data: s,\n                          cancelToken: r,\n                          headers: {\n                            \"X-Packet-Service-Type\": 0,\n                            \"X-Packet-URI\": 72\n                          }\n                        });\n                      }, function (i, r) {\n                        if (0 === i.code) {\n                          if (i.uid <= 0 || i.uid >= Math.pow(2, 32)) throw NE.error(\"Invalid Uint Uid \".concat(t, \" => \").concat(i.uid), i), IT.reqUserAccount(s.sid, {\n                            lts: o,\n                            success: !1,\n                            serverAddr: a,\n                            stringUid: s.string_uid,\n                            uid: i.uid,\n                            errorCode: TE.INVALID_UINT_UID_FROM_STRING_UID,\n                            extend: s\n                          }), new vE(TE.INVALID_UINT_UID_FROM_STRING_UID);\n                          return IT.reqUserAccount(s.sid, {\n                            lts: o,\n                            success: !0,\n                            serverAddr: a,\n                            stringUid: s.string_uid,\n                            uid: i.uid,\n                            errorCode: null,\n                            extend: s\n                          }), !1;\n                        }\n                        var n = JA(i.code);\n                        return n.retry && (a = e[(r + 1) % e.length]), IT.reqUserAccount(s.sid, {\n                          lts: o,\n                          success: !1,\n                          serverAddr: a,\n                          stringUid: s.string_uid,\n                          uid: i.uid,\n                          errorCode: n.desc,\n                          extend: s\n                        }), n.retry;\n                      }, function (t, i) {\n                        return t.code !== TE.OPERATION_ABORTED && (IT.reqUserAccount(s.sid, {\n                          lts: o,\n                          success: !1,\n                          serverAddr: a,\n                          stringUid: s.string_uid,\n                          uid: null,\n                          errorCode: t.code,\n                          extend: s\n                        }), a = e[(i + 1) % e.length], !0);\n                      }, n);\n                    case 4:\n                      c = _context340.sent;\n                      if (!(0 !== c.code)) {\n                        _context340.next = 8;\n                        break;\n                      }\n                      _e239 = JA(c.code);\n                      throw new vE(TE.UNEXPECTED_RESPONSE, _e239.desc);\n                    case 8:\n                      return _context340.abrupt(\"return\", c);\n                    case 9:\n                    case \"end\":\n                      return _context340.stop();\n                  }\n                }, _callee337);\n              }));\n              return function (_x488, _x489, _x490, _x491, _x492) {\n                return _ref88.apply(this, arguments);\n              };\n            }()(s, e, t, i, r);\n          case 7:\n            _o38 = _context341.sent;\n            return _context341.abrupt(\"return\", (null == n || n.recordJoinChannelService({\n              status: \"success\",\n              endTs: Date.now()\n            }, a), _o38.uid));\n          case 11:\n            _context341.prev = 11;\n            _context341.t0 = _context341[\"catch\"](4);\n            throw null == n || n.recordJoinChannelService({\n              status: \"error\",\n              endTs: Date.now(),\n              errors: [_context341.t0]\n            }, a), _context341.t0;\n          case 14:\n          case \"end\":\n            return _context341.stop();\n        }\n      }, _callee338, null, [[4, 11]]);\n    }));\n    return _UO.apply(this, arguments);\n  }\n  function xO(_x139, _x140, _x141) {\n    return _xO.apply(this, arguments);\n  }\n  function _xO() {\n    _xO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee339(e, t, i) {\n      var r, n, o, s;\n      return _regeneratorRuntime().wrap(function _callee339$(_context342) {\n        while (1) switch (_context342.prev = _context342.next) {\n          case 0:\n            r = HE(\"CDS_AP\").slice(0, HE(\"AJAX_REQUEST_CONCURRENT\")).map(function (t) {\n              return e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(t + \"/api/v1\") : \"https://\".concat(t, \"/api/v1?action=config\");\n            }).map(function (r) {\n              return function (e, t, i, r) {\n                var n = Bh(),\n                  o = {\n                    flag: 64,\n                    cipher_method: 0,\n                    features: {\n                      device: n.name,\n                      system: n.os,\n                      system_general: navigator.userAgent,\n                      vendor: t.appId,\n                      version: PE,\n                      cname: t.cname,\n                      sid: t.sid,\n                      session_id: t.sid,\n                      detail: \"\",\n                      proxyServer: t.proxyServer\n                    }\n                  };\n                return yE(function () {\n                  return lT(e, {\n                    data: o,\n                    timeout: 1e3,\n                    cancelToken: i,\n                    headers: {\n                      \"X-Packet-Service-Type\": 0,\n                      \"X-Packet-URI\": 54\n                    }\n                  });\n                }, void 0, function (e) {\n                  return e.code !== TE.OPERATION_ABORTED;\n                }, r);\n              }(r, e, t, i);\n            });\n            n = null, o = null, s = {};\n            _context342.prev = 2;\n            _context342.next = 5;\n            return jR(r);\n          case 5:\n            n = _context342.sent;\n            _context342.next = 13;\n            break;\n          case 8:\n            _context342.prev = 8;\n            _context342.t0 = _context342[\"catch\"](2);\n            if (!(_context342.t0.code === TE.OPERATION_ABORTED)) {\n              _context342.next = 12;\n              break;\n            }\n            throw _context342.t0;\n          case 12:\n            o = _context342.t0;\n          case 13:\n            r.forEach(function (e) {\n              return e.cancel();\n            });\n            if (IT.reportApiInvoke(e.sid, {\n              name: Em.REQUEST_CONFIG_DISTRIBUTE,\n              options: {\n                error: o,\n                res: n\n              }\n            }).onSuccess(), n && n.test_tags) try {\n              s = function (e) {\n                if (!e.test_tags) return {};\n                var t = e.test_tags,\n                  i = Object.keys(t),\n                  r = {};\n                return i.forEach(function (e) {\n                  var i;\n                  var n = Ih(i = e.slice(4)).call(i),\n                    o = JSON.parse(t[e])[1];\n                  r[n] = o;\n                }), r;\n              }(n);\n            } catch (e) {}\n            return _context342.abrupt(\"return\", s);\n          case 16:\n          case \"end\":\n            return _context342.stop();\n        }\n      }, _callee339, null, [[2, 8]]);\n    }));\n    return _xO.apply(this, arguments);\n  }\n  function VO(_x142, _x143, _x144, _x145) {\n    return _VO.apply(this, arguments);\n  }\n  function _VO() {\n    _VO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee342(e, t, i, r) {\n      var n, o, s, a, c, d, u, l, h, _yield$jR, _t215;\n      return _regeneratorRuntime().wrap(function _callee342$(_context345) {\n        while (1) switch (_context345.prev = _context345.next) {\n          case 0:\n            n = HE(\"PROXY_SERVER_TYPE3\"), o = function o(e, t, i) {\n              var r = i || n;\n              return Array.isArray(r) && (r = t % 2 == 0 ? n[1] : n[0]), \"https://\".concat(r, \"/ap/?url=\").concat(e);\n            };\n            s = null;\n            a = [], c = /*#__PURE__*/function () {\n              var _ref89 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee340() {\n                var n, s, c;\n                return _regeneratorRuntime().wrap(function _callee340$(_context343) {\n                  while (1) switch (_context343.prev = _context343.next) {\n                    case 0:\n                      n = HE(\"WEBCS_DOMAIN\").slice(0, HE(\"AJAX_REQUEST_CONCURRENT\")).map(function (t, i) {\n                        var r;\n                        return r = \"disabled\" === e.cloudProxyServer && e.proxyServer ? o(\"\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), i, e.proxyServer) : \"disabled\" === e.cloudProxyServer || \"fallback\" === e.cloudProxyServer ? \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\") : o(\"\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), i), {\n                          url: r,\n                          areaCode: bO(),\n                          serviceIds: [Fg.CHOOSE_SERVER, \"proxy5\" === e.cloudProxyServer ? Fg.CLOUD_PROXY_5 : \"proxy3\" === e.cloudProxyServer || \"proxy4\" === e.cloudProxyServer ? Fg.CLOUD_PROXY : Fg.CLOUD_PROXY_FALLBACK]\n                        };\n                      });\n                      s = r.recordJoinChannelService({\n                        startTs: Date.now(),\n                        status: \"pending\",\n                        service: \"chooseServer\",\n                        urls: n.map(function (e) {\n                          return e.url;\n                        })\n                      });\n                      _context343.next = 4;\n                      return eI({\n                        fragementLength: HE(\"FRAGEMENT_LENGTH\"),\n                        referenceList: n,\n                        asyncMapHandler: function asyncMapHandler(r) {\n                          return NE.debug(\"[\".concat(e.clientId, \"] Connect to choose_server:\"), r.url), vO(r, e, t, i);\n                        },\n                        allFailedhandler: function allFailedhandler(e) {\n                          throw r.recordJoinChannelService({\n                            endTs: Date.now(),\n                            status: \"error\",\n                            errors: e\n                          }, s), e[0];\n                        },\n                        promisesCollector: a\n                      });\n                    case 4:\n                      c = _context343.sent;\n                      return _context343.abrupt(\"return\", (r.recordJoinChannelService({\n                        endTs: Date.now(),\n                        status: \"success\"\n                      }, s), c));\n                    case 6:\n                    case \"end\":\n                      return _context343.stop();\n                  }\n                }, _callee340);\n              }));\n              return function c() {\n                return _ref89.apply(this, arguments);\n              };\n            }(), d = /*#__PURE__*/function () {\n              var _ref90 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee341() {\n                var n, c, d;\n                return _regeneratorRuntime().wrap(function _callee341$(_context344) {\n                  while (1) switch (_context344.prev = _context344.next) {\n                    case 0:\n                      _context344.next = 2;\n                      return LR(1e3);\n                    case 2:\n                      if (!(null !== s)) {\n                        _context344.next = 4;\n                        break;\n                      }\n                      return _context344.abrupt(\"return\", s);\n                    case 4:\n                      n = HE(\"WEBCS_DOMAIN_BACKUP_LIST\").map(function (t, i) {\n                        var r;\n                        return r = \"disabled\" === e.cloudProxyServer && e.proxyServer ? o(\"\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), i, e.proxyServer) : \"disabled\" === e.cloudProxyServer || \"fallback\" === e.cloudProxyServer ? \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\") : o(\"\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), i), {\n                          url: r,\n                          areaCode: bO(),\n                          serviceIds: [Fg.CHOOSE_SERVER, \"proxy5\" === e.cloudProxyServer ? Fg.CLOUD_PROXY_5 : \"proxy3\" === e.cloudProxyServer || \"proxy4\" === e.cloudProxyServer ? Fg.CLOUD_PROXY : Fg.CLOUD_PROXY_FALLBACK]\n                        };\n                      });\n                      c = r.recordJoinChannelService({\n                        startTs: Date.now(),\n                        status: \"pending\",\n                        service: \"chooseServer\",\n                        urls: n.map(function (e) {\n                          return e.url;\n                        })\n                      });\n                      _context344.next = 8;\n                      return eI({\n                        fragementLength: HE(\"FRAGEMENT_LENGTH\"),\n                        referenceList: n,\n                        asyncMapHandler: function asyncMapHandler(r) {\n                          return NE.debug(\"[\".concat(e.clientId, \"] Connect to backup choose_server:\"), r.url), vO(r, e, t, i);\n                        },\n                        allFailedhandler: function allFailedhandler(e) {\n                          throw r.recordJoinChannelService({\n                            endTs: Date.now(),\n                            status: \"error\",\n                            errors: e\n                          }, c), e[0];\n                        },\n                        promisesCollector: a\n                      });\n                    case 8:\n                      d = _context344.sent;\n                      return _context344.abrupt(\"return\", (r.recordJoinChannelService({\n                        endTs: Date.now(),\n                        status: \"success\"\n                      }, c), d));\n                    case 10:\n                    case \"end\":\n                      return _context344.stop();\n                  }\n                }, _callee341);\n              }));\n              return function d() {\n                return _ref90.apply(this, arguments);\n              };\n            }();\n            _context345.prev = 3;\n            _context345.next = 6;\n            return jR([c(), d()]);\n          case 6:\n            _yield$jR = _context345.sent;\n            u = _yield$jR.gatewayInfo;\n            l = _yield$jR.proxyInfo;\n            h = _yield$jR.url;\n            _context345.next = 15;\n            break;\n          case 12:\n            _context345.prev = 12;\n            _context345.t0 = _context345[\"catch\"](3);\n            throw _context345.t0[0];\n          case 15:\n            if (!(a.length && a.forEach(function (e) {\n              return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n            }), !u || !l)) {\n              _context345.next = 17;\n              break;\n            }\n            throw new vE(TE.UNEXPECTED_ERROR, \"missing gateway or proxy response\").print();\n          case 17:\n            if (e.apUrl = h, \"disabled\" !== e.cloudProxyServer && Array.isArray(n) && h) {\n              _t215 = new YA(h).host;\n              n.includes(_t215) && (e.proxyServer = _t215, NE.setProxyServer(_t215), IT.setProxyServer(_t215));\n            }\n            _context345.t1 = u;\n            _context345.next = 21;\n            return OR(l, u.uid);\n          case 21:\n            _context345.t2 = _context345.sent;\n            s = {\n              gatewayInfo: _context345.t1,\n              proxyInfo: _context345.t2\n            };\n            return _context345.abrupt(\"return\", s);\n          case 24:\n          case \"end\":\n            return _context345.stop();\n        }\n      }, _callee342, null, [[3, 12]]);\n    }));\n    return _VO.apply(this, arguments);\n  }\n  function jO(_x146, _x147, _x148, _x149) {\n    return _jO.apply(this, arguments);\n  }\n  function _jO() {\n    _jO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee343(e, t, i, r) {\n      var n;\n      return _regeneratorRuntime().wrap(function _callee343$(_context346) {\n        while (1) switch (_context346.prev = _context346.next) {\n          case 0:\n            n = HE(\"UAP_AP\").slice(0, HE(\"AJAX_REQUEST_CONCURRENT\")).map(function (e) {\n              return t.proxyServer ? \"https://\".concat(t.proxyServer, \"/ap/?url=\").concat(e + \"/api/v1?action=uap\") : \"https://\".concat(e, \"/api/v1?action=uap\");\n            });\n            _context346.next = 3;\n            return gO(n, e, t, i, r);\n          case 3:\n            return _context346.abrupt(\"return\", _context346.sent);\n          case 4:\n          case \"end\":\n            return _context346.stop();\n        }\n      }, _callee343);\n    }));\n    return _jO.apply(this, arguments);\n  }\n  function FO(_x150, _x151, _x152) {\n    return _FO.apply(this, arguments);\n  }\n  function _FO() {\n    _FO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee345(e, t, i) {\n      var r, _e243;\n      return _regeneratorRuntime().wrap(function _callee345$(_context348) {\n        while (1) switch (_context348.prev = _context348.next) {\n          case 0:\n            r = HE(\"UAP_AP\").slice(0, HE(\"AJAX_REQUEST_CONCURRENT\")).map(function (t) {\n              return e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(t + \"/api/v1?action=uap\") : \"https://\".concat(t, \"/api/v1?action=uap\");\n            }).map(function (r) {\n              return function (e, t, i, r) {\n                var n = {\n                  command: \"convergeAllocateEdge\",\n                  sid: t.sid,\n                  appId: t.appId,\n                  token: t.token,\n                  ts: Date.now(),\n                  version: PE,\n                  cname: t.cname,\n                  uid: t.uid.toString(),\n                  requestId: SO,\n                  seq: SO\n                };\n                SO += 1;\n                var o = {\n                  service_name: \"tele_channel\",\n                  json_body: JSON.stringify(n)\n                };\n                return yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee344() {\n                  var t, _e240, r, _e241, _e242;\n                  return _regeneratorRuntime().wrap(function _callee344$(_context347) {\n                    while (1) switch (_context347.prev = _context347.next) {\n                      case 0:\n                        _context347.next = 2;\n                        return lT(e, {\n                          data: o,\n                          cancelToken: i,\n                          headers: {\n                            \"X-Packet-Service-Type\": 0,\n                            \"X-Packet-URI\": 61\n                          }\n                        });\n                      case 2:\n                        t = _context347.sent;\n                        if (!(0 !== t.code)) {\n                          _context347.next = 6;\n                          break;\n                        }\n                        _e240 = new vE(TE.UNEXPECTED_RESPONSE, \"cross channel ap error, code\" + t.code, {\n                          retry: !0\n                        });\n                        throw NE.error(_e240.toString()), _e240;\n                      case 6:\n                        r = JSON.parse(t.json_body);\n                        if (!(200 !== r.code)) {\n                          _context347.next = 10;\n                          break;\n                        }\n                        _e241 = new vE(TE.UNEXPECTED_RESPONSE, \"cross channel app center error, code: \".concat(r.code, \", reason: \").concat(r.reason));\n                        throw NE.error(_e241.toString()), _e241;\n                      case 10:\n                        if (!(!r.servers || 0 === r.servers.length)) {\n                          _context347.next = 13;\n                          break;\n                        }\n                        _e242 = new vE(TE.UNEXPECTED_RESPONSE, \"cross channel app center empty server\");\n                        throw NE.error(_e242.toString()), _e242;\n                      case 13:\n                        return _context347.abrupt(\"return\", {\n                          vid: r.vid,\n                          workerToken: r.workerToken,\n                          addressList: (HE(\"CHANNEL_MEDIA_RELAY_SERVERS\") || r.servers).map(function (e) {\n                            return \"wss://\".concat(e.address.replace(/\\./g, \"-\"), \".\").concat(HE(\"WORKER_DOMAIN\"), \":\").concat(e.wss);\n                          })\n                        });\n                      case 14:\n                      case \"end\":\n                        return _context347.stop();\n                    }\n                  }, _callee344);\n                })), void 0, function (e) {\n                  return !!(e.code !== TE.OPERATION_ABORTED && e.code !== TE.UNEXPECTED_RESPONSE || e.data && e.data.retry);\n                }, r);\n              }(r, e, t, i);\n            });\n            _context348.prev = 1;\n            _context348.next = 4;\n            return jR(r);\n          case 4:\n            _e243 = _context348.sent;\n            return _context348.abrupt(\"return\", (r.forEach(function (e) {\n              return e.cancel();\n            }), _e243));\n          case 8:\n            _context348.prev = 8;\n            _context348.t0 = _context348[\"catch\"](1);\n            throw _context348.t0[0];\n          case 11:\n          case \"end\":\n            return _context348.stop();\n        }\n      }, _callee345, null, [[1, 8]]);\n    }));\n    return _FO.apply(this, arguments);\n  }\n  function BO(_x153, _x154, _x155) {\n    return _BO.apply(this, arguments);\n  }\n  function _BO() {\n    _BO = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee348(e, t, i) {\n      var r, n, o;\n      return _regeneratorRuntime().wrap(function _callee348$(_context351) {\n        while (1) switch (_context351.prev = _context351.next) {\n          case 0:\n            r = null;\n            n = [], o = /*#__PURE__*/function () {\n              var _ref92 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee347(_o39) {\n                var s;\n                return _regeneratorRuntime().wrap(function _callee347$(_context350) {\n                  while (1) switch (_context350.prev = _context350.next) {\n                    case 0:\n                      s = HE(_o39 ? \"WEBCS_DOMAIN_BACKUP_LIST\" : \"WEBCS_DOMAIN\").map(function (t) {\n                        return e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(t + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\");\n                      });\n                      _context350.t0 = _o39;\n                      if (!_context350.t0) {\n                        _context350.next = 6;\n                        break;\n                      }\n                      _context350.next = 5;\n                      return LR(1e3);\n                    case 5:\n                      _context350.t0 = null !== r;\n                    case 6:\n                      if (!_context350.t0) {\n                        _context350.next = 10;\n                        break;\n                      }\n                      _context350.t1 = r;\n                      _context350.next = 13;\n                      break;\n                    case 10:\n                      _context350.next = 12;\n                      return eI({\n                        fragementLength: HE(\"FRAGEMENT_LENGTH\"),\n                        referenceList: s,\n                        asyncMapHandler: function asyncMapHandler(r) {\n                          return NE.debug(\"[\".concat(e.clientId, \"] update ticket, Connect to \").concat(_o39 ? \"backup\" : \"\", \" choose_server:\"), r), function (e, t, i, r) {\n                            var _AO = AO(t, [Fg.CHOOSE_SERVER]),\n                              _AO2 = _slicedToArray(_AO, 1),\n                              n = _AO2[0];\n                            var o = pT.networkState;\n                            return yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee346() {\n                              var t;\n                              return _regeneratorRuntime().wrap(function _callee346$(_context349) {\n                                while (1) switch (_context349.prev = _context349.next) {\n                                  case 0:\n                                    _context349.t0 = o && pT.networkState === bg.OFFLINE && pT.onlineWaiter;\n                                    if (!_context349.t0) {\n                                      _context349.next = 4;\n                                      break;\n                                    }\n                                    _context349.next = 4;\n                                    return Cl.race([pT.onlineWaiter, LR(r && r.maxRetryTimeout || RE.maxRetryTimeout)]);\n                                  case 4:\n                                    o = pT.networkState;\n                                    _context349.next = 7;\n                                    return lT(e, {\n                                      data: n,\n                                      cancelToken: i,\n                                      headers: {\n                                        \"Content-Type\": \"multipart/form-data;\"\n                                      }\n                                    }, !0);\n                                  case 7:\n                                    t = _context349.sent;\n                                    return _context349.abrupt(\"return\", yO(t, e));\n                                  case 9:\n                                  case \"end\":\n                                    return _context349.stop();\n                                }\n                              }, _callee346);\n                            })), function () {\n                              return !1;\n                            }, function (e) {\n                              return e.code !== TE.OPERATION_ABORTED && (e.code === TE.UPDATE_TICKET_FAILED ? e.data.retry : (NE.warning(\"[\".concat(t.clientId, \"] update ticket network error, retry\"), e), !0));\n                            }, r);\n                          }(r, e, t, i);\n                        },\n                        allFailedhandler: function allFailedhandler(e) {\n                          throw e[0];\n                        },\n                        promisesCollector: n\n                      });\n                    case 12:\n                      _context350.t1 = _context350.sent;\n                    case 13:\n                      return _context350.abrupt(\"return\", _context350.t1);\n                    case 14:\n                    case \"end\":\n                      return _context350.stop();\n                  }\n                }, _callee347);\n              }));\n              return function o(_x493) {\n                return _ref92.apply(this, arguments);\n              };\n            }();\n            _context351.prev = 2;\n            _context351.next = 5;\n            return jR([o(!1), o(!0)]);\n          case 5:\n            r = _context351.sent;\n            n.length && n.forEach(function (e) {\n              return e.cancel && \"function\" == typeof e.cancel && e.cancel();\n            });\n            return _context351.abrupt(\"return\", r);\n          case 10:\n            _context351.prev = 10;\n            _context351.t0 = _context351[\"catch\"](2);\n            throw _context351.t0[0];\n          case 13:\n          case \"end\":\n            return _context351.stop();\n        }\n      }, _callee348, null, [[2, 10]]);\n    }));\n    return _BO.apply(this, arguments);\n  }\n  function GO(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function WO(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? GO(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : GO(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var HO = /*#__PURE__*/function (_gE23) {\n    _inherits(HO, _gE23);\n    function HO() {\n      var _this116;\n      _classCallCheck(this, HO);\n      _this116 = _possibleConstructorReturn(this, _getPrototypeOf(HO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"configs\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"joinInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"cancelToken\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"retryConfig\", {\n        timeout: 3e3,\n        timeoutFactor: 1.5,\n        maxRetryCount: 1,\n        maxRetryTimeout: 1e4\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"interval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"mutex\", new OT(\"config-distribute\")), mp(_assertThisInitialized(_assertThisInitialized(_this116)), \"mutableParamsRead\", !1);\n      return _this116;\n    }\n    _createClass(HO, [{\n      key: \"startGetConfigDistribute\",\n      value: function startGetConfigDistribute(e, t) {\n        var _this117 = this;\n        this.joinInfo = e, this.cancelToken = t, this.interval && this.stopGetConfigDistribute(), HE(\"ENABLE_CONFIG_DISTRIBUTE\") && (this.updateConfigDistribute(), this.interval = window.setInterval(function () {\n          _this117.updateConfigDistribute();\n        }, HE(\"CONFIG_DISTRIBUTE_INTERVAL\")));\n      }\n    }, {\n      key: \"stopGetConfigDistribute\",\n      value: function stopGetConfigDistribute() {\n        this.interval && clearInterval(this.interval), this.interval = void 0, this.joinInfo = void 0, this.cancelToken = void 0;\n      }\n    }, {\n      key: \"awaitConfigDistributeComplete\",\n      value: function () {\n        var _awaitConfigDistributeComplete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee92() {\n          return _regeneratorRuntime().wrap(function _callee92$(_context92) {\n            while (1) switch (_context92.prev = _context92.next) {\n              case 0:\n                if (this.mutex.isLocked) {\n                  _context92.next = 2;\n                  break;\n                }\n                return _context92.abrupt(\"return\");\n              case 2:\n                _context92.next = 4;\n                return this.mutex.lock();\n              case 4:\n                _context92.t0 = _context92.sent;\n                (0, _context92.t0)();\n              case 6:\n              case \"end\":\n                return _context92.stop();\n            }\n          }, _callee92, this);\n        }));\n        function awaitConfigDistributeComplete() {\n          return _awaitConfigDistributeComplete.apply(this, arguments);\n        }\n        return awaitConfigDistributeComplete;\n      }()\n    }, {\n      key: \"updateConfigDistribute\",\n      value: function () {\n        var _updateConfigDistribute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee93() {\n          var e, t, _t83;\n          return _regeneratorRuntime().wrap(function _callee93$(_context93) {\n            while (1) switch (_context93.prev = _context93.next) {\n              case 0:\n                if (!this.mutableParamsRead) {\n                  this.mutableParamsRead = !0;\n                  IT.reportApiInvoke(null, {\n                    options: void 0,\n                    name: Em.LOAD_CONFIG_FROM_LOCALSTORAGE,\n                    tag: fm.TRACER\n                  }).onSuccess(JSON.stringify(YE));\n                }\n                if (!(!this.joinInfo || !this.cancelToken || !this.retryConfig)) {\n                  _context93.next = 3;\n                  break;\n                }\n                return _context93.abrupt(\"return\", void NE.debug(\"[config-distribute] get config distribute interrupted have no joininfo\"));\n              case 3:\n                _context93.next = 5;\n                return this.mutex.lock();\n              case 5:\n                t = _context93.sent;\n                _context93.prev = 6;\n                _context93.next = 9;\n                return xO(this.joinInfo, this.cancelToken, this.retryConfig);\n              case 9:\n                e = _context93.sent;\n                NE.debug(\"[config-distribute] get config distribute\", JSON.stringify(e));\n                e.limit_bitrate && this.handleBitrateLimit(e.limit_bitrate);\n                this.cacheGlobalParameterConfig(e);\n                this.configs = e;\n                _context93.next = 20;\n                break;\n              case 16:\n                _context93.prev = 16;\n                _context93.t0 = _context93[\"catch\"](6);\n                _t83 = new vE(TE.NETWORK_RESPONSE_ERROR, _context93.t0);\n                NE.warning(\"[config-distribute] \".concat(_t83.toString()));\n              case 20:\n                _context93.prev = 20;\n                t();\n                return _context93.finish(20);\n              case 23:\n              case \"end\":\n                return _context93.stop();\n            }\n          }, _callee93, this, [[6, 16, 20, 23]]);\n        }));\n        function updateConfigDistribute() {\n          return _updateConfigDistribute.apply(this, arguments);\n        }\n        return updateConfigDistribute;\n      }()\n    }, {\n      key: \"getBitrateLimit\",\n      value: function getBitrateLimit() {\n        return this.configs ? this.configs.limit_bitrate : void 0;\n      }\n    }, {\n      key: \"handleBitrateLimit\",\n      value: function handleBitrateLimit(e) {\n        var t;\n        (t = e) && t.uplink && t.id && void 0 !== t.uplink.max_bitrate && void 0 !== t.uplink.min_bitrate && (this.configs && this.configs.limit_bitrate ? this.configs && this.configs.limit_bitrate && this.configs.limit_bitrate.id !== e.id && this.emit(Rg.UPDATE_BITRATE_LIMIT, e) : this.emit(Rg.UPDATE_BITRATE_LIMIT, e));\n      }\n    }, {\n      key: \"getLowStreamConfigDistribute\",\n      value: function getLowStreamConfigDistribute() {\n        return this.configs && this.configs.limit_bitrate && WO({}, this.configs.limit_bitrate.low_stream_uplink);\n      }\n    }, {\n      key: \"cacheGlobalParameterConfig\",\n      value: function cacheGlobalParameterConfig(e) {\n        var t;\n        var i = Yf(t = Object.keys(e).filter(function (e) {\n          return /^webrtc_ng_global_parameter/.test(e);\n        })).call(t);\n        for (var _t84 = 0; _t84 < i.length; _t84++) for (var _r26 = i.length - 1; _r26 > _t84; _r26--) {\n          var _t85 = i[_r26];\n          if (\"number\" == typeof e[_t85].__priority) {\n            var n = e[_t85].__priority,\n              _o14 = i[_r26 - 1];\n            if (\"number\" == typeof e[_o14].__priority) {\n              if (!(n > e[_o14].__priority)) continue;\n              {\n                var _e64 = _t85;\n                i[_r26] = i[_r26 - 1], i[_r26 - 1] = _e64;\n              }\n            } else {\n              var _e65 = _t85;\n              i[_r26] = i[_r26 - 1], i[_r26 - 1] = _e65;\n            }\n          }\n        }\n        var r = {};\n        i.forEach(function (t) {\n          var i = e[t],\n            n = i.__expires;\n          Object.keys(i).forEach(function (e) {\n            \"__priority\" === e || \"__expires\" === e || Object.prototype.hasOwnProperty.call(r, e) || (r[e] = WO({\n              value: i[e]\n            }, n && {\n              expires: n\n            }));\n          });\n        });\n        try {\n          var _e66 = JSON.stringify(r),\n            _t86 = window.btoa(_e66);\n          window.localStorage.setItem(\"websdk_ng_global_parameter\", _t86), NE.debug(\"Caching global parameters \".concat(_e66));\n        } catch (e) {\n          NE.error(\"Error caching global parameters:\", e.message);\n        }\n      }\n    }]);\n    return HO;\n  }(gE);\n  function KO(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function YO(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? KO(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : KO(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var qO = /*#__PURE__*/function (_gE24) {\n    _inherits(qO, _gE24);\n    function qO(e, t, i, r) {\n      var _this118;\n      _classCallCheck(this, qO);\n      _this118 = _possibleConstructorReturn(this, _getPrototypeOf(qO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"spec\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"token\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"websocket\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"pingpongTimer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"reconnectMode\", \"retry\"), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"serviceMode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"reqId\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"commandReqId\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"handleWebSocketOpen\", function () {\n        _this118.reconnectMode = \"retry\", _this118.startPingPong();\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this118)), \"handleWebSocketMessage\", function (e) {\n        if (!e.data) return;\n        var t = JSON.parse(e.data);\n        t.requestId ? _this118.emit(\"@\".concat(t.requestId, \"-\").concat(t.sid), t) : _this118.serviceMode === Ym.INJECT ? _this118.emit($m.INJECT_STREAM_STATUS, t) : (IT.workerEvent(_this118.spec.sid, {\n          actionType: \"status\",\n          serverCode: t.code,\n          workerType: _this118.serviceMode === Ym.TRANSCODE ? 1 : 2\n        }), _this118.emit($m.PUBLISH_STREAM_STATUS, t));\n      }), _this118.spec = t, _this118.token = e, _this118.serviceMode = r, _this118.websocket = new $A(\"live-streaming\", i), _this118.websocket.on(Km.CONNECTED, _this118.handleWebSocketOpen), _this118.websocket.on(Km.ON_MESSAGE, _this118.handleWebSocketMessage), _this118.websocket.on(Km.REQUEST_NEW_URLS, function (e, t) {\n        FR(_assertThisInitialized(_assertThisInitialized(_this118)), $m.REQUEST_NEW_ADDRESS).then(e).catch(t);\n      }), _this118.websocket.on(Km.RECONNECTING, function () {\n        _this118.websocket.reconnectMode = _this118.reconnectMode;\n      });\n      return _this118;\n    }\n    _createClass(qO, [{\n      key: \"init\",\n      value: function init(e) {\n        return this.websocket.init(e);\n      }\n    }, {\n      key: \"request\",\n      value: function () {\n        var _request3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee94(e, t, i, r) {\n          var _this119 = this;\n          var n, o, s, a, c, d, u;\n          return _regeneratorRuntime().wrap(function _callee94$(_context94) {\n            while (1) switch (_context94.prev = _context94.next) {\n              case 0:\n                this.reqId += 1, \"request\" === e && (this.commandReqId += 1);\n                n = this.commandReqId, o = this.reqId;\n                if (!(!o || !this.websocket)) {\n                  _context94.next = 4;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR);\n              case 4:\n                s = YO({\n                  command: e,\n                  sdkVersion: \"4.16.1\" === PE ? \"0.0.1\" : PE,\n                  seq: o,\n                  requestId: o,\n                  allocate: i,\n                  cname: this.spec.cname,\n                  appId: this.spec.appId,\n                  sid: this.spec.sid,\n                  uid: this.spec.uid.toString(),\n                  ts: Math.floor(Date.now() / 1e3)\n                }, t);\n                if (!(\"closed\" === this.websocket.state)) {\n                  _context94.next = 7;\n                  break;\n                }\n                throw new vE(TE.WS_DISCONNECT);\n              case 7:\n                a = function a() {\n                  return new Cl(function (e, t) {\n                    _this119.websocket.once(Km.CLOSED, function () {\n                      return t(new vE(TE.WS_ABORT));\n                    }), _this119.websocket.once(Km.CONNECTED, e);\n                  });\n                };\n                _context94.t0 = \"connected\" !== this.websocket.state;\n                if (!_context94.t0) {\n                  _context94.next = 12;\n                  break;\n                }\n                _context94.next = 12;\n                return a();\n              case 12:\n                s.clientRequest && (s.clientRequest.workerToken = this.token);\n                c = new Cl(function (e, t) {\n                  var i = function i() {\n                    t(new vE(TE.WS_ABORT));\n                  };\n                  _this119.websocket.once(Km.RECONNECTING, i), _this119.websocket.once(Km.CLOSED, i), _this119.once(\"@\".concat(o, \"-\").concat(_this119.spec.sid), function (t) {\n                    e(t);\n                  });\n                });\n                r && IT.workerEvent(this.spec.sid, YO(YO({}, r), {}, {\n                  requestId: n,\n                  actionType: \"request\",\n                  payload: JSON.stringify(t.clientRequest),\n                  serverCode: 0,\n                  code: 0\n                }));\n                d = Date.now();\n                this.websocket.sendMessage(s);\n                u = null;\n                _context94.prev = 18;\n                _context94.next = 21;\n                return c;\n              case 21:\n                u = _context94.sent;\n                _context94.next = 33;\n                break;\n              case 24:\n                _context94.prev = 24;\n                _context94.t1 = _context94[\"catch\"](18);\n                if (!(\"closed\" === this.websocket.state)) {\n                  _context94.next = 28;\n                  break;\n                }\n                throw _context94.t1;\n              case 28:\n                _context94.next = 30;\n                return a();\n              case 30:\n                _context94.next = 32;\n                return this.request(e, t, i);\n              case 32:\n                return _context94.abrupt(\"return\", _context94.sent);\n              case 33:\n                return _context94.abrupt(\"return\", (r && IT.workerEvent(this.spec.sid, YO(YO({}, r), {}, {\n                  requestId: n,\n                  actionType: \"response\",\n                  payload: JSON.stringify(u.serverResponse),\n                  serverCode: u.code,\n                  success: 200 === u.code,\n                  responseTime: Date.now() - d\n                })), 200 !== u.code && this.handleResponseError(u), u));\n              case 34:\n              case \"end\":\n                return _context94.stop();\n            }\n          }, _callee94, this, [[18, 24]]);\n        }));\n        function request(_x156, _x157, _x158, _x159) {\n          return _request3.apply(this, arguments);\n        }\n        return request;\n      }()\n    }, {\n      key: \"tryNextAddress\",\n      value: function tryNextAddress() {\n        this.reconnectMode = \"tryNext\", this.websocket.reconnect(\"tryNext\");\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e = \"4.16.1\" === PE ? \"0.0.1\" : PE;\n        this.reqId += 1, \"connected\" === this.websocket.state ? (this.websocket.sendMessage({\n          command: \"request\",\n          appId: this.spec.appId,\n          cname: this.spec.cname,\n          uid: this.spec.uid.toString(),\n          sdkVersion: e,\n          sid: this.spec.sid,\n          seq: this.reqId,\n          ts: Math.floor(Date.now() / 1e3),\n          requestId: this.reqId,\n          clientRequest: {\n            command: \"DestroyWorker\"\n          }\n        }), this.websocket.close(!1, !0)) : this.websocket.close(!1), this.pingpongTimer && (window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0);\n      }\n    }, {\n      key: \"handleResponseError\",\n      value: function handleResponseError(e) {\n        switch (e.code) {\n          case tg.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:\n            return void NE.warning(\"live stream response already exists stream\");\n          case tg.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:\n          case tg.LIVE_STREAM_RESPONSE_BAD_STREAM:\n          case tg.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:\n            return new vE(TE.LIVE_STREAMING_INVALID_ARGUMENT, \"\", {\n              code: e.code\n            }).throw();\n          case tg.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:\n            if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return;\n            throw new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream response wm worker not exist\", {\n              retry: !0\n            });\n          case tg.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:\n            return new vE(TE.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED, \"\", {\n              code: e.code\n            }).throw();\n          case tg.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:\n            {\n              var t = new vE(TE.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);\n              return this.emit($m.WARNING, t, e.serverResponse.url);\n            }\n          case tg.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:\n            {\n              var _t87 = new vE(TE.LIVE_STREAMING_WARN_FREQUENT_REQUEST);\n              return this.emit($m.WARNING, _t87, e.serverResponse.url);\n            }\n          case tg.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:\n            throw new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream response wm worker not exist\", {\n              retry: !0\n            });\n          case tg.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:\n            return new vE(TE.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED, \"\", {\n              code: e.code\n            }).throw();\n          case tg.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:\n            {\n              var _t88 = new vE(TE.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);\n              return this.emit($m.WARNING, _t88, e.serverResponse.url);\n            }\n          case tg.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:\n            return new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"\", {\n              code: e.code\n            }).throw();\n          case tg.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:\n            throw new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream resource limit\", {\n              retry: !0,\n              changeAddress: !0\n            });\n          case tg.LIVE_STREAM_RESPONSE_WORKER_LOST:\n          case tg.LIVE_STREAM_RESPONSE_WORKER_QUIT:\n            if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return;\n            throw new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n              retry: !0,\n              changeAddress: !0\n            });\n          case tg.ERROR_FAIL_SEND_MESSAGE:\n            if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return;\n            if (\"UpdateTranscoding\" === e.serverResponse.command || \"ControlStream\" === e.serverResponse.command) return new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n              code: e.code\n            }).throw();\n            throw new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n              retry: !0,\n              changeAddress: !0\n            });\n          case tg.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:\n          case tg.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:\n          case tg.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:\n          case tg.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:\n            return new vE(TE.LIVE_STREAMING_CDN_ERROR, \"\", {\n              code: e.code\n            }).throw();\n        }\n      }\n    }, {\n      key: \"startPingPong\",\n      value: function startPingPong() {\n        var _this120 = this;\n        this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(function () {\n          \"connected\" === _this120.websocket.state && _this120.request(\"ping\", {}).catch(xR);\n        }, 6e3);\n      }\n    }]);\n    return qO;\n  }(gE);\n  function JO(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function XO(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? JO(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : JO(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var zO = /*#__PURE__*/function (_gE25) {\n    _inherits(zO, _gE25);\n    function zO(e) {\n      var _this121;\n      _classCallCheck(this, zO);\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : RE,\n        i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : RE;\n      _this121 = _possibleConstructorReturn(this, _getPrototypeOf(zO).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"onLiveStreamWarning\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"onLiveStreamError\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"onInjectStatusChange\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"spec\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"retryTimeout\", 1e4), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"connection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"httpRetryConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"wsRetryConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"streamingTasks\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"isStartingStreamingTask\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"taskMutex\", new OT(\"live-streaming\")), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"cancelToken\", fE.CancelToken.source()), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"transcodingConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"injectConfig\", XO({}, Zm)), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"injectLoopTimes\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"uapResponse\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"lastTaskId\", 1), mp(_assertThisInitialized(_assertThisInitialized(_this121)), \"statusError\", new Map()), _this121.spec = e, _this121.httpRetryConfig = i, _this121.wsRetryConfig = t;\n      return _this121;\n    }\n    _createClass(zO, [{\n      key: \"setTranscodingConfig\",\n      value: function () {\n        var _setTranscodingConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee95(e) {\n          var _this122 = this;\n          var t, i, r, n, _e67;\n          return _regeneratorRuntime().wrap(function _callee95$(_context95) {\n            while (1) switch (_context95.prev = _context95.next) {\n              case 0:\n                t = XO(XO({}, Qm), e);\n                66 !== t.videoCodecProfile && 77 !== t.videoCodecProfile && 100 !== t.videoCodecProfile && (NE.debug(\"[\".concat(this.spec.clientId, \"] set transcoding config, fix video codec profile: \").concat(t.videoCodecProfile, \" -> 100\")), t.videoCodecProfile = 100), t.transcodingUsers || (t.transcodingUsers = t.userConfigs), t.transcodingUsers && (t.transcodingUsers = t.transcodingUsers.map(function (e) {\n                  return XO(XO(XO({}, Jm), e), {}, {\n                    zOrder: e.zOrder ? e.zOrder + 1 : 1\n                  });\n                })), function (e) {\n                  tm(e.width) || Xf(e.width, \"config.width\", 0, 1e4), tm(e.height) || Xf(e.height, \"config.height\", 0, 1e4), tm(e.videoBitrate) || Xf(e.videoBitrate, \"config.videoBitrate\", 1, 1e6), tm(e.videoFrameRate) || Xf(e.videoFrameRate, \"config.videoFrameRate\"), tm(e.lowLatency) || qf(e.lowLatency, \"config.lowLatency\"), tm(e.audioSampleRate) || Jf(e.audioSampleRate, \"config.audioSampleRate\", [32e3, 44100, 48e3]), tm(e.audioBitrate) || Xf(e.audioBitrate, \"config.audioBitrate\", 1, 128), tm(e.audioChannels) || Jf(e.audioChannels, \"config.audioChannels\", [1, 2, 3, 4, 5]), tm(e.videoGop) || Xf(e.videoGop, \"config.videoGop\"), tm(e.videoCodecProfile) || Jf(e.videoCodecProfile, \"config.videoCodecProfile\", [66, 77, 100]), tm(e.userCount) || Xf(e.userCount, \"config.userCount\", 0, 17), tm(e.backgroundColor) || Xf(e.backgroundColor, \"config.backgroundColor\", 0, 16777215), tm(e.userConfigExtraInfo) || Qf(e.userConfigExtraInfo, \"config.userConfigExtraInfo\", 0, 4096, !1), e.transcodingUsers && !tm(e.transcodingUsers) && (Zf(e.transcodingUsers, \"config.transcodingUsers\"), e.transcodingUsers.forEach(function (e, t) {\n                    em(e.uid), tm(e.x) || Xf(e.x, \"transcodingUser[\".concat(t, \"].x\"), 0, 1e4), tm(e.y) || Xf(e.y, \"transcodingUser[\".concat(t, \"].y\"), 0, 1e4), tm(e.width) || Xf(e.width, \"transcodingUser[\".concat(t, \"].width\"), 0, 1e4), tm(e.height) || Xf(e.height, \"transcodingUser[\".concat(t, \"].height\"), 0, 1e4), tm(e.zOrder) || Xf(e.zOrder - 1, \"transcodingUser[\".concat(t, \"].zOrder\"), 0, 100), tm(e.alpha) || Xf(e.alpha, \"transcodingUser[\".concat(t, \"].alpha\"), 0, 1, !1);\n                  })), tm(e.watermark) || zm(e.watermark, \"watermark\"), tm(e.backgroundImage) || zm(e.backgroundImage, \"backgroundImage\"), e.images && !tm(e.images) && (Zf(e.images, \"config.images\"), e.images.forEach(function (e, t) {\n                    zm(e, \"images[\".concat(t, \"]\"));\n                  }));\n                }(t);\n                i = [];\n                t.images && i.push.apply(i, _toConsumableArray(t.images.map(function (e) {\n                  return XO(XO(XO({}, Xm), e), {}, {\n                    zOrder: 255\n                  });\n                }))), t.backgroundImage && (i.push(XO(XO(XO({}, Xm), t.backgroundImage), {}, {\n                  zOrder: 0\n                })), delete t.backgroundImage), t.watermark && (i.push(XO(XO(XO({}, Xm), t.watermark), {}, {\n                  zOrder: 255\n                })), delete t.watermark), t.images = i, t.transcodingUsers && (t.userConfigs = t.transcodingUsers.map(function (e) {\n                  return XO({}, e);\n                }), t.userCount = t.transcodingUsers.length, delete t.transcodingUsers);\n                r = (t.userConfigs || []).map(function (e) {\n                  return \"number\" == typeof e.uid ? Cl.resolve(e.uid) : UO(e.uid, _this122.spec, _this122.cancelToken.token, _this122.httpRetryConfig);\n                });\n                _context95.next = 7;\n                return Cl.all(r);\n              case 7:\n                _context95.sent.forEach(function (e, i) {\n                  t.userConfigs && t.userConfigs[i] && (t.userConfigs[i].uid = e);\n                });\n                this.transcodingConfig = t;\n                if (!this.connection) {\n                  _context95.next = 22;\n                  break;\n                }\n                _context95.prev = 10;\n                _context95.next = 13;\n                return this.connection.request(\"request\", {\n                  clientRequest: {\n                    command: \"UpdateTranscoding\",\n                    transcodingConfig: this.transcodingConfig\n                  }\n                }, !1, {\n                  command: \"UpdateTranscoding\",\n                  workerType: 1,\n                  requestByUser: !0,\n                  tid: Array.from(zv(n = this.streamingTasks).call(n)).map(function (e) {\n                    return e.taskId;\n                  }).join(\"#\")\n                });\n              case 13:\n                _e67 = _context95.sent;\n                NE.debug(\"[\".concat(this.spec.clientId, \"] update live transcoding config success, code: \").concat(_e67.code, \", config:\"), JSON.stringify(this.transcodingConfig));\n                _context95.next = 22;\n                break;\n              case 17:\n                _context95.prev = 17;\n                _context95.t0 = _context95[\"catch\"](10);\n                if (!(!_context95.t0.data || !_context95.t0.data.retry)) {\n                  _context95.next = 21;\n                  break;\n                }\n                throw _context95.t0;\n              case 21:\n                _context95.t0.data.changeAddress && this.connection.tryNextAddress(), this.streamingTasks.forEach(function (t) {\n                  NE.warning(\"[\".concat(_this122.spec.clientId, \"] live streaming receive error\"), _context95.t0.toString(), \"try to republish\", t.url), _this122.startLiveStreamingTask(t.url, t.mode, _context95.t0).then(function () {\n                    NE.debug(\"[\".concat(_this122.spec.clientId, \"] live streaming republish \").concat(t.url, \" success\"));\n                  }).catch(function (e) {\n                    NE.error(\"[\".concat(_this122.spec.clientId, \"] live streaming republish failed\"), t.url, e.toString()), _this122.onLiveStreamError && _this122.onLiveStreamError(t.url, e);\n                  });\n                });\n              case 22:\n              case \"end\":\n                return _context95.stop();\n            }\n          }, _callee95, this, [[10, 17]]);\n        }));\n        function setTranscodingConfig(_x160) {\n          return _setTranscodingConfig.apply(this, arguments);\n        }\n        return setTranscodingConfig;\n      }()\n    }, {\n      key: \"setInjectStreamConfig\",\n      value: function setInjectStreamConfig(e, t) {\n        this.injectConfig = Object.assign({}, this.injectConfig, e), this.injectLoopTimes = t;\n      }\n    }, {\n      key: \"startLiveStreamingTask\",\n      value: function () {\n        var _startLiveStreamingTask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee96(e, t, i) {\n          var _this123 = this;\n          var r, n, o, s, _r27, _a5;\n          return _regeneratorRuntime().wrap(function _callee96$(_context96) {\n            while (1) switch (_context96.prev = _context96.next) {\n              case 0:\n                if (!(Array.from(zv(r = this.streamingTasks).call(r)).find(function (e) {\n                  return e.mode === Ym.INJECT;\n                }) && t === Ym.INJECT)) {\n                  _context96.next = 2;\n                  break;\n                }\n                return _context96.abrupt(\"return\", new vE(TE.LIVE_STREAMING_TASK_CONFLICT, \"inject stream over limit\").throw());\n              case 2:\n                if (!(!this.transcodingConfig && t === Ym.TRANSCODE)) {\n                  _context96.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[LiveStreaming] no transcoding config found, can not start transcoding streaming task\");\n              case 4:\n                n = {\n                  command: \"PublishStream\",\n                  ts: Date.now(),\n                  url: e,\n                  uid: this.spec.uid.toString(),\n                  autoDestroyTime: 100,\n                  acceptImageTimeout: !0\n                };\n                NE.debug(\"[\".concat(this.spec.clientId, \"] start live streaming \").concat(e, \", mode: \").concat(t));\n                _context96.next = 8;\n                return this.taskMutex.lock();\n              case 8:\n                o = _context96.sent;\n                if (!(!this.connection && i)) {\n                  _context96.next = 11;\n                  break;\n                }\n                return _context96.abrupt(\"return\", void o());\n              case 11:\n                if (!(this.streamingTasks.get(e) && !i)) {\n                  _context96.next = 13;\n                  break;\n                }\n                return _context96.abrupt(\"return\", (o(), new vE(TE.LIVE_STREAMING_TASK_CONFLICT).throw()));\n              case 13:\n                _context96.prev = 13;\n                _context96.t0 = this.connection;\n                if (_context96.t0) {\n                  _context96.next = 19;\n                  break;\n                }\n                _context96.next = 18;\n                return this.connect(t);\n              case 18:\n                this.connection = _context96.sent;\n              case 19:\n                _context96.next = 24;\n                break;\n              case 21:\n                _context96.prev = 21;\n                _context96.t1 = _context96[\"catch\"](13);\n                throw o(), _context96.t1;\n              case 24:\n                _context96.t2 = t;\n                _context96.next = _context96.t2 === Ym.TRANSCODE ? 27 : _context96.t2 === Ym.RAW ? 29 : _context96.t2 === Ym.INJECT ? 30 : 31;\n                break;\n              case 27:\n                n.transcodingConfig = XO({}, this.transcodingConfig);\n                return _context96.abrupt(\"break\", 31);\n              case 29:\n                return _context96.abrupt(\"break\", 31);\n              case 30:\n                n = {\n                  cname: this.spec.cname,\n                  command: \"InjectStream\",\n                  sid: this.spec.sid,\n                  transcodingConfig: this.injectConfig,\n                  ts: Date.now(),\n                  url: e,\n                  loopTimes: this.injectLoopTimes\n                };\n              case 31:\n                this.uapResponse && this.uapResponse.vid && (n.vid = this.uapResponse.vid), this.isStartingStreamingTask = !0;\n                s = this.lastTaskId++;\n                _context96.prev = 33;\n                _r27 = new Cl(function (t, r) {\n                  LR(_this123.retryTimeout).then(function () {\n                    if (i) return r(i);\n                    var t = _this123.statusError.get(e);\n                    return t ? (_this123.statusError.delete(e), r(t)) : void 0;\n                  });\n                });\n                _context96.next = 37;\n                return Cl.race([this.connection.request(\"request\", {\n                  clientRequest: n\n                }, !0, {\n                  url: e,\n                  command: \"PublishStream\",\n                  workerType: t === Ym.TRANSCODE ? 1 : 2,\n                  requestByUser: !i,\n                  tid: s.toString()\n                }), _r27]);\n              case 37:\n                _a5 = _context96.sent;\n                this.isStartingStreamingTask = !1, NE.debug(\"[\".concat(this.spec.clientId, \"] live streaming started, code: \").concat(_a5.code)), this.streamingTasks.set(e, {\n                  clientRequest: n,\n                  mode: t,\n                  url: e,\n                  taskId: s\n                }), o();\n                _context96.next = 56;\n                break;\n              case 41:\n                _context96.prev = 41;\n                _context96.t3 = _context96[\"catch\"](33);\n                if (!(o(), this.isStartingStreamingTask = !1, !_context96.t3.data || !_context96.t3.data.retry || i)) {\n                  _context96.next = 45;\n                  break;\n                }\n                throw _context96.t3;\n              case 45:\n                if (!_context96.t3.data.changeAddress) {\n                  _context96.next = 52;\n                  break;\n                }\n                this.connection.tryNextAddress();\n                _context96.next = 49;\n                return this.startLiveStreamingTask(e, t, _context96.t3);\n              case 49:\n                _context96.t4 = _context96.sent;\n                _context96.next = 55;\n                break;\n              case 52:\n                _context96.next = 54;\n                return this.startLiveStreamingTask(e, t, _context96.t3);\n              case 54:\n                _context96.t4 = _context96.sent;\n              case 55:\n                return _context96.abrupt(\"return\", _context96.t4);\n              case 56:\n              case \"end\":\n                return _context96.stop();\n            }\n          }, _callee96, this, [[13, 21], [33, 41]]);\n        }));\n        function startLiveStreamingTask(_x161, _x162, _x163) {\n          return _startLiveStreamingTask.apply(this, arguments);\n        }\n        return startLiveStreamingTask;\n      }()\n    }, {\n      key: \"stopLiveStreamingTask\",\n      value: function stopLiveStreamingTask(e) {\n        var _this124 = this;\n        return new Cl(function (t, i) {\n          var r = _this124.streamingTasks.get(e);\n          if (!r || !_this124.connection) return new vE(TE.UNEXPECTED_ERROR, \"can not find streaming task to stop\").throw();\n          var n = r.mode;\n          r.abortTask = function () {\n            NE.debug(\"[\".concat(_this124.spec.clientId, \"] stop live streaming success(worker exception)\")), _this124.streamingTasks.delete(e), t();\n          }, _this124.connection.request(\"request\", {\n            clientRequest: {\n              command: n === Ym.INJECT ? \"UninjectStream\" : \"UnpublishStream\",\n              url: r.url\n            }\n          }, !1, {\n            url: e,\n            command: \"UnPublishStream\",\n            workerType: n === Ym.TRANSCODE ? 1 : 2,\n            requestByUser: !0,\n            tid: (_this124.lastTaskId++).toString()\n          }).then(function (i) {\n            NE.debug(\"[\".concat(_this124.spec.clientId, \"] stop live streaming success, code: \").concat(i.code)), _this124.streamingTasks.delete(e), 0 === _this124.streamingTasks.size && n !== Ym.INJECT && (_this124.connection && _this124.connection.close(), _this124.connection = void 0), t(), n === Ym.INJECT && _this124.onInjectStatusChange && _this124.onInjectStatusChange(qm.INJECT_STREAM_STATUS_STOP_SUCCESS, _this124.spec.uid, e);\n          }).catch(i);\n        });\n      }\n    }, {\n      key: \"controlInjectStream\",\n      value: function () {\n        var _controlInjectStream = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee97(e, t, i, r) {\n          var n;\n          return _regeneratorRuntime().wrap(function _callee97$(_context97) {\n            while (1) switch (_context97.prev = _context97.next) {\n              case 0:\n                n = this.streamingTasks.get(e);\n                if (!(!n || !this.connection || n.mode !== Ym.INJECT)) {\n                  _context97.next = 3;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not find inject stream task to control\");\n              case 3:\n                _context97.next = 5;\n                return this.connection.request(\"request\", {\n                  clientRequest: {\n                    command: \"ControlStream\",\n                    url: e,\n                    control: t,\n                    audioVolume: i,\n                    position: r\n                  }\n                });\n              case 5:\n                return _context97.abrupt(\"return\", _context97.sent.serverResponse);\n              case 6:\n              case \"end\":\n                return _context97.stop();\n            }\n          }, _callee97, this);\n        }));\n        function controlInjectStream(_x164, _x165, _x166, _x167) {\n          return _controlInjectStream.apply(this, arguments);\n        }\n        return controlInjectStream;\n      }()\n    }, {\n      key: \"resetAllTask\",\n      value: function resetAllTask() {\n        var _this125 = this;\n        var e;\n        var t = Array.from(zv(e = this.streamingTasks).call(e));\n        this.terminate();\n        var _loop = function _loop() {\n          var e = _t89[_i42];\n          _this125.startLiveStreamingTask(e.url, e.mode).catch(function (t) {\n            _this125.onLiveStreamError && _this125.onLiveStreamError(e.url, t);\n          });\n        };\n        for (var _i42 = 0, _t89 = t; _i42 < _t89.length; _i42++) {\n          _loop();\n        }\n      }\n    }, {\n      key: \"terminate\",\n      value: function terminate() {\n        this.cancelToken && this.cancelToken.cancel(), this.streamingTasks = new Map(), this.isStartingStreamingTask = !1, this.statusError = new Map(), this.cancelToken = fE.CancelToken.source(), this.uapResponse = void 0, this.connection && this.connection.close(), this.connection = void 0;\n      }\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee98(e) {\n          var _this126 = this;\n          var t;\n          return _regeneratorRuntime().wrap(function _callee98$(_context98) {\n            while (1) switch (_context98.prev = _context98.next) {\n              case 0:\n                if (!this.connection) {\n                  _context98.next = 2;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"live streaming connection has already connected\");\n              case 2:\n                _context98.next = 4;\n                return FR(this, eg.REQUEST_WORKER_MANAGER_LIST, e);\n              case 4:\n                t = _context98.sent;\n                this.uapResponse = t;\n                this.connection = new qO(t.workerToken, this.spec, this.wsRetryConfig, e);\n                this.connection.on($m.WARNING, function (e, t) {\n                  return _this126.onLiveStreamWarning && _this126.onLiveStreamWarning(t, e);\n                });\n                this.connection.on($m.PUBLISH_STREAM_STATUS, function (e) {\n                  return _this126.handlePublishStreamServer(e);\n                });\n                this.connection.on($m.INJECT_STREAM_STATUS, function (e) {\n                  return _this126.handleInjectStreamServerStatus(e);\n                });\n                this.connection.on($m.REQUEST_NEW_ADDRESS, function (t, i) {\n                  if (!_this126.connection) return i(new vE(TE.UNEXPECTED_ERROR, \"can not get new live streaming address list\"));\n                  FR(_this126, eg.REQUEST_WORKER_MANAGER_LIST, e).then(function (e) {\n                    _this126.uapResponse = e, t(e.addressList);\n                  }).catch(i);\n                });\n                _context98.next = 13;\n                return this.connection.init(t.addressList);\n              case 13:\n                return _context98.abrupt(\"return\", this.connection);\n              case 14:\n              case \"end\":\n                return _context98.stop();\n            }\n          }, _callee98, this);\n        }));\n        function connect(_x168) {\n          return _connect.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"handlePublishStreamServer\",\n      value: function handlePublishStreamServer(e) {\n        var _this127 = this;\n        var t = e.serverStatus && e.serverStatus.url || \"empty_url\",\n          i = this.streamingTasks.get(t),\n          r = e.reason;\n        switch (e.code) {\n          case tg.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:\n          case tg.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:\n          case tg.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:\n          case tg.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:\n            {\n              var _r28 = new vE(TE.LIVE_STREAMING_CDN_ERROR, \"\", {\n                code: e.code\n              });\n              if (i) return NE.error(_r28.toString()), this.onLiveStreamError && this.onLiveStreamError(t, _r28);\n              if (!this.isStartingStreamingTask) return;\n              this.statusError.set(t, _r28);\n            }\n          case tg.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:\n            {\n              var _e68 = new vE(TE.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE, r);\n              return this.onLiveStreamWarning && this.onLiveStreamWarning(t, _e68);\n            }\n          case tg.LIVE_STREAM_RESPONSE_WORKER_LOST:\n          case tg.LIVE_STREAM_RESPONSE_WORKER_QUIT:\n            {\n              var n;\n              if (!this.connection) return;\n              this.connection.tryNextAddress();\n              var _t90 = Array.from(zv(n = this.streamingTasks).call(n));\n              var _loop2 = function _loop2() {\n                var i = _t91[_i43];\n                i.abortTask ? i.abortTask() : (NE.warning(\"[\".concat(_this127.spec.clientId, \"] publish stream status code\"), e.code, \"try to republish\", i.url), _this127.startLiveStreamingTask(i.url, i.mode, new vE(TE.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"\", {\n                  code: e.code\n                })).then(function () {\n                  NE.debug(\"[\".concat(_this127.spec.clientId, \"] republish live stream success\"), i.url);\n                }).catch(function (e) {\n                  NE.error(e.toString()), _this127.onLiveStreamError && _this127.onLiveStreamError(i.url, e);\n                }));\n              };\n              for (var _i43 = 0, _t91 = _t90; _i43 < _t91.length; _i43++) {\n                _loop2();\n              }\n              return;\n            }\n        }\n      }\n    }, {\n      key: \"handleInjectStreamServerStatus\",\n      value: function handleInjectStreamServerStatus(e) {\n        var t = Number(e.uid),\n          i = e.serverStatus && e.serverStatus.url;\n        switch (e.code) {\n          case 200:\n            return void (this.onInjectStatusChange && this.onInjectStatusChange(qm.INJECT_STREAM_STATUS_START_SUCCESS, t, i));\n          case 451:\n            return this.onInjectStatusChange && this.onInjectStatusChange(qm.INJECT_STREAM_STATUS_START_ALREADY_EXISTS, t, i), void this.streamingTasks.delete(i);\n          case 453:\n            return this.onInjectStatusChange && this.onInjectStatusChange(qm.INJECT_STREAM_STATUS_START_UNAUTHORIZED, t, i), void this.streamingTasks.delete(i);\n          case 470:\n            return this.onInjectStatusChange && this.onInjectStatusChange(qm.INJECT_STREAM_STATUS_BROKEN, t, i), void this.streamingTasks.delete(i);\n          case 499:\n            return this.onInjectStatusChange && this.onInjectStatusChange(qm.INJECT_STREAM_STATUS_START_TIMEOUT, t, i), void this.streamingTasks.delete(i);\n          default:\n            return void NE.debug(\"inject stream server status\", e);\n        }\n      }\n    }, {\n      key: \"hasUrl\",\n      value: function hasUrl(e) {\n        return this.streamingTasks.has(e);\n      }\n    }]);\n    return zO;\n  }(gE);\n  var QO = /*#__PURE__*/function () {\n    function QO() {\n      _classCallCheck(this, QO);\n      mp(this, \"destChannelMediaInfos\", new Map()), mp(this, \"srcChannelMediaInfo\", void 0);\n    }\n    _createClass(QO, [{\n      key: \"setSrcChannelInfo\",\n      value: function setSrcChannelInfo(e) {\n        mg(e), this.srcChannelMediaInfo = e;\n      }\n    }, {\n      key: \"addDestChannelInfo\",\n      value: function addDestChannelInfo(e) {\n        mg(e), this.destChannelMediaInfos.set(e.channelName, e);\n      }\n    }, {\n      key: \"removeDestChannelInfo\",\n      value: function removeDestChannelInfo(e) {\n        $f(e), this.destChannelMediaInfos.delete(e);\n      }\n    }, {\n      key: \"getSrcChannelMediaInfo\",\n      value: function getSrcChannelMediaInfo() {\n        return this.srcChannelMediaInfo;\n      }\n    }, {\n      key: \"getDestChannelMediaInfo\",\n      value: function getDestChannelMediaInfo() {\n        return this.destChannelMediaInfos;\n      }\n    }]);\n    return QO;\n  }();\n  function ZO(e) {\n    if (!(e instanceof QO)) {\n      return new vE(TE.INVALID_PARAMS, \"Config should be instance of [ChannelMediaRelayConfiguration]\").throw();\n    }\n    var t = e.getSrcChannelMediaInfo(),\n      i = e.getDestChannelMediaInfo();\n    if (!t) {\n      return new vE(TE.INVALID_PARAMS, \"srcChannelMediaInfo should not be empty\").throw();\n    }\n    if (0 === i.size) {\n      return new vE(TE.INVALID_PARAMS, \"destChannelMediaInfo should not be empty\").throw();\n    }\n  }\n  var $O = /*#__PURE__*/function (_gE26) {\n    _inherits($O, _gE26);\n    function $O(e, t, i) {\n      var _this128;\n      _classCallCheck(this, $O);\n      _this128 = _possibleConstructorReturn(this, _getPrototypeOf($O).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"ws\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"requestId\", 1), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"heartBeatTimer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"joinInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"clientId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"onOpen\", function () {\n        _this128.emit(\"open\"), _this128.startHeartBeatCheck();\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"onClose\", function (e) {\n        _this128.emit(\"close\"), _this128.dispose();\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this128)), \"onMessage\", function (e) {\n        var t = JSON.parse(e.data);\n        if (!t || \"serverResponse\" !== t.command || !t.requestId) return t && \"serverStatus\" === t.command && t.serverStatus && t.serverStatus.command ? (_this128.emit(\"status\", t.serverStatus), void _this128.emit(t.serverStatus.command, t.serverStatus)) : void 0;\n        _this128.emit(\"req_\".concat(t.requestId), t);\n      }), _this128.joinInfo = e, _this128.clientId = t, _this128.ws = new $A(\"cross-channel-\".concat(_this128.clientId), i), _this128.ws.on(Km.RECONNECTING, function () {\n        _this128.ws.reconnectMode = \"retry\", _this128.emit(\"reconnecting\");\n      }), _this128.ws.on(Km.CONNECTED, _this128.onOpen), _this128.ws.on(Km.ON_MESSAGE, _this128.onMessage), _this128.ws.on(Km.CLOSED, _this128.onClose);\n      return _this128;\n    }\n    _createClass($O, [{\n      key: \"isConnect\",\n      value: function isConnect() {\n        return \"connected\" === this.ws.state;\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function sendMessage(e) {\n        var t = this.requestId++;\n        return e.requestId = t, e.seq = t, this.ws.sendMessage(e), t;\n      }\n    }, {\n      key: \"waitStatus\",\n      value: function waitStatus(e) {\n        var _this129 = this;\n        return new Cl(function (t, i) {\n          var r = window.setTimeout(function () {\n            i(new vE(TE.TIMEOUT, \"wait status timeout, status: \".concat(e)));\n          }, 5e3);\n          _this129.once(e, function (n) {\n            window.clearTimeout(r), n.state && 0 !== n.state ? i(new vE(TE.CROSS_CHANNEL_WAIT_STATUS_ERROR, \"wait status error, status: \".concat(e))) : t(void 0);\n          }), _this129.once(\"dispose\", function () {\n            window.clearTimeout(r), i(new vE(TE.WS_ABORT));\n          });\n        });\n      }\n    }, {\n      key: \"request\",\n      value: function () {\n        var _request4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee99(e) {\n          var _this130 = this;\n          var t, i, r, n;\n          return _regeneratorRuntime().wrap(function _callee99$(_context99) {\n            while (1) switch (_context99.prev = _context99.next) {\n              case 0:\n                if (!(\"closed\" === this.ws.state)) {\n                  _context99.next = 2;\n                  break;\n                }\n                throw new vE(TE.WS_DISCONNECT);\n              case 2:\n                t = function t() {\n                  return new Cl(function (e, t) {\n                    _this130.ws.once(Km.CLOSED, function () {\n                      return t(new vE(TE.WS_ABORT));\n                    }), _this130.ws.once(Km.CONNECTED, e);\n                  });\n                };\n                _context99.t0 = \"connected\" !== this.ws.state;\n                if (!_context99.t0) {\n                  _context99.next = 7;\n                  break;\n                }\n                _context99.next = 7;\n                return t();\n              case 7:\n                i = this.sendMessage(e);\n                r = new Cl(function (e, t) {\n                  var r = function r() {\n                    t(new vE(TE.WS_ABORT));\n                  };\n                  _this130.ws.once(Km.RECONNECTING, r), _this130.ws.once(Km.CLOSED, r), _this130.once(\"req_\".concat(i), e), LR(3e3).then(function () {\n                    _this130.removeAllListeners(\"req_\".concat(i)), _this130.ws.off(Km.RECONNECTING, r), _this130.ws.off(Km.CLOSED, r), t(new vE(TE.TIMEOUT, \"cross channel ws request timeout\"));\n                  });\n                });\n                _context99.next = 11;\n                return r;\n              case 11:\n                n = _context99.sent;\n                if (!(!n || 200 !== n.code)) {\n                  _context99.next = 14;\n                  break;\n                }\n                throw new vE(TE.CROSS_CHANNEL_SERVER_ERROR_RESPONSE, \"response: \".concat(JSON.stringify(n)));\n              case 14:\n                return _context99.abrupt(\"return\", n);\n              case 15:\n              case \"end\":\n                return _context99.stop();\n            }\n          }, _callee99, this);\n        }));\n        function request(_x169) {\n          return _request4.apply(this, arguments);\n        }\n        return request;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee100(e) {\n          return _regeneratorRuntime().wrap(function _callee100$(_context100) {\n            while (1) switch (_context100.prev = _context100.next) {\n              case 0:\n                this.ws.removeAllListeners(Km.REQUEST_NEW_URLS);\n                this.ws.on(Km.REQUEST_NEW_URLS, function (t) {\n                  t(e);\n                });\n                _context100.next = 4;\n                return this.ws.init(e);\n              case 4:\n              case \"end\":\n                return _context100.stop();\n            }\n          }, _callee100, this);\n        }));\n        function connect(_x170) {\n          return _connect2.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        this.clearHeartBeatCheck(), this.emit(\"dispose\"), this.removeAllListeners(), this.ws.close();\n      }\n    }, {\n      key: \"sendPing\",\n      value: function sendPing(e) {\n        var t = this.requestId++;\n        return e.requestId = t, this.ws.sendMessage(e), t;\n      }\n    }, {\n      key: \"startHeartBeatCheck\",\n      value: function startHeartBeatCheck() {\n        var _this131 = this;\n        this.heartBeatTimer && window.clearInterval(this.heartBeatTimer), this.heartBeatTimer = window.setInterval(function () {\n          _this131.sendPing({\n            command: \"ping\",\n            appId: _this131.joinInfo.appId,\n            cname: _this131.joinInfo.cname,\n            uid: _this131.joinInfo.uid.toString(),\n            sid: _this131.joinInfo.sid,\n            ts: +new Date(),\n            requestId: 0\n          });\n        }, 3e3);\n      }\n    }, {\n      key: \"clearHeartBeatCheck\",\n      value: function clearHeartBeatCheck() {\n        window.clearInterval(this.heartBeatTimer), this.heartBeatTimer = void 0;\n      }\n    }]);\n    return $O;\n  }(gE);\n  var eb = /*#__PURE__*/function (_gE27) {\n    _inherits(eb, _gE27);\n    _createClass(eb, [{\n      key: \"state\",\n      set: function set(e) {\n        e !== this._state && (e !== og.RELAY_STATE_FAILURE && (this.errorCode = sg.RELAY_OK), this.emit(\"state\", e, this.errorCode), this._state = e);\n      },\n      get: function get() {\n        return this._state;\n      }\n    }]);\n    function eb(e, t, i, r) {\n      var _this132;\n      _classCallCheck(this, eb);\n      _this132 = _possibleConstructorReturn(this, _getPrototypeOf(eb).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"joinInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"sid\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"clientId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"cancelToken\", fE.CancelToken.source()), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"workerToken\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"requestId\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"signal\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"prevChannelMediaConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"httpRetryConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"_state\", og.RELAY_STATE_IDLE), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"errorCode\", sg.RELAY_OK), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"onStatus\", function (e) {\n        NE.debug(\"[\".concat(_this132.clientId, \"] ChannelMediaStatus: \").concat(JSON.stringify(e))), e && e.command && (\"onAudioPacketReceived\" === e.command && _this132.emit(\"event\", ng.PACKET_RECEIVED_AUDIO_FROM_SRC), \"onVideoPacketReceived\" === e.command && _this132.emit(\"event\", ng.PACKET_RECEIVED_VIDEO_FROM_SRC), \"onSrcTokenPrivilegeDidExpire\" === e.command && (_this132.errorCode = sg.SRC_TOKEN_EXPIRED, _this132.state = og.RELAY_STATE_FAILURE), \"onDestTokenPrivilegeDidExpire\" === e.command && (_this132.errorCode = sg.DEST_TOKEN_EXPIRED, _this132.state = og.RELAY_STATE_FAILURE));\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this132)), \"onReconnect\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee101() {\n        return _regeneratorRuntime().wrap(function _callee101$(_context101) {\n          while (1) switch (_context101.prev = _context101.next) {\n            case 0:\n              NE.debug(\"[\".concat(_this132.clientId, \"] ChannelMediaSocket disconnect, reconnecting\")), _this132.emit(\"event\", ng.NETWORK_DISCONNECTED), _this132.state = og.RELAY_STATE_IDLE, _this132.prevChannelMediaConfig && _this132.sendStartRelayMessage(_this132.prevChannelMediaConfig).catch(function (e) {\n                _this132.state !== og.RELAY_STATE_IDLE && (NE.error(\"auto restart channel media relay failed\", e.toString()), _this132.errorCode = sg.SERVER_CONNECTION_LOST, _this132.state = og.RELAY_STATE_FAILURE);\n              });\n            case 1:\n            case \"end\":\n              return _context101.stop();\n          }\n        }, _callee101);\n      }))), _this132.joinInfo = e, _this132.clientId = t, _this132.sid = UR(), _this132.signal = new $O(_this132.joinInfo, _this132.clientId, i), _this132.httpRetryConfig = r;\n      return _this132;\n    }\n    _createClass(eb, [{\n      key: \"startChannelMediaRelay\",\n      value: function () {\n        var _startChannelMediaRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee102(e) {\n          return _regeneratorRuntime().wrap(function _callee102$(_context102) {\n            while (1) switch (_context102.prev = _context102.next) {\n              case 0:\n                if (!(this.state !== og.RELAY_STATE_IDLE)) {\n                  _context102.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION);\n              case 2:\n                this.state = og.RELAY_STATE_CONNECTING;\n                _context102.next = 5;\n                return this.connect();\n              case 5:\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: connect success\"));\n                _context102.prev = 6;\n                _context102.next = 9;\n                return this.sendStartRelayMessage(e);\n              case 9:\n                _context102.next = 20;\n                break;\n              case 11:\n                _context102.prev = 11;\n                _context102.t0 = _context102[\"catch\"](6);\n                if (!(_context102.t0.data && _context102.t0.data.serverResponse && \"SetSourceChannel\" === _context102.t0.data.serverResponse.command)) {\n                  _context102.next = 15;\n                  break;\n                }\n                throw new vE(TE.CROSS_CHANNEL_FAILED_JOIN_SRC);\n              case 15:\n                if (!(_context102.t0.data && _context102.t0.data.serverResponse && \"SetDestChannelStatus\" === _context102.t0.serverResponse.command)) {\n                  _context102.next = 17;\n                  break;\n                }\n                throw new vE(TE.CROSS_CHANNEL_FAILED_JOIN_DEST);\n              case 17:\n                if (!(_context102.t0.data && _context102.t0.data.serverResponse && \"StartPacketTransfer\" === _context102.t0.serverResponse.command)) {\n                  _context102.next = 19;\n                  break;\n                }\n                throw new vE(TE.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);\n              case 19:\n                throw _context102.t0;\n              case 20:\n                this.prevChannelMediaConfig = e;\n              case 21:\n              case \"end\":\n                return _context102.stop();\n            }\n          }, _callee102, this, [[6, 11]]);\n        }));\n        function startChannelMediaRelay(_x171) {\n          return _startChannelMediaRelay.apply(this, arguments);\n        }\n        return startChannelMediaRelay;\n      }()\n    }, {\n      key: \"updateChannelMediaRelay\",\n      value: function () {\n        var _updateChannelMediaRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee103(e) {\n          return _regeneratorRuntime().wrap(function _callee103$(_context103) {\n            while (1) switch (_context103.prev = _context103.next) {\n              case 0:\n                if (!(this.state !== og.RELAY_STATE_RUNNING)) {\n                  _context103.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION);\n              case 2:\n                _context103.next = 4;\n                return this.sendUpdateMessage(e);\n              case 4:\n                this.prevChannelMediaConfig = e;\n              case 5:\n              case \"end\":\n                return _context103.stop();\n            }\n          }, _callee103, this);\n        }));\n        function updateChannelMediaRelay(_x172) {\n          return _updateChannelMediaRelay.apply(this, arguments);\n        }\n        return updateChannelMediaRelay;\n      }()\n    }, {\n      key: \"stopChannelMediaRelay\",\n      value: function () {\n        var _stopChannelMediaRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee104() {\n          return _regeneratorRuntime().wrap(function _callee104$(_context104) {\n            while (1) switch (_context104.prev = _context104.next) {\n              case 0:\n                _context104.next = 2;\n                return this.sendStopRelayMessage();\n              case 2:\n                NE.debug(\"[\".concat(this.clientId, \"] stopChannelMediaRelay: send stop message success\"));\n                this.state = og.RELAY_STATE_IDLE;\n                this.dispose();\n              case 5:\n              case \"end\":\n                return _context104.stop();\n            }\n          }, _callee104, this);\n        }));\n        function stopChannelMediaRelay() {\n          return _stopChannelMediaRelay.apply(this, arguments);\n        }\n        return stopChannelMediaRelay;\n      }()\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        NE.debug(\"[\".concat(this.clientId, \"] disposeChannelMediaRelay\")), this.cancelToken.cancel(), this.cancelToken = fE.CancelToken.source(), this.state = og.RELAY_STATE_IDLE, this.emit(\"dispose\"), this.signal.dispose(), this.prevChannelMediaConfig = void 0;\n      }\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee105() {\n          var e;\n          return _regeneratorRuntime().wrap(function _callee105$(_context105) {\n            while (1) switch (_context105.prev = _context105.next) {\n              case 0:\n                _context105.next = 2;\n                return FO(this.joinInfo, this.cancelToken.token, this.httpRetryConfig);\n              case 2:\n                e = _context105.sent;\n                this.workerToken = e.workerToken;\n                _context105.next = 6;\n                return this.signal.connect(e.addressList);\n              case 6:\n                this.emit(\"event\", ng.NETWORK_CONNECTED);\n                this.signal.on(\"status\", this.onStatus);\n                this.signal.on(\"reconnecting\", this.onReconnect);\n              case 9:\n              case \"end\":\n                return _context105.stop();\n            }\n          }, _callee105, this);\n        }));\n        function connect() {\n          return _connect3.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"sendStartRelayMessage\",\n      value: function () {\n        var _sendStartRelayMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee106(e) {\n          var t, i, r, n, o, s;\n          return _regeneratorRuntime().wrap(function _callee106$(_context106) {\n            while (1) switch (_context106.prev = _context106.next) {\n              case 0:\n                t = this.genMessage(rg.StopPacketTransfer);\n                _context106.next = 3;\n                return this.signal.request(t);\n              case 3:\n                _context106.next = 5;\n                return this.signal.waitStatus(\"Normal Quit\");\n              case 5:\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: StopPacketTransfer success\"));\n                i = this.genMessage(rg.SetSdkProfile, e);\n                _context106.next = 9;\n                return this.signal.request(i);\n              case 9:\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetSdkProfile success\"));\n                r = this.genMessage(rg.SetSourceChannel, e);\n                _context106.next = 13;\n                return this.signal.request(r);\n              case 13:\n                _context106.next = 15;\n                return this.signal.waitStatus(\"SetSourceChannelStatus\");\n              case 15:\n                this.emit(\"event\", ng.PACKET_JOINED_SRC_CHANNEL);\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetSourceChannel success\"));\n                n = this.genMessage(rg.SetSourceUserId, e);\n                _context106.next = 20;\n                return this.signal.request(n);\n              case 20:\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetSourceUserId success\"));\n                o = this.genMessage(rg.SetDestChannel, e);\n                _context106.next = 24;\n                return this.signal.request(o);\n              case 24:\n                _context106.next = 26;\n                return this.signal.waitStatus(\"SetDestChannelStatus\");\n              case 26:\n                this.emit(\"event\", ng.PACKET_JOINED_DEST_CHANNEL);\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: SetDestChannel success\"));\n                s = this.genMessage(rg.StartPacketTransfer, e);\n                _context106.next = 31;\n                return this.signal.request(s);\n              case 31:\n                this.emit(\"event\", ng.PACKET_SENT_TO_DEST_CHANNEL);\n                this.state = og.RELAY_STATE_RUNNING;\n                NE.debug(\"[\".concat(this.clientId, \"] startChannelMediaRelay: StartPacketTransfer success\"));\n              case 34:\n              case \"end\":\n                return _context106.stop();\n            }\n          }, _callee106, this);\n        }));\n        function sendStartRelayMessage(_x173) {\n          return _sendStartRelayMessage.apply(this, arguments);\n        }\n        return sendStartRelayMessage;\n      }()\n    }, {\n      key: \"sendUpdateMessage\",\n      value: function () {\n        var _sendUpdateMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee107(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee107$(_context107) {\n            while (1) switch (_context107.prev = _context107.next) {\n              case 0:\n                t = this.genMessage(rg.UpdateDestChannel, e);\n                _context107.next = 3;\n                return this.signal.request(t);\n              case 3:\n                this.emit(\"event\", ng.PACKET_UPDATE_DEST_CHANNEL);\n                NE.debug(\"[\".concat(this.clientId, \"] sendUpdateMessage: UpdateDestChannel success\"));\n              case 5:\n              case \"end\":\n                return _context107.stop();\n            }\n          }, _callee107, this);\n        }));\n        function sendUpdateMessage(_x174) {\n          return _sendUpdateMessage.apply(this, arguments);\n        }\n        return sendUpdateMessage;\n      }()\n    }, {\n      key: \"sendStopRelayMessage\",\n      value: function () {\n        var _sendStopRelayMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee108() {\n          var e;\n          return _regeneratorRuntime().wrap(function _callee108$(_context108) {\n            while (1) switch (_context108.prev = _context108.next) {\n              case 0:\n                e = this.genMessage(rg.StopPacketTransfer);\n                _context108.next = 3;\n                return this.signal.request(e);\n              case 3:\n                NE.debug(\"[\".concat(this.clientId, \"] sendStopRelayMessage: StopPacketTransfer success\"));\n              case 4:\n              case \"end\":\n                return _context108.stop();\n            }\n          }, _callee108, this);\n        }));\n        function sendStopRelayMessage() {\n          return _sendStopRelayMessage.apply(this, arguments);\n        }\n        return sendStopRelayMessage;\n      }()\n    }, {\n      key: \"genMessage\",\n      value: function genMessage(e, t) {\n        var _this133 = this;\n        var i = [],\n          r = [],\n          n = [];\n        this.requestId += 1;\n        var o = {\n          appId: this.joinInfo.appId,\n          cname: this.joinInfo.cname,\n          uid: this.joinInfo.uid.toString(),\n          sdkVersion: PE,\n          sid: this.sid,\n          ts: Date.now(),\n          requestId: this.requestId,\n          seq: this.requestId,\n          allocate: !0,\n          clientRequest: {}\n        };\n        \"4.16.1\" === o.sdkVersion && (o.sdkVersion = \"0.0.1\");\n        var s = null,\n          a = null;\n        switch (e) {\n          case rg.SetSdkProfile:\n            return o.clientRequest = {\n              command: \"SetSdkProfile\",\n              type: \"multi_channel\"\n            }, o;\n          case rg.SetSourceChannel:\n            if (a = t && t.getSrcChannelMediaInfo(), !a) throw new vE(TE.UNEXPECTED_ERROR, \"can not find source config\");\n            return o.clientRequest = {\n              command: \"SetSourceChannel\",\n              uid: \"0\",\n              channelName: a.channelName,\n              token: a.token || this.joinInfo.appId\n            }, o;\n          case rg.SetSourceUserId:\n            if (a = t && t.getSrcChannelMediaInfo(), !a) throw new vE(TE.UNEXPECTED_ERROR, \"can not find source config\");\n            return o.clientRequest = {\n              command: \"SetSourceUserId\",\n              uid: a.uid + \"\"\n            }, o;\n          case rg.SetDestChannel:\n            if (s = t && t.getDestChannelMediaInfo(), !s) throw new vE(TE.UNEXPECTED_ERROR, \"can not find dest config\");\n            return s.forEach(function (e) {\n              i.push(e.channelName), r.push(e.uid + \"\"), n.push(e.token || _this133.joinInfo.appId);\n            }), o.clientRequest = {\n              command: \"SetDestChannel\",\n              channelName: i,\n              uid: r,\n              token: n\n            }, o;\n          case rg.StartPacketTransfer:\n            return o.clientRequest = {\n              command: \"StartPacketTransfer\"\n            }, o;\n          case rg.Reconnect:\n            return o.clientRequest = {\n              command: \"Reconnect\"\n            }, o;\n          case rg.StopPacketTransfer:\n            return o.clientRequest = {\n              command: \"StopPacketTransfer\"\n            }, o;\n          case rg.UpdateDestChannel:\n            if (s = t && t.getDestChannelMediaInfo(), !s) throw new vE(TE.UNEXPECTED_ERROR, \"can not find dest config\");\n            return s.forEach(function (e) {\n              i.push(e.channelName), r.push(e.uid + \"\"), n.push(e.token || _this133.joinInfo.appId);\n            }), o.clientRequest = {\n              command: \"UpdateDestChannel\",\n              channelName: i,\n              uid: r,\n              token: n\n            }, o;\n        }\n        return o;\n      }\n    }]);\n    return eb;\n  }(gE);\n  var tb = function tb(e) {\n      var t = document.createElement(\"canvas\");\n      return t.width = 2, t.height = 2, new Cl(function (i, r) {\n        t.toBlob( /*#__PURE__*/function () {\n          var _ref30 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee109(e) {\n            var _r29;\n            return _regeneratorRuntime().wrap(function _callee109$(_context109) {\n              while (1) switch (_context109.prev = _context109.next) {\n                case 0:\n                  if (!(t.remove(), e)) {\n                    _context109.next = 7;\n                    break;\n                  }\n                  _context109.next = 3;\n                  return ib(e);\n                case 3:\n                  _r29 = _context109.sent;\n                  i({\n                    buffer: _r29,\n                    width: t.width,\n                    height: t.height\n                  });\n                  _context109.next = 8;\n                  break;\n                case 7:\n                  r(new vE(TE.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));\n                case 8:\n                case \"end\":\n                  return _context109.stop();\n              }\n            }, _callee109);\n          }));\n          return function (_x175) {\n            return _ref30.apply(this, arguments);\n          };\n        }(), e, 1);\n      });\n    },\n    ib = /*#__PURE__*/function () {\n      var _ref31 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee110(e) {\n        var t;\n        return _regeneratorRuntime().wrap(function _callee110$(_context110) {\n          while (1) switch (_context110.prev = _context110.next) {\n            case 0:\n              _context110.next = 2;\n              return e.arrayBuffer();\n            case 2:\n              t = _context110.sent;\n              return _context110.abrupt(\"return\", new Uint8Array(t));\n            case 4:\n            case \"end\":\n              return _context110.stop();\n          }\n        }, _callee110);\n      }));\n      return function ib(_x176) {\n        return _ref31.apply(this, arguments);\n      };\n    }();\n  function rb(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function nb(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? rb(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : rb(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var ob = /*#__PURE__*/function () {\n    _createClass(ob, [{\n      key: \"videoElementStatus\",\n      get: function get() {\n        return this._videoElementStatus;\n      },\n      set: function set(e) {\n        e !== this._videoElementStatus && (NE.debug(\"[\".concat(this.trackId, \"] video-element-status change \").concat(this._videoElementStatus, \" => \").concat(e)), this._videoElementStatus = e);\n      }\n    }]);\n    function ob(e) {\n      var _this134 = this;\n      _classCallCheck(this, ob);\n      mp(this, \"trackId\", void 0), mp(this, \"config\", void 0), mp(this, \"onFirstVideoFrameDecoded\", void 0), mp(this, \"freezeTimeCounterList\", []), mp(this, \"renderFreezeAccTime\", 0), mp(this, \"timeUpdatedCount\", 0), mp(this, \"freezeTime\", 0), mp(this, \"playbackTime\", 0), mp(this, \"lastTimeUpdatedTime\", 0), mp(this, \"autoplayFailed\", !1), mp(this, \"videoTrack\", void 0), mp(this, \"container\", void 0), mp(this, \"videoElement\", void 0), mp(this, \"videoElementCheckInterval\", void 0), mp(this, \"_videoElementStatus\", am.NONE), mp(this, \"slot\", void 0), mp(this, \"isGettingVideoDimensions\", !1), mp(this, \"handleVideoEvents\", function (e) {\n        switch (e.type) {\n          case \"play\":\n          case \"playing\":\n            _this134.startGetVideoDimensions(), _this134.videoElementStatus = am.PLAYING;\n            break;\n          case \"loadeddata\":\n            _this134.onFirstVideoFrameDecoded && _this134.onFirstVideoFrameDecoded();\n            break;\n          case \"canplay\":\n            _this134.videoElementStatus = am.CANPLAY;\n            break;\n          case \"stalled\":\n            _this134.videoElementStatus = am.STALLED;\n            break;\n          case \"suspend\":\n            _this134.videoElementStatus = am.SUSPEND;\n            break;\n          case \"pause\":\n            _this134.videoElementStatus = am.PAUSED, Zh() || np() || zh() && _this134.autoplayFailed || !_this134.videoElement || !_this134.videoTrack || \"live\" !== _this134.videoTrack.readyState || (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume\")), _this134.videoElement.play());\n            break;\n          case \"waiting\":\n            _this134.videoElementStatus = am.WAITING;\n            break;\n          case \"abort\":\n            _this134.videoElementStatus = am.ABORT;\n            break;\n          case \"ended\":\n            _this134.videoElementStatus = am.ENDED;\n            break;\n          case \"emptied\":\n            _this134.videoElementStatus = am.EMPTIED;\n            break;\n          case \"error\":\n            {\n              var t;\n              _this134.videoElementStatus = am.ERROR;\n              var _e69 = null === (t = _this134.videoElement) || void 0 === t ? void 0 : t.error;\n              _e69 && NE.error(\"[\".concat(_this134.trackId, \"] media error, code: \").concat(_e69.code, \", message: \").concat(_e69.message));\n              break;\n            }\n          case \"timeupdate\":\n            {\n              var _e70 = performance.now();\n              if (_this134.timeUpdatedCount += 1, _this134.timeUpdatedCount < 10) return void (_this134.lastTimeUpdatedTime = _e70);\n              var _t92 = _e70 - _this134.lastTimeUpdatedTime,\n                i = _this134.lastTimeUpdatedTime;\n              if (_this134.lastTimeUpdatedTime = _e70, mR.lastVisibleTime < mR.lastHiddenTime || i < mR.lastHiddenTime || i < mR.lastVisibleTime) return;\n              for (_t92 > HE(\"VIDEO_FREEZE_DURATION\") && (_this134.freezeTime += _t92), _this134.playbackTime += _t92; _this134.playbackTime >= 6e3;) {\n                _this134.playbackTime -= 6e3;\n                var _e71 = Math.min(6e3, _this134.freezeTime);\n                _this134.freezeTimeCounterList.push(_e71), _this134.freezeTime = Math.max(0, _this134.freezeTime - 6e3);\n              }\n              break;\n            }\n        }\n      }), mp(this, \"startGetVideoDimensions\", function () {\n        var e = function e() {\n          if (_this134.isGettingVideoDimensions = !0, _this134.videoElement && _this134.videoElement.videoWidth * _this134.videoElement.videoHeight > 4) return NE.debug(\"[\".concat(_this134.trackId, \"] current video dimensions:\"), _this134.videoElement.videoWidth, _this134.videoElement.videoHeight), void (_this134.isGettingVideoDimensions = !1);\n          setTimeout(e, 500);\n        };\n        !_this134.isGettingVideoDimensions && e();\n      }), mp(this, \"autoResumeAfterInterruption\", function () {\n        _this134.videoElement && _this134.videoTrack && \"live\" === _this134.videoTrack.readyState && \"running\" === LT.curState && (rp() ? (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume for iOS 15.2\")), _this134.videoElement.srcObject = null, _this134.videoElement.srcObject = new MediaStream([_this134.videoTrack]), _this134.videoElement.play()) : ip() ? (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume for iOS 15.1\")), _this134.videoElement.srcObject = null, _this134.videoElement.srcObject = new MediaStream([_this134.videoTrack]), _this134.videoElement.play()) : tp() && (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume for iOS 15.0\")), _this134.videoElement.pause(), _this134.videoElement.play()));\n      }), mp(this, \"autoResumeAfterInterruptionOnIOS15\", function () {\n        _this134.videoElement && _this134.videoTrack && \"live\" === _this134.videoTrack.readyState && (rp() ? (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume for iOS 15.2\")), _this134.videoElement.srcObject = null, _this134.videoElement.srcObject = new MediaStream([_this134.videoTrack]), _this134.videoElement.play()) : ip() ? (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume for iOS 15.1\")), _this134.videoElement.srcObject = null, _this134.videoElement.srcObject = new MediaStream([_this134.videoTrack]), _this134.videoElement.play()) : tp() && (NE.debug(\"[track-\".concat(_this134.trackId, \"] video element paused, auto resume for iOS 15.0\")), _this134.videoElement.pause(), _this134.videoElement.play()));\n      }), this.slot = e.element, this.trackId = e.trackId, this.updateConfig(e), LT.on(CT.IOS_INTERRUPTION_END, this.autoResumeAfterInterruption), LT.on(CT.IOS_15_INTERRUPTION_END, this.autoResumeAfterInterruptionOnIOS15);\n    }\n    _createClass(ob, [{\n      key: \"updateConfig\",\n      value: function updateConfig(e) {\n        this.config = e, this.trackId = e.trackId;\n        var t = e.element;\n        t !== this.slot && (this.destroy(), this.slot = t), this.createElements();\n      }\n    }, {\n      key: \"updateVideoTrack\",\n      value: function updateVideoTrack(e) {\n        this.videoTrack !== e && (this.videoTrack = e, this.createElements());\n      }\n    }, {\n      key: \"play\",\n      value: function play(e) {\n        var _this135 = this;\n        if (this.videoElement) {\n          var t = this.videoElement.play();\n          t && t.catch && t.catch(function (t) {\n            e && IT.autoplayFailed(e, \"video\", t.message, _this135.trackId), \"NotAllowedError\" === t.name ? (NE.warning(\"detected video element autoplay failed\", t), _this135.autoplayFailed = !0, _this135.handleAutoPlayFailed()) : NE.warning(\"[\".concat(_this135.trackId, \"] play warning: \"), t);\n          });\n          var i = Bh();\n          if ((\"Safari\" === i.name && 15 === Number(i.version) || ep()) && t && t.then && t.catch) {\n            var _e72 = function _e72() {\n              _this135.config.mirror && _this135.videoElement && (_this135.videoElement.style.transform = \"rotateY(180deg)\");\n            };\n            t.then(_e72).catch(_e72);\n          }\n        }\n      }\n    }, {\n      key: \"getCurrentFrame\",\n      value: function getCurrentFrame() {\n        if (!this.videoElement) return new ImageData(2, 2);\n        var e = document.createElement(\"canvas\");\n        e.width = this.videoElement.videoWidth, e.height = this.videoElement.videoHeight;\n        var t = e.getContext(\"2d\");\n        if (!t) return NE.error(\"create canvas context failed!\"), new ImageData(2, 2);\n        t.drawImage(this.videoElement, 0, 0, e.width, e.height);\n        var i = t.getImageData(0, 0, e.width, e.height);\n        return e.remove(), i;\n      }\n    }, {\n      key: \"getCurrentFrameToUint8Array\",\n      value: function () {\n        var _getCurrentFrameToUint8Array = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee112(e) {\n          var t,\n            i,\n            r,\n            _args112 = arguments;\n          return _regeneratorRuntime().wrap(function _callee112$(_context112) {\n            while (1) switch (_context112.prev = _context112.next) {\n              case 0:\n                t = _args112.length > 1 && void 0 !== _args112[1] ? _args112[1] : 1;\n                if (this.videoElement) {\n                  _context112.next = 5;\n                  break;\n                }\n                _context112.next = 4;\n                return tb(e);\n              case 4:\n                return _context112.abrupt(\"return\", _context112.sent);\n              case 5:\n                i = document.createElement(\"canvas\");\n                i.width = this.videoElement.videoWidth, i.height = this.videoElement.videoHeight;\n                r = i.getContext(\"2d\");\n                if (!r) {\n                  _context112.next = 12;\n                  break;\n                }\n                _context112.t0 = (r.drawImage(this.videoElement, 0, 0, i.width, i.height), new Cl(function (r, n) {\n                  i.toBlob( /*#__PURE__*/function () {\n                    var _ref32 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee111(e) {\n                      var _t93;\n                      return _regeneratorRuntime().wrap(function _callee111$(_context111) {\n                        while (1) switch (_context111.prev = _context111.next) {\n                          case 0:\n                            if (!(i.remove(), e)) {\n                              _context111.next = 7;\n                              break;\n                            }\n                            _context111.next = 3;\n                            return ib(e);\n                          case 3:\n                            _t93 = _context111.sent;\n                            r({\n                              buffer: _t93,\n                              width: i.width,\n                              height: i.height\n                            });\n                            _context111.next = 8;\n                            break;\n                          case 7:\n                            n(new vE(TE.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));\n                          case 8:\n                          case \"end\":\n                            return _context111.stop();\n                        }\n                      }, _callee111);\n                    }));\n                    return function (_x178) {\n                      return _ref32.apply(this, arguments);\n                    };\n                  }(), e, t < 0 ? .1 : t > 1 ? 1 : t);\n                }));\n                _context112.next = 15;\n                break;\n              case 12:\n                _context112.next = 14;\n                return tb(e);\n              case 14:\n                _context112.t0 = _context112.sent;\n              case 15:\n                return _context112.abrupt(\"return\", _context112.t0);\n              case 16:\n              case \"end\":\n                return _context112.stop();\n            }\n          }, _callee112, this);\n        }));\n        function getCurrentFrameToUint8Array(_x177) {\n          return _getCurrentFrameToUint8Array.apply(this, arguments);\n        }\n        return getCurrentFrameToUint8Array;\n      }()\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (LT.off(CT.IOS_INTERRUPTION_END, this.autoResumeAfterInterruption), LT.off(CT.IOS_15_INTERRUPTION_END, this.autoResumeAfterInterruptionOnIOS15), this.videoElement && (this.videoElement.srcObject = null, this.videoElement.remove(), this.videoElement = void 0), this.container) {\n          try {\n            this.container.remove(), this.slot.removeChild(this.container);\n          } catch (e) {}\n          this.container = void 0;\n        }\n        this.freezeTimeCounterList = [];\n      }\n    }, {\n      key: \"createElements\",\n      value: function createElements() {\n        this.container || (this.container = document.createElement(\"div\")), this.container.id = \"agora-video-player-\".concat(this.trackId), this.container.style.width = \"100%\", this.container.style.height = \"100%\", this.container.style.position = \"relative\", this.container.style.overflow = \"hidden\", this.videoTrack ? (this.container.style.backgroundColor = \"black\", this.createVideoElement(), this.container.appendChild(this.videoElement)) : this.removeVideoElement(), this.slot.appendChild(this.container);\n      }\n    }, {\n      key: \"createVideoElement\",\n      value: function createVideoElement() {\n        var _this136 = this;\n        if (!this.videoElement && (this.videoElementStatus = am.INIT, this.videoElement = document.createElement(\"video\"), this.container && this.container.appendChild(this.videoElement), sb.forEach(function (e) {\n          _this136.videoElement && _this136.videoElement.addEventListener(e, _this136.handleVideoEvents);\n        }), this.videoElementCheckInterval = window.setInterval(function () {\n          !document.getElementById(\"video_\".concat(_this136.trackId)) && _this136.videoElement && (_this136.videoElementStatus = am.DESTROYED);\n        }, 1e3), HE(\"ENABLE_VIDEO_FRAME_CALLBACK\"))) {\n          var e, t;\n          var _i44;\n          var _r30 = function _r30(e, t) {\n            if (_this136.videoElementStatus === am.PLAYING) {\n              if (_i44) {\n                var _e73 = t.presentationTime - _i44.presentationTime;\n                _e73 > HE(\"VIDEO_FREEZE_DURATION\") && mR.lastVisibleTime >= mR.lastHiddenTime && _i44.timestamp > mR.lastVisibleTime && _i44.timestamp > mR.lastHiddenTime && (_this136.renderFreezeAccTime += _e73);\n              }\n              _i44 = nb(nb({}, t), {}, {\n                timestamp: e\n              });\n            }\n            var n, o;\n            HE(\"ENABLE_VIDEO_FRAME_CALLBACK\") && (null === (n = _this136.videoElement) || void 0 === n || null === (o = n.requestVideoFrameCallback) || void 0 === o || o.call(n, _r30));\n          };\n          null === (e = (t = this.videoElement).requestVideoFrameCallback) || void 0 === e || e.call(t, _r30);\n        }\n        this.videoElement.id = \"video_\".concat(this.trackId), this.videoElement.className = \"agora_video_player\", this.videoElement.style.width = \"100%\", this.videoElement.style.height = \"100%\", this.videoElement.style.position = \"absolute\", this.videoElement.controls = !1, this.videoElement.setAttribute(\"playsinline\", \"\"), this.videoElement.style.left = \"0\", this.videoElement.style.top = \"0\", cp() && (this.videoElement.poster = \"noposter\");\n        var i = Bh();\n        if (\"Safari\" === i.name && 15 === Number(i.version) || ep() || !this.config.mirror || (this.videoElement.style.transform = \"rotateY(180deg)\"), this.config.fit ? this.videoElement.style.objectFit = this.config.fit : this.videoElement.style.objectFit = \"cover\", this.videoElement.setAttribute(\"muted\", \"\"), this.videoElement.muted = !0, this.videoElement.srcObject && this.videoElement.srcObject instanceof MediaStream) {\n          this.videoElement.srcObject.getVideoTracks()[0] !== this.videoTrack && (this.videoElement.srcObject = this.videoTrack ? new MediaStream([this.videoTrack]) : null, Qh() && this.videoElement.load());\n        } else this.videoElement.srcObject = this.videoTrack ? new MediaStream([this.videoTrack]) : null, Qh() && this.videoElement.load();\n        var r = this.videoElement.play();\n        void 0 !== r && r.catch(function (e) {\n          NE.debug(\"[\".concat(_this136.trackId, \"] playback interrupted\"), e.toString());\n        });\n      }\n    }, {\n      key: \"removeVideoElement\",\n      value: function removeVideoElement() {\n        var _this137 = this;\n        if (this.videoElement) {\n          sb.forEach(function (e) {\n            _this137.videoElement && _this137.videoElement.removeEventListener(e, _this137.handleVideoEvents);\n          }), this.videoElementCheckInterval && (window.clearInterval(this.videoElementCheckInterval), this.videoElementCheckInterval = void 0);\n          try {\n            this.container && this.container.removeChild(this.videoElement);\n          } catch (e) {}\n          this.videoElement = void 0, this.videoElementStatus = am.NONE;\n        }\n      }\n    }, {\n      key: \"handleAutoPlayFailed\",\n      value: function handleAutoPlayFailed() {\n        var _this138 = this;\n        if (this.videoElement) {\n          var e = function e(t) {\n            t.preventDefault(), _this138.videoElement && (_this138.videoElement.play().then(function () {\n              NE.debug(\"[\".concat(_this138.trackId, \"] Video element for trackId:\").concat(_this138.trackId, \" autoplay resumed.\"));\n            }).catch(function (e) {\n              NE.error(e);\n            }), _this138.autoplayFailed = !1, dp() ? document.body.removeEventListener(\"click\", e, !0) : (document.body.removeEventListener(\"touchstart\", e, !0), document.body.removeEventListener(\"mousedown\", e, !0)));\n          };\n          dp() ? document.body.addEventListener(\"click\", e, !0) : (document.body.addEventListener(\"touchstart\", e, !0), document.body.addEventListener(\"mousedown\", e, !0)), fT();\n        }\n      }\n    }, {\n      key: \"getVideoElement\",\n      value: function getVideoElement() {\n        return this.videoElement;\n      }\n    }, {\n      key: \"getContainerElement\",\n      value: function getContainerElement() {\n        return this.container;\n      }\n    }]);\n    return ob;\n  }();\n  var sb = [\"play\", \"playing\", \"loadeddata\", \"canplay\", \"pause\", \"stalled\", \"suspend\", \"waiting\", \"abort\", \"emptied\", \"ended\", \"timeupdate\", \"error\"];\n  var ab = {\n    exports: {}\n  };\n  function cb(e, t, i) {\n    var r = e.createShader(i);\n    if (!r) {\n      return new vE(TE.WEBGL_INTERNAL_ERROR, \"can not create shader\").throw();\n    }\n    e.shaderSource(r, t), e.compileShader(r);\n    if (!e.getShaderParameter(r, e.COMPILE_STATUS)) {\n      var _t94 = e.getShaderInfoLog(r);\n      e.deleteShader(r);\n      return new vE(TE.WEBGL_INTERNAL_ERROR, \"error compiling shader:\" + _t94).throw();\n    }\n    return r;\n  }\n  function db(e, t, i, r) {\n    var n = [];\n    for (var _i45 = 0; _i45 < t.length; ++_i45) {\n      var _r31 = 0 === _i45 ? e.VERTEX_SHADER : e.FRAGMENT_SHADER;\n      n.push(cb(e, t[_i45], _r31));\n    }\n    return function (e, t, i, r) {\n      var n = e.createProgram();\n      if (!n) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"can not create webgl program\");\n      if (t.forEach(function (t) {\n        e.attachShader(n, t);\n      }), i && i.forEach(function (t, i) {\n        e.bindAttribLocation(n, r ? r[i] : i, t);\n      }), e.linkProgram(n), !e.getProgramParameter(n, e.LINK_STATUS)) {\n        var _t95 = e.getProgramInfoLog(n);\n        throw e.deleteProgram(n), new vE(TE.WEBGL_INTERNAL_ERROR, \"error in program linking:\" + _t95);\n      }\n      return n;\n    }(e, n, i, r);\n  }\n  !function (e, t) {\n    var i;\n    self, i = function i() {\n      return function () {\n        var e = {\n            3536: function _(e, t, i) {\n              var r = i(1910);\n              e.exports = r;\n            },\n            8171: function _(e, t, i) {\n              i(6450);\n              var r = i(4058).Object,\n                n = e.exports = function (e, t, i) {\n                  return r.defineProperty(e, t, i);\n                };\n              r.defineProperty.sham && (n.sham = !0);\n            },\n            2956: function _(e, t, i) {\n              i(7627), i(6274), i(5967), i(8881), i(4560), i(7206), i(4349), i(7971);\n              var r = i(4058);\n              e.exports = r.Promise;\n            },\n            3685: function _(e, t, i) {\n              e.exports = i(621);\n            },\n            621: function _(e, t, i) {\n              var r = i(3536);\n              e.exports = r;\n            },\n            4883: function _(e, t, i) {\n              var r = i(7475),\n                n = i(9826),\n                o = TypeError;\n              e.exports = function (e) {\n                if (r(e)) return e;\n                throw o(n(e) + \" is not a function\");\n              };\n            },\n            174: function _(e, t, i) {\n              var r = i(4284),\n                n = i(9826),\n                o = TypeError;\n              e.exports = function (e) {\n                if (r(e)) return e;\n                throw o(n(e) + \" is not a constructor\");\n              };\n            },\n            1851: function _(e, t, i) {\n              var r = i(7475),\n                n = String,\n                o = TypeError;\n              e.exports = function (e) {\n                if (\"object\" == typeof e || r(e)) return e;\n                throw o(\"Can't set \" + n(e) + \" as a prototype\");\n              };\n            },\n            8479: function _(e) {\n              e.exports = function () {};\n            },\n            5743: function _(e, t, i) {\n              var r = i(7046),\n                n = TypeError;\n              e.exports = function (e, t) {\n                if (r(t, e)) return e;\n                throw n(\"Incorrect invocation\");\n              };\n            },\n            6059: function _(e, t, i) {\n              var r = i(941),\n                n = String,\n                o = TypeError;\n              e.exports = function (e) {\n                if (r(e)) return e;\n                throw o(n(e) + \" is not an object\");\n              };\n            },\n            1692: function _(e, t, i) {\n              var r = i(4529),\n                n = i(9413),\n                o = i(623),\n                s = function s(e) {\n                  return function (t, i, s) {\n                    var a,\n                      c = r(t),\n                      d = o(c),\n                      u = n(s, d);\n                    if (e && i != i) {\n                      for (; d > u;) if ((a = c[u++]) != a) return !0;\n                    } else for (; d > u; u++) if ((e || u in c) && c[u] === i) return e || u || 0;\n                    return !e && -1;\n                  };\n                };\n              e.exports = {\n                includes: s(!0),\n                indexOf: s(!1)\n              };\n            },\n            3765: function _(e, t, i) {\n              var r = i(5329);\n              e.exports = r([].slice);\n            },\n            1385: function _(e, t, i) {\n              var r = i(9813)(\"iterator\"),\n                n = !1;\n              try {\n                var o = 0,\n                  s = {\n                    next: function next() {\n                      return {\n                        done: !!o++\n                      };\n                    },\n                    return: function _return() {\n                      n = !0;\n                    }\n                  };\n                s[r] = function () {\n                  return this;\n                }, Array.from(s, function () {\n                  throw 2;\n                });\n              } catch (e) {}\n              e.exports = function (e, t) {\n                if (!t && !n) return !1;\n                var i = !1;\n                try {\n                  var o = {};\n                  o[r] = function () {\n                    return {\n                      next: function next() {\n                        return {\n                          done: i = !0\n                        };\n                      }\n                    };\n                  }, e(o);\n                } catch (e) {}\n                return i;\n              };\n            },\n            2532: function _(e, t, i) {\n              var r = i(4163),\n                n = r({}.toString),\n                o = r(\"\".slice);\n              e.exports = function (e) {\n                return o(n(e), 8, -1);\n              };\n            },\n            9697: function _(e, t, i) {\n              var r = i(2885),\n                n = i(7475),\n                o = i(2532),\n                s = i(9813)(\"toStringTag\"),\n                a = Object,\n                c = \"Arguments\" == o(function () {\n                  return arguments;\n                }());\n              e.exports = r ? o : function (e) {\n                var t, i, r;\n                return void 0 === e ? \"Undefined\" : null === e ? \"Null\" : \"string\" == typeof (i = function (e, t) {\n                  try {\n                    return e[t];\n                  } catch (e) {}\n                }(t = a(e), s)) ? i : c ? o(t) : \"Object\" == (r = o(t)) && n(t.callee) ? \"Arguments\" : r;\n              };\n            },\n            3489: function _(e, t, i) {\n              var r = i(953),\n                n = i(1136),\n                o = i(9677),\n                s = i(5988);\n              e.exports = function (e, t, i) {\n                for (var a = n(t), c = s.f, d = o.f, u = 0; u < a.length; u++) {\n                  var l = a[u];\n                  r(e, l) || i && r(i, l) || c(e, l, d(t, l));\n                }\n              };\n            },\n            4160: function _(e, t, i) {\n              var r = i(5981);\n              e.exports = !r(function () {\n                function e() {}\n                return e.prototype.constructor = null, Object.getPrototypeOf(new e()) !== e.prototype;\n              });\n            },\n            3538: function _(e) {\n              e.exports = function (e, t) {\n                return {\n                  value: e,\n                  done: t\n                };\n              };\n            },\n            2029: function _(e, t, i) {\n              var r = i(5746),\n                n = i(5988),\n                o = i(1887);\n              e.exports = r ? function (e, t, i) {\n                return n.f(e, t, o(1, i));\n              } : function (e, t, i) {\n                return e[t] = i, e;\n              };\n            },\n            1887: function _(e) {\n              e.exports = function (e, t) {\n                return {\n                  enumerable: !(1 & e),\n                  configurable: !(2 & e),\n                  writable: !(4 & e),\n                  value: t\n                };\n              };\n            },\n            5929: function _(e, t, i) {\n              var r = i(2029);\n              e.exports = function (e, t, i, n) {\n                return n && n.enumerable ? e[t] = i : r(e, t, i), e;\n              };\n            },\n            5609: function _(e, t, i) {\n              var r = i(1899),\n                n = Object.defineProperty;\n              e.exports = function (e, t) {\n                try {\n                  n(r, e, {\n                    value: t,\n                    configurable: !0,\n                    writable: !0\n                  });\n                } catch (i) {\n                  r[e] = t;\n                }\n                return t;\n              };\n            },\n            5746: function _(e, t, i) {\n              var r = i(5981);\n              e.exports = !r(function () {\n                return 7 != Object.defineProperty({}, 1, {\n                  get: function get() {\n                    return 7;\n                  }\n                })[1];\n              });\n            },\n            6616: function _(e) {\n              var t = \"object\" == typeof document && document.all,\n                i = void 0 === t && void 0 !== t;\n              e.exports = {\n                all: t,\n                IS_HTMLDDA: i\n              };\n            },\n            1333: function _(e, t, i) {\n              var r = i(1899),\n                n = i(941),\n                o = r.document,\n                s = n(o) && n(o.createElement);\n              e.exports = function (e) {\n                return s ? o.createElement(e) : {};\n              };\n            },\n            3281: function _(e) {\n              e.exports = {\n                CSSRuleList: 0,\n                CSSStyleDeclaration: 0,\n                CSSValueList: 0,\n                ClientRectList: 0,\n                DOMRectList: 0,\n                DOMStringList: 0,\n                DOMTokenList: 1,\n                DataTransferItemList: 0,\n                FileList: 0,\n                HTMLAllCollection: 0,\n                HTMLCollection: 0,\n                HTMLFormElement: 0,\n                HTMLSelectElement: 0,\n                MediaList: 0,\n                MimeTypeArray: 0,\n                NamedNodeMap: 0,\n                NodeList: 1,\n                PaintRequestList: 0,\n                Plugin: 0,\n                PluginArray: 0,\n                SVGLengthList: 0,\n                SVGNumberList: 0,\n                SVGPathSegList: 0,\n                SVGPointList: 0,\n                SVGStringList: 0,\n                SVGTransformList: 0,\n                SourceBufferList: 0,\n                StyleSheetList: 0,\n                TextTrackCueList: 0,\n                TextTrackList: 0,\n                TouchList: 0\n              };\n            },\n            3321: function _(e, t, i) {\n              var r = i(8501),\n                n = i(6049);\n              e.exports = !r && !n && \"object\" == typeof window && \"object\" == typeof document;\n            },\n            8501: function _(e) {\n              e.exports = \"object\" == typeof Deno && Deno && \"object\" == typeof Deno.version;\n            },\n            4470: function _(e, t, i) {\n              var r = i(2861),\n                n = i(1899);\n              e.exports = /ipad|iphone|ipod/i.test(r) && void 0 !== n.Pebble;\n            },\n            2749: function _(e, t, i) {\n              var r = i(2861);\n              e.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(r);\n            },\n            6049: function _(e, t, i) {\n              var r = i(2532),\n                n = i(1899);\n              e.exports = \"process\" == r(n.process);\n            },\n            8045: function _(e, t, i) {\n              var r = i(2861);\n              e.exports = /web0s(?!.*chrome)/i.test(r);\n            },\n            2861: function _(e, t, i) {\n              var r = i(626);\n              e.exports = r(\"navigator\", \"userAgent\") || \"\";\n            },\n            3385: function _(e, t, i) {\n              var r,\n                n,\n                o = i(1899),\n                s = i(2861),\n                a = o.process,\n                c = o.Deno,\n                d = a && a.versions || c && c.version,\n                u = d && d.v8;\n              u && (n = (r = u.split(\".\"))[0] > 0 && r[0] < 4 ? 1 : +(r[0] + r[1])), !n && s && (!(r = s.match(/Edge\\/(\\d+)/)) || r[1] >= 74) && (r = s.match(/Chrome\\/(\\d+)/)) && (n = +r[1]), e.exports = n;\n            },\n            6759: function _(e) {\n              e.exports = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"];\n            },\n            3995: function _(e, t, i) {\n              var r = i(5329),\n                n = Error,\n                o = r(\"\".replace),\n                s = String(n(\"zxcasd\").stack),\n                a = /\\n\\s*at [^:]*:[^\\n]*/,\n                c = a.test(s);\n              e.exports = function (e, t) {\n                if (c && \"string\" == typeof e && !n.prepareStackTrace) for (; t--;) e = o(e, a, \"\");\n                return e;\n              };\n            },\n            8780: function _(e, t, i) {\n              var r = i(5981),\n                n = i(1887);\n              e.exports = !r(function () {\n                var e = Error(\"a\");\n                return !(\"stack\" in e) || (Object.defineProperty(e, \"stack\", n(1, 7)), 7 !== e.stack);\n              });\n            },\n            6887: function _(e, t, i) {\n              var r = i(1899),\n                n = i(9730),\n                o = i(5329),\n                s = i(7475),\n                a = i(9677).f,\n                c = i(7252),\n                d = i(4058),\n                u = i(6843),\n                l = i(2029),\n                h = i(953),\n                p = function p(e) {\n                  var t = function t(i, r, o) {\n                    if (this instanceof t) {\n                      switch (arguments.length) {\n                        case 0:\n                          return new e();\n                        case 1:\n                          return new e(i);\n                        case 2:\n                          return new e(i, r);\n                      }\n                      return new e(i, r, o);\n                    }\n                    return n(e, this, arguments);\n                  };\n                  return t.prototype = e.prototype, t;\n                };\n              e.exports = function (e, t) {\n                var i,\n                  n,\n                  _,\n                  E,\n                  f,\n                  m,\n                  g,\n                  S,\n                  T = e.target,\n                  v = e.global,\n                  R = e.stat,\n                  I = e.proto,\n                  y = v ? r : R ? r[T] : (r[T] || {}).prototype,\n                  C = v ? d : d[T] || l(d, T, {})[T],\n                  A = C.prototype;\n                for (_ in t) i = !c(v ? _ : T + (R ? \".\" : \"#\") + _, e.forced) && y && h(y, _), f = C[_], i && (m = e.dontCallGetSet ? (S = a(y, _)) && S.value : y[_]), E = i && m ? m : t[_], i && typeof f == typeof E || (g = e.bind && i ? u(E, r) : e.wrap && i ? p(E) : I && s(E) ? o(E) : E, (e.sham || E && E.sham || f && f.sham) && l(g, \"sham\", !0), l(C, _, g), I && (h(d, n = T + \"Prototype\") || l(d, n, {}), l(d[n], _, E), e.real && A && !A[_] && l(A, _, E)));\n              };\n            },\n            5981: function _(e) {\n              e.exports = function (e) {\n                try {\n                  return !!e();\n                } catch (e) {\n                  return !0;\n                }\n              };\n            },\n            9730: function _(e, t, i) {\n              var r = i(8285),\n                n = Function.prototype,\n                o = n.apply,\n                s = n.call;\n              e.exports = \"object\" == typeof Reflect && Reflect.apply || (r ? s.bind(o) : function () {\n                return s.apply(o, arguments);\n              });\n            },\n            6843: function _(e, t, i) {\n              var r = i(5329),\n                n = i(4883),\n                o = i(8285),\n                s = r(r.bind);\n              e.exports = function (e, t) {\n                return n(e), void 0 === t ? e : o ? s(e, t) : function () {\n                  return e.apply(t, arguments);\n                };\n              };\n            },\n            8285: function _(e, t, i) {\n              var r = i(5981);\n              e.exports = !r(function () {\n                var e = function () {}.bind();\n                return \"function\" != typeof e || e.hasOwnProperty(\"prototype\");\n              });\n            },\n            8834: function _(e, t, i) {\n              var r = i(8285),\n                n = Function.prototype.call;\n              e.exports = r ? n.bind(n) : function () {\n                return n.apply(n, arguments);\n              };\n            },\n            9417: function _(e, t, i) {\n              var r = i(5746),\n                n = i(953),\n                o = Function.prototype,\n                s = r && Object.getOwnPropertyDescriptor,\n                a = n(o, \"name\"),\n                c = a && \"something\" === function () {}.name,\n                d = a && (!r || r && s(o, \"name\").configurable);\n              e.exports = {\n                EXISTS: a,\n                PROPER: c,\n                CONFIGURABLE: d\n              };\n            },\n            4163: function _(e, t, i) {\n              var r = i(8285),\n                n = Function.prototype,\n                o = n.call,\n                s = r && n.bind.bind(o, o);\n              e.exports = r ? s : function (e) {\n                return function () {\n                  return o.apply(e, arguments);\n                };\n              };\n            },\n            5329: function _(e, t, i) {\n              var r = i(2532),\n                n = i(4163);\n              e.exports = function (e) {\n                if (\"Function\" === r(e)) return n(e);\n              };\n            },\n            626: function _(e, t, i) {\n              var r = i(4058),\n                n = i(1899),\n                o = i(7475),\n                s = function s(e) {\n                  return o(e) ? e : void 0;\n                };\n              e.exports = function (e, t) {\n                return arguments.length < 2 ? s(r[e]) || s(n[e]) : r[e] && r[e][t] || n[e] && n[e][t];\n              };\n            },\n            2902: function _(e, t, i) {\n              var r = i(9697),\n                n = i(4229),\n                o = i(2119),\n                s = i(2077),\n                a = i(9813)(\"iterator\");\n              e.exports = function (e) {\n                if (!o(e)) return n(e, a) || n(e, \"@@iterator\") || s[r(e)];\n              };\n            },\n            3476: function _(e, t, i) {\n              var r = i(8834),\n                n = i(4883),\n                o = i(6059),\n                s = i(9826),\n                a = i(2902),\n                c = TypeError;\n              e.exports = function (e, t) {\n                var i = arguments.length < 2 ? a(e) : t;\n                if (n(i)) return o(r(i, e));\n                throw c(s(e) + \" is not iterable\");\n              };\n            },\n            4229: function _(e, t, i) {\n              var r = i(4883),\n                n = i(2119);\n              e.exports = function (e, t) {\n                var i = e[t];\n                return n(i) ? void 0 : r(i);\n              };\n            },\n            1899: function _(e, t, i) {\n              var r = function r(e) {\n                return e && e.Math == Math && e;\n              };\n              e.exports = r(\"object\" == typeof globalThis && globalThis) || r(\"object\" == typeof window && window) || r(\"object\" == typeof self && self) || r(\"object\" == typeof i.g && i.g) || function () {\n                return this;\n              }() || Function(\"return this\")();\n            },\n            953: function _(e, t, i) {\n              var r = i(5329),\n                n = i(9678),\n                o = r({}.hasOwnProperty);\n              e.exports = Object.hasOwn || function (e, t) {\n                return o(n(e), t);\n              };\n            },\n            7748: function _(e) {\n              e.exports = {};\n            },\n            4845: function _(e, t, i) {\n              var r = i(1899);\n              e.exports = function (e, t) {\n                var i = r.console;\n                i && i.error && (1 == arguments.length ? i.error(e) : i.error(e, t));\n              };\n            },\n            5463: function _(e, t, i) {\n              var r = i(626);\n              e.exports = r(\"document\", \"documentElement\");\n            },\n            2840: function _(e, t, i) {\n              var r = i(5746),\n                n = i(5981),\n                o = i(1333);\n              e.exports = !r && !n(function () {\n                return 7 != Object.defineProperty(o(\"div\"), \"a\", {\n                  get: function get() {\n                    return 7;\n                  }\n                }).a;\n              });\n            },\n            7026: function _(e, t, i) {\n              var r = i(5329),\n                n = i(5981),\n                o = i(2532),\n                s = Object,\n                a = r(\"\".split);\n              e.exports = n(function () {\n                return !s(\"z\").propertyIsEnumerable(0);\n              }) ? function (e) {\n                return \"String\" == o(e) ? a(e, \"\") : s(e);\n              } : s;\n            },\n            1302: function _(e, t, i) {\n              var r = i(5329),\n                n = i(7475),\n                o = i(3030),\n                s = r(Function.toString);\n              n(o.inspectSource) || (o.inspectSource = function (e) {\n                return s(e);\n              }), e.exports = o.inspectSource;\n            },\n            3794: function _(e, t, i) {\n              var r = i(941),\n                n = i(2029);\n              e.exports = function (e, t) {\n                r(t) && \"cause\" in t && n(e, \"cause\", t.cause);\n              };\n            },\n            5402: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s = i(7093),\n                a = i(1899),\n                c = i(941),\n                d = i(2029),\n                u = i(953),\n                l = i(3030),\n                h = i(4262),\n                p = i(7748),\n                _ = \"Object already initialized\",\n                E = a.TypeError,\n                f = a.WeakMap;\n              if (s || l.state) {\n                var m = l.state || (l.state = new f());\n                m.get = m.get, m.has = m.has, m.set = m.set, r = function r(e, t) {\n                  if (m.has(e)) throw E(_);\n                  return t.facade = e, m.set(e, t), t;\n                }, n = function n(e) {\n                  return m.get(e) || {};\n                }, o = function o(e) {\n                  return m.has(e);\n                };\n              } else {\n                var g = h(\"state\");\n                p[g] = !0, r = function r(e, t) {\n                  if (u(e, g)) throw E(_);\n                  return t.facade = e, d(e, g, t), t;\n                }, n = function n(e) {\n                  return u(e, g) ? e[g] : {};\n                }, o = function o(e) {\n                  return u(e, g);\n                };\n              }\n              e.exports = {\n                set: r,\n                get: n,\n                has: o,\n                enforce: function enforce(e) {\n                  return o(e) ? n(e) : r(e, {});\n                },\n                getterFor: function getterFor(e) {\n                  return function (t) {\n                    var i;\n                    if (!c(t) || (i = n(t)).type !== e) throw E(\"Incompatible receiver, \" + e + \" required\");\n                    return i;\n                  };\n                }\n              };\n            },\n            6782: function _(e, t, i) {\n              var r = i(9813),\n                n = i(2077),\n                o = r(\"iterator\"),\n                s = Array.prototype;\n              e.exports = function (e) {\n                return void 0 !== e && (n.Array === e || s[o] === e);\n              };\n            },\n            7475: function _(e, t, i) {\n              var r = i(6616),\n                n = r.all;\n              e.exports = r.IS_HTMLDDA ? function (e) {\n                return \"function\" == typeof e || e === n;\n              } : function (e) {\n                return \"function\" == typeof e;\n              };\n            },\n            4284: function _(e, t, i) {\n              var r = i(5329),\n                n = i(5981),\n                o = i(7475),\n                s = i(9697),\n                a = i(626),\n                c = i(1302),\n                d = function d() {},\n                u = [],\n                l = a(\"Reflect\", \"construct\"),\n                h = /^\\s*(?:class|function)\\b/,\n                p = r(h.exec),\n                _ = !h.exec(d),\n                E = function E(e) {\n                  if (!o(e)) return !1;\n                  try {\n                    return l(d, u, e), !0;\n                  } catch (e) {\n                    return !1;\n                  }\n                },\n                f = function f(e) {\n                  if (!o(e)) return !1;\n                  switch (s(e)) {\n                    case \"AsyncFunction\":\n                    case \"GeneratorFunction\":\n                    case \"AsyncGeneratorFunction\":\n                      return !1;\n                  }\n                  try {\n                    return _ || !!p(h, c(e));\n                  } catch (e) {\n                    return !0;\n                  }\n                };\n              f.sham = !0, e.exports = !l || n(function () {\n                var e;\n                return E(E.call) || !E(Object) || !E(function () {\n                  e = !0;\n                }) || e;\n              }) ? f : E;\n            },\n            7252: function _(e, t, i) {\n              var r = i(5981),\n                n = i(7475),\n                o = /#|\\.prototype\\./,\n                s = function s(e, t) {\n                  var i = c[a(e)];\n                  return i == u || i != d && (n(t) ? r(t) : !!t);\n                },\n                a = s.normalize = function (e) {\n                  return String(e).replace(o, \".\").toLowerCase();\n                },\n                c = s.data = {},\n                d = s.NATIVE = \"N\",\n                u = s.POLYFILL = \"P\";\n              e.exports = s;\n            },\n            2119: function _(e) {\n              e.exports = function (e) {\n                return null == e;\n              };\n            },\n            941: function _(e, t, i) {\n              var r = i(7475),\n                n = i(6616),\n                o = n.all;\n              e.exports = n.IS_HTMLDDA ? function (e) {\n                return \"object\" == typeof e ? null !== e : r(e) || e === o;\n              } : function (e) {\n                return \"object\" == typeof e ? null !== e : r(e);\n              };\n            },\n            2529: function _(e) {\n              e.exports = !0;\n            },\n            6664: function _(e, t, i) {\n              var r = i(626),\n                n = i(7475),\n                o = i(7046),\n                s = i(2302),\n                a = Object;\n              e.exports = s ? function (e) {\n                return \"symbol\" == typeof e;\n              } : function (e) {\n                var t = r(\"Symbol\");\n                return n(t) && o(t.prototype, a(e));\n              };\n            },\n            3091: function _(e, t, i) {\n              var r = i(6843),\n                n = i(8834),\n                o = i(6059),\n                s = i(9826),\n                a = i(6782),\n                c = i(623),\n                d = i(7046),\n                u = i(3476),\n                l = i(2902),\n                h = i(7609),\n                p = TypeError,\n                _ = function _(e, t) {\n                  this.stopped = e, this.result = t;\n                },\n                E = _.prototype;\n              e.exports = function (e, t, i) {\n                var f,\n                  m,\n                  g,\n                  S,\n                  T,\n                  v,\n                  R,\n                  I = i && i.that,\n                  y = !(!i || !i.AS_ENTRIES),\n                  C = !(!i || !i.IS_RECORD),\n                  A = !(!i || !i.IS_ITERATOR),\n                  O = !(!i || !i.INTERRUPTED),\n                  b = r(t, I),\n                  w = function w(e) {\n                    return f && h(f, \"normal\", e), new _(!0, e);\n                  },\n                  N = function N(e) {\n                    return y ? (o(e), O ? b(e[0], e[1], w) : b(e[0], e[1])) : O ? b(e, w) : b(e);\n                  };\n                if (C) f = e.iterator;else if (A) f = e;else {\n                  if (!(m = l(e))) throw p(s(e) + \" is not iterable\");\n                  if (a(m)) {\n                    for (g = 0, S = c(e); S > g; g++) if ((T = N(e[g])) && d(E, T)) return T;\n                    return new _(!1);\n                  }\n                  f = u(e, m);\n                }\n                for (v = C ? e.next : f.next; !(R = n(v, f)).done;) {\n                  try {\n                    T = N(R.value);\n                  } catch (e) {\n                    h(f, \"throw\", e);\n                  }\n                  if (\"object\" == typeof T && T && d(E, T)) return T;\n                }\n                return new _(!1);\n              };\n            },\n            7609: function _(e, t, i) {\n              var r = i(8834),\n                n = i(6059),\n                o = i(4229);\n              e.exports = function (e, t, i) {\n                var s, a;\n                n(e);\n                try {\n                  if (!(s = o(e, \"return\"))) {\n                    if (\"throw\" === t) throw i;\n                    return i;\n                  }\n                  s = r(s, e);\n                } catch (e) {\n                  a = !0, s = e;\n                }\n                if (\"throw\" === t) throw i;\n                if (a) throw s;\n                return n(s), i;\n              };\n            },\n            3847: function _(e, t, i) {\n              var r = i(5143).IteratorPrototype,\n                n = i(9290),\n                o = i(1887),\n                s = i(904),\n                a = i(2077),\n                c = function c() {\n                  return this;\n                };\n              e.exports = function (e, t, i, d) {\n                var u = t + \" Iterator\";\n                return e.prototype = n(r, {\n                  next: o(+!d, i)\n                }), s(e, u, !1, !0), a[u] = c, e;\n              };\n            },\n            5105: function _(e, t, i) {\n              var r = i(6887),\n                n = i(8834),\n                o = i(2529),\n                s = i(9417),\n                a = i(7475),\n                c = i(3847),\n                d = i(249),\n                u = i(8929),\n                l = i(904),\n                h = i(2029),\n                p = i(5929),\n                _ = i(9813),\n                E = i(2077),\n                f = i(5143),\n                m = s.PROPER,\n                g = s.CONFIGURABLE,\n                S = f.IteratorPrototype,\n                T = f.BUGGY_SAFARI_ITERATORS,\n                v = _(\"iterator\"),\n                R = \"keys\",\n                I = \"values\",\n                y = \"entries\",\n                C = function C() {\n                  return this;\n                };\n              e.exports = function (e, t, i, s, _, f, A) {\n                c(i, t, s);\n                var O,\n                  b,\n                  w,\n                  N = function N(e) {\n                    if (e === _ && M) return M;\n                    if (!T && e in L) return L[e];\n                    switch (e) {\n                      case R:\n                      case I:\n                      case y:\n                        return function () {\n                          return new i(this, e);\n                        };\n                    }\n                    return function () {\n                      return new i(this);\n                    };\n                  },\n                  D = t + \" Iterator\",\n                  P = !1,\n                  L = e.prototype,\n                  k = L[v] || L[\"@@iterator\"] || _ && L[_],\n                  M = !T && k || N(_),\n                  U = \"Array\" == t && L.entries || k;\n                if (U && (O = d(U.call(new e()))) !== Object.prototype && O.next && (o || d(O) === S || (u ? u(O, S) : a(O[v]) || p(O, v, C)), l(O, D, !0, !0), o && (E[D] = C)), m && _ == I && k && k.name !== I && (!o && g ? h(L, \"name\", I) : (P = !0, M = function M() {\n                  return n(k, this);\n                })), _) if (b = {\n                  values: N(I),\n                  keys: f ? M : N(R),\n                  entries: N(y)\n                }, A) for (w in b) (T || P || !(w in L)) && p(L, w, b[w]);else r({\n                  target: t,\n                  proto: !0,\n                  forced: T || P\n                }, b);\n                return o && !A || L[v] === M || p(L, v, M, {\n                  name: _\n                }), E[t] = M, b;\n              };\n            },\n            5143: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s = i(5981),\n                a = i(7475),\n                c = i(941),\n                d = i(9290),\n                u = i(249),\n                l = i(5929),\n                h = i(9813),\n                p = i(2529),\n                _ = h(\"iterator\"),\n                E = !1;\n              [].keys && (\"next\" in (o = [].keys()) ? (n = u(u(o))) !== Object.prototype && (r = n) : E = !0), !c(r) || s(function () {\n                var e = {};\n                return r[_].call(e) !== e;\n              }) ? r = {} : p && (r = d(r)), a(r[_]) || l(r, _, function () {\n                return this;\n              }), e.exports = {\n                IteratorPrototype: r,\n                BUGGY_SAFARI_ITERATORS: E\n              };\n            },\n            2077: function _(e) {\n              e.exports = {};\n            },\n            623: function _(e, t, i) {\n              var r = i(3057);\n              e.exports = function (e) {\n                return r(e.length);\n              };\n            },\n            5331: function _(e) {\n              var t = Math.ceil,\n                i = Math.floor;\n              e.exports = Math.trunc || function (e) {\n                var r = +e;\n                return (r > 0 ? i : t)(r);\n              };\n            },\n            6132: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s,\n                a,\n                c,\n                d,\n                u,\n                l = i(1899),\n                h = i(6843),\n                p = i(9677).f,\n                _ = i(2941).set,\n                E = i(2749),\n                f = i(4470),\n                m = i(8045),\n                g = i(6049),\n                S = l.MutationObserver || l.WebKitMutationObserver,\n                T = l.document,\n                v = l.process,\n                R = l.Promise,\n                I = p(l, \"queueMicrotask\"),\n                y = I && I.value;\n              y || (r = function r() {\n                var e, t;\n                for (g && (e = v.domain) && e.exit(); n;) {\n                  t = n.fn, n = n.next;\n                  try {\n                    t();\n                  } catch (e) {\n                    throw n ? s() : o = void 0, e;\n                  }\n                }\n                o = void 0, e && e.enter();\n              }, E || g || m || !S || !T ? !f && R && R.resolve ? ((d = R.resolve(void 0)).constructor = R, u = h(d.then, d), s = function s() {\n                u(r);\n              }) : g ? s = function s() {\n                v.nextTick(r);\n              } : (_ = h(_, l), s = function s() {\n                _(r);\n              }) : (a = !0, c = T.createTextNode(\"\"), new S(r).observe(c, {\n                characterData: !0\n              }), s = function s() {\n                c.data = a = !a;\n              })), e.exports = y || function (e) {\n                var t = {\n                  fn: e,\n                  next: void 0\n                };\n                o && (o.next = t), n || (n = t, s()), o = t;\n              };\n            },\n            9520: function _(e, t, i) {\n              var r = i(4883),\n                n = TypeError,\n                o = function o(e) {\n                  var t, i;\n                  this.promise = new e(function (e, r) {\n                    if (void 0 !== t || void 0 !== i) throw n(\"Bad Promise constructor\");\n                    t = e, i = r;\n                  }), this.resolve = r(t), this.reject = r(i);\n                };\n              e.exports.f = function (e) {\n                return new o(e);\n              };\n            },\n            4649: function _(e, t, i) {\n              var r = i(5803);\n              e.exports = function (e, t) {\n                return void 0 === e ? arguments.length < 2 ? \"\" : t : r(e);\n              };\n            },\n            9290: function _(e, t, i) {\n              var r,\n                n = i(6059),\n                o = i(9938),\n                s = i(6759),\n                a = i(7748),\n                c = i(5463),\n                d = i(1333),\n                u = i(4262)(\"IE_PROTO\"),\n                l = function l() {},\n                h = function h(e) {\n                  return \"<script>\" + e + \"<\\/script>\";\n                },\n                p = function p(e) {\n                  e.write(h(\"\")), e.close();\n                  var t = e.parentWindow.Object;\n                  return e = null, t;\n                },\n                _ = function (_2) {\n                  function _() {\n                    return _2.apply(this, arguments);\n                  }\n                  _.toString = function () {\n                    return _2.toString();\n                  };\n                  return _;\n                }(function () {\n                  try {\n                    r = new ActiveXObject(\"htmlfile\");\n                  } catch (e) {}\n                  var e, t;\n                  _ = \"undefined\" != typeof document ? document.domain && r ? p(r) : ((t = d(\"iframe\")).style.display = \"none\", c.appendChild(t), t.src = String(\"javascript:\"), (e = t.contentWindow.document).open(), e.write(h(\"document.F=Object\")), e.close(), e.F) : p(r);\n                  for (var i = s.length; i--;) delete _.prototype[s[i]];\n                  return _();\n                });\n              a[u] = !0, e.exports = Object.create || function (e, t) {\n                var i;\n                return null !== e ? (l.prototype = n(e), i = new l(), l.prototype = null, i[u] = e) : i = _(), void 0 === t ? i : o.f(i, t);\n              };\n            },\n            9938: function _(e, t, i) {\n              var r = i(5746),\n                n = i(3937),\n                o = i(5988),\n                s = i(6059),\n                a = i(4529),\n                c = i(4771);\n              t.f = r && !n ? Object.defineProperties : function (e, t) {\n                s(e);\n                for (var i, r = a(t), n = c(t), d = n.length, u = 0; d > u;) o.f(e, i = n[u++], r[i]);\n                return e;\n              };\n            },\n            5988: function _(e, t, i) {\n              var r = i(5746),\n                n = i(2840),\n                o = i(3937),\n                s = i(6059),\n                a = i(3894),\n                c = TypeError,\n                d = Object.defineProperty,\n                u = Object.getOwnPropertyDescriptor;\n              t.f = r ? o ? function (e, t, i) {\n                if (s(e), t = a(t), s(i), \"function\" == typeof e && \"prototype\" === t && \"value\" in i && \"writable\" in i && !i.writable) {\n                  var r = u(e, t);\n                  r && r.writable && (e[t] = i.value, i = {\n                    configurable: \"configurable\" in i ? i.configurable : r.configurable,\n                    enumerable: \"enumerable\" in i ? i.enumerable : r.enumerable,\n                    writable: !1\n                  });\n                }\n                return d(e, t, i);\n              } : d : function (e, t, i) {\n                if (s(e), t = a(t), s(i), n) try {\n                  return d(e, t, i);\n                } catch (e) {}\n                if (\"get\" in i || \"set\" in i) throw c(\"Accessors not supported\");\n                return \"value\" in i && (e[t] = i.value), e;\n              };\n            },\n            9677: function _(e, t, i) {\n              var r = i(5746),\n                n = i(8834),\n                o = i(6760),\n                s = i(1887),\n                a = i(4529),\n                c = i(3894),\n                d = i(953),\n                u = i(2840),\n                l = Object.getOwnPropertyDescriptor;\n              t.f = r ? l : function (e, t) {\n                if (e = a(e), t = c(t), u) try {\n                  return l(e, t);\n                } catch (e) {}\n                if (d(e, t)) return s(!n(o.f, e, t), e[t]);\n              };\n            },\n            946: function _(e, t, i) {\n              var r = i(5629),\n                n = i(6759).concat(\"length\", \"prototype\");\n              t.f = Object.getOwnPropertyNames || function (e) {\n                return r(e, n);\n              };\n            },\n            7857: function _(e, t) {\n              t.f = Object.getOwnPropertySymbols;\n            },\n            249: function _(e, t, i) {\n              var r = i(953),\n                n = i(7475),\n                o = i(9678),\n                s = i(4262),\n                a = i(4160),\n                c = s(\"IE_PROTO\"),\n                d = Object,\n                u = d.prototype;\n              e.exports = a ? d.getPrototypeOf : function (e) {\n                var t = o(e);\n                if (r(t, c)) return t[c];\n                var i = t.constructor;\n                return n(i) && t instanceof i ? i.prototype : t instanceof d ? u : null;\n              };\n            },\n            7046: function _(e, t, i) {\n              var r = i(5329);\n              e.exports = r({}.isPrototypeOf);\n            },\n            5629: function _(e, t, i) {\n              var r = i(5329),\n                n = i(953),\n                o = i(4529),\n                s = i(1692).indexOf,\n                a = i(7748),\n                c = r([].push);\n              e.exports = function (e, t) {\n                var i,\n                  r = o(e),\n                  d = 0,\n                  u = [];\n                for (i in r) !n(a, i) && n(r, i) && c(u, i);\n                for (; t.length > d;) n(r, i = t[d++]) && (~s(u, i) || c(u, i));\n                return u;\n              };\n            },\n            4771: function _(e, t, i) {\n              var r = i(5629),\n                n = i(6759);\n              e.exports = Object.keys || function (e) {\n                return r(e, n);\n              };\n            },\n            6760: function _(e, t) {\n              var i = {}.propertyIsEnumerable,\n                r = Object.getOwnPropertyDescriptor,\n                n = r && !i.call({\n                  1: 2\n                }, 1);\n              t.f = n ? function (e) {\n                var t = r(this, e);\n                return !!t && t.enumerable;\n              } : i;\n            },\n            8929: function _(e, t, i) {\n              var r = i(5329),\n                n = i(6059),\n                o = i(1851);\n              e.exports = Object.setPrototypeOf || (\"__proto__\" in {} ? function () {\n                var e,\n                  t = !1,\n                  i = {};\n                try {\n                  (e = r(Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\").set))(i, []), t = i instanceof Array;\n                } catch (e) {}\n                return function (i, r) {\n                  return n(i), o(r), t ? e(i, r) : i.__proto__ = r, i;\n                };\n              }() : void 0);\n            },\n            5623: function _(e, t, i) {\n              var r = i(2885),\n                n = i(9697);\n              e.exports = r ? {}.toString : function () {\n                return \"[object \" + n(this) + \"]\";\n              };\n            },\n            9811: function _(e, t, i) {\n              var r = i(8834),\n                n = i(7475),\n                o = i(941),\n                s = TypeError;\n              e.exports = function (e, t) {\n                var i, a;\n                if (\"string\" === t && n(i = e.toString) && !o(a = r(i, e))) return a;\n                if (n(i = e.valueOf) && !o(a = r(i, e))) return a;\n                if (\"string\" !== t && n(i = e.toString) && !o(a = r(i, e))) return a;\n                throw s(\"Can't convert object to primitive value\");\n              };\n            },\n            1136: function _(e, t, i) {\n              var r = i(626),\n                n = i(5329),\n                o = i(946),\n                s = i(7857),\n                a = i(6059),\n                c = n([].concat);\n              e.exports = r(\"Reflect\", \"ownKeys\") || function (e) {\n                var t = o.f(a(e)),\n                  i = s.f;\n                return i ? c(t, i(e)) : t;\n              };\n            },\n            4058: function _(e) {\n              e.exports = {};\n            },\n            2: function _(e) {\n              e.exports = function (e) {\n                try {\n                  return {\n                    error: !1,\n                    value: e()\n                  };\n                } catch (e) {\n                  return {\n                    error: !0,\n                    value: e\n                  };\n                }\n              };\n            },\n            7742: function _(e, t, i) {\n              var r = i(1899),\n                n = i(6991),\n                o = i(7475),\n                s = i(7252),\n                a = i(1302),\n                c = i(9813),\n                d = i(3321),\n                u = i(8501),\n                l = i(2529),\n                h = i(3385),\n                p = n && n.prototype,\n                _ = c(\"species\"),\n                E = !1,\n                f = o(r.PromiseRejectionEvent),\n                m = s(\"Promise\", function () {\n                  var e = a(n),\n                    t = e !== String(n);\n                  if (!t && 66 === h) return !0;\n                  if (l && (!p.catch || !p.finally)) return !0;\n                  if (!h || h < 51 || !/native code/.test(e)) {\n                    var i = new n(function (e) {\n                        e(1);\n                      }),\n                      r = function r(e) {\n                        e(function () {}, function () {});\n                      };\n                    if ((i.constructor = {})[_] = r, !(E = i.then(function () {}) instanceof r)) return !0;\n                  }\n                  return !t && (d || u) && !f;\n                });\n              e.exports = {\n                CONSTRUCTOR: m,\n                REJECTION_EVENT: f,\n                SUBCLASSING: E\n              };\n            },\n            6991: function _(e, t, i) {\n              var r = i(1899);\n              e.exports = r.Promise;\n            },\n            6584: function _(e, t, i) {\n              var r = i(6059),\n                n = i(941),\n                o = i(9520);\n              e.exports = function (e, t) {\n                if (r(e), n(t) && t.constructor === e) return t;\n                var i = o.f(e);\n                return (0, i.resolve)(t), i.promise;\n              };\n            },\n            1542: function _(e, t, i) {\n              var r = i(6991),\n                n = i(1385),\n                o = i(7742).CONSTRUCTOR;\n              e.exports = o || !n(function (e) {\n                r.all(e).then(void 0, function () {});\n              });\n            },\n            8397: function _(e) {\n              var t = function t() {\n                this.head = null, this.tail = null;\n              };\n              t.prototype = {\n                add: function add(e) {\n                  var t = {\n                    item: e,\n                    next: null\n                  };\n                  this.head ? this.tail.next = t : this.head = t, this.tail = t;\n                },\n                get: function get() {\n                  var e = this.head;\n                  if (e) return this.head = e.next, this.tail === e && (this.tail = null), e.item;\n                }\n              }, e.exports = t;\n            },\n            8219: function _(e, t, i) {\n              var r = i(2119),\n                n = TypeError;\n              e.exports = function (e) {\n                if (r(e)) throw n(\"Can't call method on \" + e);\n                return e;\n              };\n            },\n            4431: function _(e, t, i) {\n              var r = i(626),\n                n = i(5988),\n                o = i(9813),\n                s = i(5746),\n                a = o(\"species\");\n              e.exports = function (e) {\n                var t = r(e),\n                  i = n.f;\n                s && t && !t[a] && i(t, a, {\n                  configurable: !0,\n                  get: function get() {\n                    return this;\n                  }\n                });\n              };\n            },\n            904: function _(e, t, i) {\n              var r = i(2885),\n                n = i(5988).f,\n                o = i(2029),\n                s = i(953),\n                a = i(5623),\n                c = i(9813)(\"toStringTag\");\n              e.exports = function (e, t, i, d) {\n                if (e) {\n                  var u = i ? e : e.prototype;\n                  s(u, c) || n(u, c, {\n                    configurable: !0,\n                    value: t\n                  }), d && !r && o(u, \"toString\", a);\n                }\n              };\n            },\n            4262: function _(e, t, i) {\n              var r = i(8726),\n                n = i(9418),\n                o = r(\"keys\");\n              e.exports = function (e) {\n                return o[e] || (o[e] = n(e));\n              };\n            },\n            3030: function _(e, t, i) {\n              var r = i(1899),\n                n = i(5609),\n                o = \"__core-js_shared__\",\n                s = r[o] || n(o, {});\n              e.exports = s;\n            },\n            8726: function _(e, t, i) {\n              var r = i(2529),\n                n = i(3030);\n              (e.exports = function (e, t) {\n                return n[e] || (n[e] = void 0 !== t ? t : {});\n              })(\"versions\", []).push({\n                version: \"3.26.0\",\n                mode: r ? \"pure\" : \"global\",\n                copyright: \"Â© 2014-2022 Denis Pushkarev (zloirock.ru)\",\n                license: \"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE\",\n                source: \"https://github.com/zloirock/core-js\"\n              });\n            },\n            487: function _(e, t, i) {\n              var r = i(6059),\n                n = i(174),\n                o = i(2119),\n                s = i(9813)(\"species\");\n              e.exports = function (e, t) {\n                var i,\n                  a = r(e).constructor;\n                return void 0 === a || o(i = r(a)[s]) ? t : n(i);\n              };\n            },\n            4620: function _(e, t, i) {\n              var r = i(5329),\n                n = i(2435),\n                o = i(5803),\n                s = i(8219),\n                a = r(\"\".charAt),\n                c = r(\"\".charCodeAt),\n                d = r(\"\".slice),\n                u = function u(e) {\n                  return function (t, i) {\n                    var r,\n                      u,\n                      l = o(s(t)),\n                      h = n(i),\n                      p = l.length;\n                    return h < 0 || h >= p ? e ? \"\" : void 0 : (r = c(l, h)) < 55296 || r > 56319 || h + 1 === p || (u = c(l, h + 1)) < 56320 || u > 57343 ? e ? a(l, h) : r : e ? d(l, h, h + 2) : u - 56320 + (r - 55296 << 10) + 65536;\n                  };\n                };\n              e.exports = {\n                codeAt: u(!1),\n                charAt: u(!0)\n              };\n            },\n            3405: function _(e, t, i) {\n              var r = i(3385),\n                n = i(5981);\n              e.exports = !!Object.getOwnPropertySymbols && !n(function () {\n                var e = Symbol();\n                return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham && r && r < 41;\n              });\n            },\n            2941: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s,\n                a = i(1899),\n                c = i(9730),\n                d = i(6843),\n                u = i(7475),\n                l = i(953),\n                h = i(5981),\n                p = i(5463),\n                _ = i(3765),\n                E = i(1333),\n                f = i(8348),\n                m = i(2749),\n                g = i(6049),\n                S = a.setImmediate,\n                T = a.clearImmediate,\n                v = a.process,\n                R = a.Dispatch,\n                I = a.Function,\n                y = a.MessageChannel,\n                C = a.String,\n                A = 0,\n                O = {};\n              try {\n                r = a.location;\n              } catch (e) {}\n              var b = function b(e) {\n                  if (l(O, e)) {\n                    var t = O[e];\n                    delete O[e], t();\n                  }\n                },\n                w = function w(e) {\n                  return function () {\n                    b(e);\n                  };\n                },\n                N = function N(e) {\n                  b(e.data);\n                },\n                D = function D(e) {\n                  a.postMessage(C(e), r.protocol + \"//\" + r.host);\n                };\n              S && T || (S = function S(e) {\n                f(arguments.length, 1);\n                var t = u(e) ? e : I(e),\n                  i = _(arguments, 1);\n                return O[++A] = function () {\n                  c(t, void 0, i);\n                }, n(A), A;\n              }, T = function T(e) {\n                delete O[e];\n              }, g ? n = function n(e) {\n                v.nextTick(w(e));\n              } : R && R.now ? n = function n(e) {\n                R.now(w(e));\n              } : y && !m ? (s = (o = new y()).port2, o.port1.onmessage = N, n = d(s.postMessage, s)) : a.addEventListener && u(a.postMessage) && !a.importScripts && r && \"file:\" !== r.protocol && !h(D) ? (n = D, a.addEventListener(\"message\", N, !1)) : n = \"onreadystatechange\" in E(\"script\") ? function (e) {\n                p.appendChild(E(\"script\")).onreadystatechange = function () {\n                  p.removeChild(this), b(e);\n                };\n              } : function (e) {\n                setTimeout(w(e), 0);\n              }), e.exports = {\n                set: S,\n                clear: T\n              };\n            },\n            9413: function _(e, t, i) {\n              var r = i(2435),\n                n = Math.max,\n                o = Math.min;\n              e.exports = function (e, t) {\n                var i = r(e);\n                return i < 0 ? n(i + t, 0) : o(i, t);\n              };\n            },\n            4529: function _(e, t, i) {\n              var r = i(7026),\n                n = i(8219);\n              e.exports = function (e) {\n                return r(n(e));\n              };\n            },\n            2435: function _(e, t, i) {\n              var r = i(5331);\n              e.exports = function (e) {\n                var t = +e;\n                return t != t || 0 === t ? 0 : r(t);\n              };\n            },\n            3057: function _(e, t, i) {\n              var r = i(2435),\n                n = Math.min;\n              e.exports = function (e) {\n                return e > 0 ? n(r(e), 9007199254740991) : 0;\n              };\n            },\n            9678: function _(e, t, i) {\n              var r = i(8219),\n                n = Object;\n              e.exports = function (e) {\n                return n(r(e));\n              };\n            },\n            6935: function _(e, t, i) {\n              var r = i(8834),\n                n = i(941),\n                o = i(6664),\n                s = i(4229),\n                a = i(9811),\n                c = i(9813),\n                d = TypeError,\n                u = c(\"toPrimitive\");\n              e.exports = function (e, t) {\n                if (!n(e) || o(e)) return e;\n                var i,\n                  c = s(e, u);\n                if (c) {\n                  if (void 0 === t && (t = \"default\"), i = r(c, e, t), !n(i) || o(i)) return i;\n                  throw d(\"Can't convert object to primitive value\");\n                }\n                return void 0 === t && (t = \"number\"), a(e, t);\n              };\n            },\n            3894: function _(e, t, i) {\n              var r = i(6935),\n                n = i(6664);\n              e.exports = function (e) {\n                var t = r(e, \"string\");\n                return n(t) ? t : t + \"\";\n              };\n            },\n            2885: function _(e, t, i) {\n              var r = {};\n              r[i(9813)(\"toStringTag\")] = \"z\", e.exports = \"[object z]\" === String(r);\n            },\n            5803: function _(e, t, i) {\n              var r = i(9697),\n                n = String;\n              e.exports = function (e) {\n                if (\"Symbol\" === r(e)) throw TypeError(\"Cannot convert a Symbol value to a string\");\n                return n(e);\n              };\n            },\n            9826: function _(e) {\n              var t = String;\n              e.exports = function (e) {\n                try {\n                  return t(e);\n                } catch (e) {\n                  return \"Object\";\n                }\n              };\n            },\n            9418: function _(e, t, i) {\n              var r = i(5329),\n                n = 0,\n                o = Math.random(),\n                s = r(1..toString);\n              e.exports = function (e) {\n                return \"Symbol(\" + (void 0 === e ? \"\" : e) + \")_\" + s(++n + o, 36);\n              };\n            },\n            2302: function _(e, t, i) {\n              var r = i(3405);\n              e.exports = r && !Symbol.sham && \"symbol\" == typeof Symbol.iterator;\n            },\n            3937: function _(e, t, i) {\n              var r = i(5746),\n                n = i(5981);\n              e.exports = r && n(function () {\n                return 42 != Object.defineProperty(function () {}, \"prototype\", {\n                  value: 42,\n                  writable: !1\n                }).prototype;\n              });\n            },\n            8348: function _(e) {\n              var t = TypeError;\n              e.exports = function (e, i) {\n                if (e < i) throw t(\"Not enough arguments\");\n                return e;\n              };\n            },\n            7093: function _(e, t, i) {\n              var r = i(1899),\n                n = i(7475),\n                o = r.WeakMap;\n              e.exports = n(o) && /native code/.test(String(o));\n            },\n            9813: function _(e, t, i) {\n              var r = i(1899),\n                n = i(8726),\n                o = i(953),\n                s = i(9418),\n                a = i(3405),\n                c = i(2302),\n                d = n(\"wks\"),\n                u = r.Symbol,\n                l = u && u.for,\n                h = c ? u : u && u.withoutSetter || s;\n              e.exports = function (e) {\n                if (!o(d, e) || !a && \"string\" != typeof d[e]) {\n                  var t = \"Symbol.\" + e;\n                  a && o(u, e) ? d[e] = u[e] : d[e] = c && l ? l(t) : h(t);\n                }\n                return d[e];\n              };\n            },\n            9812: function _(e, t, i) {\n              var r = i(6887),\n                n = i(7046),\n                o = i(249),\n                s = i(8929),\n                a = i(3489),\n                c = i(9290),\n                d = i(2029),\n                u = i(1887),\n                l = i(3995),\n                h = i(3794),\n                p = i(3091),\n                _ = i(4649),\n                E = i(9813),\n                f = i(8780),\n                m = E(\"toStringTag\"),\n                g = Error,\n                S = [].push,\n                T = function T(e, t) {\n                  var i,\n                    r = arguments.length > 2 ? arguments[2] : void 0,\n                    a = n(v, this);\n                  s ? i = s(g(), a ? o(this) : v) : (i = a ? this : c(v), d(i, m, \"Error\")), void 0 !== t && d(i, \"message\", _(t)), f && d(i, \"stack\", l(i.stack, 1)), h(i, r);\n                  var u = [];\n                  return p(e, S, {\n                    that: u\n                  }), d(i, \"errors\", u), i;\n                };\n              s ? s(T, g) : a(T, g, {\n                name: !0\n              });\n              var v = T.prototype = c(g.prototype, {\n                constructor: u(1, T),\n                message: u(1, \"\"),\n                name: u(1, \"AggregateError\")\n              });\n              r({\n                global: !0,\n                constructor: !0,\n                arity: 2\n              }, {\n                AggregateError: T\n              });\n            },\n            7627: function _(e, t, i) {\n              i(9812);\n            },\n            6274: function _(e, t, i) {\n              var r = i(4529),\n                n = i(8479),\n                o = i(2077),\n                s = i(5402),\n                a = i(5988).f,\n                c = i(5105),\n                d = i(3538),\n                u = i(2529),\n                l = i(5746),\n                h = \"Array Iterator\",\n                p = s.set,\n                _ = s.getterFor(h);\n              e.exports = c(Array, \"Array\", function (e, t) {\n                p(this, {\n                  type: h,\n                  target: r(e),\n                  index: 0,\n                  kind: t\n                });\n              }, function () {\n                var e = _(this),\n                  t = e.target,\n                  i = e.kind,\n                  r = e.index++;\n                return !t || r >= t.length ? (e.target = void 0, d(void 0, !0)) : d(\"keys\" == i ? r : \"values\" == i ? t[r] : [r, t[r]], !1);\n              }, \"values\");\n              var E = o.Arguments = o.Array;\n              if (n(\"keys\"), n(\"values\"), n(\"entries\"), !u && l && \"values\" !== E.name) try {\n                a(E, \"name\", {\n                  value: \"values\"\n                });\n              } catch (e) {}\n            },\n            6450: function _(e, t, i) {\n              var r = i(6887),\n                n = i(5746),\n                o = i(5988).f;\n              r({\n                target: \"Object\",\n                stat: !0,\n                forced: Object.defineProperty !== o,\n                sham: !n\n              }, {\n                defineProperty: o\n              });\n            },\n            5967: function _() {},\n            4560: function _(e, t, i) {\n              var r = i(6887),\n                n = i(8834),\n                o = i(4883),\n                s = i(9520),\n                a = i(2),\n                c = i(3091);\n              r({\n                target: \"Promise\",\n                stat: !0\n              }, {\n                allSettled: function allSettled(e) {\n                  var t = this,\n                    i = s.f(t),\n                    r = i.resolve,\n                    d = i.reject,\n                    u = a(function () {\n                      var i = o(t.resolve),\n                        s = [],\n                        a = 0,\n                        d = 1;\n                      c(e, function (e) {\n                        var o = a++,\n                          c = !1;\n                        d++, n(i, t, e).then(function (e) {\n                          c || (c = !0, s[o] = {\n                            status: \"fulfilled\",\n                            value: e\n                          }, --d || r(s));\n                        }, function (e) {\n                          c || (c = !0, s[o] = {\n                            status: \"rejected\",\n                            reason: e\n                          }, --d || r(s));\n                        });\n                      }), --d || r(s);\n                    });\n                  return u.error && d(u.value), i.promise;\n                }\n              });\n            },\n            6890: function _(e, t, i) {\n              var r = i(6887),\n                n = i(8834),\n                o = i(4883),\n                s = i(9520),\n                a = i(2),\n                c = i(3091);\n              r({\n                target: \"Promise\",\n                stat: !0,\n                forced: i(1542)\n              }, {\n                all: function all(e) {\n                  var t = this,\n                    i = s.f(t),\n                    r = i.resolve,\n                    d = i.reject,\n                    u = a(function () {\n                      var i = o(t.resolve),\n                        s = [],\n                        a = 0,\n                        u = 1;\n                      c(e, function (e) {\n                        var o = a++,\n                          c = !1;\n                        u++, n(i, t, e).then(function (e) {\n                          c || (c = !0, s[o] = e, --u || r(s));\n                        }, d);\n                      }), --u || r(s);\n                    });\n                  return u.error && d(u.value), i.promise;\n                }\n              });\n            },\n            7206: function _(e, t, i) {\n              var r = i(6887),\n                n = i(8834),\n                o = i(4883),\n                s = i(626),\n                a = i(9520),\n                c = i(2),\n                d = i(3091),\n                u = \"No one promise resolved\";\n              r({\n                target: \"Promise\",\n                stat: !0\n              }, {\n                any: function any(e) {\n                  var t = this,\n                    i = s(\"AggregateError\"),\n                    r = a.f(t),\n                    l = r.resolve,\n                    h = r.reject,\n                    p = c(function () {\n                      var r = o(t.resolve),\n                        s = [],\n                        a = 0,\n                        c = 1,\n                        p = !1;\n                      d(e, function (e) {\n                        var o = a++,\n                          d = !1;\n                        c++, n(r, t, e).then(function (e) {\n                          d || p || (p = !0, l(e));\n                        }, function (e) {\n                          d || p || (d = !0, s[o] = e, --c || h(new i(s, u)));\n                        });\n                      }), --c || h(new i(s, u));\n                    });\n                  return p.error && h(p.value), r.promise;\n                }\n              });\n            },\n            3376: function _(e, t, i) {\n              var r = i(6887),\n                n = i(2529),\n                o = i(7742).CONSTRUCTOR,\n                s = i(6991),\n                a = i(626),\n                c = i(7475),\n                d = i(5929),\n                u = s && s.prototype;\n              if (r({\n                target: \"Promise\",\n                proto: !0,\n                forced: o,\n                real: !0\n              }, {\n                catch: function _catch(e) {\n                  return this.then(void 0, e);\n                }\n              }), !n && c(s)) {\n                var l = a(\"Promise\").prototype.catch;\n                u.catch !== l && d(u, \"catch\", l, {\n                  unsafe: !0\n                });\n              }\n            },\n            6934: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s = i(6887),\n                a = i(2529),\n                c = i(6049),\n                d = i(1899),\n                u = i(8834),\n                l = i(5929),\n                h = i(8929),\n                p = i(904),\n                _ = i(4431),\n                E = i(4883),\n                f = i(7475),\n                m = i(941),\n                g = i(5743),\n                S = i(487),\n                T = i(2941).set,\n                v = i(6132),\n                R = i(4845),\n                I = i(2),\n                y = i(8397),\n                C = i(5402),\n                A = i(6991),\n                O = i(7742),\n                b = i(9520),\n                w = \"Promise\",\n                N = O.CONSTRUCTOR,\n                D = O.REJECTION_EVENT,\n                P = O.SUBCLASSING,\n                L = C.getterFor(w),\n                k = C.set,\n                M = A && A.prototype,\n                U = A,\n                x = M,\n                V = d.TypeError,\n                j = d.document,\n                F = d.process,\n                B = b.f,\n                G = B,\n                W = !!(j && j.createEvent && d.dispatchEvent),\n                H = \"unhandledrejection\",\n                K = function K(e) {\n                  var t;\n                  return !(!m(e) || !f(t = e.then)) && t;\n                },\n                Y = function Y(e, t) {\n                  var i,\n                    r,\n                    n,\n                    o = t.value,\n                    s = 1 == t.state,\n                    a = s ? e.ok : e.fail,\n                    c = e.resolve,\n                    d = e.reject,\n                    l = e.domain;\n                  try {\n                    a ? (s || (2 === t.rejection && Q(t), t.rejection = 1), !0 === a ? i = o : (l && l.enter(), i = a(o), l && (l.exit(), n = !0)), i === e.promise ? d(V(\"Promise-chain cycle\")) : (r = K(i)) ? u(r, i, c, d) : c(i)) : d(o);\n                  } catch (e) {\n                    l && !n && l.exit(), d(e);\n                  }\n                },\n                q = function q(e, t) {\n                  e.notified || (e.notified = !0, v(function () {\n                    for (var i, r = e.reactions; i = r.get();) Y(i, e);\n                    e.notified = !1, t && !e.rejection && X(e);\n                  }));\n                },\n                J = function J(e, t, i) {\n                  var r, n;\n                  W ? ((r = j.createEvent(\"Event\")).promise = t, r.reason = i, r.initEvent(e, !1, !0), d.dispatchEvent(r)) : r = {\n                    promise: t,\n                    reason: i\n                  }, !D && (n = d[\"on\" + e]) ? n(r) : e === H && R(\"Unhandled promise rejection\", i);\n                },\n                X = function X(e) {\n                  u(T, d, function () {\n                    var t,\n                      i = e.facade,\n                      r = e.value;\n                    if (z(e) && (t = I(function () {\n                      c ? F.emit(\"unhandledRejection\", r, i) : J(H, i, r);\n                    }), e.rejection = c || z(e) ? 2 : 1, t.error)) throw t.value;\n                  });\n                },\n                z = function z(e) {\n                  return 1 !== e.rejection && !e.parent;\n                },\n                Q = function Q(e) {\n                  u(T, d, function () {\n                    var t = e.facade;\n                    c ? F.emit(\"rejectionHandled\", t) : J(\"rejectionhandled\", t, e.value);\n                  });\n                },\n                Z = function Z(e, t, i) {\n                  return function (r) {\n                    e(t, r, i);\n                  };\n                },\n                $ = function $(e, t, i) {\n                  e.done || (e.done = !0, i && (e = i), e.value = t, e.state = 2, q(e, !0));\n                },\n                ee = function ee(e, t, i) {\n                  if (!e.done) {\n                    e.done = !0, i && (e = i);\n                    try {\n                      if (e.facade === t) throw V(\"Promise can't be resolved itself\");\n                      var r = K(t);\n                      r ? v(function () {\n                        var i = {\n                          done: !1\n                        };\n                        try {\n                          u(r, t, Z(ee, i, e), Z($, i, e));\n                        } catch (t) {\n                          $(i, t, e);\n                        }\n                      }) : (e.value = t, e.state = 1, q(e, !1));\n                    } catch (t) {\n                      $({\n                        done: !1\n                      }, t, e);\n                    }\n                  }\n                };\n              if (N && (x = (U = function U(e) {\n                g(this, x), E(e), u(r, this);\n                var t = L(this);\n                try {\n                  e(Z(ee, t), Z($, t));\n                } catch (e) {\n                  $(t, e);\n                }\n              }).prototype, (r = function r(e) {\n                k(this, {\n                  type: w,\n                  done: !1,\n                  notified: !1,\n                  parent: !1,\n                  reactions: new y(),\n                  rejection: !1,\n                  state: 0,\n                  value: void 0\n                });\n              }).prototype = l(x, \"then\", function (e, t) {\n                var i = L(this),\n                  r = B(S(this, U));\n                return i.parent = !0, r.ok = !f(e) || e, r.fail = f(t) && t, r.domain = c ? F.domain : void 0, 0 == i.state ? i.reactions.add(r) : v(function () {\n                  Y(r, i);\n                }), r.promise;\n              }), n = function n() {\n                var e = new r(),\n                  t = L(e);\n                this.promise = e, this.resolve = Z(ee, t), this.reject = Z($, t);\n              }, b.f = B = function B(e) {\n                return e === U || void 0 === e ? new n(e) : G(e);\n              }, !a && f(A) && M !== Object.prototype)) {\n                o = M.then, P || l(M, \"then\", function (e, t) {\n                  var i = this;\n                  return new U(function (e, t) {\n                    u(o, i, e, t);\n                  }).then(e, t);\n                }, {\n                  unsafe: !0\n                });\n                try {\n                  delete M.constructor;\n                } catch (e) {}\n                h && h(M, x);\n              }\n              s({\n                global: !0,\n                constructor: !0,\n                wrap: !0,\n                forced: N\n              }, {\n                Promise: U\n              }), p(U, w, !1, !0), _(w);\n            },\n            4349: function _(e, t, i) {\n              var r = i(6887),\n                n = i(2529),\n                o = i(6991),\n                s = i(5981),\n                a = i(626),\n                c = i(7475),\n                d = i(487),\n                u = i(6584),\n                l = i(5929),\n                h = o && o.prototype;\n              if (r({\n                target: \"Promise\",\n                proto: !0,\n                real: !0,\n                forced: !!o && s(function () {\n                  h.finally.call({\n                    then: function then() {}\n                  }, function () {});\n                })\n              }, {\n                finally: function _finally(e) {\n                  var t = d(this, a(\"Promise\")),\n                    i = c(e);\n                  return this.then(i ? function (i) {\n                    return u(t, e()).then(function () {\n                      return i;\n                    });\n                  } : e, i ? function (i) {\n                    return u(t, e()).then(function () {\n                      throw i;\n                    });\n                  } : e);\n                }\n              }), !n && c(o)) {\n                var p = a(\"Promise\").prototype.finally;\n                h.finally !== p && l(h, \"finally\", p, {\n                  unsafe: !0\n                });\n              }\n            },\n            8881: function _(e, t, i) {\n              i(6934), i(6890), i(3376), i(5921), i(4069), i(4482);\n            },\n            5921: function _(e, t, i) {\n              var r = i(6887),\n                n = i(8834),\n                o = i(4883),\n                s = i(9520),\n                a = i(2),\n                c = i(3091);\n              r({\n                target: \"Promise\",\n                stat: !0,\n                forced: i(1542)\n              }, {\n                race: function race(e) {\n                  var t = this,\n                    i = s.f(t),\n                    r = i.reject,\n                    d = a(function () {\n                      var s = o(t.resolve);\n                      c(e, function (e) {\n                        n(s, t, e).then(i.resolve, r);\n                      });\n                    });\n                  return d.error && r(d.value), i.promise;\n                }\n              });\n            },\n            4069: function _(e, t, i) {\n              var r = i(6887),\n                n = i(8834),\n                o = i(9520);\n              r({\n                target: \"Promise\",\n                stat: !0,\n                forced: i(7742).CONSTRUCTOR\n              }, {\n                reject: function reject(e) {\n                  var t = o.f(this);\n                  return n(t.reject, void 0, e), t.promise;\n                }\n              });\n            },\n            4482: function _(e, t, i) {\n              var r = i(6887),\n                n = i(626),\n                o = i(2529),\n                s = i(6991),\n                a = i(7742).CONSTRUCTOR,\n                c = i(6584),\n                d = n(\"Promise\"),\n                u = o && !a;\n              r({\n                target: \"Promise\",\n                stat: !0,\n                forced: o || a\n              }, {\n                resolve: function resolve(e) {\n                  return c(u && this === d ? s : this, e);\n                }\n              });\n            },\n            7971: function _(e, t, i) {\n              var r = i(4620).charAt,\n                n = i(5803),\n                o = i(5402),\n                s = i(5105),\n                a = i(3538),\n                c = \"String Iterator\",\n                d = o.set,\n                u = o.getterFor(c);\n              s(String, \"String\", function (e) {\n                d(this, {\n                  type: c,\n                  string: n(e),\n                  index: 0\n                });\n              }, function () {\n                var e,\n                  t = u(this),\n                  i = t.string,\n                  n = t.index;\n                return n >= i.length ? a(void 0, !0) : (e = r(i, n), t.index += e.length, a(e, !1));\n              });\n            },\n            7634: function _(e, t, i) {\n              i(6274);\n              var r = i(3281),\n                n = i(1899),\n                o = i(9697),\n                s = i(2029),\n                a = i(2077),\n                c = i(9813)(\"toStringTag\");\n              for (var d in r) {\n                var u = n[d],\n                  l = u && u.prototype;\n                l && o(l) !== c && s(l, c, d), a[d] = a.Array;\n              }\n            },\n            1910: function _(e, t, i) {\n              var r = i(8171);\n              e.exports = r;\n            },\n            7460: function _(e, t, i) {\n              var r = i(2956);\n              i(7634), e.exports = r;\n            },\n            9662: function _(e, t, i) {\n              var r = i(614),\n                n = i(6330),\n                o = TypeError;\n              e.exports = function (e) {\n                if (r(e)) return e;\n                throw o(n(e) + \" is not a function\");\n              };\n            },\n            6077: function _(e, t, i) {\n              var r = i(614),\n                n = String,\n                o = TypeError;\n              e.exports = function (e) {\n                if (\"object\" == typeof e || r(e)) return e;\n                throw o(\"Can't set \" + n(e) + \" as a prototype\");\n              };\n            },\n            1223: function _(e, t, i) {\n              var r = i(5112),\n                n = i(30),\n                o = i(3070).f,\n                s = r(\"unscopables\"),\n                a = Array.prototype;\n              null == a[s] && o(a, s, {\n                configurable: !0,\n                value: n(null)\n              }), e.exports = function (e) {\n                a[s][e] = !0;\n              };\n            },\n            9670: function _(e, t, i) {\n              var r = i(111),\n                n = String,\n                o = TypeError;\n              e.exports = function (e) {\n                if (r(e)) return e;\n                throw o(n(e) + \" is not an object\");\n              };\n            },\n            1318: function _(e, t, i) {\n              var r = i(5656),\n                n = i(1400),\n                o = i(6244),\n                s = function s(e) {\n                  return function (t, i, s) {\n                    var a,\n                      c = r(t),\n                      d = o(c),\n                      u = n(s, d);\n                    if (e && i != i) {\n                      for (; d > u;) if ((a = c[u++]) != a) return !0;\n                    } else for (; d > u; u++) if ((e || u in c) && c[u] === i) return e || u || 0;\n                    return !e && -1;\n                  };\n                };\n              e.exports = {\n                includes: s(!0),\n                indexOf: s(!1)\n              };\n            },\n            4326: function _(e, t, i) {\n              var r = i(84),\n                n = r({}.toString),\n                o = r(\"\".slice);\n              e.exports = function (e) {\n                return o(n(e), 8, -1);\n              };\n            },\n            648: function _(e, t, i) {\n              var r = i(1694),\n                n = i(614),\n                o = i(4326),\n                s = i(5112)(\"toStringTag\"),\n                a = Object,\n                c = \"Arguments\" == o(function () {\n                  return arguments;\n                }());\n              e.exports = r ? o : function (e) {\n                var t, i, r;\n                return void 0 === e ? \"Undefined\" : null === e ? \"Null\" : \"string\" == typeof (i = function (e, t) {\n                  try {\n                    return e[t];\n                  } catch (e) {}\n                }(t = a(e), s)) ? i : c ? o(t) : \"Object\" == (r = o(t)) && n(t.callee) ? \"Arguments\" : r;\n              };\n            },\n            9920: function _(e, t, i) {\n              var r = i(2597),\n                n = i(3887),\n                o = i(1236),\n                s = i(3070);\n              e.exports = function (e, t, i) {\n                for (var a = n(t), c = s.f, d = o.f, u = 0; u < a.length; u++) {\n                  var l = a[u];\n                  r(e, l) || i && r(i, l) || c(e, l, d(t, l));\n                }\n              };\n            },\n            8544: function _(e, t, i) {\n              var r = i(7293);\n              e.exports = !r(function () {\n                function e() {}\n                return e.prototype.constructor = null, Object.getPrototypeOf(new e()) !== e.prototype;\n              });\n            },\n            6178: function _(e) {\n              e.exports = function (e, t) {\n                return {\n                  value: e,\n                  done: t\n                };\n              };\n            },\n            8880: function _(e, t, i) {\n              var r = i(9781),\n                n = i(3070),\n                o = i(9114);\n              e.exports = r ? function (e, t, i) {\n                return n.f(e, t, o(1, i));\n              } : function (e, t, i) {\n                return e[t] = i, e;\n              };\n            },\n            9114: function _(e) {\n              e.exports = function (e, t) {\n                return {\n                  enumerable: !(1 & e),\n                  configurable: !(2 & e),\n                  writable: !(4 & e),\n                  value: t\n                };\n              };\n            },\n            8052: function _(e, t, i) {\n              var r = i(614),\n                n = i(3070),\n                o = i(6339),\n                s = i(3072);\n              e.exports = function (e, t, i, a) {\n                a || (a = {});\n                var c = a.enumerable,\n                  d = void 0 !== a.name ? a.name : t;\n                if (r(i) && o(i, d, a), a.global) c ? e[t] = i : s(t, i);else {\n                  try {\n                    a.unsafe ? e[t] && (c = !0) : delete e[t];\n                  } catch (e) {}\n                  c ? e[t] = i : n.f(e, t, {\n                    value: i,\n                    enumerable: !1,\n                    configurable: !a.nonConfigurable,\n                    writable: !a.nonWritable\n                  });\n                }\n                return e;\n              };\n            },\n            3072: function _(e, t, i) {\n              var r = i(7854),\n                n = Object.defineProperty;\n              e.exports = function (e, t) {\n                try {\n                  n(r, e, {\n                    value: t,\n                    configurable: !0,\n                    writable: !0\n                  });\n                } catch (i) {\n                  r[e] = t;\n                }\n                return t;\n              };\n            },\n            9781: function _(e, t, i) {\n              var r = i(7293);\n              e.exports = !r(function () {\n                return 7 != Object.defineProperty({}, 1, {\n                  get: function get() {\n                    return 7;\n                  }\n                })[1];\n              });\n            },\n            4154: function _(e) {\n              var t = \"object\" == typeof document && document.all,\n                i = void 0 === t && void 0 !== t;\n              e.exports = {\n                all: t,\n                IS_HTMLDDA: i\n              };\n            },\n            317: function _(e, t, i) {\n              var r = i(7854),\n                n = i(111),\n                o = r.document,\n                s = n(o) && n(o.createElement);\n              e.exports = function (e) {\n                return s ? o.createElement(e) : {};\n              };\n            },\n            8324: function _(e) {\n              e.exports = {\n                CSSRuleList: 0,\n                CSSStyleDeclaration: 0,\n                CSSValueList: 0,\n                ClientRectList: 0,\n                DOMRectList: 0,\n                DOMStringList: 0,\n                DOMTokenList: 1,\n                DataTransferItemList: 0,\n                FileList: 0,\n                HTMLAllCollection: 0,\n                HTMLCollection: 0,\n                HTMLFormElement: 0,\n                HTMLSelectElement: 0,\n                MediaList: 0,\n                MimeTypeArray: 0,\n                NamedNodeMap: 0,\n                NodeList: 1,\n                PaintRequestList: 0,\n                Plugin: 0,\n                PluginArray: 0,\n                SVGLengthList: 0,\n                SVGNumberList: 0,\n                SVGPathSegList: 0,\n                SVGPointList: 0,\n                SVGStringList: 0,\n                SVGTransformList: 0,\n                SourceBufferList: 0,\n                StyleSheetList: 0,\n                TextTrackCueList: 0,\n                TextTrackList: 0,\n                TouchList: 0\n              };\n            },\n            8509: function _(e, t, i) {\n              var r = i(317)(\"span\").classList,\n                n = r && r.constructor && r.constructor.prototype;\n              e.exports = n === Object.prototype ? void 0 : n;\n            },\n            8113: function _(e, t, i) {\n              var r = i(5005);\n              e.exports = r(\"navigator\", \"userAgent\") || \"\";\n            },\n            7392: function _(e, t, i) {\n              var r,\n                n,\n                o = i(7854),\n                s = i(8113),\n                a = o.process,\n                c = o.Deno,\n                d = a && a.versions || c && c.version,\n                u = d && d.v8;\n              u && (n = (r = u.split(\".\"))[0] > 0 && r[0] < 4 ? 1 : +(r[0] + r[1])), !n && s && (!(r = s.match(/Edge\\/(\\d+)/)) || r[1] >= 74) && (r = s.match(/Chrome\\/(\\d+)/)) && (n = +r[1]), e.exports = n;\n            },\n            748: function _(e) {\n              e.exports = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"];\n            },\n            1060: function _(e, t, i) {\n              var r = i(1702),\n                n = Error,\n                o = r(\"\".replace),\n                s = String(n(\"zxcasd\").stack),\n                a = /\\n\\s*at [^:]*:[^\\n]*/,\n                c = a.test(s);\n              e.exports = function (e, t) {\n                if (c && \"string\" == typeof e && !n.prepareStackTrace) for (; t--;) e = o(e, a, \"\");\n                return e;\n              };\n            },\n            2914: function _(e, t, i) {\n              var r = i(7293),\n                n = i(9114);\n              e.exports = !r(function () {\n                var e = Error(\"a\");\n                return !(\"stack\" in e) || (Object.defineProperty(e, \"stack\", n(1, 7)), 7 !== e.stack);\n              });\n            },\n            2109: function _(e, t, i) {\n              var r = i(7854),\n                n = i(1236).f,\n                o = i(8880),\n                s = i(8052),\n                a = i(3072),\n                c = i(9920),\n                d = i(4705);\n              e.exports = function (e, t) {\n                var i,\n                  u,\n                  l,\n                  h,\n                  p,\n                  _ = e.target,\n                  E = e.global,\n                  f = e.stat;\n                if (i = E ? r : f ? r[_] || a(_, {}) : (r[_] || {}).prototype) for (u in t) {\n                  if (h = t[u], l = e.dontCallGetSet ? (p = n(i, u)) && p.value : i[u], !d(E ? u : _ + (f ? \".\" : \"#\") + u, e.forced) && void 0 !== l) {\n                    if (typeof h == typeof l) continue;\n                    c(h, l);\n                  }\n                  (e.sham || l && l.sham) && o(h, \"sham\", !0), s(i, u, h, e);\n                }\n              };\n            },\n            7293: function _(e) {\n              e.exports = function (e) {\n                try {\n                  return !!e();\n                } catch (e) {\n                  return !0;\n                }\n              };\n            },\n            2104: function _(e, t, i) {\n              var r = i(4374),\n                n = Function.prototype,\n                o = n.apply,\n                s = n.call;\n              e.exports = \"object\" == typeof Reflect && Reflect.apply || (r ? s.bind(o) : function () {\n                return s.apply(o, arguments);\n              });\n            },\n            4374: function _(e, t, i) {\n              var r = i(7293);\n              e.exports = !r(function () {\n                var e = function () {}.bind();\n                return \"function\" != typeof e || e.hasOwnProperty(\"prototype\");\n              });\n            },\n            6916: function _(e, t, i) {\n              var r = i(4374),\n                n = Function.prototype.call;\n              e.exports = r ? n.bind(n) : function () {\n                return n.apply(n, arguments);\n              };\n            },\n            6530: function _(e, t, i) {\n              var r = i(9781),\n                n = i(2597),\n                o = Function.prototype,\n                s = r && Object.getOwnPropertyDescriptor,\n                a = n(o, \"name\"),\n                c = a && \"something\" === function () {}.name,\n                d = a && (!r || r && s(o, \"name\").configurable);\n              e.exports = {\n                EXISTS: a,\n                PROPER: c,\n                CONFIGURABLE: d\n              };\n            },\n            84: function _(e, t, i) {\n              var r = i(4374),\n                n = Function.prototype,\n                o = n.call,\n                s = r && n.bind.bind(o, o);\n              e.exports = r ? s : function (e) {\n                return function () {\n                  return o.apply(e, arguments);\n                };\n              };\n            },\n            1702: function _(e, t, i) {\n              var r = i(4326),\n                n = i(84);\n              e.exports = function (e) {\n                if (\"Function\" === r(e)) return n(e);\n              };\n            },\n            5005: function _(e, t, i) {\n              var r = i(7854),\n                n = i(614),\n                o = function o(e) {\n                  return n(e) ? e : void 0;\n                };\n              e.exports = function (e, t) {\n                return arguments.length < 2 ? o(r[e]) : r[e] && r[e][t];\n              };\n            },\n            8173: function _(e, t, i) {\n              var r = i(9662),\n                n = i(8554);\n              e.exports = function (e, t) {\n                var i = e[t];\n                return n(i) ? void 0 : r(i);\n              };\n            },\n            7854: function _(e, t, i) {\n              var r = function r(e) {\n                return e && e.Math == Math && e;\n              };\n              e.exports = r(\"object\" == typeof globalThis && globalThis) || r(\"object\" == typeof window && window) || r(\"object\" == typeof self && self) || r(\"object\" == typeof i.g && i.g) || function () {\n                return this;\n              }() || Function(\"return this\")();\n            },\n            2597: function _(e, t, i) {\n              var r = i(1702),\n                n = i(7908),\n                o = r({}.hasOwnProperty);\n              e.exports = Object.hasOwn || function (e, t) {\n                return o(n(e), t);\n              };\n            },\n            3501: function _(e) {\n              e.exports = {};\n            },\n            490: function _(e, t, i) {\n              var r = i(5005);\n              e.exports = r(\"document\", \"documentElement\");\n            },\n            4664: function _(e, t, i) {\n              var r = i(9781),\n                n = i(7293),\n                o = i(317);\n              e.exports = !r && !n(function () {\n                return 7 != Object.defineProperty(o(\"div\"), \"a\", {\n                  get: function get() {\n                    return 7;\n                  }\n                }).a;\n              });\n            },\n            8361: function _(e, t, i) {\n              var r = i(1702),\n                n = i(7293),\n                o = i(4326),\n                s = Object,\n                a = r(\"\".split);\n              e.exports = n(function () {\n                return !s(\"z\").propertyIsEnumerable(0);\n              }) ? function (e) {\n                return \"String\" == o(e) ? a(e, \"\") : s(e);\n              } : s;\n            },\n            9587: function _(e, t, i) {\n              var r = i(614),\n                n = i(111),\n                o = i(7674);\n              e.exports = function (e, t, i) {\n                var s, a;\n                return o && r(s = t.constructor) && s !== i && n(a = s.prototype) && a !== i.prototype && o(e, a), e;\n              };\n            },\n            2788: function _(e, t, i) {\n              var r = i(1702),\n                n = i(614),\n                o = i(5465),\n                s = r(Function.toString);\n              n(o.inspectSource) || (o.inspectSource = function (e) {\n                return s(e);\n              }), e.exports = o.inspectSource;\n            },\n            8340: function _(e, t, i) {\n              var r = i(111),\n                n = i(8880);\n              e.exports = function (e, t) {\n                r(t) && \"cause\" in t && n(e, \"cause\", t.cause);\n              };\n            },\n            9909: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s = i(4811),\n                a = i(7854),\n                c = i(111),\n                d = i(8880),\n                u = i(2597),\n                l = i(5465),\n                h = i(6200),\n                p = i(3501),\n                _ = \"Object already initialized\",\n                E = a.TypeError,\n                f = a.WeakMap;\n              if (s || l.state) {\n                var m = l.state || (l.state = new f());\n                m.get = m.get, m.has = m.has, m.set = m.set, r = function r(e, t) {\n                  if (m.has(e)) throw E(_);\n                  return t.facade = e, m.set(e, t), t;\n                }, n = function n(e) {\n                  return m.get(e) || {};\n                }, o = function o(e) {\n                  return m.has(e);\n                };\n              } else {\n                var g = h(\"state\");\n                p[g] = !0, r = function r(e, t) {\n                  if (u(e, g)) throw E(_);\n                  return t.facade = e, d(e, g, t), t;\n                }, n = function n(e) {\n                  return u(e, g) ? e[g] : {};\n                }, o = function o(e) {\n                  return u(e, g);\n                };\n              }\n              e.exports = {\n                set: r,\n                get: n,\n                has: o,\n                enforce: function enforce(e) {\n                  return o(e) ? n(e) : r(e, {});\n                },\n                getterFor: function getterFor(e) {\n                  return function (t) {\n                    var i;\n                    if (!c(t) || (i = n(t)).type !== e) throw E(\"Incompatible receiver, \" + e + \" required\");\n                    return i;\n                  };\n                }\n              };\n            },\n            614: function _(e, t, i) {\n              var r = i(4154),\n                n = r.all;\n              e.exports = r.IS_HTMLDDA ? function (e) {\n                return \"function\" == typeof e || e === n;\n              } : function (e) {\n                return \"function\" == typeof e;\n              };\n            },\n            4705: function _(e, t, i) {\n              var r = i(7293),\n                n = i(614),\n                o = /#|\\.prototype\\./,\n                s = function s(e, t) {\n                  var i = c[a(e)];\n                  return i == u || i != d && (n(t) ? r(t) : !!t);\n                },\n                a = s.normalize = function (e) {\n                  return String(e).replace(o, \".\").toLowerCase();\n                },\n                c = s.data = {},\n                d = s.NATIVE = \"N\",\n                u = s.POLYFILL = \"P\";\n              e.exports = s;\n            },\n            8554: function _(e) {\n              e.exports = function (e) {\n                return null == e;\n              };\n            },\n            111: function _(e, t, i) {\n              var r = i(614),\n                n = i(4154),\n                o = n.all;\n              e.exports = n.IS_HTMLDDA ? function (e) {\n                return \"object\" == typeof e ? null !== e : r(e) || e === o;\n              } : function (e) {\n                return \"object\" == typeof e ? null !== e : r(e);\n              };\n            },\n            1913: function _(e) {\n              e.exports = !1;\n            },\n            2190: function _(e, t, i) {\n              var r = i(5005),\n                n = i(614),\n                o = i(7976),\n                s = i(3307),\n                a = Object;\n              e.exports = s ? function (e) {\n                return \"symbol\" == typeof e;\n              } : function (e) {\n                var t = r(\"Symbol\");\n                return n(t) && o(t.prototype, a(e));\n              };\n            },\n            3061: function _(e, t, i) {\n              var r = i(3383).IteratorPrototype,\n                n = i(30),\n                o = i(9114),\n                s = i(8003),\n                a = i(7497),\n                c = function c() {\n                  return this;\n                };\n              e.exports = function (e, t, i, d) {\n                var u = t + \" Iterator\";\n                return e.prototype = n(r, {\n                  next: o(+!d, i)\n                }), s(e, u, !1, !0), a[u] = c, e;\n              };\n            },\n            1656: function _(e, t, i) {\n              var r = i(2109),\n                n = i(6916),\n                o = i(1913),\n                s = i(6530),\n                a = i(614),\n                c = i(3061),\n                d = i(9518),\n                u = i(7674),\n                l = i(8003),\n                h = i(8880),\n                p = i(8052),\n                _ = i(5112),\n                E = i(7497),\n                f = i(3383),\n                m = s.PROPER,\n                g = s.CONFIGURABLE,\n                S = f.IteratorPrototype,\n                T = f.BUGGY_SAFARI_ITERATORS,\n                v = _(\"iterator\"),\n                R = \"keys\",\n                I = \"values\",\n                y = \"entries\",\n                C = function C() {\n                  return this;\n                };\n              e.exports = function (e, t, i, s, _, f, A) {\n                c(i, t, s);\n                var O,\n                  b,\n                  w,\n                  N = function N(e) {\n                    if (e === _ && M) return M;\n                    if (!T && e in L) return L[e];\n                    switch (e) {\n                      case R:\n                      case I:\n                      case y:\n                        return function () {\n                          return new i(this, e);\n                        };\n                    }\n                    return function () {\n                      return new i(this);\n                    };\n                  },\n                  D = t + \" Iterator\",\n                  P = !1,\n                  L = e.prototype,\n                  k = L[v] || L[\"@@iterator\"] || _ && L[_],\n                  M = !T && k || N(_),\n                  U = \"Array\" == t && L.entries || k;\n                if (U && (O = d(U.call(new e()))) !== Object.prototype && O.next && (o || d(O) === S || (u ? u(O, S) : a(O[v]) || p(O, v, C)), l(O, D, !0, !0), o && (E[D] = C)), m && _ == I && k && k.name !== I && (!o && g ? h(L, \"name\", I) : (P = !0, M = function M() {\n                  return n(k, this);\n                })), _) if (b = {\n                  values: N(I),\n                  keys: f ? M : N(R),\n                  entries: N(y)\n                }, A) for (w in b) (T || P || !(w in L)) && p(L, w, b[w]);else r({\n                  target: t,\n                  proto: !0,\n                  forced: T || P\n                }, b);\n                return o && !A || L[v] === M || p(L, v, M, {\n                  name: _\n                }), E[t] = M, b;\n              };\n            },\n            3383: function _(e, t, i) {\n              var r,\n                n,\n                o,\n                s = i(7293),\n                a = i(614),\n                c = i(111),\n                d = i(30),\n                u = i(9518),\n                l = i(8052),\n                h = i(5112),\n                p = i(1913),\n                _ = h(\"iterator\"),\n                E = !1;\n              [].keys && (\"next\" in (o = [].keys()) ? (n = u(u(o))) !== Object.prototype && (r = n) : E = !0), !c(r) || s(function () {\n                var e = {};\n                return r[_].call(e) !== e;\n              }) ? r = {} : p && (r = d(r)), a(r[_]) || l(r, _, function () {\n                return this;\n              }), e.exports = {\n                IteratorPrototype: r,\n                BUGGY_SAFARI_ITERATORS: E\n              };\n            },\n            7497: function _(e) {\n              e.exports = {};\n            },\n            6244: function _(e, t, i) {\n              var r = i(7466);\n              e.exports = function (e) {\n                return r(e.length);\n              };\n            },\n            6339: function _(e, t, i) {\n              var r = i(7293),\n                n = i(614),\n                o = i(2597),\n                s = i(9781),\n                a = i(6530).CONFIGURABLE,\n                c = i(2788),\n                d = i(9909),\n                u = d.enforce,\n                l = d.get,\n                h = Object.defineProperty,\n                p = s && !r(function () {\n                  return 8 !== h(function () {}, \"length\", {\n                    value: 8\n                  }).length;\n                }),\n                _ = String(String).split(\"String\"),\n                E = e.exports = function (e, t, i) {\n                  \"Symbol(\" === String(t).slice(0, 7) && (t = \"[\" + String(t).replace(/^Symbol\\(([^)]*)\\)/, \"$1\") + \"]\"), i && i.getter && (t = \"get \" + t), i && i.setter && (t = \"set \" + t), (!o(e, \"name\") || a && e.name !== t) && (s ? h(e, \"name\", {\n                    value: t,\n                    configurable: !0\n                  }) : e.name = t), p && i && o(i, \"arity\") && e.length !== i.arity && h(e, \"length\", {\n                    value: i.arity\n                  });\n                  try {\n                    i && o(i, \"constructor\") && i.constructor ? s && h(e, \"prototype\", {\n                      writable: !1\n                    }) : e.prototype && (e.prototype = void 0);\n                  } catch (e) {}\n                  var r = u(e);\n                  return o(r, \"source\") || (r.source = _.join(\"string\" == typeof t ? t : \"\")), e;\n                };\n              Function.prototype.toString = E(function () {\n                return n(this) && l(this).source || c(this);\n              }, \"toString\");\n            },\n            4758: function _(e) {\n              var t = Math.ceil,\n                i = Math.floor;\n              e.exports = Math.trunc || function (e) {\n                var r = +e;\n                return (r > 0 ? i : t)(r);\n              };\n            },\n            6277: function _(e, t, i) {\n              var r = i(1340);\n              e.exports = function (e, t) {\n                return void 0 === e ? arguments.length < 2 ? \"\" : t : r(e);\n              };\n            },\n            30: function _(e, t, i) {\n              var r,\n                n = i(9670),\n                o = i(6048),\n                s = i(748),\n                a = i(3501),\n                c = i(490),\n                d = i(317),\n                u = i(6200)(\"IE_PROTO\"),\n                l = function l() {},\n                h = function h(e) {\n                  return \"<script>\" + e + \"<\\/script>\";\n                },\n                p = function p(e) {\n                  e.write(h(\"\")), e.close();\n                  var t = e.parentWindow.Object;\n                  return e = null, t;\n                },\n                _ = function (_3) {\n                  function _() {\n                    return _3.apply(this, arguments);\n                  }\n                  _.toString = function () {\n                    return _3.toString();\n                  };\n                  return _;\n                }(function () {\n                  try {\n                    r = new ActiveXObject(\"htmlfile\");\n                  } catch (e) {}\n                  var e, t;\n                  _ = \"undefined\" != typeof document ? document.domain && r ? p(r) : ((t = d(\"iframe\")).style.display = \"none\", c.appendChild(t), t.src = String(\"javascript:\"), (e = t.contentWindow.document).open(), e.write(h(\"document.F=Object\")), e.close(), e.F) : p(r);\n                  for (var i = s.length; i--;) delete _.prototype[s[i]];\n                  return _();\n                });\n              a[u] = !0, e.exports = Object.create || function (e, t) {\n                var i;\n                return null !== e ? (l.prototype = n(e), i = new l(), l.prototype = null, i[u] = e) : i = _(), void 0 === t ? i : o.f(i, t);\n              };\n            },\n            6048: function _(e, t, i) {\n              var r = i(9781),\n                n = i(3353),\n                o = i(3070),\n                s = i(9670),\n                a = i(5656),\n                c = i(1956);\n              t.f = r && !n ? Object.defineProperties : function (e, t) {\n                s(e);\n                for (var i, r = a(t), n = c(t), d = n.length, u = 0; d > u;) o.f(e, i = n[u++], r[i]);\n                return e;\n              };\n            },\n            3070: function _(e, t, i) {\n              var r = i(9781),\n                n = i(4664),\n                o = i(3353),\n                s = i(9670),\n                a = i(4948),\n                c = TypeError,\n                d = Object.defineProperty,\n                u = Object.getOwnPropertyDescriptor;\n              t.f = r ? o ? function (e, t, i) {\n                if (s(e), t = a(t), s(i), \"function\" == typeof e && \"prototype\" === t && \"value\" in i && \"writable\" in i && !i.writable) {\n                  var r = u(e, t);\n                  r && r.writable && (e[t] = i.value, i = {\n                    configurable: \"configurable\" in i ? i.configurable : r.configurable,\n                    enumerable: \"enumerable\" in i ? i.enumerable : r.enumerable,\n                    writable: !1\n                  });\n                }\n                return d(e, t, i);\n              } : d : function (e, t, i) {\n                if (s(e), t = a(t), s(i), n) try {\n                  return d(e, t, i);\n                } catch (e) {}\n                if (\"get\" in i || \"set\" in i) throw c(\"Accessors not supported\");\n                return \"value\" in i && (e[t] = i.value), e;\n              };\n            },\n            1236: function _(e, t, i) {\n              var r = i(9781),\n                n = i(6916),\n                o = i(5296),\n                s = i(9114),\n                a = i(5656),\n                c = i(4948),\n                d = i(2597),\n                u = i(4664),\n                l = Object.getOwnPropertyDescriptor;\n              t.f = r ? l : function (e, t) {\n                if (e = a(e), t = c(t), u) try {\n                  return l(e, t);\n                } catch (e) {}\n                if (d(e, t)) return s(!n(o.f, e, t), e[t]);\n              };\n            },\n            8006: function _(e, t, i) {\n              var r = i(6324),\n                n = i(748).concat(\"length\", \"prototype\");\n              t.f = Object.getOwnPropertyNames || function (e) {\n                return r(e, n);\n              };\n            },\n            5181: function _(e, t) {\n              t.f = Object.getOwnPropertySymbols;\n            },\n            9518: function _(e, t, i) {\n              var r = i(2597),\n                n = i(614),\n                o = i(7908),\n                s = i(6200),\n                a = i(8544),\n                c = s(\"IE_PROTO\"),\n                d = Object,\n                u = d.prototype;\n              e.exports = a ? d.getPrototypeOf : function (e) {\n                var t = o(e);\n                if (r(t, c)) return t[c];\n                var i = t.constructor;\n                return n(i) && t instanceof i ? i.prototype : t instanceof d ? u : null;\n              };\n            },\n            7976: function _(e, t, i) {\n              var r = i(1702);\n              e.exports = r({}.isPrototypeOf);\n            },\n            6324: function _(e, t, i) {\n              var r = i(1702),\n                n = i(2597),\n                o = i(5656),\n                s = i(1318).indexOf,\n                a = i(3501),\n                c = r([].push);\n              e.exports = function (e, t) {\n                var i,\n                  r = o(e),\n                  d = 0,\n                  u = [];\n                for (i in r) !n(a, i) && n(r, i) && c(u, i);\n                for (; t.length > d;) n(r, i = t[d++]) && (~s(u, i) || c(u, i));\n                return u;\n              };\n            },\n            1956: function _(e, t, i) {\n              var r = i(6324),\n                n = i(748);\n              e.exports = Object.keys || function (e) {\n                return r(e, n);\n              };\n            },\n            5296: function _(e, t) {\n              var i = {}.propertyIsEnumerable,\n                r = Object.getOwnPropertyDescriptor,\n                n = r && !i.call({\n                  1: 2\n                }, 1);\n              t.f = n ? function (e) {\n                var t = r(this, e);\n                return !!t && t.enumerable;\n              } : i;\n            },\n            7674: function _(e, t, i) {\n              var r = i(1702),\n                n = i(9670),\n                o = i(6077);\n              e.exports = Object.setPrototypeOf || (\"__proto__\" in {} ? function () {\n                var e,\n                  t = !1,\n                  i = {};\n                try {\n                  (e = r(Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\").set))(i, []), t = i instanceof Array;\n                } catch (e) {}\n                return function (i, r) {\n                  return n(i), o(r), t ? e(i, r) : i.__proto__ = r, i;\n                };\n              }() : void 0);\n            },\n            2140: function _(e, t, i) {\n              var r = i(6916),\n                n = i(614),\n                o = i(111),\n                s = TypeError;\n              e.exports = function (e, t) {\n                var i, a;\n                if (\"string\" === t && n(i = e.toString) && !o(a = r(i, e))) return a;\n                if (n(i = e.valueOf) && !o(a = r(i, e))) return a;\n                if (\"string\" !== t && n(i = e.toString) && !o(a = r(i, e))) return a;\n                throw s(\"Can't convert object to primitive value\");\n              };\n            },\n            3887: function _(e, t, i) {\n              var r = i(5005),\n                n = i(1702),\n                o = i(8006),\n                s = i(5181),\n                a = i(9670),\n                c = n([].concat);\n              e.exports = r(\"Reflect\", \"ownKeys\") || function (e) {\n                var t = o.f(a(e)),\n                  i = s.f;\n                return i ? c(t, i(e)) : t;\n              };\n            },\n            2626: function _(e, t, i) {\n              var r = i(3070).f;\n              e.exports = function (e, t, i) {\n                i in e || r(e, i, {\n                  configurable: !0,\n                  get: function get() {\n                    return t[i];\n                  },\n                  set: function set(e) {\n                    t[i] = e;\n                  }\n                });\n              };\n            },\n            4488: function _(e, t, i) {\n              var r = i(8554),\n                n = TypeError;\n              e.exports = function (e) {\n                if (r(e)) throw n(\"Can't call method on \" + e);\n                return e;\n              };\n            },\n            8003: function _(e, t, i) {\n              var r = i(3070).f,\n                n = i(2597),\n                o = i(5112)(\"toStringTag\");\n              e.exports = function (e, t, i) {\n                e && !i && (e = e.prototype), e && !n(e, o) && r(e, o, {\n                  configurable: !0,\n                  value: t\n                });\n              };\n            },\n            6200: function _(e, t, i) {\n              var r = i(2309),\n                n = i(9711),\n                o = r(\"keys\");\n              e.exports = function (e) {\n                return o[e] || (o[e] = n(e));\n              };\n            },\n            5465: function _(e, t, i) {\n              var r = i(7854),\n                n = i(3072),\n                o = \"__core-js_shared__\",\n                s = r[o] || n(o, {});\n              e.exports = s;\n            },\n            2309: function _(e, t, i) {\n              var r = i(1913),\n                n = i(5465);\n              (e.exports = function (e, t) {\n                return n[e] || (n[e] = void 0 !== t ? t : {});\n              })(\"versions\", []).push({\n                version: \"3.26.0\",\n                mode: r ? \"pure\" : \"global\",\n                copyright: \"Â© 2014-2022 Denis Pushkarev (zloirock.ru)\",\n                license: \"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE\",\n                source: \"https://github.com/zloirock/core-js\"\n              });\n            },\n            6293: function _(e, t, i) {\n              var r = i(7392),\n                n = i(7293);\n              e.exports = !!Object.getOwnPropertySymbols && !n(function () {\n                var e = Symbol();\n                return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham && r && r < 41;\n              });\n            },\n            1400: function _(e, t, i) {\n              var r = i(9303),\n                n = Math.max,\n                o = Math.min;\n              e.exports = function (e, t) {\n                var i = r(e);\n                return i < 0 ? n(i + t, 0) : o(i, t);\n              };\n            },\n            5656: function _(e, t, i) {\n              var r = i(8361),\n                n = i(4488);\n              e.exports = function (e) {\n                return r(n(e));\n              };\n            },\n            9303: function _(e, t, i) {\n              var r = i(4758);\n              e.exports = function (e) {\n                var t = +e;\n                return t != t || 0 === t ? 0 : r(t);\n              };\n            },\n            7466: function _(e, t, i) {\n              var r = i(9303),\n                n = Math.min;\n              e.exports = function (e) {\n                return e > 0 ? n(r(e), 9007199254740991) : 0;\n              };\n            },\n            7908: function _(e, t, i) {\n              var r = i(4488),\n                n = Object;\n              e.exports = function (e) {\n                return n(r(e));\n              };\n            },\n            7593: function _(e, t, i) {\n              var r = i(6916),\n                n = i(111),\n                o = i(2190),\n                s = i(8173),\n                a = i(2140),\n                c = i(5112),\n                d = TypeError,\n                u = c(\"toPrimitive\");\n              e.exports = function (e, t) {\n                if (!n(e) || o(e)) return e;\n                var i,\n                  c = s(e, u);\n                if (c) {\n                  if (void 0 === t && (t = \"default\"), i = r(c, e, t), !n(i) || o(i)) return i;\n                  throw d(\"Can't convert object to primitive value\");\n                }\n                return void 0 === t && (t = \"number\"), a(e, t);\n              };\n            },\n            4948: function _(e, t, i) {\n              var r = i(7593),\n                n = i(2190);\n              e.exports = function (e) {\n                var t = r(e, \"string\");\n                return n(t) ? t : t + \"\";\n              };\n            },\n            1694: function _(e, t, i) {\n              var r = {};\n              r[i(5112)(\"toStringTag\")] = \"z\", e.exports = \"[object z]\" === String(r);\n            },\n            1340: function _(e, t, i) {\n              var r = i(648),\n                n = String;\n              e.exports = function (e) {\n                if (\"Symbol\" === r(e)) throw TypeError(\"Cannot convert a Symbol value to a string\");\n                return n(e);\n              };\n            },\n            6330: function _(e) {\n              var t = String;\n              e.exports = function (e) {\n                try {\n                  return t(e);\n                } catch (e) {\n                  return \"Object\";\n                }\n              };\n            },\n            9711: function _(e, t, i) {\n              var r = i(1702),\n                n = 0,\n                o = Math.random(),\n                s = r(1..toString);\n              e.exports = function (e) {\n                return \"Symbol(\" + (void 0 === e ? \"\" : e) + \")_\" + s(++n + o, 36);\n              };\n            },\n            3307: function _(e, t, i) {\n              var r = i(6293);\n              e.exports = r && !Symbol.sham && \"symbol\" == typeof Symbol.iterator;\n            },\n            3353: function _(e, t, i) {\n              var r = i(9781),\n                n = i(7293);\n              e.exports = r && n(function () {\n                return 42 != Object.defineProperty(function () {}, \"prototype\", {\n                  value: 42,\n                  writable: !1\n                }).prototype;\n              });\n            },\n            4811: function _(e, t, i) {\n              var r = i(7854),\n                n = i(614),\n                o = r.WeakMap;\n              e.exports = n(o) && /native code/.test(String(o));\n            },\n            5112: function _(e, t, i) {\n              var r = i(7854),\n                n = i(2309),\n                o = i(2597),\n                s = i(9711),\n                a = i(6293),\n                c = i(3307),\n                d = n(\"wks\"),\n                u = r.Symbol,\n                l = u && u.for,\n                h = c ? u : u && u.withoutSetter || s;\n              e.exports = function (e) {\n                if (!o(d, e) || !a && \"string\" != typeof d[e]) {\n                  var t = \"Symbol.\" + e;\n                  a && o(u, e) ? d[e] = u[e] : d[e] = c && l ? l(t) : h(t);\n                }\n                return d[e];\n              };\n            },\n            9191: function _(e, t, i) {\n              var r = i(5005),\n                n = i(2597),\n                o = i(8880),\n                s = i(7976),\n                a = i(7674),\n                c = i(9920),\n                d = i(2626),\n                u = i(9587),\n                l = i(6277),\n                h = i(8340),\n                p = i(1060),\n                _ = i(2914),\n                E = i(9781),\n                f = i(1913);\n              e.exports = function (e, t, i, m) {\n                var g = \"stackTraceLimit\",\n                  S = m ? 2 : 1,\n                  T = e.split(\".\"),\n                  v = T[T.length - 1],\n                  R = r.apply(null, T);\n                if (R) {\n                  var I = R.prototype;\n                  if (!f && n(I, \"cause\") && delete I.cause, !i) return R;\n                  var y = r(\"Error\"),\n                    C = t(function (e, t) {\n                      var i = l(m ? t : e, void 0),\n                        r = m ? new R(e) : new R();\n                      return void 0 !== i && o(r, \"message\", i), _ && o(r, \"stack\", p(r.stack, 2)), this && s(I, this) && u(r, this, C), arguments.length > S && h(r, arguments[S]), r;\n                    });\n                  if (C.prototype = I, \"Error\" !== v ? a ? a(C, y) : c(C, y, {\n                    name: !0\n                  }) : E && g in R && (d(C, R, g), d(C, R, \"prepareStackTrace\")), c(C, R), !f) try {\n                    I.name !== v && o(I, \"name\", v), I.constructor = C;\n                  } catch (e) {}\n                  return C;\n                }\n              };\n            },\n            6992: function _(e, t, i) {\n              var r = i(5656),\n                n = i(1223),\n                o = i(7497),\n                s = i(9909),\n                a = i(3070).f,\n                c = i(1656),\n                d = i(6178),\n                u = i(1913),\n                l = i(9781),\n                h = \"Array Iterator\",\n                p = s.set,\n                _ = s.getterFor(h);\n              e.exports = c(Array, \"Array\", function (e, t) {\n                p(this, {\n                  type: h,\n                  target: r(e),\n                  index: 0,\n                  kind: t\n                });\n              }, function () {\n                var e = _(this),\n                  t = e.target,\n                  i = e.kind,\n                  r = e.index++;\n                return !t || r >= t.length ? (e.target = void 0, d(void 0, !0)) : d(\"keys\" == i ? r : \"values\" == i ? t[r] : [r, t[r]], !1);\n              }, \"values\");\n              var E = o.Arguments = o.Array;\n              if (n(\"keys\"), n(\"values\"), n(\"entries\"), !u && l && \"values\" !== E.name) try {\n                a(E, \"name\", {\n                  value: \"values\"\n                });\n              } catch (e) {}\n            },\n            1703: function _(e, t, i) {\n              var r = i(2109),\n                n = i(7854),\n                o = i(2104),\n                s = i(9191),\n                a = n.WebAssembly,\n                c = 7 !== Error(\"e\", {\n                  cause: 7\n                }).cause,\n                d = function d(e, t) {\n                  var i = {};\n                  i[e] = s(e, t, c), r({\n                    global: !0,\n                    constructor: !0,\n                    arity: 1,\n                    forced: c\n                  }, i);\n                },\n                u = function u(e, t) {\n                  if (a && a[e]) {\n                    var i = {};\n                    i[e] = s(\"WebAssembly.\" + e, t, c), r({\n                      target: \"WebAssembly\",\n                      stat: !0,\n                      constructor: !0,\n                      arity: 1,\n                      forced: c\n                    }, i);\n                  }\n                };\n              d(\"Error\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), d(\"EvalError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), d(\"RangeError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), d(\"ReferenceError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), d(\"SyntaxError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), d(\"TypeError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), d(\"URIError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), u(\"CompileError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), u(\"LinkError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              }), u(\"RuntimeError\", function (e) {\n                return function (t) {\n                  return o(e, this, arguments);\n                };\n              });\n            },\n            3948: function _(e, t, i) {\n              var r = i(7854),\n                n = i(8324),\n                o = i(8509),\n                s = i(6992),\n                a = i(8880),\n                c = i(5112),\n                d = c(\"iterator\"),\n                u = c(\"toStringTag\"),\n                l = s.values,\n                h = function h(e, t) {\n                  if (e) {\n                    if (e[d] !== l) try {\n                      a(e, d, l);\n                    } catch (t) {\n                      e[d] = l;\n                    }\n                    if (e[u] || a(e, u, t), n[t]) for (var i in s) if (e[i] !== s[i]) try {\n                      a(e, i, s[i]);\n                    } catch (t) {\n                      e[i] = s[i];\n                    }\n                  }\n                };\n              for (var p in n) h(r[p] && r[p].prototype, p);\n              h(o, \"DOMTokenList\");\n            },\n            6226: function _(e, t, i) {\n              e.exports = i(7460);\n            },\n            7445: function _(e, t, i) {\n              e.exports = i(3685);\n            }\n          },\n          t = {};\n        function i(r) {\n          var n = t[r];\n          if (void 0 !== n) return n.exports;\n          var o = t[r] = {\n            exports: {}\n          };\n          return e[r](o, o.exports, i), o.exports;\n        }\n        i.n = function (e) {\n          var t = e && e.__esModule ? function () {\n            return e.default;\n          } : function () {\n            return e;\n          };\n          return i.d(t, {\n            a: t\n          }), t;\n        }, i.d = function (e, t) {\n          for (var r in t) i.o(t, r) && !i.o(e, r) && Object.defineProperty(e, r, {\n            enumerable: !0,\n            get: t[r]\n          });\n        }, i.g = function () {\n          if (\"object\" == typeof globalThis) return globalThis;\n          try {\n            return this || new Function(\"return this\")();\n          } catch (e) {\n            if (\"object\" == typeof window) return window;\n          }\n        }(), i.o = function (e, t) {\n          return Object.prototype.hasOwnProperty.call(e, t);\n        }, i.r = function (e) {\n          \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n            value: \"Module\"\n          }), Object.defineProperty(e, \"__esModule\", {\n            value: !0\n          });\n        };\n        var r = {};\n        return function () {\n          i.r(r), i.d(r, {\n            AudioExtension: function AudioExtension() {\n              return T;\n            },\n            AudioProcessor: function AudioProcessor() {\n              return g;\n            },\n            Extension: function Extension() {\n              return S;\n            },\n            PromiseMutex: function PromiseMutex() {\n              return y;\n            },\n            Ticker: function Ticker() {\n              return R;\n            },\n            VideoProcessor: function VideoProcessor() {\n              return m;\n            },\n            logger: function logger() {\n              return u;\n            },\n            reporter: function reporter() {\n              return p;\n            }\n          });\n          var e = i(7445);\n          function t(t, i, r) {\n            return i in t ? e(t, i, {\n              value: r,\n              enumerable: !0,\n              configurable: !0,\n              writable: !0\n            }) : t[i] = r, t;\n          }\n          i(1703), i(6992), i(3948);\n          var n = i(6226),\n            o = i.n(n);\n          var s = Date.now(),\n            a = {\n              DEBUG: 0,\n              INFO: 1,\n              WARNING: 2,\n              ERROR: 3,\n              NONE: 4\n            };\n          function c() {\n            var e = new Date();\n            return e.toTimeString().split(\" \")[0] + \":\" + e.getMilliseconds();\n          }\n          var d = function d(e) {\n              for (var _t96 in a) if (Object.prototype.hasOwnProperty.call(a, _t96) && a[_t96] === e) return _t96;\n              return \"DEFAULT\";\n            },\n            u = new ( /*#__PURE__*/function () {\n              function _class12() {\n                _classCallCheck(this, _class12);\n                t(this, \"logLevel\", a.DEBUG), t(this, \"hookLog\", void 0);\n              }\n              _createClass(_class12, [{\n                key: \"debug\",\n                value: function debug() {\n                  for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n                  var r = [a.DEBUG].concat(t);\n                  this.log.apply(this, r);\n                }\n              }, {\n                key: \"info\",\n                value: function info() {\n                  for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n                  var r = [a.INFO].concat(t);\n                  this.log.apply(this, r);\n                }\n              }, {\n                key: \"warning\",\n                value: function warning() {\n                  for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n                  var r = [a.WARNING].concat(t);\n                  this.log.apply(this, r);\n                }\n              }, {\n                key: \"error\",\n                value: function error() {\n                  for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];\n                  var r = [a.ERROR].concat(t);\n                  this.log.apply(this, r);\n                }\n              }, {\n                key: \"log\",\n                value: function log() {\n                  var _this139 = this;\n                  for (var e, t = arguments.length, i = new Array(t), r = 0; r < t; r++) i[r] = arguments[r];\n                  if (Date.now() - s < 100) return void setTimeout(function () {\n                    _this139.log.apply(_this139, i);\n                  }, Date.now() - s);\n                  var n = Math.max(0, Math.min(4, i[0]));\n                  if (i[0] = c() + \" Agora-Extension [\".concat(d(n), \"]:\"), n < this.logLevel) return;\n                  var o = c() + \" %cAgora-Extension [\".concat(d(n), \"]:\");\n                  var u = [];\n                  switch (n) {\n                    case a.DEBUG:\n                      u = [o, \"color: #64B5F6;\"].concat(i.slice(1)), console.log.apply(console, u);\n                      break;\n                    case a.INFO:\n                      u = [o, \"color: #1E88E5; font-weight: bold;\"].concat(i.slice(1)), console.log.apply(console, u);\n                      break;\n                    case a.WARNING:\n                      u = [o, \"color: #FB8C00; font-weight: bold;\"].concat(i.slice(1)), console.warn.apply(console, u);\n                      break;\n                    case a.ERROR:\n                      u = [o, \"color: #B00020; font-weight: bold;\"].concat(i.slice(1)), console.error.apply(console, u);\n                  }\n                  null === (e = this.hookLog) || void 0 === e || e.call(this, n, u);\n                }\n              }]);\n              return _class12;\n            }())();\n          function l(e, t) {\n            var i = Object.keys(e);\n            if (Object.getOwnPropertySymbols) {\n              var r = Object.getOwnPropertySymbols(e);\n              t && (r = r.filter(function (t) {\n                return Object.getOwnPropertyDescriptor(e, t).enumerable;\n              })), i.push.apply(i, r);\n            }\n            return i;\n          }\n          function h(e) {\n            for (var i = 1; i < arguments.length; i++) {\n              var r = null != arguments[i] ? arguments[i] : {};\n              i % 2 ? l(Object(r), !0).forEach(function (i) {\n                t(e, i, r[i]);\n              }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : l(Object(r)).forEach(function (t) {\n                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n              });\n            }\n            return e;\n          }\n          var p = new ( /*#__PURE__*/function () {\n            function _class13() {\n              _classCallCheck(this, _class13);\n              t(this, \"apiInvokeMsgQueue\", []), t(this, \"hookApiInvoke\", void 0);\n            }\n            _createClass(_class13, [{\n              key: \"reportApiInvoke\",\n              value: function reportApiInvoke(e) {\n                var _this140 = this;\n                e.timeout = e.timeout || 6e4, e.reportResult = void 0 === e.reportResult || e.reportResult;\n                var t = Date.now(),\n                  i = function i() {\n                    return {\n                      name: e.name,\n                      apiInvokeTime: t,\n                      options: e.options\n                    };\n                  };\n                var r = !1;\n                var n;\n                (n = e.timeout, new (o())(function (e) {\n                  window.setTimeout(e, n);\n                })).then(function () {\n                  r || (_this140.sendApiInvoke(h(h({}, i()), {}, {\n                    error: \"API_INVOKE_TIMEOUT\",\n                    success: !1\n                  })), u.debug(\"\".concat(e.name, \" timeout\")));\n                });\n                var s = new Error(\"\".concat(e.name, \": this api invoke is end\"));\n                return {\n                  onSuccess: function onSuccess(t) {\n                    if (r) throw s;\n                    r = !0, _this140.sendApiInvoke(h(h({}, i()), {}, {\n                      success: !0\n                    }, e.reportResult && {\n                      result: t\n                    }));\n                  },\n                  onError: function onError(e) {\n                    if (r) throw e;\n                    r = !0, _this140.sendApiInvoke(h(h({}, i()), {}, {\n                      success: !1,\n                      error: e.toString()\n                    }));\n                  }\n                };\n              }\n            }, {\n              key: \"sendApiInvoke\",\n              value: function sendApiInvoke(e) {\n                this.hookApiInvoke ? (this.hookApiInvoke([].concat(_toConsumableArray(this.apiInvokeMsgQueue), [e])), this.apiInvokeMsgQueue = []) : this.apiInvokeMsgQueue.push(e);\n              }\n            }]);\n            return _class13;\n          }())();\n          function _(e, t) {\n            var i = Object.keys(e);\n            if (Object.getOwnPropertySymbols) {\n              var r = Object.getOwnPropertySymbols(e);\n              t && (r = r.filter(function (t) {\n                return Object.getOwnPropertyDescriptor(e, t).enumerable;\n              })), i.push.apply(i, r);\n            }\n            return i;\n          }\n          function E(e) {\n            for (var i = 1; i < arguments.length; i++) {\n              var r = null != arguments[i] ? arguments[i] : {};\n              i % 2 ? _(Object(r), !0).forEach(function (i) {\n                t(e, i, r[i]);\n              }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : _(Object(r)).forEach(function (t) {\n                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n              });\n            }\n            return e;\n          }\n          var f = /*#__PURE__*/function (_ref33) {\n            _inherits(f, _ref33);\n            _createClass(f, [{\n              key: \"output\",\n              value: function output(e, t) {\n                if (this.outputTrack === e) return;\n                var i = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".output\"),\n                  options: {\n                    track: null == e ? void 0 : e.toString()\n                  }\n                });\n                this.outputTrack = e, this.destination && this.destination.updateInput({\n                  track: e,\n                  context: t\n                }), i.onSuccess();\n              }\n            }, {\n              key: \"enabled\",\n              get: function get() {\n                return this._enabled;\n              }\n            }]);\n            function f() {\n              var _this141;\n              _classCallCheck(this, f);\n              _this141 = _possibleConstructorReturn(this, _getPrototypeOf(f).call(this)), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"inputTrack\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"outputTrack\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"_enabled\", !0), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"_source\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"ID\", function e() {\n                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 7,\n                  i = arguments.length > 1 ? arguments[1] : void 0;\n                var r = Math.random().toString(16).substr(2, t).toLowerCase();\n                return r.length === t ? \"\".concat(i).concat(r) : \"\".concat(i).concat(r) + e(t - r.length, \"\");\n              }(6, \"\")), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"destination\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"context\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this141)), \"name\", void 0);\n              return _this141;\n            }\n            _createClass(f, [{\n              key: \"enable\",\n              value: function enable() {\n                if (this._enabled) return;\n                var e = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".enable\"),\n                  options: !0\n                });\n                u.info(\"\".concat(this.name, \"-\").concat(this.ID, \" enabled\")), this._enabled = !0;\n                try {\n                  var t;\n                  var _i46 = null === (t = this.onEnableChange) || void 0 === t ? void 0 : t.call(this, this._enabled);\n                  if (_i46 instanceof o()) return _i46.then(function () {\n                    e.onSuccess();\n                  }).catch(function (t) {\n                    throw e.onError(t), t;\n                  });\n                  e.onSuccess();\n                } catch (t) {\n                  throw e.onError(t), t;\n                }\n              }\n            }, {\n              key: \"disable\",\n              value: function disable() {\n                if (!this._enabled) return;\n                var e = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".enable\"),\n                  options: !1\n                });\n                u.info(\"\".concat(this.name, \"-\").concat(this.ID, \" disabled\")), this._enabled = !1;\n                try {\n                  var t;\n                  var _i47 = null === (t = this.onEnableChange) || void 0 === t ? void 0 : t.call(this, this._enabled);\n                  if (_i47 instanceof o()) return _i47.then(function () {\n                    e.onSuccess();\n                  }).catch(function (t) {\n                    throw e.onError(t), t;\n                  });\n                  e.onSuccess();\n                } catch (t) {\n                  throw e.onError(t), t;\n                }\n              }\n            }]);\n            return f;\n          }( /*#__PURE__*/function () {\n            function _class14() {\n              _classCallCheck(this, _class14);\n              t(this, \"_events\", {}), t(this, \"addListener\", this.on);\n            }\n            _createClass(_class14, [{\n              key: \"getListeners\",\n              value: function getListeners(e) {\n                return this._events[e] ? this._events[e].map(function (e) {\n                  return e.listener;\n                }) : [];\n              }\n            }, {\n              key: \"on\",\n              value: function on(e, t) {\n                this._events[e] || (this._events[e] = []);\n                var i = this._events[e];\n                -1 === this._indexOfListener(i, t) && i.push({\n                  listener: t,\n                  once: !1\n                });\n              }\n            }, {\n              key: \"once\",\n              value: function once(e, t) {\n                this._events[e] || (this._events[e] = []);\n                var i = this._events[e];\n                -1 === this._indexOfListener(i, t) && i.push({\n                  listener: t,\n                  once: !0\n                });\n              }\n            }, {\n              key: \"off\",\n              value: function off(e, t) {\n                if (!this._events[e]) return;\n                var i = this._events[e],\n                  r = this._indexOfListener(i, t);\n                -1 !== r && i.splice(r, 1), 0 === this._events[e].length && delete this._events[e];\n              }\n            }, {\n              key: \"removeAllListeners\",\n              value: function removeAllListeners(e) {\n                e ? delete this._events[e] : this._events = {};\n              }\n            }, {\n              key: \"emit\",\n              value: function emit(e) {\n                this._events[e] || (this._events[e] = []);\n                var t = this._events[e].map(function (e) {\n                  return e;\n                });\n                for (var i = arguments.length, r = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) r[n - 1] = arguments[n];\n                for (var _i48 = 0; _i48 < t.length; _i48 += 1) {\n                  var _n23 = t[_i48];\n                  _n23.once && this.off(e, _n23.listener), _n23.listener.apply(this, r || []);\n                }\n              }\n            }, {\n              key: \"_indexOfListener\",\n              value: function _indexOfListener(e, t) {\n                var i = e.length;\n                for (; i--;) if (e[i].listener === t) return i;\n                return -1;\n              }\n            }, {\n              key: \"emitAsPromise\",\n              value: function emitAsPromise(e) {\n                var _this142 = this;\n                for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) i[r - 1] = arguments[r];\n                return 0 === this.getListeners(e).length ? o().reject(new Error(\"No promise event handler.\")) : new (o())(function (t, r) {\n                  _this142.emit.apply(_this142, [e].concat(i, [t, r]));\n                });\n              }\n            }, {\n              key: \"emitAsPromiseNoResponse\",\n              value: function emitAsPromiseNoResponse(e) {\n                var _this143 = this;\n                for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) i[r - 1] = arguments[r];\n                return 0 === this.getListeners(e).length ? o().resolve() : new (o())(function (t, r) {\n                  _this143.emit.apply(_this143, [e].concat(i, [t, r]));\n                });\n              }\n            }]);\n            return _class14;\n          }());\n          var m = /*#__PURE__*/function (_f2) {\n            _inherits(m, _f2);\n            function m() {\n              _classCallCheck(this, m);\n              return _possibleConstructorReturn(this, _getPrototypeOf(m).apply(this, arguments));\n            }\n            _createClass(m, [{\n              key: \"pipe\",\n              value: function pipe(e) {\n                var t = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".pipe\"),\n                  options: {\n                    processor: e.name\n                  }\n                });\n                if (this.destination === e) return t.onSuccess(), e;\n                if (e._source) {\n                  var _i49 = new Error(\"Processor \".concat(e.name, \" already being piped, please call \").concat(e._source.name, \".unpipe() beforehand.\"));\n                  throw t.onError(_i49), _i49;\n                }\n                return this.destination && this.unpipe(), this.destination = e, e._source = this, this.context && this.destination.updateInput({\n                  track: this.outputTrack,\n                  context: this.context\n                }), t.onSuccess(), e;\n              }\n            }, {\n              key: \"unpipe\",\n              value: function unpipe() {\n                if (!this.destination) return;\n                var e = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".unpipe\"),\n                  options: {\n                    processor: this.destination.name\n                  }\n                });\n                u.info(\"unpiping processor \".concat(this.destination.name, \"-\").concat(this.destination.ID));\n                try {\n                  var _t97 = this.destination;\n                  this.destination._source = void 0, this.destination = void 0, _t97.reset();\n                } finally {\n                  e.onSuccess();\n                }\n              }\n            }, {\n              key: \"updateInput\",\n              value: function updateInput(e) {\n                var t, i;\n                e.context !== this.context && (this.context = e.context, null === (t = this.onPiped) || void 0 === t || t.call(this, this.context), this.destination && this.destination.updateInput({\n                  track: this.outputTrack,\n                  context: e.context\n                })), e.track && this.inputTrack !== e.track && (this.inputTrack = e.track, null === (i = this.onTrack) || void 0 === i || i.call(this, e.track, this.context));\n              }\n            }, {\n              key: \"reset\",\n              value: function reset() {\n                var e;\n                this.context && this.context.requestRevertConstraints(this), this.inputTrack = void 0, this.context = void 0, null === (e = this.onUnpiped) || void 0 === e || e.call(this), this.destination && this.destination.reset();\n              }\n            }, {\n              key: \"kind\",\n              get: function get() {\n                return \"video\";\n              }\n            }]);\n            return m;\n          }(f);\n          var g = /*#__PURE__*/function (_f3) {\n            _inherits(g, _f3);\n            function g() {\n              var _this144;\n              _classCallCheck(this, g);\n              _this144 = _possibleConstructorReturn(this, _getPrototypeOf(g).apply(this, arguments)), t(_assertThisInitialized(_assertThisInitialized(_this144)), \"inputNode\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this144)), \"outputNode\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this144)), \"destination\", void 0), t(_assertThisInitialized(_assertThisInitialized(_this144)), \"context\", void 0);\n              return _this144;\n            }\n            _createClass(g, [{\n              key: \"pipe\",\n              value: function pipe(e) {\n                var t = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".pipe\"),\n                  options: {\n                    processor: e.name\n                  }\n                });\n                if (this.destination === e) return t.onSuccess(), e;\n                if (e._source) {\n                  var _i50 = new Error(\"Processor \".concat(e.name, \" already being piped, please call \").concat(e._source.name, \".unpipe() beforehand.\"));\n                  throw t.onError(_i50), _i50;\n                }\n                return this.destination && this.unpipe(), this.destination = e, e._source = this, this.context && this.destination.updateInput({\n                  track: this.outputTrack,\n                  node: this.outputNode,\n                  context: this.context\n                }), t.onSuccess(), e;\n              }\n            }, {\n              key: \"unpipe\",\n              value: function unpipe() {\n                if (!this.destination) return;\n                u.info(\"unpiping processor \".concat(this.destination.name, \"-\").concat(this.destination.ID));\n                var e = p.reportApiInvoke({\n                  name: \"\".concat(this.name, \".unpipe\"),\n                  options: {\n                    processor: this.destination.name\n                  }\n                });\n                try {\n                  var t;\n                  var _i51 = this.destination;\n                  null === (t = this.outputNode) || void 0 === t || t.disconnect(), this.destination._source = void 0, this.destination = void 0, _i51.reset();\n                } finally {\n                  e.onSuccess();\n                }\n              }\n            }, {\n              key: \"output\",\n              value: function output(e, t) {\n                if (e instanceof MediaStreamTrack) _get(_getPrototypeOf(g.prototype), \"output\", this).call(this, e, t);else if (e instanceof AudioNode) {\n                  if (this.outputNode === e) return;\n                  var _i52 = p.reportApiInvoke({\n                    name: \"\".concat(this.name, \".output\"),\n                    options: E(E({}, e instanceof MediaStreamTrack && {\n                      track: e.toString()\n                    }), e instanceof AudioNode && {\n                      audioNode: e.toString()\n                    })\n                  });\n                  this.outputNode = e, this.destination && this.destination.updateInput({\n                    node: e,\n                    context: t\n                  }), _i52.onSuccess();\n                }\n              }\n            }, {\n              key: \"updateInput\",\n              value: function updateInput(e) {\n                var t, i, r;\n                e.context !== this.context && (this.context = e.context, null === (t = this.onPiped) || void 0 === t || t.call(this, this.context), this.destination && this.destination.updateInput({\n                  track: this.outputTrack,\n                  node: this.outputNode,\n                  context: e.context\n                })), e.track && this.inputTrack !== e.track && (this.inputTrack = e.track, null === (i = this.onTrack) || void 0 === i || i.call(this, e.track, this.context)), e.node && this.inputNode !== e.node && (this.inputNode = e.node, null === (r = this.onNode) || void 0 === r || r.call(this, e.node, this.context));\n              }\n            }, {\n              key: \"reset\",\n              value: function reset() {\n                var e;\n                this.context && this.context.requestRevertConstraints(this), this.inputTrack = void 0, this.inputNode = void 0, null === (e = this.onUnpiped) || void 0 === e || e.call(this, this.context), this.context = void 0, this.destination && this.destination.reset();\n              }\n            }, {\n              key: \"kind\",\n              get: function get() {\n                return \"audio\";\n              }\n            }]);\n            return g;\n          }(f);\n          var S = /*#__PURE__*/function () {\n            function S() {\n              _classCallCheck(this, S);\n              t(this, \"__registered__\", !1), t(this, \"logger\", u), t(this, \"reporter\", p), t(this, \"parameters\", {});\n            }\n            _createClass(S, [{\n              key: \"createProcessor\",\n              value: function createProcessor() {\n                if (!this.__registered__) throw new Error(\"Extension not registered yet!\");\n                return this._createProcessor();\n              }\n            }]);\n            return S;\n          }();\n          var T = /*#__PURE__*/function (_S2) {\n            _inherits(T, _S2);\n            function T() {\n              _classCallCheck(this, T);\n              return _possibleConstructorReturn(this, _getPrototypeOf(T).apply(this, arguments));\n            }\n            return T;\n          }(S);\n          var v;\n          var R = /*#__PURE__*/function () {\n            _createClass(R, [{\n              key: \"running\",\n              get: function get() {\n                return this._running;\n              }\n            }]);\n            function R(e, i) {\n              _classCallCheck(this, R);\n              if (t(this, \"type\", void 0), t(this, \"interval\", void 0), t(this, \"fn\", void 0), t(this, \"_running\", !1), t(this, \"_osc\", void 0), !e) throw new Error();\n              if (i <= 0) throw new Error();\n              this.type = e, this.interval = i;\n            }\n            _createClass(R, [{\n              key: \"add\",\n              value: function add(e) {\n                this.fn = e;\n              }\n            }, {\n              key: \"remove\",\n              value: function remove() {\n                this.fn = void 0;\n              }\n            }, {\n              key: \"start\",\n              value: function start() {\n                var _this145 = this;\n                if (!this._running) switch (this._running = !0, this.type) {\n                  case \"Timer\":\n                    {\n                      var _e74 = function _e74() {\n                        setTimeout(function () {\n                          _this145.fn && _this145.fn(), _this145._running && _e74();\n                        }, _this145.interval);\n                      };\n                      _e74();\n                      break;\n                    }\n                  case \"RAF\":\n                    {\n                      var _e75 = function _e75(t) {\n                        requestAnimationFrame(function (i) {\n                          i - t < _this145.interval ? _this145._running && _e75(t) : (_this145.fn && _this145.fn(), _this145._running && _e75(i));\n                        });\n                      };\n                      _e75(performance.now());\n                      break;\n                    }\n                  case \"Oscillator\":\n                    {\n                      v || (v = new AudioContext());\n                      var _e76 = v.createGain();\n                      var _t98;\n                      _e76.gain.value = 0, _e76.connect(v.destination);\n                      var _i53 = function _i53() {\n                        _this145.fn && _this145.fn(), _t98 && _t98.disconnect(), _t98 = v.createOscillator(), _this145._osc = _t98, _t98.connect(_e76), _this145._running && (_t98.onended = _i53, _t98.start(0), _t98.stop(v.currentTime + _this145.interval / 1e3));\n                      };\n                      _i53();\n                      break;\n                    }\n                }\n              }\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this._running = !1, this._osc && (this._osc.onended = null, this._osc = void 0);\n              }\n            }]);\n            return R;\n          }();\n          var I = 1;\n          var y = /*#__PURE__*/function () {\n            function y(e) {\n              _classCallCheck(this, y);\n              t(this, \"lockingPromise\", o().resolve()), t(this, \"locks\", 0), t(this, \"name\", \"\"), t(this, \"lockId\", void 0), this.lockId = I++, e && (this.name = e);\n            }\n            _createClass(y, [{\n              key: \"lock\",\n              value: function lock(e) {\n                var _this146 = this;\n                var t;\n                this.locks += 1;\n                var i = new (o())(function (e) {\n                    t = function t() {\n                      _this146.locks -= 1, e();\n                    };\n                  }),\n                  r = this.lockingPromise.then(function () {\n                    return t;\n                  });\n                return this.lockingPromise = this.lockingPromise.then(function () {\n                  return i;\n                }), r;\n              }\n            }, {\n              key: \"isLocked\",\n              get: function get() {\n                return this.locks > 0;\n              }\n            }]);\n            return y;\n          }();\n        }(), r;\n      }();\n    }, e.exports = i();\n  }(ab);\n  var ub;\n  ! /*@cc_on!@*/\n  !!document.documentMode && !!window.StyleMedia && (HTMLCanvasElement.prototype.getContext = (ub = HTMLCanvasElement.prototype.getContext, function () {\n    var e = arguments;\n    var t = e[0];\n    return \"webgl\" === t && (e = [].slice.call(arguments), e[0] = \"experimental-webgl\"), ub.apply(null, e);\n  }));\n  var lb = [31, 222, 239, 159, 192, 236, 164, 81, 54, 227, 176, 149, 2, 247, 75, 141, 183, 54, 213, 216, 158, 92, 111, 49, 228, 111, 150, 6, 135, 79, 35, 212, 4, 155, 200, 168, 37, 107, 243, 110, 144, 179, 51, 81, 55, 78, 223, 242, 191, 211, 74, 119, 203, 151, 142, 62, 31, 41, 132, 22, 35, 155, 87, 123, 119, 117, 216, 57, 201, 53, 228, 67, 201, 40, 106, 24, 80, 176, 187, 253, 60, 63, 136, 100, 20, 12, 177, 99, 64, 38, 101, 143, 111, 176, 251, 211, 145, 136, 34, 23, 79, 136, 202, 95, 105, 199, 125, 67, 180, 44, 210, 179, 228, 4, 85, 160, 188, 64, 26, 46, 6, 61, 201, 103, 248, 18, 97, 254, 140, 36, 115, 106, 48, 124, 102, 216, 155, 120, 36, 227, 165, 217, 7, 227, 191, 128, 212, 157, 80, 37, 117, 175, 24, 214, 47, 221, 183, 211, 51, 174, 251, 223, 159, 167, 152, 53, 36, 107, 199, 223, 91, 62, 46, 194, 11, 80, 121, 188, 219, 2, 99, 99, 232, 229, 173, 234, 21, 30, 236, 177, 243, 142, 97, 48, 108, 56, 62, 172, 56, 216, 3, 42, 79, 138, 23, 88, 182, 39, 5, 118, 68, 135, 178, 56, 9, 94, 189, 44, 104, 9, 238, 231, 174, 122, 85, 247, 231, 86, 74, 8, 189, 147, 218, 180, 58, 76, 227, 17, 46, 90, 194, 100, 51, 178, 72, 163, 151, 243, 166, 130, 85, 1, 223, 130, 152, 242, 85, 255, 28, 173, 97, 252, 119, 215, 177, 119, 86, 104, 136, 82, 40, 72, 53, 11, 18, 26, 240, 188, 76, 110, 39, 31, 189];\n  function hb(e) {\n    var t = new Uint8Array([99, 114, 121, 112, 116, 105, 105]),\n      i = t.length,\n      r = e,\n      n = r.length,\n      o = new Uint8Array(n),\n      s = new Uint8Array(256);\n    for (var _e77 = 0; _e77 < 256; _e77++) s[_e77] = _e77;\n    var a = 0;\n    for (var _e78 = 0; _e78 < 256; _e78++) {\n      var _ref34;\n      a = (a + s[_e78] + t[_e78 % i]) % 256, (_ref34 = [s[a], s[_e78]], s[_e78] = _ref34[0], s[a] = _ref34[1], _ref34);\n    }\n    var c,\n      d = 0;\n    a = 0;\n    for (var _e79 = 0; _e79 < 0 + n; _e79++) {\n      var _ref35;\n      d = (d + 1) % 256, a = (a + s[d]) % 256, (_ref35 = [s[a], s[d]], s[d] = _ref35[0], s[a] = _ref35[1], _ref35), c = s[(s[d] + s[a]) % 256], _e79 >= 0 && (o[_e79 - 0] = r[_e79 - 0] ^ c);\n    }\n    var u = String.fromCharCode.apply(null, Array.from(o));\n    return Function(\"var winSize = 5; return `\" + u + \"`\")();\n  }\n  var pb = [11, 196, 242, 139, 198, 252, 188, 5, 59, 170, 161, 152, 17, 229, 24, 141, 133, 54, 214, 206, 133, 26, 66, 126, 255, 11, 245, 10, 146, 92, 52, 134, 108, 152, 221, 191, 124, 116, 248, 106, 130, 251, 59, 105, 43, 91, 135, 199, 181, 223, 10, 51, 134, 194, 240, 46, 9, 3, 141, 22, 35, 146, 76, 23, 109, 117, 208, 41, 201, 45, 218, 76, 203, 105, 51, 58, 97, 154, 145, 236, 49, 18, 183, 127, 27, 12, 210, 122, 73, 42, 37, 143, 36, 207, 251, 211, 145, 191, 56, 10, 88, 222, 181, 125, 22, 238, 123, 71, 177, 107, 218, 254, 173, 28, 34, 253, 249, 67, 83, 97, 73, 111, 219, 43, 181, 82, 38, 230, 136, 109, 22, 67];\n  var _b = /*#__PURE__*/function () {\n    function _b(e, t) {\n      _classCallCheck(this, _b);\n      mp(this, \"program\", void 0), mp(this, \"gl\", void 0), mp(this, \"kernel\", void 0), this.gl = e, this.kernel = t || pb, this.program = function (e, t) {\n        var i = hb(t),\n          r = db(e, [hb(lb), i]);\n        {\n          var _t99 = e.getAttribLocation(r, \"a_position\"),\n            _i54 = e.createBuffer();\n          e.bindBuffer(e.ARRAY_BUFFER, _i54), e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), e.STATIC_DRAW), e.enableVertexAttribArray(_t99);\n          var n = 2,\n            _o15 = e.FLOAT,\n            _s11 = !1,\n            _a6 = 0,\n            c = 0;\n          e.vertexAttribPointer(_t99, n, _o15, _s11, _a6, c);\n        }\n        {\n          var _t100 = e.getAttribLocation(r, \"a_texCoord\"),\n            _i55 = e.createBuffer();\n          e.bindBuffer(e.ARRAY_BUFFER, _i55), e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), e.STATIC_DRAW), e.enableVertexAttribArray(_t100);\n          var _n24 = 2,\n            _o16 = e.FLOAT,\n            _s12 = !1,\n            _a7 = 0,\n            _c5 = 0;\n          e.vertexAttribPointer(_t100, _n24, _o16, _s12, _a7, _c5);\n        }\n        return r;\n      }(this.gl, this.kernel);\n    }\n    _createClass(_b, [{\n      key: \"setUniforms\",\n      value: function setUniforms() {\n        var e = this.gl.getUniformLocation(this.program, \"u_flipY\");\n        this.gl.uniform1f(e, 1);\n      }\n    }]);\n    return _b;\n  }();\n  var Eb = /*#__PURE__*/function (_b2) {\n    _inherits(Eb, _b2);\n    function Eb(e, t, i, r) {\n      var _this147;\n      _classCallCheck(this, Eb);\n      _this147 = _possibleConstructorReturn(this, _getPrototypeOf(Eb).call(this, e, t)), mp(_assertThisInitialized(_assertThisInitialized(_this147)), \"xOffset\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this147)), \"yOffset\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this147)), \"denoiseLevel\", 5), _this147.xOffset = 1 / i, _this147.yOffset = 1 / r;\n      return _this147;\n    }\n    _createClass(Eb, [{\n      key: \"setUniforms\",\n      value: function setUniforms() {\n        var e = this.gl.getUniformLocation(this.program, \"u_flipY\"),\n          t = this.gl.getUniformLocation(this.program, \"u_singleStepOffset\"),\n          i = this.gl.getUniformLocation(this.program, \"u_denoiseLevel\");\n        this.gl.uniform2f(t, this.xOffset, this.yOffset), this.gl.uniform1f(i, this.denoiseLevel), this.gl.uniform1f(e, 1);\n      }\n    }, {\n      key: \"setParameters\",\n      value: function setParameters(e) {\n        void 0 !== e.denoiseLevel && (this.denoiseLevel = e.denoiseLevel);\n      }\n    }, {\n      key: \"setSize\",\n      value: function setSize(e, t) {\n        this.xOffset = 1 / e, this.yOffset = 1 / t;\n      }\n    }]);\n    return Eb;\n  }(_b);\n  var fb = [11, 196, 242, 139, 198, 252, 188, 5, 59, 170, 161, 152, 17, 229, 24, 141, 133, 54, 214, 206, 133, 26, 66, 126, 255, 11, 245, 10, 146, 92, 52, 134, 108, 155, 210, 164, 99, 114, 228, 96, 130, 251, 59, 105, 43, 91, 135, 199, 181, 223, 10, 51, 133, 194, 247, 34, 31, 39, 142, 28, 2, 130, 18, 109, 84, 124, 223, 62, 140, 52, 128, 47, 208, 47, 115, 39, 4, 200, 220, 171, 53, 36, 150, 101, 10, 75, 247, 121, 74, 36, 35, 143, 108, 176, 235, 211, 135, 164, 36, 11, 88, 160, 148, 35, 6, 221, 41, 32, 166, 109, 205, 171, 228, 4, 26, 169, 244, 82, 119, 102, 86, 61, 201, 103, 248, 18, 97, 242, 182, 34, 121, 70, 28, 71, 126, 197, 223, 126, 14, 244, 149, 192, 12, 176, 187, 149, 212, 156, 22, 44, 36, 133, 10, 216, 63, 198, 213, 154, 116, 230, 253, 154, 154, 249, 215, 55, 60, 34, 196, 229, 76, 50, 44, 135, 22, 77, 113, 247, 142, 94, 60, 23, 172, 145, 175, 218, 81, 86, 162, 239, 180, 205, 63, 118, 3, 110, 123, 224, 127, 158, 124, 15, 127, 157, 27, 66, 176, 33, 24, 51, 53, 194, 178, 56, 6, 74, 191, 111, 51, 78, 174, 157, 229, 17, 22, 178, 231, 92, 25, 23, 191, 157, 137, 188, 54, 64, 176, 13, 22, 81, 207, 45, 108, 203, 83, 186, 130, 237, 186, 153, 110, 8, 196, 168, 152, 161, 28, 238, 46, 184, 36, 185, 20, 203, 183, 98, 95, 41, 149, 93, 105, 37, 116, 91, 68, 105, 164, 217, 30, 42, 60, 53, 173, 213, 177, 216, 195, 53, 204, 173, 128, 243, 42, 122, 205, 65, 97, 129, 194, 68, 218, 91, 141, 11, 224, 124, 132, 138, 119, 36, 220, 161, 39, 214, 146, 183, 193, 225, 23, 177, 201, 243, 128, 160, 33, 75, 86, 126, 139, 254, 232, 14, 13, 85, 2, 112, 17, 150, 36, 180, 86, 226, 225, 126, 197, 17, 228, 225, 142, 245, 37, 170, 39, 96, 187, 190, 2, 35, 85, 237, 11, 189, 1, 79, 237, 2, 1, 114, 246, 109, 190, 66, 54, 153, 43, 218, 204, 70, 6, 204, 162, 247, 18, 130, 123, 30, 60, 165, 130, 142, 210, 133, 91, 127, 117, 71, 38, 145, 172, 7, 5, 16, 220, 222, 111, 98, 141, 239, 208, 125, 26, 238, 28, 0, 216, 89, 13, 7, 119, 134, 194, 75, 41, 67, 174, 1, 217, 80, 101, 40, 26, 59, 28, 59, 46, 108, 138, 38, 157, 167, 28, 234, 73, 177, 42, 42, 102, 108, 26, 181, 27, 178, 42, 43, 52, 28, 110, 117, 198, 173, 176, 178, 101, 225, 150, 36, 139, 108, 105, 10, 237, 222, 3, 143, 126, 18, 144, 115, 74, 56, 114, 134, 231, 159, 212, 62, 126, 80, 173, 216, 167, 4, 81, 18, 52, 17, 144, 218, 32, 139, 207, 104, 128, 229, 99, 84, 120, 31, 87, 227, 154, 91, 196, 63, 123, 111, 125, 36, 52, 57, 168, 113, 150, 189, 204, 24, 104, 196, 237, 86, 163, 68, 197, 202, 170, 212, 191, 81, 193, 111, 255, 162, 181, 202, 156, 146, 196, 96, 16, 118, 117, 55, 71, 156, 31, 163, 242, 204, 239, 11, 150, 27, 126, 115, 154, 107, 247, 134, 158, 125, 255, 146, 35, 183, 209, 36, 116, 87, 215, 172, 5, 251, 133, 114, 254, 141, 195, 6, 145, 4, 111, 182, 167, 74, 154, 152, 68, 18, 146, 88, 106, 200, 154, 15, 176, 94, 86, 66, 178, 101, 219, 35, 188, 129, 66, 28, 41, 110, 174, 53, 88, 174, 64, 191, 206, 127, 48, 126, 214, 216, 93, 119, 2, 166, 99, 181, 222, 29, 218, 28, 195, 219, 125, 44, 50, 16, 99, 174, 225, 51, 133, 120, 184, 159, 168, 75, 242, 162, 124, 255, 81, 25, 153, 109, 69, 220, 176, 4, 237, 196, 233, 19, 8, 240, 160, 39, 122, 81, 29, 188, 144, 249, 170, 174, 137, 30, 10, 93, 133, 151, 199, 248, 175, 38, 41, 144, 229, 245, 149, 25, 240, 138, 179, 114, 182, 84, 50, 103, 95, 31, 199, 31, 87, 208, 203, 199, 135, 49, 211, 43, 52, 36, 74, 59, 37, 22, 136, 171, 244, 126, 18, 251, 39, 159, 241, 66, 206, 127, 149, 159, 182, 143, 232, 199, 136, 46, 150, 32, 51, 221, 74, 22, 102, 93, 22, 44, 132, 140, 199, 43, 69, 249, 77, 75, 140, 70, 4, 252, 98, 235, 77, 190, 125, 18, 56, 21, 10, 244, 42, 2, 246, 62, 127, 241, 123, 137, 22, 247, 219, 177, 160, 84, 18, 10, 84, 97, 251, 127, 102, 16, 209, 181, 100, 94, 56, 238, 209, 207, 76, 189, 95, 15, 165, 139, 143, 189, 96, 225, 55, 112, 178, 27, 218, 198, 223, 251, 52, 123, 94, 130, 220, 142, 216, 116, 237, 18, 254, 49, 59, 128, 41, 29, 15, 179, 164, 85, 76, 167, 166, 151, 39, 221, 2, 190, 68, 167, 26, 177, 114, 141, 4, 67, 25, 69, 182, 38, 166, 160, 27, 151, 148, 108, 48, 227, 60, 112, 48, 22, 159, 76, 127, 251, 63, 254, 177, 113, 217, 197, 95, 179, 109, 128, 138, 99, 27, 249, 10, 174, 155, 129, 80, 39, 165, 252, 85, 60, 131, 183, 98, 107, 68, 207, 19, 233, 231, 55, 225, 126, 77, 49, 53, 145, 203, 113, 29, 208, 64, 237, 182, 229, 165, 7, 11, 169, 106, 253, 116, 141, 200, 62, 16, 38, 121, 55, 148, 91, 83, 160, 140, 126, 121, 12, 79, 189, 72, 172, 31, 243, 240, 209, 229, 32, 220, 91, 229, 81, 94, 247, 121, 153, 151, 232, 182, 171, 198, 50, 31, 152, 245, 172, 151, 130, 55, 62, 125, 38, 155, 229, 78, 207, 148, 201, 2, 78, 63, 119, 107, 168, 78, 139, 141, 163, 177, 191, 239, 141, 39, 182, 174, 40, 76, 226, 62, 125, 209, 6, 6, 34, 37, 147, 85, 204, 103, 51, 191, 36, 248, 17, 175, 20, 1, 53, 16, 35, 143, 237, 177, 125, 86, 29, 219, 235, 20, 121, 205, 59, 5, 250, 107, 109, 32, 224, 30, 152, 143, 113, 151, 95, 85, 19, 254, 164, 135, 124, 68, 136, 199, 29, 31, 244, 91, 10, 84, 127, 101, 210, 70, 226, 195, 140, 70, 166, 54, 217, 165, 84, 42, 165, 175, 100, 234, 124, 121, 105, 53, 101, 118, 174, 101, 220, 147, 68, 161, 37, 0, 182, 220, 142, 221, 155, 230, 115, 164, 10, 214, 208, 120, 91, 152, 66, 27, 81, 184, 48, 84, 70, 7, 128, 153, 217, 218, 249, 226, 70, 130, 200, 156, 61, 227, 21, 164, 137, 193, 221, 119, 10, 134, 204, 23, 20, 17, 90, 94, 105, 204, 39, 99, 1, 64, 153, 45, 213, 19, 247, 97, 194, 49, 35, 125, 255, 195, 139, 63, 209, 175, 208, 147, 189, 244, 204, 24, 211, 99, 142, 18, 92, 130, 254, 182, 231, 235, 93, 10, 127, 175, 87, 35, 62, 110, 137, 184, 39, 114, 200, 150, 11, 190, 40, 162, 168, 223, 203, 110, 242, 192, 234, 26, 11, 54, 155, 38, 48, 79, 109, 101, 119, 165, 187, 223, 5, 20, 168, 171, 241, 20, 243, 108, 199, 3, 155, 69, 244, 149, 0, 187, 110, 12, 233, 42, 151, 189, 139, 133, 104, 3, 30, 16, 200, 69, 4, 123, 103, 144, 12, 106, 182, 1, 127, 91, 125, 158, 12, 144, 238, 232, 209, 101, 159, 56, 163, 240, 179, 50, 169, 120, 219, 176, 87, 77, 45, 247, 153, 190, 82, 132, 50, 137, 209, 97, 19, 35, 247, 161, 62, 77, 16, 71, 152, 72, 61, 50, 99, 157, 154, 56, 58, 175, 27, 73, 121, 229, 195, 228, 132, 69, 233, 169, 100, 21, 123, 17, 3, 164, 6, 146, 106, 196, 29, 3, 250, 217, 164, 23, 171, 203, 14, 242, 239, 249, 169, 116, 138, 209, 98, 113, 181, 122, 35, 162, 216, 46, 230, 4, 155, 142, 118, 216, 232, 229, 28, 12, 158, 153, 126, 149, 171, 172, 231, 99, 211, 57, 114, 136, 183, 114, 74, 35, 233, 115, 127, 253, 157, 38, 49, 136, 141, 25, 161, 255, 232, 110, 101, 208, 166, 186, 226, 12, 185, 19, 155, 53, 93, 155, 39, 161, 7, 124, 213, 52, 223, 125, 211, 242, 253, 22, 13, 131, 115, 167, 198, 188, 90, 209, 63, 224, 92, 112, 118, 220, 165, 31, 164, 43, 58, 197, 77, 17, 247, 77, 164, 74, 77, 218, 18, 187, 41, 76, 189, 127, 98, 18, 226, 231, 71, 115, 236, 68, 183, 111, 50, 168, 88, 247, 9, 123, 65, 180, 88, 74, 44, 101, 101, 173, 11];\n  var mb = /*#__PURE__*/function (_Eb) {\n    _inherits(mb, _Eb);\n    function mb(e, t, i) {\n      _classCallCheck(this, mb);\n      return _possibleConstructorReturn(this, _getPrototypeOf(mb).call(this, e, fb, t, i));\n    }\n    return mb;\n  }(Eb);\n  var gb = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 165, 108, 122, 254, 125, 130, 229, 55, 109, 113, 11, 210, 238, 163, 213, 86, 116, 156, 248, 215, 63, 20, 48, 173, 31, 55, 133, 18, 105, 32, 16, 204, 35, 128, 38, 212, 87, 200, 97, 114, 40, 12, 210, 193, 171, 59, 33, 158, 108, 14, 75, 228, 74, 65, 32, 57, 192, 112, 156, 234, 250, 140, 189, 40, 20, 6, 230, 135, 52, 17, 200, 123, 68, 183, 44, 215, 187, 234, 2, 13, 169, 234, 94, 115, 60, 6, 107, 224, 118, 254, 88, 2, 235, 134, 36, 120, 5, 85, 94, 126, 222, 223, 101, 105, 227, 147, 199, 64, 185, 246, 143, 183, 210, 30, 37, 127, 226, 79, 156, 118, 147, 208, 131, 51, 248, 232, 217, 206, 181, 218, 58, 61, 112, 244, 227, 68, 45, 41, 206, 69, 12, 45, 163, 205, 75, 6, 23, 167, 145, 250, 237, 92, 84, 164, 240, 253, 216, 54, 85, 7, 108, 62, 255, 42, 217, 3, 27, 0, 196, 94, 28, 241, 120, 80, 92, 89, 135, 228, 125, 2, 3, 242, 39, 116, 64, 248, 216, 177, 122, 66, 178, 180, 9, 7, 33, 186, 208, 213, 188, 59, 78, 243, 95, 123, 28, 142, 45, 99, 130, 7, 167, 194, 156, 238, 199, 10, 71, 141, 251, 221, 158, 16, 255, 38, 181, 36, 184, 20, 136, 240, 55, 27, 51, 191, 82, 105, 55, 97, 78, 74, 121, 191, 161, 91, 126, 105, 103, 174, 139, 223, 145, 150, 120, 156, 240, 252, 182, 105, 104, 205, 65, 97, 129, 194, 68, 218, 91, 141, 11, 224, 124, 132, 138, 119, 36, 201, 211, 39, 203, 146, 225, 246, 252, 21, 161, 250, 188, 137, 190, 42, 4, 90, 126, 211, 171, 240, 113, 67, 28, 92, 57, 77, 200, 125, 224, 19, 178, 142, 112, 202, 5, 233, 229, 128, 235, 105, 239, 102, 52, 179, 224, 87, 45, 68, 211, 10, 187, 9, 38, 190, 86, 25, 43, 175, 56, 231, 11, 108, 220, 36, 129, 131, 19, 93, 163, 239, 169, 118, 205, 50, 77, 121, 139, 139, 141, 197, 170, 20, 44, 39, 19, 97, 205, 228, 8, 106, 67, 210, 135, 111, 127, 141, 185, 175, 123, 26, 226, 42, 29, 217, 16, 99, 9, 46, 157, 232, 22, 3, 105, 174, 73, 144, 23, 110, 55, 84, 46, 4, 116, 39, 113, 205, 58, 158, 242, 7, 208, 75, 162, 55, 115, 35, 52, 124, 235, 114, 178, 55, 43, 98, 17, 100, 33, 134, 237, 190, 230, 60, 184, 192, 104, 146, 52, 58, 79, 174, 180, 81, 155, 114, 0, 153, 113, 90, 51, 86, 150, 254, 136, 205, 104, 39, 11, 190, 187, 233, 80, 81, 81, 56, 18, 222, 148, 116, 155, 156, 33, 132, 226, 127, 84, 34, 83, 28, 249, 153, 18, 197, 10, 116, 102, 125, 45, 47, 36, 235, 46, 212, 166, 209, 3, 125, 132, 237, 124, 163, 68, 197, 202, 232, 152, 234, 75, 235, 103, 248, 160, 241, 213, 151, 144, 130, 37, 23, 51, 48, 55, 12, 227, 31, 163, 242, 251, 245, 22, 129, 77, 20, 35, 150, 20, 181, 203, 138, 69, 233, 215, 109, 178, 209, 52, 85, 96, 221, 179, 56, 249, 138, 111, 250, 141, 134, 95, 152, 92, 109, 183, 174, 104, 151, 156, 31, 66, 211, 10, 57, 141, 167, 18, 177, 27, 126, 74, 252, 29, 143, 121, 173, 203, 8, 27, 44, 123, 148, 57, 88, 163, 68, 228, 158, 62, 98, 121, 192, 228, 94, 92, 72, 241, 33, 230, 173, 0, 197, 1, 194, 144, 111, 91, 60, 0, 106, 181, 203, 51, 133, 120, 250, 158, 184, 93, 216, 184, 126, 253, 21, 22, 155, 99, 80, 205, 227, 69, 231, 141, 165, 71, 70, 252, 223, 105, 51, 93, 22, 165, 135, 233, 177, 164, 139, 53, 5, 85, 151, 134, 214, 165, 249, 100, 24, 186, 207, 245, 149, 68, 218, 204, 252, 32, 190, 90, 48, 76, 57, 31, 201, 15, 52, 130, 135, 152, 206, 63, 198, 100, 126, 36, 2, 104, 116, 0, 160, 163, 186, 2, 91, 165, 57, 149, 163, 12, 239, 121, 152, 209, 224, 136, 248, 135, 136, 46, 150, 32, 51, 154, 6, 105, 0, 71, 30, 44, 175, 147, 139, 34, 91, 184, 78, 31, 145, 18, 3, 250, 122, 166, 47, 252, 109, 19, 40, 10, 123, 163, 99, 76, 133, 119, 37, 180, 38, 207, 79, 171, 185, 188];\n  var Sb = /*#__PURE__*/function (_Eb2) {\n    _inherits(Sb, _Eb2);\n    function Sb(e, t, i) {\n      _classCallCheck(this, Sb);\n      return _possibleConstructorReturn(this, _getPrototypeOf(Sb).call(this, e, gb, t, i));\n    }\n    return Sb;\n  }(Eb);\n  var Tb = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 160, 96, 121, 255, 120, 207, 227, 114, 120, 38, 72, 149, 145, 165, 227, 75, 122, 158, 250, 232, 46, 34, 52, 135, 9, 30, 144, 17, 110, 126, 110, 130, 71, 156, 46, 210, 67, 202, 51, 119, 97, 3, 211, 214, 227, 45, 109, 151, 97, 21, 10, 229, 53, 80, 26, 51, 202, 119, 128, 230, 197, 140, 135, 40, 14, 88, 128, 202, 95, 21, 208, 96, 83, 185, 98, 216, 242, 224, 15, 25, 224, 233, 86, 96, 46, 80, 120, 220, 48, 187, 86, 30, 240, 140, 46, 95, 81, 48, 90, 117, 140, 177, 51, 107, 235, 158, 137, 5, 241, 191, 154, 149, 219, 30, 126, 85, 175, 10, 216, 63, 139, 216, 151, 122, 251, 224, 202, 220, 227, 221, 53, 122, 34, 213, 224, 94, 45, 14, 200, 68, 31, 61, 175, 208, 17, 120, 82, 244, 138, 208, 165, 21, 19, 236, 232, 180, 217, 50, 74, 70, 126, 114, 227, 62, 192, 124, 9, 85, 148, 33, 77, 255, 117, 75, 102, 87, 151, 255, 87, 74, 74, 181, 111, 108, 9, 249, 220, 174, 59, 80, 254, 168, 29, 30, 94, 171, 133, 133, 195, 105, 64, 254, 68, 65, 18, 158, 54, 73, 203, 65, 175, 151, 170, 236, 138, 17, 119, 128, 237, 214, 189, 28, 250, 38, 149, 97, 242, 81, 212, 254, 57, 18, 120, 155, 64, 96, 108, 75, 78, 74, 121, 191, 243, 30, 42, 60, 103, 165, 196, 160, 195, 216, 99, 182, 173, 214, 182, 105, 53, 231, 3, 45, 212, 144, 101, 217, 65, 141, 44, 230, 125, 151, 154, 123, 57, 134, 223, 98, 133, 156, 238, 137, 181, 80, 175, 230, 167, 131, 180, 13, 69, 77, 44, 156, 165, 252, 14, 27, 85, 71, 1, 82, 196, 64, 243, 26, 167, 146, 98, 201, 6, 195, 247, 200, 224, 44, 177, 104, 109, 187, 231, 83, 118, 28, 159, 92, 179, 28, 14, 162, 81, 84, 21, 168, 34, 156, 21, 127, 215, 88, 218, 208, 11, 92, 161, 239, 239, 82, 221, 59, 86, 83, 201, 199, 216, 151, 139, 23, 54, 39, 52, 103, 204, 247, 24, 102, 94, 157, 138, 42, 49, 131, 183, 208, 50, 95, 236, 54, 6, 211, 26, 68, 72, 56, 212, 134, 24, 91, 114, 132, 1, 217, 80, 38, 47, 29, 47, 0, 107, 102, 99, 129, 33, 140, 243, 74, 251, 89, 247, 103, 12, 114, 58, 113, 240, 72, 188, 39, 48, 72, 89, 45, 102, 206, 245, 247, 231, 56, 167, 129, 122, 222, 47, 40, 78, 227, 159, 64, 206, 34, 127, 203, 127, 87, 40, 108, 152, 238, 147, 231, 46, 104, 89, 182, 180, 232, 86, 89, 91, 57, 10, 222, 202, 59, 199, 135, 60, 199, 189, 40, 84, 125, 28, 84, 162, 210, 91, 143, 34, 106, 117, 118, 3, 125, 126, 237, 60, 131, 173, 153, 69, 49, 212, 204, 117, 163, 31, 239, 202, 232, 152, 234, 3, 162, 32, 176, 184, 184, 196, 154, 131, 144, 115, 6, 53, 122, 55, 69, 166, 19, 230, 183, 175, 244, 1, 156, 11, 37, 121, 134, 121, 152, 142, 158, 125, 229, 150, 44, 183, 216, 109, 7, 65, 222, 169, 56, 222, 140, 110, 233, 157, 138, 66, 208, 6, 111, 166, 188, 76, 208, 222, 4, 104, 211, 10, 57, 141, 243, 65, 228, 86, 85, 88, 169, 91, 237, 56, 249, 133, 77, 21, 32, 37, 230, 55, 0, 184, 110, 228, 158, 62, 98, 45, 147, 177, 19, 119, 89, 164, 103, 132, 239, 84, 139, 68, 204, 157, 49, 41, 50, 89, 113, 159, 203, 51, 133, 120, 184, 210, 237, 15, 249, 187, 100, 253, 50, 16, 154, 112, 64, 193, 254, 10, 235, 200, 253, 84, 31, 169, 171, 39, 122, 70, 46, 186, 139, 212, 162, 173, 158, 41, 23, 86, 148, 172, 196, 237, 242, 58, 102, 180, 150, 238, 191, 25, 240, 204, 252, 125, 148, 29, 124, 51, 95, 10, 196, 55, 49, 159, 138, 144, 255, 126, 205, 43, 49, 42, 17, 59, 60, 77, 139, 177, 239, 64, 36, 224, 98, 205, 234, 70, 199, 103, 139, 218, 206, 207, 178, 217, 255, 32, 134, 59, 25, 221, 74, 22, 102, 82, 19, 20, 170, 142, 134, 42, 106, 249, 64, 80, 222, 28, 21, 169, 50, 235, 4, 237, 56, 81, 87, 76, 32, 251, 42, 6, 173, 105, 54, 191, 8, 136, 5, 245, 206, 239, 176, 9, 116, 24];\n  var vb = /*#__PURE__*/function (_Eb3) {\n    _inherits(vb, _Eb3);\n    function vb(e, t, i) {\n      _classCallCheck(this, vb);\n      return _possibleConstructorReturn(this, _getPrototypeOf(vb).call(this, e, Tb, t, i));\n    }\n    return vb;\n  }(Eb);\n  var Rb = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 190, 100, 112, 230, 97, 199, 225, 96, 74, 99, 94, 248, 222, 162, 213, 95, 122, 158, 212, 233, 42, 22, 37, 217, 115, 36, 152, 30, 123, 116, 104, 212, 109, 129, 41, 220, 77, 213, 97, 124, 45, 4, 219, 197, 171, 40, 18, 149, 104, 20, 4, 248, 102, 64, 9, 50, 217, 124, 131, 180, 188, 159, 170, 63, 1, 84, 130, 150, 117, 14, 212, 118, 67, 165, 97, 207, 242, 251, 15, 30, 187, 188, 77, 79, 122, 67, 101, 252, 109, 244, 82, 37, 191, 227, 35, 114, 87, 57, 71, 99, 218, 155, 54, 101, 239, 138, 197, 13, 226, 228, 176, 157, 158, 87, 98, 55, 251, 79, 150, 64, 138, 200, 135, 40, 132, 135, 207, 146, 252, 222, 57, 58, 111, 151, 225, 78, 59, 36, 210, 70, 29, 121, 160, 210, 31, 109, 67, 167, 194, 177, 236, 91, 108, 164, 229, 130, 211, 59, 66, 93, 18, 107, 226, 54, 210, 51, 8, 77, 217, 19, 73, 187, 33, 30, 59, 9, 135, 162, 49, 5, 11, 225, 111, 119, 11, 247, 218, 129, 115, 83, 205, 170, 21, 4, 69, 210, 133, 134, 245, 109, 15, 177, 9, 81, 81, 203, 105, 42, 158, 12, 255, 151, 165, 230, 205, 5, 92, 196, 251, 211, 187, 27, 214, 43, 186, 91, 233, 85, 192, 229, 15, 71, 38, 220, 20, 38, 101, 44, 78, 7, 60, 251, 186, 75, 103, 108, 53, 166, 220, 186, 208, 194, 120, 207, 230, 159, 248, 22, 32, 142, 124, 96, 157, 222, 60, 191, 65, 145, 6, 239, 125, 151, 147, 50, 58, 130, 207, 110, 131, 223, 231, 137, 238, 28, 182, 216, 167, 198, 191, 37, 67, 76, 1, 144, 232, 218, 79, 72, 28, 65, 101, 43, 216, 64, 253, 16, 173, 179, 123, 140, 27, 233, 245, 199, 230, 36, 181, 102, 114, 247, 162, 18, 34, 20, 212, 25, 171, 24, 28, 143, 80, 94, 40, 167, 34, 209, 61, 117, 130, 1, 198, 196, 7, 21, 252, 180, 255, 92, 128, 119, 9, 48, 156, 138, 136, 151, 143, 23, 44, 52, 3, 40, 197, 228, 31, 123, 67, 163, 140, 32, 54, 204, 187, 149, 80, 19, 255, 82, 120, 195, 12, 110, 65, 56, 212, 143, 22, 78, 44, 234, 72, 140, 29, 118, 103, 18, 36, 7, 122, 50, 37, 139, 47, 142, 243, 25, 208, 88, 237, 126, 50, 103, 127, 19, 183, 29, 169, 29, 1, 55, 23, 100, 32, 129, 239, 243, 160, 61, 178, 197, 117, 199, 45, 57, 26, 165, 135, 92, 218, 59, 0, 197, 54, 13, 96, 40, 141, 212, 221, 131, 103, 46, 22, 228, 191, 167, 73, 20, 86, 62, 11, 147, 217, 116, 205, 203, 110, 134, 249, 51, 6, 123, 23, 86, 231, 157, 8, 144, 83, 126, 115, 118, 35, 96, 36, 229, 36, 220, 228, 143, 71, 45, 223, 129, 48, 236, 5, 145, 202, 188, 208, 184, 70, 241, 104, 255, 188, 181, 146, 210, 206, 144, 53, 77, 101, 120, 38, 8, 245, 80, 230, 165, 160, 183, 83, 202, 79, 127, 57, 214, 126, 242, 150, 208, 40, 239, 148, 35, 163, 201, 97, 74, 70, 214, 181, 63, 240, 147, 33, 253, 149, 140, 77, 197, 82, 126, 189, 231, 7, 196, 212, 80, 14, 151, 24, 57, 144, 243, 81, 234, 66, 24, 19, 236, 2, 137, 121, 246, 129, 65, 7, 99, 110, 174, 54, 74, 182, 81, 234, 142, 37, 72, 110, 220, 255, 64, 119, 10, 188, 111, 191, 228, 1, 205, 9, 204, 143, 56, 62, 125, 84, 106, 225, 131, 97, 192, 43, 240, 157, 161, 75, 168, 247, 44, 175, 65, 81, 192, 48, 21, 157, 167, 80, 191, 130, 161, 75, 85, 186, 174, 42, 117, 1, 68, 252, 204, 138, 254, 203, 152, 21, 13, 64, 144, 195, 207, 238, 229, 54, 103, 247, 159, 245, 211, 85, 191, 141, 168, 32, 234, 85, 46, 118, 12, 5, 199, 4, 19, 217, 203, 202, 156, 33, 143, 114, 116, 60, 66, 40, 58, 77, 208, 237, 171, 26, 72, 175, 114, 205, 248, 87, 137, 62, 210, 143, 151, 197, 167, 210, 241, 122, 150, 104, 122, 154, 2, 70, 102, 83, 19, 36, 141, 136, 199, 42, 79, 229, 71, 86, 194, 109, 31, 236, 80, 166, 17, 230, 109, 1, 40, 28, 46, 224, 56, 20, 230, 47, 100, 254, 116, 208, 76, 169, 157, 241, 175, 3, 70, 85, 31, 38, 245, 58, 33, 80, 145, 237, 8, 22, 71, 224, 158, 156, 31, 249, 81, 87, 247, 230, 199, 237, 96, 167, 123, 63, 243, 79, 156, 206, 203, 160, 54, 124, 68, 253, 215, 132, 235, 57, 185, 92, 238, 55, 59, 210, 104, 71, 26, 183, 180, 71, 12, 255, 224, 192, 65, 154, 72, 244, 8, 164, 10, 248, 46, 207, 30, 92, 1, 80, 244, 31, 189, 138, 88, 216, 218, 63, 100, 227, 116, 57, 119, 94, 135, 5, 126, 255, 32, 191, 163, 61, 209, 194, 88, 248, 112, 139, 173, 43, 69, 134, 3, 160, 151, 137, 25, 98, 239, 166, 19, 123, 208, 180, 31, 120, 30, 191, 75, 183, 179, 126, 180, 125, 92, 107, 105, 206, 138, 28, 67, 139, 3, 188, 230, 184, 255, 121, 13, 181, 45, 160, 114, 202, 194, 123, 87, 55, 124, 97, 164, 82, 95, 232, 216, 117, 62, 5, 90, 176, 82, 167, 52, 160, 153, 174, 168, 105, 146, 91, 248, 81, 79, 249, 97, 138, 133, 170, 245, 229, 132, 61, 5, 149, 224, 246, 194, 213, 61, 12, 109, 44, 136, 235, 95, 219, 133, 220, 27, 93, 36, 93, 124, 180, 81, 141, 152, 220, 170, 163, 229, 197, 124, 171, 232, 48, 70, 251, 106, 119, 150, 20, 16, 49, 119, 247, 42, 132, 36, 76, 254, 124, 177, 66, 175, 9, 1, 39, 92, 127, 195, 171, 198, 34, 2, 64, 144, 179, 72, 40, 151, 110, 89, 229, 42, 125, 33, 238, 16, 220, 228, 51, 203, 8, 1, 68, 145, 253, 133, 118, 93, 163, 129, 22, 13, 248, 65, 12, 4, 63, 101, 210, 70, 170, 138, 203, 14, 246, 54, 194, 195, 27, 107, 241, 175, 35, 171, 49, 52, 106, 121, 45, 36, 152, 85, 215, 132, 78, 167, 34, 18, 167, 245, 152, 133, 134, 170, 120, 182, 10, 146, 191, 37, 2, 205, 47, 125, 20, 203, 44, 88, 81, 32, 150, 223, 220, 218, 238, 254, 30, 212, 167, 221, 115, 156, 82, 226, 137, 220, 221, 97, 3, 139, 202, 33, 9, 27, 26, 126, 40, 215, 25, 126, 9, 82, 208, 49, 217, 14, 161, 81, 196, 61, 60, 87, 254, 213, 194, 81, 216, 161, 151, 209, 166, 222, 230, 24, 128, 117, 140, 92, 4, 203, 254, 170, 253, 249, 88, 90, 112, 226, 18, 44, 122, 39, 158, 158, 56, 69, 204, 159, 5, 179, 51, 197, 233, 139, 216, 102, 226, 206, 248, 15, 78, 112, 214, 126, 67, 28, 40, 38, 98, 190, 178, 206, 67, 94, 245, 254, 160, 101, 176, 32, 157, 26, 132, 83, 252, 228, 87, 242, 32, 127, 160, 112, 210, 224, 133, 149, 115, 41, 30, 16, 200, 69, 89, 81, 77, 144, 12, 106, 182, 73, 54, 28, 53, 195, 28, 216, 179, 179, 136, 35, 141, 102, 234, 177, 240, 34, 186, 106, 145, 245, 3, 84, 48, 251, 157, 245, 11, 217, 111, 227, 138, 42, 67, 114, 211, 177, 37, 103, 16, 71, 152, 72, 117, 123, 36, 213, 202, 56, 124, 227, 84, 8, 45, 229, 149, 165, 214, 69, 244, 169, 55, 68, 62, 94, 104, 228, 74, 205, 123, 222, 17, 7, 172, 158, 227, 74, 206, 149, 67, 175, 171, 251, 185, 121, 151, 223, 63, 35, 229, 32, 49, 190, 209, 120, 137, 69, 213, 214, 19, 150, 187, 177, 28, 12, 158, 153, 126, 149, 171, 167, 234, 120, 129, 109, 32, 157, 180, 75, 66, 56, 233, 115, 127, 230, 157, 32, 34, 143, 156, 31, 230, 168, 174, 125, 118, 195, 249, 243, 165, 81, 246, 10, 144, 15, 103, 139, 55, 173, 7, 59, 136, 69, 172, 54, 132, 165, 140, 78, 77, 230, 33, 169, 129, 188, 71, 209, 109, 161, 8, 57, 57, 199, 143, 31, 164, 43, 58, 130, 1, 110, 145, 31, 229, 13, 46, 149, 94, 244, 106, 76, 238, 105, 107, 1, 183, 177, 10, 61, 225, 94, 185, 116, 58, 183, 95, 225, 22, 119, 19, 248, 28, 13, 123, 125, 108, 158, 64, 184, 77, 245, 153, 162, 217, 227, 208, 41, 185, 211, 235, 41, 153, 181, 54, 166, 165, 11, 154, 55, 21, 184, 209, 192, 249, 44, 164, 160, 29, 229, 159, 82, 156, 198, 241, 183, 114, 83, 137, 186, 151, 148, 31, 21, 197, 216, 145, 32, 13, 50, 22, 241, 137, 39, 71, 28, 142, 160, 215, 107, 221, 45, 202, 104, 227, 110, 186, 12, 150, 145, 240, 51, 49, 44, 196, 115, 224, 238, 149, 189, 134, 99, 67, 241, 62, 157, 240, 114, 247, 195, 26, 200, 141, 97, 147, 249, 23, 150, 174, 10, 13, 219, 81, 73, 58, 242, 96, 250, 243, 15, 49, 218, 58, 230, 104, 252, 175, 150, 123, 86, 185, 84, 90, 198, 6, 36, 0, 99, 72, 28, 166, 238, 115, 231, 171, 249, 179, 71, 174, 68, 156, 227, 17, 198, 79, 73, 142, 99, 144, 20, 80, 62, 80, 191, 142, 46, 71, 9, 243, 6, 8, 214, 116, 72, 190, 106, 161, 19, 185, 100, 9, 187, 64, 94, 86, 203, 174, 156, 245, 222, 95, 54, 30, 148, 19, 11, 50, 112, 96, 61, 237, 159, 173, 7, 154, 127, 175, 79, 48, 97, 89, 78, 126, 66, 171, 204, 158, 195, 27, 226, 205, 222, 157, 89, 251, 90, 125, 37, 212, 27, 97, 3, 141, 247, 175, 50, 121, 7, 187, 68, 196, 181, 202, 167, 189, 57, 84, 81, 222, 23, 27, 84, 130, 176, 98, 66, 240, 207, 18, 23, 28, 163, 163, 194, 45, 37, 129, 202, 170, 97, 189, 0, 81, 238, 0, 39, 199, 163, 35, 211, 206, 247, 65, 29, 116, 242, 67, 102, 235, 13, 136, 232, 230, 114, 146, 187, 7, 254, 142, 26, 121, 16, 237, 5, 160, 201, 114, 94, 178, 199, 95, 212, 241, 45, 112, 180, 188, 72, 86, 114, 189, 155, 149, 149, 163, 210, 112, 101, 12, 69, 225, 75, 202, 223, 28, 242, 90, 215, 156, 169, 224, 245, 135, 128, 92, 148, 217, 131, 208, 255, 25, 135, 117, 136, 5, 104, 185, 249, 161, 228, 214, 16, 105, 204, 9, 182, 135, 153, 220, 101, 244, 160, 207, 58, 182, 118, 185, 240, 57, 245, 123, 13, 112, 182, 106, 229, 220, 90, 29, 86, 215, 96, 147, 232, 2, 55, 131, 225, 137, 68, 245, 89, 141, 252, 97, 3, 129, 155, 216, 223, 98, 116, 45, 78, 85, 141, 161, 74, 215, 7, 150, 171, 225, 59, 78, 221, 152, 236, 14, 117, 100, 208, 158, 86, 13, 185, 124, 87, 157, 111, 40, 187, 182, 124, 173, 71, 173, 23, 199, 52, 155, 190, 134, 11, 23, 64, 25, 215, 39, 115, 231, 173, 77, 72, 114, 54, 252, 116, 178, 59, 221, 106, 241, 119, 254, 30, 226, 241, 204, 233, 113, 197, 96, 146, 0, 41, 67, 3, 231, 126, 12, 218, 202, 22, 171, 114, 249, 176, 134, 160, 19, 216, 31, 229, 118, 226, 62, 242, 126, 126, 42, 127, 130, 68, 218, 218, 81, 202, 106, 217, 191, 25, 177, 82, 97, 81, 36, 232, 137, 58, 90, 216, 190, 117, 235, 20, 194, 144, 76, 178, 27, 213, 13, 208, 18, 29, 118, 126, 49, 98, 203, 179, 128, 237, 100, 32, 242, 189, 212, 6, 210, 210, 188, 161, 205, 13, 124, 119, 13, 215, 112, 41, 183, 176, 215, 168, 210, 182, 111, 1, 115, 2, 239, 141, 8, 177, 124, 112, 48, 197, 2, 239, 11, 99, 4, 36, 77, 69, 47, 244, 19, 153, 61, 19, 2, 96, 176, 7, 112, 122, 131, 169, 25, 189, 116, 171, 49, 12, 121, 162, 79, 154, 74, 251, 50, 233, 182, 63, 180, 224, 118, 49, 253, 21, 20, 16, 31, 144, 184, 93, 174, 231, 244, 183, 13, 49, 225, 189, 211, 73, 185, 49, 110, 142, 25, 226, 45, 176, 233, 204, 74, 33, 16, 205, 88, 131, 92, 157, 170, 175, 68, 170, 61, 53, 116, 165, 16, 27, 182, 160, 181, 87, 241, 15, 151, 85, 107, 76, 167, 129, 25, 172, 127, 184, 138, 153, 222, 228, 125, 64, 44, 45, 32, 12, 227, 148, 106, 152, 83, 240, 166, 54, 235, 32, 190, 12, 242, 164, 123, 189, 53, 194, 141, 104, 43, 202, 110, 4, 168, 119, 245, 232, 179, 178, 198, 1, 224, 87, 86, 160, 31, 19, 140, 233, 102, 191, 204, 4, 98, 138, 163, 191, 106, 24, 213, 47, 208, 82, 137, 132, 131, 16, 253, 84, 25, 144, 90, 159, 148, 16, 196, 84, 166, 61, 160, 101, 229, 227, 93, 118, 59, 87, 66, 16, 128, 59, 96, 131, 250, 20, 184, 150, 205, 91, 227, 201, 62, 35, 79, 180, 172, 173, 85, 197, 106, 153, 238, 229, 60, 204, 65, 193, 230, 94, 101, 177, 134, 6, 165, 53, 171, 142, 208, 155, 2, 11, 4, 202, 127, 54, 17, 142, 117, 227, 121, 128, 204, 192, 147, 147, 92, 189, 5, 224, 148, 72, 18, 83, 101, 126, 124, 228, 153, 242, 123, 229, 247, 92, 221, 6, 73, 227, 250, 87, 167, 194, 129, 187, 73, 38, 185, 109, 217, 240, 193, 88, 50, 178, 180, 151, 54, 197, 187, 137, 190, 166, 233, 1, 103, 204, 88, 31, 127, 185, 29, 65, 1, 29, 254, 223, 14, 83, 167, 215, 114, 248, 30, 173, 89, 173, 187, 69, 5, 105, 117, 15, 106, 94, 173, 63, 227, 25, 230, 190, 136, 168, 177, 175, 107, 91, 126, 254, 34, 188, 25, 118, 48, 12, 226, 130, 153, 162, 57, 47, 181, 212, 79, 160, 97, 64, 157, 246, 90, 53, 43, 149, 76, 102, 15, 195, 107, 58, 242, 84, 172, 29, 81, 198, 113, 81, 251, 138, 182, 154, 111, 30, 171, 129, 56, 17, 45, 214, 153, 112, 117, 203, 174, 40, 38, 234, 236, 32, 4, 112, 225, 26, 187, 195, 246, 252, 9, 218, 69, 160, 223, 178, 54, 148, 81, 8, 134, 151, 75, 248, 63, 224, 240, 48, 75, 250, 221, 85, 46, 100, 50, 3, 70, 64, 102, 111, 160, 155, 233, 59, 147, 184, 57, 61, 6, 126, 79, 176, 16, 185, 94, 166, 33, 135, 78, 42, 75, 140, 208, 140, 44, 153, 187, 64, 103, 119, 160, 236, 16, 239, 74, 218, 219, 212, 207, 110, 53, 30, 76, 248, 40, 111, 98, 44, 20, 113, 204, 233, 109, 135, 96, 107, 39, 163, 203, 125, 45, 157, 152, 71, 239, 175, 174, 159, 147, 80, 111, 93, 38, 253, 228, 154, 225, 181, 101, 12, 241, 127, 65, 49, 189, 5, 85, 151, 237, 213, 143, 14, 104, 138, 54, 52, 27, 4, 132, 67, 35, 156, 86, 157, 73, 16, 229, 222, 245, 110, 79, 165, 179, 56, 179, 53, 218, 229, 100, 58, 87, 149, 48, 231, 64, 63, 115, 67, 3, 172, 6, 186, 115, 154, 60, 53, 214, 152, 149, 89, 234, 37, 143, 82, 255, 64, 28, 183, 93, 112, 39, 70, 185, 57, 0, 199, 9, 61, 175, 219, 41, 76, 37, 176, 82, 125, 65, 53, 160, 214, 105, 62, 153, 244, 222, 96, 205, 6, 178, 85, 41, 240, 113, 0, 96, 149, 38, 3, 195, 18, 152, 41, 246, 3, 103, 29, 110, 134, 30, 101, 75, 46, 103, 199, 184, 20, 230, 8, 55, 120, 4, 229, 168, 35, 43, 7, 28, 161, 143, 87, 27, 87, 79, 255, 186, 44, 195, 158, 155, 181, 119, 81, 172, 217, 107, 95, 98, 55, 243, 186, 66, 105, 48, 224, 123, 232, 84, 156, 20, 10, 156, 208, 204, 52, 34, 228, 136, 97, 242, 200, 246, 211, 67, 202, 40, 241, 91, 92, 253, 9, 54, 72, 131, 221, 106, 178, 32, 44, 182, 4, 225, 193, 37, 20, 249, 249, 231, 10, 206, 18, 71, 254, 221, 187, 172, 88, 204, 6, 127, 138, 102, 7, 208, 75, 147, 219, 199, 177, 79, 36, 170, 101, 207, 177, 109, 95, 143, 217, 41, 199, 80, 183, 201, 2, 254, 12, 55, 23, 198, 14, 255, 69, 245, 138, 155, 129, 227, 167, 168, 130, 156, 135, 14, 96, 93, 48, 99, 143, 107, 126, 92, 117, 143, 112, 108, 193, 228, 84, 13, 41, 186, 27, 172, 92, 201, 149, 116, 19, 112, 197, 116, 209, 128, 102, 1, 55, 152, 177, 28, 37, 34, 50, 83, 41, 199, 74, 178, 59, 111, 67, 118, 35, 252, 36, 33, 87, 28, 170, 17, 215, 47, 90, 154, 124, 137, 15, 14, 211, 59, 75, 59, 30, 77, 0, 49, 37, 225, 191, 87, 101, 127, 214, 227, 160, 99, 174, 234, 82, 148, 235, 16, 241, 219, 147, 170, 127, 221, 250, 116, 39, 218, 156, 72, 227, 172, 55, 0, 79, 188, 76, 51, 222, 232, 24, 36, 62, 94, 154, 3, 61, 230, 146, 114, 253, 0, 128, 58, 253, 90, 72, 211, 242, 38, 39, 133, 153, 161, 119, 105, 195, 152, 225, 208, 105, 140, 80, 217, 186, 196, 157, 21, 116, 230, 116, 139, 25, 159, 143, 118, 128, 77, 201, 238, 247, 228, 15, 168, 4, 133, 148, 21, 148, 12, 44, 241, 7, 115, 17, 129, 176, 202, 46, 130, 122, 129, 235, 141, 223, 85, 21, 199, 65, 181, 169, 52, 174, 161, 153, 62, 25, 164, 115, 213, 89, 138, 199, 103, 79, 200, 165, 135, 249, 244, 27, 209, 178, 240, 129, 211, 61, 9, 111, 157, 147, 119, 36, 119, 255, 110, 130, 84, 49, 210, 225, 247, 100, 26, 121, 127, 163, 160, 26, 79, 99, 24, 77, 65, 32, 178, 109, 36, 27, 253, 173, 110, 183, 11, 14, 211, 57, 130, 254, 124, 104, 165, 219, 31, 70, 97, 14, 194, 39, 61, 26, 141, 125, 228, 126, 194, 184, 101, 160, 204, 106, 128, 144, 106, 103, 171, 18, 246, 129, 220, 85, 172, 151, 123, 5, 73, 155, 192, 175, 91, 157, 239, 61, 237, 116, 170, 65, 233, 56, 19, 49, 114, 168, 190, 3, 214, 53, 250, 90, 213, 244, 88, 101, 30, 229, 248, 124, 15, 71, 141, 27, 172, 235, 21, 129, 211, 72, 61, 172, 112, 170, 128, 135, 96, 196, 221, 255, 27, 176, 105, 188, 183, 121, 33, 37, 149, 53, 131, 226, 233, 29, 167, 234, 218, 109, 53, 185, 152, 36, 248, 53, 61, 235, 78, 21, 201, 214, 210, 163, 12, 251, 187, 45, 188, 137, 126, 127, 237, 92, 234, 91, 240, 225, 38, 194, 57, 213, 251, 237, 171, 30, 99, 52, 14, 49, 84, 101, 252, 237, 7, 166, 122, 114, 32, 107, 32, 207, 239, 136, 168, 178, 12, 11, 241, 233, 230, 146, 132, 18, 83, 233, 41, 172, 17, 6, 161, 42, 113, 87, 40, 255, 185, 1, 146, 128, 5, 240, 126, 131, 71, 42, 54, 124, 205, 2, 122, 71, 30, 222, 229, 40, 134, 142, 102, 97, 239, 151, 177, 1, 230, 231, 49, 123, 219, 28, 129, 91, 152, 112, 13, 154, 81, 197, 226, 255, 112, 158, 178, 177, 55, 181, 108, 138, 185, 245, 29, 186, 21, 73, 188, 209, 154, 200, 89, 116, 235, 198, 144, 36, 87, 248, 22, 7, 200, 122, 7, 148, 44, 42, 87, 140, 238, 204, 95, 231, 252, 0, 136, 0, 22, 39, 70, 123, 125, 165, 113, 227, 172, 146, 163, 128, 158, 36, 52, 91, 19, 36, 245, 27, 150, 138, 141, 11, 67, 239, 224, 65, 24, 116, 101, 7, 39, 46, 142, 172, 164, 243, 148, 0, 33, 226, 59, 47, 203, 137, 156, 241, 66, 250, 157, 30, 204, 101, 143, 134, 98, 238, 155, 226, 25, 184, 136, 219, 89, 100, 193, 11, 143, 71, 139, 243, 230, 151, 0, 249, 1, 78, 26, 32, 93, 104, 157, 67, 97, 164, 248, 86, 124, 146, 93, 74, 222, 228, 167, 55, 53, 100, 135, 216, 109, 13, 64, 37, 106, 177, 200, 200, 182, 92, 251, 69, 31, 243, 89, 80, 198, 14, 132, 203, 72, 103, 28, 104, 217, 24, 97, 223, 113, 11, 29, 178, 191, 210, 46, 162, 255, 68, 99, 8, 237, 213, 162, 152, 193, 183, 121, 203, 19, 108, 182, 29, 86, 26, 192, 103, 220, 103, 205, 154, 179, 197, 9, 22, 73, 127, 175, 146, 38, 119, 210, 0, 24, 180, 21, 245, 215, 204, 91, 186, 119, 138, 183, 239, 15, 155, 231, 248, 133, 39, 24, 101, 144, 236, 10, 230, 54, 174, 227, 73, 21, 110, 10, 160, 241, 232, 131, 14, 212, 127, 232, 59, 122, 65, 146, 54, 163, 9, 189, 190, 121, 88, 170, 62, 194, 14, 204, 152, 245, 38, 131, 37, 91, 81, 72, 114, 29, 115, 239, 182, 56, 44, 156, 159, 177, 180, 82, 160, 93, 97, 86, 183, 236, 50, 95, 85, 39, 71, 181, 225, 152, 143, 63, 123, 117, 34, 44, 109, 160, 166, 229, 240, 91, 138, 102, 54, 180, 173, 44, 50, 80, 42, 124, 7, 50, 124, 211, 239, 21, 94, 197, 185, 239, 213, 107, 142, 64, 95, 124, 125, 17, 180, 97, 189, 101, 52, 48, 19, 112, 12, 70, 9, 212, 177, 54, 118, 66, 84, 147, 236, 248, 26, 124, 95, 103, 135, 254, 124, 49, 112, 186, 99, 120, 90, 8, 194, 191, 88, 57, 242, 65, 61, 10, 104, 246, 197, 252, 19, 159, 58, 194, 75, 173, 242, 103, 8, 115, 84, 69, 238, 149, 26, 15, 159, 182, 141, 132, 119, 70, 29, 53, 20, 143, 46, 163, 204, 6, 236, 59, 45, 185, 172, 89, 119, 83, 38, 144, 36, 222, 96, 151, 26, 99, 195, 163, 170, 133, 92, 159, 214, 53, 150, 116, 90, 176, 69, 145, 130, 15, 172, 140, 217, 215, 101, 163, 115, 161, 65, 101, 8, 7, 183, 113, 213, 134, 58, 175, 130, 251, 143, 173, 248, 168, 135, 60, 159, 30, 194, 68, 208, 119, 120, 2, 40, 178, 227, 247, 161, 77, 47, 136, 46, 244, 163, 72, 65, 158, 25, 225, 195, 61, 132, 182, 204, 177, 186, 200, 81, 2, 65, 105, 212, 72, 94, 203, 232, 217, 182, 123, 251, 228, 160, 1, 161, 204, 123, 20, 37, 1, 77, 208, 179, 45, 149, 181, 122, 102, 190, 123, 213, 164, 231, 41, 216, 130, 234, 248, 208, 251, 252, 220, 84, 209, 67, 47, 61, 220, 5, 142, 162, 26, 236, 121, 142, 248, 132, 255, 65, 122, 203, 196, 102, 191, 187, 2, 195, 127, 255, 193, 92, 49, 91, 186, 154, 39, 156, 29, 211, 172, 49, 104, 245, 114, 153, 223, 211, 199, 249, 35, 130, 160, 128, 0, 152, 176, 183, 20, 236, 113, 193, 108, 26, 255, 11, 237, 102, 133, 245, 94, 115, 114, 10, 89, 229, 214, 221, 99, 149, 30, 99, 37, 246, 10, 26, 26, 39, 92, 123, 170, 73, 211, 127, 227, 54, 30, 86, 133, 159, 112, 225, 91, 148, 100, 174, 149, 75, 143, 14, 140, 20, 44, 64, 212, 5, 243, 8, 116, 63, 30, 97, 42, 123, 20, 73, 212, 85, 207, 83, 122, 27, 251, 233, 84, 10, 17, 236, 232, 83, 200, 127, 119, 143, 163, 204, 220, 167, 59, 231, 20, 106, 186, 222, 191, 8, 40, 234, 21, 25, 180, 13, 116, 250, 152, 224, 174, 75, 3, 205, 38, 173, 215, 236, 151, 185, 121, 254, 244, 154, 239, 17, 53, 106, 164, 61, 49, 116, 216, 118, 94, 150, 35, 181, 26, 238, 66, 49, 211, 221, 132, 146, 166, 115, 39, 136, 36, 205, 230, 179, 31, 197, 51, 148, 165, 109, 38, 70, 37, 148, 52, 44, 209, 250, 98, 58, 246, 225, 103, 198, 101, 26, 25, 196, 207, 8, 166, 21, 88, 252, 175, 253, 10, 88, 107, 157, 19, 225, 61, 12, 246, 221, 37, 239, 186, 167, 137, 142, 135, 222, 128, 174, 62, 95, 216, 38, 141, 157, 45, 232, 97, 217, 173, 203, 234, 116, 129, 69, 206, 189, 94, 221, 12, 54, 139, 186, 247, 184, 16, 200, 121, 244, 104, 8, 7, 35, 111, 47, 188, 10, 140, 92, 73, 143, 206, 203, 72, 122, 184, 20, 102, 197, 130, 64, 150, 63, 96, 239, 8, 132, 111, 217, 84, 91, 198, 32, 43, 100, 138, 241, 15, 160, 42, 190, 253, 193, 184, 164, 124, 29, 210, 96, 67, 224, 221, 182, 29, 218, 129, 149, 29, 128, 174, 98, 88, 88, 125, 56, 40, 255, 120, 5, 0, 87, 174, 42, 150, 90, 112, 201, 183, 169, 19, 57, 195, 191, 12, 58, 244, 235, 132, 25, 145, 72, 146, 214, 8, 125, 100, 135, 12, 5, 102, 97, 248, 174, 24, 159, 90, 33, 43, 187, 6, 61, 212, 241, 225, 190, 219, 252, 197, 123, 129, 164, 108, 123, 55, 230, 4, 153, 166, 105, 234, 15, 85, 216, 23, 56, 32, 3, 41, 110, 68, 146, 172, 133, 202, 98, 41, 7, 47, 152, 35, 255, 168, 106, 241, 226, 222, 77, 244, 52, 185, 65, 252, 227, 32, 66, 38, 11, 172, 60, 28, 28, 103, 84, 1, 1, 205, 182, 190, 28, 189, 102, 253, 43, 1, 191, 148, 116, 10, 227, 18, 81, 93, 80, 239, 157, 232, 215, 180, 163, 165, 161, 109, 177, 71, 150, 244, 144, 208, 160, 110, 22, 174, 60, 206, 43, 103, 121, 55, 103, 114, 115, 173, 238, 13, 10, 227, 251, 41, 176, 216, 158, 229, 216, 55, 234, 128, 128, 20, 167, 106, 181, 86, 163, 130, 215, 110, 149, 191, 10, 227, 215, 8, 214, 154, 178, 181, 15, 19, 0, 247, 250, 97, 74, 43, 157, 55, 94, 174, 41, 41, 9, 199, 97, 20, 91, 32, 18, 10, 43, 98, 240, 247, 203, 20, 250, 117, 160, 44, 229, 202, 187, 64, 54, 124, 15, 184, 169, 129, 27, 160, 240, 26, 61, 255, 60, 166, 60, 144, 209, 84, 55, 187, 186, 168, 13, 124, 125, 29, 17, 100, 249, 227, 62, 205, 78, 179, 163, 168, 139, 168, 21, 38, 83, 239, 151, 74, 43, 66, 2, 92, 72, 71, 94, 216, 134, 238, 20, 45, 158, 213, 164, 73, 57, 80, 47, 198, 184, 130, 223, 227, 71, 132, 133, 235, 177, 85, 174, 142, 124, 172, 200, 54, 229, 40, 126, 60, 76, 92, 216, 153, 56, 241, 174, 66, 141, 90, 226, 3, 30, 68, 234, 71, 187, 163, 112, 146, 255, 22, 143, 170, 204, 3, 127, 179, 81, 139, 160, 37, 77, 246, 128, 220, 196, 158, 153, 73, 177, 65, 199, 119, 29, 197, 144, 130, 248, 206, 155, 253, 108, 213, 124, 7, 223, 221, 162, 146, 134, 242, 65, 99, 162, 107, 120, 247, 214, 207, 96, 150, 169, 131, 208, 218, 221, 28, 24, 112, 208, 23, 1, 130, 142, 232, 56, 104, 45, 33, 158, 95, 255, 123, 31, 74, 76, 120, 178, 155, 213, 6, 195, 164, 8, 8, 69, 241, 197, 127, 83, 169, 21, 167, 19, 94, 143, 252, 33, 159, 248, 241, 170, 153, 147, 1, 149, 199, 201, 131, 170, 79, 236, 212, 209, 143, 107, 98, 24, 123, 56, 33, 193, 85, 247, 64, 225, 135, 210, 78, 145, 57, 16, 145, 71, 170, 20, 133, 87, 235, 4, 166, 239, 100, 82, 235, 81, 50, 223, 9, 193, 52, 49, 86, 129, 190, 196, 82, 165, 107, 63, 115, 161, 98, 33, 20, 193, 29, 42, 151, 205, 252, 124, 72, 245, 48, 181, 67, 7, 13, 21, 127, 59, 226, 188, 144, 129, 112, 244, 192, 121, 213, 80, 42, 196, 1, 13, 107, 108, 78, 0, 40, 121, 225, 148, 237, 234, 209, 216, 238, 9, 147, 226, 254, 96, 89, 212, 72, 193, 106, 75, 135, 74, 227, 67, 255, 92, 191, 81, 188, 124, 226, 149, 152, 142, 15, 159, 195, 238, 114, 55, 255, 166, 157, 230, 59, 148, 170, 166, 151, 65, 213, 104, 253, 253, 112, 150, 82, 147, 137, 27, 214, 100, 247, 65, 81, 92, 47, 86, 217, 7, 45, 120, 81, 130, 31, 236, 243, 76, 78, 3, 45, 105, 172, 220, 71, 48, 220, 94, 196, 249, 163, 193, 133, 50, 236, 205, 20, 55, 2, 63, 14, 127, 69, 113, 212, 204, 12, 58, 79, 89, 86, 29, 61, 199, 201, 64, 149, 6, 144, 182, 150, 129, 31, 18, 167, 120, 248, 82, 107, 25, 143, 128, 27, 161, 28, 25, 153, 183, 217, 238, 78, 186, 106, 92, 27, 202, 219, 165, 96, 0, 216, 234, 169, 73, 101, 39, 182, 113, 217, 240, 170, 116, 172, 221, 250, 233, 48, 49, 242, 83, 227, 92, 181, 184, 72, 230, 180, 21, 15, 108, 135, 25, 38, 153, 25, 124, 227, 26, 149, 73, 236, 39, 211, 244, 149, 58, 183, 132, 26, 223, 219, 174, 144, 117, 233, 219, 165, 205, 157, 159, 222, 184, 52, 47, 241, 201, 123, 65, 24, 44, 55, 215, 177, 168, 250, 179, 115, 190, 227, 123, 158, 163, 179, 224, 69, 196, 66, 207, 254, 243, 101, 221, 193, 140, 250, 4, 28, 222, 52, 96, 138, 160, 33, 218, 64, 118, 214, 234, 201, 152, 148, 91, 178, 111, 107, 144, 142, 6, 182, 102, 72, 188, 34, 213, 181, 26, 223, 58, 255, 103, 81, 17, 47, 169, 11, 245, 224, 123, 148, 215, 237, 186, 107, 75, 152, 90, 202, 166, 22, 149, 197, 5, 246, 238, 78, 76, 229, 106, 199, 94, 127, 195, 0, 45, 82, 6, 159, 103, 96, 138, 231, 71, 46, 107, 59, 216, 39, 43, 12, 221, 27, 214, 56, 155, 145, 66, 187, 169, 250, 235, 78, 211, 179, 239, 183, 198, 163, 93, 5, 196, 24, 174, 143, 225, 106, 139, 89, 98, 13, 127, 207, 184, 194, 30, 1, 165, 198, 169, 8, 197, 118, 86, 163, 221, 138, 23, 209, 61, 116, 79, 99, 233, 43, 130, 60, 244, 85, 229, 243, 172, 123, 148, 200, 120, 192, 127, 211, 52, 11, 159, 41, 95, 212, 230, 188, 169, 156, 137, 29, 212, 12, 148, 168, 148, 133, 243, 44, 241, 139, 127, 24, 246, 220, 227, 125, 209, 97, 60, 52, 162, 192, 146, 49, 161, 92, 138, 112, 189, 128, 59, 126, 125, 46, 207, 60, 79, 231, 174, 152, 209, 68, 223, 205, 2, 38, 14, 91, 116, 159, 255, 28, 27, 178, 248, 164, 104, 158, 79, 69, 214, 234, 157, 12, 75, 163, 83, 253, 245, 202, 61, 213, 176, 6, 197, 230, 29, 208, 166, 253, 194, 254, 235, 29, 141, 241, 70, 249, 15, 62, 0, 148, 163, 135, 52, 122, 40, 96, 87, 31, 179, 152, 51, 216, 133, 184, 122, 198, 203, 60, 115, 218, 191, 193, 16, 178, 25, 148, 252, 112, 104, 103, 252, 36, 92, 221, 28, 179, 43, 199, 198, 151, 128, 100, 252, 217, 161, 249, 34, 201, 172, 118, 52, 180, 252, 104, 7, 223, 44, 116, 102, 212, 21, 40, 224, 184, 55, 163, 210, 21, 207, 161, 239, 51, 54, 155, 41, 133, 18, 67, 48, 3, 165, 130, 251, 4, 79, 214, 57, 72, 130, 157, 212, 144],\n    Ib = [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 24, 26, 29, 31, 34, 36, 39, 41, 44, 46, 49, 51, 54, 56, 59, 61, 64, 65, 66, 67, 68, 69, 70, 72, 73, 74, 75, 76, 77, 79, 80, 81, 82, 83, 84, 85, 87, 88, 89, 90, 91, 92, 94, 95, 96, 97, 98, 99, 101, 102, 103, 104, 105, 106, 107, 109, 110, 111, 112, 113, 114, 116, 117, 118, 119, 120, 121, 123, 124, 125, 126, 127, 128, 129, 131, 132, 133, 134, 135, 136, 138, 139, 140, 141, 142, 143, 145, 146, 147, 148, 149, 150, 151, 153, 154, 155, 156, 157, 158, 160, 161, 162, 163, 164, 165, 166, 168, 169, 170, 171, 172, 173, 175, 176, 177, 178, 179, 180, 182, 183, 184, 185, 186, 187, 188, 190, 191, 192, 193, 194, 195, 197, 198, 199, 200, 201, 202, 204, 205, 206, 207, 208, 209, 210, 212, 213, 214, 215, 216, 217, 219, 220, 221, 222, 223, 224, 226, 226, 226, 227, 227, 227, 228, 228, 228, 229, 229, 229, 230, 230, 231, 231, 231, 232, 232, 232, 233, 233, 233, 234, 234, 235, 235, 235, 236, 236, 236, 237, 237, 237, 238, 238, 239, 239, 239, 240, 240, 240, 241, 241, 241, 242, 242, 243, 243, 243, 244, 244, 244, 245, 245, 245, 246, 246, 246, 247, 247, 247, 248, 248, 248, 249, 249, 249, 250, 250, 250, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255],\n    yb = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 32, 33, 35, 36, 37, 39, 40, 42, 43, 44, 46, 47, 49, 50, 51, 53, 54, 56, 57, 58, 59, 61, 62, 63, 64, 66, 67, 68, 69, 71, 72, 73, 74, 76, 77, 78, 79, 81, 82, 83, 84, 86, 87, 88, 90, 91, 92, 93, 95, 96, 97, 98, 100, 101, 102, 103, 105, 106, 107, 108, 110, 111, 112, 113, 115, 116, 117, 118, 120, 121, 122, 124, 125, 126, 127, 129, 130, 131, 132, 134, 135, 136, 137, 139, 140, 141, 142, 144, 145, 146, 147, 149, 150, 151, 152, 154, 155, 156, 158, 159, 160, 161, 163, 164, 165, 166, 168, 169, 170, 171, 173, 174, 175, 176, 178, 179, 180, 181, 183, 184, 185, 186, 188, 189, 190, 192, 193, 194, 195, 197, 198, 199, 200, 202, 203, 204, 205, 207, 208, 209, 210, 212, 213, 214, 215, 217, 218, 219, 220, 222, 223, 224, 226, 226, 226, 227, 227, 228, 228, 229, 229, 230, 230, 231, 231, 232, 232, 233, 233, 234, 234, 234, 235, 235, 236, 236, 237, 237, 238, 238, 239, 239, 240, 240, 241, 241, 242, 242, 243, 243, 243, 244, 244, 244, 245, 245, 245, 246, 246, 246, 247, 247, 247, 248, 248, 248, 249, 249, 249, 250, 250, 250, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255],\n    Cb = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 35, 36, 37, 38, 39, 40, 41, 43, 44, 45, 46, 47, 48, 50, 51, 52, 53, 54, 55, 56, 58, 59, 60, 61, 62, 63, 65, 66, 67, 68, 69, 70, 72, 73, 74, 76, 77, 78, 80, 81, 83, 84, 85, 87, 88, 89, 91, 92, 94, 95, 96, 98, 99, 100, 102, 103, 105, 106, 107, 109, 110, 111, 113, 114, 116, 117, 118, 120, 121, 122, 124, 125, 127, 128, 129, 131, 132, 133, 135, 136, 138, 139, 140, 142, 143, 144, 146, 147, 149, 150, 151, 153, 154, 155, 157, 158, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 192, 193, 193, 194, 195, 195, 196, 197, 197, 198, 199, 199, 200, 201, 201, 202, 203, 203, 204, 205, 205, 206, 207, 207, 208, 209, 209, 210, 211, 211, 212, 213, 213, 214, 215, 215, 216, 217, 217, 218, 219, 219, 220, 221, 221, 222, 223, 223, 224, 225, 225, 226, 227, 227, 228, 229, 229, 230, 231, 231, 232, 233, 233, 234, 235, 235, 236, 237, 237, 238, 239, 239, 240, 241, 241, 242, 243, 243, 244, 245, 245, 246, 247, 247, 248, 249, 249, 250, 251, 251, 252, 253, 253, 254, 255];\n  var Ab = /*#__PURE__*/function (_Eb4) {\n    _inherits(Ab, _Eb4);\n    function Ab(e, t, i, r) {\n      var _this148;\n      _classCallCheck(this, Ab);\n      _this148 = _possibleConstructorReturn(this, _getPrototypeOf(Ab).call(this, e, Rb, i, r)), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"inputTexture\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"lightLevel\", .1), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"rednessLevel\", .5), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mskin_he_max\", 175 / 180 * 3.141593), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mskin_he_min\", 115 / 180 * 3.141593), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mskin_hc_max\", 173 / 180 * 3.141593), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mskin_hc_min\", 116 / 180 * 3.141593), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mskin_hc_axis\", 2.04203545), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mfacts_rotate_c\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mfacts_rotate_le\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"mfacts_rotate_ge\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"tab_addr\", null), mp(_assertThisInitialized(_assertThisInitialized(_this148)), \"lutTextures\", []), _this148.inputTexture = t, _this148.init();\n      return _this148;\n    }\n    _createClass(Ab, [{\n      key: \"setUniforms\",\n      value: function setUniforms() {\n        var e = this.gl.getUniformLocation(this.program, \"u_flipY\"),\n          t = this.gl.getUniformLocation(this.program, \"u_denoiseLevel\");\n        this.gl.uniform1f(t, this.denoiseLevel), this.gl.uniform1f(e, 1);\n        var i = this.gl.getUniformLocation(this.program, \"light\");\n        this.gl.uniform1f(i, this.lightLevel);\n        var r = this.gl.getUniformLocation(this.program, \"redness\");\n        this.gl.uniform1f(r, this.rednessLevel);\n        var n = this.gl.getUniformLocation(this.program, \"skin_he_max\"),\n          o = this.gl.getUniformLocation(this.program, \"skin_he_min\"),\n          s = this.gl.getUniformLocation(this.program, \"skin_hc_max\"),\n          a = this.gl.getUniformLocation(this.program, \"skin_hc_min\"),\n          c = this.gl.getUniformLocation(this.program, \"skin_hc_axis\"),\n          d = this.gl.getUniformLocation(this.program, \"facts_rotate_c\"),\n          u = this.gl.getUniformLocation(this.program, \"facts_rotate_le\"),\n          l = this.gl.getUniformLocation(this.program, \"facts_rotate_ge\");\n        this.gl.uniform1f(n, this.mskin_he_max), this.gl.uniform1f(o, this.mskin_he_min), this.gl.uniform1f(s, this.mskin_hc_max), this.gl.uniform1f(a, this.mskin_hc_min), this.gl.uniform1f(c, this.mskin_hc_axis), this.gl.uniform1f(d, this.mfacts_rotate_c), this.gl.uniform1f(u, this.mfacts_rotate_le), this.gl.uniform1f(l, this.mfacts_rotate_ge);\n        var h = this.gl.getUniformLocation(this.program, \"u_originImage\");\n        this.gl.activeTexture(this.gl.TEXTURE2), this.gl.bindTexture(this.gl.TEXTURE_2D, this.inputTexture), this.gl.uniform1i(h, 2);\n        var p = [\"lighten_lut\"],\n          _ = [this.gl.TEXTURE3];\n        for (var _e80 = 0; _e80 < p.length; _e80++) {\n          var _t101 = this.gl.getUniformLocation(this.program, p[_e80]);\n          this.gl.activeTexture(_[_e80]), this.gl.bindTexture(this.gl.TEXTURE_2D, this.lutTextures[_e80]), this.gl.uniform1i(_t101, _e80 + 3);\n        }\n      }\n    }, {\n      key: \"setParameters\",\n      value: function setParameters(e) {\n        void 0 !== e.denoiseLevel && (this.denoiseLevel = e.denoiseLevel), void 0 !== e.lightLevel && (this.lightLevel = e.lightLevel), void 0 !== e.rednessLevel && (this.rednessLevel = e.rednessLevel, this.updateRedness(this.rednessLevel)), e.lighteningContrastLevel && this.updateLut(e.lighteningContrastLevel);\n      }\n    }, {\n      key: \"init\",\n      value: function init() {\n        this.tab_addr = new Uint8Array(yb);\n        var e = [this.tab_addr],\n          t = [256],\n          i = [1];\n        for (var r = 0; r < e.length; r++) {\n          var n = this.gl.createTexture();\n          if (!n) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"create lut texture failed\");\n          this.gl.bindTexture(this.gl.TEXTURE_2D, n), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.LUMINANCE, t[r], i[r], 0, this.gl.LUMINANCE, this.gl.UNSIGNED_BYTE, e[r]), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR), this.lutTextures.push(n);\n        }\n      }\n    }, {\n      key: \"updateRedness\",\n      value: function updateRedness(e) {\n        var t = 3.141593;\n        var i,\n          r,\n          n = e,\n          o = n;\n        n > 1 && (n = 1), n < 0 && (n = 0), o > 1 && (o = 1), o < 0 && (o = 0), this.mfacts_rotate_c = .8 * n, o < .8 && (o = 0), this.mskin_he_max = 175 / 180 * t, this.mskin_hc_max = 173 / 180 * t, this.mskin_he_min = (115 - 4 * o) / 180 * t, this.mskin_hc_min = (116 - 4 * o) / 180 * t, this.mskin_hc_axis = (117 - 4 * o) / 180 * t, this.mskin_hc_axis < this.mskin_hc_min && (this.mskin_hc_axis = this.mskin_hc_min), this.mskin_hc_min < t / 2 && (this.mskin_hc_min = t / 2), this.mskin_hc_axis < t / 2 && (this.mskin_hc_axis = t / 2), this.mskin_he_min < t / 2 && (this.mskin_he_min = t / 2), this.mskin_hc_max > t && (this.mskin_hc_max = t), this.mskin_hc_axis > t && (this.mskin_hc_axis = t), this.mskin_he_max > t && (this.mskin_he_max = t), i = this.mskin_he_max - this.mskin_hc_max, r = this.mskin_hc_max - this.mskin_hc_axis, this.mfacts_rotate_ge = i > .01 ? this.mfacts_rotate_c * r / i : this.mfacts_rotate_c, i = this.mskin_hc_min - this.mskin_he_min, r = this.mskin_hc_axis - this.mskin_hc_min, this.mfacts_rotate_le = i > .01 ? this.mfacts_rotate_c * r / i : this.mfacts_rotate_c;\n      }\n    }, {\n      key: \"updateLut\",\n      value: function updateLut(e) {\n        var t = null;\n        if (0 === e && (t = yb), 1 === e && (t = Cb), 2 === e && (t = Ib), !t) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"invalid ylut_table value:\" + e);\n        this.tab_addr = new Uint8Array(t);\n        var i = [this.tab_addr],\n          r = [256],\n          n = [1];\n        for (var _e81 = 0; _e81 < i.length; _e81++) this.gl.bindTexture(this.gl.TEXTURE_2D, this.lutTextures[_e81]), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.LUMINANCE, r[_e81], n[_e81], 0, this.gl.LUMINANCE, this.gl.UNSIGNED_BYTE, i[_e81]);\n      }\n    }]);\n    return Ab;\n  }(Eb);\n  var Ob = /*#__PURE__*/function () {\n    function Ob() {\n      _classCallCheck(this, Ob);\n      mp(this, \"gl\", null), mp(this, \"canvas\", null), mp(this, \"programs\", []), mp(this, \"commonProgram\", null), mp(this, \"inputTexture\", null), mp(this, \"outputTextures\", []), mp(this, \"fbos\", []), mp(this, \"originalFrameWidth\", 0), mp(this, \"originalFrameHeight\", 0), mp(this, \"enableBeauty\", !1), mp(this, \"denoiseLevel\", 5), mp(this, \"lightLevel\", .35), mp(this, \"rednessLevel\", .5), mp(this, \"lighteningContrastLevel\", 1);\n    }\n    _createClass(Ob, [{\n      key: \"setEnableBeauty\",\n      value: function setEnableBeauty(e) {\n        this.enableBeauty = !!e;\n      }\n    }, {\n      key: \"init\",\n      value: function init(e, t, i) {\n        if (!jg().supportWebGL) throw new vE(TE.NOT_SUPPORTED, \"your browser is not support webGL\");\n        if (this.gl = i.getContext(\"webgl\"), !this.gl) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"can not get webgl context\");\n        if (this.initGL(e, t), !this.inputTexture) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"can not find input texture\");\n        this.canvas = i, this.programs.push(new _b(this.gl)), this.programs.push(new mb(this.gl, e, t)), this.programs.push(new Sb(this.gl, e, t)), this.programs.push(new vb(this.gl, e, t)), this.programs.push(new Ab(this.gl, this.inputTexture, e, t)), this.commonProgram = this.programs[0].program, this.setDenoiseLevel(this.denoiseLevel), this.setLightLevel(this.lightLevel), this.setRednessLevel(this.rednessLevel), this.setContrastLevel(this.lighteningContrastLevel);\n      }\n    }, {\n      key: \"render\",\n      value: function render(e) {\n        if (!this.gl || !this.commonProgram || !this.canvas) return void NE.warning(\"video effect manager is not init!\");\n        var t = 0;\n        if (this.originalFrameHeight === e.videoWidth && this.originalFrameWidth === e.videoHeight) t = 2;else if (this.originalFrameHeight !== e.videoHeight || this.originalFrameWidth !== e.videoWidth) {\n          if (NE.debug(\"beauty effect: resolution changed \".concat(this.originalFrameWidth, \"x\").concat(this.originalFrameHeight, \" -> \").concat(e.videoWidth, \"x\").concat(e.videoHeight)), 0 === e.videoHeight || 0 === e.videoWidth) return void NE.debug(\"beauty effect: skip 0 resolution frame\");\n          this.canvas.width = e.videoWidth, this.canvas.height = e.videoHeight, e.setAttribute(\"width\", e.videoWidth.toString()), e.setAttribute(\"height\", e.videoHeight.toString()), this.release(), this.init(e.videoWidth, e.videoHeight, this.canvas);\n        }\n        this.gl.viewport(0, 0, e.videoWidth, e.videoHeight), this.gl.bindTexture(this.gl.TEXTURE_2D, this.inputTexture), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, e);\n        var i = this.enableBeauty ? this.programs.length - 1 : 0;\n        for (var _e82 = 0; _e82 <= i; _e82++) {\n          var _i56 = this.programs[_e82].program;\n          this.gl.useProgram(_i56);\n          var _r32 = this.gl.getUniformLocation(_i56, \"u_image\");\n          this.programs[_e82].setUniforms(), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.fbos[t + _e82 % 2]), this.gl.clearColor(0, 0, 0, 1), this.gl.clear(this.gl.COLOR_BUFFER_BIT), this.gl.drawArrays(this.gl.TRIANGLES, 0, 6), this.gl.activeTexture(this.gl.TEXTURE0), this.gl.bindTexture(this.gl.TEXTURE_2D, this.outputTextures[t + _e82 % 2]), this.gl.uniform1i(_r32, 0);\n        }\n        this.gl.useProgram(this.commonProgram);\n        var r = this.gl.getUniformLocation(this.commonProgram, \"u_flipY\");\n        this.gl.uniform1f(r, -1), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null), this.gl.clearColor(0, 0, 0, 1), this.gl.clear(this.gl.COLOR_BUFFER_BIT), this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n      }\n    }, {\n      key: \"setDenoiseLevel\",\n      value: function setDenoiseLevel(e) {\n        this.programs.forEach(function (t) {\n          t instanceof Eb && t.setParameters({\n            denoiseLevel: e\n          });\n        }), this.denoiseLevel = e;\n      }\n    }, {\n      key: \"setLightLevel\",\n      value: function setLightLevel(e) {\n        this.programs.forEach(function (t) {\n          t instanceof Eb && t.setParameters({\n            lightLevel: e\n          });\n        }), this.lightLevel = e;\n      }\n    }, {\n      key: \"setRednessLevel\",\n      value: function setRednessLevel(e) {\n        this.programs.forEach(function (t) {\n          t instanceof Eb && t.setParameters({\n            rednessLevel: e\n          });\n        }), this.rednessLevel = e;\n      }\n    }, {\n      key: \"setContrastLevel\",\n      value: function setContrastLevel(e) {\n        this.programs.forEach(function (t) {\n          t instanceof Eb && t.setParameters({\n            lighteningContrastLevel: e\n          });\n        }), this.lighteningContrastLevel = e;\n      }\n    }, {\n      key: \"setSize\",\n      value: function setSize(e, t) {\n        this.programs.forEach(function (i) {\n          i instanceof Eb && i.setSize(e, t);\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release() {\n        this.gl = null, this.commonProgram = null, this.inputTexture = null, this.programs = [], this.outputTextures = [], this.fbos = [];\n      }\n    }, {\n      key: \"initGL\",\n      value: function initGL(e, t) {\n        if (!this.gl) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"can not find webgl context\");\n        this.inputTexture = this.gl.createTexture(), this.gl.bindTexture(this.gl.TEXTURE_2D, this.inputTexture), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n        for (var i = 0; i < 4; i++) {\n          var r = this.gl.createTexture();\n          if (!r) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"create texture failed\");\n          this.gl.bindTexture(this.gl.TEXTURE_2D, r), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), i < 2 ? this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, e, t, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null) : this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, t, e, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n          var n = this.gl.createFramebuffer();\n          if (!n) throw new vE(TE.WEBGL_INTERNAL_ERROR, \"create frame buffer failed\");\n          this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, n), this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, r, 0), this.outputTextures.push(r), this.fbos.push(n);\n        }\n        this.gl.viewport(0, 0, e, t), this.originalFrameWidth = e, this.originalFrameHeight = t;\n      }\n    }]);\n    return Ob;\n  }();\n  var bb = /*#__PURE__*/function () {\n    function bb() {\n      _classCallCheck(this, bb);\n      mp(this, \"targetFrameRate\", 0), mp(this, \"recordedFrameCount\", 0), mp(this, \"recordingTime\", 2), mp(this, \"recordID\", void 0);\n    }\n    _createClass(bb, [{\n      key: \"startRecordBeautyEffectOutput\",\n      value: function () {\n        var _startRecordBeautyEffectOutput = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee113(e) {\n          var t,\n            i,\n            _args113 = arguments;\n          return _regeneratorRuntime().wrap(function _callee113$(_context113) {\n            while (1) switch (_context113.prev = _context113.next) {\n              case 0:\n                t = _args113.length > 1 && void 0 !== _args113[1] ? _args113[1] : 4;\n                if (!this.recordID) {\n                  _context113.next = 3;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"another beauty effect recording is in progress\");\n              case 3:\n                i = MR(6, \"\");\n                this.recordID = i;\n                this.targetFrameRate = e;\n                this.recordedFrameCount = 0;\n                this.recordingTime = t;\n                _context113.next = 10;\n                return LR(1e3 * this.recordingTime);\n              case 10:\n                return _context113.abrupt(\"return\", this.recordID !== i ? (this.recordID = void 0, !0) : (this.recordID = void 0, this.recordedFrameCount < this.targetFrameRate * this.recordingTime / 2 ? (NE.warning(\"detect beauty effect overload, current framerate\", this.recordedFrameCount / 2), !1) : (NE.debug(\"beauty effect current framerate\", this.recordedFrameCount / 2), !0)));\n              case 11:\n              case \"end\":\n                return _context113.stop();\n            }\n          }, _callee113, this);\n        }));\n        function startRecordBeautyEffectOutput(_x179) {\n          return _startRecordBeautyEffectOutput.apply(this, arguments);\n        }\n        return startRecordBeautyEffectOutput;\n      }()\n    }, {\n      key: \"stopRecordBeautyEffectOutput\",\n      value: function stopRecordBeautyEffectOutput() {\n        this.targetFrameRate = 0, this.recordedFrameCount = 0, this.recordID = void 0;\n      }\n    }, {\n      key: \"addFrame\",\n      value: function addFrame() {\n        this.recordID && (this.recordedFrameCount += 1);\n      }\n    }]);\n    return bb;\n  }();\n  var wb = /*#__PURE__*/function (_ab$exports$VideoProc) {\n    _inherits(wb, _ab$exports$VideoProc);\n    function wb() {\n      var _this149;\n      _classCallCheck(this, wb);\n      _this149 = _possibleConstructorReturn(this, _getPrototypeOf(wb).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"name\", \"BeautyProcessor\"), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"fps\", 15), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"canvas\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"video\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"manager\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"overloadDetector\", new bb()), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"stopChromeBackgroundLoop\", null), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"onOverload\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"stopLoop\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this149)), \"lastRenderTime\", 0), _this149.fps = 30, _this149.manager = new Ob(), _this149._enabled = !1;\n      return _this149;\n    }\n    _createClass(wb, [{\n      key: \"onEnableChange\",\n      value: function () {\n        var _onEnableChange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee114(e) {\n          return _regeneratorRuntime().wrap(function _callee114$(_context114) {\n            while (1) switch (_context114.prev = _context114.next) {\n              case 0:\n                this.manager.setEnableBeauty(e);\n                _context114.t0 = this.context && this.inputTrack;\n                if (!_context114.t0) {\n                  _context114.next = 10;\n                  break;\n                }\n                if (!e) {\n                  _context114.next = 8;\n                  break;\n                }\n                _context114.next = 6;\n                return this.startEffect(this.inputTrack, this.context);\n              case 6:\n                _context114.next = 10;\n                break;\n              case 8:\n                _context114.next = 10;\n                return this.stopEffect(this.inputTrack, this.context);\n              case 10:\n              case \"end\":\n                return _context114.stop();\n            }\n          }, _callee114, this);\n        }));\n        function onEnableChange(_x180) {\n          return _onEnableChange.apply(this, arguments);\n        }\n        return onEnableChange;\n      }()\n    }, {\n      key: \"setBeautyEffectOptions\",\n      value: function () {\n        var _setBeautyEffectOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee115(e) {\n          var t, _t102, _t103, _t104;\n          return _regeneratorRuntime().wrap(function _callee115$(_context115) {\n            while (1) switch (_context115.prev = _context115.next) {\n              case 0:\n                if (function (e) {\n                  void 0 !== e.smoothnessLevel && Xf(e.smoothnessLevel, \"options.smoothnessLevel\", 0, 1, !1), void 0 !== e.lighteningLevel && Xf(e.lighteningLevel, \"options.lighteningLevel\", 0, 1, !1), void 0 !== e.rednessLevel && Xf(e.rednessLevel, \"options.rednessLevel\", 0, 1, !1), void 0 !== e.lighteningContrastLevel && Jf(e.lighteningContrastLevel, \"options.lighteningContrastLevel\", [0, 1, 2]);\n                }(e), void 0 !== e.smoothnessLevel) {\n                  t = Math.max(.1, 10 * e.smoothnessLevel);\n                  this.manager.setDenoiseLevel(t);\n                }\n                if (void 0 !== e.lighteningLevel) {\n                  _t102 = Math.max(.1, e.lighteningLevel / 2);\n                  this.manager.setLightLevel(_t102);\n                }\n                if (void 0 !== e.rednessLevel) {\n                  _t103 = Math.max(.01, e.rednessLevel);\n                  this.manager.setRednessLevel(_t103);\n                }\n                if (void 0 !== e.lighteningContrastLevel) {\n                  _t104 = e.lighteningContrastLevel;\n                  this.manager.setContrastLevel(_t104);\n                }\n              case 4:\n              case \"end\":\n                return _context115.stop();\n            }\n          }, _callee115, this);\n        }));\n        function setBeautyEffectOptions(_x181) {\n          return _setBeautyEffectOptions.apply(this, arguments);\n        }\n        return setBeautyEffectOptions;\n      }()\n    }, {\n      key: \"onTrack\",\n      value: function () {\n        var _onTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee116(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee116$(_context116) {\n            while (1) switch (_context116.prev = _context116.next) {\n              case 0:\n                _context116.t0 = this.video && this.enabled;\n                if (!_context116.t0) {\n                  _context116.next = 5;\n                  break;\n                }\n                null === (i = this.stopLoop) || void 0 === i || i.call(this);\n                _context116.next = 5;\n                return this.stopEffect(e, t);\n              case 5:\n                _context116.next = 7;\n                return this.startEffect(e, t);\n              case 7:\n              case \"end\":\n                return _context116.stop();\n            }\n          }, _callee116, this);\n        }));\n        function onTrack(_x182, _x183) {\n          return _onTrack.apply(this, arguments);\n        }\n        return onTrack;\n      }()\n    }, {\n      key: \"startEffect\",\n      value: function () {\n        var _startEffect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee117(e, t) {\n          var _this150 = this;\n          var i, r, n, o;\n          return _regeneratorRuntime().wrap(function _callee117$(_context117) {\n            while (1) switch (_context117.prev = _context117.next) {\n              case 0:\n                if (this.enabled) {\n                  _context117.next = 2;\n                  break;\n                }\n                return _context117.abrupt(\"return\");\n              case 2:\n                i = Bh();\n                _context117.next = 5;\n                return this.renderWithWebGL(e);\n              case 5:\n                r = _context117.sent;\n                this.output(r, t), NE.info(\"start video effect, output:\", this.outputTrack), this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then(function (e) {\n                  e || _this150.onOverload && _this150.onOverload();\n                });\n                n = !1;\n                this.stopLoop = function () {\n                  n = !0;\n                };\n                o = function o() {\n                  _this150.enabled && !n && requestAnimationFrame(o);\n                  var e = Date.now(),\n                    t = 1e3 / _this150.fps,\n                    i = _this150.lastRenderTime ? e - _this150.lastRenderTime : t;\n                  i < t || (_this150.lastRenderTime = e - (i - t), _this150.video && _this150.video.paused && _this150.video.play(), _this150.enabled && _this150.video && (_this150.manager.render(_this150.video), _this150.outputTrack && _this150.outputTrack.requestFrame && _this150.outputTrack.requestFrame(), _this150.overloadDetector.addFrame()));\n                };\n                requestAnimationFrame(o), i.name === xh.CHROME && document.addEventListener(\"visibilitychange\", function () {\n                  document.hidden ? _this150.stopChromeBackgroundLoop = VT(function () {\n                    _this150.enabled && _this150.video && _this150.manager.render(_this150.video), _this150.outputTrack && _this150.outputTrack.requestFrame && _this150.outputTrack.requestFrame(), _this150.overloadDetector.addFrame();\n                  }, _this150.fps) : _this150.stopChromeBackgroundLoop && (_this150.stopChromeBackgroundLoop(), _this150.stopChromeBackgroundLoop = null);\n                }, !1);\n              case 11:\n              case \"end\":\n                return _context117.stop();\n            }\n          }, _callee117, this);\n        }));\n        function startEffect(_x184, _x185) {\n          return _startEffect.apply(this, arguments);\n        }\n        return startEffect;\n      }()\n    }, {\n      key: \"renderWithWebGL\",\n      value: function () {\n        var _renderWithWebGL = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee118(e) {\n          var _this151 = this;\n          var t, i, r, n, o;\n          return _regeneratorRuntime().wrap(function _callee118$(_context118) {\n            while (1) switch (_context118.prev = _context118.next) {\n              case 0:\n                this.canvas && (this.canvas.remove(), this.canvas = void 0), this.video && (this.video.remove(), this.video = void 0), this.canvas = document.createElement(\"canvas\"), this.video = document.createElement(\"video\"), this.video.setAttribute(\"autoplay\", \"\"), this.video.setAttribute(\"muted\", \"\"), this.video.muted = !0, this.video.setAttribute(\"playsinline\", \"\"), this.video.setAttribute(\"style\", \"display:none\"), this.video.srcObject = new MediaStream([e]);\n                t = new Cl(function (e) {\n                  var t = function t() {\n                    _this151.video && _this151.video.removeEventListener(\"playing\", t), e(void 0);\n                  };\n                  _this151.video && _this151.video.addEventListener(\"playing\", t);\n                });\n                this.video.play();\n                _context118.next = 5;\n                return t;\n              case 5:\n                i = e.getSettings(), r = i.width || this.video.videoWidth, n = i.height || this.video.videoHeight;\n                if (!(i.frameRate && this.fps !== i.frameRate && (this.fps = i.frameRate, NE.debug(\"beauty video processor: set fps to\", this.fps)), NE.debug(\"beauty video processor: width \".concat(r, \" height \").concat(n)), !r || !n)) {\n                  _context118.next = 8;\n                  break;\n                }\n                throw new vE(TE.BEAUTY_PROCESSOR_INTERNAL_ERROR, \"can not get track resolution\");\n              case 8:\n                this.canvas.width = r, this.canvas.height = n, this.video.setAttribute(\"width\", r.toString()), this.video.setAttribute(\"height\", n.toString()), this.manager.init(r, n, this.canvas);\n                o = jg();\n                return _context118.abrupt(\"return\", this.canvas.captureStream(o.supportRequestFrame ? 0 : this.fps).getVideoTracks()[0]);\n              case 11:\n              case \"end\":\n                return _context118.stop();\n            }\n          }, _callee118, this);\n        }));\n        function renderWithWebGL(_x186) {\n          return _renderWithWebGL.apply(this, arguments);\n        }\n        return renderWithWebGL;\n      }()\n    }, {\n      key: \"stopEffect\",\n      value: function () {\n        var _stopEffect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee119(e, t) {\n          return _regeneratorRuntime().wrap(function _callee119$(_context119) {\n            while (1) switch (_context119.prev = _context119.next) {\n              case 0:\n                NE.info(\"stop video effect\"), this.overloadDetector.stopRecordBeautyEffectOutput(), this.manager.release(), this.canvas && this.canvas.remove(), this.video && this.video.remove(), this.canvas = void 0, this.video = void 0, this.output(e, t);\n              case 1:\n              case \"end\":\n                return _context119.stop();\n            }\n          }, _callee119, this);\n        }));\n        function stopEffect(_x187, _x188) {\n          return _stopEffect.apply(this, arguments);\n        }\n        return stopEffect;\n      }()\n    }]);\n    return wb;\n  }(ab.exports.VideoProcessor);\n  function Nb(e) {\n    var t = {};\n    if (e.facingMode && (t.facingMode = e.facingMode), e.cameraId && (t.deviceId = {\n      exact: e.cameraId\n    }), !e.encoderConfig) return t;\n    var i = VE(e.encoderConfig);\n    return t.width = i.width, t.height = i.height, !sp() && i.frameRate && (t.frameRate = i.frameRate), Bh().name === xh.EDGE && \"object\" == typeof t.frameRate && (t.frameRate.max = 60), Qh() && (t.frameRate = {\n      ideal: 30,\n      max: 30\n    }), t;\n  }\n  function Db(e) {\n    var t = {};\n    e.screenSourceType && (t.mediaSource = e.screenSourceType), e.extensionId && Xh() && (t.extensionId = e.extensionId), e.electronScreenSourceId && (t.sourceId = e.electronScreenSourceId);\n    var i = e.encoderConfig ? jE(e.encoderConfig) : null;\n    return t.mandatory = {\n      chromeMediaSource: \"desktop\",\n      maxWidth: i ? i.width : void 0,\n      maxHeight: i ? i.height : void 0\n    }, i && i.frameRate && (\"number\" == typeof i.frameRate ? (t.mandatory.maxFrameRate = i.frameRate, t.mandatory.minFrameRate = i.frameRate) : (t.mandatory.maxFrameRate = i.frameRate.max || i.frameRate.ideal || i.frameRate.exact || void 0, t.mandatory.minFrameRate = i.frameRate.min || i.frameRate.ideal || i.frameRate.exact || void 0), t.frameRate = i.frameRate), i && i.width && (t.width = i.width), i && i.height && (t.height = i.height), t;\n  }\n  function Pb(e) {\n    var t = {};\n    if (sp() || (void 0 !== e.AGC && (t.autoGainControl = e.AGC), void 0 !== e.AEC && (t.echoCancellation = e.AEC), void 0 !== e.ANS && (t.noiseSuppression = e.ANS, Xh() && e.ANS && (t.googHighpassFilter = e.ANS))), e.encoderConfig) {\n      var i = GE(e.encoderConfig);\n      t.channelCount = i.stereo ? 2 : 1, t.sampleRate = i.sampleRate, t.sampleSize = i.sampleSize;\n    }\n    return e.microphoneId && (t.deviceId = {\n      exact: e.microphoneId\n    }), cp() && (t.sampleRate = void 0), t;\n  }\n  var Lb, kb;\n  !function (e) {\n    e.COVERED = \"COVERED\", e.POSITION = \"POSITION\", e.SIZE = \"SIZE\", e.STYLE = \"STYLE\";\n  }(Lb || (Lb = {})), function (e) {\n    e.UNMOUNTED = \"UNMOUNTED\", e.INVALID_HTML_ELEMENT = \"INVALID_HTML_ELEMENT\";\n  }(kb || (kb = {}));\n  var Mb,\n    Ub,\n    xb,\n    Vb,\n    jb,\n    Fb,\n    Bb,\n    Gb,\n    Wb,\n    Hb,\n    Kb,\n    Yb,\n    qb,\n    Jb,\n    Xb,\n    zb,\n    Qb,\n    Zb,\n    $b,\n    ew,\n    tw,\n    iw,\n    rw,\n    nw,\n    ow,\n    sw,\n    aw,\n    cw,\n    dw,\n    uw,\n    lw,\n    hw = new ( /*#__PURE__*/function () {\n      function _class15() {\n        var _this152 = this;\n        _classCallCheck(this, _class15);\n        mp(this, \"_clientSize\", null), mp(this, \"getClientWidth\", function () {\n          return document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth;\n        }), mp(this, \"getClientHeight\", function () {\n          return document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight;\n        }), mp(this, \"getStyle\", function (e) {\n          return window.getComputedStyle(e, null);\n        }), mp(this, \"checkCssVisibleProperty\", function (e) {\n          var t = !0;\n          var i = _this152.getStyle(e),\n            r = i.display,\n            n = i.visibility,\n            o = i.opacity,\n            s = i.filter;\n          if ((\"none\" === r || [\"hidden\", \"collapse\"].includes(n) || Number(o) < .1) && (t = !1), !t) return !1;\n          if (s) {\n            s.split(\" \").filter(function (e) {\n              var t = e.split(\"(\")[0];\n              return [\"brightness\", \"blur\", \"opacity\"].includes(t);\n            }).map(function (e) {\n              var _e$split = e.split(/\\(|\\)/),\n                _e$split2 = _slicedToArray(_e$split, 2),\n                t = _e$split2[0],\n                i = _e$split2[1];\n              return [t, Number(i.match(/^[0-9\\.]+/))];\n            }).forEach(function (e) {\n              var _e83 = _slicedToArray(e, 2),\n                i = _e83[0],\n                r = _e83[1];\n              switch (i) {\n                case \"brightness\":\n                  (r < .1 || r > 3) && (t = !1);\n                  break;\n                case \"blur\":\n                  r > 3 && (t = !1);\n                  break;\n                case \"opacity\":\n                  r < .1 && (t = !1);\n              }\n            });\n          }\n          return t;\n        }), mp(this, \"checkPropertyUpToAllParentNodes\", function (e, t) {\n          var i = !0,\n            r = !0;\n          var n = function n(e) {\n            return t(e);\n          };\n          var o = e;\n          for (; o && r;) {\n            n(o) || (i = !1, r = !1), o = o.parentElement, o || (r = !1);\n          }\n          return i;\n        }), mp(this, \"checkActualCssVisibleIncludeInherit\", function (e) {\n          return _this152.checkPropertyUpToAllParentNodes(e, _this152.checkCssVisibleProperty);\n        }), mp(this, \"getSizeAboutClient\", function (e) {\n          var _e$getBoundingClientR = e.getBoundingClientRect(),\n            t = _e$getBoundingClientR.width,\n            i = _e$getBoundingClientR.height,\n            r = _e$getBoundingClientR.left,\n            n = _e$getBoundingClientR.right,\n            o = _e$getBoundingClientR.top,\n            s = _e$getBoundingClientR.bottom,\n            a = _this152.getClientWidth(),\n            c = _this152.getClientHeight();\n          return {\n            width: t,\n            height: i,\n            left: r,\n            right: n,\n            top: o,\n            bottom: s,\n            clientWidth: a,\n            clientHeight: c,\n            clientMin: Math.min(a, c)\n          };\n        }), mp(this, \"checkActualSize\", function () {\n          var _this152$_clientSize = _this152._clientSize,\n            e = _this152$_clientSize.width,\n            t = _this152$_clientSize.height,\n            i = _this152$_clientSize.clientMin;\n          return _this152.checkSizeIsVisible(e, t, i);\n        }), mp(this, \"elementFromPoint\", function (e, t) {\n          return document.elementFromPoint ? document.elementFromPoint(e, t) : null;\n        }), mp(this, \"checkCoverForAPoint\", function (e, t, i) {\n          var r = _this152.elementFromPoint(e, t);\n          return null !== r && r !== i;\n        }), mp(this, \"getPointPositionList\", function () {\n          var _this152$_clientSize2 = _this152._clientSize,\n            e = _this152$_clientSize2.width,\n            t = _this152$_clientSize2.height,\n            i = _this152$_clientSize2.left,\n            r = _this152$_clientSize2.top,\n            n = e / 6,\n            o = t / 6,\n            s = [],\n            a = Math.pow(10, 6);\n          for (var _e84 = 0; _e84 < 5; _e84++) for (var _t105 = 0; _t105 < 5; _t105++) {\n            var c = (i * a + (0 === _e84 ? .1 : 4 === _e84 ? (n * _e84 * a - 1e5) / a : n * _e84) * a) / a,\n              _d3 = (r * a + (0 === _t105 ? .1 : 4 === _t105 ? (o * _t105 * a - 1e5) / a : o * _t105) * a) / a;\n            s.push({\n              x: c,\n              y: _d3\n            });\n          }\n          return [].concat(s);\n        }), mp(this, \"checkElementCover\", function (e) {\n          return _this152.getPointPositionList().map(function (t) {\n            return _this152.checkCoverForAPoint(t.x, t.y, e);\n          }).filter(function (e) {\n            return !!e;\n          }).length > 6;\n        }), mp(this, \"checkSizeIsVisible\", function (e, t, i) {\n          return (e > 50 || i / e <= 10) && (t > 50 || i / t <= 10);\n        }), mp(this, \"checkSizeOfPartInClient\", function () {\n          var _this152$_clientSize3 = _this152._clientSize,\n            e = _this152$_clientSize3.left,\n            t = _this152$_clientSize3.right,\n            i = _this152$_clientSize3.top,\n            r = _this152$_clientSize3.bottom,\n            n = _this152$_clientSize3.clientHeight,\n            o = _this152$_clientSize3.clientWidth,\n            s = _this152$_clientSize3.clientMin;\n          var a, c, d, u;\n          if (e < 0) a = 0;else {\n            if (!(e < o)) return !1;\n            a = e;\n          }\n          if (t < 0) return !1;\n          if (c = t < o ? t : o, i < 0) d = 0;else {\n            if (!(i < n)) return !1;\n            d = i;\n          }\n          if (r < 0) return !1;\n          u = r < n ? r : n;\n          var l = c - a,\n            h = u - d;\n          return _this152.checkSizeIsVisible(l, h, s);\n        }), mp(this, \"returnHiddenResult\", function (e) {\n          return _this152._clientSize = null, {\n            visible: !1,\n            reason: e\n          };\n        }), mp(this, \"checkOneElementVisible\", function (e) {\n          if (e instanceof HTMLElement) {\n            if (_this152.checkElementIsMountedOnDom(e)) {\n              if (_this152.checkActualCssVisibleIncludeInherit(e)) {\n                if (_this152._clientSize = _this152.getSizeAboutClient(e), _this152.checkElementCover(e)) return _this152.returnHiddenResult(Lb.COVERED);\n                {\n                  var _e85 = _this152.checkActualSize(),\n                    t = _this152.checkSizeOfPartInClient();\n                  return _e85 && !t ? _this152.returnHiddenResult(Lb.POSITION) : _e85 ? (_this152._clientSize = null, {\n                    visible: !0\n                  }) : _this152.returnHiddenResult(Lb.SIZE);\n                }\n              }\n              return _this152.returnHiddenResult(Lb.STYLE);\n            }\n            return _this152.returnHiddenResult(kb.UNMOUNTED);\n          }\n          return _this152.returnHiddenResult(kb.INVALID_HTML_ELEMENT);\n        }), mp(this, \"checkElementIsMountedOnDom\", function (e) {\n          return _this152.checkPropertyUpToAllParentNodes(e, function (e) {\n            return \"HTML\" !== e.nodeName.toUpperCase() ? null !== e.parentElement : !!document.documentElement;\n          });\n        });\n      }\n      return _class15;\n    }())();\n  function pw(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function _w(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? pw(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : pw(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var Ew = (Mb = RT({\n      argsMap: function argsMap(e, t, i) {\n        return [e.getTrackId(), \"string\" == typeof t ? t : \"HTMLElement\", i];\n      }\n    }), Ub = ov(), xb = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), Vb = bT(\"LocalVideoTrack\", \"_enabledMutex\"), jb = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), Fb = ov(), Bb = bT(\"LocalVideoTrack\", \"_enabledMutex\"), Gb = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), Wb = ov(), Hb = ov(), Kb = RT({\n      argsMap: function argsMap(e, t, i) {\n        return [e.getTrackId(), t, i];\n      }\n    }), Yb = ov(), qb = ov(), Jb = ov(), Xb = ov(), zb = ov(), Qb = ov(), Zb = ov(), $b = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t.name];\n      }\n    }), ew = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), tw = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), ZS((iw = /*#__PURE__*/function (_wT2) {\n      _inherits(e, _wT2);\n      _createClass(e, [{\n        key: \"isPlaying\",\n        get: function get() {\n          return !(!this._player || this._player.videoElementStatus !== am.PLAYING);\n        }\n      }, {\n        key: \"__className__\",\n        get: function get() {\n          return \"LocalVideoTrack\";\n        }\n      }]);\n      function e(_e86, t, i, r, n, o) {\n        var _this153;\n        _classCallCheck(this, e);\n        _this153 = _possibleConstructorReturn(this, _getPrototypeOf(e).call(this, _e86, n)), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"trackMediaType\", \"video\"), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_player\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_videoBeautyProcessor\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_videoVisibleTimer\", null), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_previousVideoVisibleStatus\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_clearPreviousVideoVisibleStatus\", function () {\n          return _this153._previousVideoVisibleStatus = void 0;\n        }), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_encoderConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_scalabiltyMode\", {\n          numSpatialLayers: 1,\n          numTemporalLayers: 1\n        }), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_optimizationMode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_videoHeight\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_videoWidth\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_forceBitrateLimit\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"_enabled\", !0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"processorDestination\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this153)), \"processorContext\", void 0), _this153.updateMediaStreamTrackResolution(), _this153._encoderConfig = t, _this153._scalabiltyMode = i, _this153._optimizationMode = r, _this153._hints = o || [], -1 === _this153._hints.indexOf(lg.SCREEN_TRACK) && _this153.updateBitrateFromProfile(), _this153.processorContext = new eR(_this153.getTrackId(), \"local\"), _this153.processorDestination = new $v(_this153.processorContext), _this153.bindProcessorDestinationEvents();\n        return _this153;\n      }\n      _createClass(e, [{\n        key: \"play\",\n        value: function play(e) {\n          var _this154 = this;\n          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n          if (\"string\" == typeof e) {\n            var _t106 = document.getElementById(e);\n            _t106 ? e = _t106 : (NE.warning(\"[\".concat(this.getTrackId(), '] can not find \"#').concat(e, '\" element, use document.body')), e = document.body);\n          }\n          NE.debug(\"[\".concat(this.getTrackId(), \"] start video playback\"), JSON.stringify(t));\n          var i = _w(_w(_w({}, this._getDefaultPlayerConfig()), t), {}, {\n            trackId: this.getTrackId(),\n            element: e\n          });\n          this._player ? this._player.updateConfig(i) : (this._player = new ob(i), this._player.updateVideoTrack(this._mediaStreamTrack)), this._player.play(), this._videoVisibleTimer && window.clearInterval(this._videoVisibleTimer), this._clearPreviousVideoVisibleStatus(), this._videoVisibleTimer = window.setInterval(function () {\n            try {\n              var _e87 = _this154.getVideoElementVisibleStatus();\n              _this154.emit(_g.VIDEO_ELEMENT_VISIBLE_STATUS, _e87);\n            } catch (e) {}\n          }, HE(\"CHECK_VIDEO_VISIBLE_INTERVAL\"));\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          this._player && (this._videoVisibleTimer && (window.clearInterval(this._videoVisibleTimer), this._videoVisibleTimer = null), this._clearPreviousVideoVisibleStatus(), this._player.destroy(), this._player = void 0, NE.debug(\"[\".concat(this.getTrackId(), \"] stop video playback\")));\n        }\n      }, {\n        key: \"setEnabled\",\n        value: function () {\n          var _setEnabled5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee120(e, t) {\n            return _regeneratorRuntime().wrap(function _callee120$(_context120) {\n              while (1) switch (_context120.prev = _context120.next) {\n                case 0:\n                  if (t) {\n                    _context120.next = 4;\n                    break;\n                  }\n                  if (!(e === this._enabled)) {\n                    _context120.next = 3;\n                    break;\n                  }\n                  return _context120.abrupt(\"return\");\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n                case 4:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), !e)) {\n                    _context120.next = 15;\n                    break;\n                  }\n                  this._originMediaStreamTrack.enabled = !1;\n                  _context120.prev = 6;\n                  _context120.next = 9;\n                  return BR(this, ug.NEED_DISABLE_TRACK, this);\n                case 9:\n                  _context120.next = 14;\n                  break;\n                case 11:\n                  _context120.prev = 11;\n                  _context120.t0 = _context120[\"catch\"](6);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context120.t0.toString()), _context120.t0;\n                case 14:\n                  return _context120.abrupt(\"return\", (t || (this._enabled = !1), void NE.info(\"[\".concat(this.getTrackId(), \"] setEnabled to false success\"))));\n                case 15:\n                  this._originMediaStreamTrack.enabled = !0;\n                  _context120.prev = 16;\n                  _context120.next = 19;\n                  return BR(this, ug.NEED_ENABLE_TRACK, this);\n                case 19:\n                  _context120.next = 24;\n                  break;\n                case 21:\n                  _context120.prev = 21;\n                  _context120.t1 = _context120[\"catch\"](16);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled to true error\"), _context120.t1.toString()), _context120.t1;\n                case 24:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] setEnabled to true success\")), t || (this._enabled = !0);\n                case 25:\n                case \"end\":\n                  return _context120.stop();\n              }\n            }, _callee120, this, [[6, 11], [16, 21]]);\n          }));\n          function setEnabled(_x189, _x190) {\n            return _setEnabled5.apply(this, arguments);\n          }\n          return setEnabled;\n        }()\n      }, {\n        key: \"setMuted\",\n        value: function () {\n          var _setMuted2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee121(e) {\n            return _regeneratorRuntime().wrap(function _callee121$(_context121) {\n              while (1) switch (_context121.prev = _context121.next) {\n                case 0:\n                  _context121.t0 = e !== this._muted;\n                  if (!_context121.t0) {\n                    _context121.next = 13;\n                    break;\n                  }\n                  this.stateCheck(\"muted\", e);\n                  this._muted = e;\n                  this._originMediaStreamTrack.enabled = !e;\n                  NE.debug(\"[\".concat(this.getTrackId(), \"] start set muted: \").concat(e));\n                  if (!e) {\n                    _context121.next = 11;\n                    break;\n                  }\n                  _context121.next = 9;\n                  return BR(this, ug.NEED_MUTE_TRACK, this);\n                case 9:\n                  _context121.next = 13;\n                  break;\n                case 11:\n                  _context121.next = 13;\n                  return BR(this, ug.NEED_UNMUTE_TRACK, this);\n                case 13:\n                case \"end\":\n                  return _context121.stop();\n              }\n            }, _callee121, this);\n          }));\n          function setMuted(_x191) {\n            return _setMuted2.apply(this, arguments);\n          }\n          return setMuted;\n        }()\n      }, {\n        key: \"getStats\",\n        value: function getStats() {\n          XR(function () {\n            NE.warning(\"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead\");\n          }, \"localVideoTrackGetStatsWarning\");\n          var e = GR(this, ug.GET_STATS);\n          return e || _w({}, Bm);\n        }\n      }, {\n        key: \"setBeautyEffect\",\n        value: function () {\n          var _setBeautyEffect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee122(e) {\n            var t,\n              _e88,\n              _args122 = arguments;\n            return _regeneratorRuntime().wrap(function _callee122$(_context122) {\n              while (1) switch (_context122.prev = _context122.next) {\n                case 0:\n                  t = _args122.length > 1 && void 0 !== _args122[1] ? _args122[1] : {};\n                  if (!(e || this._videoBeautyProcessor)) {\n                    _context122.next = 24;\n                    break;\n                  }\n                  if (!(Kh() === Uh.IOS || Kh() === Uh.ANDROID)) {\n                    _context122.next = 4;\n                    break;\n                  }\n                  throw new vE(TE.INVALID_OPERATION, \"can not enable beauty effect on mobile device\");\n                case 4:\n                  if (!(!this._enabled && e)) {\n                    _context122.next = 6;\n                    break;\n                  }\n                  throw new vE(TE.TRACK_IS_DISABLED, \"can not enable beauty effect when track is disabled\");\n                case 6:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] start setBeautyEffect\"), e, JSON.stringify(t)), this._videoBeautyProcessor || e)) {\n                    _context122.next = 24;\n                    break;\n                  }\n                  _context122.prev = 7;\n                  if (!this._videoBeautyProcessor) if (this._videoBeautyProcessor = new wb(), this.processor) {\n                    _e88 = this.processor;\n                    this.pipe(this._videoBeautyProcessor).pipe(_e88);\n                  } else this.pipe(this._videoBeautyProcessor).pipe(this.processorDestination);\n                  _context122.next = 11;\n                  return this._videoBeautyProcessor.setBeautyEffectOptions(t);\n                case 11:\n                  if (!e) {\n                    _context122.next = 16;\n                    break;\n                  }\n                  _context122.next = 14;\n                  return this._videoBeautyProcessor.enable();\n                case 14:\n                  _context122.next = 18;\n                  break;\n                case 16:\n                  _context122.next = 18;\n                  return this._videoBeautyProcessor.disable();\n                case 18:\n                  _context122.next = 23;\n                  break;\n                case 20:\n                  _context122.prev = 20;\n                  _context122.t0 = _context122[\"catch\"](7);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setBeautyEffect error\"), _context122.t0.toString()), _context122.t0;\n                case 23:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] setBeautyEffect success\"));\n                case 24:\n                case \"end\":\n                  return _context122.stop();\n              }\n            }, _callee122, this, [[7, 20]]);\n          }));\n          function setBeautyEffect(_x192) {\n            return _setBeautyEffect.apply(this, arguments);\n          }\n          return setBeautyEffect;\n        }()\n      }, {\n        key: \"getCurrentFrameData\",\n        value: function getCurrentFrameData() {\n          return this._player ? this._player.getCurrentFrame() : new ImageData(2, 2);\n        }\n      }, {\n        key: \"getCurrentFrameImage\",\n        value: function () {\n          var _getCurrentFrameImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee123(e) {\n            var t,\n              _args123 = arguments;\n            return _regeneratorRuntime().wrap(function _callee123$(_context123) {\n              while (1) switch (_context123.prev = _context123.next) {\n                case 0:\n                  t = _args123.length > 1 && void 0 !== _args123[1] ? _args123[1] : 1;\n                  if (!this._player) {\n                    _context123.next = 5;\n                    break;\n                  }\n                  _context123.t0 = this._player.getCurrentFrameToUint8Array(e, t);\n                  _context123.next = 8;\n                  break;\n                case 5:\n                  _context123.next = 7;\n                  return tb(e);\n                case 7:\n                  _context123.t0 = _context123.sent;\n                case 8:\n                  return _context123.abrupt(\"return\", _context123.t0);\n                case 9:\n                case \"end\":\n                  return _context123.stop();\n              }\n            }, _callee123, this);\n          }));\n          function getCurrentFrameImage(_x193) {\n            return _getCurrentFrameImage.apply(this, arguments);\n          }\n          return getCurrentFrameImage;\n        }()\n      }, {\n        key: \"clone\",\n        value: function clone(t, i, r, n) {\n          var o = this._mediaStreamTrack.clone();\n          return new e(o, t, i, r, n);\n        }\n      }, {\n        key: \"setBitrateLimit\",\n        value: function () {\n          var _setBitrateLimit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee124(e) {\n            return _regeneratorRuntime().wrap(function _callee124$(_context124) {\n              while (1) switch (_context124.prev = _context124.next) {\n                case 0:\n                  if (!(NE.debug(\"[\".concat(this.getTrackId(), \"] set bitrate limit, \").concat(JSON.stringify(e))), e)) {\n                    _context124.next = 10;\n                    break;\n                  }\n                  this._forceBitrateLimit = e, this._encoderConfig && (this._encoderConfig.bitrateMax ? this._encoderConfig.bitrateMax = this._encoderConfig.bitrateMax < e.max_bitrate ? this._encoderConfig.bitrateMax : e.max_bitrate : this._encoderConfig.bitrateMax = e.max_bitrate, this._encoderConfig.bitrateMin, this._encoderConfig.bitrateMin = e.min_bitrate);\n                  _context124.prev = 2;\n                  _context124.next = 5;\n                  return BR(this, ug.NEED_UPDATE_VIDEO_ENCODER, this);\n                case 5:\n                  _context124.next = 10;\n                  break;\n                case 7:\n                  _context124.prev = 7;\n                  _context124.t0 = _context124[\"catch\"](2);\n                  return _context124.abrupt(\"return\", _context124.t0.throw());\n                case 10:\n                case \"end\":\n                  return _context124.stop();\n              }\n            }, _callee124, this, [[2, 7]]);\n          }));\n          function setBitrateLimit(_x194) {\n            return _setBitrateLimit.apply(this, arguments);\n          }\n          return setBitrateLimit;\n        }()\n      }, {\n        key: \"setOptimizationMode\",\n        value: function () {\n          var _setOptimizationMode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee125(e) {\n            var t;\n            return _regeneratorRuntime().wrap(function _callee125$(_context125) {\n              while (1) switch (_context125.prev = _context125.next) {\n                case 0:\n                  if (!(\"motion\" !== e && \"detail\" !== e && \"balanced\" !== e)) {\n                    _context125.next = 2;\n                    break;\n                  }\n                  return _context125.abrupt(\"return\", void NE.error(TE.INVALID_PARAMS, \"optimization mode must be motion, detail or balanced\"));\n                case 2:\n                  t = this._optimizationMode;\n                  _context125.prev = 3;\n                  this._optimizationMode = e;\n                  _context125.next = 7;\n                  return BR(this, ug.SET_OPTIMIZATION_MODE, this);\n                case 7:\n                  _context125.next = 12;\n                  break;\n                case 9:\n                  _context125.prev = 9;\n                  _context125.t0 = _context125[\"catch\"](3);\n                  throw this._optimizationMode = t, NE.error(\"[\".concat(this.getTrackId(), \"] set optimization mode failed\"), _context125.t0.toString()), _context125.t0;\n                case 12:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] set optimization mode success (\").concat(e, \")\"));\n                case 13:\n                case \"end\":\n                  return _context125.stop();\n              }\n            }, _callee125, this, [[3, 9]]);\n          }));\n          function setOptimizationMode(_x195) {\n            return _setOptimizationMode.apply(this, arguments);\n          }\n          return setOptimizationMode;\n        }()\n      }, {\n        key: \"setScalabiltyMode\",\n        value: function setScalabiltyMode(e) {\n          if (1 === e.numSpatialLayers && 1 !== e.numTemporalLayers) return NE.error(TE.INVALID_PARAMS, \"scalability mode currently not supported, no SVC.\"), void (this._scalabiltyMode = {\n            numSpatialLayers: 1,\n            numTemporalLayers: 1\n          });\n          this._scalabiltyMode = e, NE.info(\"[\".concat(this.getTrackId(), \"] set scalability mode success (\").concat(e, \")\"));\n        }\n      }, {\n        key: \"updateMediaStreamTrackResolution\",\n        value: function updateMediaStreamTrackResolution() {\n          var _this155 = this;\n          VR(this._originMediaStreamTrack).then(function (e) {\n            var _e89 = _slicedToArray(e, 2),\n              t = _e89[0],\n              i = _e89[1];\n            _this155._videoHeight = i, _this155._videoWidth = t;\n          }).catch(xR);\n        }\n      }, {\n        key: \"_updatePlayerSource\",\n        value: function _updatePlayerSource() {\n          this._player && this._player.updateVideoTrack(this._mediaStreamTrack);\n        }\n      }, {\n        key: \"_getDefaultPlayerConfig\",\n        value: function _getDefaultPlayerConfig() {\n          return {\n            fit: \"contain\"\n          };\n        }\n      }, {\n        key: \"updateBitrateFromProfile\",\n        value: function updateBitrateFromProfile() {\n          if (!this._encoderConfig) return;\n          var _this$getMediaStreamT = this.getMediaStreamTrackSettings(),\n            e = _this$getMediaStreamT.width,\n            t = _this$getMediaStreamT.height,\n            i = _this$getMediaStreamT.frameRate;\n          if (!e || !t || !i) return;\n          var _ref36 = function (e, t, i) {\n              var r = HE(\"BITRATE_ADAPTER_TYPE\");\n              var n;\n              var o = 200 * Math.pow(i / 15, .6) * Math.pow(e * t / 640 / 360, .75),\n                s = o;\n              if (\"STANDARD_BITRATE\" === r) n = 4 * o;else {\n                if (\"COMPATIABLE_BITRATE\" !== r) return;\n                n = 2 * o;\n              }\n              return [Math.floor(n), Math.floor(s)];\n            }(e, t, i) || [void 0, void 0],\n            _ref37 = _slicedToArray(_ref36, 2),\n            r = _ref37[0],\n            n = _ref37[1];\n          this._encoderConfig.bitrateMin || this._encoderConfig.bitrateMax || (this._encoderConfig.bitrateMin = n, this._encoderConfig.bitrateMax = r, NE.debug(\"[\".concat(this.getTrackId(), \"] update bitrate from profile, [w: \").concat(e, \", h: \").concat(t, \", fps: \").concat(i, \"] => [brMax: \").concat(r, \", brMin: \").concat(n, \"]\")));\n        }\n      }, {\n        key: \"getVideoElementVisibleStatus\",\n        value: function getVideoElementVisibleStatus() {\n          try {\n            var e, t;\n            var i = null == this || null === (e = this._player) || void 0 === e ? void 0 : e.getContainerElement(),\n              r = {\n                track: this,\n                element: null == this || null === (t = this._player) || void 0 === t ? void 0 : t.getVideoElement(),\n                slot: null == i ? void 0 : i.parentElement\n              },\n              _n25 = r.element,\n              _o17 = r.slot;\n            if (this.isPlaying && _n25 instanceof HTMLVideoElement && _o17 instanceof HTMLElement) {\n              var _e90 = hw.checkOneElementVisible(_n25),\n                _t107 = Object.assign({}, _e90);\n              if (_t107.visible !== this._previousVideoVisibleStatus) {\n                this._previousVideoVisibleStatus = _t107.visible;\n                var _e91 = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,\n                  options: [this.getTrackId()]\n                });\n                _t107.visible ? _e91.onSuccess(\"Video is visible\") : _e91.onSuccess(\"Invisible because of \".concat(_t107.reason));\n              }\n              return _t107;\n            }\n            return;\n          } catch (e) {\n            throw new vE(TE.GET_VIDEO_ELEMENT_VISIBLE_ERROR, e.message);\n          }\n        }\n      }, {\n        key: \"renewMediaStreamTrack\",\n        value: function () {\n          var _renewMediaStreamTrack2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee126(e) {\n            return _regeneratorRuntime().wrap(function _callee126$(_context126) {\n              while (1) switch (_context126.prev = _context126.next) {\n                case 0:\n                case \"end\":\n                  return _context126.stop();\n              }\n            }, _callee126);\n          }));\n          function renewMediaStreamTrack(_x196) {\n            return _renewMediaStreamTrack2.apply(this, arguments);\n          }\n          return renewMediaStreamTrack;\n        }()\n      }, {\n        key: \"pipe\",\n        value: function pipe(e) {\n          if (this._videoBeautyProcessor && e !== this._videoBeautyProcessor) return this._videoBeautyProcessor.pipe(e);\n          if (this.processor === e) return e;\n          if (e._source) throw new vE(TE.INVALID_OPERATION, \"Processor \".concat(e.name, \" already piped, please call unpipe beforehand.\"));\n          return this.unpipe(), this.processor = e, this.processor._source = this, e.updateInput({\n            track: this._originMediaStreamTrack,\n            context: this.processorContext\n          }), e;\n        }\n      }, {\n        key: \"unpipe\",\n        value: function unpipe() {\n          if (!this.processor) return;\n          if (this._videoBeautyProcessor && this.processor === this._videoBeautyProcessor) return void this._videoBeautyProcessor.unpipe();\n          var e = this.processor;\n          this.processor._source = void 0, this.processor = void 0, e.reset();\n        }\n      }, {\n        key: \"close\",\n        value: function close() {\n          _get(_getPrototypeOf(e.prototype), \"close\", this).call(this), this.unbindProcessorDestinationEvents(), this.unbindProcessorContextEvents(), this.unpipe(), this.processorDestination._source && this.processorDestination._source.unpipe();\n        }\n      }, {\n        key: \"bindProcessorDestinationEvents\",\n        value: function bindProcessorDestinationEvents() {\n          var _this156 = this;\n          this.processorDestination.on(Ng.ON_TRACK, /*#__PURE__*/function () {\n            var _ref38 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee127(e) {\n              return _regeneratorRuntime().wrap(function _callee127$(_context127) {\n                while (1) switch (_context127.prev = _context127.next) {\n                  case 0:\n                    if (!e) {\n                      _context127.next = 9;\n                      break;\n                    }\n                    _context127.t0 = e !== _this156._mediaStreamTrack;\n                    if (!_context127.t0) {\n                      _context127.next = 7;\n                      break;\n                    }\n                    _this156._mediaStreamTrack = e;\n                    _this156._updatePlayerSource();\n                    _context127.next = 7;\n                    return BR(_this156, ug.NEED_REPLACE_TRACK, _this156);\n                  case 7:\n                    _context127.next = 15;\n                    break;\n                  case 9:\n                    _context127.t1 = _this156._mediaStreamTrack !== _this156._originMediaStreamTrack;\n                    if (!_context127.t1) {\n                      _context127.next = 15;\n                      break;\n                    }\n                    _this156._mediaStreamTrack = _this156._originMediaStreamTrack;\n                    _this156._updatePlayerSource();\n                    _context127.next = 15;\n                    return BR(_this156, ug.NEED_REPLACE_TRACK, _this156);\n                  case 15:\n                  case \"end\":\n                    return _context127.stop();\n                }\n              }, _callee127);\n            }));\n            return function (_x197) {\n              return _ref38.apply(this, arguments);\n            };\n          }());\n        }\n      }, {\n        key: \"unbindProcessorDestinationEvents\",\n        value: function unbindProcessorDestinationEvents() {\n          this.processorDestination.removeAllListeners(Ng.ON_TRACK);\n        }\n      }, {\n        key: \"unbindProcessorContextEvents\",\n        value: function unbindProcessorContextEvents() {\n          this.processorContext.removeAllListeners(Dg.REQUEST_UPDATE_CONSTRAINTS), this.processorContext.removeAllListeners(Dg.REQUEST_CONSTRAINTS);\n        }\n      }]);\n      return e;\n    }(wT)).prototype, \"play\", [Mb, Ub], Object.getOwnPropertyDescriptor(iw.prototype, \"play\"), iw.prototype), ZS(iw.prototype, \"stop\", [xb], Object.getOwnPropertyDescriptor(iw.prototype, \"stop\"), iw.prototype), ZS(iw.prototype, \"setEnabled\", [Vb, jb, Fb], Object.getOwnPropertyDescriptor(iw.prototype, \"setEnabled\"), iw.prototype), ZS(iw.prototype, \"setMuted\", [Bb, Gb, Wb], Object.getOwnPropertyDescriptor(iw.prototype, \"setMuted\"), iw.prototype), ZS(iw.prototype, \"getStats\", [Hb], Object.getOwnPropertyDescriptor(iw.prototype, \"getStats\"), iw.prototype), ZS(iw.prototype, \"setBeautyEffect\", [Kb, Yb], Object.getOwnPropertyDescriptor(iw.prototype, \"setBeautyEffect\"), iw.prototype), ZS(iw.prototype, \"getCurrentFrameData\", [qb], Object.getOwnPropertyDescriptor(iw.prototype, \"getCurrentFrameData\"), iw.prototype), ZS(iw.prototype, \"getCurrentFrameImage\", [Jb], Object.getOwnPropertyDescriptor(iw.prototype, \"getCurrentFrameImage\"), iw.prototype), ZS(iw.prototype, \"setBitrateLimit\", [Xb], Object.getOwnPropertyDescriptor(iw.prototype, \"setBitrateLimit\"), iw.prototype), ZS(iw.prototype, \"setOptimizationMode\", [zb], Object.getOwnPropertyDescriptor(iw.prototype, \"setOptimizationMode\"), iw.prototype), ZS(iw.prototype, \"setScalabiltyMode\", [Qb], Object.getOwnPropertyDescriptor(iw.prototype, \"setScalabiltyMode\"), iw.prototype), ZS(iw.prototype, \"updateMediaStreamTrackResolution\", [Zb], Object.getOwnPropertyDescriptor(iw.prototype, \"updateMediaStreamTrackResolution\"), iw.prototype), ZS(iw.prototype, \"pipe\", [$b], Object.getOwnPropertyDescriptor(iw.prototype, \"pipe\"), iw.prototype), ZS(iw.prototype, \"unpipe\", [ew], Object.getOwnPropertyDescriptor(iw.prototype, \"unpipe\"), iw.prototype), ZS(iw.prototype, \"close\", [tw], Object.getOwnPropertyDescriptor(iw.prototype, \"close\"), iw.prototype), iw),\n    fw = (rw = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), nw = ov(), ow = bT(\"CameraVideoTrack\", \"_enabledMutex\"), sw = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), aw = ov(), cw = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), dw = ov(), uw = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), ZS((lw = /*#__PURE__*/function (_Ew) {\n      _inherits(lw, _Ew);\n      _createClass(lw, [{\n        key: \"__className__\",\n        get: function get() {\n          return \"CameraVideoTrack\";\n        }\n      }]);\n      function lw(e, t, i, r, n, o) {\n        var _this157;\n        _classCallCheck(this, lw);\n        _this157 = _possibleConstructorReturn(this, _getPrototypeOf(lw).call(this, e, t.encoderConfig ? VE(t.encoderConfig) : {}, r, n, o)), mp(_assertThisInitialized(_assertThisInitialized(_this157)), \"_config\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this157)), \"_originalConstraints\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this157)), \"_constraints\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this157)), \"_enabled\", !0), mp(_assertThisInitialized(_assertThisInitialized(_this157)), \"_deviceName\", \"default\"), mp(_assertThisInitialized(_assertThisInitialized(_this157)), \"tryResumeVideoForIOS15WeChat\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee128() {\n          return _regeneratorRuntime().wrap(function _callee128$(_context128) {\n            while (1) switch (_context128.prev = _context128.next) {\n              case 0:\n                _context128.t0 = ep() && !rp() && op() && _this157._enabled && !_this157._isClosed;\n                if (!_context128.t0) {\n                  _context128.next = 5;\n                  break;\n                }\n                NE.debug(\"[\".concat(_this157.getTrackId(), \"] try capture camera media device for interrupted iOS 15 device on WeChat.\"));\n                _context128.next = 5;\n                return _this157.renewMediaStreamTrack();\n              case 5:\n              case \"end\":\n                return _context128.stop();\n            }\n          }, _callee128);\n        }))), _this157._config = t, _this157._originalConstraints = i, _this157._constraints = i, _this157._deviceName = e.label, _this157._config.encoderConfig && (_this157._encoderConfig = VE(_this157._config.encoderConfig)), LT.on(CT.IOS_15_INTERRUPTION_END, _this157.tryResumeVideoForIOS15WeChat), LT.on(CT.IOS_INTERRUPTION_END, _this157.tryResumeVideoForIOS15WeChat), _this157.bindProcessorContextEvents();\n        return _this157;\n      }\n      _createClass(lw, [{\n        key: \"setDevice\",\n        value: function () {\n          var _setDevice2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee129(e) {\n            var t, i, r, _t108;\n            return _regeneratorRuntime().wrap(function _callee129$(_context129) {\n              while (1) switch (_context129.prev = _context129.next) {\n                case 0:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] set device to \").concat(e)), this._enabled)) {\n                    _context129.next = 36;\n                    break;\n                  }\n                  _context129.prev = 1;\n                  _context129.next = 4;\n                  return iv.getDeviceById(e);\n                case 4:\n                  t = _context129.sent;\n                  i = {};\n                  i.video = _w({}, this._constraints), i.video.deviceId = {\n                    exact: e\n                  }, i.video.facingMode = void 0, this._originMediaStreamTrack.stop();\n                  r = null;\n                  _context129.prev = 8;\n                  _context129.next = 11;\n                  return ZT(i, this.getTrackId());\n                case 11:\n                  r = _context129.sent;\n                  _context129.next = 23;\n                  break;\n                case 14:\n                  _context129.prev = 14;\n                  _context129.t0 = _context129[\"catch\"](8);\n                  NE.error(\"[\".concat(this.getTrackId(), \"] setDevice failed\"), _context129.t0.toString());\n                  _context129.next = 19;\n                  return ZT({\n                    video: this._constraints\n                  }, this.getTrackId());\n                case 19:\n                  r = _context129.sent;\n                  _context129.next = 22;\n                  return this._updateOriginMediaStreamTrack(r.getVideoTracks()[0], !1);\n                case 22:\n                  throw _context129.t0;\n                case 23:\n                  _context129.next = 25;\n                  return this._updateOriginMediaStreamTrack(r.getVideoTracks()[0], !1);\n                case 25:\n                  this.updateMediaStreamTrackResolution();\n                  this._deviceName = t.label;\n                  this._config.cameraId = e;\n                  this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context129.next = 34;\n                  break;\n                case 31:\n                  _context129.prev = 31;\n                  _context129.t1 = _context129[\"catch\"](1);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context129.t1.toString()), _context129.t1;\n                case 34:\n                  _context129.next = 46;\n                  break;\n                case 36:\n                  _context129.prev = 36;\n                  _context129.next = 39;\n                  return iv.getDeviceById(e);\n                case 39:\n                  _t108 = _context129.sent;\n                  this._deviceName = _t108.label, this._config.cameraId = e, this._constraints.deviceId = {\n                    exact: e\n                  };\n                  _context129.next = 46;\n                  break;\n                case 43:\n                  _context129.prev = 43;\n                  _context129.t2 = _context129[\"catch\"](36);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setDevice error\"), _context129.t2.toString()), _context129.t2;\n                case 46:\n                  NE.info(\"[\".concat(this.getTrackId(), \"] setDevice success\"));\n                case 47:\n                case \"end\":\n                  return _context129.stop();\n              }\n            }, _callee129, this, [[1, 31], [8, 14], [36, 43]]);\n          }));\n          function setDevice(_x198) {\n            return _setDevice2.apply(this, arguments);\n          }\n          return setDevice;\n        }()\n      }, {\n        key: \"setEnabled\",\n        value: function () {\n          var _setEnabled6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee130(e, t) {\n            var i, r, _e92;\n            return _regeneratorRuntime().wrap(function _callee130$(_context130) {\n              while (1) switch (_context130.prev = _context130.next) {\n                case 0:\n                  if (t) {\n                    _context130.next = 4;\n                    break;\n                  }\n                  if (!(e === this._enabled)) {\n                    _context130.next = 3;\n                    break;\n                  }\n                  return _context130.abrupt(\"return\");\n                case 3:\n                  this.stateCheck(\"enabled\", e);\n                case 4:\n                  if (!(NE.info(\"[\".concat(this.getTrackId(), \"] start setEnabled\"), e), !e)) {\n                    _context130.next = 15;\n                    break;\n                  }\n                  this._originMediaStreamTrack.onended = null, this._originMediaStreamTrack.stop(), t || (this._enabled = !1);\n                  _context130.prev = 6;\n                  _context130.next = 9;\n                  return BR(this, ug.NEED_DISABLE_TRACK, this);\n                case 9:\n                  _context130.next = 14;\n                  break;\n                case 11:\n                  _context130.prev = 11;\n                  _context130.t0 = _context130[\"catch\"](6);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled to false error\"), _context130.t0.toString()), _context130.t0;\n                case 14:\n                  return _context130.abrupt(\"return\", void NE.info(\"[\".concat(this.getTrackId(), \"] setEnabled to false success\")));\n                case 15:\n                  i = _w({}, this._constraints), r = iv.searchDeviceIdByName(this._deviceName);\n                  r && !i.deviceId && (i.deviceId = {\n                    exact: r\n                  });\n                  _context130.prev = 17;\n                  _context130.next = 20;\n                  return ZT({\n                    video: this._constraints\n                  }, this.getTrackId());\n                case 20:\n                  _e92 = _context130.sent;\n                  _context130.next = 23;\n                  return this._updateOriginMediaStreamTrack(_e92.getVideoTracks()[0], !1);\n                case 23:\n                  _context130.next = 25;\n                  return BR(this, ug.NEED_ENABLE_TRACK, this);\n                case 25:\n                  _context130.next = 30;\n                  break;\n                case 27:\n                  _context130.prev = 27;\n                  _context130.t1 = _context130[\"catch\"](17);\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] setEnabled true error\"), _context130.t1.toString()), _context130.t1;\n                case 30:\n                  this.updateMediaStreamTrackResolution(), NE.info(\"[\".concat(this.getTrackId(), \"] setEnabled to true success\")), t || (this._enabled = !0);\n                case 31:\n                case \"end\":\n                  return _context130.stop();\n              }\n            }, _callee130, this, [[6, 11], [17, 27]]);\n          }));\n          function setEnabled(_x199, _x200) {\n            return _setEnabled6.apply(this, arguments);\n          }\n          return setEnabled;\n        }()\n      }, {\n        key: \"setEncoderConfiguration\",\n        value: function () {\n          var _setEncoderConfiguration = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee131(e, t) {\n            var i, r, _t109;\n            return _regeneratorRuntime().wrap(function _callee131$(_context131) {\n              while (1) switch (_context131.prev = _context131.next) {\n                case 0:\n                  if (this._enabled) {\n                    _context131.next = 2;\n                    break;\n                  }\n                  throw new vE(TE.TRACK_IS_DISABLED, \"can not set encoder configuration when track is disabled\");\n                case 2:\n                  e = VE(e), this._forceBitrateLimit && (e.bitrateMax = this._forceBitrateLimit.max_bitrate ? this._forceBitrateLimit.max_bitrate : e.bitrateMax, e.bitrateMin = this._forceBitrateLimit.min_bitrate ? this._forceBitrateLimit.min_bitrate : e.bitrateMin);\n                  i = qR(this._config);\n                  i.encoderConfig = e;\n                  r = Nb(i);\n                  (zh() || Zh() || np()) && (r.deviceId = void 0), NE.debug(\"[\".concat(this.getTrackId(), \"] setEncoderConfiguration applyConstraints\"), JSON.stringify(e), JSON.stringify(r));\n                  _context131.prev = 7;\n                  _context131.next = 10;\n                  return this._originMediaStreamTrack.applyConstraints(r);\n                case 10:\n                  this.updateMediaStreamTrackResolution();\n                  _context131.next = 17;\n                  break;\n                case 13:\n                  _context131.prev = 13;\n                  _context131.t0 = _context131[\"catch\"](7);\n                  _t109 = new vE(TE.UNEXPECTED_ERROR, _context131.t0.toString());\n                  throw NE.error(\"[\".concat(this.getTrackId(), \"] applyConstraints error\"), _t109.toString()), _t109;\n                case 17:\n                  this._config = i, this._constraints = r, this._originalConstraints = r, this._encoderConfig = e, -1 === this._hints.indexOf(lg.SCREEN_TRACK) && this.updateBitrateFromProfile();\n                  _context131.prev = 18;\n                  _context131.next = 21;\n                  return BR(this, ug.NEED_UPDATE_VIDEO_ENCODER, this);\n                case 21:\n                  _context131.next = 26;\n                  break;\n                case 23:\n                  _context131.prev = 23;\n                  _context131.t1 = _context131[\"catch\"](18);\n                  return _context131.abrupt(\"return\", _context131.t1.throw());\n                case 26:\n                case \"end\":\n                  return _context131.stop();\n              }\n            }, _callee131, this, [[7, 13], [18, 23]]);\n          }));\n          function setEncoderConfiguration(_x201, _x202) {\n            return _setEncoderConfiguration.apply(this, arguments);\n          }\n          return setEncoderConfiguration;\n        }()\n      }, {\n        key: \"_getDefaultPlayerConfig\",\n        value: function _getDefaultPlayerConfig() {\n          return {\n            mirror: !0,\n            fit: \"cover\"\n          };\n        }\n      }, {\n        key: \"onTrackEnded\",\n        value: function onTrackEnded() {\n          var _this158 = this;\n          if ((Zh() || np()) && this._enabled && !this._isClosed && LT.duringInterruption) {\n            var e = /*#__PURE__*/function () {\n              var _ref40 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee132() {\n                return _regeneratorRuntime().wrap(function _callee132$(_context132) {\n                  while (1) switch (_context132.prev = _context132.next) {\n                    case 0:\n                      LT.off(CT.IOS_INTERRUPTION_END, e);\n                      _context132.t0 = _this158._enabled && !_this158._isClosed;\n                      if (!_context132.t0) {\n                        _context132.next = 8;\n                        break;\n                      }\n                      NE.debug(\"[\".concat(_this158.getTrackId(), \"] try capture camera media device for interrupted iOS device.\"));\n                      _context132.next = 6;\n                      return _this158.setEnabled(!1);\n                    case 6:\n                      _context132.next = 8;\n                      return _this158.setEnabled(!0);\n                    case 8:\n                    case \"end\":\n                      return _context132.stop();\n                  }\n                }, _callee132);\n              }));\n              return function e() {\n                return _ref40.apply(this, arguments);\n              };\n            }();\n            LT.on(CT.IOS_INTERRUPTION_END, e);\n          } else NE.debug(\"[\".concat(this.getTrackId(), \"] track ended\")), this.emit(_g.TRACK_ENDED);\n        }\n      }, {\n        key: \"renewMediaStreamTrack\",\n        value: function () {\n          var _renewMediaStreamTrack3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee133(e) {\n            var t, i, _e93;\n            return _regeneratorRuntime().wrap(function _callee133$(_context133) {\n              while (1) switch (_context133.prev = _context133.next) {\n                case 0:\n                  t = e || this._constraints, i = iv.searchDeviceIdByName(this._deviceName);\n                  if (!(i && !t.deviceId && (t.deviceId = {\n                    exact: i\n                  }), this._enabled)) {\n                    _context133.next = 9;\n                    break;\n                  }\n                  _context133.next = 4;\n                  return ZT({\n                    video: t\n                  }, this.getTrackId());\n                case 4:\n                  _e93 = _context133.sent;\n                  this._constraints = t;\n                  _context133.next = 8;\n                  return this._updateOriginMediaStreamTrack(_e93.getVideoTracks()[0], !0);\n                case 8:\n                  this.updateMediaStreamTrackResolution();\n                case 9:\n                case \"end\":\n                  return _context133.stop();\n              }\n            }, _callee133, this);\n          }));\n          function renewMediaStreamTrack(_x203) {\n            return _renewMediaStreamTrack3.apply(this, arguments);\n          }\n          return renewMediaStreamTrack;\n        }()\n      }, {\n        key: \"close\",\n        value: function close() {\n          _get(_getPrototypeOf(lw.prototype), \"close\", this).call(this), LT.off(CT.IOS_15_INTERRUPTION_END, this.tryResumeVideoForIOS15WeChat), LT.off(CT.IOS_INTERRUPTION_END, this.tryResumeVideoForIOS15WeChat);\n        }\n      }, {\n        key: \"bindProcessorContextEvents\",\n        value: function bindProcessorContextEvents() {\n          var _this159 = this;\n          this.processorContext.on(Dg.REQUEST_UPDATE_CONSTRAINTS, /*#__PURE__*/function () {\n            var _ref41 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee134(e, t, i) {\n              var _i57;\n              return _regeneratorRuntime().wrap(function _callee134$(_context134) {\n                while (1) switch (_context134.prev = _context134.next) {\n                  case 0:\n                    _context134.prev = 0;\n                    _i57 = Object.assign.apply(Object, [{}, _this159._originalConstraints].concat(_toConsumableArray(e)));\n                    _context134.next = 4;\n                    return _this159.renewMediaStreamTrack(_i57);\n                  case 4:\n                    t();\n                    _context134.next = 10;\n                    break;\n                  case 7:\n                    _context134.prev = 7;\n                    _context134.t0 = _context134[\"catch\"](0);\n                    i(_context134.t0);\n                  case 10:\n                  case \"end\":\n                    return _context134.stop();\n                }\n              }, _callee134, null, [[0, 7]]);\n            }));\n            return function (_x204, _x205, _x206) {\n              return _ref41.apply(this, arguments);\n            };\n          }()), this.processorContext.on(Dg.REQUEST_CONSTRAINTS, /*#__PURE__*/function () {\n            var _ref42 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee135(e) {\n              return _regeneratorRuntime().wrap(function _callee135$(_context135) {\n                while (1) switch (_context135.prev = _context135.next) {\n                  case 0:\n                    e(_this159._originMediaStreamTrack.getSettings());\n                  case 1:\n                  case \"end\":\n                    return _context135.stop();\n                }\n              }, _callee135);\n            }));\n            return function (_x207) {\n              return _ref42.apply(this, arguments);\n            };\n          }());\n        }\n      }]);\n      return lw;\n    }(Ew)).prototype, \"setDevice\", [rw, nw], Object.getOwnPropertyDescriptor(lw.prototype, \"setDevice\"), lw.prototype), ZS(lw.prototype, \"setEnabled\", [ow, sw, aw], Object.getOwnPropertyDescriptor(lw.prototype, \"setEnabled\"), lw.prototype), ZS(lw.prototype, \"setEncoderConfiguration\", [cw, dw], Object.getOwnPropertyDescriptor(lw.prototype, \"setEncoderConfiguration\"), lw.prototype), ZS(lw.prototype, \"close\", [uw], Object.getOwnPropertyDescriptor(lw.prototype, \"close\"), lw.prototype), lw);\n  var mw = /*#__PURE__*/function () {\n    _createClass(mw, [{\n      key: \"hasVideo\",\n      get: function get() {\n        return this._video_enabled_ && !this._video_muted_ && this._video_added_;\n      }\n    }, {\n      key: \"hasAudio\",\n      get: function get() {\n        return this._audio_enabled_ && !this._audio_muted_ && this._audio_added_;\n      }\n    }, {\n      key: \"audioTrack\",\n      get: function get() {\n        if (this.hasAudio) return this._audioTrack;\n      }\n    }, {\n      key: \"videoTrack\",\n      get: function get() {\n        if (this.hasVideo) return this._videoTrack;\n      }\n    }]);\n    function mw(e, t) {\n      _classCallCheck(this, mw);\n      mp(this, \"uid\", void 0), mp(this, \"_uintid\", void 0), mp(this, \"_trust_in_room_\", !0), mp(this, \"_trust_audio_enabled_state_\", !0), mp(this, \"_trust_video_enabled_state_\", !0), mp(this, \"_trust_audio_mute_state_\", !0), mp(this, \"_trust_video_mute_state_\", !0), mp(this, \"_audio_muted_\", !1), mp(this, \"_video_muted_\", !1), mp(this, \"_audio_enabled_\", !0), mp(this, \"_video_enabled_\", !0), mp(this, \"_audio_added_\", !1), mp(this, \"_video_added_\", !1), mp(this, \"_trust_video_stream_added_state_\", !0), mp(this, \"_trust_audio_stream_added_state_\", !0), mp(this, \"_audioTrack\", void 0), mp(this, \"_videoTrack\", void 0), mp(this, \"_audioSSRC\", void 0), mp(this, \"_videoSSRC\", void 0), mp(this, \"_audioOrtc\", void 0), mp(this, \"_videoOrtc\", void 0), mp(this, \"_cname\", void 0), mp(this, \"_rtxSsrcId\", void 0), this.uid = e, this._uintid = t;\n    }\n    return mw;\n  }();\n  var gw = yl,\n    Sw = Sd,\n    Tw = Od;\n  Ri({\n    target: \"Promise\",\n    stat: !0\n  }, {\n    try: function _try(e) {\n      var t = Sw.f(this),\n        i = Tw(e);\n      return (i.error ? t.reject : t.resolve)(i.value), t.promise;\n    }\n  });\n  var vw = gw,\n    Rw = Ri,\n    Iw = h,\n    yw = i,\n    Cw = Gg,\n    Aw = q,\n    Ow = je,\n    bw = wi,\n    ww = nf,\n    Nw = zg,\n    Dw = DS,\n    Pw = ae,\n    Lw = nt(\"isConcatSpreadable\"),\n    kw = 9007199254740991,\n    Mw = \"Maximum allowed index exceeded\",\n    Uw = Iw.TypeError,\n    xw = Pw >= 51 || !yw(function () {\n      var e = [];\n      return e[Lw] = !1, e.concat()[0] !== e;\n    }),\n    Vw = Dw(\"concat\"),\n    jw = function jw(e) {\n      if (!Aw(e)) return !1;\n      var t = e[Lw];\n      return void 0 !== t ? !!t : Cw(e);\n    };\n  Rw({\n    target: \"Array\",\n    proto: !0,\n    forced: !xw || !Vw\n  }, {\n    concat: function concat(e) {\n      var t,\n        i,\n        r,\n        n,\n        o,\n        s = Ow(this),\n        a = Nw(s, 0),\n        c = 0;\n      for (t = -1, r = arguments.length; t < r; t++) if (jw(o = -1 === t ? s : arguments[t])) {\n        if (c + (n = bw(o)) > kw) throw Uw(Mw);\n        for (i = 0; i < n; i++, c++) i in o && ww(a, c, o[i]);\n      } else {\n        if (c >= kw) throw Uw(Mw);\n        ww(a, c++, o);\n      }\n      return a.length = c, a;\n    }\n  });\n  var Fw = {},\n    Bw = k,\n    Gw = K,\n    Ww = Dr.f,\n    Hw = uf,\n    Kw = \"object\" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];\n  Fw.f = function (e) {\n    return Kw && \"Window\" == Bw(e) ? function (e) {\n      try {\n        return Ww(e);\n      } catch (e) {\n        return Hw(Kw);\n      }\n    }(e) : Ww(Gw(e));\n  };\n  var Yw = {},\n    qw = nt;\n  Yw.f = qw;\n  var Jw = J,\n    Xw = Ge,\n    zw = Yw,\n    Qw = Ht.f,\n    Zw = function Zw(e) {\n      var t = Jw.Symbol || (Jw.Symbol = {});\n      Xw(t, e) || Qw(t, e, {\n        value: zw.f(e)\n      });\n    },\n    $w = Ri,\n    eN = h,\n    tN = $,\n    iN = m,\n    rN = I,\n    nN = d,\n    oN = T,\n    sN = ue,\n    aN = i,\n    cN = Ge,\n    dN = Gg,\n    uN = g,\n    lN = q,\n    hN = u,\n    pN = me,\n    _N = zt,\n    EN = je,\n    fN = K,\n    mN = Et,\n    gN = Lo,\n    SN = N,\n    TN = Pn,\n    vN = hn,\n    RN = Dr,\n    IN = Fw,\n    yN = Qr,\n    CN = S,\n    AN = Ht,\n    ON = dn,\n    bN = y,\n    wN = Sc,\n    NN = Fs,\n    DN = Ne.exports,\n    PN = Br,\n    LN = qe,\n    kN = nt,\n    MN = Yw,\n    UN = Zw,\n    xN = na,\n    VN = Ps,\n    jN = nS.forEach,\n    FN = hr(\"hidden\"),\n    BN = \"Symbol\",\n    GN = kN(\"toPrimitive\"),\n    WN = VN.set,\n    HN = VN.getterFor(BN),\n    KN = Object.prototype,\n    YN = eN.Symbol,\n    qN = YN && YN.prototype,\n    JN = eN.TypeError,\n    XN = eN.QObject,\n    zN = tN(\"JSON\", \"stringify\"),\n    QN = CN.f,\n    ZN = AN.f,\n    $N = IN.f,\n    eD = bN.f,\n    tD = nN([].push),\n    iD = DN(\"symbols\"),\n    rD = DN(\"op-symbols\"),\n    nD = DN(\"string-to-symbol-registry\"),\n    oD = DN(\"symbol-to-string-registry\"),\n    sD = DN(\"wks\"),\n    aD = !XN || !XN.prototype || !XN.prototype.findChild,\n    cD = oN && aN(function () {\n      return 7 != TN(ZN({}, \"a\", {\n        get: function get() {\n          return ZN(this, \"a\", {\n            value: 7\n          }).a;\n        }\n      })).a;\n    }) ? function (e, t, i) {\n      var r = QN(KN, t);\n      r && delete KN[t], ZN(e, t, i), r && e !== KN && ZN(KN, t, r);\n    } : ZN,\n    dD = function dD(e, t) {\n      var i = iD[e] = TN(qN);\n      return WN(i, {\n        type: BN,\n        tag: e,\n        description: t\n      }), oN || (i.description = t), i;\n    },\n    uD = function uD(e, t, i) {\n      e === KN && uD(rD, t, i), _N(e);\n      var r = mN(t);\n      return _N(i), cN(iD, r) ? (i.enumerable ? (cN(e, FN) && e[FN][r] && (e[FN][r] = !1), i = TN(i, {\n        enumerable: SN(0, !1)\n      })) : (cN(e, FN) || ZN(e, FN, SN(1, {})), e[FN][r] = !0), cD(e, r, i)) : ZN(e, r, i);\n    },\n    lD = function lD(e, t) {\n      _N(e);\n      var i = fN(t),\n        r = vN(i).concat(ED(i));\n      return jN(r, function (t) {\n        oN && !rN(hD, i, t) || uD(e, t, i[t]);\n      }), e;\n    },\n    hD = function hD(e) {\n      var t = mN(e),\n        i = rN(eD, this, t);\n      return !(this === KN && cN(iD, t) && !cN(rD, t)) && (!(i || !cN(this, t) || !cN(iD, t) || cN(this, FN) && this[FN][t]) || i);\n    },\n    pD = function pD(e, t) {\n      var i = fN(e),\n        r = mN(t);\n      if (i !== KN || !cN(iD, r) || cN(rD, r)) {\n        var n = QN(i, r);\n        return !n || !cN(iD, r) || cN(i, FN) && i[FN][r] || (n.enumerable = !0), n;\n      }\n    },\n    _D = function _D(e) {\n      var t = $N(fN(e)),\n        i = [];\n      return jN(t, function (e) {\n        cN(iD, e) || cN(PN, e) || tD(i, e);\n      }), i;\n    },\n    ED = function ED(e) {\n      var t = e === KN,\n        i = $N(t ? rD : fN(e)),\n        r = [];\n      return jN(i, function (e) {\n        !cN(iD, e) || t && !cN(KN, e) || tD(r, iD[e]);\n      }), r;\n    };\n  (sN || (NN(qN = (YN = function YN() {\n    if (hN(qN, this)) throw JN(\"Symbol is not a constructor\");\n    var e = arguments.length && void 0 !== arguments[0] ? gN(arguments[0]) : void 0,\n      t = LN(e),\n      i = function i(e) {\n        this === KN && rN(i, rD, e), cN(this, FN) && cN(this[FN], t) && (this[FN][t] = !1), cD(this, t, SN(1, e));\n      };\n    return oN && aD && cD(KN, t, {\n      configurable: !0,\n      set: i\n    }), dD(t, e);\n  }).prototype, \"toString\", function () {\n    return HN(this).tag;\n  }), NN(YN, \"withoutSetter\", function (e) {\n    return dD(LN(e), e);\n  }), bN.f = hD, AN.f = uD, ON.f = lD, CN.f = pD, RN.f = IN.f = _D, yN.f = ED, MN.f = function (e) {\n    return dD(kN(e), e);\n  }, oN && ZN(qN, \"description\", {\n    configurable: !0,\n    get: function get() {\n      return HN(this).description;\n    }\n  })), $w({\n    global: !0,\n    wrap: !0,\n    forced: !sN,\n    sham: !sN\n  }, {\n    Symbol: YN\n  }), jN(vN(sD), function (e) {\n    UN(e);\n  }), $w({\n    target: BN,\n    stat: !0,\n    forced: !sN\n  }, {\n    for: function _for(e) {\n      var t = gN(e);\n      if (cN(nD, t)) return nD[t];\n      var i = YN(t);\n      return nD[t] = i, oD[i] = t, i;\n    },\n    keyFor: function keyFor(e) {\n      if (!pN(e)) throw JN(e + \" is not a symbol\");\n      if (cN(oD, e)) return oD[e];\n    },\n    useSetter: function useSetter() {\n      aD = !0;\n    },\n    useSimple: function useSimple() {\n      aD = !1;\n    }\n  }), $w({\n    target: \"Object\",\n    stat: !0,\n    forced: !sN,\n    sham: !oN\n  }, {\n    create: function create(e, t) {\n      return void 0 === t ? TN(e) : lD(TN(e), t);\n    },\n    defineProperty: uD,\n    defineProperties: lD,\n    getOwnPropertyDescriptor: pD\n  }), $w({\n    target: \"Object\",\n    stat: !0,\n    forced: !sN\n  }, {\n    getOwnPropertyNames: _D,\n    getOwnPropertySymbols: ED\n  }), $w({\n    target: \"Object\",\n    stat: !0,\n    forced: aN(function () {\n      yN.f(1);\n    })\n  }, {\n    getOwnPropertySymbols: function getOwnPropertySymbols(e) {\n      return yN.f(EN(e));\n    }\n  }), zN) && $w({\n    target: \"JSON\",\n    stat: !0,\n    forced: !sN || aN(function () {\n      var e = YN();\n      return \"[null]\" != zN([e]) || \"{}\" != zN({\n        a: e\n      }) || \"{}\" != zN(Object(e));\n    })\n  }, {\n    stringify: function stringify(e, t, i) {\n      var r = wN(arguments),\n        n = t;\n      if ((lN(t) || void 0 !== e) && !pN(e)) return dN(t) || (t = function t(e, _t110) {\n        if (uN(n) && (_t110 = rN(n, this, e, _t110)), !pN(_t110)) return _t110;\n      }), r[1] = t, iN(zN, null, r);\n    }\n  });\n  if (!qN[GN]) {\n    var fD = qN.valueOf;\n    NN(qN, GN, function (e) {\n      return rN(fD, this);\n    });\n  }\n  xN(YN, BN), PN[FN] = !0, Zw(\"asyncIterator\"), Zw(\"hasInstance\"), Zw(\"isConcatSpreadable\"), Zw(\"iterator\"), Zw(\"match\"), Zw(\"matchAll\"), Zw(\"replace\"), Zw(\"search\"), Zw(\"species\"), Zw(\"split\"), Zw(\"toPrimitive\"), Zw(\"toStringTag\"), Zw(\"unscopables\"), na(h.JSON, \"JSON\", !0);\n  var mD = J.Symbol;\n  Zw(\"asyncDispose\"), Zw(\"dispose\"), Zw(\"matcher\"), Zw(\"metadata\"), Zw(\"observable\"), Zw(\"patternMatch\"), Zw(\"replaceAll\");\n  var gD = mD,\n    SD = Yw.f(\"asyncIterator\"),\n    TD = SD;\n  function vD(e) {\n    this.wrapped = e;\n  }\n  function RD(e) {\n    var t, i;\n    function r(t, i) {\n      try {\n        var o = e[t](i),\n          s = o.value,\n          a = s instanceof vD;\n        vw.resolve(a ? s.wrapped : s).then(function (e) {\n          a ? r(\"return\" === t ? \"return\" : \"next\", e) : n(o.done ? \"return\" : \"normal\", e);\n        }, function (e) {\n          r(\"throw\", e);\n        });\n      } catch (e) {\n        n(\"throw\", e);\n      }\n    }\n    function n(e, n) {\n      switch (e) {\n        case \"return\":\n          t.resolve({\n            value: n,\n            done: !0\n          });\n          break;\n        case \"throw\":\n          t.reject(n);\n          break;\n        default:\n          t.resolve({\n            value: n,\n            done: !1\n          });\n      }\n      (t = t.next) ? r(t.key, t.arg) : i = null;\n    }\n    this._invoke = function (e, n) {\n      return new vw(function (o, s) {\n        var a = {\n          key: e,\n          arg: n,\n          resolve: o,\n          reject: s,\n          next: null\n        };\n        i ? i = i.next = a : (t = i = a, r(e, n));\n      });\n    }, \"function\" != typeof e.return && (this.return = void 0);\n  }\n  function ID(e) {\n    return function () {\n      return new RD(e.apply(this, arguments));\n    };\n  }\n  function yD(e) {\n    return new vD(e);\n  }\n  RD.prototype[\"function\" == typeof gD && TD || \"@@asyncIterator\"] = function () {\n    return this;\n  }, RD.prototype.next = function (e) {\n    return this._invoke(\"next\", e);\n  }, RD.prototype.throw = function (e) {\n    return this._invoke(\"throw\", e);\n  }, RD.prototype.return = function (e) {\n    return this._invoke(\"return\", e);\n  };\n  var CD = Yw.f(\"iterator\");\n  function AD(e, t) {\n    var i = {},\n      r = !1;\n    function n(i, n) {\n      return r = !0, n = new vw(function (t) {\n        t(e[i](n));\n      }), {\n        done: !1,\n        value: t(n)\n      };\n    }\n    return i[void 0 !== gD && CD || \"@@iterator\"] = function () {\n      return this;\n    }, i.next = function (e) {\n      return r ? (r = !1, e) : n(\"next\", e);\n    }, \"function\" == typeof e.throw && (i.throw = function (e) {\n      if (r) throw r = !1, e;\n      return n(\"throw\", e);\n    }), \"function\" == typeof e.return && (i.return = function (e) {\n      return r ? (r = !1, e) : n(\"return\", e);\n    }), i;\n  }\n  var OD = SD,\n    bD = {\n      exports: {}\n    };\n  function wD(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function ND(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? wD(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : wD(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  function DD(e, t, i, r, n, o, s) {\n    var a = [],\n      c = [],\n      d = [],\n      u = [],\n      l = !1,\n      h = !1;\n    if (bD.exports.parse(e).mediaDescriptions.forEach(function (e) {\n      s && s !== e.attributes.direction || (\"video\" !== e.media.mediaType || l || (c = e.attributes.payloads, u = e.attributes.extmaps, l = !0), \"audio\" !== e.media.mediaType || h || (a = e.attributes.payloads, d = e.attributes.extmaps, h = !0));\n    }), !u || 0 === c.length) throw new Error(\"Cannot get video capabilities from SDP.\");\n    if (!d || 0 === a.length) throw new Error(\"Cannot get audio capabilities from SDP.\");\n    return c.forEach(function (e) {\n      var t;\n      null !== (t = e.rtpMap) && void 0 !== t && t.clockRate && (e.rtpMap.clockRate = parseInt(e.rtpMap.clockRate));\n    }), a.forEach(function (e) {\n      var t;\n      null !== (t = e.rtpMap) && void 0 !== t && t.clockRate && (e.rtpMap.clockRate = parseInt(e.rtpMap.clockRate));\n    }), t && (a = a.filter(function (e) {\n      var t;\n      return \"rtx\" !== (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase());\n    }), c = c.filter(function (e) {\n      var t;\n      return \"rtx\" !== (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase());\n    })), i && (c = c.filter(function (e) {\n      var t;\n      return !/(red)|(ulpfec)|(flexfec)/i.test((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName) || \"\");\n    })), r && (a = a.filter(function (e) {\n      var t;\n      return !/(red)|(ulpfec)|(flexfec)/i.test((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName) || \"\");\n    })), n && (null == n ? void 0 : n.length) > 0 && (a = a.filter(function (e) {\n      var t;\n      return n.includes((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\");\n    })), o && (null == o ? void 0 : o.length) > 0 && (c = c.filter(function (e) {\n      var t;\n      return o.includes((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\");\n    })), {\n      audioCodecs: a,\n      videoCodecs: c,\n      audioExtensions: d,\n      videoExtensions: u\n    };\n  }\n  function PD(e) {\n    var t = bD.exports.parse(e);\n    var i, r;\n    var _iterator10 = _createForOfIteratorHelper(t.mediaDescriptions),\n      _step10;\n    try {\n      for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n        var _e94 = _step10.value;\n        if (!i) {\n          var _t111 = _e94.attributes.iceUfrag,\n            _r33 = _e94.attributes.icePwd;\n          if (!_t111 || !_r33) throw new Error(\"Cannot get iceUfrag or icePwd from SDP.\");\n          i = {\n            iceUfrag: _t111,\n            icePwd: _r33\n          };\n        }\n        if (!r) {\n          var _t112 = _e94.attributes.fingerprints;\n          _t112.length > 0 && (r = {\n            fingerprints: _t112\n          });\n        }\n      }\n    } catch (err) {\n      _iterator10.e(err);\n    } finally {\n      _iterator10.f();\n    }\n    if (!r && t.attributes.fingerprints.length > 0 && (r = {\n      fingerprints: t.attributes.fingerprints\n    }), !r || !i) throw new Error(\"Cannot get iceParameters or dtlsParameters from SDP.\");\n    return {\n      iceParameters: i,\n      dtlsParameters: r\n    };\n  }\n  function LD(e, t) {\n    var i = [],\n      r = e.attributes.ssrcGroups.filter(function (e) {\n        return \"FID\" === e.semantic;\n      }),\n      n = e.attributes.ssrcGroups.find(function (e) {\n        return \"SIM\" === e.semantic;\n      }),\n      o = e.attributes.ssrcs;\n    if (n) n.ssrcIds.forEach(function (e) {\n      var n;\n      var o = null === (n = r.find(function (t) {\n        return t.ssrcIds[0] === e;\n      })) || void 0 === n ? void 0 : n.ssrcIds[1];\n      i.push({\n        ssrcId: e,\n        rtx: t ? o : void 0\n      });\n    });else if (r.length > 0) {\n      var _e95 = r[0].ssrcIds[0],\n        _n26 = r[0].ssrcIds[1];\n      i.push({\n        ssrcId: _e95,\n        rtx: t ? _n26 : void 0\n      });\n    } else {\n      if (0 === o.length) throw new Error(\"No ssrcs found on local media description.\");\n      i.push({\n        ssrcId: o[0].ssrcId\n      });\n    }\n    return i;\n  }\n  function kD(e, t) {\n    var i = e.cname;\n    var r;\n    t && t.ip && \"number\" == typeof t.port ? (r = [{\n      foundation: \"udpcandidate\",\n      componentId: \"1\",\n      transport: \"udp\",\n      priority: \"2103266323\",\n      connectionAddress: t.ip,\n      port: t.port.toString(),\n      type: \"host\",\n      extension: {}\n    }], NE.debug(\"Using remote candidate from AP \".concat(t.ip, \":\").concat(t.port)), t.ip6 && (r.push({\n      foundation: \"udpcandidate\",\n      componentId: \"1\",\n      transport: \"udp\",\n      priority: \"2103266323\",\n      connectionAddress: t.ip6,\n      port: t.port.toString(),\n      type: \"host\",\n      extension: {}\n    }), NE.debug(\"Using IPV6 remote candidate from AP \".concat(t.ip6, \":\").concat(t.port)))) : r = e.iceParameters.candidates.map(function (e) {\n      return {\n        foundation: e.foundation,\n        componentId: \"1\",\n        transport: e.protocol,\n        priority: e.priority.toString(),\n        connectionAddress: e.ip,\n        port: e.port.toString(),\n        type: e.type,\n        extension: {}\n      };\n    });\n    var n = {\n        fingerprints: e.dtlsParameters.fingerprints.map(function (e) {\n          return {\n            hashFunction: e.algorithm,\n            fingerprint: e.fingerprint\n          };\n        })\n      },\n      o = {\n        iceUfrag: e.iceParameters.iceUfrag,\n        icePwd: e.iceParameters.icePwd\n      };\n    var s;\n    switch (e.dtlsParameters.role) {\n      case \"server\":\n        s = \"passive\";\n        break;\n      case \"client\":\n        s = \"active\";\n        break;\n      case \"auto\":\n        s = \"actpass\";\n    }\n    return {\n      dtlsParameters: n,\n      iceParameters: o,\n      candidates: r,\n      rtpCapabilities: HD(e.rtpCapabilities),\n      setup: s,\n      cname: i\n    };\n  }\n  function MD(e, t, i) {\n    var r = [],\n      n = [];\n    return e.forEach(function (e) {\n      var o = e.ssrcId,\n        s = e.rtx;\n      var a = MR(8, \"track-\"),\n        c = {\n          ssrcId: o,\n          attributes: ND({\n            label: a,\n            mslabel: i = i || MR(10, \"\"),\n            msid: \"\".concat(i, \" \").concat(a)\n          }, t && {\n            cname: t\n          })\n        };\n      if (r.push(c), void 0 !== s) {\n        var _e96 = {\n          ssrcId: s,\n          attributes: ND({\n            label: a,\n            mslabel: i,\n            msid: \"\".concat(i, \" \").concat(a)\n          }, t && {\n            cname: t\n          })\n        };\n        r.push(_e96), n.push({\n          semantic: \"FID\",\n          ssrcIds: [o, s]\n        });\n      }\n    }), e.length > 1 && n.push({\n      semantic: \"SIM\",\n      ssrcIds: e.map(function (e) {\n        var t = e.ssrcId;\n        return t;\n      })\n    }), {\n      ssrcs: r,\n      ssrcGroups: n\n    };\n  }\n  function UD(e, t) {\n    t instanceof aR && e.attributes.payloads.forEach(function (e) {\n      var i;\n      var r = null === (i = e.rtpMap) || void 0 === i ? void 0 : i.encodingName.toLowerCase();\n      if (!r || -1 === [\"opus\", \"pcmu\", \"pcma\", \"g722\"].indexOf(r)) return;\n      e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters.minptime = \"10\", e.fmtp.parameters.useinbandfec = \"1\";\n      var n = t._encoderConfig;\n      n && \"pcmu\" !== r && \"pcma\" !== r && \"g722\" !== r && (n.bitrate && !Qh() && (e.fmtp.parameters.maxaveragebitrate = \"\".concat(Math.floor(1e3 * n.bitrate))), n.sampleRate && (e.fmtp.parameters.maxplaybackrate = \"\".concat(n.sampleRate), e.fmtp.parameters[\"sprop-maxcapturerate\"] = \"\".concat(n.sampleRate)), n.stereo && (e.fmtp.parameters.stereo = \"1\", e.fmtp.parameters[\"sprop-stereo\"] = \"1\"));\n    });\n  }\n  function xD(e) {\n    var t = e.attributes.unrecognized.findIndex(function (e) {\n      return \"x-google-flag\" === e.attField && \"conference\" === e.attValue;\n    });\n    -1 !== t && e.attributes.unrecognized.splice(t, 1);\n  }\n  function VD(e, t) {\n    if (!(t instanceof Ew && t._encoderConfig && -1 === t._hints.indexOf(lg.SCREEN_TRACK))) return;\n    var i = t._encoderConfig;\n    jg().supportMinBitrate && i.bitrateMin && e.attributes.payloads.forEach(function (e) {\n      var t;\n      [\"h264\", \"vp8\", \"vp9\", \"av1\"].includes((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\") && (e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters[\"x-google-min-bitrate\"] = \"\".concat(i.bitrateMin));\n    }), jg().supportMinBitrate && !t._hints.includes(lg.LOW_STREAM) && i.bitrateMax && e.attributes.payloads.forEach(function (e) {\n      var t;\n      [\"h264\", \"vp8\", \"vp9\", \"av1\"].includes((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\") && (e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters[\"x-google-start-bitrate\"] = \"\".concat(HE(\"X_GOOGLE_START_BITRATE\") || Math.floor(i.bitrateMax)));\n    });\n  }\n  function jD(e) {\n    if (\"video\" !== e.media.mediaType) return;\n    var t = Bh();\n    if (t.name !== xh.SAFARI && t.os !== Uh.IOS) return;\n    var i = e.attributes.extmaps.findIndex(function (e) {\n      return /video-orientation/g.test(e.extensionName);\n    });\n    -1 !== i && e.attributes.extmaps.splice(i, 1);\n  }\n  function FD(e, t, i) {\n    if (!t) return;\n    var r, n;\n    if (\"video\" === e.media.mediaType ? (r = i.videoExtensions, n = i.videoCodecs) : (r = i.audioExtensions, n = i.audioCodecs), !0 === t.tcc) {\n      var _t113 = r.find(function (e) {\n        return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n      });\n      if (_t113) {\n        e.attributes.extmaps.find(function (e) {\n          return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n        }) || e.attributes.extmaps.push({\n          entry: _t113.entry,\n          extensionName: \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\"\n        });\n        (function (e, t) {\n          return t.filter(function (t) {\n            return !!e.find(function (e) {\n              return e.payloadType === t.payloadType && !!e.rtcpFeedbacks.find(function (e) {\n                return \"transport-cc\" === e.type;\n              });\n            });\n          });\n        })(n, e.attributes.payloads).forEach(function (e) {\n          e.rtcpFeedbacks.find(function (e) {\n            return \"transport-cc\" === e.type;\n          }) || e.rtcpFeedbacks.push({\n            type: \"transport-cc\"\n          });\n        });\n      }\n    } else if (!1 === t.tcc) {\n      var _t114 = e.attributes.extmaps.findIndex(function (e) {\n        return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n      });\n      -1 !== _t114 && e.attributes.extmaps.splice(_t114, 1), e.attributes.payloads.forEach(function (e) {\n        var t = e.rtcpFeedbacks.findIndex(function (e) {\n          return \"transport-cc\" === e.type;\n        });\n        -1 !== t && e.rtcpFeedbacks.splice(t, 1);\n      });\n    }\n    if (!0 === t.remb) {\n      var _t115 = r.find(function (e) {\n        return \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" === e.extensionName;\n      });\n      if (_t115) {\n        e.attributes.extmaps.find(function (e) {\n          return \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" === e.extensionName;\n        }) || e.attributes.extmaps.push({\n          entry: _t115.entry,\n          extensionName: \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"\n        });\n        (function (e, t) {\n          return t.filter(function (t) {\n            return !!e.find(function (e) {\n              return e.payloadType === t.payloadType && !!e.rtcpFeedbacks.find(function (e) {\n                return \"goog-remb\" === e.type;\n              });\n            });\n          });\n        })(n, e.attributes.payloads).forEach(function (e) {\n          e.rtcpFeedbacks.find(function (e) {\n            return \"goog-remb\" === e.type;\n          }) || e.rtcpFeedbacks.push({\n            type: \"goog-remb\"\n          });\n        });\n      }\n    } else if (!1 === t.remb) {\n      var _t116 = e.attributes.extmaps.findIndex(function (e) {\n        return \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" === e.extensionName;\n      });\n      -1 !== _t116 && e.attributes.extmaps.splice(_t116, 1), e.attributes.payloads.forEach(function (e) {\n        var t = e.rtcpFeedbacks.findIndex(function (e) {\n          return \"goog-remb\" === e.type;\n        });\n        -1 !== t && e.rtcpFeedbacks.splice(t, 1);\n      });\n    }\n  }\n  function BD(e, t, i) {\n    if (Qh()) return;\n    if (\"video\" !== e.media.mediaType) return;\n    if (!(t instanceof Ew)) return;\n    if (\"vp9\" !== i && \"vp8\" !== i) return;\n    if (\"vp8\" === i && !HE(\"SIMULCAST\")) return;\n    if (void 0 === t._scalabiltyMode || t._scalabiltyMode.numSpatialLayers <= 1) return;\n    var r = \"vp8\" === i ? 2 : t._scalabiltyMode.numSpatialLayers,\n      n = e.attributes.ssrcs[0],\n      o = e.attributes.ssrcGroups.find(function (e) {\n        return \"FID\" === e.semantic && e.ssrcIds[0] === n.ssrcId;\n      }),\n      s = {\n        semantic: \"SIM\",\n        ssrcIds: [n.ssrcId]\n      };\n    for (var _t117 = 1; _t117 < r; _t117++) e.attributes.ssrcs.push({\n      ssrcId: n.ssrcId + _t117,\n      attributes: qR(n.attributes)\n    }), s.ssrcIds.push(n.ssrcId + _t117), o && (e.attributes.ssrcs.push({\n      ssrcId: o.ssrcIds[1] + _t117,\n      attributes: qR(n.attributes)\n    }), e.attributes.ssrcGroups.push({\n      semantic: \"FID\",\n      ssrcIds: [n.ssrcId + _t117, o.ssrcIds[1] + _t117]\n    }));\n    e.attributes.ssrcGroups.unshift(s);\n  }\n  function GD(_x208, _x209, _x210, _x211, _x212) {\n    return _GD.apply(this, arguments);\n  }\n  function _GD() {\n    _GD = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee349(e, t, i, r, n) {\n      var o, s, a, c, d, u, l, _e244, _t216, _i129;\n      return _regeneratorRuntime().wrap(function _callee349$(_context352) {\n        while (1) switch (_context352.prev = _context352.next) {\n          case 0:\n            o = new RTCPeerConnection();\n            o.addTransceiver(\"video\", {\n              direction: \"sendonly\"\n            }), o.addTransceiver(\"audio\", {\n              direction: \"sendonly\"\n            }), o.addTransceiver(\"video\", {\n              direction: \"recvonly\"\n            }), o.addTransceiver(\"audio\", {\n              direction: \"recvonly\"\n            });\n            _context352.next = 4;\n            return o.createOffer();\n          case 4:\n            s = _context352.sent.sdp;\n            a = DD(s, e, t, i, r, n, \"sendonly\");\n            c = DD(s, e, t, i, r, n, \"recvonly\");\n            d = {\n              audioCodecs: [],\n              audioExtensions: [],\n              videoCodecs: [],\n              videoExtensions: []\n            };\n            u = {\n              audioCodecs: [],\n              audioExtensions: [],\n              videoCodecs: [],\n              videoExtensions: []\n            };\n            l = {\n              audioCodecs: [],\n              audioExtensions: [],\n              videoCodecs: [],\n              videoExtensions: []\n            };\n            if (WD(a, c, \"videoExtensions\", d, u, l), WD(a, c, \"videoCodecs\", d, u, l), WD(a, c, \"audioExtensions\", d, u, l), WD(a, c, \"audioCodecs\", d, u, l), HE(\"RAISE_H264_BASELINE_PRIORITY\")) {\n              _e244 = l.videoCodecs.findIndex(function (e) {\n                var t, i;\n                return \"h264\" === (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLocaleLowerCase()) && \"42001f\" === (null === (i = e.fmtp) || void 0 === i ? void 0 : i.parameters[\"profile-level-id\"]);\n              });\n              if (-1 !== _e244) {\n                _t216 = l.videoCodecs.findIndex(function (e) {\n                  var t;\n                  return \"h264\" === (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLocaleLowerCase());\n                });\n                if (_t216 < _e244) {\n                  NE.debug(\"raising H264 baseline profile priority\");\n                  _i129 = l.videoCodecs[_e244];\n                  l.videoCodecs.splice(_e244, 1), l.videoCodecs.splice(_t216, 0, _i129);\n                }\n                -1 !== _t216 && (u.videoCodecs = u.videoCodecs.filter(function (e) {\n                  var t, i;\n                  return !(\"h264\" === (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLocaleLowerCase()) && \"42001f\" !== (null === (i = e.fmtp) || void 0 === i ? void 0 : i.parameters[\"profile-level-id\"]));\n                })), -1 !== _t216 && HE(\"FILTER_SEND_H264_BASELINE\") && (d.videoCodecs = d.videoCodecs.filter(function (e) {\n                  var t, i;\n                  return !(\"h264\" === (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLocaleLowerCase()) && \"42001f\" !== (null === (i = e.fmtp) || void 0 === i ? void 0 : i.parameters[\"profile-level-id\"]));\n                }));\n              }\n            }\n            try {\n              o.close();\n            } catch (e) {}\n            return _context352.abrupt(\"return\", {\n              send: d,\n              recv: u,\n              sendrecv: l\n            });\n          case 13:\n          case \"end\":\n            return _context352.stop();\n        }\n      }, _callee349);\n    }));\n    return _GD.apply(this, arguments);\n  }\n  function WD(e, t, i, r, n, o) {\n    if (\"videoExtensions\" === i || \"audioExtensions\" === i) {\n      var _s13 = [];\n      return e[i].forEach(function (e) {\n        t[i].some(function (t, i) {\n          if (e.entry === t.entry && e.extensionName === t.extensionName) return _s13.push(i), !0;\n        }) ? o[i].push(e) : r[i].push(e);\n      }), void t[i].forEach(function (e, t) {\n        -1 === _s13.indexOf(t) && n[i].push(e);\n      });\n    }\n    if (\"videoCodecs\" === i || \"audioCodecs\" === i) {\n      var _s14 = [];\n      return e[i].forEach(function (e) {\n        t[i].some(function (t, i) {\n          if (e.payloadType === t.payloadType && JSON.stringify(e) === JSON.stringify(t)) return _s14.push(i), !0;\n        }) ? o[i].push(e) : r[i].push(e);\n      }), void t[i].forEach(function (e, t) {\n        -1 === _s14.indexOf(t) && n[i].push(e);\n      });\n    }\n  }\n  function HD(e) {\n    var t = e.send,\n      i = e.recv,\n      r = e.sendrecv;\n    if (!r) {\n      if (!t || !i) throw new Error(\"cannot merge rtp capabilities because one of send or recv is empty!\");\n      return {\n        send: t,\n        recv: i\n      };\n    }\n    var n, o;\n    return t ? (n = {\n      audioCodecs: [],\n      audioExtensions: [],\n      videoCodecs: [],\n      videoExtensions: []\n    }, n.audioCodecs = [].concat(_toConsumableArray(t.audioCodecs), _toConsumableArray(r.audioCodecs)), n.videoCodecs = [].concat(_toConsumableArray(t.videoCodecs), _toConsumableArray(r.videoCodecs)), n.audioExtensions = [].concat(_toConsumableArray(t.audioExtensions), _toConsumableArray(r.audioExtensions)), n.videoExtensions = [].concat(_toConsumableArray(t.videoExtensions), _toConsumableArray(r.videoExtensions))) : n = r, i ? (o = {\n      audioCodecs: [],\n      audioExtensions: [],\n      videoCodecs: [],\n      videoExtensions: []\n    }, o.audioCodecs = [].concat(_toConsumableArray(i.audioCodecs), _toConsumableArray(r.audioCodecs)), o.videoCodecs = [].concat(_toConsumableArray(i.videoCodecs), _toConsumableArray(r.videoCodecs)), o.audioExtensions = [].concat(_toConsumableArray(i.audioExtensions), _toConsumableArray(r.audioExtensions)), o.videoExtensions = [].concat(_toConsumableArray(i.videoExtensions), _toConsumableArray(r.videoExtensions))) : o = r, {\n      send: n,\n      recv: o\n    };\n  }\n  function KD(e) {\n    if (\"audio\" !== e.media.mediaType) return;\n    e.attributes.payloads.filter(function (e) {\n      var t;\n      return \"opus\" === (null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase());\n    }).forEach(function (e) {\n      e.fmtp || (e.fmtp = {\n        parameters: {}\n      }), e.fmtp.parameters.stereo = \"1\", e.fmtp.parameters[\"sprop-stereo\"] = \"1\";\n    });\n  }\n  !function (e, t) {\n    e.exports = function () {\n      var e = {\n          8: function _(e, t, i) {\n            i.r(t), i.d(t, {\n              Parser: function Parser() {\n                return R;\n              },\n              Printer: function Printer() {\n                return O;\n              },\n              parse: function parse() {\n                return D;\n              },\n              print: function print() {\n                return P;\n              }\n            });\n            var r = \"\\n\",\n              n = \"\".concat(\"\\r\").concat(r),\n              o = \" \";\n            var s;\n            function a(e) {\n              return e >= \"0\" && e <= \"9\";\n            }\n            function c(e) {\n              return e >= \"!\" && e <= \"~\";\n            }\n            function d(e) {\n              return c(e) || e >= \"Â\" && e <= \"Ã¿\";\n            }\n            function u(e) {\n              return \"!\" === e || e >= \"#\" && e <= \"'\" || e >= \"*\" && e <= \"+\" || e >= \"-\" && e <= \".\" || e >= \"0\" && e <= \"9\" || e >= \"A\" && e <= \"Z\" || e >= \"^\" && e <= \"~\";\n            }\n            function l(e) {\n              return e >= \"1\" && e <= \"9\";\n            }\n            function h(e) {\n              return e >= \"A\" && e <= \"Z\" || e >= \"a\" && e <= \"z\";\n            }\n            function p(e) {\n              return \"d\" === e || \"h\" === e || \"m\" === e || \"s\" === e;\n            }\n            function _(e) {\n              return e > \"\u0001\" && e < \"\\t\" || e > \"\\v\" && e < \"\\f\" || e > \"\u000e\" && e < \"Ã¿\";\n            }\n            function E(e) {\n              return h(e) || a(e) || \"+\" === e || \"/\" === e;\n            }\n            function f(e) {\n              return a(e) || h(e) || \"+\" === e || \"/\" === e || \"-\" === e || \"_\" === e;\n            }\n            function m(e) {\n              return h(e) || a(e) || \"+\" === e || \"/\" === e;\n            }\n            function g(e, t) {\n              var i = Object.keys(e);\n              if (Object.getOwnPropertySymbols) {\n                var r = Object.getOwnPropertySymbols(e);\n                t && (r = r.filter(function (t) {\n                  return Object.getOwnPropertyDescriptor(e, t).enumerable;\n                })), i.push.apply(i, r);\n              }\n              return i;\n            }\n            function S(e) {\n              for (var t = 1; t < arguments.length; t++) {\n                var i = null != arguments[t] ? arguments[t] : {};\n                t % 2 ? g(Object(i), !0).forEach(function (t) {\n                  T(e, t, i[t]);\n                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : g(Object(i)).forEach(function (t) {\n                  Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n                });\n              }\n              return e;\n            }\n            function T(e, t, i) {\n              return t in e ? Object.defineProperty(e, t, {\n                value: i,\n                enumerable: !0,\n                configurable: !0,\n                writable: !0\n              }) : e[t] = i, e;\n            }\n            !function (e) {\n              e.VERSION = \"v\", e.ORIGIN = \"o\", e.SESSION_NAME = \"s\", e.INFORMATION = \"i\", e.URI = \"u\", e.EMAIL = \"e\", e.PHONE = \"p\", e.CONNECTION = \"c\", e.BANDWIDTH = \"b\", e.TIME = \"t\", e.REPEAT = \"r\", e.ZONE_ADJUSTMENTS = \"z\", e.KEY = \"k\", e.ATTRIBUTE = \"a\", e.MEDIA = \"m\";\n            }(s || (s = {}));\n            var v = /*#__PURE__*/function () {\n              function v() {\n                _classCallCheck(this, v);\n              }\n              _createClass(v, [{\n                key: \"consumeText\",\n                value: function consumeText(e, t) {\n                  var i = t;\n                  for (; i < e.length;) {\n                    var _t118 = e[i];\n                    if (\"\\0\" === _t118 || \"\\r\" === _t118 || _t118 === r) break;\n                    i += 1;\n                  }\n                  if (i - t == 0) throw new Error(\"Invalid text, at \".concat(e));\n                  return i;\n                }\n              }, {\n                key: \"consumeUnicastAddress\",\n                value: function consumeUnicastAddress(e, t, i) {\n                  return this.consumeTill(e, t, o);\n                }\n              }, {\n                key: \"consumeOneOrMore\",\n                value: function consumeOneOrMore(e, t, i) {\n                  var r = t;\n                  for (; i(e[r]);) r++;\n                  if (r - t == 0) throw new Error(\"Invalid rule at \".concat(t, \".\"));\n                  return r;\n                }\n              }, {\n                key: \"consumeSpace\",\n                value: function consumeSpace(e, t) {\n                  if (e[t] === o) return t + 1;\n                  throw new Error(\"Invalid space at \".concat(t, \".\"));\n                }\n              }, {\n                key: \"consumeIP4Address\",\n                value: function consumeIP4Address(e, t) {\n                  var i = t;\n                  for (var _t119 = 0; _t119 < 4; _t119++) if (i = this.consumeDecimalUChar(e, i), 3 !== _t119) {\n                    if (\".\" !== e[i]) throw new Error(\"Invalid IP4 address.\");\n                    i++;\n                  }\n                  return i;\n                }\n              }, {\n                key: \"consumeDecimalUChar\",\n                value: function consumeDecimalUChar(e, t) {\n                  var i = t;\n                  for (var _t120 = 0; _t120 < 3 && a(e[i]); _t120++, i++);\n                  if (i - t == 0) throw new Error(\"Invalid decimal uchar.\");\n                  var r = parseInt(e.slice(t, i));\n                  if (r >= 0 && r <= 255) return i;\n                  throw new Error(\"Invalid decimal uchar\");\n                }\n              }, {\n                key: \"consumeIP6Address\",\n                value: function consumeIP6Address(e, t) {\n                  var i = this.consumeHexpart(e, t);\n                  return \":\" === e[i] ? (i += 1, i = this.consumeIP4Address(e, i), i) : i;\n                }\n              }, {\n                key: \"consumeHexpart\",\n                value: function consumeHexpart(e, t) {\n                  var i = t;\n                  if (\":\" === e[i] && \":\" === e[i + 1]) {\n                    i += 2;\n                    try {\n                      i = this.consumeHexseq(e, i);\n                    } catch (e) {}\n                    return i;\n                  }\n                  if (i = this.consumeHexseq(e, i), \":\" === e[i] && \":\" === e[i + 1]) {\n                    i += 2;\n                    try {\n                      i = this.consumeHexseq(e, i);\n                    } catch (e) {}\n                    return i;\n                  }\n                  return i;\n                }\n              }, {\n                key: \"consumeHexseq\",\n                value: function consumeHexseq(e, t) {\n                  var i = t;\n                  for (; i = this.consumeHex4(e, i), \":\" === e[i] && \":\" !== e[i + 1];) i += 1;\n                  return i;\n                }\n              }, {\n                key: \"consumeHex4\",\n                value: function consumeHex4(e, t) {\n                  var i = 0;\n                  for (; i < 4; i++) if (!((r = e[t + i]) >= \"0\" && r <= \"9\" || r >= \"a\" && r <= \"f\" || r >= \"A\" && r <= \"F\")) {\n                    if (0 === i) throw new Error(\"Invalid hex 4\");\n                    break;\n                  }\n                  var r;\n                  return t + i;\n                }\n              }, {\n                key: \"consumeFQDN\",\n                value: function consumeFQDN(e, t) {\n                  var i = t;\n                  for (; a(e[i]) || h(e[i]) || \"-\" === e[i] || \".\" === e[i];) i += 1;\n                  if (i - t < 4) throw new Error(\"Invalid FQDN\");\n                  return i;\n                }\n              }, {\n                key: \"consumeExtnAddr\",\n                value: function consumeExtnAddr(e, t) {\n                  return this.consumeOneOrMore(e, t, d);\n                }\n              }, {\n                key: \"consumeMulticastAddress\",\n                value: function consumeMulticastAddress(e, t, i) {\n                  switch (i) {\n                    case \"IP4\":\n                    case \"ip4\":\n                      return this.consumeIP4MulticastAddress(e, t);\n                    case \"IP6\":\n                    case \"ip6\":\n                      return this.consumeIP6MulticastAddress(e, t);\n                    default:\n                      try {\n                        return this.consumeFQDN(e, t);\n                      } catch (i) {\n                        return this.consumeExtnAddr(e, t);\n                      }\n                  }\n                }\n              }, {\n                key: \"consumeIP6MulticastAddress\",\n                value: function consumeIP6MulticastAddress(e, t) {\n                  var i = this.consumeHexpart(e, t);\n                  return \"/\" === e[i] ? this.consumeInteger(e, i + 1) : i;\n                }\n              }, {\n                key: \"consumeIP4MulticastAddress\",\n                value: function consumeIP4MulticastAddress(e, t) {\n                  var i = t + 3;\n                  var r = e.slice(t, i),\n                    n = parseInt(r);\n                  if (n < 224 || n > 239) throw new Error(\"Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.\");\n                  for (var _t121 = 0; _t121 < 3; _t121++) {\n                    if (\".\" !== e[i]) throw new Error(\"Invalid IP4 multicast address.\");\n                    i += 1, i = this.consumeDecimalUChar(e, i);\n                  }\n                  return \"/\" === e[i] && (i += 1), i = this.consumeTTL(e, i), \"/\" === e[i] && (i = this.consumeInteger(e, i)), i;\n                }\n              }, {\n                key: \"consumeInteger\",\n                value: function consumeInteger(e, t) {\n                  if (!l(e[t])) throw new Error(\"Invalid integer.\");\n                  for (t += 1; a(e[t]);) t += 1;\n                  return t;\n                }\n              }, {\n                key: \"consumeTTL\",\n                value: function consumeTTL(e, t) {\n                  if (\"0\" === e[t]) return t + 1;\n                  if (!l(e[t])) throw new Error(\"Invalid TTL.\");\n                  t += 1;\n                  for (var _i58 = 0; _i58 < 2 && a(e[t]); _i58++) t += 1;\n                  return t;\n                }\n              }, {\n                key: \"consumeToken\",\n                value: function consumeToken(e, t) {\n                  return this.consumeOneOrMore(e, t, u);\n                }\n              }, {\n                key: \"consumeTime\",\n                value: function consumeTime(e, t) {\n                  var i = t;\n                  if (\"0\" === e[i]) return i + 1;\n                  for (l(e[i]) && (i += 1); a(e[i]);) i++;\n                  if (i - t < 10) throw new Error(\"Invalid time\");\n                  return i;\n                }\n              }, {\n                key: \"consumeAddress\",\n                value: function consumeAddress(e, t) {\n                  return this.consumeTill(e, t, o);\n                }\n              }, {\n                key: \"consumeTypedTime\",\n                value: function consumeTypedTime(e, t) {\n                  var i = t;\n                  return i = this.consumeOneOrMore(e, i, a), p(e[i]) ? i + 1 : i;\n                }\n              }, {\n                key: \"consumeRepeatInterval\",\n                value: function consumeRepeatInterval(e, t) {\n                  if (!l(e[t])) throw new Error(\"Invalid repeat interval\");\n                  for (t += 1; a(e[t]);) t += 1;\n                  return p(e[t]) && (t += 1), t;\n                }\n              }, {\n                key: \"consumePort\",\n                value: function consumePort(e, t) {\n                  return this.consumeOneOrMore(e, t, a);\n                }\n              }, {\n                key: \"consume\",\n                value: function consume(e, t, i) {\n                  for (var _r34 = 0; _r34 < i.length; _r34++) {\n                    if (t + _r34 >= e.length) throw new Error(\"consume exceeding value length\");\n                    if (e[t + _r34] !== i[_r34]) throw new Error(\"consume \".concat(i, \" failed at \").concat(_r34));\n                  }\n                  return t + i.length;\n                }\n              }, {\n                key: \"consumeTill\",\n                value: function consumeTill(e, t, i) {\n                  var r = t;\n                  for (; r < e.length && (\"string\" != typeof i || e[r] !== i) && (\"function\" != typeof i || !i(e[r]));) r++;\n                  return r;\n                }\n              }]);\n              return v;\n            }();\n            var R = /*#__PURE__*/function (_v2) {\n              _inherits(R, _v2);\n              function R() {\n                var _this160;\n                _classCallCheck(this, R);\n                _this160 = _possibleConstructorReturn(this, _getPrototypeOf(R).call(this)), T(_assertThisInitialized(_assertThisInitialized(_this160)), \"records\", []), T(_assertThisInitialized(_assertThisInitialized(_this160)), \"currentLine\", 0);\n                return _this160;\n              }\n              _createClass(R, [{\n                key: \"parse\",\n                value: function parse(e) {\n                  var t = this.probeEOL(e);\n                  this.records = e.split(t).filter(function (e) {\n                    return !!e.trim();\n                  }).map(this.parseLine), this.currentLine = 0;\n                  var i = this.parseVersion(),\n                    r = this.parseOrigin(),\n                    n = this.parseSessionName(),\n                    o = this.parseInformation(),\n                    s = this.parseUri(),\n                    a = this.parseEmail(),\n                    c = this.parsePhone(),\n                    d = this.parseConnection(),\n                    u = this.parseBandWidth(),\n                    l = this.parseTimeFields(),\n                    h = this.parseKey(),\n                    p = this.parseSessionAttribute(),\n                    _ = this.parseMediaDescription();\n                  if (this.currentLine !== this.records.length) throw new Error(\"parsing failed, non exhaustive sdp lines.\");\n                  return {\n                    version: i,\n                    origin: r,\n                    sessionName: n,\n                    information: o,\n                    uri: s,\n                    emails: a,\n                    phones: c,\n                    connection: d,\n                    bandwidths: u,\n                    timeFields: l,\n                    key: h,\n                    attributes: p,\n                    mediaDescriptions: _\n                  };\n                }\n              }, {\n                key: \"getCurrentRecord\",\n                value: function getCurrentRecord() {\n                  var e = this.records[this.currentLine];\n                  if (!e) throw new Error(\"Record doesn't exit.\");\n                  return e;\n                }\n              }, {\n                key: \"probeEOL\",\n                value: function probeEOL(e) {\n                  for (var _t122 = 0; _t122 < e.length; _t122++) if (e[_t122] === r) return \"\\r\" === e[_t122 - 1] ? n : r;\n                  throw new Error(\"Invalid newline character.\");\n                }\n              }, {\n                key: \"parseLine\",\n                value: function parseLine(e, t) {\n                  if (e.length < 2) throw new Error(\"Invalid sdp line, sdp line should be of form <type>=<value>.\");\n                  var i = e[0];\n                  if (\"=\" !== e[1]) throw new Error('Invalid sdp line, <type> should be a single character followed by an \"=\" sign.');\n                  return {\n                    type: i,\n                    value: e.slice(2),\n                    line: t,\n                    cur: 0\n                  };\n                }\n              }, {\n                key: \"parseSessionAttribute\",\n                value: function parseSessionAttribute() {\n                  var e = new y();\n                  for (; this.currentLine < this.records.length;) {\n                    var _t123 = this.getCurrentRecord();\n                    if (_t123.type !== s.ATTRIBUTE) break;\n                    var _i59 = {\n                      attField: this.extractOneOrMore(_t123, function (e) {\n                        return u(e) && \":\" !== e;\n                      }),\n                      _cur: 0\n                    };\n                    \":\" === _t123.value[_t123.cur] && (_t123.cur += 1, _i59.attValue = this.extractOneOrMore(_t123, _)), e.parse(_i59), this.currentLine++;\n                  }\n                  return e.digest();\n                }\n              }, {\n                key: \"parseMediaAttributes\",\n                value: function parseMediaAttributes(e) {\n                  var t = new C(e);\n                  for (; this.currentLine < this.records.length;) {\n                    var _e97 = this.getCurrentRecord();\n                    if (_e97.type !== s.ATTRIBUTE) break;\n                    var _i60 = {\n                      attField: this.extractOneOrMore(_e97, function (e) {\n                        return u(e) && \":\" !== e;\n                      }),\n                      _cur: 0\n                    };\n                    \":\" === _e97.value[_e97.cur] && (_e97.cur += 1, _i60.attValue = this.extractOneOrMore(_e97, _)), t.parse(_i60), this.currentLine++;\n                  }\n                  return t.digest();\n                }\n              }, {\n                key: \"parseKey\",\n                value: function parseKey() {\n                  var e = this.getCurrentRecord();\n                  if (e.type === s.KEY) {\n                    if (\"prompt\" === e.value || \"clear:\" === e.value || \"base64:\" === e.value || \"uri:\" === e.value) return e.value;\n                    throw this.currentLine++, new Error(\"Invalid key.\");\n                  }\n                }\n              }, {\n                key: \"parseZone\",\n                value: function parseZone() {\n                  var e = this.getCurrentRecord();\n                  if (e.type === s.ZONE_ADJUSTMENTS) {\n                    var _t124 = [];\n                    for (;;) try {\n                      var _i61 = this.extract(e, this.consumeTime);\n                      this.consumeSpaceForRecord(e);\n                      var _r35 = !1;\n                      \"-\" === e.value[e.cur] && (_r35 = !0, e.cur += 1);\n                      var _n27 = this.extract(e, this.consumeTypedTime);\n                      _t124.push({\n                        time: _i61,\n                        typedTime: _n27,\n                        back: _r35\n                      });\n                    } catch (e) {\n                      break;\n                    }\n                    if (0 === _t124.length) throw new Error(\"Invalid zone adjustments\");\n                    return this.currentLine++, _t124;\n                  }\n                  return [];\n                }\n              }, {\n                key: \"parseRepeat\",\n                value: function parseRepeat() {\n                  var e = [];\n                  for (;;) {\n                    var _t125 = this.getCurrentRecord();\n                    if (_t125.type !== s.REPEAT) break;\n                    {\n                      var _i62 = this.extract(_t125, this.consumeRepeatInterval),\n                        _r36 = this.parseTypedTime(_t125);\n                      e.push({\n                        repeatInterval: _i62,\n                        typedTimes: _r36\n                      }), this.currentLine++;\n                    }\n                  }\n                  return e;\n                }\n              }, {\n                key: \"parseTypedTime\",\n                value: function parseTypedTime(e) {\n                  var t = [];\n                  for (;;) try {\n                    this.consumeSpaceForRecord(e), t.push(this.extract(e, this.consumeTypedTime));\n                  } catch (e) {\n                    break;\n                  }\n                  if (0 === t.length) throw new Error(\"Invalid typed time.\");\n                  return t;\n                }\n              }, {\n                key: \"parseTime\",\n                value: function parseTime() {\n                  var e = this.getCurrentRecord(),\n                    t = this.extract(e, this.consumeTime);\n                  this.consumeSpaceForRecord(e);\n                  var i = this.extract(e, this.consumeTime);\n                  return this.currentLine++, {\n                    startTime: t,\n                    stopTime: i\n                  };\n                }\n              }, {\n                key: \"parseBandWidth\",\n                value: function parseBandWidth() {\n                  var e = [];\n                  for (; this.currentLine < this.records.length;) {\n                    var _t126 = this.getCurrentRecord();\n                    if (_t126.type !== s.BANDWIDTH) break;\n                    {\n                      var _i63 = this.extractOneOrMore(_t126, u);\n                      if (\":\" !== _t126.value[_t126.cur]) throw new Error(\"Invalid bandwidth field.\");\n                      _t126.cur++;\n                      var _r37 = this.extractOneOrMore(_t126, a);\n                      e.push({\n                        bwtype: _i63,\n                        bandwidth: _r37\n                      }), this.currentLine++;\n                    }\n                  }\n                  return e;\n                }\n              }, {\n                key: \"parseVersion\",\n                value: function parseVersion() {\n                  var e = this.getCurrentRecord();\n                  if (e.type !== s.VERSION) throw new Error(\"first sdp record must be version\");\n                  var t = e.value.slice(0, this.consumeOneOrMore(e.value, 0, a));\n                  if (t.length !== e.value.length) throw new Error('invalid proto version, \"v='.concat(e.value, '\"'));\n                  return this.currentLine++, t;\n                }\n              }, {\n                key: \"parseOrigin\",\n                value: function parseOrigin() {\n                  var e = this.getCurrentRecord();\n                  if (e.type !== s.ORIGIN) throw new Error(\"second line of sdp must be origin\");\n                  var t = this.extractOneOrMore(e, d);\n                  this.consumeSpaceForRecord(e);\n                  var i = this.extractOneOrMore(e, a);\n                  this.consumeSpaceForRecord(e);\n                  var r = this.extractOneOrMore(e, a);\n                  this.consumeSpaceForRecord(e);\n                  var n = this.extractOneOrMore(e, u);\n                  this.consumeSpaceForRecord(e);\n                  var o = this.extractOneOrMore(e, u);\n                  this.consumeSpaceForRecord(e);\n                  var c = this.extract(e, this.consumeUnicastAddress);\n                  return this.currentLine++, {\n                    username: t,\n                    sessId: i,\n                    sessVersion: r,\n                    nettype: n,\n                    addrtype: o,\n                    unicastAddress: c\n                  };\n                }\n              }, {\n                key: \"parseSessionName\",\n                value: function parseSessionName() {\n                  var e = this.getCurrentRecord();\n                  if (e.type === s.SESSION_NAME) {\n                    var _t127 = this.extract(e, this.consumeText);\n                    return this.currentLine++, _t127;\n                  }\n                }\n              }, {\n                key: \"parseInformation\",\n                value: function parseInformation() {\n                  var e = this.getCurrentRecord();\n                  if (e.type !== s.INFORMATION) return;\n                  var t = this.extract(e, this.consumeText);\n                  return this.currentLine++, t;\n                }\n              }, {\n                key: \"parseUri\",\n                value: function parseUri() {\n                  var e = this.getCurrentRecord();\n                  if (e.type === s.URI) return this.currentLine++, e.value;\n                }\n              }, {\n                key: \"parseEmail\",\n                value: function parseEmail() {\n                  var e = [];\n                  for (;;) {\n                    var _t128 = this.getCurrentRecord();\n                    if (_t128.type !== s.EMAIL) break;\n                    e.push(_t128.value), this.currentLine++;\n                  }\n                  return e;\n                }\n              }, {\n                key: \"parsePhone\",\n                value: function parsePhone() {\n                  var e = [];\n                  for (;;) {\n                    var _t129 = this.getCurrentRecord();\n                    if (_t129.type !== s.PHONE) break;\n                    e.push(_t129.value), this.currentLine++;\n                  }\n                  return e;\n                }\n              }, {\n                key: \"parseConnection\",\n                value: function parseConnection() {\n                  var e = this.getCurrentRecord();\n                  if (e.type === s.CONNECTION) {\n                    var _t130 = this.extractOneOrMore(e, u);\n                    this.consumeSpaceForRecord(e);\n                    var _i64 = this.extractOneOrMore(e, u);\n                    this.consumeSpaceForRecord(e);\n                    var _r38 = this.extract(e, this.consumeAddress);\n                    return this.currentLine++, {\n                      nettype: _t130,\n                      addrtype: _i64,\n                      address: _r38\n                    };\n                  }\n                }\n              }, {\n                key: \"parseMedia\",\n                value: function parseMedia() {\n                  var e = this.getCurrentRecord(),\n                    t = this.extract(e, this.consumeToken);\n                  this.consumeSpaceForRecord(e);\n                  var i = this.extract(e, this.consumePort);\n                  \"/\" === e.value[e.cur] && (e.cur += 1, i += this.extract(e, this.consumeInteger)), this.consumeSpaceForRecord(e);\n                  var r = [];\n                  for (r.push(this.extract(e, this.consumeToken)); \"/\" === e.value[e.cur];) e.cur += 1, r.push(this.extract(e, this.consumeToken));\n                  if (0 === r.length) throw new Error(\"Invalid proto\");\n                  var n = this.parseFmt(e);\n                  return this.currentLine++, {\n                    mediaType: t,\n                    port: i,\n                    protos: r,\n                    fmts: n\n                  };\n                }\n              }, {\n                key: \"parseTimeFields\",\n                value: function parseTimeFields() {\n                  var e = [];\n                  for (; this.getCurrentRecord().type === s.TIME;) {\n                    var _t131 = this.parseTime(),\n                      _i65 = this.parseRepeat(),\n                      _r39 = this.parseZone();\n                    e.push({\n                      time: _t131,\n                      repeats: _i65,\n                      zones: _r39\n                    });\n                  }\n                  return e;\n                }\n              }, {\n                key: \"parseMediaDescription\",\n                value: function parseMediaDescription() {\n                  var e = [];\n                  for (; this.currentLine < this.records.length && this.getCurrentRecord().type === s.MEDIA;) {\n                    var _t132 = this.parseMedia(),\n                      _i66 = this.parseInformation(),\n                      _r40 = this.parseConnections(),\n                      _n28 = this.parseBandWidth(),\n                      _o18 = this.parseKey(),\n                      _s15 = this.parseMediaAttributes(_t132);\n                    e.push({\n                      media: _t132,\n                      information: _i66,\n                      connections: _r40,\n                      bandwidths: _n28,\n                      key: _o18,\n                      attributes: _s15\n                    });\n                  }\n                  return e;\n                }\n              }, {\n                key: \"parseConnections\",\n                value: function parseConnections() {\n                  var e = [];\n                  for (; this.currentLine < this.records.length && this.getCurrentRecord().type === s.CONNECTION;) e.push(this.parseConnection());\n                  return e;\n                }\n              }, {\n                key: \"parseFmt\",\n                value: function parseFmt(e) {\n                  var t = [];\n                  for (;;) try {\n                    this.consumeSpaceForRecord(e), t.push(this.extract(e, this.consumeToken));\n                  } catch (e) {\n                    break;\n                  }\n                  if (0 === t.length) throw new Error(\"Invalid fmts\");\n                  return t;\n                }\n              }, {\n                key: \"extract\",\n                value: function extract(e, t) {\n                  for (var _len = arguments.length, i = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n                    i[_key - 2] = arguments[_key];\n                  }\n                  var r = t.call.apply(t, [this, e.value, e.cur].concat(i)),\n                    n = e.value.slice(e.cur, r);\n                  return e.cur = r, n;\n                }\n              }, {\n                key: \"extractOneOrMore\",\n                value: function extractOneOrMore(e, t) {\n                  var i = this.consumeOneOrMore(e.value, e.cur, t),\n                    r = e.value.slice(e.cur, i);\n                  return e.cur = i, r;\n                }\n              }, {\n                key: \"consumeSpaceForRecord\",\n                value: function consumeSpaceForRecord(e) {\n                  if (e.value[e.cur] !== o) throw new Error(\"Invalid space at \".concat(e.cur, \".\"));\n                  e.cur += 1;\n                }\n              }]);\n              return R;\n            }(v);\n            var I = /*#__PURE__*/function (_v3) {\n              _inherits(I, _v3);\n              function I() {\n                var _getPrototypeOf2;\n                var _this161;\n                _classCallCheck(this, I);\n                for (var _len2 = arguments.length, e = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  e[_key2] = arguments[_key2];\n                }\n                _this161 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(I)).call.apply(_getPrototypeOf2, [this].concat(e))), T(_assertThisInitialized(_assertThisInitialized(_this161)), \"attributes\", void 0), T(_assertThisInitialized(_assertThisInitialized(_this161)), \"digested\", !1);\n                return _this161;\n              }\n              _createClass(I, [{\n                key: \"extractOneOrMore\",\n                value: function extractOneOrMore(e, t, i) {\n                  var r = this.consumeOneOrMore(e.attValue, e._cur, t),\n                    n = e.attValue.slice(e._cur, r),\n                    _ref43 = i || [],\n                    _ref44 = _slicedToArray(_ref43, 2),\n                    o = _ref44[0],\n                    s = _ref44[1];\n                  if (\"number\" == typeof o && n.length < o) throw new Error(\"error in length, should be more or equal than \".concat(o, \" characters.\"));\n                  if (\"number\" == typeof s && n.length > s) throw new Error(\"error in length, should be less or equal than \".concat(s, \" characters.\"));\n                  return e._cur = r, n;\n                }\n              }, {\n                key: \"consumeAttributeSpace\",\n                value: function consumeAttributeSpace(e) {\n                  if (e.attValue[e._cur] !== o) throw new Error(\"Invalid space at \".concat(e._cur, \".\"));\n                  e._cur += 1;\n                }\n              }, {\n                key: \"extract\",\n                value: function extract(e, t) {\n                  if (!e.attValue) throw new Error(\"Nothing to extract from attValue.\");\n                  for (var _len3 = arguments.length, i = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n                    i[_key3 - 2] = arguments[_key3];\n                  }\n                  var r = t.call.apply(t, [this, e.attValue, e._cur].concat(i)),\n                    n = e.attValue.slice(e._cur, r);\n                  return e._cur = r, n;\n                }\n              }, {\n                key: \"atEnd\",\n                value: function atEnd(e) {\n                  if (!e.attValue) throw new Error();\n                  return e._cur >= e.attValue.length;\n                }\n              }, {\n                key: \"peekChar\",\n                value: function peekChar(e) {\n                  if (!e.attValue) throw new Error();\n                  return e.attValue[e._cur];\n                }\n              }, {\n                key: \"peek\",\n                value: function peek(e, t) {\n                  if (!e.attValue) throw new Error();\n                  for (var _i67 = 0; _i67 < t.length; _i67++) if (t[_i67] !== e.attValue[e._cur + _i67]) return !1;\n                  return !0;\n                }\n              }, {\n                key: \"parseIceUfrag\",\n                value: function parseIceUfrag(e) {\n                  if (this.attributes.iceUfrag) throw new Error(\"Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'\");\n                  this.attributes.iceUfrag = this.extractOneOrMore(e, E, [4, 256]);\n                }\n              }, {\n                key: \"parseIcePwd\",\n                value: function parseIcePwd(e) {\n                  if (this.attributes.icePwd) throw new Error(\"Invalid ice-pwd, should be only a single line if 'a=ice-pwd'\");\n                  this.attributes.icePwd = this.extractOneOrMore(e, E, [22, 256]);\n                }\n              }, {\n                key: \"parseIceOptions\",\n                value: function parseIceOptions(e) {\n                  if (this.attributes.iceOptions) throw new Error(\"Invalid ice-options, should be only one 'ice-options' line\");\n                  var t = [];\n                  for (; !this.atEnd(e);) {\n                    t.push(this.extractOneOrMore(e, E));\n                    try {\n                      this.consumeAttributeSpace(e);\n                    } catch (t) {\n                      if (this.atEnd(e)) break;\n                      throw t;\n                    }\n                  }\n                  this.attributes.iceOptions = t;\n                }\n              }, {\n                key: \"parseFingerprint\",\n                value: function parseFingerprint(e) {\n                  var t = this.extract(e, this.consumeToken);\n                  this.consumeAttributeSpace(e);\n                  var i = this.extract(e, this.consumeTill);\n                  this.attributes.fingerprints.push({\n                    hashFunction: t,\n                    fingerprint: i\n                  });\n                }\n              }, {\n                key: \"parseExtmap\",\n                value: function parseExtmap(e) {\n                  var t = this.extractOneOrMore(e, a);\n                  var i;\n                  \"/\" === this.peekChar(e) && (this.extract(e, this.consume, \"/\"), i = this.extract(e, this.consumeToken)), this.consumeAttributeSpace(e);\n                  var r = this.extract(e, this.consumeTill, o),\n                    n = S(S({\n                      entry: parseInt(t, 10)\n                    }, i && {\n                      direction: i\n                    }), {}, {\n                      extensionName: r\n                    });\n                  this.peekChar(e) === o && (this.consumeAttributeSpace(e), n.extensionAttributes = this.extract(e, this.consumeTill)), this.attributes.extmaps.push(n);\n                }\n              }, {\n                key: \"parseSetup\",\n                value: function parseSetup(e) {\n                  if (this.attributes.setup) throw new Error(\"must only be one single 'a=setup' line.\");\n                  var t = this.extract(e, this.consumeTill);\n                  if (\"active\" !== t && \"passive\" !== t && \"actpass\" !== t && \"holdconn\" !== t) throw new Error(\"role must be one of 'active', 'passive', 'actpass', 'holdconn'.\");\n                  this.attributes.setup = t;\n                }\n              }]);\n              return I;\n            }(v);\n            var y = /*#__PURE__*/function (_I2) {\n              _inherits(y, _I2);\n              function y() {\n                var _getPrototypeOf3;\n                var _this162;\n                _classCallCheck(this, y);\n                for (var _len4 = arguments.length, e = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                  e[_key4] = arguments[_key4];\n                }\n                _this162 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(y)).call.apply(_getPrototypeOf3, [this].concat(e))), T(_assertThisInitialized(_assertThisInitialized(_this162)), \"attributes\", {\n                  unrecognized: [],\n                  groups: [],\n                  extmaps: [],\n                  fingerprints: [],\n                  identities: []\n                });\n                return _this162;\n              }\n              _createClass(y, [{\n                key: \"parse\",\n                value: function parse(e) {\n                  if (this.digested) throw new Error(\"already digested\");\n                  try {\n                    switch (e.attField) {\n                      case \"group\":\n                        this.parseGroup(e);\n                        break;\n                      case \"ice-lite\":\n                        this.parseIceLite();\n                        break;\n                      case \"ice-ufrag\":\n                        this.parseIceUfrag(e);\n                        break;\n                      case \"ice-pwd\":\n                        this.parseIcePwd(e);\n                        break;\n                      case \"ice-options\":\n                        this.parseIceOptions(e);\n                        break;\n                      case \"fingerprint\":\n                        this.parseFingerprint(e);\n                        break;\n                      case \"setup\":\n                        this.parseSetup(e);\n                        break;\n                      case \"tls-id\":\n                        this.parseTlsId(e);\n                        break;\n                      case \"identity\":\n                        this.parseIdentity(e);\n                        break;\n                      case \"extmap\":\n                        this.parseExtmap(e);\n                        break;\n                      case \"msid-semantic\":\n                        this.parseMsidSemantic(e);\n                        break;\n                      default:\n                        e.ignored = !0, this.attributes.unrecognized.push(e);\n                    }\n                  } catch (t) {\n                    throw console.error(\"parsing session attribute \".concat(e.attField, ' error, \"a=').concat(e.attField, \":\").concat(e.attValue, '\"')), t;\n                  }\n                  if (!e.ignored && e.attValue && !this.atEnd(e)) throw new Error(\"attribute parsing error\");\n                }\n              }, {\n                key: \"digest\",\n                value: function digest() {\n                  return this.digested = !0, this.attributes;\n                }\n              }, {\n                key: \"parseGroup\",\n                value: function parseGroup(e) {\n                  var t = this.extract(e, this.consumeToken),\n                    i = [];\n                  for (; !this.atEnd(e) && this.peekChar(e) === o;) this.consumeAttributeSpace(e), i.push(this.extract(e, this.consumeToken));\n                  this.attributes.groups.push({\n                    semantic: t,\n                    identificationTag: i\n                  });\n                }\n              }, {\n                key: \"parseIceLite\",\n                value: function parseIceLite() {\n                  if (this.attributes.iceLite) throw new Error(\"Invalid ice-lite, should be only a single line of 'a=ice-lite'\");\n                  this.attributes.iceLite = !0;\n                }\n              }, {\n                key: \"parseTlsId\",\n                value: function parseTlsId(e) {\n                  if (this.attributes.tlsId) throw new Error(\"must be only one tld-id line\");\n                  this.attributes.tlsId = this.extractOneOrMore(e, f);\n                }\n              }, {\n                key: \"parseIdentity\",\n                value: function parseIdentity(e) {\n                  var t = this.extractOneOrMore(e, m),\n                    i = [];\n                  for (; !this.atEnd(e) && this.peekChar(e) === o;) {\n                    this.consumeAttributeSpace(e);\n                    var _t133 = this.extract(e, this.consumeToken);\n                    this.extract(e, this.consume, \"=\");\n                    var _r41 = this.extractOneOrMore(e, function (e) {\n                      return e !== o && _(e);\n                    });\n                    i.push({\n                      name: _t133,\n                      value: _r41\n                    });\n                  }\n                  this.attributes.identities.push({\n                    assertionValue: t,\n                    extensions: i\n                  });\n                }\n              }, {\n                key: \"parseMsidSemantic\",\n                value: function parseMsidSemantic(e) {\n                  this.peekChar(e) === o && this.consumeAttributeSpace(e);\n                  var t = {\n                    semantic: this.extract(e, this.consumeToken),\n                    identifierList: []\n                  };\n                  for (;;) {\n                    try {\n                      this.consumeAttributeSpace(e);\n                    } catch (e) {\n                      break;\n                    }\n                    if (\"*\" === this.peekChar(e)) {\n                      this.extract(e, this.consume, \"*\"), t.applyForAll = !0;\n                      break;\n                    }\n                    {\n                      var _i68 = this.extract(e, this.consumeTill, o);\n                      t.identifierList.push(_i68);\n                    }\n                  }\n                  this.attributes.msidSemantic = t;\n                }\n              }]);\n              return y;\n            }(I);\n            var C = /*#__PURE__*/function (_I3) {\n              _inherits(C, _I3);\n              function C(e) {\n                var _this163;\n                _classCallCheck(this, C);\n                _this163 = _possibleConstructorReturn(this, _getPrototypeOf(C).call(this)), T(_assertThisInitialized(_assertThisInitialized(_this163)), \"attributes\", void 0), -1 !== e.protos.indexOf(\"RTP\") || e.protos.indexOf(\"rtp\"), _this163.attributes = {\n                  unrecognized: [],\n                  candidates: [],\n                  extmaps: [],\n                  fingerprints: [],\n                  imageattr: [],\n                  msids: [],\n                  remoteCandidatesList: [],\n                  rids: [],\n                  ssrcs: [],\n                  ssrcGroups: [],\n                  rtcpFeedbackWildcards: [],\n                  payloads: []\n                };\n                return _this163;\n              }\n              _createClass(C, [{\n                key: \"parse\",\n                value: function parse(e) {\n                  if (this.digested) throw new Error(\"already digested\");\n                  try {\n                    switch (e.attField) {\n                      case \"extmap\":\n                        this.parseExtmap(e);\n                        break;\n                      case \"setup\":\n                        this.parseSetup(e);\n                        break;\n                      case \"ice-ufrag\":\n                        this.parseIceUfrag(e);\n                        break;\n                      case \"ice-pwd\":\n                        this.parseIcePwd(e);\n                        break;\n                      case \"ice-options\":\n                        this.parseIceOptions(e);\n                        break;\n                      case \"candidate\":\n                        this.parseCandidate(e);\n                        break;\n                      case \"remote-candidate\":\n                        this.parseRemoteCandidate(e);\n                        break;\n                      case \"end-of-candidates\":\n                        this.parseEndOfCandidates();\n                        break;\n                      case \"fingerprint\":\n                        this.parseFingerprint(e);\n                        break;\n                      case \"rtpmap\":\n                        this.parseRtpmap(e);\n                        break;\n                      case \"ptime\":\n                        this.parsePtime(e);\n                        break;\n                      case \"maxptime\":\n                        this.parseMaxPtime(e);\n                        break;\n                      case \"sendrecv\":\n                      case \"recvonly\":\n                      case \"sendonly\":\n                      case \"inactive\":\n                        this.parseDirection(e);\n                        break;\n                      case \"ssrc\":\n                        this.parseSSRC(e);\n                        break;\n                      case \"fmtp\":\n                        this.parseFmtp(e);\n                        break;\n                      case \"rtcp-fb\":\n                        this.parseRtcpFb(e);\n                        break;\n                      case \"rtcp-mux\":\n                        this.parseRTCPMux();\n                        break;\n                      case \"rtcp-mux-only\":\n                        this.parseRTCPMuxOnly();\n                        break;\n                      case \"rtcp-rsize\":\n                        this.parseRTCPRsize();\n                        break;\n                      case \"rtcp\":\n                        this.parseRTCP(e);\n                        break;\n                      case \"mid\":\n                        this.parseMid(e);\n                        break;\n                      case \"msid\":\n                        this.parseMsid(e);\n                        break;\n                      case \"imageattr\":\n                        this.parseImageAttr(e);\n                        break;\n                      case \"rid\":\n                        this.parseRid(e);\n                        break;\n                      case \"simulcast\":\n                        this.parseSimulcast(e);\n                        break;\n                      case \"sctp-port\":\n                        this.parseSctpPort(e);\n                        break;\n                      case \"max-message-size\":\n                        this.parseMaxMessageSize(e);\n                        break;\n                      case \"ssrc-group\":\n                        this.parseSSRCGroup(e);\n                        break;\n                      default:\n                        e.ignored = !0, this.attributes.unrecognized.push(e);\n                    }\n                  } catch (t) {\n                    throw console.error(\"parsing media attribute \".concat(e.attField, ' error, \"a=').concat(e.attField, \":\").concat(e.attValue, '\"')), t;\n                  }\n                  if (!e.ignored && e.attValue && !this.atEnd(e)) throw new Error(\"attribute parsing error\");\n                }\n              }, {\n                key: \"parseCandidate\",\n                value: function parseCandidate(e) {\n                  var t = this.extractOneOrMore(e, E, [1, 32]);\n                  this.consumeAttributeSpace(e);\n                  var i = this.extractOneOrMore(e, a, [1, 5]);\n                  this.consumeAttributeSpace(e);\n                  var r = this.extract(e, this.consumeToken);\n                  this.consumeAttributeSpace(e);\n                  var n = this.extractOneOrMore(e, a, [1, 10]);\n                  this.consumeAttributeSpace(e);\n                  var s = this.extract(e, this.consumeAddress);\n                  this.consumeAttributeSpace(e);\n                  var d = this.extract(e, this.consumePort);\n                  this.consumeAttributeSpace(e), this.extract(e, this.consume, \"typ\"), this.consumeAttributeSpace(e);\n                  var u = {\n                    foundation: t,\n                    componentId: i,\n                    transport: r,\n                    priority: n,\n                    connectionAddress: s,\n                    port: d,\n                    type: this.extract(e, this.consumeToken),\n                    extension: {}\n                  };\n                  for (this.peek(e, \" raddr\") && (this.extract(e, this.consume, \" raddr\"), this.consumeAttributeSpace(e), u.relAddr = this.extract(e, this.consumeAddress)), this.peek(e, \" rport\") && (this.extract(e, this.consume, \" rport\"), this.consumeAttributeSpace(e), u.relPort = this.extract(e, this.consumePort)); this.peekChar(e) === o;) {\n                    this.consumeAttributeSpace(e);\n                    var _t134 = this.extract(e, this.consumeToken);\n                    this.consumeAttributeSpace(e), u.extension[_t134] = this.extractOneOrMore(e, c);\n                  }\n                  this.attributes.candidates.push(u);\n                }\n              }, {\n                key: \"parseRemoteCandidate\",\n                value: function parseRemoteCandidate(e) {\n                  var t = [];\n                  for (;;) {\n                    var _i69 = this.extractOneOrMore(e, a, [1, 5]);\n                    this.consumeAttributeSpace(e);\n                    var _r42 = this.extract(e, this.consumeAddress);\n                    this.consumeAttributeSpace(e);\n                    var _n29 = this.extract(e, this.consumePort);\n                    t.push({\n                      componentId: _i69,\n                      connectionAddress: _r42,\n                      port: _n29\n                    });\n                    try {\n                      this.consumeAttributeSpace(e);\n                    } catch (e) {\n                      break;\n                    }\n                  }\n                  this.attributes.remoteCandidatesList.push(t);\n                }\n              }, {\n                key: \"parseEndOfCandidates\",\n                value: function parseEndOfCandidates() {\n                  if (this.attributes.endOfCandidates) throw new Error(\"must be only one line of end-of-candidates\");\n                  this.attributes.endOfCandidates = !0;\n                }\n              }, {\n                key: \"parseRtpmap\",\n                value: function parseRtpmap(e) {\n                  var t = this.extract(e, this.consumeToken);\n                  this.consumeAttributeSpace(e);\n                  var i = this.extract(e, this.consumeTill, \"/\");\n                  this.extract(e, this.consume, \"/\");\n                  var r = {\n                    encodingName: i,\n                    clockRate: this.extractOneOrMore(e, a)\n                  };\n                  this.atEnd(e) || \"/\" !== this.peekChar(e) || (this.extract(e, this.consume, \"/\"), r.encodingParameters = parseInt(this.extract(e, this.consumeTill), 10));\n                  var n = this.attributes.payloads.find(function (e) {\n                    return e.payloadType === parseInt(t, 10);\n                  });\n                  n ? n.rtpMap = r : this.attributes.payloads.push({\n                    payloadType: parseInt(t, 10),\n                    rtpMap: r,\n                    rtcpFeedbacks: []\n                  });\n                }\n              }, {\n                key: \"parsePtime\",\n                value: function parsePtime(e) {\n                  if (this.attributes.ptime) throw new Error(\"must be only one line of ptime\");\n                  this.attributes.ptime = this.extract(e, this.consumeTill);\n                }\n              }, {\n                key: \"parseMaxPtime\",\n                value: function parseMaxPtime(e) {\n                  if (this.attributes.maxPtime) throw new Error(\"must be only one line of ptime\");\n                  this.attributes.maxPtime = this.extract(e, this.consumeTill);\n                }\n              }, {\n                key: \"parseDirection\",\n                value: function parseDirection(e) {\n                  if (this.attributes.direction) throw new Error(\"must be only one line of direction info\");\n                  this.attributes.direction = e.attField;\n                }\n              }, {\n                key: \"parseSSRC\",\n                value: function parseSSRC(e) {\n                  var t = this.extractOneOrMore(e, a);\n                  this.consumeAttributeSpace(e);\n                  var i = this.extract(e, this.consumeTill, \":\");\n                  var r;\n                  \":\" === this.peekChar(e) && (this.extract(e, this.consume, \":\"), r = this.extract(e, this.consumeTill));\n                  var n = this.attributes.ssrcs.find(function (e) {\n                    return e.ssrcId === parseInt(t, 10);\n                  });\n                  n ? n.attributes[i] = r : this.attributes.ssrcs.push({\n                    ssrcId: parseInt(t, 10),\n                    attributes: _defineProperty({}, i, r)\n                  });\n                }\n              }, {\n                key: \"parseFmtp\",\n                value: function parseFmtp(e) {\n                  var t = this.extract(e, this.consumeTill, o);\n                  this.consumeAttributeSpace(e);\n                  var i = this.extract(e, this.consumeTill),\n                    r = {};\n                  i.split(\";\").forEach(function (e) {\n                    var _e$split3 = e.split(\"=\"),\n                      _e$split4 = _slicedToArray(_e$split3, 2),\n                      t = _e$split4[0],\n                      i = _e$split4[1];\n                    t = t.trim();\n                    var n = \"string\" == typeof i ? i.trim() : null;\n                    \"string\" == typeof t && t.length > 0 && (r[t] = n);\n                  });\n                  var n = this.attributes.payloads.find(function (e) {\n                    return e.payloadType === parseInt(t, 10);\n                  });\n                  n ? n.fmtp = {\n                    parameters: r\n                  } : this.attributes.payloads.push({\n                    payloadType: parseInt(t, 10),\n                    rtcpFeedbacks: [],\n                    fmtp: {\n                      parameters: r\n                    }\n                  });\n                }\n              }, {\n                key: \"parseFmtParameters\",\n                value: function parseFmtParameters(e) {\n                  var t = {},\n                    i = this.extract(e, this.consumeTill, \"=\");\n                  e._cur++;\n                  var r = this.extract(e, this.consumeTill, \";\");\n                  for (t[i] = r; \";\" === e.attValue[e._cur];) {\n                    var _i70 = this.extract(e, this.consumeTill, \"=\");\n                    e._cur++;\n                    var _r43 = this.extract(e, this.consumeTill, \";\");\n                    t[_i70] = _r43;\n                  }\n                  return t;\n                }\n              }, {\n                key: \"parseRtcpFb\",\n                value: function parseRtcpFb(e) {\n                  var t = \"\";\n                  t = \"*\" === this.peekChar(e) ? this.extract(e, this.consume, \"*\") : this.extract(e, this.consumeTill, o), this.consumeAttributeSpace(e);\n                  var i = this.extract(e, this.consumeTill, o);\n                  var r;\n                  switch (i) {\n                    case \"trr-int\":\n                      r = {\n                        type: i,\n                        interval: this.extract(e, this.consumeTill)\n                      };\n                      break;\n                    case \"ack\":\n                    case \"nack\":\n                    default:\n                      {\n                        var _t135 = {\n                          type: i\n                        };\n                        this.peekChar(e) === o && (this.consumeAttributeSpace(e), _t135.parameter = this.extract(e, this.consumeToken), this.peekChar(e) === o && (_t135.additional = this.extract(e, this.consumeTill))), r = _t135;\n                      }\n                  }\n                  if (\"*\" === t) this.attributes.rtcpFeedbackWildcards.push(r);else {\n                    var _e98 = this.attributes.payloads.find(function (e) {\n                      return e.payloadType === parseInt(t, 10);\n                    });\n                    _e98 ? _e98.rtcpFeedbacks.push(r) : this.attributes.payloads.push({\n                      payloadType: parseInt(t, 10),\n                      rtcpFeedbacks: [r]\n                    });\n                  }\n                }\n              }, {\n                key: \"parseRTCPMux\",\n                value: function parseRTCPMux() {\n                  if (this.attributes.rtcpMux) throw new Error(\"must be single line of rtcp-mux\");\n                  this.attributes.rtcpMux = !0;\n                }\n              }, {\n                key: \"parseRTCPMuxOnly\",\n                value: function parseRTCPMuxOnly() {\n                  if (this.attributes.rtcpMuxOnly) throw new Error(\"must be single line of rtcp-only\");\n                  this.attributes.rtcpMuxOnly = !0;\n                }\n              }, {\n                key: \"parseRTCPRsize\",\n                value: function parseRTCPRsize() {\n                  if (this.attributes.rtcpRsize) throw new Error(\"must be single line of rtcp-rsize\");\n                  this.attributes.rtcpRsize = !0;\n                }\n              }, {\n                key: \"parseRTCP\",\n                value: function parseRTCP(e) {\n                  if (this.attributes.rtcp) throw new Error(\"must be single line of rtcp\");\n                  var t = {\n                    port: this.extract(e, this.consumePort)\n                  };\n                  this.peekChar(e) === o && (this.consumeAttributeSpace(e), t.netType = this.extractOneOrMore(e, u), this.consumeAttributeSpace(e), t.addressType = this.extractOneOrMore(e, u), this.consumeAttributeSpace(e), t.address = this.extract(e, this.consumeAddress)), this.attributes.rtcp = t;\n                }\n              }, {\n                key: \"parseMsid\",\n                value: function parseMsid(e) {\n                  var t = {\n                    id: this.extractOneOrMore(e, u, [1, 64])\n                  };\n                  this.peekChar(e) === o && (this.consumeAttributeSpace(e), t.appdata = this.extractOneOrMore(e, u, [1, 64])), this.attributes.msids.push(t);\n                }\n              }, {\n                key: \"parseImageAttr\",\n                value: function parseImageAttr(e) {\n                  this.attributes.imageattr.push(e.attValue);\n                }\n              }, {\n                key: \"parseRid\",\n                value: function parseRid(e) {\n                  var t = this.extractOneOrMore(e, function (e) {\n                    return h(e) || a(e) || \"_\" === e || \"-\" === e;\n                  });\n                  this.consumeAttributeSpace(e);\n                  var i = {\n                    id: t,\n                    direction: this.extract(e, this.consumeToken),\n                    params: []\n                  };\n                  if (this.peekChar(e) === o) {\n                    if (this.consumeAttributeSpace(e), this.peek(e, \"pt=\")) {\n                      this.extract(e, this.consume, \"pt=\");\n                      var _t136 = [];\n                      for (;;) {\n                        var _i71 = this.extract(e, this.consumeToken);\n                        _t136.push(_i71);\n                        try {\n                          this.extract(e, this.consume, \",\");\n                        } catch (e) {\n                          break;\n                        }\n                      }\n                      i.payloads = _t136, this.peekChar(e) === o && this.extract(e, this.consume, o);\n                    }\n                    for (;;) {\n                      var _t137 = this.extract(e, this.consumeToken);\n                      switch (_t137) {\n                        case \"depend\":\n                          {\n                            var _r44 = {\n                              type: _t137,\n                              rids: this.extract(e, this.consume, \"=\").split(\",\")\n                            };\n                            i.params.push(_r44);\n                            break;\n                          }\n                        case \"max-width\":\n                        case \"height-width\":\n                        case \"max-fps\":\n                        case \"max-fs\":\n                        case \"max-br\":\n                        case \"max-pps\":\n                        case \"max-bpp\":\n                        default:\n                          {\n                            var _r45 = {\n                              type: _t137\n                            };\n                            \"=\" === this.peekChar(e) && (this.extract(e, this.consume, \"=\"), _r45.val = this.extract(e, this.consumeTill, \";\")), i.params.push(_r45);\n                          }\n                      }\n                      try {\n                        this.extract(e, this.consume, \";\");\n                      } catch (e) {\n                        break;\n                      }\n                    }\n                  }\n                  this.attributes.rids.push(i);\n                }\n              }, {\n                key: \"parseSimulcast\",\n                value: function parseSimulcast(e) {\n                  if (this.attributes.simulcast) throw new Error(\"must be single line of simulcast\");\n                  this.attributes.simulcast = e.attValue, this.extract(e, this.consumeTill);\n                }\n              }, {\n                key: \"parseSctpPort\",\n                value: function parseSctpPort(e) {\n                  this.attributes.sctpPort = this.extractOneOrMore(e, a, [1, 5]);\n                }\n              }, {\n                key: \"parseMaxMessageSize\",\n                value: function parseMaxMessageSize(e) {\n                  this.attributes.maxMessageSize = this.extractOneOrMore(e, a, [1, void 0]);\n                }\n              }, {\n                key: \"digest\",\n                value: function digest() {\n                  return this.digested = !0, this.attributes;\n                }\n              }, {\n                key: \"parseMid\",\n                value: function parseMid(e) {\n                  this.attributes.mid = this.extract(e, this.consumeToken);\n                }\n              }, {\n                key: \"parseSSRCGroup\",\n                value: function parseSSRCGroup(e) {\n                  var t = this.extract(e, this.consumeToken),\n                    i = [];\n                  for (;;) try {\n                    this.consumeAttributeSpace(e);\n                    var _t138 = this.extract(e, this.consumeInteger);\n                    i.push(parseInt(_t138, 10));\n                  } catch (e) {\n                    break;\n                  }\n                  this.attributes.ssrcGroups.push({\n                    semantic: t,\n                    ssrcIds: i\n                  });\n                }\n              }]);\n              return C;\n            }(I);\n            function A(e, t, i) {\n              return t in e ? Object.defineProperty(e, t, {\n                value: i,\n                enumerable: !0,\n                configurable: !0,\n                writable: !0\n              }) : e[t] = i, e;\n            }\n            var O = /*#__PURE__*/function () {\n              function O() {\n                _classCallCheck(this, O);\n                A(this, \"eol\", n);\n              }\n              _createClass(O, [{\n                key: \"print\",\n                value: function print(e, t) {\n                  var i = \"\";\n                  return t && (this.eol = t), i += this.printVersion(e.version), i += this.printOrigin(e.origin), i += this.printSessionName(e.sessionName), i += this.printInformation(e.information), i += this.printUri(e.uri), i += this.printEmail(e.emails), i += this.printPhone(e.phones), i += this.printConnection(e.connection), i += this.printBandwidth(e.bandwidths), i += this.printTimeFields(e.timeFields), i += this.printKey(e.key), i += this.printSessionAttributes(e.attributes), i += this.printMediaDescription(e.mediaDescriptions), i;\n                }\n              }, {\n                key: \"printVersion\",\n                value: function printVersion(e) {\n                  return \"v=\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printOrigin\",\n                value: function printOrigin(e) {\n                  return \"o=\".concat(e.username, \" \").concat(e.sessId, \" \").concat(e.sessVersion, \" \").concat(e.nettype, \" \").concat(e.addrtype, \" \").concat(e.unicastAddress).concat(this.eol);\n                }\n              }, {\n                key: \"printSessionName\",\n                value: function printSessionName(e) {\n                  return e ? \"s=\".concat(e).concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printInformation\",\n                value: function printInformation(e) {\n                  return e ? \"i=\".concat(e).concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printUri\",\n                value: function printUri(e) {\n                  return e ? \"u=\".concat(e).concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printEmail\",\n                value: function printEmail(e) {\n                  var t = \"\";\n                  var _iterator11 = _createForOfIteratorHelper(e),\n                    _step11;\n                  try {\n                    for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                      var _i72 = _step11.value;\n                      t += \"e=\".concat(_i72).concat(this.eol);\n                    }\n                  } catch (err) {\n                    _iterator11.e(err);\n                  } finally {\n                    _iterator11.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printPhone\",\n                value: function printPhone(e) {\n                  var t = \"\";\n                  var _iterator12 = _createForOfIteratorHelper(e),\n                    _step12;\n                  try {\n                    for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n                      var _i73 = _step12.value;\n                      t += \"e=\".concat(_i73).concat(this.eol);\n                    }\n                  } catch (err) {\n                    _iterator12.e(err);\n                  } finally {\n                    _iterator12.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printConnection\",\n                value: function printConnection(e) {\n                  return e ? \"c=\".concat(e.nettype, \" \").concat(e.addrtype, \" \").concat(e.address).concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printBandwidth\",\n                value: function printBandwidth(e) {\n                  var t = \"\";\n                  var _iterator13 = _createForOfIteratorHelper(e),\n                    _step13;\n                  try {\n                    for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n                      var _i74 = _step13.value;\n                      t += \"b=\".concat(_i74.bwtype, \":\").concat(_i74.bandwidth).concat(this.eol);\n                    }\n                  } catch (err) {\n                    _iterator13.e(err);\n                  } finally {\n                    _iterator13.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printTimeFields\",\n                value: function printTimeFields(e) {\n                  var t = \"\";\n                  var _iterator14 = _createForOfIteratorHelper(e),\n                    _step14;\n                  try {\n                    for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n                      var _i75 = _step14.value;\n                      t += \"t=\".concat(_i75.time.startTime, \" \").concat(_i75.time.startTime).concat(this.eol);\n                      var _iterator15 = _createForOfIteratorHelper(_i75.repeats),\n                        _step15;\n                      try {\n                        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n                          var _e99 = _step15.value;\n                          t += \"r=\".concat(_e99.repeatInterval, \" \").concat(_e99.typedTimes.join(\" \")).concat(this.eol);\n                        }\n                      } catch (err) {\n                        _iterator15.e(err);\n                      } finally {\n                        _iterator15.f();\n                      }\n                      _i75.zoneAdjustments && (t += \"z=\", t += \"z=\".concat(_i75.zoneAdjustments.map(function (e) {\n                        return \"\".concat(e.time, \" \").concat(e.back ? \"-\" : \"\", \" \").concat(e.typedTime);\n                      }).join(\" \")).concat(this.eol), t += this.eol);\n                    }\n                  } catch (err) {\n                    _iterator14.e(err);\n                  } finally {\n                    _iterator14.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printKey\",\n                value: function printKey(e) {\n                  return e ? \"k=\".concat(e).concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printAttributes\",\n                value: function printAttributes(e) {\n                  var t = \"\";\n                  var _iterator16 = _createForOfIteratorHelper(e),\n                    _step16;\n                  try {\n                    for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                      var _i76 = _step16.value;\n                      t += \"a=\".concat(_i76.attField).concat(_i76.attValue ? \":\".concat(_i76.attValue) : \"\").concat(this.eol);\n                    }\n                  } catch (err) {\n                    _iterator16.e(err);\n                  } finally {\n                    _iterator16.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printMediaDescription\",\n                value: function printMediaDescription(e) {\n                  var t = \"\";\n                  var _iterator17 = _createForOfIteratorHelper(e),\n                    _step17;\n                  try {\n                    for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n                      var _i77 = _step17.value;\n                      t += this.printMedia(_i77.media), t += this.printInformation(_i77.information), t += this.printConnections(_i77.connections), t += this.printBandwidth(_i77.bandwidths), t += this.printKey(_i77.key), t += this.printMediaAttributes(_i77);\n                    }\n                  } catch (err) {\n                    _iterator17.e(err);\n                  } finally {\n                    _iterator17.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printConnections\",\n                value: function printConnections(e) {\n                  var t = \"\";\n                  var _iterator18 = _createForOfIteratorHelper(e),\n                    _step18;\n                  try {\n                    for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n                      var _i78 = _step18.value;\n                      t += this.printConnection(_i78);\n                    }\n                  } catch (err) {\n                    _iterator18.e(err);\n                  } finally {\n                    _iterator18.f();\n                  }\n                  return t;\n                }\n              }, {\n                key: \"printMedia\",\n                value: function printMedia(e) {\n                  return \"m=\".concat(e.mediaType, \" \").concat(e.port, \" \").concat(e.protos.join(\"/\"), \" \").concat(e.fmts.join(\" \")).concat(this.eol);\n                }\n              }, {\n                key: \"printSessionAttributes\",\n                value: function printSessionAttributes(e) {\n                  return new w(this.eol).print(e);\n                }\n              }, {\n                key: \"printMediaAttributes\",\n                value: function printMediaAttributes(e) {\n                  return new N(this.eol).print(e);\n                }\n              }]);\n              return O;\n            }();\n            var b = /*#__PURE__*/function () {\n              function b(e) {\n                _classCallCheck(this, b);\n                A(this, \"eol\", void 0), this.eol = e;\n              }\n              _createClass(b, [{\n                key: \"printIceUfrag\",\n                value: function printIceUfrag(e) {\n                  return void 0 === e ? \"\" : \"a=ice-ufrag:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printIcePwd\",\n                value: function printIcePwd(e) {\n                  return void 0 === e ? \"\" : \"a=ice-pwd:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printIceOptions\",\n                value: function printIceOptions(e) {\n                  return void 0 === e ? \"\" : \"a=ice-options:\".concat(e.join(o)).concat(this.eol);\n                }\n              }, {\n                key: \"printFingerprints\",\n                value: function printFingerprints(e) {\n                  return e.length > 0 ? e.map(function (e) {\n                    return \"a=fingerprint:\".concat(e.hashFunction).concat(o).concat(e.fingerprint);\n                  }).join(this.eol) + this.eol : \"\";\n                }\n              }, {\n                key: \"printExtmap\",\n                value: function printExtmap(e) {\n                  var _this164 = this;\n                  return e.map(function (e) {\n                    return \"a=extmap:\".concat(e.entry).concat(e.direction ? \"/\".concat(e.direction) : \"\").concat(o).concat(e.extensionName).concat(e.extensionAttributes ? \"\".concat(o).concat(e.extensionAttributes) : \"\").concat(_this164.eol);\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printSetup\",\n                value: function printSetup(e) {\n                  return void 0 === e ? \"\" : \"a=setup:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printUnrecognized\",\n                value: function printUnrecognized(e) {\n                  var _this165 = this;\n                  return e.map(function (e) {\n                    return \"a=\".concat(e.attField).concat(e.attValue ? \":\".concat(e.attValue) : \"\").concat(_this165.eol);\n                  }).join(\"\");\n                }\n              }]);\n              return b;\n            }();\n            var w = /*#__PURE__*/function (_b3) {\n              _inherits(w, _b3);\n              function w() {\n                _classCallCheck(this, w);\n                return _possibleConstructorReturn(this, _getPrototypeOf(w).apply(this, arguments));\n              }\n              _createClass(w, [{\n                key: \"print\",\n                value: function print(e) {\n                  var t = \"\";\n                  return t += this.printGroups(e.groups), t += this.printMsidSemantic(e.msidSemantic), t += this.printIceLite(e.iceLite), t += this.printIceUfrag(e.iceUfrag), t += this.printIcePwd(e.icePwd), t += this.printIceOptions(e.iceOptions), t += this.printFingerprints(e.fingerprints), t += this.printSetup(e.setup), t += this.printTlsId(e.tlsId), t += this.printIdentity(e.identities), t += this.printExtmap(e.extmaps), t += this.printUnrecognized(e.unrecognized), t;\n                }\n              }, {\n                key: \"printGroups\",\n                value: function printGroups(e) {\n                  var _this166 = this;\n                  var t = \"\";\n                  return e.length > 0 && (t += e.map(function (e) {\n                    return \"a=group:\".concat(e.semantic).concat(e.identificationTag.map(function (e) {\n                      return \"\".concat(o).concat(e);\n                    }).join(\"\")).concat(_this166.eol);\n                  }).join(\"\")), t;\n                }\n              }, {\n                key: \"printIceLite\",\n                value: function printIceLite(e) {\n                  return void 0 === e ? \"\" : \"a=ice-lite\" + this.eol;\n                }\n              }, {\n                key: \"printTlsId\",\n                value: function printTlsId(e) {\n                  return e ? \"a=tls-id:\".concat(e).concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printIdentity\",\n                value: function printIdentity(e) {\n                  return 0 === e.length ? \"\" : e.map(function (e) {\n                    return \"a=identity:\".concat(e.assertionValue).concat(e.extensions.map(function (e) {\n                      return \"\".concat(o).concat(e.name).concat(e.value ? \"=\".concat(e.value) : \"\");\n                    }));\n                  }).join(this.eol) + this.eol;\n                }\n              }, {\n                key: \"printMsidSemantic\",\n                value: function printMsidSemantic(e) {\n                  if (!e) return \"\";\n                  var t = \"a=msid-semantic:\".concat(e.semantic);\n                  return e.applyForAll ? t += \"\".concat(o, \"*\") : e.identifierList.length > 0 && (t += e.identifierList.map(function (e) {\n                    return \"\".concat(o).concat(e);\n                  })), t + this.eol;\n                }\n              }]);\n              return w;\n            }(b);\n            var N = /*#__PURE__*/function (_b4) {\n              _inherits(N, _b4);\n              function N() {\n                _classCallCheck(this, N);\n                return _possibleConstructorReturn(this, _getPrototypeOf(N).apply(this, arguments));\n              }\n              _createClass(N, [{\n                key: \"print\",\n                value: function print(e) {\n                  var t = e.attributes;\n                  var i = \"\";\n                  return i += this.printRTCP(t.rtcp), i += this.printIceUfrag(t.iceUfrag), i += this.printIcePwd(t.icePwd), i += this.printIceOptions(t.iceOptions), i += this.printCandidates(t.candidates), i += this.printRemoteCandidatesList(t.remoteCandidatesList), i += this.printEndOfCandidates(t.endOfCandidates), i += this.printFingerprints(t.fingerprints), i += this.printSetup(t.setup), i += this.printMid(t.mid), i += this.printExtmap(t.extmaps), i += this.printRTPRelated(t), i += this.printPtime(t.ptime), i += this.printMaxPtime(t.maxPtime), i += this.printDirection(t.direction), i += this.printSSRCGroups(t.ssrcGroups), i += this.printSSRC(t.ssrcs), i += this.printRTCPMux(t.rtcpMux), i += this.printRTCPMuxOnly(t.rtcpMuxOnly), i += this.printRTCPRsize(t.rtcpRsize), i += this.printMSId(t.msids), i += this.printImageattr(t.imageattr), i += this.printRid(t.rids), i += this.printSimulcast(t.simulcast), i += this.printSCTPPort(t.sctpPort), i += this.printMaxMessageSize(t.maxMessageSize), i += this.printUnrecognized(t.unrecognized), i;\n                }\n              }, {\n                key: \"printCandidates\",\n                value: function printCandidates(e) {\n                  var _this167 = this;\n                  return e.map(function (e) {\n                    return \"a=candidate:\".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o, \"typ\").concat(o).concat(e.type).concat(e.relAddr ? \"\".concat(o, \"raddr\").concat(o).concat(e.relAddr) : \"\").concat(e.relPort ? \"\".concat(o, \"rport\").concat(o).concat(e.relPort) : \"\").concat(Object.keys(e.extension).map(function (t) {\n                      return \"\".concat(o).concat(t).concat(o).concat(e.extension[t]);\n                    }).join(\"\")).concat(_this167.eol);\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printRemoteCandidatesList\",\n                value: function printRemoteCandidatesList(e) {\n                  var _this168 = this;\n                  return e.map(function (e) {\n                    return \"a=remote-candidates:\".concat(e.join(o)).concat(_this168.eol);\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printEndOfCandidates\",\n                value: function printEndOfCandidates(e) {\n                  return void 0 === e ? \"\" : \"a=end-of-candidates\" + this.eol;\n                }\n              }, {\n                key: \"printRTPRelated\",\n                value: function printRTPRelated(e) {\n                  var _this169 = this;\n                  if (!e.payloads) return \"\";\n                  var t = e.payloads;\n                  var i = \"\";\n                  i += e.rtcpFeedbackWildcards.map(function (e) {\n                    return _this169.printRTCPFeedback(\"*\", e);\n                  }).join(\"\");\n                  var _iterator19 = _createForOfIteratorHelper(t),\n                    _step19;\n                  try {\n                    var _loop3 = function _loop3() {\n                      var e = _step19.value;\n                      i += _this169.printRtpMap(e.payloadType, e.rtpMap), i += _this169.printFmtp(e.payloadType, e.fmtp), i += e.rtcpFeedbacks.map(function (t) {\n                        return _this169.printRTCPFeedback(e.payloadType, t);\n                      }).join(\"\");\n                    };\n                    for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n                      _loop3();\n                    }\n                  } catch (err) {\n                    _iterator19.e(err);\n                  } finally {\n                    _iterator19.f();\n                  }\n                  return i;\n                }\n              }, {\n                key: \"printFmtp\",\n                value: function printFmtp(e, t) {\n                  if (!t) return \"\";\n                  var i = Object.keys(t.parameters);\n                  return 1 === i.length && null === t.parameters[i[0]] ? \"a=fmtp:\".concat(e).concat(o).concat(i[0]).concat(this.eol) : \"a=fmtp:\".concat(e).concat(o).concat(Object.keys(t.parameters).map(function (e) {\n                    return \"\".concat(e, \"=\").concat(t.parameters[e]);\n                  }).join(\";\")).concat(this.eol);\n                }\n              }, {\n                key: \"printRtpMap\",\n                value: function printRtpMap(e, t) {\n                  return t ? \"a=rtpmap:\".concat(e).concat(o).concat(t.encodingName, \"/\").concat(t.clockRate).concat(t.encodingParameters ? \"/\".concat(t.encodingParameters) : \"\").concat(this.eol) : \"\";\n                }\n              }, {\n                key: \"printRTCPFeedback\",\n                value: function printRTCPFeedback(e, t) {\n                  var i = \"a=rtcp-fb:\".concat(e).concat(o),\n                    r = t;\n                  switch (r.type) {\n                    case \"trr-int\":\n                      i += \"ttr-int\".concat(o).concat(r.interval);\n                      break;\n                    case \"ack\":\n                    case \"nack\":\n                    default:\n                      r = r, i += \"\".concat(r.type), r.parameter && (i += \"\".concat(o).concat(r.parameter), r.additional && (i += \"\".concat(o).concat(r.additional)));\n                  }\n                  return i + this.eol;\n                }\n              }, {\n                key: \"printPtime\",\n                value: function printPtime(e) {\n                  return void 0 === e ? \"\" : \"a=ptime:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printMaxPtime\",\n                value: function printMaxPtime(e) {\n                  return void 0 === e ? \"\" : \"a=maxptime:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printDirection\",\n                value: function printDirection(e) {\n                  return void 0 === e ? \"\" : \"a=\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printSSRC\",\n                value: function printSSRC(e) {\n                  var _this170 = this;\n                  return e.map(function (e) {\n                    return Object.keys(e.attributes).map(function (t) {\n                      return \"a=ssrc:\".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t] ? \":\".concat(e.attributes[t]) : \"\").concat(_this170.eol);\n                    }).join(\"\");\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printRTCPMux\",\n                value: function printRTCPMux(e) {\n                  return void 0 === e ? \"\" : \"a=rtcp-mux\".concat(this.eol);\n                }\n              }, {\n                key: \"printRTCPMuxOnly\",\n                value: function printRTCPMuxOnly(e) {\n                  return void 0 === e ? \"\" : \"a=rtcp-mux-only\".concat(this.eol);\n                }\n              }, {\n                key: \"printRTCPRsize\",\n                value: function printRTCPRsize(e) {\n                  return void 0 === e ? \"\" : \"a=rtcp-rsize\".concat(this.eol);\n                }\n              }, {\n                key: \"printRTCP\",\n                value: function printRTCP(e) {\n                  if (void 0 === e) return \"\";\n                  var t = \"a=rtcp:\".concat(e.port);\n                  return e.netType && (t += \"\".concat(o).concat(e.netType)), e.addressType && (t += \"\".concat(o).concat(e.addressType)), e.address && (t += \"\".concat(o).concat(e.address)), t + this.eol;\n                }\n              }, {\n                key: \"printMSId\",\n                value: function printMSId(e) {\n                  var _this171 = this;\n                  return e.map(function (e) {\n                    return \"a=msid:\".concat(e.id).concat(e.appdata ? \"\".concat(o).concat(e.appdata) : \"\").concat(_this171.eol);\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printImageattr\",\n                value: function printImageattr(e) {\n                  var _this172 = this;\n                  return e.map(function (e) {\n                    return \"a=imageattr:\".concat(e).concat(_this172.eol);\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printRid\",\n                value: function printRid(e) {\n                  var _this173 = this;\n                  return e.map(function (e) {\n                    var t = \"a=rid:\".concat(e.id).concat(o).concat(e.direction);\n                    return e.payloads && (t += \"\".concat(o, \"pt=\").concat(e.payloads.join(\",\"))), e.params.length > 0 && (t += \"\".concat(o).concat(e.params.map(function (e) {\n                      return \"depend\" === e.type ? \"depend=\".concat(e.rids.join(\",\")) : \"\".concat(e.type, \"=\").concat(e.val);\n                    }).join(\";\"))), t + _this173.eol;\n                  }).join(\"\");\n                }\n              }, {\n                key: \"printSimulcast\",\n                value: function printSimulcast(e) {\n                  return void 0 === e ? \"\" : \"a=simulcast:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printSCTPPort\",\n                value: function printSCTPPort(e) {\n                  return void 0 === e ? \"\" : \"a=sctp-port:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printMaxMessageSize\",\n                value: function printMaxMessageSize(e) {\n                  return void 0 === e ? \"\" : \"a=max-message-size:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printMid\",\n                value: function printMid(e) {\n                  return void 0 === e ? \"\" : \"a=mid:\".concat(e).concat(this.eol);\n                }\n              }, {\n                key: \"printSSRCGroups\",\n                value: function printSSRCGroups(e) {\n                  var _this174 = this;\n                  return e.map(function (e) {\n                    return \"a=ssrc-group:\".concat(e.semantic).concat(e.ssrcIds.map(function (e) {\n                      return \"\".concat(o).concat(e.toString(10));\n                    }).join(\"\")).concat(_this174.eol);\n                  }).join(\"\");\n                }\n              }]);\n              return N;\n            }(b);\n            function D(e) {\n              return new R().parse(e);\n            }\n            function P(e, t) {\n              return new O().print(e, t);\n            }\n          }\n        },\n        t = {};\n      function i(r) {\n        if (t[r]) return t[r].exports;\n        var n = t[r] = {\n          exports: {}\n        };\n        return e[r](n, n.exports, i), n.exports;\n      }\n      return i.d = function (e, t) {\n        for (var r in t) i.o(t, r) && !i.o(e, r) && Object.defineProperty(e, r, {\n          enumerable: !0,\n          get: t[r]\n        });\n      }, i.o = function (e, t) {\n        return Object.prototype.hasOwnProperty.call(e, t);\n      }, i.r = function (e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }, i(8);\n    }();\n  }(bD);\n  var YD = /*#__PURE__*/function () {\n    function YD(e) {\n      _classCallCheck(this, YD);\n      mp(this, \"sessionDesc\", void 0), mp(this, \"localCapabilities\", void 0), mp(this, \"rtpCapabilities\", void 0), mp(this, \"candidates\", void 0), mp(this, \"iceParameters\", void 0), mp(this, \"dtlsParameters\", void 0), mp(this, \"setup\", void 0), mp(this, \"currentMidIndex\", void 0), mp(this, \"cname\", void 0), e = qR(e);\n      var _e100 = e,\n        t = _e100.remoteIceParameters,\n        i = _e100.remoteDtlsParameters,\n        r = _e100.candidates,\n        n = _e100.remoteRTPCapabilities,\n        o = _e100.remoteSetup,\n        s = _e100.localCapabilities,\n        a = _e100.sdkCodec,\n        c = _e100.cname,\n        d = bD.exports.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE audio video\\na=msid-semantic: WMS\\na=ice-lite\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:audio\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendrecv\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:video\\n\");\n      this.rtpCapabilities = n, this.candidates = r, this.iceParameters = t, this.dtlsParameters = i, this.setup = o, this.localCapabilities = s, this.cname = c;\n      for (var _e101 = 0; _e101 < d.mediaDescriptions.length; _e101++) {\n        var _s16 = d.mediaDescriptions[_e101];\n        if (_s16.attributes.iceUfrag = t.iceUfrag, _s16.attributes.icePwd = t.icePwd, _s16.attributes.fingerprints = i.fingerprints, _s16.attributes.candidates = r, _s16.attributes.setup = o, \"video\" === _s16.media.mediaType) {\n          _s16.media.fmts = n.videoCodecs.map(function (e) {\n            return e.payloadType.toString(10);\n          });\n          var _e102 = n.videoCodecs.filter(function (e) {\n            var t;\n            return null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase().includes(a);\n          });\n          if (0 === _e102.length) throw new Error(\"Codec \".concat(a, \" not supported by remote SDP.\"));\n          _s16.attributes.payloads = _e102, _s16.attributes.extmaps = n.videoExtensions;\n        }\n        \"audio\" === _s16.media.mediaType && (_s16.media.fmts = n.audioCodecs.map(function (e) {\n          return e.payloadType.toString(10);\n        }), _s16.attributes.payloads = n.audioCodecs, _s16.attributes.extmaps = n.audioExtensions), d.mediaDescriptions[_e101] = this.mungMediaDesc(_s16);\n      }\n      this.sessionDesc = d, this.currentMidIndex = d.mediaDescriptions.length - 1;\n    }\n    _createClass(YD, [{\n      key: \"toString\",\n      value: function toString() {\n        return bD.exports.print(this.sessionDesc);\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t, i) {\n        var _MD = MD(t, this.cname),\n          r = _MD.ssrcs,\n          n = _MD.ssrcGroups,\n          o = this.sessionDesc.mediaDescriptions.find(function (t) {\n            return e === yg.VIDEO ? \"video\" === t.media.mediaType : \"audio\" === t.media.mediaType;\n          }),\n          s = r[0].attributes.label,\n          a = r[0].attributes.mslabel;\n        return o.attributes.ssrcs = o.attributes.ssrcs.concat(r), o.attributes.ssrcGroups = o.attributes.ssrcGroups.concat(n), {\n          id: s,\n          mslabel: a\n        };\n      }\n    }, {\n      key: \"batchSend\",\n      value: function batchSend(e) {\n        var _this175 = this;\n        return e.map(function (e) {\n          var t = e.kind,\n            i = e.ssrcMsg;\n          return _this175.send(t, i, void 0);\n        });\n      }\n    }, {\n      key: \"stopSending\",\n      value: function stopSending(e) {\n        this.sessionDesc.mediaDescriptions.forEach(function (t) {\n          var i = [],\n            r = [],\n            n = [];\n          t.attributes.ssrcs.forEach(function (t) {\n            e.includes(t.attributes.label || \"\") ? n.push(t) : i.push(t);\n          }), t.attributes.ssrcGroups.forEach(function (e) {\n            n.map(function (e) {\n              return e.ssrcId;\n            }).includes(e.ssrcIds[0]) || r.push(e);\n          }), t.attributes.ssrcs = i, t.attributes.ssrcGroups = r;\n        });\n      }\n    }, {\n      key: \"mute\",\n      value: function mute(e) {\n        var t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!t) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.mute.\"));\n        t.attributes.direction = \"inactive\";\n      }\n    }, {\n      key: \"unmute\",\n      value: function unmute(e) {\n        var t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!t) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.unmute.\"));\n        t.attributes.direction = \"sendonly\";\n      }\n    }, {\n      key: \"receive\",\n      value: function receive(e, t, i) {\n        var _this176 = this;\n        e.forEach(function (e, t) {\n          var i = e._mediaStreamTrack,\n            r = _this176.sessionDesc.mediaDescriptions.findIndex(function (e) {\n              return e.attributes.mid === i.kind;\n            }),\n            n = _this176.mungRecvMediaDsec(_this176.sessionDesc.mediaDescriptions[r], e);\n          _this176.sessionDesc.mediaDescriptions[r] = n;\n        });\n      }\n    }, {\n      key: \"stopReceiving\",\n      value: function stopReceiving(e) {}\n    }, {\n      key: \"restartICE\",\n      value: function restartICE(e) {\n        e = qR(e), this.iceParameters = e, this.sessionDesc.mediaDescriptions.forEach(function (t) {\n          t.attributes.iceUfrag = e.iceUfrag, t.attributes.icePwd = e.icePwd;\n        });\n      }\n    }, {\n      key: \"predictReceivingMids\",\n      value: function predictReceivingMids(e) {\n        var t = [];\n        for (var i = 0; i < e; i++) t.push((this.currentMidIndex + i + 1).toString(10));\n        return t;\n      }\n    }, {\n      key: \"mungRecvMediaDsec\",\n      value: function mungRecvMediaDsec(e, t) {\n        var i = qR(e);\n        return UD(i, t), VD(i, t), i;\n      }\n    }, {\n      key: \"updateRecvMedia\",\n      value: function updateRecvMedia(e, t) {\n        var i = this.sessionDesc.mediaDescriptions.findIndex(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (-1 !== i) {\n          var _e103 = this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i], t);\n          this.sessionDesc.mediaDescriptions[i] = _e103;\n        }\n      }\n    }, {\n      key: \"bumpMid\",\n      value: function bumpMid(e) {\n        this.currentMidIndex += e;\n      }\n    }, {\n      key: \"updateTrackLabel\",\n      value: function updateTrackLabel(e, t, i) {\n        var r = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return e === yg.VIDEO ? \"video\" === t.attributes.mid : \"audio\" === t.attributes.mid;\n        });\n        if (r) {\n          var _e104 = r.attributes.ssrcs.find(function (e) {\n            return e.attributes.label === t;\n          });\n          var n;\n          if (_e104) _e104.attributes.label = i, null === (n = _e104.attributes.msid) || void 0 === n || n.replace(t, i);\n        }\n      }\n    }, {\n      key: \"mungMediaDesc\",\n      value: function mungMediaDesc(e) {\n        var t = qR(e);\n        return xD(t), function (e) {\n          var t = e.attributes.extmaps.find(function (e) {\n            return \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" === e.extensionName;\n          });\n          t && e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t), 1), e.attributes.payloads.forEach(function (e) {\n            var t = e.rtcpFeedbacks.findIndex(function (e) {\n              return \"transport-cc\" === e.type;\n            });\n            -1 !== t && e.rtcpFeedbacks.splice(t, 1);\n          });\n        }(t), t;\n      }\n    }, {\n      key: \"getSSRC\",\n      value: function getSSRC(e) {\n        var _iterator20 = _createForOfIteratorHelper(this.sessionDesc.mediaDescriptions),\n          _step20;\n        try {\n          for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n            var t = _step20.value;\n            var _iterator21 = _createForOfIteratorHelper(t.attributes.ssrcs),\n              _step21;\n            try {\n              for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n                var i = _step21.value;\n                if (i.attributes.label === e) return [i];\n              }\n            } catch (err) {\n              _iterator21.e(err);\n            } finally {\n              _iterator21.f();\n            }\n          }\n        } catch (err) {\n          _iterator20.e(err);\n        } finally {\n          _iterator20.f();\n        }\n      }\n    }]);\n    return YD;\n  }();\n  function qD(e) {\n    if (Array.isArray(e)) return e.map(function (e) {\n      return e;\n    });\n    if (!JD(e)) return e;\n    var t = {};\n    for (var i in e) JD(e[i]) || Array.isArray(e[i]) ? t[i] = qD(e[i]) : t[i] = e[i];\n    return t;\n  }\n  function JD(e) {\n    return !(\"object\" != typeof e || Array.isArray(e) || !e);\n  }\n  var XD = function () {\n      function e(e) {\n        this.input = [], this.size = e;\n      }\n      return e.prototype.add = function (e) {\n        this.input.push(e), this.input.length > this.size && this.input.splice(0, 1);\n      }, e.prototype.diffMean = function () {\n        return 0 === this.input.length ? 0 : (this.input[this.input.length - 1] - this.input[0]) / this.input.length;\n      }, e;\n    }(),\n    _zD = function zD(e, t) {\n      return (_zD = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (e, t) {\n        e.__proto__ = t;\n      } || function (e, t) {\n        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]);\n      })(e, t);\n    };\n  /*! *****************************************************************************\n  \tCopyright (c) Microsoft Corporation. All rights reserved.\n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\n  \tthis file except in compliance with the License. You may obtain a copy of the\n  \tLicense at http://www.apache.org/licenses/LICENSE-2.0\n  \n  \tTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  \tKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\n  \tWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\n  \tMERCHANTABLITY OR NON-INFRINGEMENT.\n  \n  \tSee the Apache Version 2.0 License for specific language governing permissions\n  \tand limitations under the License.\n  \t***************************************************************************** */\n  function QD(e, t) {\n    function i() {\n      this.constructor = e;\n    }\n    _zD(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i());\n  }\n  var _ZD = function ZD() {\n    return (_ZD = Object.assign || function (e) {\n      for (var t, i = 1, r = arguments.length; i < r; i++) for (var n in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n      return e;\n    }).apply(this, arguments);\n  };\n  function $D(e, t, i, r) {\n    return new (i || (i = Promise))(function (n, o) {\n      function s(e) {\n        try {\n          c(r.next(e));\n        } catch (e) {\n          o(e);\n        }\n      }\n      function a(e) {\n        try {\n          c(r.throw(e));\n        } catch (e) {\n          o(e);\n        }\n      }\n      function c(e) {\n        e.done ? n(e.value) : new i(function (t) {\n          t(e.value);\n        }).then(s, a);\n      }\n      c((r = r.apply(e, t || [])).next());\n    });\n  }\n  function eP(e, t) {\n    var i,\n      r,\n      n,\n      o,\n      s = {\n        label: 0,\n        sent: function sent() {\n          if (1 & n[0]) throw n[1];\n          return n[1];\n        },\n        trys: [],\n        ops: []\n      };\n    return o = {\n      next: a(0),\n      throw: a(1),\n      return: a(2)\n    }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n      return this;\n    }), o;\n    function a(o) {\n      return function (a) {\n        return function (o) {\n          if (i) throw new TypeError(\"Generator is already executing.\");\n          for (; s;) try {\n            if (i = 1, r && (n = 2 & o[0] ? r.return : o[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, o[1])).done) return n;\n            switch (r = 0, n && (o = [2 & o[0], n.value]), o[0]) {\n              case 0:\n              case 1:\n                n = o;\n                break;\n              case 4:\n                return s.label++, {\n                  value: o[1],\n                  done: !1\n                };\n              case 5:\n                s.label++, r = o[1], o = [0];\n                continue;\n              case 7:\n                o = s.ops.pop(), s.trys.pop();\n                continue;\n              default:\n                if (!(n = s.trys, (n = n.length > 0 && n[n.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                  s = 0;\n                  continue;\n                }\n                if (3 === o[0] && (!n || o[1] > n[0] && o[1] < n[3])) {\n                  s.label = o[1];\n                  break;\n                }\n                if (6 === o[0] && s.label < n[1]) {\n                  s.label = n[1], n = o;\n                  break;\n                }\n                if (n && s.label < n[2]) {\n                  s.label = n[2], s.ops.push(o);\n                  break;\n                }\n                n[2] && s.ops.pop(), s.trys.pop();\n                continue;\n            }\n            o = t.call(e, s);\n          } catch (e) {\n            o = [6, e], r = 0;\n          } finally {\n            i = n = 0;\n          }\n          if (5 & o[0]) throw o[1];\n          return {\n            value: o[0] ? o[1] : void 0,\n            done: !0\n          };\n        }([o, a]);\n      };\n    }\n  }\n  var tP,\n    iP = {\n      address: \"unknown\",\n      candidateType: \"unknown\",\n      id: \"unknown\",\n      port: 0,\n      priority: 0,\n      protocol: \"unknown\",\n      type: \"unknown\"\n    },\n    rP = {\n      timestamp: 0,\n      bitrate: {\n        actualEncoded: 0,\n        transmit: 0\n      },\n      sendPacketLossRate: 0,\n      recvPacketLossRate: 0,\n      videoRecv: [],\n      videoSend: [],\n      audioRecv: [],\n      audioSend: [],\n      selectedCandidatePair: {\n        id: \"unknown\",\n        localCandidate: iP,\n        remoteCandidate: iP\n      }\n    },\n    nP = {\n      firsCount: 0,\n      nacksCount: 0,\n      plisCount: 0,\n      framesDecodeCount: 0,\n      framesDecodeInterval: 0,\n      framesDecodeFreezeTime: 0,\n      decodeFrameRate: 0,\n      bytes: 0,\n      packetsLost: 0,\n      packetLostRate: 0,\n      packets: 0,\n      ssrc: 0,\n      qpSumPerFrame: 0\n    },\n    oP = {\n      firsCount: 0,\n      nacksCount: 0,\n      plisCount: 0,\n      frameCount: 0,\n      bytes: 0,\n      packets: 0,\n      packetsLost: 0,\n      packetLostRate: 0,\n      ssrc: 0,\n      rttMs: 0,\n      qpSumPerFrame: 0\n    },\n    sP = {\n      bytes: 0,\n      packets: 0,\n      packetsLost: 0,\n      packetLostRate: 0,\n      ssrc: 0,\n      rttMs: 0\n    },\n    aP = {\n      jitterBufferMs: 0,\n      jitterMs: 0,\n      bytes: 0,\n      packetsLost: 0,\n      packetLostRate: 0,\n      packets: 0,\n      ssrc: 0,\n      receivedFrames: 0,\n      droppedFrames: 0,\n      concealedSamples: 0\n    },\n    cP = function () {\n      function e(e, t) {\n        var i = this;\n        this.videoIsReady = !1, this.videoIsReady2 = {}, this.stats = qD(rP), this.isFirstVideoReceived = {}, this.isFirstVideoDecoded = {}, this.isFirstAudioReceived = {}, this.isFirstAudioDecoded = {}, this.lossRateWindowStats = [], this.pc = e, this.options = t, this.intervalTimer = window.setInterval(function () {\n          return $D(i, void 0, void 0, function () {\n            return eP(this, function (e) {\n              return this.updateStats(), [2];\n            });\n          });\n        }, this.options.updateInterval);\n      }\n      return e.prototype.getStats = function () {\n        return this.stats;\n      }, e.prototype.setVideoIsReady = function (e) {\n        this.videoIsReady = e;\n      }, e.prototype.setVideoIsReady2 = function (e, t) {\n        this.videoIsReady2[e] = t;\n      }, e.prototype.getVideoIsReady = function (e) {\n        return this.videoIsReady2[e] || !1;\n      }, e.prototype.setIsFirstAudioDecoded = function (e) {}, e.prototype.destroy = function () {\n        window.clearInterval(this.intervalTimer), this.pc = void 0;\n      }, e.prototype.calcLossRate = function (e) {\n        var t = this;\n        this.lossRateWindowStats.push(e), this.lossRateWindowStats.length > this.options.lossRateInterval && this.lossRateWindowStats.splice(0, 1);\n        for (var i = this.lossRateWindowStats.length, r = 0, n = 0, o = 0, s = 0, a = function (_a8) {\n            function a(_x213) {\n              return _a8.apply(this, arguments);\n            }\n            a.toString = function () {\n              return _a8.toString();\n            };\n            return a;\n          }(function (a) {\n            e[a].forEach(function (e, c) {\n              if (t.lossRateWindowStats[i - 1][a][c] && t.lossRateWindowStats[0][a][c]) {\n                var d = t.lossRateWindowStats[i - 1][a][c].packets - t.lossRateWindowStats[0][a][c].packets,\n                  u = t.lossRateWindowStats[i - 1][a][c].packetsLost - t.lossRateWindowStats[0][a][c].packetsLost;\n                \"videoSend\" === a || \"audioSend\" === a ? (r += d, o += u) : (n += d, s += u), Number.isNaN(d) || Number.isNaN(d) ? e.packetLostRate = 0 : e.packetLostRate = d <= 0 || u <= 0 ? 0 : u / (d + u);\n              }\n            });\n          }), c = 0, d = [\"videoSend\", \"audioSend\", \"videoRecv\", \"audioRecv\"]; c < d.length; c++) {\n          a(d[c]);\n        }\n        e.sendPacketLossRate = r <= 0 || o <= 0 ? 0 : o / (r + o), e.recvPacketLossRate = n <= 0 || s <= 0 ? 0 : s / (n + s);\n      }, e;\n    }(),\n    dP = function (e) {\n      function t() {\n        var t = null !== e && e.apply(this, arguments) || this;\n        return t._stats = rP, t.lastDecodeVideoReceiverStats = new Map(), t;\n      }\n      return QD(t, e), t.prototype.updateStats = function () {\n        return $D(this, void 0, void 0, function () {\n          var e, t, i, r;\n          return eP(this, function (n) {\n            switch (n.label) {\n              case 0:\n                return [4, this._getStats()];\n              case 1:\n                return e = n.sent(), t = this.statsResponsesToObjects(e), this._stats = qD(rP), i = t.filter(function (e) {\n                  return \"ssrc\" === e.type;\n                }), this.processSSRCStats(i), (r = t.find(function (e) {\n                  return \"VideoBwe\" === e.type;\n                })) && this.processBandwidthStats(r), this._stats.timestamp = Date.now(), this.calcLossRate(this._stats), this.stats = this._stats, [2];\n            }\n          });\n        });\n      }, t.prototype.processBandwidthStats = function (e) {\n        this._stats.bitrate = {\n          actualEncoded: Number(e.googActualEncBitrate),\n          targetEncoded: Number(e.googTargetEncBitrate),\n          retransmit: Number(e.googRetransmitBitrate),\n          transmit: Number(e.googTransmitBitrate)\n        }, this._stats.sendBandwidth = Number(e.googAvailableSendBandwidth);\n      }, t.prototype.processSSRCStats = function (e) {\n        var t = this;\n        e.forEach(function (e) {\n          var i = e.id.includes(\"send\");\n          switch (\"\".concat(e.mediaType, \"_\").concat(i ? \"send\" : \"recv\")) {\n            case \"video_send\":\n              var r = qD(oP);\n              r.codec = e.googCodecName, r.adaptionChangeReason = \"none\", e.googCpuLimitedResolution && (r.adaptionChangeReason = \"cpu\"), e.googBandwidthLimitedResolution && (r.adaptionChangeReason = \"bandwidth\"), r.avgEncodeMs = Number(e.googAvgEncodeMs), r.inputFrame = {\n                width: Number(e.googFrameWidthInput) || Number(e.googFrameWidthSent),\n                height: Number(e.googFrameHeightInput) || Number(e.googFrameHeightSent),\n                frameRate: Number(e.googFrameRateInput)\n              }, r.sentFrame = {\n                width: Number(e.googFrameWidthSent),\n                height: Number(e.googFrameHeightSent),\n                frameRate: Number(e.googFrameRateInput)\n              }, r.firsCount = Number(e.googFirReceived), r.nacksCount = Number(e.googNacksReceived), r.plisCount = Number(e.googPlisReceived), r.frameCount = Number(e.framesEncoded), r.bytes = Number(e.bytesSent), r.packets = Number(e.packetsSent), r.packetsLost = Number(e.packetsLost), r.ssrc = Number(e.ssrc), r.rttMs = Number(e.googRtt || 0), t._stats.videoSend.push(r), t._stats.rtt = r.rttMs;\n              break;\n            case \"video_recv\":\n              var n = qD(nP),\n                o = t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));\n              if (n.codec = e.googCodecName, n.targetDelayMs = Number(e.googTargetDelayMs), n.renderDelayMs = Number(e.googRenderDelayMs), n.currentDelayMs = Number(e.googCurrentDelayMs), n.minPlayoutDelayMs = Number(e.googMinPlayoutDelayMs), n.decodeMs = Number(e.googDecodeMs), n.maxDecodeMs = Number(e.googMaxDecodeMs), n.receivedFrame = {\n                width: Number(e.googFrameWidthReceived),\n                height: Number(e.googFrameHeightReceived),\n                frameRate: Number(e.googFrameRateReceived)\n              }, n.decodedFrame = {\n                width: Number(e.googFrameWidthReceived),\n                height: Number(e.googFrameHeightReceived),\n                frameRate: Number(e.googFrameRateDecoded)\n              }, n.decodeFrameRate = Number(e.googFrameRateDecoded), n.outputFrame = {\n                width: Number(e.googFrameWidthReceived),\n                height: Number(e.googFrameHeightReceived),\n                frameRate: Number(e.googFrameRateOutput)\n              }, n.jitterBufferMs = Number(e.googJitterBufferMs), n.firsCount = Number(e.googFirsSent), n.nacksCount = Number(e.googNacksSent), n.plisCount = Number(e.googPlisSent), n.framesDecodeCount = Number(e.framesDecoded), n.bytes = Number(e.bytesReceived), n.packets = Number(e.packetsReceived), n.packetsLost = Number(e.packetsLost), n.ssrc = Number(e.ssrc), n.packets > 0 && !t.isFirstVideoReceived[n.ssrc] && (t.onFirstVideoReceived && t.onFirstVideoReceived(n.ssrc), t.isFirstVideoReceived[n.ssrc] = !0), n.framesDecodeCount > 0 && !t.isFirstVideoDecoded[n.ssrc] && (t.onFirstVideoDecoded && t.onFirstVideoDecoded(n.ssrc, n.decodedFrame.width, n.decodedFrame.height), t.isFirstVideoDecoded[n.ssrc] = !0), o) {\n                var s = o.stats,\n                  a = Date.now() - o.lts;\n                n.framesDecodeFreezeTime = s.framesDecodeFreezeTime, n.framesDecodeInterval = s.framesDecodeInterval, n.framesDecodeCount > s.framesDecodeCount && t.isFirstVideoDecoded[n.ssrc] ? (o.lts = Date.now(), n.framesDecodeInterval = a, n.framesDecodeInterval >= t.options.freezeRateLimit && (t.getVideoIsReady(parseInt(e.ssrc, 10)) ? n.framesDecodeFreezeTime += n.framesDecodeInterval : t.setVideoIsReady2(parseInt(e.ssrc, 10), !0))) : n.framesDecodeCount < o.stats.framesDecodeCount && (n.framesDecodeInterval = 0);\n              }\n              t.lastDecodeVideoReceiverStats.set(n.ssrc, {\n                stats: _ZD({}, n),\n                lts: Date.now()\n              }), t._stats.videoRecv.push(n);\n              break;\n            case \"audio_recv\":\n              var c = qD(aP);\n              c.codec = e.googCodecName, c.outputLevel = Math.abs(Number(e.audioOutputLevel)) / 32767, c.decodingCNG = Number(e.googDecodingCNG), c.decodingCTN = Number(e.googDecodingCTN), c.decodingCTSG = Number(e.googDecodingCTSG), c.decodingNormal = Number(e.googDecodingNormal), c.decodingPLC = Number(e.googDecodingPLC), c.decodingPLCCNG = Number(e.googDecodingPLCCNG), c.expandRate = Number(e.googExpandRate), c.accelerateRate = Number(e.googAccelerateRate), c.preemptiveExpandRate = Number(e.googPreemptiveExpandRate), c.secondaryDecodedRate = Number(e.googSecondaryDecodedRate), c.speechExpandRate = Number(e.googSpeechExpandRate), c.preferredJitterBufferMs = Number(e.googPreferredJitterBufferMs), c.jitterBufferMs = Number(e.googJitterBufferMs), c.jitterMs = Number(e.googJitterReceived), c.bytes = Number(e.bytesReceived), c.packets = Number(e.packetsReceived), c.packetsLost = Number(e.packetsLost), c.ssrc = Number(e.ssrc), c.receivedFrames = Number(e.googDecodingCTN) || Number(e.packetsReceived), c.droppedFrames = Number(e.googDecodingPLC) + Number(e.googDecodingPLCCNG) || Number(e.packetsLost), c.receivedFrames > 0 && !t.isFirstAudioReceived[c.ssrc] && (t.onFirstAudioReceived && t.onFirstAudioReceived(c.ssrc), t.isFirstAudioReceived[c.ssrc] = !0), c.decodingNormal > 0 && !t.isFirstAudioDecoded[c.ssrc] && (t.onFirstAudioDecoded && t.onFirstAudioDecoded(c.ssrc), t.isFirstAudioDecoded[c.ssrc] = !0), t._stats.audioRecv.push(c);\n              break;\n            case \"audio_send\":\n              var d = qD(sP);\n              d.codec = e.googCodecName, d.inputLevel = Math.abs(Number(e.audioInputLevel)) / 32767, d.aecReturnLoss = Number(e.googEchoCancellationReturnLoss || 0), d.aecReturnLossEnhancement = Number(e.googEchoCancellationReturnLossEnhancement || 0), d.residualEchoLikelihood = Number(e.googResidualEchoLikelihood || 0), d.residualEchoLikelihoodRecentMax = Number(e.googResidualEchoLikelihoodRecentMax || 0), d.bytes = Number(e.bytesSent), d.packets = Number(e.packetsSent), d.packetsLost = Number(e.packetsLost), d.ssrc = Number(e.ssrc), d.rttMs = Number(e.googRtt || 0), t._stats.rtt = d.rttMs, t._stats.audioSend.push(d);\n          }\n        });\n      }, t.prototype._getStats = function () {\n        var e = this;\n        return new Promise(function (t, i) {\n          e.pc.getStats(t, i);\n        });\n      }, t.prototype.statsResponsesToObjects = function (e) {\n        var t = [];\n        return e.result().forEach(function (e) {\n          var i = {\n            id: e.id,\n            timestamp: e.timestamp.valueOf().toString(),\n            type: e.type\n          };\n          e.names().forEach(function (t) {\n            i[t] = e.stat(t);\n          }), t.push(i);\n        }), t;\n      }, t;\n    }(cP);\n  !function (e) {\n    e.CERTIFICATE = \"certificate\", e.CODEC = \"codec\", e.CANDIDATE_PAIR = \"candidate-pair\", e.LOCAL_CANDIDATE = \"local-candidate\", e.REMOTE_CANDIDATE = \"remote-candidate\", e.INBOUND = \"inbound-rtp\", e.TRACK = \"track\", e.OUTBOUND = \"outbound-rtp\", e.PC = \"peer-connection\", e.REMOTE_INBOUND = \"remote-inbound-rtp\", e.REMOTE_OUTBOUND = \"remote-outbound-rtp\", e.TRANSPORT = \"transport\", e.CSRC = \"csrc\", e.DATA_CHANNEL = \"data-channel\", e.STREAM = \"stream\", e.SENDER = \"sender\", e.RECEIVER = \"receiver\";\n  }(tP || (tP = {}));\n  var uP,\n    lP = function (e) {\n      function t() {\n        var t = null !== e && e.apply(this, arguments) || this;\n        return t._stats = rP, t.lastDecodeVideoReceiverStats = new Map(), t.lastVideoFramesRecv = new Map(), t.lastVideoFramesSent = new Map(), t.lastVideoFramesDecode = new Map(), t.lastVideoJBDelay = new Map(), t.lastAudioJBDelay = new Map(), t.mediaBytesSent = new Map(), t.mediaBytesRetransmit = new Map(), t.mediaBytesTargetEncode = new Map(), t.lastEncoderMs = new Map(), t;\n      }\n      return QD(t, e), t.prototype.updateStats = function () {\n        return $D(this, void 0, void 0, function () {\n          var e,\n            t = this;\n          return eP(this, function (i) {\n            switch (i.label) {\n              case 0:\n                return e = this, [4, this.pc.getStats()];\n              case 1:\n                return e.report = i.sent(), this._stats = qD(rP), this.report.forEach(function (e) {\n                  switch (e.type) {\n                    case tP.OUTBOUND:\n                      \"audio\" === e.mediaType ? t.processAudioOutboundStats(e) : \"video\" === e.mediaType && t.processVideoOutboundStats(e);\n                      break;\n                    case tP.INBOUND:\n                      \"audio\" === e.mediaType ? t.processAudioInboundStats(e) : \"video\" === e.mediaType && t.processVideoInboundStats(e);\n                      break;\n                    case tP.TRANSPORT:\n                      var i = t.report.get(e.selectedCandidatePairId);\n                      i && t.processCandidatePairStats(i);\n                      break;\n                    case tP.CANDIDATE_PAIR:\n                      e.selected && t.processCandidatePairStats(e);\n                  }\n                }), this.updateSendBitrate(), this._stats.timestamp = Date.now(), this.calcLossRate(this._stats), this.stats = this._stats, [2];\n            }\n          });\n        });\n      }, t.prototype.processCandidatePairStats = function (e) {\n        if (this._stats.sendBandwidth = e.availableOutgoingBitrate || 0, e.currentRoundTripTime && (this._stats.rtt = 1e3 * e.currentRoundTripTime), this._stats.videoSend.forEach(function (t) {\n          !t.rttMs && e.currentRoundTripTime && (t.rttMs = 1e3 * e.currentRoundTripTime);\n        }), this._stats.audioSend.forEach(function (t) {\n          !t.rttMs && e.currentRoundTripTime && (t.rttMs = 1e3 * e.currentRoundTripTime);\n        }), this._stats.selectedCandidatePair.id = e.id, e.localCandidateId) {\n          var t = this.report.get(e.localCandidateId);\n          t && this.processCandidateStats(t);\n        }\n        if (e.remoteCandidateId) {\n          var i = this.report.get(e.remoteCandidateId);\n          i && this.processCandidateStats(i);\n        }\n      }, t.prototype.processCandidateStats = function (e) {\n        var t;\n        e.type === tP.LOCAL_CANDIDATE && (t = this._stats.selectedCandidatePair.localCandidate), e.type === tP.REMOTE_CANDIDATE && (t = this._stats.selectedCandidatePair.remoteCandidate), t && (t.type = e.type, t.id = e.id, e.address && (t.address = e.address), e.candidateType && (t.candidateType = e.candidateType), e.port && (t.port = e.port), e.priority && (t.priority = e.priority), e.protocol && (t.protocol = e.protocol), e.relayProtocol && (t.relayProtocol = e.relayProtocol), e.type === tP.LOCAL_CANDIDATE && this.stats.selectedCandidatePair.localCandidate.id !== t.id && this.onSelectedLocalCandidateChanged && this.onSelectedLocalCandidateChanged(_ZD({}, t), _ZD({}, this.stats.selectedCandidatePair.localCandidate)), e.type === tP.REMOTE_CANDIDATE && this.stats.selectedCandidatePair.remoteCandidate.id !== t.id && this.onSelectedRemoteCandidateChanged && this.onSelectedRemoteCandidateChanged(_ZD({}, t), _ZD({}, this.stats.selectedCandidatePair.remoteCandidate)));\n      }, t.prototype.processAudioInboundStats = function (e) {\n        var t = this._stats.audioRecv.find(function (t) {\n          return t.ssrc === e.ssrc;\n        });\n        t || (t = qD(aP), this._stats.audioRecv.push(t)), t.ssrc = e.ssrc, t.packets = e.packetsReceived, t.packetsLost = e.packetsLost, t.bytes = e.bytesReceived, t.jitterMs = 1e3 * e.jitter, this.processAudioTrackReceiverStats(e, e.trackId, t), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), t.receivedFrames || (t.receivedFrames = e.packetsReceived), t.droppedFrames || (t.droppedFrames = e.packetsLost), t.receivedFrames > 0 && !this.isFirstAudioReceived[t.ssrc] && (this.onFirstAudioReceived && this.onFirstAudioReceived(t.ssrc), this.isFirstAudioReceived[t.ssrc] = !0), t.outputLevel && t.outputLevel > 0 && !this.isFirstAudioDecoded[t.ssrc] && (this.onFirstAudioDecoded && this.onFirstAudioDecoded(t.ssrc), this.isFirstAudioDecoded[t.ssrc] = !0), \"number\" == typeof e.concealedSamples && (t.concealedSamples = e.concealedSamples);\n      }, t.prototype.processVideoInboundStats = function (e) {\n        var t = this._stats.videoRecv.find(function (t) {\n          return t.ssrc === e.ssrc;\n        });\n        t || (t = qD(nP), this._stats.videoRecv.push(t)), t.ssrc = e.ssrc, t.packets = e.packetsReceived, t.packetsLost = e.packetsLost, t.bytes = e.bytesReceived, t.firsCount = e.firCount, t.nacksCount = e.nackCount, t.plisCount = e.pliCount, t.framesDecodeCount = e.framesDecoded, t.totalInterFrameDelay = e.totalInterFrameDelay, t.totalSquaredInterFrameDelay = e.totalSquaredInterFrameDelay;\n        var i = this.lastDecodeVideoReceiverStats.get(t.ssrc),\n          r = this.lastVideoFramesDecode.get(t.ssrc),\n          n = Date.now();\n        if (t.framesDecodeCount > 0 && !this.isFirstVideoDecoded[t.ssrc]) {\n          var o = t.decodedFrame ? t.decodedFrame.width : 0,\n            s = t.decodedFrame ? t.decodedFrame.height : 0;\n          this.onFirstVideoDecoded && this.onFirstVideoDecoded(t.ssrc, o, s), this.isFirstVideoDecoded[t.ssrc] = !0;\n        }\n        if (i) {\n          var a = i.stats,\n            c = n - i.lts;\n          t.framesDecodeFreezeTime = a.framesDecodeFreezeTime, t.framesDecodeInterval = a.framesDecodeInterval, !this.isFirstVideoDecoded[t.ssrc] && c > this.options.firstVideoDecodedTimeout && this.onFirstVideoDecodedTimeout && this.onFirstVideoDecodedTimeout(t.ssrc), t.framesDecodeCount > a.framesDecodeCount && this.isFirstVideoDecoded[t.ssrc] ? (i.lts = Date.now(), t.framesDecodeInterval = c, t.framesDecodeInterval >= this.options.freezeRateLimit && (this.getVideoIsReady(parseInt(e.ssrc)) ? t.framesDecodeFreezeTime += t.framesDecodeInterval : this.setVideoIsReady2(parseInt(e.ssrc, 10), !0))) : t.framesDecodeCount < a.framesDecodeCount && (t.framesDecodeInterval = 0), e.framesDecoded && e.qpSum && (i.stats.framesDecodeCount > e.framesDecoded ? t.qpSumPerFrame = e.qpSum / e.framesDecoded : t.qpSumPerFrame = (e.qpSum - i.qpSum) / (e.framesDecoded - i.stats.framesDecodeCount));\n        }\n        r && n - r.lts >= 800 ? (t.decodeFrameRate = Math.round((t.framesDecodeCount - r.count) / ((n - r.lts) / 1e3)), this.lastVideoFramesDecode.set(t.ssrc, {\n          count: t.framesDecodeCount,\n          lts: n,\n          rate: t.decodeFrameRate\n        })) : r ? t.decodeFrameRate = r.rate : this.lastVideoFramesDecode.set(t.ssrc, {\n          count: t.framesDecodeCount,\n          lts: n,\n          rate: 0\n        }), e.totalDecodeTime && (t.decodeMs = 1e3 * e.totalDecodeTime), this.processVideoTrackReceiverStats(e, e.trackId, t), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), e.framerateMean && (t.framesRateFirefox = e.framerateMean), t.packets > 0 && !this.isFirstVideoReceived[t.ssrc] && (this.onFirstVideoReceived && this.onFirstVideoReceived(t.ssrc), this.isFirstVideoReceived[t.ssrc] = !0), this.lastDecodeVideoReceiverStats.set(t.ssrc, {\n          stats: _ZD({}, t),\n          lts: i ? i.lts : Date.now(),\n          qpSum: e.qpSum\n        });\n      }, t.prototype.processVideoOutboundStats = function (e) {\n        var t = this._stats.videoSend.find(function (t) {\n          return t.ssrc === e.ssrc;\n        });\n        t || (t = qD(oP), this._stats.videoSend.push(t));\n        var i,\n          r = this.mediaBytesSent.get(e.ssrc);\n        r ? r.add(e.bytesSent) : ((o = new XD(10)).add(e.bytesSent), this.mediaBytesSent.set(e.ssrc, o));\n        if (void 0 !== e.retransmittedBytesSent) {\n          var n = this.mediaBytesRetransmit.get(e.ssrc);\n          if (n) n.add(e.retransmittedBytesSent);else (o = new XD(10)).add(e.retransmittedBytesSent), this.mediaBytesRetransmit.set(e.ssrc, o);\n        }\n        if (e.totalEncodedBytesTarget) {\n          var o,\n            s = this.mediaBytesTargetEncode.get(e.ssrc);\n          if (s) s.add(e.totalEncodedBytesTarget);else (o = new XD(10)).add(e.totalEncodedBytesTarget), this.mediaBytesTargetEncode.set(e.ssrc, o);\n        }\n        if (t.ssrc = e.ssrc, t.bytes = e.bytesSent, t.packets = e.packetsSent, t.firsCount = e.firCount, t.nacksCount = e.nackCount, t.plisCount = e.pliCount, t.frameCount = e.framesEncoded, t.adaptionChangeReason = e.qualityLimitationReason, e.totalEncodeTime && e.framesEncoded) if (!(i = this.lastEncoderMs.get(e.ssrc)) || i.lastFrameCount > e.framesEncoded) t.avgEncodeMs = 1e3 * e.totalEncodeTime / e.framesEncoded;else {\n          var a = e.framesEncoded - i.lastFrameCount,\n            c = e.totalEncodeTime - i.lastEncoderTime;\n          t.avgEncodeMs = 1e3 * c / a;\n        }\n        e.framesEncoded && e.qpSum && (!(i = this.lastEncoderMs.get(e.ssrc)) || i.lastFrameCount > e.framesEncoded ? t.qpSumPerFrame = e.qpSum / e.framesEncoded : t.qpSumPerFrame = (e.qpSum - i.lastQpSum) / (e.framesEncoded - i.lastFrameCount));\n        if (this.lastEncoderMs.set(e.ssrc, {\n          lastFrameCount: e.framesEncoded,\n          lastEncoderTime: e.totalEncodeTime,\n          lastQpSum: e.qpSum,\n          lts: Date.now()\n        }), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), e.mediaSourceId && this.processVideoMediaSource(e.mediaSourceId, t), this.processVideoTrackSenderStats(e, e.trackId, t), e.remoteId) this.processRemoteInboundStats(e.remoteId, t);else {\n          var d = this.findRemoteStatsId(e.ssrc, tP.REMOTE_INBOUND);\n          d && this.processRemoteInboundStats(d, t);\n        }\n      }, t.prototype.processAudioOutboundStats = function (e) {\n        var t = this._stats.audioSend.find(function (t) {\n          return t.ssrc === e.ssrc;\n        });\n        if (t || (t = qD(sP), this._stats.audioSend.push(t)), t.ssrc = e.ssrc, t.packets = e.packetsSent, t.bytes = e.bytesSent, e.mediaSourceId && this.processAudioMediaSource(e.mediaSourceId, t), e.codecId && (t.codec = this.getCodecFromCodecStats(e.codecId)), this.processAudioTrackSenderStats(e, e.trackId, t), e.remoteId) this.processRemoteInboundStats(e.remoteId, t);else {\n          var i = this.findRemoteStatsId(e.ssrc, tP.REMOTE_INBOUND);\n          i && this.processRemoteInboundStats(i, t);\n        }\n      }, t.prototype.findRemoteStatsId = function (e, t) {\n        var i = Array.from(this.report.values()).find(function (i) {\n          return i.type === t && i.ssrc === e;\n        });\n        return i ? i.id : null;\n      }, t.prototype.processVideoMediaSource = function (e, t) {\n        var i = this.report.get(e);\n        i && i.width && i.height && i.framesPerSecond && (t.inputFrame = {\n          width: i.width,\n          height: i.height,\n          frameRate: i.framesPerSecond\n        });\n      }, t.prototype.processAudioMediaSource = function (e, t) {\n        var i = this.report.get(e);\n        i && (t.inputLevel = i.audioLevel);\n      }, t.prototype.processVideoTrackSenderStats = function (e, t, i) {\n        var r,\n          n,\n          o,\n          s = t ? this.report.get(t) : void 0,\n          a = null !== (r = null == s ? void 0 : s.framesSent) && void 0 !== r ? r : e.framesSent,\n          c = null !== (n = null == s ? void 0 : s.frameWidth) && void 0 !== n ? n : e.frameWidth,\n          d = null !== (o = null == s ? void 0 : s.frameHeight) && void 0 !== o ? o : e.frameHeight;\n        if (\"number\" == typeof a && \"number\" == typeof c && \"number\" == typeof d) {\n          var u = 0,\n            l = Date.now(),\n            h = this.lastVideoFramesSent.get(i.ssrc);\n          h && l - h.lts >= 800 ? (u = Math.round((a - h.count) / ((l - h.lts) / 1e3)), this.lastVideoFramesSent.set(i.ssrc, {\n            count: a,\n            lts: l,\n            rate: u\n          })) : h ? u = h.rate : this.lastVideoFramesSent.set(i.ssrc, {\n            count: a,\n            lts: l,\n            rate: 0\n          }), i.sentFrame = {\n            width: c,\n            height: d,\n            frameRate: u\n          };\n        }\n      }, t.prototype.processVideoTrackReceiverStats = function (e, t, i) {\n        var r,\n          n,\n          o,\n          s,\n          a,\n          c = t ? this.report.get(t) : void 0,\n          d = null !== (r = null == c ? void 0 : c.framesReceived) && void 0 !== r ? r : e.framesReceived,\n          u = null !== (n = null == c ? void 0 : c.frameWidth) && void 0 !== n ? n : e.frameWidth,\n          l = null !== (o = null == c ? void 0 : c.frameHeight) && void 0 !== o ? o : e.frameHeight,\n          h = null !== (s = null == c ? void 0 : c.jitterBufferDelay) && void 0 !== s ? s : e.jitterBufferDelay,\n          p = null !== (a = null == c ? void 0 : c.jitterBufferEmittedCount) && void 0 !== a ? a : e.jitterBufferEmittedCount;\n        if (\"number\" == typeof d) {\n          var _ = this.lastVideoFramesRecv.get(i.ssrc),\n            E = Date.now();\n          i.framesReceivedCount = d;\n          var f = 0;\n          _ && E - _.lts >= 800 ? (f = Math.round((d - _.count) / ((E - _.lts) / 1e3)), this.lastVideoFramesRecv.set(i.ssrc, {\n            count: d,\n            lts: E,\n            rate: f\n          })) : _ ? f = _.rate : this.lastVideoFramesRecv.set(i.ssrc, {\n            count: d,\n            lts: E,\n            rate: 0\n          }), i.receivedFrame = {\n            width: u || 0,\n            height: l || 0,\n            frameRate: f || 0\n          }, i.decodedFrame = {\n            width: u || 0,\n            height: l || 0,\n            frameRate: i.decodeFrameRate || 0\n          }, i.outputFrame = {\n            width: u || 0,\n            height: l || 0,\n            frameRate: i.decodeFrameRate || 0\n          };\n        }\n        if (h && p) {\n          var m = this.lastVideoJBDelay.get(i.ssrc);\n          this.lastVideoJBDelay.set(i.ssrc, {\n            jitterBufferDelay: h,\n            jitterBufferEmittedCount: p\n          }), m || (m = {\n            jitterBufferDelay: 0,\n            jitterBufferEmittedCount: 0\n          });\n          var g = 1e3 * (h - m.jitterBufferDelay) / (p - m.jitterBufferEmittedCount);\n          i.jitterBufferMs = g, i.currentDelayMs = Math.round(g);\n        }\n      }, t.prototype.processAudioTrackSenderStats = function (e, t, i) {\n        var r,\n          n,\n          o,\n          s,\n          a = t ? this.report.get(t) : void 0,\n          c = null !== (n = null !== (r = null == a ? void 0 : a.echoReturnLoss) && void 0 !== r ? r : e.echoReturnLoss) && void 0 !== n ? n : 0,\n          d = null !== (s = null !== (o = null == a ? void 0 : a.echoReturnLossEnhancement) && void 0 !== o ? o : e.echoReturnLossEnhancement) && void 0 !== s ? s : 0;\n        i.aecReturnLoss = c, i.aecReturnLossEnhancement = d;\n      }, t.prototype.processAudioTrackReceiverStats = function (e, t, i) {\n        var r,\n          n,\n          o,\n          s,\n          a,\n          c,\n          d,\n          u = t ? this.report.get(t) : void 0,\n          l = null !== (r = null == u ? void 0 : u.removedSamplesForAcceleration) && void 0 !== r ? r : e.removedSamplesForAcceleration,\n          h = null !== (n = null == u ? void 0 : u.totalSamplesReceived) && void 0 !== n ? n : e.totalSamplesReceived,\n          p = null !== (o = null == u ? void 0 : u.jitterBufferDelay) && void 0 !== o ? o : e.jitterBufferDelay,\n          _ = null !== (s = null == u ? void 0 : u.jitterBufferEmittedCount) && void 0 !== s ? s : e.jitterBufferEmittedCount,\n          E = null !== (a = null == u ? void 0 : u.audioLevel) && void 0 !== a ? a : null == e ? void 0 : e.audioLevel,\n          f = null !== (c = null == u ? void 0 : u.totalSamplesDuration) && void 0 !== c ? c : null == e ? void 0 : e.totalSamplesDuration,\n          m = null !== (d = null == u ? void 0 : u.concealedSamples) && void 0 !== d ? d : e.concealedSamples;\n        if (l && h && (i.accelerateRate = l / h), p && _) {\n          var g = this.lastAudioJBDelay.get(i.ssrc);\n          this.lastAudioJBDelay.set(i.ssrc, {\n            jitterBufferDelay: p,\n            jitterBufferEmittedCount: _\n          }), g || (g = {\n            jitterBufferDelay: 0,\n            jitterBufferEmittedCount: 0\n          });\n          var S = 1e3 * (p - g.jitterBufferDelay) / (_ - g.jitterBufferEmittedCount);\n          i.jitterBufferMs = Math.round(S);\n        }\n        i.outputLevel = E;\n        var T = 1920;\n        f && h && (T = h / f / 50, i.receivedFrames = Math.round(h / T)), m && (i.droppedFrames = Math.round(m / T));\n      }, t.prototype.processRemoteInboundStats = function (e, t) {\n        var i = this.report.get(e);\n        i && (t.packetsLost = i.packetsLost, i.roundTripTime && (t.rttMs = 1e3 * i.roundTripTime));\n      }, t.prototype.getCodecFromCodecStats = function (e) {\n        var t = this.report.get(e);\n        if (!t) return \"\";\n        var i = t.mimeType.match(/\\/(.*)$/);\n        return i && i[1] ? i[1] : \"\";\n      }, t.prototype.updateSendBitrate = function () {\n        var e = 0,\n          t = null,\n          i = null;\n        this.mediaBytesSent.forEach(function (t) {\n          e += t.diffMean();\n        }), this.mediaBytesRetransmit.forEach(function (e) {\n          t = null === t ? e.diffMean() : t + e.diffMean();\n        }), this.mediaBytesTargetEncode.forEach(function (e) {\n          i = null === i ? e.diffMean() : i + e.diffMean();\n        });\n        var r = null !== t ? e - t : e;\n        this._stats.bitrate = {\n          actualEncoded: 8 * r / (this.options.updateInterval / 1e3),\n          transmit: 8 * e / (this.options.updateInterval / 1e3)\n        }, null !== t && (this._stats.bitrate.retransmit = 8 * t / (this.options.updateInterval / 1e3)), null !== i && (this._stats.bitrate.targetEncoded = 8 * i / (this.options.updateInterval / 1e3));\n      }, t;\n    }(cP),\n    hP = function (e) {\n      function t() {\n        return null !== e && e.apply(this, arguments) || this;\n      }\n      return QD(t, e), t.prototype.updateStats = function () {\n        return Promise.resolve();\n      }, t;\n    }(cP);\n  function pP(e, t, i, r, n) {\n    void 0 === t && (t = 250), void 0 === i && (i = 8), void 0 === r && (r = 500), void 0 === n && (n = 1e4);\n    var o,\n      s = (o = navigator.userAgent.toLocaleLowerCase().match(/chrome\\/[\\d]*/i)) && o[0] ? Number(o[0].split(\"/\")[1]) : null;\n    return s ? s < 76 ? new dP(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r,\n      firstVideoDecodedTimeout: n\n    }) : new lP(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r,\n      firstVideoDecodedTimeout: n\n    }) : function (e) {\n      return !!window.RTCStatsReport && e.getStats() instanceof Promise;\n    }(e) ? new lP(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r,\n      firstVideoDecodedTimeout: n\n    }) : new hP(e, {\n      updateInterval: t,\n      lossRateInterval: i,\n      freezeRateLimit: r,\n      firstVideoDecodedTimeout: n\n    });\n  }\n  function _P(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function EP(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? _P(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : _P(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var fP = (ZS((uP = /*#__PURE__*/function (_xg) {\n    _inherits(e, _xg);\n    _createClass(e, [{\n      key: \"peerConnectionState\",\n      get: function get() {\n        return this.peerConnection.connectionState;\n      }\n    }, {\n      key: \"iceConnectionState\",\n      get: function get() {\n        return this.peerConnection.iceConnectionState;\n      }\n    }, {\n      key: \"currentLocalDescription\",\n      get: function get() {\n        return this.peerConnection.currentLocalDescription;\n      }\n    }, {\n      key: \"currentRemoteDescription\",\n      get: function get() {\n        return this.peerConnection.currentRemoteDescription;\n      }\n    }]);\n    function e(t, i) {\n      var _this177;\n      _classCallCheck(this, e);\n      _this177 = _possibleConstructorReturn(this, _getPrototypeOf(e).call(this, t, i)), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"peerConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"remoteSDP\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"initialOffer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"statsFilter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"useRTX\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"localCapabilities\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"localCandidateCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"allCandidatesReceived\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this177)), \"mutex\", new OT(\"P2PConnection-mutex\")), _this177.store = i, _this177.peerConnection = new RTCPeerConnection(e.resolvePCConfiguration(t), {\n        optional: [{\n          googDscp: !0\n        }]\n      }), _this177.statsFilter = pP(_this177.peerConnection, void 0, void 0, Qh() ? 1200 : void 0), _this177.bindPCEvents(), _this177.bindStatsEvents(), _this177.store.p2pId = _this177.store.p2pId + 1;\n      return _this177;\n    }\n    _createClass(e, [{\n      key: \"establish\",\n      value: function () {\n        var _establish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee136() {\n          var _e105, t, i;\n          return _regeneratorRuntime().wrap(function _callee136$(_context136) {\n            while (1) switch (_context136.prev = _context136.next) {\n              case 0:\n                _context136.prev = 0;\n                _context136.next = 3;\n                return this.peerConnection.createOffer({\n                  offerToReceiveAudio: !0,\n                  offerToReceiveVideo: !0\n                });\n              case 3:\n                _e105 = _context136.sent;\n                if (_e105.sdp) {\n                  _context136.next = 6;\n                  break;\n                }\n                throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");\n              case 6:\n                t = PD(_e105.sdp), i = DD(_e105.sdp, !this.useRTX, HE(\"FILTER_VIDEO_FEC\"), HE(\"FILTER_AUDIO_FEC\"), [\"opus\"]);\n                return _context136.abrupt(\"return\", (this.localCapabilities = i, this.initialOffer = _e105, EP(EP({}, t), {}, {\n                  rtpCapabilities: {\n                    send: {\n                      audioCodecs: [],\n                      audioExtensions: [],\n                      videoCodecs: [],\n                      videoExtensions: []\n                    },\n                    recv: {\n                      audioCodecs: [],\n                      audioExtensions: [],\n                      videoCodecs: [],\n                      videoExtensions: []\n                    },\n                    sendrecv: i\n                  },\n                  offerSDP: _e105.sdp\n                })));\n              case 10:\n                _context136.prev = 10;\n                _context136.t0 = _context136[\"catch\"](0);\n                throw new vE(TE.GET_LOCAL_CONNECTION_PARAMS_FAILED, _context136.t0.toString());\n              case 13:\n              case \"end\":\n                return _context136.stop();\n            }\n          }, _callee136, this, [[0, 10]]);\n        }));\n        function establish() {\n          return _establish.apply(this, arguments);\n        }\n        return establish;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee137(e, t, i, r, n, o) {\n          var _s17;\n          return _regeneratorRuntime().wrap(function _callee137$(_context137) {\n            while (1) switch (_context137.prev = _context137.next) {\n              case 0:\n                _context137.prev = 0;\n                if (this.initialOffer) {\n                  _context137.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot establish P2PConnection without initial offer.\");\n              case 3:\n                this.remoteSDP = new YD({\n                  remoteIceParameters: e,\n                  remoteDtlsParameters: t,\n                  candidates: i,\n                  remoteRTPCapabilities: r.send,\n                  remoteSetup: n,\n                  localCapabilities: this.localCapabilities,\n                  sdkCodec: this.store.codec,\n                  cname: o\n                });\n                _s17 = this.remoteSDP.toString();\n                _context137.next = 7;\n                return this.peerConnection.setLocalDescription(this.initialOffer);\n              case 7:\n                _context137.next = 9;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _s17\n                });\n              case 9:\n                _context137.next = 14;\n                break;\n              case 11:\n                _context137.prev = 11;\n                _context137.t0 = _context137[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.connect failed; \".concat(_context137.t0.toString()));\n              case 14:\n              case \"end\":\n                return _context137.stop();\n            }\n          }, _callee137, this, [[0, 11]]);\n        }));\n        function connect(_x214, _x215, _x216, _x217, _x218, _x219) {\n          return _connect4.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"send\",\n      value: function send(e, t) {\n        var i = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee138() {\n          var r, _n30, _o19, _s18, _a9, c, _d4, _u3;\n          return _regeneratorRuntime().wrap(function _callee138$(_context138) {\n            while (1) switch (_context138.prev = _context138.next) {\n              case 0:\n                _context138.next = 2;\n                return yD(i.mutex.lock());\n              case 2:\n                r = _context138.sent;\n                _context138.prev = 3;\n                if (i.remoteSDP) {\n                  _context138.next = 6;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");\n              case 6:\n                _n30 = e.map(function (e) {\n                  return i.peerConnection.addTrack(e._mediaStreamTrack);\n                });\n                _context138.next = 9;\n                return yD(i.peerConnection.createOffer());\n              case 9:\n                _o19 = _context138.sent;\n                _s18 = bD.exports.parse(_o19.sdp);\n                _a9 = e.map(function (e) {\n                  var t = e._mediaStreamTrack,\n                    r = _s18.mediaDescriptions.find(function (e) {\n                      return e.attributes.mid === t.kind;\n                    });\n                  if (!r) throw new Error(\"Cannot extract ssrc from mediaDescription.\");\n                  return function (e, t, i) {\n                    var r = e.attributes.ssrcs.filter(function (e) {\n                        return e.attributes.label === t;\n                      }),\n                      n = e.attributes.ssrcGroups;\n                    if (0 === r.length) throw new Error(\"Cannot extract ssrc from plan-b SDP.\");\n                    if (n && r.length > 1) {\n                      var _e106 = n.find(function (e) {\n                        return -1 !== e.ssrcIds.indexOf(r[0].ssrcId);\n                      });\n                      return _e106 ? [{\n                        ssrcId: _e106.ssrcIds[0],\n                        rtx: i ? _e106.ssrcIds[1] : void 0\n                      }] : [{\n                        ssrcId: r[0].ssrcId\n                      }];\n                    }\n                    return [{\n                      ssrcId: r[0].ssrcId\n                    }];\n                  }(r, t.id, i.useRTX);\n                });\n                _context138.prev = 12;\n                _context138.next = 15;\n                return _a9;\n              case 15:\n                c = _context138.sent;\n                _context138.next = 21;\n                break;\n              case 18:\n                _context138.prev = 18;\n                _context138.t0 = _context138[\"catch\"](12);\n                throw _n30.forEach(function (e) {\n                  zh() && e.replaceTrack(null), i.peerConnection.removeTrack(e);\n                }), _context138.t0;\n              case 21:\n                _d4 = i.mungSendOfferSDP(_o19.sdp, e);\n                i.remoteSDP.receive(e, t, c);\n                _u3 = i.remoteSDP.toString();\n                _context138.next = 26;\n                return yD(i.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: _d4\n                }));\n              case 26:\n                _context138.next = 28;\n                return yD(i.applySendEncodings(_n30, e));\n              case 28:\n                _context138.next = 30;\n                return yD(i.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _u3\n                }));\n              case 30:\n                return _context138.abrupt(\"return\", e.map(function (e, t) {\n                  var i = e._mediaStreamTrack.id;\n                  return {\n                    localSSRC: _a9[t],\n                    id: i\n                  };\n                }));\n              case 33:\n                _context138.prev = 33;\n                _context138.t1 = _context138[\"catch\"](3);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.send failed; \".concat(_context138.t1.toString()));\n              case 36:\n                _context138.prev = 36;\n                r();\n                return _context138.finish(36);\n              case 39:\n              case \"end\":\n                return _context138.stop();\n            }\n          }, _callee138, null, [[3, 33, 36, 39], [12, 18]]);\n        }))();\n      }\n    }, {\n      key: \"stopSending\",\n      value: function () {\n        var _stopSending = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee139(e) {\n          var _this178 = this;\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee139$(_context139) {\n            while (1) switch (_context139.prev = _context139.next) {\n              case 0:\n                _context139.prev = 0;\n                if (this.remoteSDP) {\n                  _context139.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");\n              case 3:\n                t = this.peerConnection.getSenders().filter(function (t) {\n                  var i;\n                  return -1 !== e.indexOf((null === (i = t.track) || void 0 === i ? void 0 : i.id) || \"\");\n                });\n                if (!(t.length !== e.length)) {\n                  _context139.next = 6;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");\n              case 6:\n                t.map(function (e) {\n                  zh() && e.replaceTrack(null), _this178.peerConnection.removeTrack(e);\n                });\n                _context139.next = 9;\n                return this.peerConnection.createOffer();\n              case 9:\n                i = _context139.sent;\n                _context139.next = 12;\n                return this.peerConnection.setLocalDescription(i);\n              case 12:\n                this.remoteSDP.stopReceiving(e);\n                r = this.remoteSDP.toString();\n                _context139.next = 16;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: r\n                });\n              case 16:\n                _context139.next = 21;\n                break;\n              case 18:\n                _context139.prev = 18;\n                _context139.t0 = _context139[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.stopSending failed; \".concat(_context139.t0.toString()));\n              case 21:\n              case \"end\":\n                return _context139.stop();\n            }\n          }, _callee139, this, [[0, 18]]);\n        }));\n        function stopSending(_x220) {\n          return _stopSending.apply(this, arguments);\n        }\n        return stopSending;\n      }()\n    }, {\n      key: \"receive\",\n      value: function () {\n        var _receive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee140(e, t, i, r) {\n          var _this179 = this;\n          var _this$remoteSDP$send, _i79, _n31, _o20, _s19, _a10;\n          return _regeneratorRuntime().wrap(function _callee140$(_context140) {\n            while (1) switch (_context140.prev = _context140.next) {\n              case 0:\n                _context140.prev = 0;\n                if (this.remoteSDP) {\n                  _context140.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.receive \".concat(e, \" before remoteSDP created.\"));\n              case 3:\n                _this$remoteSDP$send = this.remoteSDP.send(e, t, r), _i79 = _this$remoteSDP$send.id, _n31 = _this$remoteSDP$send.mslabel, _o20 = new Cl(function (t, r) {\n                  var o = setTimeout(function () {\n                      r(new Error(\"Cannot receive track, id: \".concat(_i79)));\n                    }, 1e4),\n                    s = function s(r) {\n                      var a = Bh();\n                      if ((\"Safari\" === a.name && 11 === Number(a.version) || Zh()) && r.track.id !== _i79 && r.streams[0].id === _n31) {\n                        var c;\n                        var _n32 = r.streams[0].getTracks()[0];\n                        return null === (c = _this179.remoteSDP) || void 0 === c || c.updateTrackLabel(e, _i79, r.track.id), _this179.peerConnection.removeEventListener(\"track\", s), clearTimeout(o), void t(_n32);\n                      }\n                      if (r.track.id === _i79) return _this179.peerConnection.removeEventListener(\"track\", s), clearTimeout(o), void t(r.track);\n                    };\n                  _this179.peerConnection.addEventListener(\"track\", s);\n                }), _s19 = this.remoteSDP.toString();\n                _context140.next = 6;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: _s19\n                });\n              case 6:\n                _context140.next = 8;\n                return this.peerConnection.createAnswer();\n              case 8:\n                _a10 = _context140.sent;\n                _context140.next = 11;\n                return this.peerConnection.setLocalDescription(_a10);\n              case 11:\n                _context140.next = 13;\n                return _o20;\n              case 13:\n                _context140.t0 = _context140.sent;\n                _context140.t1 = _i79;\n                return _context140.abrupt(\"return\", {\n                  track: _context140.t0,\n                  id: _context140.t1\n                });\n              case 18:\n                _context140.prev = 18;\n                _context140.t2 = _context140[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.receive failed; \".concat(_context140.t2.toString()));\n              case 21:\n              case \"end\":\n                return _context140.stop();\n            }\n          }, _callee140, this, [[0, 18]]);\n        }));\n        function receive(_x221, _x222, _x223, _x224) {\n          return _receive.apply(this, arguments);\n        }\n        return receive;\n      }()\n    }, {\n      key: \"stopReceiving\",\n      value: function () {\n        var _stopReceiving = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee141(e) {\n          var t, i;\n          return _regeneratorRuntime().wrap(function _callee141$(_context141) {\n            while (1) switch (_context141.prev = _context141.next) {\n              case 0:\n                _context141.prev = 0;\n                if (this.remoteSDP) {\n                  _context141.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");\n              case 3:\n                this.remoteSDP.stopSending(e);\n                t = this.remoteSDP.toString();\n                _context141.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context141.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                i = _context141.sent;\n                _context141.next = 12;\n                return this.peerConnection.setLocalDescription(i);\n              case 12:\n                _context141.next = 17;\n                break;\n              case 14:\n                _context141.prev = 14;\n                _context141.t0 = _context141[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection stopReceiving failed; \".concat(_context141.t0.toString()));\n              case 17:\n              case \"end\":\n                return _context141.stop();\n            }\n          }, _callee141, this, [[0, 14]]);\n        }));\n        function stopReceiving(_x225) {\n          return _stopReceiving.apply(this, arguments);\n        }\n        return stopReceiving;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee142(e) {\n          return _regeneratorRuntime().wrap(function _callee142$(_context142) {\n            while (1) switch (_context142.prev = _context142.next) {\n              case 0:\n              case \"end\":\n                return _context142.stop();\n            }\n          }, _callee142);\n        }));\n        function muteRemote(_x226) {\n          return _muteRemote.apply(this, arguments);\n        }\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee143(e) {\n          return _regeneratorRuntime().wrap(function _callee143$(_context143) {\n            while (1) switch (_context143.prev = _context143.next) {\n              case 0:\n              case \"end\":\n                return _context143.stop();\n            }\n          }, _callee143);\n        }));\n        function unmuteRemote(_x227) {\n          return _unmuteRemote.apply(this, arguments);\n        }\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee144(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee144$(_context144) {\n            while (1) switch (_context144.prev = _context144.next) {\n              case 0:\n                _context144.prev = 0;\n                if (this.remoteSDP) {\n                  _context144.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");\n              case 3:\n                t = this.peerConnection.getSenders().filter(function (t) {\n                  var i;\n                  return -1 !== e.indexOf((null === (i = t.track) || void 0 === i ? void 0 : i.id) || \"\");\n                });\n                if (!(t.length !== e.length)) {\n                  _context144.next = 6;\n                  break;\n                }\n                throw new Error(\"sender' length doesn't match mids' length.\");\n              case 6:\n                t.map(function (e) {\n                  if (zh() && e.track) e.track.enabled = !1;else {\n                    var _t139 = e.getParameters();\n                    _t139.encodings.forEach(function (e) {\n                      return e.active = !1;\n                    }), e.setParameters(_t139);\n                  }\n                });\n                _context144.next = 12;\n                break;\n              case 9:\n                _context144.prev = 9;\n                _context144.t0 = _context144[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.muteLocal failed; \".concat(_context144.t0.toString()));\n              case 12:\n              case \"end\":\n                return _context144.stop();\n            }\n          }, _callee144, this, [[0, 9]]);\n        }));\n        function muteLocal(_x228) {\n          return _muteLocal2.apply(this, arguments);\n        }\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee146(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee146$(_context146) {\n            while (1) switch (_context146.prev = _context146.next) {\n              case 0:\n                _context146.prev = 0;\n                if (this.remoteSDP) {\n                  _context146.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");\n              case 3:\n                t = this.peerConnection.getSenders().filter(function (t) {\n                  var i;\n                  return -1 !== e.indexOf((null === (i = t.track) || void 0 === i ? void 0 : i.id) || \"\");\n                });\n                if (!(t.length !== e.length)) {\n                  _context146.next = 6;\n                  break;\n                }\n                throw new Error(\"Senders' length doesn't match mids' length.\");\n              case 6:\n                t.map( /*#__PURE__*/function () {\n                  var _ref45 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee145(e) {\n                    var _t140;\n                    return _regeneratorRuntime().wrap(function _callee145$(_context145) {\n                      while (1) switch (_context145.prev = _context145.next) {\n                        case 0:\n                          if (!(zh() && e.track)) {\n                            _context145.next = 4;\n                            break;\n                          }\n                          e.track.enabled = !0;\n                          _context145.next = 8;\n                          break;\n                        case 4:\n                          _t140 = e.getParameters();\n                          _t140.encodings.forEach(function (e) {\n                            return e.active = !0;\n                          });\n                          _context145.next = 8;\n                          return e.setParameters(_t140);\n                        case 8:\n                        case \"end\":\n                          return _context145.stop();\n                      }\n                    }, _callee145);\n                  }));\n                  return function (_x230) {\n                    return _ref45.apply(this, arguments);\n                  };\n                }());\n                _context146.next = 9;\n                return this.peerConnection.createOffer();\n              case 9:\n                i = _context146.sent;\n                _context146.next = 12;\n                return this.peerConnection.setLocalDescription(i);\n              case 12:\n                r = this.remoteSDP.toString();\n                _context146.next = 15;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: r\n                });\n              case 15:\n                _context146.next = 20;\n                break;\n              case 17:\n                _context146.prev = 17;\n                _context146.t0 = _context146[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.unmuteLocal failed; \".concat(_context146.t0.toString()));\n              case 20:\n              case \"end\":\n                return _context146.stop();\n            }\n          }, _callee146, this, [[0, 17]]);\n        }));\n        function unmuteLocal(_x229) {\n          return _unmuteLocal2.apply(this, arguments);\n        }\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"restartICE\",\n      value: function restartICE() {\n        var e = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee147() {\n          var t, i, r, _yield$r$iceParameter, _n33, _o21;\n          return _regeneratorRuntime().wrap(function _callee147$(_context147) {\n            while (1) switch (_context147.prev = _context147.next) {\n              case 0:\n                _context147.next = 2;\n                return yD(e.mutex.lock(\"From P2PConnection.restartICE\"));\n              case 2:\n                t = _context147.sent;\n                _context147.prev = 3;\n                _context147.next = 6;\n                return yD(e.peerConnection.createOffer({\n                  iceRestart: !0\n                }));\n              case 6:\n                i = _context147.sent;\n                if (i.sdp) {\n                  _context147.next = 9;\n                  break;\n                }\n                throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");\n              case 9:\n                r = PD(i.sdp);\n                _context147.next = 12;\n                return r.iceParameters;\n              case 12:\n                _yield$r$iceParameter = _context147.sent;\n                _n33 = _yield$r$iceParameter.remoteIceParameters;\n                if (e.remoteSDP) {\n                  _context147.next = 16;\n                  break;\n                }\n                throw new Error(\"Cannot restartICE before remoteSDP created.\");\n              case 16:\n                e.remoteSDP.restartICE(_n33);\n                _o21 = e.remoteSDP.toString();\n                _context147.next = 20;\n                return yD(e.peerConnection.setLocalDescription(i));\n              case 20:\n                _context147.next = 22;\n                return yD(e.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _o21\n                }));\n              case 22:\n                _context147.next = 27;\n                break;\n              case 24:\n                _context147.prev = 24;\n                _context147.t0 = _context147[\"catch\"](3);\n                NE.warning(\"restart ICE failed, abort operation\", _context147.t0);\n              case 27:\n                _context147.prev = 27;\n                t();\n                return _context147.finish(27);\n              case 30:\n              case \"end\":\n                return _context147.stop();\n            }\n          }, _callee147, null, [[3, 24, 27, 30]]);\n        }))();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        this.peerConnection.close(), null === (e = this.onConnectionStateChange) || void 0 === e || e.call(this, \"closed\"), this.unbindPCEvents(), this.unbindStatsEvents(), this.removeAllListeners(), this.statsFilter.destroy();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        return this.statsFilter.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        return this.statsFilter.getVideoIsReady(e);\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function () {\n        var _updateEncoderConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee148(e, t) {\n          var _e107, i, r;\n          return _regeneratorRuntime().wrap(function _callee148$(_context148) {\n            while (1) switch (_context148.prev = _context148.next) {\n              case 0:\n                _context148.prev = 0;\n                if (this.remoteSDP) {\n                  _context148.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");\n              case 3:\n                _context148.next = 5;\n                return this.peerConnection.createOffer();\n              case 5:\n                _e107 = _context148.sent;\n                i = this.mungSendOfferSDP(_e107.sdp, [t]);\n                this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind, t);\n                r = this.remoteSDP.toString();\n                _context148.next = 11;\n                return this.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: i\n                });\n              case 11:\n                _context148.next = 13;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: r\n                });\n              case 13:\n                _context148.next = 18;\n                break;\n              case 15:\n                _context148.prev = 15;\n                _context148.t0 = _context148[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, _context148.t0.toString());\n              case 18:\n              case \"end\":\n                return _context148.stop();\n            }\n          }, _callee148, this, [[0, 15]]);\n        }));\n        function updateEncoderConfig(_x231, _x232) {\n          return _updateEncoderConfig.apply(this, arguments);\n        }\n        return updateEncoderConfig;\n      }()\n    }, {\n      key: \"updateSendParameters\",\n      value: function () {\n        var _updateSendParameters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee149(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee149$(_context149) {\n            while (1) switch (_context149.prev = _context149.next) {\n              case 0:\n                i = this.peerConnection.getSenders().filter(function (t) {\n                  var i;\n                  return (null === (i = t.track) || void 0 === i ? void 0 : i.id) === e;\n                });\n                _context149.t0 = 1 === i.length;\n                if (!_context149.t0) {\n                  _context149.next = 5;\n                  break;\n                }\n                _context149.next = 5;\n                return this.applySendEncodings(i, [t]);\n              case 5:\n              case \"end\":\n                return _context149.stop();\n            }\n          }, _callee149, this);\n        }));\n        function updateSendParameters(_x233, _x234) {\n          return _updateSendParameters.apply(this, arguments);\n        }\n        return updateSendParameters;\n      }()\n    }, {\n      key: \"setStatsRemoteVideoIsReady\",\n      value: function setStatsRemoteVideoIsReady(e, t) {\n        this.statsFilter.setVideoIsReady2(e, t);\n      }\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee150(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee150$(_context150) {\n            while (1) switch (_context150.prev = _context150.next) {\n              case 0:\n                i = this.peerConnection.getSenders().find(function (e) {\n                  var i;\n                  return (null === (i = e.track) || void 0 === i ? void 0 : i.id) === t;\n                });\n                _context150.t0 = i;\n                if (!_context150.t0) {\n                  _context150.next = 5;\n                  break;\n                }\n                _context150.next = 5;\n                return i.replaceTrack(e._mediaStreamTrack);\n              case 5:\n              case \"end\":\n                return _context150.stop();\n            }\n          }, _callee150, this);\n        }));\n        function replaceTrack(_x235, _x236) {\n          return _replaceTrack.apply(this, arguments);\n        }\n        return replaceTrack;\n      }()\n    }, {\n      key: \"bindPCEvents\",\n      value: function bindPCEvents() {\n        var _this180 = this;\n        this.peerConnection.oniceconnectionstatechange = function () {\n          var e;\n          null === (e = _this180.onICEConnectionStateChange) || void 0 === e || e.call(_this180, _this180.peerConnection.iceConnectionState);\n        }, this.peerConnection.onconnectionstatechange = function () {\n          var e;\n          null === (e = _this180.onConnectionStateChange) || void 0 === e || e.call(_this180, _this180.peerConnection.connectionState);\n        }, this.peerConnection.onicecandidate = function (e) {\n          e.candidate ? _this180.localCandidateCount += 1 : (_this180.peerConnection.onicecandidate = null, _this180.allCandidatesReceived = !0, NE.debug(\"[pc-\".concat(_this180.store.p2pId, \"] local candidate count\"), _this180.localCandidateCount));\n        }, setTimeout(function () {\n          _this180.allCandidatesReceived || (_this180.allCandidatesReceived = !0, NE.debug(\"[pc-\".concat(_this180.store.p2pId, \"] onicecandidate timeout, local candidate count\"), _this180.localCandidateCount));\n        }, HE(\"CANDIDATE_TIMEOUT\"));\n      }\n    }, {\n      key: \"unbindPCEvents\",\n      value: function unbindPCEvents() {\n        this.peerConnection.oniceconnectionstatechange = null, this.peerConnection.onconnectionstatechange = null, this.peerConnection.onsignalingstatechange = null, this.peerConnection.onicecandidateerror = null, this.peerConnection.onicecandidate = null, this.peerConnection.ontrack = null;\n      }\n    }, {\n      key: \"applySendEncodings\",\n      value: function () {\n        var _applySendEncodings = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee151(e, t) {\n          var r, i, _n34, _o22, _s20, _a11, _e108, c, _d5;\n          return _regeneratorRuntime().wrap(function _callee151$(_context151) {\n            while (1) switch (_context151.prev = _context151.next) {\n              case 0:\n                _context151.prev = 0;\n                if (jg().supportSetRtpSenderParameters) {\n                  _context151.next = 3;\n                  break;\n                }\n                return _context151.abrupt(\"return\");\n              case 3:\n                if (!(e.length !== t.length)) {\n                  _context151.next = 5;\n                  break;\n                }\n                return _context151.abrupt(\"return\");\n              case 5:\n                r = 0;\n              case 6:\n                if (!(r < e.length)) {\n                  _context151.next = 29;\n                  break;\n                }\n                _n34 = e[r], _o22 = t[r];\n                if (_o22) {\n                  _context151.next = 10;\n                  break;\n                }\n                return _context151.abrupt(\"continue\", 26);\n              case 10:\n                _s20 = {}, _a11 = {};\n                if (!(_o22 instanceof Ew)) {\n                  _context151.next = 20;\n                  break;\n                }\n                _context151.t0 = _o22._optimizationMode;\n                _context151.next = _context151.t0 === \"motion\" ? 15 : _context151.t0 === \"detail\" ? 17 : 19;\n                break;\n              case 15:\n                _s20.degradationPreference = \"maintain-framerate\";\n                return _context151.abrupt(\"break\", 20);\n              case 17:\n                _s20.degradationPreference = \"maintain-resolution\";\n                return _context151.abrupt(\"break\", 20);\n              case 19:\n                _s20.degradationPreference = \"balanced\";\n              case 20:\n                if (HE(\"DSCP_TYPE\") && ap()) {\n                  _e108 = HE(\"DSCP_TYPE\");\n                  [\"very-low\", \"low\", \"medium\", \"high\"].includes(_e108) && (_a11.networkPriority = _e108);\n                }\n                c = _n34.getParameters(), _d5 = null === (i = c.encodings) || void 0 === i ? void 0 : i[0];\n                _d5 && Object.assign(_d5, _a11);\n                Object.assign(c, _s20);\n                _context151.next = 26;\n                return _n34.setParameters(c);\n              case 26:\n                r++;\n                _context151.next = 6;\n                break;\n              case 29:\n                _context151.next = 34;\n                break;\n              case 31:\n                _context151.prev = 31;\n                _context151.t1 = _context151[\"catch\"](0);\n                NE.debug(\"Apply RTPSendEncodings failed.\");\n              case 34:\n              case \"end\":\n                return _context151.stop();\n            }\n          }, _callee151, null, [[0, 31]]);\n        }));\n        function applySendEncodings(_x237, _x238) {\n          return _applySendEncodings.apply(this, arguments);\n        }\n        return applySendEncodings;\n      }()\n    }, {\n      key: \"mungSendOfferSDP\",\n      value: function mungSendOfferSDP(e, t) {\n        var i = bD.exports.parse(e);\n        return t.forEach(function (e, t) {\n          var r = e._mediaStreamTrack,\n            n = i.mediaDescriptions.find(function (e) {\n              return e.attributes.mid === r.kind;\n            });\n          n && UD(n, e);\n        }), bD.exports.print(i);\n      }\n    }, {\n      key: \"bindStatsEvents\",\n      value: function bindStatsEvents() {\n        var _this181 = this;\n        this.statsFilter.onFirstAudioReceived = function (e) {\n          var t;\n          null === (t = _this181.onFirstAudioReceived) || void 0 === t || t.call(_this181, e);\n        }, this.statsFilter.onFirstVideoReceived = function (e) {\n          var t;\n          null === (t = _this181.onFirstVideoReceived) || void 0 === t || t.call(_this181, e);\n        }, this.statsFilter.onFirstAudioDecoded = function (e) {\n          var t;\n          null === (t = _this181.onFirstAudioDecoded) || void 0 === t || t.call(_this181, e);\n        }, this.statsFilter.onFirstVideoDecoded = function (e, t, i) {\n          var r;\n          null === (r = _this181.onFirstVideoDecoded) || void 0 === r || r.call(_this181, e, t, i);\n        }, this.statsFilter.onSelectedLocalCandidateChanged = function (e, t) {\n          var i;\n          null === (i = _this181.onSelectedLocalCandidateChanged) || void 0 === i || i.call(_this181, e, t);\n        }, this.statsFilter.onSelectedRemoteCandidateChanged = function (e, t) {\n          var i;\n          null === (i = _this181.onSelectedRemoteCandidateChanged) || void 0 === i || i.call(_this181, e, t);\n        };\n      }\n    }, {\n      key: \"unbindStatsEvents\",\n      value: function unbindStatsEvents() {\n        this.statsFilter.onFirstAudioReceived = void 0, this.statsFilter.onFirstVideoReceived = void 0, this.statsFilter.onFirstAudioDecoded = void 0, this.statsFilter.onFirstVideoDecoded = void 0, this.statsFilter.onSelectedLocalCandidateChanged = void 0, this.statsFilter.onSelectedRemoteCandidateChanged = void 0;\n      }\n    }, {\n      key: \"batchReceive\",\n      value: function () {\n        var _batchReceive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee152(e) {\n          var _this182 = this;\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee152$(_context152) {\n            while (1) switch (_context152.prev = _context152.next) {\n              case 0:\n                _context152.prev = 0;\n                if (this.remoteSDP) {\n                  _context152.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.batchReceive before remoteSDP created.\");\n              case 3:\n                t = this.remoteSDP.batchSend(e).map(function (t, i) {\n                  var r = t.id,\n                    n = t.mslabel;\n                  var o = e[i].kind;\n                  return new Cl(function (e, t) {\n                    var i = setTimeout(function () {\n                        t(new Error(\"Cannot receive track, id: \".concat(r)));\n                      }, 1e4),\n                      s = function s(t) {\n                        var a = Bh();\n                        if (\"Safari\" === a.name && 11 === Number(a.version) && t.track.id !== r && t.streams[0].id === n) {\n                          var c;\n                          var _n35 = t.streams[0].getTracks()[0];\n                          return null === (c = _this182.remoteSDP) || void 0 === c || c.updateTrackLabel(o, r, t.track.id), _this182.peerConnection.removeEventListener(\"track\", s), clearTimeout(i), void e({\n                            track: _n35,\n                            id: r\n                          });\n                        }\n                        if (t.track.id === r) return _this182.peerConnection.removeEventListener(\"track\", s), clearTimeout(i), void e({\n                          track: t.track,\n                          id: r\n                        });\n                      };\n                    _this182.peerConnection.addEventListener(\"track\", s);\n                  });\n                }), i = this.remoteSDP.toString();\n                _context152.next = 6;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: i\n                });\n              case 6:\n                _context152.next = 8;\n                return this.peerConnection.createAnswer();\n              case 8:\n                r = _context152.sent;\n                _context152.next = 11;\n                return this.peerConnection.setLocalDescription(r);\n              case 11:\n                _context152.next = 13;\n                return Cl.all(t);\n              case 13:\n                return _context152.abrupt(\"return\", _context152.sent);\n              case 16:\n                _context152.prev = 16;\n                _context152.t0 = _context152[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.receive failed; \".concat(_context152.t0.toString()));\n              case 19:\n              case \"end\":\n                return _context152.stop();\n            }\n          }, _callee152, this, [[0, 16]]);\n        }));\n        function batchReceive(_x239) {\n          return _batchReceive.apply(this, arguments);\n        }\n        return batchReceive;\n      }()\n    }, {\n      key: \"getRemoteSSRC\",\n      value: function () {\n        var _getRemoteSSRC = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee153(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee153$(_context153) {\n            while (1) switch (_context153.prev = _context153.next) {\n              case 0:\n                if (this.remoteSDP) {\n                  _context153.next = 2;\n                  break;\n                }\n                return _context153.abrupt(\"return\");\n              case 2:\n                t = this.remoteSDP.getSSRC(e);\n                return _context153.abrupt(\"return\", null == t ? void 0 : t[0].ssrcId);\n              case 4:\n              case \"end\":\n                return _context153.stop();\n            }\n          }, _callee153, this);\n        }));\n        function getRemoteSSRC(_x240) {\n          return _getRemoteSSRC.apply(this, arguments);\n        }\n        return getRemoteSSRC;\n      }()\n    }], [{\n      key: \"resolvePCConfiguration\",\n      value: function resolvePCConfiguration(t) {\n        var _i$iceServers, _i$iceServers2;\n        var i = {\n          iceServers: [],\n          sdpSemantics: \"plan-b\"\n        };\n        return t.iceServers ? i.iceServers = t.iceServers : t.turnServer && \"off\" !== t.turnServer.mode && (xm(t.turnServer.servers) ? i.iceServers = t.turnServer.servers : (i.iceServers && (_i$iceServers = i.iceServers).push.apply(_i$iceServers, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.servers))), HE(\"USE_TURN_SERVER_OF_GATEWAY\") && i.iceServers && t.turnServer.serversFromGateway && (_i$iceServers2 = i.iceServers).push.apply(_i$iceServers2, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.serversFromGateway))), t.turnServer.servers.concat(t.turnServer.serversFromGateway || []).forEach(function (e) {\n          e.forceturn && (i.iceTransportPolicy = \"relay\");\n        }))), i;\n      }\n    }, {\n      key: \"turnServerConfigToIceServers\",\n      value: function turnServerConfigToIceServers(e) {\n        var t = [];\n        return e.forEach(function (e) {\n          e.security ? e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turns:\".concat(e.turnServerURL, \":\").concat(e.tcpport, \"?transport=tcp\")\n          }) : (e.udpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.udpport, \"?transport=udp\")\n          }), e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.tcpport, \"?transport=tcp\")\n          }));\n        }), t;\n      }\n    }]);\n    return e;\n  }(xg)).prototype, \"connect\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"connect\"), uP.prototype), ZS(uP.prototype, \"stopSending\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"stopSending\"), uP.prototype), ZS(uP.prototype, \"receive\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"receive\"), uP.prototype), ZS(uP.prototype, \"stopReceiving\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"stopReceiving\"), uP.prototype), ZS(uP.prototype, \"muteRemote\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"muteRemote\"), uP.prototype), ZS(uP.prototype, \"unmuteRemote\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"unmuteRemote\"), uP.prototype), ZS(uP.prototype, \"muteLocal\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"muteLocal\"), uP.prototype), ZS(uP.prototype, \"unmuteLocal\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"unmuteLocal\"), uP.prototype), ZS(uP.prototype, \"close\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"close\"), uP.prototype), ZS(uP.prototype, \"updateEncoderConfig\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"updateEncoderConfig\"), uP.prototype), ZS(uP.prototype, \"updateSendParameters\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"updateSendParameters\"), uP.prototype), ZS(uP.prototype, \"replaceTrack\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"replaceTrack\"), uP.prototype), ZS(uP.prototype, \"getRemoteSSRC\", [mP], Object.getOwnPropertyDescriptor(uP.prototype, \"getRemoteSSRC\"), uP.prototype), uP);\n  function mP(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee154() {\n      var e,\n        i,\n        n,\n        o,\n        s,\n        _args154 = arguments;\n      return _regeneratorRuntime().wrap(function _callee154$(_context154) {\n        while (1) switch (_context154.prev = _context154.next) {\n          case 0:\n            e = this.mutex;\n            _context154.next = 3;\n            return e.lock(\"Locking from P2PConnection.\".concat(t));\n          case 3:\n            i = _context154.sent;\n            _context154.prev = 4;\n            for (n = _args154.length, o = new Array(n), s = 0; s < n; s++) o[s] = _args154[s];\n            _context154.next = 8;\n            return r.apply(this, o);\n          case 8:\n            return _context154.abrupt(\"return\", _context154.sent);\n          case 9:\n            _context154.prev = 9;\n            i();\n            return _context154.finish(9);\n          case 12:\n          case \"end\":\n            return _context154.stop();\n        }\n      }, _callee154, this, [[4,, 9, 12]]);\n    })), i;\n  }\n  var gP = \"9\",\n    SP = 4e4;\n  var TP = /*#__PURE__*/function () {\n    _createClass(TP, [{\n      key: \"localCapabilities\",\n      get: function get() {\n        return qR(this._localCapabilities);\n      }\n    }, {\n      key: \"rtpCapabilities\",\n      get: function get() {\n        return qR(this._rtpCapabilities);\n      }\n    }, {\n      key: \"candidates\",\n      get: function get() {\n        return qR(this._candidates);\n      }\n    }, {\n      key: \"iceParameters\",\n      get: function get() {\n        return qR(this._iceParameters);\n      }\n    }, {\n      key: \"dtlsParameters\",\n      get: function get() {\n        return qR(this._dtlsParameters);\n      }\n    }]);\n    function TP(e) {\n      _classCallCheck(this, TP);\n      mp(this, \"sessionDesc\", void 0), mp(this, \"_localCapabilities\", void 0), mp(this, \"_rtpCapabilities\", void 0), mp(this, \"_candidates\", void 0), mp(this, \"_iceParameters\", void 0), mp(this, \"_dtlsParameters\", void 0), mp(this, \"setup\", void 0), mp(this, \"currentMidIndex\", void 0), mp(this, \"cname\", void 0), mp(this, \"firefoxSsrcMidMap\", new Map()), e = qR(e);\n      var _e109 = e,\n        t = _e109.remoteIceParameters,\n        i = _e109.remoteDtlsParameters,\n        r = _e109.candidates,\n        n = _e109.remoteRTPCapabilities,\n        o = _e109.remoteSetup,\n        s = _e109.localCapabilities,\n        a = _e109.cname,\n        c = bD.exports.parse(\"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0 1\\na=msid-semantic: WMS\\na=ice-lite\\nm=video 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:0\\nm=audio 9 UDP/TLS/RTP/SAVPF 0\\nc=IN IP4 127.0.0.1\\na=rtcp:9 IN IP4 0.0.0.0\\na=sendonly\\na=rtcp-mux\\na=rtcp-rsize\\na=mid:1\\n\");\n      this._rtpCapabilities = n, this._candidates = r, this._iceParameters = t, this._dtlsParameters = i, this._localCapabilities = s, this.setup = o, this.cname = a;\n      var d = this.rtpCapabilities.send;\n      var _iterator22 = _createForOfIteratorHelper(c.mediaDescriptions),\n        _step22;\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _e110 = _step22.value;\n          if (_e110.attributes.iceUfrag = t.iceUfrag, _e110.attributes.icePwd = t.icePwd, _e110.attributes.fingerprints = i.fingerprints, _e110.attributes.candidates = r, _e110.attributes.setup = o, \"video\" === _e110.media.mediaType && (_e110.media.fmts = d.videoCodecs.map(function (e) {\n            return e.payloadType.toString(10);\n          }), _e110.attributes.payloads = d.videoCodecs, _e110.attributes.extmaps = d.videoExtensions, HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n            var _MD2 = MD([{\n                ssrcId: SP,\n                rtx: HE(\"USE_RTX\") ? 40001 : void 0\n              }], this.cname),\n              _t141 = _MD2.ssrcs,\n              _i80 = _MD2.ssrcGroups;\n            _e110.attributes.ssrcs = _t141, _e110.attributes.ssrcGroups = _i80;\n          }\n          if (\"audio\" === _e110.media.mediaType && (_e110.media.fmts = d.audioCodecs.map(function (e) {\n            return e.payloadType.toString(10);\n          }), _e110.attributes.payloads = d.audioCodecs, _e110.attributes.extmaps = d.audioExtensions, KD(_e110), HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n            var _MD3 = MD([{\n                ssrcId: 2e4\n              }], this.cname),\n              _t142 = _MD3.ssrcs,\n              _i81 = _MD3.ssrcGroups;\n            _e110.attributes.ssrcs = _t142, _e110.attributes.ssrcGroups = _i81;\n          }\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n      this.sessionDesc = c, this.currentMidIndex = c.mediaDescriptions.length - 1;\n    }\n    _createClass(TP, [{\n      key: \"preloadRemoteMedia\",\n      value: function preloadRemoteMedia() {\n        var e = HE(\"PRELOAD_MEDIA_COUNT\");\n        this.rtpCapabilities;\n        var t = this.candidates,\n          i = this.dtlsParameters,\n          r = this.iceParameters,\n          n = this.rtpCapabilities.send;\n        for (var _o23 = 1; _o23 < e; _o23++) {\n          var _e111 = 2 * _o23 + 2e4,\n            _s21 = 2 * _o23 + SP,\n            _MD4 = MD([{\n              ssrcId: _e111\n            }], this.cname),\n            _a12 = _MD4.ssrcs,\n            c = _MD4.ssrcGroups,\n            _MD5 = MD([{\n              ssrcId: _s21,\n              rtx: HE(\"USE_RTX\") ? _s21 + 1 : void 0\n            }], this.cname),\n            _d6 = _MD5.ssrcs,\n            _u4 = _MD5.ssrcGroups;\n          this.sessionDesc.mediaDescriptions.push({\n            media: {\n              mediaType: \"video\",\n              port: gP,\n              protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n              fmts: n.videoCodecs.map(function (e) {\n                return e.payloadType.toString(10);\n              })\n            },\n            connections: [{\n              nettype: \"IN\",\n              addrtype: \"IP4\",\n              address: \"127.0.0.1\"\n            }],\n            bandwidths: [],\n            attributes: {\n              iceUfrag: r.iceUfrag,\n              icePwd: r.icePwd,\n              unrecognized: [],\n              candidates: t,\n              extmaps: n.videoExtensions,\n              fingerprints: i.fingerprints,\n              imageattr: [],\n              msids: [],\n              remoteCandidatesList: [],\n              rids: [],\n              ssrcs: _d6,\n              ssrcGroups: _u4,\n              rtcpFeedbackWildcards: [],\n              payloads: n.videoCodecs,\n              rtcp: {\n                port: \"9\",\n                netType: \"IN\",\n                addressType: \"IP4\",\n                address: \"0.0.0.0\"\n              },\n              setup: this.setup,\n              direction: \"sendonly\",\n              rtcpMux: !0,\n              rtcpRsize: !0,\n              mid: \"\".concat(2 * _o23)\n            }\n          }), this.sessionDesc.mediaDescriptions.push({\n            media: {\n              mediaType: \"audio\",\n              port: gP,\n              protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n              fmts: n.audioCodecs.map(function (e) {\n                return e.payloadType.toString(10);\n              })\n            },\n            connections: [{\n              nettype: \"IN\",\n              addrtype: \"IP4\",\n              address: \"127.0.0.1\"\n            }],\n            bandwidths: [],\n            attributes: {\n              iceUfrag: r.iceUfrag,\n              icePwd: r.icePwd,\n              unrecognized: [],\n              candidates: t,\n              extmaps: n.audioExtensions,\n              fingerprints: i.fingerprints,\n              imageattr: [],\n              msids: [],\n              remoteCandidatesList: [],\n              rids: [],\n              ssrcs: _a12,\n              ssrcGroups: c,\n              rtcpFeedbackWildcards: [],\n              payloads: n.audioCodecs,\n              rtcp: {\n                port: \"9\",\n                netType: \"IN\",\n                addressType: \"IP4\",\n                address: \"0.0.0.0\"\n              },\n              setup: this.setup,\n              direction: \"sendonly\",\n              rtcpMux: !0,\n              rtcpRsize: !0,\n              mid: \"\".concat(2 * _o23 + 1)\n            }\n          }), this.currentMidIndex += 2;\n        }\n        this.updateBundleMids();\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return bD.exports.print(this.sessionDesc);\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t, i, r) {\n        var _MD6 = MD(t, this.cname, i),\n          n = _MD6.ssrcs,\n          o = _MD6.ssrcGroups,\n          s = this.findPreloadMediaDesc(n);\n        if (s) {\n          if (Qh() && this.firefoxSsrcMidMap.set(n[0].ssrcId, s.attributes.mid), r && (r.tcc || r.remb)) {\n            var _e112 = this.sessionDesc.mediaDescriptions.indexOf(s);\n            return this.sessionDesc.mediaDescriptions[_e112] = this.mungSendMediaDesc(s, r), {\n              mid: s.attributes.mid,\n              needExchangeSDP: !0\n            };\n          }\n          return {\n            mid: s.attributes.mid,\n            needExchangeSDP: !1\n          };\n        }\n        {\n          var _t143 = this.findAvailableMediaIndex(e, n);\n          var _i82;\n          return -1 === _t143 || zh() || Zh() || $h() ? (_i82 = this.createOrRecycleSendMedia(e, n, o, \"sendonly\", r), this.updateBundleMids()) : (_i82 = qR(this.sessionDesc.mediaDescriptions[_t143]), _i82.attributes.direction = \"sendonly\", _i82.attributes.ssrcs = n, _i82.attributes.ssrcGroups = o, this.sessionDesc.mediaDescriptions[_t143] = this.mungSendMediaDesc(_i82, r)), Qh() && this.firefoxSsrcMidMap.set(n[0].ssrcId, _i82.attributes.mid), {\n            mid: _i82.attributes.mid,\n            needExchangeSDP: !0\n          };\n        }\n      }\n    }, {\n      key: \"batchSend\",\n      value: function batchSend(e) {\n        var _this183 = this;\n        var t = e.map(function (e) {\n            var t = e.kind,\n              i = e.ssrcMsg,\n              r = e.mslabel;\n            return _this183.send(t, i, r);\n          }),\n          i = [];\n        var r = !1;\n        return t.forEach(function (e) {\n          var t = e.mid,\n            n = e.needExchangeSDP;\n          n && (r = !0), i.push(t);\n        }), {\n          mids: i,\n          needExchangeSDP: r\n        };\n      }\n    }, {\n      key: \"stopSending\",\n      value: function stopSending(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return t.attributes.mid && -1 !== e.indexOf(t.attributes.mid);\n        });\n        if (t.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");\n        t.forEach(function (e) {\n          \"0\" === e.attributes.mid || Qh() || zh() || Zh() ? e.attributes.ssrcs = [] : (e.attributes.ssrcs = [], e.attributes.direction = \"inactive\", e.media.port = \"0\");\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"mute\",\n      value: function mute(e) {\n        var t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!t) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.mute.\"));\n        t.attributes.direction = \"inactive\";\n      }\n    }, {\n      key: \"unmute\",\n      value: function unmute(e) {\n        var t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!t) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.unmute.\"));\n        t.attributes.direction = \"sendonly\";\n      }\n    }, {\n      key: \"muteRemote\",\n      value: function muteRemote(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return e.includes(t.attributes.mid || \"\");\n        });\n        if (t.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");\n        t.forEach(function (e) {\n          e.attributes.direction = \"inactive\";\n        });\n      }\n    }, {\n      key: \"unmuteRemote\",\n      value: function unmuteRemote(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return e.includes(t.attributes.mid || \"\");\n        });\n        if (t.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");\n        t.forEach(function (e) {\n          e.attributes.direction = \"recvonly\";\n        });\n      }\n    }, {\n      key: \"receive\",\n      value: function receive(e, t, i, r) {\n        var _this184 = this;\n        e.forEach(function (e, n) {\n          _this184.createOrRecycleRecvMedia(e, [], \"recvonly\", t, i, r[n]);\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"stopReceiving\",\n      value: function stopReceiving(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return -1 !== e.indexOf(t.attributes.mid);\n        });\n        if (t.length !== e.length) throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");\n        t.forEach(function (e) {\n          e.media.port = \"0\", e.attributes.direction = \"inactive\";\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"restartICE\",\n      value: function restartICE(e) {\n        e = qR(e), this._iceParameters = e, this.sessionDesc.mediaDescriptions.forEach(function (t) {\n          t.attributes.iceUfrag = e.iceUfrag, t.attributes.icePwd = e.icePwd;\n        });\n      }\n    }, {\n      key: \"predictReceivingMids\",\n      value: function predictReceivingMids(e) {\n        var t = [];\n        for (var i = 0; i < e; i++) t.push((this.currentMidIndex + i + 1).toString(10));\n        return t;\n      }\n    }, {\n      key: \"findAvailableMediaIndex\",\n      value: function findAvailableMediaIndex(e, t) {\n        var _this185 = this;\n        return this.sessionDesc.mediaDescriptions.findIndex(function (i) {\n          var r = i.media.mediaType === e && \"0\" !== i.media.port && (\"sendonly\" === i.attributes.direction || \"sendrecv\" === i.attributes.direction) && 0 === i.attributes.ssrcs.length;\n          if (Qh()) {\n            if (r) {\n              var _e113 = _this185.firefoxSsrcMidMap.get(t[0].ssrcId);\n              return !(_e113 || \"0\" !== i.attributes.mid && \"1\" !== i.attributes.mid) || !(!_e113 || _e113 !== i.attributes.mid);\n            }\n            return !1;\n          }\n          return r;\n        });\n      }\n    }, {\n      key: \"createOrRecycleRecvMedia\",\n      value: function createOrRecycleRecvMedia(e, t, i, r, n, o) {\n        var s = e._mediaStreamTrack.kind,\n          a = this.rtpCapabilities.recv,\n          c = this.localCapabilities.send;\n        var d = [];\n        if (s === yg.VIDEO) {\n          var u, l;\n          if (HE(\"H264_PROFILE_LEVEL_ID\") && \"h264\" === r && (d = a.videoCodecs.filter(function (e) {\n            var t, i;\n            return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(r) && (null == e || null === (i = e.fmtp) || void 0 === i ? void 0 : i.parameters[\"profile-level-id\"]) === HE(\"H264_PROFILE_LEVEL_ID\");\n          })), !d || 0 === (null === (u = d) || void 0 === u ? void 0 : u.length)) {\n            var _e114 = c.videoCodecs.filter(function (e) {\n              var t;\n              return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(r);\n            });\n            0 !== _e114.length && (d = a.videoCodecs.filter(function (t) {\n              return _e114.some(function (e) {\n                return e.payloadType === t.payloadType;\n              });\n            }));\n          }\n          if (HE(\"USE_RTX\")) {\n            var _e115 = d.map(function (e) {\n                return e.payloadType.toString();\n              }),\n              _t144 = a.videoCodecs.filter(function (t) {\n                var i, r;\n                return \"rtx\" === (null === (i = t.rtpMap) || void 0 === i ? void 0 : i.encodingName) && _e115.includes((null === (r = t.fmtp) || void 0 === r ? void 0 : r.parameters.apt) || \"\");\n              });\n            d = [].concat(_toConsumableArray(d), _toConsumableArray(_t144));\n          }\n          if (0 === d.length) NE.warning(\"codec \".concat(r, \" not included in rtpCapabilities, fallback to default payloads: \").concat(null === (l = a.videoCodecs[0].rtpMap) || void 0 === l ? void 0 : l.encodingName)), d = a.videoCodecs;\n        } else d = a.audioCodecs.filter(function (e) {\n          var t;\n          return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(n);\n        }), 0 === d.length && (NE.warning(\"codec \".concat(n, \" not included in rtpCapabilities, fallback to opus\")), d = a.audioCodecs.filter(function (e) {\n          var t;\n          return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(\"opus\");\n        }));\n        var h = s === yg.VIDEO ? a.videoExtensions : a.audioExtensions;\n        this.currentMidIndex += 1;\n        var p = \"\".concat(this.currentMidIndex);\n        var _ = {\n          media: {\n            mediaType: s,\n            port: gP,\n            protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n            fmts: d.map(function (e) {\n              return e.payloadType.toString(10);\n            })\n          },\n          connections: [{\n            nettype: \"IN\",\n            addrtype: \"IP4\",\n            address: \"127.0.0.1\"\n          }],\n          bandwidths: [],\n          attributes: {\n            iceUfrag: this.iceParameters.iceUfrag,\n            icePwd: this.iceParameters.icePwd,\n            unrecognized: [],\n            candidates: this.candidates,\n            extmaps: h,\n            fingerprints: this.dtlsParameters.fingerprints,\n            imageattr: [],\n            msids: [],\n            remoteCandidatesList: [],\n            rids: [],\n            ssrcs: t,\n            ssrcGroups: [],\n            rtcpFeedbackWildcards: [],\n            payloads: d,\n            rtcp: {\n              port: \"9\",\n              netType: \"IN\",\n              addressType: \"IP4\",\n              address: \"0.0.0.0\"\n            },\n            setup: this.setup,\n            direction: i,\n            rtcpMux: !0,\n            rtcpRsize: !0,\n            mid: \"\".concat(p)\n          }\n        };\n        _ = this.mungRecvMediaDsec(_, e, o);\n        var E = this.findFirstClosedMedia(s);\n        if (E) {\n          var _e116 = this.sessionDesc.mediaDescriptions.indexOf(E);\n          this.sessionDesc.mediaDescriptions[_e116] = _;\n        } else this.sessionDesc.mediaDescriptions.push(_);\n        return _;\n      }\n    }, {\n      key: \"createOrRecycleSendMedia\",\n      value: function createOrRecycleSendMedia(e, t, i, r, n) {\n        var o = this.rtpCapabilities.send,\n          s = e === yg.VIDEO ? o.videoCodecs : o.audioCodecs,\n          a = e === yg.VIDEO ? o.videoExtensions : o.audioExtensions;\n        this.currentMidIndex += 1;\n        var c = \"\".concat(this.currentMidIndex);\n        var d = {\n          media: {\n            mediaType: e,\n            port: gP,\n            protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n            fmts: s.map(function (e) {\n              return e.payloadType.toString(10);\n            })\n          },\n          connections: [{\n            nettype: \"IN\",\n            addrtype: \"IP4\",\n            address: \"127.0.0.1\"\n          }],\n          bandwidths: [],\n          attributes: {\n            iceUfrag: this.iceParameters.iceUfrag,\n            icePwd: this.iceParameters.icePwd,\n            unrecognized: [],\n            candidates: this.candidates,\n            extmaps: a,\n            fingerprints: this.dtlsParameters.fingerprints,\n            imageattr: [],\n            msids: [],\n            remoteCandidatesList: [],\n            rids: [],\n            ssrcs: t,\n            ssrcGroups: i,\n            rtcpFeedbackWildcards: [],\n            payloads: s,\n            rtcp: {\n              port: \"9\",\n              netType: \"IN\",\n              addressType: \"IP4\",\n              address: \"0.0.0.0\"\n            },\n            setup: this.setup,\n            direction: r,\n            rtcpMux: !0,\n            rtcpRsize: !0,\n            mid: \"\".concat(c)\n          }\n        };\n        d = this.mungSendMediaDesc(d, n);\n        var u = this.findFirstClosedMedia(e);\n        if (u) {\n          var _e117 = this.sessionDesc.mediaDescriptions.indexOf(u);\n          this.sessionDesc.mediaDescriptions[_e117] = d;\n        } else this.sessionDesc.mediaDescriptions.push(d);\n        return d;\n      }\n    }, {\n      key: \"updateBundleMids\",\n      value: function updateBundleMids() {\n        this.sessionDesc.attributes.groups[0].identificationTag = this.sessionDesc.mediaDescriptions.filter(function (e) {\n          return \"0\" !== e.media.port;\n        }).map(function (e) {\n          return e.attributes.mid;\n        });\n      }\n    }, {\n      key: \"mungRecvMediaDsec\",\n      value: function mungRecvMediaDsec(e, t, i) {\n        var r = qR(e);\n        return xD(r), UD(r, t), VD(r, t), jD(r), FD(r, i, this.localCapabilities.send), r;\n      }\n    }, {\n      key: \"mungSendMediaDesc\",\n      value: function mungSendMediaDesc(e, t) {\n        var i = qR(e);\n        return FD(i, t, this.localCapabilities.recv), KD(i), i;\n      }\n    }, {\n      key: \"updateRecvMedia\",\n      value: function updateRecvMedia(e, t) {\n        var i = this.sessionDesc.mediaDescriptions.findIndex(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (-1 !== i) {\n          var _e118 = this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i], t);\n          this.sessionDesc.mediaDescriptions[i] = _e118;\n        }\n      }\n    }, {\n      key: \"bumpMid\",\n      value: function bumpMid(e) {\n        this.currentMidIndex += e;\n      }\n    }, {\n      key: \"findFirstClosedMedia\",\n      value: function findFirstClosedMedia(e) {\n        return this.sessionDesc.mediaDescriptions.find(function (t) {\n          return Qh() ? \"0\" === t.media.port && t.media.mediaType === e : \"0\" === t.media.port;\n        });\n      }\n    }, {\n      key: \"findPreloadMediaDesc\",\n      value: function findPreloadMediaDesc(e) {\n        return this.sessionDesc.mediaDescriptions.find(function (t) {\n          var i, r;\n          return (null === (i = t.attributes) || void 0 === i || null === (r = i.ssrcs[0]) || void 0 === r ? void 0 : r.ssrcId) === e[0].ssrcId;\n        });\n      }\n    }, {\n      key: \"getSSRC\",\n      value: function getSSRC(e) {\n        var t;\n        return null === (t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        })) || void 0 === t ? void 0 : t.attributes.ssrcs;\n      }\n    }]);\n    return TP;\n  }();\n  var vP;\n  function RP(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function IP(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? RP(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : RP(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var yP = (ZS((vP = /*#__PURE__*/function (_xg2) {\n    _inherits(e, _xg2);\n    _createClass(e, [{\n      key: \"currentLocalDescription\",\n      get: function get() {\n        return this.peerConnection.currentLocalDescription;\n      }\n    }, {\n      key: \"currentRemoteDescription\",\n      get: function get() {\n        return this.peerConnection.currentRemoteDescription;\n      }\n    }, {\n      key: \"peerConnectionState\",\n      get: function get() {\n        return this.peerConnection.connectionState;\n      }\n    }, {\n      key: \"iceConnectionState\",\n      get: function get() {\n        return this.peerConnection.iceConnectionState;\n      }\n    }]);\n    function e(t, i) {\n      var _this186;\n      _classCallCheck(this, e);\n      _this186 = _possibleConstructorReturn(this, _getPrototypeOf(e).call(this, t, i)), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"peerConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"remoteSDP\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"initialOffer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"transportEventReceiver\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"statsFilter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"useRTX\", HE(\"USE_RTX\")), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"localCapabilities\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"localCandidateCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"allCandidatesReceived\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this186)), \"mutex\", new OT(\"P2PConnection-mutex\")), _this186.store = i, _this186.peerConnection = new RTCPeerConnection(e.resolvePCConfiguration(t), {\n        optional: [{\n          googDscp: !0\n        }]\n      }), _this186.statsFilter = pP(_this186.peerConnection, void 0, void 0, Qh() ? 1200 : void 0), _this186.bindPCEvents(), _this186.bindStatsEvents(), _this186.store.p2pId = _this186.store.p2pId + 1;\n      return _this186;\n    }\n    _createClass(e, [{\n      key: \"establish\",\n      value: function () {\n        var _establish2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee155() {\n          var _e119, t, i;\n          return _regeneratorRuntime().wrap(function _callee155$(_context155) {\n            while (1) switch (_context155.prev = _context155.next) {\n              case 0:\n                _context155.prev = 0;\n                this.peerConnection.addTransceiver(\"video\", {\n                  direction: \"recvonly\"\n                }), this.peerConnection.addTransceiver(\"audio\", {\n                  direction: \"recvonly\"\n                });\n                _context155.next = 4;\n                return this.peerConnection.createOffer();\n              case 4:\n                _e119 = _context155.sent;\n                if (_e119.sdp) {\n                  _context155.next = 7;\n                  break;\n                }\n                throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");\n              case 7:\n                t = PD(_e119.sdp);\n                _context155.next = 10;\n                return GD(!this.useRTX, HE(\"FILTER_VIDEO_FEC\"), HE(\"FILTER_AUDIO_FEC\"));\n              case 10:\n                i = _context155.sent;\n                return _context155.abrupt(\"return\", (this.localCapabilities = HD(i), this.initialOffer = _e119, IP(IP({}, t), {}, {\n                  rtpCapabilities: i,\n                  offerSDP: _e119.sdp\n                })));\n              case 14:\n                _context155.prev = 14;\n                _context155.t0 = _context155[\"catch\"](0);\n                throw new vE(TE.GET_LOCAL_CONNECTION_PARAMS_FAILED, _context155.t0.toString());\n              case 17:\n              case \"end\":\n                return _context155.stop();\n            }\n          }, _callee155, this, [[0, 14]]);\n        }));\n        function establish() {\n          return _establish2.apply(this, arguments);\n        }\n        return establish;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee156(e, t, i, r, n, o) {\n          var _s22, _a13, c, _d7, _u5, _l3, _e120, _t145;\n          return _regeneratorRuntime().wrap(function _callee156$(_context156) {\n            while (1) switch (_context156.prev = _context156.next) {\n              case 0:\n                _context156.prev = 0;\n                if (this.initialOffer) {\n                  _context156.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot establish P2PConnection without initial offer.\");\n              case 3:\n                this.remoteSDP = new TP({\n                  remoteIceParameters: e,\n                  remoteDtlsParameters: t,\n                  candidates: i,\n                  remoteRTPCapabilities: r,\n                  remoteSetup: n,\n                  localCapabilities: this.localCapabilities,\n                  cname: o\n                });\n                _s22 = this.remoteSDP.toString(), _a13 = bD.exports.parse(this.initialOffer.sdp), c = _a13.mediaDescriptions.find(function (e) {\n                  return \"audio\" === e.media.mediaType;\n                });\n                c && KD(c);\n                _d7 = bD.exports.print(_a13), _u5 = this.logSDPExchange(_d7 || \"\", \"offer\", \"local\", \"connect\");\n                _context156.next = 9;\n                return this.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: _d7\n                });\n              case 9:\n                null == _u5 || _u5(_s22);\n                _context156.next = 12;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _s22\n                });\n              case 12:\n                _l3 = this.peerConnection.getTransceivers()[0];\n                if (!(null != _l3 && _l3.receiver && this.tryBindTransportEvents(_l3.receiver), HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n                  _context156.next = 23;\n                  break;\n                }\n                this.remoteSDP.preloadRemoteMedia();\n                _e120 = this.remoteSDP.toString();\n                _context156.next = 18;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: _e120\n                });\n              case 18:\n                _context156.next = 20;\n                return this.peerConnection.createAnswer();\n              case 20:\n                _t145 = _context156.sent;\n                _context156.next = 23;\n                return this.peerConnection.setLocalDescription(_t145);\n              case 23:\n                _context156.next = 28;\n                break;\n              case 25:\n                _context156.prev = 25;\n                _context156.t0 = _context156[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.connect failed; \".concat(_context156.t0.toString()));\n              case 28:\n              case \"end\":\n                return _context156.stop();\n            }\n          }, _callee156, this, [[0, 25]]);\n        }));\n        function connect(_x241, _x242, _x243, _x244, _x245, _x246) {\n          return _connect5.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"send\",\n      value: function send(e, t, i) {\n        var r = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee157() {\n          var n, _o24, _s23, _a14, c, _d8, _u6, _l4, _o25, _h3, _p3;\n          return _regeneratorRuntime().wrap(function _callee157$(_context157) {\n            while (1) switch (_context157.prev = _context157.next) {\n              case 0:\n                _context157.next = 2;\n                return yD(r.mutex.lock(\"From P2PConnection.send\"));\n              case 2:\n                n = _context157.sent;\n                _context157.prev = 3;\n                if (r.remoteSDP) {\n                  _context157.next = 6;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.send before remote SDP created\");\n              case 6:\n                _o24 = [];\n                e.forEach(function (e) {\n                  var t = r.peerConnection.addTransceiver(e._mediaStreamTrack, {\n                    direction: \"sendonly\"\n                  });\n                  _o24.push(t);\n                });\n                _context157.t0 = Qh() && !0 === HE(\"SIMULCAST\");\n                if (!_context157.t0) {\n                  _context157.next = 12;\n                  break;\n                }\n                _context157.next = 12;\n                return yD(r.applySimulcastForFirefox(_o24, e));\n              case 12:\n                _context157.next = 14;\n                return yD(r.peerConnection.createOffer());\n              case 14:\n                _s23 = _context157.sent;\n                _a14 = r.remoteSDP.predictReceivingMids(e.length);\n                c = r.mungSendOfferSDP(_s23.sdp, e, _a14);\n                _d8 = bD.exports.parse(c);\n                _u6 = _a14.map(function (e) {\n                  var t = _d8.mediaDescriptions.find(function (t) {\n                    return t.attributes.mid === e;\n                  });\n                  if (!t) throw new Error(\"Cannot extract ssrc from mediaDescription.\");\n                  return LD(t, r.useRTX);\n                });\n                _context157.prev = 19;\n                _context157.next = 22;\n                return _u6;\n              case 22:\n                _l4 = _context157.sent;\n                _context157.next = 36;\n                break;\n              case 25:\n                _context157.prev = 25;\n                _context157.t1 = _context157[\"catch\"](19);\n                _l4 = [], r.remoteSDP.receive(e, t, i, _l4);\n                _o25 = r.remoteSDP.toString();\n                _context157.next = 31;\n                return yD(r.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: c\n                }));\n              case 31:\n                _context157.next = 33;\n                return yD(r.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _o25\n                }));\n              case 33:\n                _context157.next = 35;\n                return yD(r.stopSending(_a14, !0));\n              case 35:\n                throw _context157.t1;\n              case 36:\n                r.remoteSDP.receive(e, t, i, _l4);\n                _h3 = r.remoteSDP.toString(), _p3 = r.logSDPExchange(c, \"offer\", \"local\", \"send\");\n                _context157.next = 40;\n                return yD(r.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: c\n                }));\n              case 40:\n                _context157.next = 42;\n                return yD(r.applySimulcastEncodings(_o24, e));\n              case 42:\n                _context157.next = 44;\n                return yD(r.applySendEncodings(_o24, e));\n              case 44:\n                null == _p3 || _p3(_h3);\n                _context157.next = 47;\n                return yD(r.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _h3\n                }));\n              case 47:\n                return _context157.abrupt(\"return\", _o24.map(function (e, t) {\n                  var i = _a14[t];\n                  return {\n                    localSSRC: _u6[t],\n                    id: i,\n                    transceiver: e\n                  };\n                }));\n              case 50:\n                _context157.prev = 50;\n                _context157.t2 = _context157[\"catch\"](3);\n                throw _context157.t2 instanceof vE ? _context157.t2 : new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.send failed; \".concat(_context157.t2.toString()));\n              case 53:\n                _context157.prev = 53;\n                n();\n                return _context157.finish(53);\n              case 56:\n              case \"end\":\n                return _context157.stop();\n            }\n          }, _callee157, null, [[3, 50, 53, 56], [19, 25]]);\n        }))();\n      }\n    }, {\n      key: \"stopSending\",\n      value: function () {\n        var _stopSending2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee158(e, t) {\n          var i, _t146, r, _n36, _o26;\n          return _regeneratorRuntime().wrap(function _callee158$(_context158) {\n            while (1) switch (_context158.prev = _context158.next) {\n              case 0:\n                if (!t) {\n                  _context158.next = 4;\n                  break;\n                }\n                _context158.t0 = void 0;\n                _context158.next = 7;\n                break;\n              case 4:\n                _context158.next = 6;\n                return this.mutex.lock(\"From P2PConnection.stopSending\");\n              case 6:\n                _context158.t0 = _context158.sent;\n              case 7:\n                i = _context158.t0;\n                _context158.prev = 8;\n                if (this.remoteSDP) {\n                  _context158.next = 11;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.stopSending before remote SDP created\");\n              case 11:\n                _t146 = this.peerConnection.getTransceivers().filter(function (t) {\n                  return -1 !== e.indexOf(t.mid);\n                });\n                if (!(_t146.length !== e.length)) {\n                  _context158.next = 14;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.\");\n              case 14:\n                _t146.map(function (e) {\n                  var t;\n                  e.direction = \"inactive\", null === (t = e.stop) || void 0 === t || t.call(e);\n                });\n                _context158.next = 17;\n                return this.peerConnection.createOffer();\n              case 17:\n                r = _context158.sent;\n                _n36 = this.logSDPExchange(r.sdp || \"\", \"offer\", \"local\", \"stopSending\");\n                _context158.next = 21;\n                return this.peerConnection.setLocalDescription(r);\n              case 21:\n                this.remoteSDP.stopReceiving(e);\n                _o26 = this.remoteSDP.toString();\n                null == _n36 || _n36(_o26);\n                _context158.next = 26;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _o26\n                });\n              case 26:\n                _context158.next = 31;\n                break;\n              case 28:\n                _context158.prev = 28;\n                _context158.t1 = _context158[\"catch\"](8);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.stopSending failed; \".concat(_context158.t1.toString()));\n              case 31:\n                _context158.prev = 31;\n                i && i();\n                return _context158.finish(31);\n              case 34:\n              case \"end\":\n                return _context158.stop();\n            }\n          }, _callee158, this, [[8, 28, 31, 34]]);\n        }));\n        function stopSending(_x247, _x248) {\n          return _stopSending2.apply(this, arguments);\n        }\n        return stopSending;\n      }()\n    }, {\n      key: \"receive\",\n      value: function () {\n        var _receive2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee159(e, t, i, r) {\n          var _this$remoteSDP$send2, _n37, _o27, _t147, _i83, _r46, _o28, _s24;\n          return _regeneratorRuntime().wrap(function _callee159$(_context159) {\n            while (1) switch (_context159.prev = _context159.next) {\n              case 0:\n                _context159.prev = 0;\n                if (this.remoteSDP) {\n                  _context159.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.receive \".concat(e, \" before remoteSDP created.\"));\n              case 3:\n                _this$remoteSDP$send2 = this.remoteSDP.send(e, t, i, r), _n37 = _this$remoteSDP$send2.mid, _o27 = _this$remoteSDP$send2.needExchangeSDP;\n                if (!_o27) {\n                  _context159.next = 18;\n                  break;\n                }\n                _t147 = this.remoteSDP.toString(), _i83 = this.logSDPExchange(_t147, \"offer\", \"remote\", \"receive\");\n                _context159.next = 8;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: _t147\n                });\n              case 8:\n                _context159.next = 10;\n                return this.peerConnection.createAnswer();\n              case 10:\n                _r46 = _context159.sent;\n                _o28 = this.mungReceiveAnswerSDP(_r46.sdp, _n37, e);\n                null == _i83 || _i83(_o28 || \"\");\n                _context159.next = 15;\n                return this.peerConnection.setLocalDescription({\n                  type: \"answer\",\n                  sdp: _o28\n                });\n              case 15:\n                NE.debug(\"[P2PConnection] receive \".concat(e, \" by exchanging SDP.\"));\n                _context159.next = 19;\n                break;\n              case 18:\n                NE.debug(\"[P2PConnection] receive \".concat(e, \" no need to exchange SDP.\"));\n              case 19:\n                _s24 = this.peerConnection.getTransceivers().find(function (e) {\n                  return e.mid === _n37;\n                });\n                if (_s24) {\n                  _context159.next = 22;\n                  break;\n                }\n                throw new Error(\"Cannot get transceiver after setLocalDescription.\");\n              case 22:\n                return _context159.abrupt(\"return\", {\n                  track: _s24.receiver.track,\n                  id: _n37\n                });\n              case 25:\n                _context159.prev = 25;\n                _context159.t0 = _context159[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.receive failed; \".concat(_context159.t0.toString()));\n              case 28:\n              case \"end\":\n                return _context159.stop();\n            }\n          }, _callee159, this, [[0, 25]]);\n        }));\n        function receive(_x249, _x250, _x251, _x252) {\n          return _receive2.apply(this, arguments);\n        }\n        return receive;\n      }()\n    }, {\n      key: \"batchReceive\",\n      value: function () {\n        var _batchReceive2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee160(e) {\n          var _this187 = this;\n          var _this$remoteSDP$batch, t, i, _e121, _t148, _i84;\n          return _regeneratorRuntime().wrap(function _callee160$(_context160) {\n            while (1) switch (_context160.prev = _context160.next) {\n              case 0:\n                _context160.prev = 0;\n                if (this.remoteSDP) {\n                  _context160.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.batchReceive before remoteSDP created.\");\n              case 3:\n                _this$remoteSDP$batch = this.remoteSDP.batchSend(e), t = _this$remoteSDP$batch.mids, i = _this$remoteSDP$batch.needExchangeSDP;\n                if (!i) {\n                  _context160.next = 17;\n                  break;\n                }\n                _e121 = this.remoteSDP.toString(), _t148 = this.logSDPExchange(_e121, \"offer\", \"remote\", \"receive\");\n                _context160.next = 8;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: _e121\n                });\n              case 8:\n                _context160.next = 10;\n                return this.peerConnection.createAnswer();\n              case 10:\n                _i84 = _context160.sent;\n                null == _t148 || _t148(_i84.sdp || \"\");\n                _context160.next = 14;\n                return this.peerConnection.setLocalDescription(_i84);\n              case 14:\n                NE.debug(\"[P2PConnection] batchReceive by exchanging SDP.\");\n                _context160.next = 18;\n                break;\n              case 17:\n                NE.debug(\"[P2PConnection] batchReceive no need to exchange SDP.\");\n              case 18:\n                return _context160.abrupt(\"return\", t.map(function (e) {\n                  var t = _this187.peerConnection.getTransceivers().find(function (t) {\n                    return t.mid === e;\n                  });\n                  if (!t) throw new Error(\"Cannot get transceiver after setLocalDescription.\");\n                  return {\n                    track: t.receiver.track,\n                    id: e\n                  };\n                }));\n              case 21:\n                _context160.prev = 21;\n                _context160.t0 = _context160[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.receive failed; \".concat(_context160.t0.toString()));\n              case 24:\n              case \"end\":\n                return _context160.stop();\n            }\n          }, _callee160, this, [[0, 21]]);\n        }));\n        function batchReceive(_x253) {\n          return _batchReceive2.apply(this, arguments);\n        }\n        return batchReceive;\n      }()\n    }, {\n      key: \"stopReceiving\",\n      value: function () {\n        var _stopReceiving2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee161(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee161$(_context161) {\n            while (1) switch (_context161.prev = _context161.next) {\n              case 0:\n                _context161.prev = 0;\n                if (this.remoteSDP) {\n                  _context161.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.stopReceiving before remote SDP created.\");\n              case 3:\n                this.remoteSDP.stopSending(e);\n                t = this.remoteSDP.toString(), i = this.logSDPExchange(t, \"offer\", \"remote\", \"stopReceiving\");\n                _context161.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context161.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                r = _context161.sent;\n                null == i || i(r.sdp || \"\");\n                _context161.next = 13;\n                return this.peerConnection.setLocalDescription(r);\n              case 13:\n                _context161.next = 18;\n                break;\n              case 15:\n                _context161.prev = 15;\n                _context161.t0 = _context161[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection stopReceiving failed; \".concat(_context161.t0.toString()));\n              case 18:\n              case \"end\":\n                return _context161.stop();\n            }\n          }, _callee161, this, [[0, 15]]);\n        }));\n        function stopReceiving(_x254) {\n          return _stopReceiving2.apply(this, arguments);\n        }\n        return stopReceiving;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee162(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee162$(_context162) {\n            while (1) switch (_context162.prev = _context162.next) {\n              case 0:\n                _context162.prev = 0;\n                if (this.remoteSDP) {\n                  _context162.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.muteRemote mid=\".concat(e, \" before remote SDP created.\"));\n              case 3:\n                this.remoteSDP.mute(e);\n                t = this.remoteSDP.toString(), i = this.logSDPExchange(t, \"offer\", \"remote\", \"muteRemote\");\n                _context162.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context162.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                r = _context162.sent;\n                null == i || i(r.sdp || \"\");\n                _context162.next = 13;\n                return this.peerConnection.setLocalDescription(r);\n              case 13:\n                _context162.next = 18;\n                break;\n              case 15:\n                _context162.prev = 15;\n                _context162.t0 = _context162[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.muteRemote failed; \".concat(_context162.t0.toString()));\n              case 18:\n              case \"end\":\n                return _context162.stop();\n            }\n          }, _callee162, this, [[0, 15]]);\n        }));\n        function muteRemote(_x255) {\n          return _muteRemote2.apply(this, arguments);\n        }\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee163(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee163$(_context163) {\n            while (1) switch (_context163.prev = _context163.next) {\n              case 0:\n                _context163.prev = 0;\n                if (this.remoteSDP) {\n                  _context163.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.unmuteRemote mid=\".concat(e, \" before remote SDP created.\"));\n              case 3:\n                this.remoteSDP.unmute(e);\n                t = this.remoteSDP.toString(), i = this.logSDPExchange(t, \"offer\", \"remote\", \"unmuteRemote\");\n                _context163.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context163.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                r = _context163.sent;\n                null == i || i(r.sdp || \"\");\n                _context163.next = 13;\n                return this.peerConnection.setLocalDescription(r);\n              case 13:\n                _context163.next = 18;\n                break;\n              case 15:\n                _context163.prev = 15;\n                _context163.t0 = _context163[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.unmuteRemote failed; \".concat(_context163.t0.toString()));\n              case 18:\n              case \"end\":\n                return _context163.stop();\n            }\n          }, _callee163, this, [[0, 15]]);\n        }));\n        function unmuteRemote(_x256) {\n          return _unmuteRemote2.apply(this, arguments);\n        }\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee164(e) {\n          var t, i, r, _n38;\n          return _regeneratorRuntime().wrap(function _callee164$(_context164) {\n            while (1) switch (_context164.prev = _context164.next) {\n              case 0:\n                _context164.prev = 0;\n                if (this.remoteSDP) {\n                  _context164.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.muteLocal before remote SDP created.\");\n              case 3:\n                t = this.peerConnection.getTransceivers().filter(function (t) {\n                  return t.mid && -1 !== e.indexOf(t.mid);\n                });\n                if (!(t.length !== e.length)) {\n                  _context164.next = 6;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length.\");\n              case 6:\n                t.map(function (e) {\n                  e.direction = \"inactive\";\n                });\n                _context164.next = 9;\n                return this.peerConnection.createOffer();\n              case 9:\n                i = _context164.sent;\n                r = this.logSDPExchange(i.sdp || \"\", \"offer\", \"local\", \"muteLocal\");\n                _context164.next = 13;\n                return this.peerConnection.setLocalDescription(i);\n              case 13:\n                this.remoteSDP.muteRemote(e);\n                _n38 = this.remoteSDP.toString();\n                null == r || r(_n38);\n                _context164.next = 18;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _n38\n                });\n              case 18:\n                _context164.next = 23;\n                break;\n              case 20:\n                _context164.prev = 20;\n                _context164.t0 = _context164[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.muteLocal failed; \".concat(_context164.t0.toString()));\n              case 23:\n              case \"end\":\n                return _context164.stop();\n            }\n          }, _callee164, this, [[0, 20]]);\n        }));\n        function muteLocal(_x257) {\n          return _muteLocal3.apply(this, arguments);\n        }\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee166(e) {\n          var t, i, r, _n39;\n          return _regeneratorRuntime().wrap(function _callee166$(_context166) {\n            while (1) switch (_context166.prev = _context166.next) {\n              case 0:\n                _context166.prev = 0;\n                if (this.remoteSDP) {\n                  _context166.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.unmuteLocal before remote SDP created.\");\n              case 3:\n                t = this.peerConnection.getTransceivers().filter(function (t) {\n                  return t.mid && -1 !== e.indexOf(t.mid);\n                });\n                if (!(t.length !== e.length)) {\n                  _context166.next = 6;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length.\");\n              case 6:\n                t.map( /*#__PURE__*/function () {\n                  var _ref47 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee165(e, t) {\n                    return _regeneratorRuntime().wrap(function _callee165$(_context165) {\n                      while (1) switch (_context165.prev = _context165.next) {\n                        case 0:\n                          e.direction = \"sendonly\";\n                        case 1:\n                        case \"end\":\n                          return _context165.stop();\n                      }\n                    }, _callee165);\n                  }));\n                  return function (_x259, _x260) {\n                    return _ref47.apply(this, arguments);\n                  };\n                }());\n                _context166.next = 9;\n                return this.peerConnection.createOffer();\n              case 9:\n                i = _context166.sent;\n                r = this.logSDPExchange(i.sdp || \"\", \"offer\", \"local\", \"unmuteLocal\");\n                _context166.next = 13;\n                return this.peerConnection.setLocalDescription(i);\n              case 13:\n                this.remoteSDP.unmuteRemote(e);\n                _n39 = this.remoteSDP.toString();\n                null == r || r(_n39);\n                _context166.next = 18;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _n39\n                });\n              case 18:\n                _context166.next = 23;\n                break;\n              case 20:\n                _context166.prev = 20;\n                _context166.t0 = _context166[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"P2PConnection.unmuteLocal failed; \".concat(_context166.t0.toString()));\n              case 23:\n              case \"end\":\n                return _context166.stop();\n            }\n          }, _callee166, this, [[0, 20]]);\n        }));\n        function unmuteLocal(_x258) {\n          return _unmuteLocal3.apply(this, arguments);\n        }\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"restartICE\",\n      value: function restartICE() {\n        var e = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee167() {\n          var t, i, r, _yield$r$iceParameter2, _n40, _o29, _s25;\n          return _regeneratorRuntime().wrap(function _callee167$(_context167) {\n            while (1) switch (_context167.prev = _context167.next) {\n              case 0:\n                _context167.next = 2;\n                return yD(e.mutex.lock(\"From P2PConnection.restartICE\"));\n              case 2:\n                t = _context167.sent;\n                _context167.prev = 3;\n                _context167.next = 6;\n                return yD(e.peerConnection.createOffer({\n                  iceRestart: !0\n                }));\n              case 6:\n                i = _context167.sent;\n                if (i.sdp) {\n                  _context167.next = 9;\n                  break;\n                }\n                throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");\n              case 9:\n                r = PD(i.sdp);\n                _context167.next = 12;\n                return r.iceParameters;\n              case 12:\n                _yield$r$iceParameter2 = _context167.sent;\n                _n40 = _yield$r$iceParameter2.remoteIceParameters;\n                if (e.remoteSDP) {\n                  _context167.next = 16;\n                  break;\n                }\n                throw new Error(\"Cannot restartICE before remoteSDP created.\");\n              case 16:\n                e.remoteSDP.restartICE(_n40);\n                _o29 = e.remoteSDP.toString(), _s25 = e.logSDPExchange(i.sdp || \"\", \"offer\", \"local\", \"restartICE\");\n                _context167.next = 20;\n                return yD(e.peerConnection.setLocalDescription(i));\n              case 20:\n                null == _s25 || _s25(_o29);\n                _context167.next = 23;\n                return yD(e.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _o29\n                }));\n              case 23:\n                _context167.next = 28;\n                break;\n              case 25:\n                _context167.prev = 25;\n                _context167.t0 = _context167[\"catch\"](3);\n                NE.warning(\"restart ICE failed, abort operation\", _context167.t0);\n              case 28:\n                _context167.prev = 28;\n                t();\n                return _context167.finish(28);\n              case 31:\n              case \"end\":\n                return _context167.stop();\n            }\n          }, _callee167, null, [[3, 25, 28, 31]]);\n        }))();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        this.peerConnection.close(), null === (e = this.onConnectionStateChange) || void 0 === e || e.call(this, \"closed\"), this.tryUnbindTransportEvents(), this.unbindPCEvents(), this.unbindStatsEvents(), this.removeAllListeners(), this.transportEventReceiver = void 0, this.statsFilter.destroy();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        return this.statsFilter.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        return this.statsFilter.getVideoIsReady(e);\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function () {\n        var _updateEncoderConfig2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee168(e, t) {\n          var i, r, _n41, _o30;\n          return _regeneratorRuntime().wrap(function _callee168$(_context168) {\n            while (1) switch (_context168.prev = _context168.next) {\n              case 0:\n                _context168.prev = 0;\n                if (this.remoteSDP) {\n                  _context168.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call P2PConnection.updateEncoderConfig before remote SDP created.\");\n              case 3:\n                _context168.next = 5;\n                return this.peerConnection.createOffer();\n              case 5:\n                i = _context168.sent;\n                r = this.mungSendOfferSDP(i.sdp, [t], [e]);\n                this.remoteSDP.updateRecvMedia(e, t);\n                _n41 = this.remoteSDP.toString(), _o30 = this.logSDPExchange(r, \"offer\", \"local\", \"updateEncoderConfig\");\n                _context168.next = 11;\n                return this.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: r\n                });\n              case 11:\n                null == _o30 || _o30(_n41);\n                _context168.next = 14;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _n41\n                });\n              case 14:\n                _context168.next = 19;\n                break;\n              case 16:\n                _context168.prev = 16;\n                _context168.t0 = _context168[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, _context168.t0.toString());\n              case 19:\n              case \"end\":\n                return _context168.stop();\n            }\n          }, _callee168, this, [[0, 16]]);\n        }));\n        function updateEncoderConfig(_x261, _x262) {\n          return _updateEncoderConfig2.apply(this, arguments);\n        }\n        return updateEncoderConfig;\n      }()\n    }, {\n      key: \"updateSendParameters\",\n      value: function () {\n        var _updateSendParameters2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee169(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee169$(_context169) {\n            while (1) switch (_context169.prev = _context169.next) {\n              case 0:\n                i = this.peerConnection.getTransceivers().filter(function (t) {\n                  return t.mid === e;\n                });\n                _context169.t0 = 1 === i.length;\n                if (!_context169.t0) {\n                  _context169.next = 12;\n                  break;\n                }\n                if (!this.isVP8Simulcast(t)) {\n                  _context169.next = 10;\n                  break;\n                }\n                _context169.t1 = Qh();\n                if (_context169.t1) {\n                  _context169.next = 8;\n                  break;\n                }\n                _context169.next = 8;\n                return this.applySimulcastEncodings(i, [t]);\n              case 8:\n                _context169.next = 12;\n                break;\n              case 10:\n                _context169.next = 12;\n                return this.applySendEncodings(i, [t]);\n              case 12:\n              case \"end\":\n                return _context169.stop();\n            }\n          }, _callee169, this);\n        }));\n        function updateSendParameters(_x263, _x264) {\n          return _updateSendParameters2.apply(this, arguments);\n        }\n        return updateSendParameters;\n      }()\n    }, {\n      key: \"setStatsRemoteVideoIsReady\",\n      value: function setStatsRemoteVideoIsReady(e, t) {\n        this.statsFilter.setVideoIsReady2(e, t);\n      }\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee170(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee170$(_context170) {\n            while (1) switch (_context170.prev = _context170.next) {\n              case 0:\n                i = this.peerConnection.getTransceivers().find(function (e) {\n                  return e.mid === t;\n                });\n                _context170.t0 = i;\n                if (!_context170.t0) {\n                  _context170.next = 5;\n                  break;\n                }\n                _context170.next = 5;\n                return i.sender.replaceTrack(e._mediaStreamTrack);\n              case 5:\n              case \"end\":\n                return _context170.stop();\n            }\n          }, _callee170, this);\n        }));\n        function replaceTrack(_x265, _x266) {\n          return _replaceTrack2.apply(this, arguments);\n        }\n        return replaceTrack;\n      }()\n    }, {\n      key: \"bindPCEvents\",\n      value: function bindPCEvents() {\n        var _this188 = this;\n        this.peerConnection.oniceconnectionstatechange = function () {\n          var e;\n          null === (e = _this188.onICEConnectionStateChange) || void 0 === e || e.call(_this188, _this188.peerConnection.iceConnectionState);\n        }, this.peerConnection.onconnectionstatechange = function () {\n          var e;\n          null === (e = _this188.onConnectionStateChange) || void 0 === e || e.call(_this188, _this188.peerConnection.connectionState);\n        }, this.peerConnection.onicecandidate = function (e) {\n          e.candidate ? _this188.localCandidateCount += 1 : (_this188.peerConnection.onicecandidate = null, _this188.allCandidatesReceived = !0, NE.debug(\"[pc-\".concat(_this188.store.p2pId, \"] local candidate count\"), _this188.localCandidateCount));\n        }, setTimeout(function () {\n          _this188.allCandidatesReceived || (_this188.allCandidatesReceived = !0, NE.debug(\"[pc-\".concat(_this188.store.p2pId, \"] onicecandidate timeout, local candidate count\"), _this188.localCandidateCount));\n        }, HE(\"CANDIDATE_TIMEOUT\"));\n      }\n    }, {\n      key: \"unbindPCEvents\",\n      value: function unbindPCEvents() {\n        this.peerConnection.oniceconnectionstatechange = null, this.peerConnection.onconnectionstatechange = null, this.peerConnection.onsignalingstatechange = null, this.peerConnection.onicecandidateerror = null, this.peerConnection.onicecandidate = null, this.peerConnection.ontrack = null;\n      }\n    }, {\n      key: \"tryBindTransportEvents\",\n      value: function tryBindTransportEvents(e) {\n        var _this189 = this;\n        e.transport && (this.transportEventReceiver = e, e.transport.onstatechange = function () {\n          var t, i;\n          null !== (t = e.transport) && void 0 !== t && t.state && (null === (i = _this189.onDTLSTransportStateChange) || void 0 === i || i.call(_this189, e.transport.state));\n        }, e.transport.onerror = function (e) {\n          var t;\n          null === (t = _this189.onDTLSTransportError) || void 0 === t || t.call(_this189, e.error);\n        }, e.transport.iceTransport && (e.transport.iceTransport.onstatechange = function () {\n          var t, i, r;\n          null !== (t = e.transport) && void 0 !== t && t.iceTransport.state && (null === (i = _this189.onICETransportStateChange) || void 0 === i || i.call(_this189, null === (r = e.transport) || void 0 === r ? void 0 : r.iceTransport.state));\n        }));\n      }\n    }, {\n      key: \"tryUnbindTransportEvents\",\n      value: function tryUnbindTransportEvents() {\n        this.transportEventReceiver && this.transportEventReceiver.transport && (this.transportEventReceiver.transport.onstatechange = null, this.transportEventReceiver.transport.onerror = null, this.transportEventReceiver.transport.iceTransport && (this.transportEventReceiver.transport.iceTransport.onstatechange = null));\n      }\n    }, {\n      key: \"applySendEncodings\",\n      value: function () {\n        var _applySendEncodings2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee171(e, t) {\n          var c, _d9, _u7, i, r, _e122, _t149, n, o, s, a, _e123, _c6, _l5;\n          return _regeneratorRuntime().wrap(function _callee171$(_context171) {\n            while (1) switch (_context171.prev = _context171.next) {\n              case 0:\n                _context171.prev = 0;\n                if (jg().supportSetRtpSenderParameters) {\n                  _context171.next = 3;\n                  break;\n                }\n                return _context171.abrupt(\"return\");\n              case 3:\n                if (!(e.length !== t.length)) {\n                  _context171.next = 5;\n                  break;\n                }\n                return _context171.abrupt(\"return\");\n              case 5:\n                c = 0;\n              case 6:\n                if (!(c < e.length)) {\n                  _context171.next = 32;\n                  break;\n                }\n                _d9 = e[c], _u7 = t[c];\n                if (!(_u7 && _u7 instanceof Ew)) {\n                  _context171.next = 29;\n                  break;\n                }\n                if (!this.isVP8Simulcast(_u7)) {\n                  _context171.next = 11;\n                  break;\n                }\n                return _context171.abrupt(\"continue\", 29);\n              case 11:\n                _e122 = {}, _t149 = {};\n                _context171.t0 = _u7._optimizationMode;\n                _context171.next = _context171.t0 === \"motion\" ? 15 : _context171.t0 === \"detail\" ? 17 : 19;\n                break;\n              case 15:\n                _e122.degradationPreference = \"maintain-framerate\";\n                return _context171.abrupt(\"break\", 20);\n              case 17:\n                _e122.degradationPreference = \"maintain-resolution\";\n                return _context171.abrupt(\"break\", 20);\n              case 19:\n                _e122.degradationPreference = \"balanced\";\n              case 20:\n                if (null !== (i = _u7._encoderConfig) && void 0 !== i && i.bitrateMax) _t149.maxBitrate = 1e3 * (null === (n = _u7._encoderConfig) || void 0 === n ? void 0 : n.bitrateMax);\n                if (_u7._hints.includes(lg.LOW_STREAM)) null !== (o = _u7._encoderConfig) && void 0 !== o && o.frameRate && (_t149.maxFramerate = RR(_u7._encoderConfig.frameRate)), null !== (s = _u7._encoderConfig) && void 0 !== s && s.scaleResolutionDownBy && (null === (a = _u7._encoderConfig) || void 0 === a ? void 0 : a.scaleResolutionDownBy) > 1 && (_t149.scaleResolutionDownBy = _u7._encoderConfig.scaleResolutionDownBy);\n                if (HE(\"DSCP_TYPE\") && ap()) {\n                  _e123 = HE(\"DSCP_TYPE\");\n                  [\"very-low\", \"low\", \"medium\", \"high\"].includes(_e123) && (_t149.networkPriority = _e123);\n                }\n                _c6 = _d9.sender.getParameters(), _l5 = null === (r = _c6.encodings) || void 0 === r ? void 0 : r[0];\n                Qh() && !_l5 && (_e122.encodings = [_t149]);\n                _l5 && Object.assign(_l5, _t149);\n                Object.assign(_c6, _e122);\n                _context171.next = 29;\n                return _d9.sender.setParameters(_c6);\n              case 29:\n                c++;\n                _context171.next = 6;\n                break;\n              case 32:\n                _context171.next = 37;\n                break;\n              case 34:\n                _context171.prev = 34;\n                _context171.t1 = _context171[\"catch\"](0);\n                NE.debug(\"Apply RTPSendEncodings failed.\");\n              case 37:\n              case \"end\":\n                return _context171.stop();\n            }\n          }, _callee171, this, [[0, 34]]);\n        }));\n        function applySendEncodings(_x267, _x268) {\n          return _applySendEncodings2.apply(this, arguments);\n        }\n        return applySendEncodings;\n      }()\n    }, {\n      key: \"mungSendOfferSDP\",\n      value: function mungSendOfferSDP(e, t, i) {\n        var _this190 = this;\n        var r = bD.exports.parse(e);\n        return t.forEach(function (e, t) {\n          var n = i[t],\n            o = r.mediaDescriptions.find(function (e) {\n              return e.attributes.mid === n;\n            });\n          o && (UD(o, e), BD(o, e, _this190.store.codec));\n        }), bD.exports.print(r);\n      }\n    }, {\n      key: \"mungReceiveAnswerSDP\",\n      value: function mungReceiveAnswerSDP(e, t, i) {\n        var r = bD.exports.parse(e),\n          n = r.mediaDescriptions.find(function (e) {\n            return e.attributes.mid === t;\n          });\n        return n && i === yg.AUDIO && \"audio\" === n.media.mediaType && KD(n), bD.exports.print(r);\n      }\n    }, {\n      key: \"bindStatsEvents\",\n      value: function bindStatsEvents() {\n        var _this191 = this;\n        this.statsFilter.onFirstAudioReceived = function (e) {\n          var t;\n          null === (t = _this191.onFirstAudioReceived) || void 0 === t || t.call(_this191, e);\n        }, this.statsFilter.onFirstVideoReceived = function (e) {\n          var t;\n          null === (t = _this191.onFirstVideoReceived) || void 0 === t || t.call(_this191, e);\n        }, this.statsFilter.onFirstAudioDecoded = function (e) {\n          var t;\n          null === (t = _this191.onFirstAudioDecoded) || void 0 === t || t.call(_this191, e);\n        }, this.statsFilter.onFirstVideoDecoded = function (e, t, i) {\n          var r;\n          null === (r = _this191.onFirstVideoDecoded) || void 0 === r || r.call(_this191, e, t, i);\n        }, this.statsFilter.onSelectedLocalCandidateChanged = function (e, t) {\n          var i;\n          null === (i = _this191.onSelectedLocalCandidateChanged) || void 0 === i || i.call(_this191, e, t);\n        }, this.statsFilter.onSelectedRemoteCandidateChanged = function (e, t) {\n          var i;\n          null === (i = _this191.onSelectedRemoteCandidateChanged) || void 0 === i || i.call(_this191, e, t);\n        }, this.statsFilter.onFirstVideoDecodedTimeout = function (e) {\n          var t;\n          null === (t = _this191.onFirstVideoDecodedTimeout) || void 0 === t || t.call(_this191, e);\n        };\n      }\n    }, {\n      key: \"unbindStatsEvents\",\n      value: function unbindStatsEvents() {\n        this.statsFilter.onFirstAudioReceived = void 0, this.statsFilter.onFirstVideoReceived = void 0, this.statsFilter.onFirstAudioDecoded = void 0, this.statsFilter.onFirstVideoDecoded = void 0, this.statsFilter.onSelectedLocalCandidateChanged = void 0, this.statsFilter.onSelectedRemoteCandidateChanged = void 0, this.statsFilter.onFirstVideoDecodedTimeout = void 0;\n      }\n    }, {\n      key: \"applySimulcastForFirefox\",\n      value: function () {\n        var _applySimulcastForFirefox = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee172(e, t) {\n          var _s26, i, r, n, o, _a15, c, _e124, _t150, _i85;\n          return _regeneratorRuntime().wrap(function _callee172$(_context172) {\n            while (1) switch (_context172.prev = _context172.next) {\n              case 0:\n                if (!(e.length === t.length)) {\n                  _context172.next = 13;\n                  break;\n                }\n                _s26 = 0;\n              case 2:\n                if (!(_s26 < e.length)) {\n                  _context172.next = 13;\n                  break;\n                }\n                _a15 = e[_s26], c = t[_s26];\n                if (!(c instanceof Ew && !c._hints.includes(lg.LOW_STREAM) && null !== (i = c._encoderConfig) && void 0 !== i && i.bitrateMax && (null === (r = c._encoderConfig) || void 0 === r ? void 0 : r.bitrateMax) > 200 && null !== (n = c._scalabiltyMode) && void 0 !== n && n.numSpatialLayers && (null === (o = c._scalabiltyMode) || void 0 === o ? void 0 : o.numSpatialLayers) > 1 && \"vp8\" === this.store.codec)) {\n                  _context172.next = 10;\n                  break;\n                }\n                _e124 = {}, _t150 = {\n                  high: 1e3 * (c._encoderConfig.bitrateMax - 50),\n                  medium: 5e4\n                };\n                _e124.encodings = [{\n                  rid: \"m\",\n                  active: !0,\n                  maxBitrate: _t150.medium,\n                  scaleResolutionDownBy: 4\n                }, {\n                  rid: \"h\",\n                  active: !0,\n                  maxBitrate: _t150.high\n                }];\n                _i85 = _a15.sender.getParameters();\n                _context172.next = 10;\n                return _a15.sender.setParameters(Object.assign(_i85, _e124));\n              case 10:\n                _s26++;\n                _context172.next = 2;\n                break;\n              case 13:\n              case \"end\":\n                return _context172.stop();\n            }\n          }, _callee172, this);\n        }));\n        function applySimulcastForFirefox(_x269, _x270) {\n          return _applySimulcastForFirefox.apply(this, arguments);\n        }\n        return applySimulcastForFirefox;\n      }()\n    }, {\n      key: \"applySimulcastEncodings\",\n      value: function () {\n        var _applySimulcastEncodings = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee173(e, t) {\n          var i, r, _t151, _n42, o, _s27;\n          return _regeneratorRuntime().wrap(function _callee173$(_context173) {\n            while (1) switch (_context173.prev = _context173.next) {\n              case 0:\n                if (!(!Qh() && e.length === t.length)) {\n                  _context173.next = 13;\n                  break;\n                }\n                i = 0;\n              case 2:\n                if (!(i < e.length)) {\n                  _context173.next = 13;\n                  break;\n                }\n                r = t[i];\n                if (!(r instanceof Ew && this.isVP8Simulcast(r))) {\n                  _context173.next = 10;\n                  break;\n                }\n                _t151 = e[i], _n42 = {}, o = {\n                  high: 1e3 * (r._encoderConfig.bitrateMax - 50),\n                  medium: 5e4\n                };\n                _n42.encodings = [{\n                  active: !0,\n                  adaptivePtime: !1,\n                  networkPriority: \"high\",\n                  priority: \"high\",\n                  maxBitrate: o.high\n                }, {\n                  active: !0,\n                  adaptivePtime: !1,\n                  networkPriority: \"low\",\n                  priority: \"low\",\n                  maxBitrate: o.medium,\n                  scaleResolutionDownBy: 4\n                }];\n                _s27 = _t151.sender.getParameters();\n                _context173.next = 10;\n                return _t151.sender.setParameters(Object.assign(_s27, _n42));\n              case 10:\n                i++;\n                _context173.next = 2;\n                break;\n              case 13:\n              case \"end\":\n                return _context173.stop();\n            }\n          }, _callee173, this);\n        }));\n        function applySimulcastEncodings(_x271, _x272) {\n          return _applySimulcastEncodings.apply(this, arguments);\n        }\n        return applySimulcastEncodings;\n      }()\n    }, {\n      key: \"isVP8Simulcast\",\n      value: function isVP8Simulcast(e) {\n        var t, i, r, n;\n        return !!(e instanceof Ew && HE(\"SIMULCAST\") && \"vp8\" === this.store.codec && !e._hints.includes(lg.LOW_STREAM) && null !== (t = e._encoderConfig) && void 0 !== t && t.bitrateMax && (null === (i = e._encoderConfig) || void 0 === i ? void 0 : i.bitrateMax) > 200 && null !== (r = e._scalabiltyMode) && void 0 !== r && r.numSpatialLayers && (null === (n = e._scalabiltyMode) || void 0 === n ? void 0 : n.numSpatialLayers) > 1);\n      }\n    }, {\n      key: \"logSDPExchange\",\n      value: function logSDPExchange(e, t, i, r) {\n        var _this192 = this;\n        if (HE(\"SDP_LOGGING\")) return NE.upload(\"exchanging \".concat(i, \" \").concat(t, \" SDP during P2PConnection.\").concat(r, \"\\n\"), e), \"offer\" === t ? function (e) {\n          _this192.logSDPExchange(e, \"answer\", \"local\" === i ? \"remote\" : \"local\", r);\n        } : void 0;\n      }\n    }, {\n      key: \"getRemoteSSRC\",\n      value: function () {\n        var _getRemoteSSRC2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee174(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee174$(_context174) {\n            while (1) switch (_context174.prev = _context174.next) {\n              case 0:\n                if (this.remoteSDP) {\n                  _context174.next = 2;\n                  break;\n                }\n                return _context174.abrupt(\"return\");\n              case 2:\n                t = this.remoteSDP.getSSRC(e);\n                return _context174.abrupt(\"return\", null == t ? void 0 : t[0].ssrcId);\n              case 4:\n              case \"end\":\n                return _context174.stop();\n            }\n          }, _callee174, this);\n        }));\n        function getRemoteSSRC(_x273) {\n          return _getRemoteSSRC2.apply(this, arguments);\n        }\n        return getRemoteSSRC;\n      }()\n    }], [{\n      key: \"resolvePCConfiguration\",\n      value: function resolvePCConfiguration(t) {\n        var _i$iceServers3, _i$iceServers4;\n        var i = {\n          iceServers: []\n        };\n        return t.iceServers ? i.iceServers = t.iceServers : t.turnServer && \"off\" !== t.turnServer.mode && (xm(t.turnServer.servers) ? i.iceServers = t.turnServer.servers : (i.iceServers && (_i$iceServers3 = i.iceServers).push.apply(_i$iceServers3, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.servers))), HE(\"USE_TURN_SERVER_OF_GATEWAY\") && i.iceServers && t.turnServer.serversFromGateway && (_i$iceServers4 = i.iceServers).push.apply(_i$iceServers4, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.serversFromGateway))), HE(\"FORCE_TURN_TCP\") ? i.iceTransportPolicy = \"relay\" : t.turnServer.servers.concat(t.turnServer.serversFromGateway || []).forEach(function (e) {\n          e.forceturn && (i.iceTransportPolicy = \"relay\");\n        }))), i;\n      }\n    }, {\n      key: \"turnServerConfigToIceServers\",\n      value: function turnServerConfigToIceServers(e) {\n        var t = [];\n        return e.forEach(function (e) {\n          e.security ? e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turns:\".concat(TR(e.turnServerURL), \":\").concat(e.tcpport, \"?transport=tcp\")\n          }) : (e.udpport && !HE(\"FORCE_TURN_TCP\") && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.udpport, \"?transport=udp\")\n          }), e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.tcpport, \"?transport=tcp\")\n          }));\n        }), t;\n      }\n    }]);\n    return e;\n  }(xg)).prototype, \"connect\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"connect\"), vP.prototype), ZS(vP.prototype, \"receive\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"receive\"), vP.prototype), ZS(vP.prototype, \"batchReceive\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"batchReceive\"), vP.prototype), ZS(vP.prototype, \"stopReceiving\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"stopReceiving\"), vP.prototype), ZS(vP.prototype, \"muteRemote\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"muteRemote\"), vP.prototype), ZS(vP.prototype, \"unmuteRemote\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"unmuteRemote\"), vP.prototype), ZS(vP.prototype, \"muteLocal\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"muteLocal\"), vP.prototype), ZS(vP.prototype, \"unmuteLocal\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"unmuteLocal\"), vP.prototype), ZS(vP.prototype, \"close\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"close\"), vP.prototype), ZS(vP.prototype, \"updateEncoderConfig\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"updateEncoderConfig\"), vP.prototype), ZS(vP.prototype, \"updateSendParameters\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"updateSendParameters\"), vP.prototype), ZS(vP.prototype, \"replaceTrack\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"replaceTrack\"), vP.prototype), ZS(vP.prototype, \"getRemoteSSRC\", [CP], Object.getOwnPropertyDescriptor(vP.prototype, \"getRemoteSSRC\"), vP.prototype), vP);\n  function CP(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee175() {\n      var e,\n        i,\n        n,\n        o,\n        s,\n        _args175 = arguments;\n      return _regeneratorRuntime().wrap(function _callee175$(_context175) {\n        while (1) switch (_context175.prev = _context175.next) {\n          case 0:\n            e = this.mutex;\n            _context175.next = 3;\n            return e.lock(\"From P2PConnection.\".concat(t));\n          case 3:\n            i = _context175.sent;\n            _context175.prev = 4;\n            for (n = _args175.length, o = new Array(n), s = 0; s < n; s++) o[s] = _args175[s];\n            _context175.next = 8;\n            return r.apply(this, o);\n          case 8:\n            return _context175.abrupt(\"return\", _context175.sent);\n          case 9:\n            _context175.prev = 9;\n            i();\n            return _context175.finish(9);\n          case 12:\n          case \"end\":\n            return _context175.stop();\n        }\n      }, _callee175, this, [[4,, 9, 12]]);\n    })), i;\n  }\n  function AP(e, t) {\n    var i = document.createElement(\"video\"),\n      r = document.createElement(\"canvas\");\n    i.setAttribute(\"style\", \"display:none\"), r.setAttribute(\"style\", \"display:none\"), i.setAttribute(\"muted\", \"\"), i.muted = !0, i.setAttribute(\"autoplay\", \"\"), i.autoplay = !0, i.setAttribute(\"playsinline\", \"\"), r.width = RR(t.width), r.height = RR(t.height);\n    var n = RR(t.framerate || 15);\n    document.body.append(i), document.body.append(r);\n    var o = e._mediaStreamTrack;\n    i.srcObject = new MediaStream([o]), i.play();\n    var s = r.getContext(\"2d\");\n    if (!s) throw new vE(TE.UNEXPECTED_ERROR, \"can not get canvas context\");\n    var a = jg(),\n      c = r.captureStream(a.supportRequestFrame ? 0 : n).getVideoTracks()[0],\n      d = VT(function () {\n        return function () {\n          if (i.paused && i.play(), i.videoHeight > 2 && i.videoWidth > 2) {\n            var _e125 = i.videoWidth,\n              _t152 = i.videoHeight / _e125,\n              _n43 = r.width * _t152;\n            Math.abs(_n43 - r.height) >= 2 && (NE.debug(\"adjust low stream resolution\", \"\".concat(r.width, \"x\").concat(r.height, \" -> \").concat(r.width, \"x\").concat(_n43)), r.height = _n43);\n          }\n          s.drawImage(i, 0, 0, r.width, r.height), c.requestFrame && c.requestFrame(), o !== e._mediaStreamTrack && (o = e._mediaStreamTrack, i.srcObject = new MediaStream([o]));\n        }();\n      }, n),\n      u = c.stop;\n    return c.stop = function () {\n      u.call(c), d(), i && (i.remove(), i = null), r && (r.width = 0, r.remove(), r = null), NE.debug(\"clean low stream renderer\");\n    }, c;\n  }\n  var OP, bP, wP, NP, DP, PP, LP, kP, MP, UP, xP, VP;\n  function jP(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function FP(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? jP(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : jP(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var BP = /*#__PURE__*/function (_yT2) {\n    _inherits(BP, _yT2);\n    _createClass(BP, [{\n      key: \"getUserId\",\n      value: function getUserId() {\n        return this._userId;\n      }\n    }]);\n    function BP(e, t, i, r) {\n      var _this193;\n      _classCallCheck(this, BP);\n      _this193 = _possibleConstructorReturn(this, _getPrototypeOf(BP).call(this, e, \"track-\".concat(e.kind, \"-\").concat(t, \"-\").concat(r.clientId, \"_\").concat(MR(5, \"\")))), mp(_assertThisInitialized(_assertThisInitialized(_this193)), \"_userId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this193)), \"_uintId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this193)), \"_isDestroyed\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this193)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this193)), \"processor\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this193)), \"processorContext\", void 0), _this193._userId = t, _this193._uintId = i, _this193.store = r;\n      return _this193;\n    }\n    _createClass(BP, [{\n      key: \"_updateOriginMediaStreamTrack\",\n      value: function _updateOriginMediaStreamTrack(e) {\n        this._originMediaStreamTrack = e, this._mediaStreamTrack = e, this._updatePlayerSource(), this.processor && this.processor.updateInput({\n          track: this._originMediaStreamTrack,\n          context: this.processorContext\n        });\n      }\n    }, {\n      key: \"_destroy\",\n      value: function _destroy() {\n        this._isDestroyed = !0, NE.info(\"[\".concat(this.getTrackId(), \"] is destroyed\")), this.stop(), _get(_getPrototypeOf(BP.prototype), \"close\", this).call(this);\n      }\n    }, {\n      key: \"getProcessorStats\",\n      value: function getProcessorStats() {\n        return this.processorContext.gatherStats();\n      }\n    }, {\n      key: \"getProcessorUsage\",\n      value: function getProcessorUsage() {\n        return this.processorContext.gatherUsage();\n      }\n    }]);\n    return BP;\n  }(yT);\n  var GP = (OP = RT({\n      argsMap: function argsMap(e, t, i) {\n        return [e.getTrackId(), \"string\" == typeof t ? t : \"HTMLElement\", i];\n      }\n    }), bP = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), wP = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t.name];\n      }\n    }), NP = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), ZS((DP = /*#__PURE__*/function (_BP) {\n      _inherits(DP, _BP);\n      _createClass(DP, [{\n        key: \"isPlaying\",\n        get: function get() {\n          return !(!this._player || this._player.videoElementStatus !== am.PLAYING);\n        }\n      }, {\n        key: \"__className__\",\n        get: function get() {\n          return \"RemoteVideoTrack\";\n        }\n      }]);\n      function DP(e, t, i, r) {\n        var _this194;\n        _classCallCheck(this, DP);\n        _this194 = _possibleConstructorReturn(this, _getPrototypeOf(DP).call(this, e, t, i, r)), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"_videoVisibleTimer\", null), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"_previousVideoVisibleStatus\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"_clearPreviousVideoVisibleStatus\", function () {\n          return _this194._previousVideoVisibleStatus = void 0;\n        }), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"trackMediaType\", \"video\"), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"_videoWidth\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"_videoHeight\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"_player\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"processorDestination\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this194)), \"processorContext\", void 0), _this194.updateMediaStreamTrackResolution(), _this194.processorContext = new eR(_this194.getTrackId(), \"remote\"), _this194.processorDestination = new $v(_this194.processorContext), _this194.bindProcessorDestinationEvents();\n        return _this194;\n      }\n      _createClass(DP, [{\n        key: \"getStats\",\n        value: function getStats() {\n          XR(function () {\n            NE.warning(\"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead\");\n          }, \"remoteVideoTrackGetStatsWarning\");\n          return GR(this, ug.GET_STATS) || FP({}, Hm);\n        }\n      }, {\n        key: \"play\",\n        value: function play(e) {\n          var _this195 = this;\n          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n          if (\"string\" == typeof e) {\n            var _t153 = document.getElementById(e);\n            _t153 ? e = _t153 : (NE.warning(\"[\".concat(this.getTrackId(), '] can not find \"#').concat(e, '\" element, use document.body')), e = document.body);\n          }\n          NE.debug(\"[\".concat(this.getTrackId(), \"] start video playback\"), JSON.stringify(t));\n          var i = FP(FP({\n            fit: \"cover\"\n          }, t), {}, {\n            trackId: this.getTrackId(),\n            element: e\n          });\n          this._player ? this._player.updateConfig(i) : (this._player = new ob(i), this._player.updateVideoTrack(this._mediaStreamTrack), this._player.onFirstVideoFrameDecoded = function () {\n            _this195.store.subscribe(_this195.getUserId(), \"video\", void 0, void 0, Date.now()), _this195.emit(Eg.FIRST_FRAME_DECODED);\n          }), this._player.play(this.store.sessionId || void 0), this._videoVisibleTimer && window.clearInterval(this._videoVisibleTimer), this._clearPreviousVideoVisibleStatus(), this._videoVisibleTimer = window.setInterval(function () {\n            try {\n              var _e126 = _this195.getVideoElementVisibleStatus();\n              _this195.emit(Eg.VIDEO_ELEMENT_VISIBLE_STATUS, _e126);\n            } catch (e) {}\n          }, HE(\"CHECK_VIDEO_VISIBLE_INTERVAL\"));\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          this._player && (this._videoVisibleTimer && (window.clearInterval(this._videoVisibleTimer), this._videoVisibleTimer = null), this._clearPreviousVideoVisibleStatus(), this._player.destroy(), this._player = void 0, NE.debug(\"[\".concat(this.getTrackId(), \"] stop video playback\")));\n        }\n      }, {\n        key: \"getCurrentFrameData\",\n        value: function getCurrentFrameData() {\n          return this._player ? this._player.getCurrentFrame() : new ImageData(2, 2);\n        }\n      }, {\n        key: \"updateMediaStreamTrackResolution\",\n        value: function updateMediaStreamTrackResolution() {\n          var _this196 = this;\n          VR(this._originMediaStreamTrack).then(function (e) {\n            var _e127 = _slicedToArray(e, 2),\n              t = _e127[0],\n              i = _e127[1];\n            _this196._videoHeight = i, _this196._videoWidth = t;\n          }).catch(xR);\n        }\n      }, {\n        key: \"_updatePlayerSource\",\n        value: function _updatePlayerSource() {\n          NE.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), this._player && this._player.updateVideoTrack(this._mediaStreamTrack);\n        }\n      }, {\n        key: \"getVideoElementVisibleStatus\",\n        value: function getVideoElementVisibleStatus() {\n          try {\n            var e, t;\n            var i = null == this || null === (e = this._player) || void 0 === e ? void 0 : e.getContainerElement(),\n              r = {\n                track: this,\n                element: null == this || null === (t = this._player) || void 0 === t ? void 0 : t.getVideoElement(),\n                slot: null == i ? void 0 : i.parentElement\n              },\n              _n44 = r.element,\n              o = r.slot;\n            if (this.isPlaying && _n44 instanceof HTMLVideoElement && o instanceof HTMLElement) {\n              var _e128 = hw.checkOneElementVisible(_n44),\n                _t154 = Object.assign({}, _e128);\n              if (_t154.visible !== this._previousVideoVisibleStatus) {\n                this._previousVideoVisibleStatus = _t154.visible;\n                var _e129 = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,\n                  options: [this.getTrackId()]\n                });\n                _t154.visible ? _e129.onSuccess(\"Video is visible\") : _e129.onSuccess(\"Invisible because of \".concat(_t154.reason));\n              }\n              return _t154;\n            }\n            return;\n          } catch (e) {\n            throw new vE(TE.GET_VIDEO_ELEMENT_VISIBLE_ERROR, e.message);\n          }\n        }\n      }, {\n        key: \"pipe\",\n        value: function pipe(e) {\n          if (this.processor === e) return e;\n          if (e._source) throw new vE(TE.INVALID_OPERATION, \"Processor \".concat(e.name, \" already piped, please call unpipe beforehand.\"));\n          return this.unpipe(), this.processor = e, this.processor._source = this, e.updateInput({\n            track: this._originMediaStreamTrack,\n            context: this.processorContext\n          }), e;\n        }\n      }, {\n        key: \"unpipe\",\n        value: function unpipe() {\n          if (!this.processor) return;\n          var e = this.processor;\n          this.processor._source = void 0, this.processor = void 0, e.reset();\n        }\n      }, {\n        key: \"bindProcessorDestinationEvents\",\n        value: function bindProcessorDestinationEvents() {\n          var _this197 = this;\n          this.processorDestination.on(Ng.ON_TRACK, /*#__PURE__*/function () {\n            var _ref49 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee176(e) {\n              return _regeneratorRuntime().wrap(function _callee176$(_context176) {\n                while (1) switch (_context176.prev = _context176.next) {\n                  case 0:\n                    e ? e !== _this197._mediaStreamTrack && (_this197._mediaStreamTrack = e, _this197._updatePlayerSource()) : _this197._mediaStreamTrack !== _this197._originMediaStreamTrack && (_this197._mediaStreamTrack = _this197._originMediaStreamTrack, _this197._updatePlayerSource());\n                  case 1:\n                  case \"end\":\n                    return _context176.stop();\n                }\n              }, _callee176);\n            }));\n            return function (_x274) {\n              return _ref49.apply(this, arguments);\n            };\n          }());\n        }\n      }, {\n        key: \"unbindProcessorDestinationEvents\",\n        value: function unbindProcessorDestinationEvents() {\n          this.processorDestination.removeAllListeners(Ng.ON_TRACK);\n        }\n      }, {\n        key: \"_destroy\",\n        value: function _destroy() {\n          _get(_getPrototypeOf(DP.prototype), \"_destroy\", this).call(this), this.unbindProcessorDestinationEvents();\n        }\n      }]);\n      return DP;\n    }(BP)).prototype, \"play\", [OP], Object.getOwnPropertyDescriptor(DP.prototype, \"play\"), DP.prototype), ZS(DP.prototype, \"stop\", [bP], Object.getOwnPropertyDescriptor(DP.prototype, \"stop\"), DP.prototype), ZS(DP.prototype, \"pipe\", [wP], Object.getOwnPropertyDescriptor(DP.prototype, \"pipe\"), DP.prototype), ZS(DP.prototype, \"unpipe\", [NP], Object.getOwnPropertyDescriptor(DP.prototype, \"unpipe\"), DP.prototype), DP),\n    WP = (PP = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      },\n      throttleTime: 300\n    }), LP = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t];\n      }\n    }), kP = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), MP = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), UP = RT({\n      argsMap: function argsMap(e, t) {\n        return [e.getTrackId(), t.name];\n      }\n    }), xP = RT({\n      argsMap: function argsMap(e) {\n        return [e.getTrackId()];\n      }\n    }), ZS((VP = /*#__PURE__*/function (_BP2) {\n      _inherits(VP, _BP2);\n      _createClass(VP, [{\n        key: \"isPlaying\",\n        get: function get() {\n          return this._useAudioElement ? nv.isPlaying(this.getTrackId()) : this._source.isPlayed;\n        }\n      }, {\n        key: \"__className__\",\n        get: function get() {\n          return \"RemoteAudioTrack\";\n        }\n      }]);\n      function VP(e, t, i, r) {\n        var _this198;\n        _classCallCheck(this, VP);\n        _this198 = _possibleConstructorReturn(this, _getPrototypeOf(VP).call(this, e, t, i, r)), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"trackMediaType\", \"audio\"), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"_source\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"_useAudioElement\", !0), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"_volume\", 100), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"processorContext\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"processorDestination\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"_played\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this198)), \"_bypassWebAudio\", !1), HE(\"DISABLE_WEBAUDIO\") ? (_this198._source = new rR(), _this198._bypassWebAudio = !0, _this198._useAudioElement = !0) : (_this198._source = new WT(e, !0), HE(\"REMOTE_AUDIO_TRACK_USES_WEB_AUDIO\") && (_this198._useAudioElement = !1)), _this198._source.once(km.RECEIVE_TRACK_BUFFER, function () {\n          _this198.emit(Eg.FIRST_FRAME_DECODED);\n        }), _this198.processorContext = new iR(_this198._source.context, _this198.getTrackId(), \"remote\"), _this198.processorDestination = new tR(_this198.processorContext), _this198.bindProcessorDestinationEvents(), _this198._source.on(km.UPDATE_SOURCE, function () {\n          _this198.processor && _this198.processor.updateInput({\n            node: _this198._source.processSourceNode,\n            context: _this198.processorContext\n          });\n        });\n        return _this198;\n      }\n      _createClass(VP, [{\n        key: \"setAudioFrameCallback\",\n        value: function setAudioFrameCallback(e) {\n          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 4096;\n          if (!e) return this._source.removeAllListeners(km.ON_AUDIO_BUFFER), void this._source.stopGetAudioBuffer();\n          this._source.startGetAudioBuffer(t), this._source.removeAllListeners(km.ON_AUDIO_BUFFER), this._source.on(km.ON_AUDIO_BUFFER, function (t) {\n            return e(t);\n          });\n        }\n      }, {\n        key: \"setVolume\",\n        value: function setVolume(e) {\n          this._volume = e, this._useAudioElement ? nv.setVolume(this.getTrackId(), e) : this._source.setVolume(e / 100);\n        }\n      }, {\n        key: \"setPlaybackDevice\",\n        value: function () {\n          var _setPlaybackDevice2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee177(e) {\n            return _regeneratorRuntime().wrap(function _callee177$(_context177) {\n              while (1) switch (_context177.prev = _context177.next) {\n                case 0:\n                  if (this._useAudioElement) {\n                    _context177.next = 2;\n                    break;\n                  }\n                  throw new vE(TE.NOT_SUPPORTED, \"your browser does not support setting the audio output device\");\n                case 2:\n                  _context177.next = 4;\n                  return nv.setSinkID(this.getTrackId(), e);\n                case 4:\n                case \"end\":\n                  return _context177.stop();\n              }\n            }, _callee177, this);\n          }));\n          function setPlaybackDevice(_x275) {\n            return _setPlaybackDevice2.apply(this, arguments);\n          }\n          return setPlaybackDevice;\n        }()\n      }, {\n        key: \"getVolumeLevel\",\n        value: function getVolumeLevel() {\n          return this._source.getAccurateVolumeLevel();\n        }\n      }, {\n        key: \"getStats\",\n        value: function getStats() {\n          XR(function () {\n            NE.warning(\"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead\");\n          }, \"remoteAudioTrackGetStatsWarning\");\n          return GR(this, ug.GET_STATS) || FP({}, Gm);\n        }\n      }, {\n        key: \"play\",\n        value: function play() {\n          NE.debug(\"[\".concat(this.getTrackId(), \"] start audio playback\")), this._played = !0, this._useAudioElement ? (NE.debug(\"[\".concat(this.getTrackId(), \"] use audio element to play\")), nv.play(this._mediaStreamTrack, this.getTrackId(), this._volume, this.store.sessionId || void 0)) : this._source.play();\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          NE.debug(\"[\".concat(this.getTrackId(), \"] stop audio playback\")), this._played = !1, this._useAudioElement ? nv.stop(this.getTrackId()) : this._source.stop();\n        }\n      }, {\n        key: \"_destroy\",\n        value: function _destroy() {\n          _get(_getPrototypeOf(VP.prototype), \"_destroy\", this).call(this), this._played = !1, this.unbindProcessorDestinationEvents(), this._source.destroy();\n        }\n      }, {\n        key: \"_isFreeze\",\n        value: function _isFreeze() {\n          return this._source.isFreeze;\n        }\n      }, {\n        key: \"_updatePlayerSource\",\n        value: function _updatePlayerSource() {\n          var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];\n          NE.debug(\"[\".concat(this.getTrackId(), \"] update player source track\")), e && this._source.updateTrack(this._mediaStreamTrack), this._useAudioElement && nv.updateTrack(this.getTrackId(), this._mediaStreamTrack);\n        }\n      }, {\n        key: \"pipe\",\n        value: function pipe(e) {\n          if (this._bypassWebAudio) throw new vE(TE.NOT_SUPPORTED, \"can not pipe extension when WebAudio disabled\");\n          if (this.processor === e) return e;\n          if (e._source) throw new vE(TE.INVALID_OPERATION, \"Processor \".concat(e.name, \" already piped, please call unpipe beforehand.\"));\n          return this.unpipe(), this.processor = e, this.processor._source = this, e.updateInput({\n            track: this._originMediaStreamTrack,\n            node: this._source.processSourceNode,\n            context: this.processorContext\n          }), e;\n        }\n      }, {\n        key: \"unpipe\",\n        value: function unpipe() {\n          var e;\n          if (this._bypassWebAudio) throw new vE(TE.NOT_SUPPORTED, \"can not unpipe extension when WebAudio disabled\");\n          if (!this.processor) return;\n          var t = this.processor;\n          null === (e = this._source.processSourceNode) || void 0 === e || e.disconnect(), this.processor._source = !1, this.processor = void 0, t.reset();\n        }\n      }, {\n        key: \"bindProcessorDestinationEvents\",\n        value: function bindProcessorDestinationEvents() {\n          var _this199 = this;\n          this.processorDestination.on(Ng.ON_TRACK, /*#__PURE__*/function () {\n            var _ref50 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee178(e) {\n              return _regeneratorRuntime().wrap(function _callee178$(_context178) {\n                while (1) switch (_context178.prev = _context178.next) {\n                  case 0:\n                    e ? e !== _this199._mediaStreamTrack && (_this199._mediaStreamTrack = e, _this199._updatePlayerSource(!1), _this199._source.processedNode = _this199._source.createMediaStreamSourceNode(e)) : _this199._mediaStreamTrack !== _this199._originMediaStreamTrack && (_this199._mediaStreamTrack = _this199._originMediaStreamTrack, _this199._updatePlayerSource());\n                  case 1:\n                  case \"end\":\n                    return _context178.stop();\n                }\n              }, _callee178);\n            }));\n            return function (_x276) {\n              return _ref50.apply(this, arguments);\n            };\n          }()), this.processorDestination.on(Ng.ON_NODE, function (e) {\n            _this199._source.processedNode = e;\n            var t = !e;\n            _this199._useAudioElement !== t && (_this199._played ? (_this199.stop(), _this199._useAudioElement = t, _this199.play()) : _this199._useAudioElement = t);\n          });\n        }\n      }, {\n        key: \"unbindProcessorDestinationEvents\",\n        value: function unbindProcessorDestinationEvents() {\n          this.processorDestination.removeAllListeners(Ng.ON_TRACK), this.processorDestination.removeAllListeners(Ng.ON_NODE);\n        }\n      }]);\n      return VP;\n    }(BP)).prototype, \"setVolume\", [PP], Object.getOwnPropertyDescriptor(VP.prototype, \"setVolume\"), VP.prototype), ZS(VP.prototype, \"setPlaybackDevice\", [LP], Object.getOwnPropertyDescriptor(VP.prototype, \"setPlaybackDevice\"), VP.prototype), ZS(VP.prototype, \"play\", [kP], Object.getOwnPropertyDescriptor(VP.prototype, \"play\"), VP.prototype), ZS(VP.prototype, \"stop\", [MP], Object.getOwnPropertyDescriptor(VP.prototype, \"stop\"), VP.prototype), ZS(VP.prototype, \"pipe\", [UP], Object.getOwnPropertyDescriptor(VP.prototype, \"pipe\"), VP.prototype), ZS(VP.prototype, \"unpipe\", [xP], Object.getOwnPropertyDescriptor(VP.prototype, \"unpipe\"), VP.prototype), VP);\n  function HP(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function KP(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? HP(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : HP(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var YP = /*#__PURE__*/function (_gE28) {\n    _inherits(YP, _gE28);\n    function YP() {\n      var _this200;\n      _classCallCheck(this, YP);\n      _this200 = _possibleConstructorReturn(this, _getPrototypeOf(YP).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uplinkStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uplinkStatsUploadSlowInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uplinkRelatedStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uplinkDenoiserStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"transportStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uplinkExtensionStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"downlinkExtensionStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"extensionUsageStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"downlinkStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"downlinkStatsUploadSlowInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"downlinkRelatedStatsUploadInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"lastStats\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uploadUnplinkStarted\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uploadDownlinkStarted\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uploadTransportStarted\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"uploadExtensionUsageStarted\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"requestStats\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"requestLocalMedia\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"requestRemoteMedia\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"requestAllTracks\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"requestVideoIsReady\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this200)), \"requestUpload\", void 0);\n      return _this200;\n    }\n    _createClass(YP, [{\n      key: \"startUploadTransportStats\",\n      value: function startUploadTransportStats() {\n        var _this201 = this;\n        this.uploadTransportStarted || (this.uploadTransportStarted = !0, this.transportStatsUploadInterval && window.clearInterval(this.transportStatsUploadInterval), this.transportStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this201.requestStats) || void 0 === e ? void 0 : e.call(_this201);\n          t && _this201.uploadTransportStats(t);\n        }, 6e3));\n      }\n    }, {\n      key: \"startUploadExtensionUsageStats\",\n      value: function startUploadExtensionUsageStats() {\n        var _this202 = this;\n        if (this.uploadExtensionUsageStarted) return;\n        this.uploadExtensionUsageStarted = !0, this.extensionUsageStatsUploadInterval && window.clearInterval(this.extensionUsageStatsUploadInterval);\n        var e = new Map();\n        this.extensionUsageStatsUploadInterval = window.setInterval( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee179() {\n          var t, i, r, n, o, s, a, _iterator23, _step23, _e131, c, _iterator24, _step24, _step24$value, _e132, _t155, d, u;\n          return _regeneratorRuntime().wrap(function _callee179$(_context179) {\n            while (1) switch (_context179.prev = _context179.next) {\n              case 0:\n                n = Date.now(), o = {\n                  connectionInterval: HE(\"EXTENSION_USAGE_UPLOAD_INTERVAL\") / 1e3,\n                  details: [],\n                  lts: n\n                };\n                s = [];\n                a = (null === (t = _this202.requestAllTracks) || void 0 === t ? void 0 : t.call(_this202)) || [];\n                _iterator23 = _createForOfIteratorHelper(a);\n                _context179.prev = 4;\n                _iterator23.s();\n              case 6:\n                if ((_step23 = _iterator23.n()).done) {\n                  _context179.next = 17;\n                  break;\n                }\n                _e131 = _step23.value;\n                _context179.t0 = !_e131.muted && _e131.enabled;\n                if (!_context179.t0) {\n                  _context179.next = 15;\n                  break;\n                }\n                _context179.t1 = s;\n                _context179.next = 13;\n                return _e131.getProcessorUsage();\n              case 13:\n                _context179.t2 = _context179.sent;\n                s = _context179.t1.concat.call(_context179.t1, _context179.t2);\n              case 15:\n                _context179.next = 6;\n                break;\n              case 17:\n                _context179.next = 22;\n                break;\n              case 19:\n                _context179.prev = 19;\n                _context179.t3 = _context179[\"catch\"](4);\n                _iterator23.e(_context179.t3);\n              case 22:\n                _context179.prev = 22;\n                _iterator23.f();\n                return _context179.finish(22);\n              case 25:\n                c = (null === (i = _this202.requestRemoteMedia) || void 0 === i ? void 0 : i.call(_this202)) || [];\n                _iterator24 = _createForOfIteratorHelper(c);\n                _context179.prev = 27;\n                _iterator24.s();\n              case 29:\n                if ((_step24 = _iterator24.n()).done) {\n                  _context179.next = 47;\n                  break;\n                }\n                _step24$value = _slicedToArray(_step24.value, 2), _e132 = _step24$value[0], _t155 = _step24$value[1];\n                _context179.t4 = _t155.has(yg.VIDEO) && _e132.videoTrack;\n                if (!_context179.t4) {\n                  _context179.next = 38;\n                  break;\n                }\n                _context179.t5 = s;\n                _context179.next = 36;\n                return _e132.videoTrack.getProcessorUsage();\n              case 36:\n                _context179.t6 = _context179.sent;\n                s = _context179.t5.concat.call(_context179.t5, _context179.t6);\n              case 38:\n                _context179.t7 = _t155.has(yg.AUDIO) && _e132.audioTrack;\n                if (!_context179.t7) {\n                  _context179.next = 45;\n                  break;\n                }\n                _context179.t8 = s;\n                _context179.next = 43;\n                return _e132.audioTrack.getProcessorUsage();\n              case 43:\n                _context179.t9 = _context179.sent;\n                s = _context179.t8.concat.call(_context179.t8, _context179.t9);\n              case 45:\n                _context179.next = 29;\n                break;\n              case 47:\n                _context179.next = 52;\n                break;\n              case 49:\n                _context179.prev = 49;\n                _context179.t10 = _context179[\"catch\"](27);\n                _iterator24.e(_context179.t10);\n              case 52:\n                _context179.prev = 52;\n                _iterator24.f();\n                return _context179.finish(52);\n              case 55:\n                if (!(0 === s.length)) {\n                  _context179.next = 57;\n                  break;\n                }\n                return _context179.abrupt(\"return\");\n              case 57:\n                o.details = function (e, t) {\n                  var i = {};\n                  var _iterator25 = _createForOfIteratorHelper(e),\n                    _step25;\n                  try {\n                    for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n                      var _step25$value = _step25.value,\n                        _s28 = _step25$value.id,\n                        _a16 = _step25$value.value,\n                        _c7 = _step25$value.level,\n                        _d10 = _step25$value.direction;\n                      var r;\n                      var _e130 = null !== (r = t.get(_s28)) && void 0 !== r ? r : 0,\n                        _u8 = 2 === _a16 ? _e130 + HE(\"EXTENSION_USAGE_UPLOAD_INTERVAL\") / 1e3 : _e130;\n                      var n, o;\n                      t.set(_s28, _u8), i[_s28] ? (2 === _a16 && (i[_s28].value = _a16), _c7 > i[_s28].level && (i[_s28].level = _c7), \"remote\" === _d10 && (i[_s28].remoteUidCount += 1), i[_s28].totalTs = null !== (n = t.get(_s28)) && void 0 !== n ? n : 0) : i[_s28] = {\n                        value: _a16,\n                        level: _c7,\n                        remoteUidCount: \"local\" === _d10 ? 0 : 1,\n                        totalTs: null !== (o = t.get(_s28)) && void 0 !== o ? o : 0\n                      };\n                    }\n                  } catch (err) {\n                    _iterator25.e(err);\n                  } finally {\n                    _iterator25.f();\n                  }\n                  return Object.keys(i).map(function (e) {\n                    var _i$e = i[e],\n                      t = _i$e.level,\n                      r = _i$e.value,\n                      n = _i$e.totalTs;\n                    return {\n                      id: e,\n                      level: t,\n                      value: r,\n                      totalTs: n\n                    };\n                  });\n                }(s, e);\n                d = Date.now(), u = d > n ? d : n + 1;\n                null === (r = _this202.requestUpload) || void 0 === r || r.call(_this202, Dm.EXTENSION_USAGE_STATS, {\n                  usageStats: o,\n                  sendTs: u\n                });\n              case 60:\n              case \"end\":\n                return _context179.stop();\n            }\n          }, _callee179, null, [[4, 19, 22, 25], [27, 49, 52, 55]]);\n        })), HE(\"EXTENSION_USAGE_UPLOAD_INTERVAL\"));\n      }\n    }, {\n      key: \"startUploadUplinkStats\",\n      value: function startUploadUplinkStats() {\n        var _this203 = this;\n        this.uploadUnplinkStarted || (this.uploadUnplinkStarted = !0, this.uplinkStatsUploadInterval && window.clearInterval(this.uplinkStatsUploadInterval), this.uplinkStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this203.requestStats) || void 0 === e ? void 0 : e.call(_this203);\n          t && (_this203.uploadUplinkStats(t, _this203.lastStats), _this203.lastStats = t);\n        }, 3e3), this.uplinkStatsUploadSlowInterval && window.clearInterval(this.uplinkStatsUploadSlowInterval), this.uplinkStatsUploadSlowInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this203.requestStats) || void 0 === e ? void 0 : e.call(_this203);\n          t && _this203.uploadSlowUplinkStats(t);\n        }, 6e4), this.uplinkRelatedStatsUploadInterval && window.clearInterval(this.uplinkRelatedStatsUploadInterval), this.uplinkRelatedStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this203.requestStats) || void 0 === e ? void 0 : e.call(_this203);\n          t && _this203.uploadRelatedUplinkStats(t, _this203.lastStats), _this203.lastStats = t;\n        }, 1e3), this.uplinkDenoiserStatsUploadInterval && window.clearInterval(this.uplinkDenoiserStatsUploadInterval), this.uplinkDenoiserStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this203.requestAllTracks) || void 0 === e ? void 0 : e.call(_this203);\n          t && _this203.uploadDenoiserStats(t);\n        }, 2e3), this.uplinkExtensionStatsUploadInterval && window.clearInterval(this.uplinkExtensionStatsUploadInterval), this.uplinkExtensionStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this203.requestAllTracks) || void 0 === e ? void 0 : e.call(_this203);\n          t && _this203.uploadExtensionStats(t);\n        }, 2e3));\n      }\n    }, {\n      key: \"uploadTransportStats\",\n      value: function uploadTransportStats(e) {\n        var _this204 = this;\n        YR(function () {\n          var t;\n          null === (t = _this204.requestUpload) || void 0 === t || t.call(_this204, Dm.TRANSPORT_STATS, function (e) {\n            var t = {\n              connectionType: 100\n            };\n            if (\"relay\" === e.selectedCandidatePair.localCandidate.candidateType) {\n              var i = e.selectedCandidatePair.localCandidate.relayProtocol;\n              \"udp\" === i && (t.connectionType = 101), \"tcp\" === i && (t.connectionType = 103), \"tls\" === i && (t.connectionType = 104);\n            }\n            return t;\n          }(e));\n        });\n      }\n    }, {\n      key: \"uploadUplinkStats\",\n      value: function uploadUplinkStats(e, t) {\n        var _this205 = this;\n        var i;\n        ((null === (i = this.requestLocalMedia) || void 0 === i ? void 0 : i.call(this)) || []).forEach(function (i) {\n          var _i86 = _slicedToArray(i, 2),\n            r = _i86[0],\n            _i86$ = _i86[1],\n            n = _i86$.track,\n            o = _i86$.ssrcs;\n          switch (r) {\n            case Cg.LocalVideoLowTrack:\n            case Cg.LocalVideoTrack:\n              {\n                var _i87 = function (e, t, i) {\n                    var r;\n                    var n = t.videoSend.find(function (t) {\n                      return t.ssrc === e;\n                    });\n                    if (!n) return null;\n                    var o = {\n                      id: MR(10, \"\"),\n                      timestamp: new Date(t.timestamp).toISOString(),\n                      mediaType: \"video\",\n                      type: \"ssrc\",\n                      ssrc: n.ssrc.toString()\n                    };\n                    switch (o.A_vstd = i._originMediaStreamTrack && !i._originMediaStreamTrack.enabled || i._mediaStreamTrack && !i._mediaStreamTrack.enabled ? \"1\" : \"0\", n.sentFrame && (o.A_fhs = n.sentFrame.height.toString(), o.A_frs = n.sentFrame.frameRate.toString(), o.A_fws = n.sentFrame.width.toString()), n.adaptionChangeReason) {\n                      case \"none\":\n                        o.A_ac = \"0\";\n                        break;\n                      case \"cpu\":\n                        o.A_ac = \"1\";\n                        break;\n                      case \"bandwidth\":\n                        o.A_ac = \"2\";\n                        break;\n                      case \"other\":\n                        o.A_ac = \"3\";\n                    }\n                    return o.A_lvps = cm[i._player ? i._player.videoElementStatus : \"uninit\"].toString(), o.A_nr = null === (r = n.nacksCount) || void 0 === r ? void 0 : r.toString(), n.avgEncodeMs && (o.A_aem = n.avgEncodeMs.toFixed(0).toString()), o;\n                  }(o[0].ssrcId, e, n),\n                  _s29 = yR(o[0].ssrcId, e, t);\n                _i87 && YR(function () {\n                  var e;\n                  return null === (e = _this205.requestUpload) || void 0 === e ? void 0 : e.call(_this205, Dm.PUBLISH_STATS, {\n                    stream_type: r === Cg.LocalVideoLowTrack ? \"low\" : \"high\",\n                    stats: KP(KP({}, _i87), _s29)\n                  });\n                });\n                var _a17 = function (e) {\n                  var t = {\n                    id: \"bweforvideo\",\n                    timestamp: new Date(e.timestamp).toISOString(),\n                    type: \"VideoBwe\"\n                  };\n                  return e.bitrate.retransmit && (t.A_rb = e.bitrate.retransmit.toString()), e.bitrate.targetEncoded && (t.A_teb = e.bitrate.targetEncoded.toString()), t.A_aeb = e.bitrate.actualEncoded.toString(), t.A_tb = e.bitrate.transmit.toString(), void 0 !== e.sendBandwidth && (t.A_asb = e.sendBandwidth.toString()), t;\n                }(e);\n                _a17 && setTimeout(function () {\n                  var e;\n                  return null === (e = _this205.requestUpload) || void 0 === e ? void 0 : e.call(_this205, Dm.PUBLISH_STATS, {\n                    stream_type: r === Cg.LocalVideoLowTrack ? \"low\" : \"high\",\n                    stats: _a17\n                  });\n                }, 1e3);\n                break;\n              }\n            case Cg.LocalAudioTrack:\n              {\n                var _t156 = function (e, t, i) {\n                  var r = t.audioSend.find(function (t) {\n                    return t.ssrc === e;\n                  });\n                  if (!r) return null;\n                  var n = {\n                    id: MR(10, \"\"),\n                    timestamp: new Date(t.timestamp).toISOString(),\n                    mediaType: \"audio\",\n                    type: \"ssrc\",\n                    ssrc: r.ssrc.toString()\n                  };\n                  return n.A_astd = i._originMediaStreamTrack.enabled && i._mediaStreamTrack.enabled ? \"0\" : \"1\", r.inputLevel ? n.A_ail = Math.round(100 * r.inputLevel).toString() : n.A_ail = Math.round(100 * i._source.getAccurateVolumeLevel()).toString(), n.A_apil = Math.round(100 * i._source.getAccurateVolumeLevel()).toString(), r.aecReturnLoss && (n.A_ecrl = Math.round(r.aecReturnLoss).toString()), r.aecReturnLossEnhancement && (n.A_ecrle = Math.round(r.aecReturnLossEnhancement).toString()), n;\n                }(o[0].ssrcId, e, n);\n                _t156 && YR(function () {\n                  var e;\n                  return null === (e = _this205.requestUpload) || void 0 === e ? void 0 : e.call(_this205, Dm.PUBLISH_STATS, {\n                    stream_type: \"high\",\n                    stats: _t156\n                  });\n                });\n                break;\n              }\n          }\n        });\n      }\n    }, {\n      key: \"uploadSlowUplinkStats\",\n      value: function uploadSlowUplinkStats(e) {\n        var _this206 = this;\n        var t;\n        ((null === (t = this.requestLocalMedia) || void 0 === t ? void 0 : t.call(this)) || []).filter(function (e) {\n          var _e133 = _slicedToArray(e, 1),\n            t = _e133[0];\n          return t === Cg.LocalVideoLowTrack || t === Cg.LocalVideoTrack;\n        }).forEach(function (t) {\n          var _t157 = _slicedToArray(t, 2),\n            i = _t157[0],\n            r = _t157[1].ssrcs;\n          var n = yR(r[0].ssrcId, e);\n          n && YR(function () {\n            var e;\n            return null === (e = _this206.requestUpload) || void 0 === e ? void 0 : e.call(_this206, Dm.PUBLISH_STATS, {\n              stream_type: i === Cg.LocalVideoLowTrack ? \"low\" : \"high\",\n              stats: n\n            });\n          });\n        });\n      }\n    }, {\n      key: \"uploadRelatedUplinkStats\",\n      value: function uploadRelatedUplinkStats(e, t) {\n        var _this207 = this;\n        var i;\n        ((null === (i = this.requestLocalMedia) || void 0 === i ? void 0 : i.call(this)) || []).filter(function (e) {\n          var _e134 = _slicedToArray(e, 1),\n            t = _e134[0];\n          return t === Cg.LocalVideoLowTrack || t === Cg.LocalVideoTrack;\n        }).forEach(function (t) {\n          var _t158 = _slicedToArray(t, 2),\n            i = _t158[0],\n            r = _t158[1].ssrcs;\n          var n = function (e, t) {\n            var i = t.videoSend.find(function (t) {\n              return t.ssrc === e;\n            });\n            return i ? {\n              mediaType: \"video\",\n              isVideoMute: !1,\n              frameRateInput: i.inputFrame && i.inputFrame.frameRate.toString(),\n              frameRateSent: i.sentFrame && i.sentFrame.frameRate.toString(),\n              googRtt: i.rttMs.toString(),\n              qpSumPerFrame: Math.floor(i.qpSumPerFrame).toString()\n            } : null;\n          }(r[0].ssrcId, e);\n          n && YR(function () {\n            var e;\n            null === (e = _this207.requestUpload) || void 0 === e || e.call(_this207, Dm.PUBLISH_RELATED_STATS, {\n              stream_type: i === Cg.LocalVideoLowTrack ? \"low\" : \"high\",\n              stats: n\n            });\n          });\n        });\n      }\n    }, {\n      key: \"uploadDenoiserStats\",\n      value: function uploadDenoiserStats(e) {\n        for (var _n45 = 0; _n45 < e.length; _n45++) {\n          var o = e[_n45];\n          if (o instanceof cR) {\n            var t, i, r;\n            var _e135 = null === (t = (i = o._external).getDenoiserStats) || void 0 === t ? void 0 : t.call(i);\n            return void (_e135 && (null === (r = this.requestUpload) || void 0 === r || r.call(this, Dm.DENOISER_STATS, _e135)));\n          }\n        }\n      }\n    }, {\n      key: \"uploadExtensionStats\",\n      value: function uploadExtensionStats(e) {\n        var _this208 = this;\n        for (var t = 0; t < e.length; t++) {\n          e[t].getProcessorStats().forEach(function (e) {\n            var t;\n            null === (t = _this208.requestUpload) || void 0 === t || t.call(_this208, e.type, e.stats);\n          });\n        }\n      }\n    }, {\n      key: \"stopUploadUplinkStats\",\n      value: function stopUploadUplinkStats() {\n        this.uploadUnplinkStarted && (this.uploadUnplinkStarted = !1, this.uplinkStatsUploadInterval && window.clearInterval(this.uplinkStatsUploadInterval), this.uplinkRelatedStatsUploadInterval && window.clearInterval(this.uplinkRelatedStatsUploadInterval), this.uplinkDenoiserStatsUploadInterval && window.clearInterval(this.uplinkDenoiserStatsUploadInterval), this.uplinkStatsUploadInterval = void 0, this.uplinkRelatedStatsUploadInterval = void 0, this.uplinkDenoiserStatsUploadInterval = void 0);\n      }\n    }, {\n      key: \"startUploadDownlinkStats\",\n      value: function startUploadDownlinkStats() {\n        var _this209 = this;\n        if (this.uploadDownlinkStarted) return;\n        var e;\n        this.uploadDownlinkStarted = !0, this.downlinkStatsUploadInterval && window.clearInterval(this.downlinkStatsUploadInterval);\n        var t = !1;\n        this.downlinkStatsUploadInterval = window.setInterval(function () {\n          var i;\n          var r = null === (i = _this209.requestStats) || void 0 === i ? void 0 : i.call(_this209);\n          r && (_this209.uploadDownlinkStats(r, t, e), e = r), t = !t;\n        }, 3e3), this.downlinkStatsUploadSlowInterval && window.clearInterval(this.downlinkStatsUploadSlowInterval), this.downlinkStatsUploadSlowInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this209.requestStats) || void 0 === e ? void 0 : e.call(_this209);\n          t && _this209.uploadSlowDownlinkStats(t);\n        }, 6e4), this.downlinkRelatedStatsUploadInterval && window.clearInterval(this.downlinkRelatedStatsUploadInterval), this.downlinkRelatedStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this209.requestStats) || void 0 === e ? void 0 : e.call(_this209);\n          t && (_this209.uploadRelatedDownlinkStats(t, _this209.lastStats), _this209.lastStats = t);\n        }, 1e3), this.downlinkExtensionStatsUploadInterval && window.clearInterval(this.downlinkExtensionStatsUploadInterval), this.downlinkExtensionStatsUploadInterval = window.setInterval(function () {\n          var e;\n          var t = null === (e = _this209.requestRemoteMedia) || void 0 === e ? void 0 : e.call(_this209);\n          t && _this209.uploadDownlinkExtensionStats(t);\n        }, 2e3);\n      }\n    }, {\n      key: \"uploadDownlinkStats\",\n      value: function uploadDownlinkStats(e, t, i) {\n        var _this210 = this;\n        var r;\n        ((null === (r = this.requestRemoteMedia) || void 0 === r ? void 0 : r.call(this)) || []).forEach(function (r) {\n          var _r47 = _slicedToArray(r, 2),\n            n = _r47[0],\n            o = _r47[1];\n          if (o.has(yg.VIDEO) && n.videoTrack) {\n            var _r48 = n.videoTrack ? function (e, t, i, r, n) {\n              var o = t.videoRecv.find(function (t) {\n                return t.ssrc === e;\n              });\n              if (!o) return null;\n              var s = {\n                id: MR(10, \"\"),\n                timestamp: new Date(t.timestamp).toISOString(),\n                mediaType: \"video\",\n                type: \"ssrc\",\n                ssrc: o.ssrc.toString()\n              };\n              var a, c;\n              if (s.bytesReceived = o.bytes.toString(), s.packetsLost = o.packetsLost.toString(), s.packetsReceived = o.packets.toString(), o.framesRateFirefox && (s.A_frr = o.framesRateFirefox.toString()), o.receivedFrame ? (s.A_frr = o.receivedFrame.frameRate.toString(), s.A_fhr = o.receivedFrame.height.toString(), s.A_fwr = o.receivedFrame.width.toString()) : (s.A_fhr = null === (a = r._videoHeight) || void 0 === a ? void 0 : a.toString(), s.A_fwr = null === (c = r._videoWidth) || void 0 === c ? void 0 : c.toString()), s.A_frd = o.decodeFrameRate.toString(), o.outputFrame && (s.A_fro = o.outputFrame.frameRate.toString()), void 0 !== o.jitterBufferMs && (s.A_jbm = Math.floor(o.jitterBufferMs).toString()), void 0 !== o.currentDelayMs && (s.A_cdm = Math.floor(o.currentDelayMs).toString()), s.A_fs = o.firsCount.toString(), s.A_ns = o.nacksCount.toString(), s.A_ps = o.plisCount.toString(), r && (s.A_vrtd = r._originMediaStreamTrack.enabled && r._mediaStreamTrack.enabled ? \"0\" : \"1\"), r._player && r._player.freezeTimeCounterList.length > 0 && (s.A_vrft = Math.round(r._player.freezeTimeCounterList.splice(0, 1)[0]).toString()), n && r._player && \"visible\" === mR.visibility) {\n                var _e136 = Math.min(6e3, r._player.renderFreezeAccTime);\n                s.A_vrrft = Math.round(_e136).toString(), r._player.renderFreezeAccTime = Math.max(0, r._player.renderFreezeAccTime - _e136);\n              }\n              if (s.A_rvps = cm[r._player ? r._player.videoElementStatus : \"uninit\"].toString(), i) {\n                var _t159 = i.videoRecv.find(function (t) {\n                  return t.ssrc === e;\n                });\n                if (_t159 && void 0 !== o.totalInterFrameDelay && void 0 !== o.totalSquaredInterFrameDelay && void 0 !== _t159.totalInterFrameDelay && void 0 !== _t159.totalSquaredInterFrameDelay) {\n                  var _e137 = o.totalInterFrameDelay - _t159.totalInterFrameDelay,\n                    _i88 = o.totalSquaredInterFrameDelay - _t159.totalSquaredInterFrameDelay,\n                    _r49 = o.framesDecodeCount - _t159.framesDecodeCount,\n                    _n46 = _e137 / _r49 * 1e3,\n                    _a18 = Math.round(1e3 * Math.sqrt((_i88 - Math.pow(_e137, 2) / _r49) / _r49));\n                  !isNaN(_a18) && _n46 + _a18 > Math.max(3 * _n46, _n46 + 150) && (s.A_ifdsd = _a18.toString());\n                }\n              }\n              return s;\n            }(n._videoSSRC, e, i, n.videoTrack, t) : void 0;\n            _r48 && YR(function () {\n              var e;\n              return null === (e = _this210.requestUpload) || void 0 === e ? void 0 : e.call(_this210, Dm.SUBSCRIBE_STATS, {\n                stream_id: n.uid,\n                stats: _r48\n              });\n            });\n          }\n          if (o.has(yg.AUDIO) && n.audioTrack) {\n            var _t160 = n.audioTrack ? function (e, t, i, r) {\n              var n = t.audioRecv.find(function (t) {\n                return t.ssrc === e;\n              });\n              if (!n) return null;\n              var o = {\n                id: MR(10, \"\"),\n                timestamp: new Date(t.timestamp).toISOString(),\n                mediaType: \"audio\",\n                type: \"ssrc\",\n                ssrc: n.ssrc.toString()\n              };\n              if (o.bytesReceived = n.bytes.toString(), o.packetsLost = n.packetsLost.toString(), o.packetsReceived = n.packets.toString(), n.outputLevel ? o.A_aol = Math.round(100 * n.outputLevel).toString() : o.A_aol = Math.round(100 * r._source.getAccurateVolumeLevel()).toString(), o.A_apol = Math.round(100 * r._source.getAccurateVolumeLevel()).toString(), r && (o.A_artd = r._originMediaStreamTrack.enabled && r._mediaStreamTrack.enabled ? \"0\" : \"1\"), o.A_jr = n.jitterMs.toString(), o.A_jbm = Math.floor(n.jitterBufferMs).toString(), o.A_cdm = Math.floor(n.jitterBufferMs).toString(), o.A_raps = cm[nv.getPlayerState(r.getTrackId())].toString(), i) {\n                var _t161 = i.audioRecv.find(function (t) {\n                  return t.ssrc === e;\n                });\n                if (_t161) {\n                  var _e138 = n.concealedSamples - _t161.concealedSamples;\n                  _e138 > 0 && (o.A_cs = Math.round(_e138).toString());\n                }\n              }\n              return o;\n            }(n._audioSSRC, e, i, n.audioTrack) : void 0;\n            _t160 && YR(function () {\n              var e;\n              return null === (e = _this210.requestUpload) || void 0 === e ? void 0 : e.call(_this210, Dm.SUBSCRIBE_STATS, {\n                stream_id: n.uid,\n                stats: _t160\n              });\n            });\n          }\n        });\n      }\n    }, {\n      key: \"uploadSlowDownlinkStats\",\n      value: function uploadSlowDownlinkStats(e) {}\n    }, {\n      key: \"uploadRelatedDownlinkStats\",\n      value: function uploadRelatedDownlinkStats(e, t) {\n        var _this211 = this;\n        var i;\n        ((null === (i = this.requestRemoteMedia) || void 0 === i ? void 0 : i.call(this)) || []).forEach(function (i) {\n          var _i89 = _slicedToArray(i, 2),\n            r = _i89[0],\n            n = _i89[1];\n          if (n.has(yg.VIDEO) && r.videoTrack) {\n            var o;\n            var _i90 = !0 === (r._videoSSRC && (null === (o = _this211.requestVideoIsReady) || void 0 === o ? void 0 : o.call(_this211, r._videoSSRC)) || !1),\n              _n47 = function (e, t, i, r, n, o) {\n                var s = i.videoRecv.find(function (t) {\n                    return t.ssrc === e;\n                  }),\n                  a = n ? n.videoRecv.find(function (t) {\n                    return t.ssrc === e;\n                  }) : void 0;\n                if (!s) return null;\n                var c = fR.isRemoteVideoFreeze(o, s, a) && t,\n                  d = {\n                    mediaType: \"video\",\n                    isVideoMute: !1,\n                    peerId: r,\n                    frameRateReceived: s.receivedFrame && s.receivedFrame.frameRate.toString(),\n                    frameRateDecoded: s.decodedFrame && s.decodedFrame.frameRate.toString(),\n                    isFreeze: c,\n                    bytesReceived: s.bytes.toString(),\n                    packetsReceived: s.packets.toString(),\n                    packetsLost: s.packetsLost.toString(),\n                    qpSumPerFrame: Math.floor(s.qpSumPerFrame).toString()\n                  };\n                return s.framesRateFirefox && (d.frameRateDecoded = s.framesRateFirefox.toString(), d.frameRateReceived = s.framesRateFirefox.toString()), d;\n              }(r._videoSSRC, _i90, e, r.uid, t, r.videoTrack);\n            _n47 && YR(function () {\n              var e;\n              null === (e = _this211.requestUpload) || void 0 === e || e.call(_this211, Dm.SUBSCRIBE_RELATED_STATS, {\n                stream_id: r.uid,\n                stats: _n47\n              });\n            });\n          }\n          if (n.has(yg.AUDIO) && r.audioTrack) {\n            var _t162 = function (e, t, i, r) {\n              var n = t.audioRecv.find(function (t) {\n                return t.ssrc === e;\n              });\n              if (!n) return null;\n              var o = fR.isRemoteAudioFreeze(r);\n              return {\n                mediaType: \"audio\",\n                isAudioMute: !1,\n                peerId: i,\n                googJitterReceived: n.jitterMs.toString(),\n                isFreeze: o,\n                bytesReceived: n.bytes.toString(),\n                packetsReceived: n.packets.toString(),\n                packetsLost: n.packetsLost.toString(),\n                frameReceived: n.receivedFrames.toString(),\n                frameDropped: n.droppedFrames.toString()\n              };\n            }(r._audioSSRC, e, r.uid, r.audioTrack);\n            _t162 && YR(function () {\n              var e;\n              null === (e = _this211.requestUpload) || void 0 === e || e.call(_this211, Dm.SUBSCRIBE_RELATED_STATS, {\n                stream_id: r.uid,\n                stats: _t162\n              });\n            });\n          }\n        });\n      }\n    }, {\n      key: \"stopUploadDownlinkStats\",\n      value: function stopUploadDownlinkStats() {\n        this.uploadDownlinkStarted && (this.uploadDownlinkStarted = !1, this.downlinkStatsUploadInterval && window.clearInterval(this.downlinkStatsUploadInterval), this.downlinkRelatedStatsUploadInterval && window.clearInterval(this.downlinkRelatedStatsUploadInterval), this.downlinkStatsUploadInterval = void 0, this.downlinkRelatedStatsUploadInterval = void 0);\n      }\n    }, {\n      key: \"stopUploadTransportStats\",\n      value: function stopUploadTransportStats() {\n        this.uploadTransportStarted && (this.uploadTransportStarted = !1, this.transportStatsUploadInterval && window.clearInterval(this.transportStatsUploadInterval), this.transportStatsUploadInterval = void 0);\n      }\n    }, {\n      key: \"stopUploadExtensionUsageStats\",\n      value: function stopUploadExtensionUsageStats() {\n        this.uploadExtensionUsageStarted && (this.uploadExtensionUsageStarted = !1, this.extensionUsageStatsUploadInterval && window.clearInterval(this.extensionUsageStatsUploadInterval), this.extensionUsageStatsUploadInterval = void 0);\n      }\n    }, {\n      key: \"uploadDownlinkExtensionStats\",\n      value: function uploadDownlinkExtensionStats(e) {\n        var _this212 = this;\n        e.forEach(function (e) {\n          var _e139 = _slicedToArray(e, 2),\n            t = _e139[0],\n            i = _e139[1];\n          if (i.has(yg.VIDEO) && t.videoTrack) {\n            t.videoTrack.getProcessorStats().forEach(function (e) {\n              var t;\n              null === (t = _this212.requestUpload) || void 0 === t || t.call(_this212, e.type, e.stats);\n            });\n          }\n          if (i.has(yg.AUDIO) && t.audioTrack) {\n            t.audioTrack.getProcessorStats().forEach(function (e) {\n              var t;\n              null === (t = _this212.requestUpload) || void 0 === t || t.call(_this212, e.type, e.stats);\n            });\n          }\n        });\n      }\n    }]);\n    return YP;\n  }(gE);\n  var qP = \"v=0\\no=- 0 0 IN IP4 127.0.0.1\\ns=AgoraGateway\\nt=0 0\\na=group:BUNDLE 0\\na=msid-semantic: WMS\\na=ice-lite\\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\\nc=IN IP4 127.0.0.1\\na=mid:0\\n\",\n    JP = \"9\",\n    XP = 2e4,\n    zP = 4e4;\n  var QP = /*#__PURE__*/function () {\n    _createClass(QP, [{\n      key: \"localCapabilities\",\n      get: function get() {\n        return qR(this._localCapabilities);\n      }\n    }, {\n      key: \"rtpCapabilities\",\n      get: function get() {\n        return qR(this._rtpCapabilities);\n      }\n    }, {\n      key: \"candidates\",\n      get: function get() {\n        return qR(this._candidates);\n      }\n    }, {\n      key: \"iceParameters\",\n      get: function get() {\n        return qR(this._iceParameters);\n      }\n    }, {\n      key: \"dtlsParameters\",\n      get: function get() {\n        return qR(this._dtlsParameters);\n      }\n    }]);\n    function QP(e) {\n      _classCallCheck(this, QP);\n      mp(this, \"sessionDesc\", void 0), mp(this, \"_localCapabilities\", void 0), mp(this, \"_rtpCapabilities\", void 0), mp(this, \"_candidates\", void 0), mp(this, \"_iceParameters\", void 0), mp(this, \"_dtlsParameters\", void 0), mp(this, \"setup\", void 0), mp(this, \"currentMidIndex\", void 0), mp(this, \"cname\", void 0), mp(this, \"firefoxSsrcMidMap\", new Map()), e = qR(e);\n      var _e140 = e,\n        t = _e140.remoteIceParameters,\n        i = _e140.remoteDtlsParameters,\n        r = _e140.candidates,\n        n = _e140.remoteRTPCapabilities,\n        o = _e140.remoteSetup,\n        s = _e140.localCapabilities,\n        a = _e140.cname,\n        c = bD.exports.parse(qP);\n      this._rtpCapabilities = n, this._candidates = r, this._iceParameters = t, this._dtlsParameters = i, this._localCapabilities = s, this.setup = o, this.cname = a;\n      var d = this.rtpCapabilities.send;\n      var _iterator26 = _createForOfIteratorHelper(c.mediaDescriptions),\n        _step26;\n      try {\n        for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n          var _e141 = _step26.value;\n          if (_e141.attributes.iceUfrag = t.iceUfrag, _e141.attributes.icePwd = t.icePwd, _e141.attributes.fingerprints = i.fingerprints, _e141.attributes.candidates = r, _e141.attributes.setup = o, \"application\" === _e141.media.mediaType && (_e141.attributes.sctpPort = \"5000\"), \"video\" === _e141.media.mediaType && (_e141.media.fmts = d.videoCodecs.map(function (e) {\n            return e.payloadType.toString(10);\n          }), _e141.attributes.payloads = d.videoCodecs, _e141.attributes.extmaps = d.videoExtensions, HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n            var _MD7 = MD([{\n                ssrcId: zP,\n                rtx: HE(\"USE_RTX\") ? 40001 : void 0\n              }], this.cname),\n              _t163 = _MD7.ssrcs,\n              _i91 = _MD7.ssrcGroups;\n            _e141.attributes.ssrcs = _t163, _e141.attributes.ssrcGroups = _i91;\n          }\n          if (\"audio\" === _e141.media.mediaType && (_e141.media.fmts = d.audioCodecs.map(function (e) {\n            return e.payloadType.toString(10);\n          }), _e141.attributes.payloads = d.audioCodecs, _e141.attributes.extmaps = d.audioExtensions, KD(_e141), HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n            var _MD8 = MD([{\n                ssrcId: XP\n              }], this.cname),\n              _t164 = _MD8.ssrcs,\n              _i92 = _MD8.ssrcGroups;\n            _e141.attributes.ssrcs = _t164, _e141.attributes.ssrcGroups = _i92;\n          }\n        }\n      } catch (err) {\n        _iterator26.e(err);\n      } finally {\n        _iterator26.f();\n      }\n      this.sessionDesc = c, this.currentMidIndex = c.mediaDescriptions.length - 1;\n    }\n    _createClass(QP, [{\n      key: \"updateRemoteRTPCapabilities\",\n      value: function updateRemoteRTPCapabilities(e) {\n        var t = bD.exports.parse(qP);\n        this._rtpCapabilities = e;\n        var i = this.rtpCapabilities.send;\n        var _iterator27 = _createForOfIteratorHelper(t.mediaDescriptions),\n          _step27;\n        try {\n          for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n            var _e142 = _step27.value;\n            if (_e142.attributes.iceUfrag = this._iceParameters.iceUfrag, _e142.attributes.icePwd = this._iceParameters.icePwd, _e142.attributes.fingerprints = this._dtlsParameters.fingerprints, _e142.attributes.candidates = this._candidates, _e142.attributes.setup = this.setup, \"application\" === _e142.media.mediaType && (_e142.attributes.sctpPort = \"5000\"), \"video\" === _e142.media.mediaType && (_e142.media.fmts = i.videoCodecs.map(function (e) {\n              return e.payloadType.toString(10);\n            }), _e142.attributes.payloads = i.videoCodecs, _e142.attributes.extmaps = i.videoExtensions, HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n              var _MD9 = MD([{\n                  ssrcId: zP,\n                  rtx: HE(\"USE_RTX\") ? 40001 : void 0\n                }], this.cname),\n                _t165 = _MD9.ssrcs,\n                _i93 = _MD9.ssrcGroups;\n              _e142.attributes.ssrcs = _t165, _e142.attributes.ssrcGroups = _i93;\n            }\n            if (\"audio\" === _e142.media.mediaType && (_e142.media.fmts = i.audioCodecs.map(function (e) {\n              return e.payloadType.toString(10);\n            }), _e142.attributes.payloads = i.audioCodecs, _e142.attributes.extmaps = i.audioExtensions, HE(\"PRELOAD_MEDIA_COUNT\") > 0)) {\n              var _MD10 = MD([{\n                  ssrcId: XP\n                }], this.cname),\n                _t166 = _MD10.ssrcs,\n                _i94 = _MD10.ssrcGroups;\n              _e142.attributes.ssrcs = _t166, _e142.attributes.ssrcGroups = _i94;\n            }\n          }\n        } catch (err) {\n          _iterator27.e(err);\n        } finally {\n          _iterator27.f();\n        }\n        this.sessionDesc = t, this.currentMidIndex = t.mediaDescriptions.length - 1;\n      }\n    }, {\n      key: \"preloadRemoteMedia\",\n      value: function preloadRemoteMedia(e) {\n        this.rtpCapabilities;\n        var t = this.candidates,\n          i = this.dtlsParameters,\n          r = this.iceParameters,\n          n = this.rtpCapabilities.send;\n        for (var o = 1; o < e; o++) {\n          var _e143 = 2 * o + XP,\n            _s30 = 2 * o + zP,\n            _MD11 = MD([{\n              ssrcId: _e143\n            }], this.cname),\n            _a19 = _MD11.ssrcs,\n            c = _MD11.ssrcGroups,\n            _MD12 = MD([{\n              ssrcId: _s30,\n              rtx: HE(\"USE_RTX\") ? _s30 + 1 : void 0\n            }], this.cname),\n            _d11 = _MD12.ssrcs,\n            _u9 = _MD12.ssrcGroups;\n          this.sessionDesc.mediaDescriptions.push({\n            media: {\n              mediaType: \"video\",\n              port: JP,\n              protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n              fmts: n.videoCodecs.map(function (e) {\n                return e.payloadType.toString(10);\n              })\n            },\n            connections: [{\n              nettype: \"IN\",\n              addrtype: \"IP4\",\n              address: \"127.0.0.1\"\n            }],\n            bandwidths: [],\n            attributes: {\n              iceUfrag: r.iceUfrag,\n              icePwd: r.icePwd,\n              unrecognized: [],\n              candidates: t,\n              extmaps: n.videoExtensions,\n              fingerprints: i.fingerprints,\n              imageattr: [],\n              msids: [],\n              remoteCandidatesList: [],\n              rids: [],\n              ssrcs: _d11,\n              ssrcGroups: _u9,\n              rtcpFeedbackWildcards: [],\n              payloads: n.videoCodecs,\n              rtcp: {\n                port: \"9\",\n                netType: \"IN\",\n                addressType: \"IP4\",\n                address: \"0.0.0.0\"\n              },\n              setup: this.setup,\n              direction: \"sendonly\",\n              rtcpMux: !0,\n              rtcpRsize: !0,\n              mid: \"\".concat(2 * o - 1)\n            }\n          }), this.sessionDesc.mediaDescriptions.push({\n            media: {\n              mediaType: \"audio\",\n              port: JP,\n              protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n              fmts: n.audioCodecs.map(function (e) {\n                return e.payloadType.toString(10);\n              })\n            },\n            connections: [{\n              nettype: \"IN\",\n              addrtype: \"IP4\",\n              address: \"127.0.0.1\"\n            }],\n            bandwidths: [],\n            attributes: {\n              iceUfrag: r.iceUfrag,\n              icePwd: r.icePwd,\n              unrecognized: [],\n              candidates: t,\n              extmaps: n.audioExtensions,\n              fingerprints: i.fingerprints,\n              imageattr: [],\n              msids: [],\n              remoteCandidatesList: [],\n              rids: [],\n              ssrcs: _a19,\n              ssrcGroups: c,\n              rtcpFeedbackWildcards: [],\n              payloads: n.audioCodecs,\n              rtcp: {\n                port: \"9\",\n                netType: \"IN\",\n                addressType: \"IP4\",\n                address: \"0.0.0.0\"\n              },\n              setup: this.setup,\n              direction: \"sendonly\",\n              rtcpMux: !0,\n              rtcpRsize: !0,\n              mid: \"\".concat(2 * o)\n            }\n          }), this.currentMidIndex += 2;\n        }\n        this.updateBundleMids();\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return bD.exports.print(this.sessionDesc);\n      }\n    }, {\n      key: \"send\",\n      value: function send(e, t, i, r) {\n        var _MD13 = MD(t, this.cname, i),\n          n = _MD13.ssrcs,\n          o = _MD13.ssrcGroups,\n          s = this.findPreloadMediaDesc(n);\n        if (s) {\n          if (Qh() && this.firefoxSsrcMidMap.set(n[0].ssrcId, s.attributes.mid), r && (r.tcc || r.remb)) {\n            var _e144 = this.sessionDesc.mediaDescriptions.indexOf(s);\n            return this.sessionDesc.mediaDescriptions[_e144] = this.mungSendMediaDesc(s, r), {\n              mid: s.attributes.mid,\n              needExchangeSDP: !0\n            };\n          }\n          return {\n            mid: s.attributes.mid,\n            needExchangeSDP: !1\n          };\n        }\n        {\n          var _t167 = this.findAvailableMediaIndex(e, n);\n          var _i95;\n          return -1 === _t167 || zh() || Zh() || $h() ? (_i95 = this.createOrRecycleSendMedia(e, n, o, \"sendonly\", r), this.updateBundleMids()) : (_i95 = qR(this.sessionDesc.mediaDescriptions[_t167]), _i95.attributes.direction = \"sendonly\", _i95.attributes.ssrcs = n, _i95.attributes.ssrcGroups = o, this.sessionDesc.mediaDescriptions[_t167] = this.mungSendMediaDesc(_i95, r)), Qh() && this.firefoxSsrcMidMap.set(n[0].ssrcId, _i95.attributes.mid), {\n            mid: _i95.attributes.mid,\n            needExchangeSDP: !0\n          };\n        }\n      }\n    }, {\n      key: \"batchSend\",\n      value: function batchSend(e) {\n        var _this213 = this;\n        var t = e.map(function (e) {\n            var t = e.kind,\n              i = e.ssrcMsg,\n              r = e.mslabel;\n            return _this213.send(t, i, r);\n          }),\n          i = [];\n        var r = !1;\n        return t.forEach(function (e) {\n          var t = e.mid,\n            n = e.needExchangeSDP;\n          n && (r = !0), i.push(t);\n        }), {\n          mids: i,\n          needExchangeSDP: r\n        };\n      }\n    }, {\n      key: \"stopSending\",\n      value: function stopSending(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return t.attributes.mid && -1 !== e.indexOf(t.attributes.mid);\n        });\n        if (t.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.\");\n        t.forEach(function (e) {\n          \"0\" === e.attributes.mid || Qh() || zh() || Zh() ? e.attributes.ssrcs = [] : (e.attributes.ssrcs = [], e.attributes.direction = \"inactive\", e.media.port = \"0\");\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"mute\",\n      value: function mute(e) {\n        var t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!t) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.mute.\"));\n        t.attributes.direction = \"inactive\";\n      }\n    }, {\n      key: \"unmute\",\n      value: function unmute(e) {\n        var t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (!t) throw new Error(\"mediaDescription not found with \".concat(e, \" in remote SDP when calling RemoteSDP.unmute.\"));\n        t.attributes.direction = \"sendonly\";\n      }\n    }, {\n      key: \"muteRemote\",\n      value: function muteRemote(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return e.includes(t.attributes.mid || \"\");\n        });\n        if (t.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");\n        t.forEach(function (e) {\n          e.attributes.direction = \"inactive\";\n        });\n      }\n    }, {\n      key: \"unmuteRemote\",\n      value: function unmuteRemote(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return e.includes(t.attributes.mid || \"\");\n        });\n        if (t.length !== e.length) throw new Error(\"mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.\");\n        t.forEach(function (e) {\n          e.attributes.direction = \"recvonly\";\n        });\n      }\n    }, {\n      key: \"receive\",\n      value: function receive(e, t, i, r) {\n        var _this214 = this;\n        e.forEach(function (e, n) {\n          _this214.createOrRecycleRecvMedia(e, [], \"recvonly\", t, i, r[n]);\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"stopReceiving\",\n      value: function stopReceiving(e) {\n        var t = this.sessionDesc.mediaDescriptions.filter(function (t) {\n          return -1 !== e.indexOf(t.attributes.mid);\n        });\n        if (t.length !== e.length) throw new Error(\"MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.\");\n        t.forEach(function (e) {\n          e.media.port = \"0\", e.attributes.direction = \"inactive\";\n        }), this.updateBundleMids();\n      }\n    }, {\n      key: \"restartICE\",\n      value: function restartICE(e) {\n        e = qR(e), this._iceParameters = e, this.sessionDesc.mediaDescriptions.forEach(function (t) {\n          t.attributes.iceUfrag = e.iceUfrag, t.attributes.icePwd = e.icePwd;\n        });\n      }\n    }, {\n      key: \"predictReceivingMids\",\n      value: function predictReceivingMids(e) {\n        var t = [];\n        for (var i = 0; i < e; i++) t.push((this.currentMidIndex + i + 1).toString(10));\n        return t;\n      }\n    }, {\n      key: \"findAvailableMediaIndex\",\n      value: function findAvailableMediaIndex(e, t) {\n        var _this215 = this;\n        return this.sessionDesc.mediaDescriptions.findIndex(function (i) {\n          var r = i.media.mediaType === e && \"0\" !== i.media.port && (\"sendonly\" === i.attributes.direction || \"sendrecv\" === i.attributes.direction) && 0 === i.attributes.ssrcs.length;\n          if (Qh()) {\n            if (r) {\n              var _e145 = _this215.firefoxSsrcMidMap.get(t[0].ssrcId);\n              return !(_e145 || \"0\" !== i.attributes.mid && \"1\" !== i.attributes.mid) || !(!_e145 || _e145 !== i.attributes.mid);\n            }\n            return !1;\n          }\n          return r;\n        });\n      }\n    }, {\n      key: \"createOrRecycleRecvMedia\",\n      value: function createOrRecycleRecvMedia(e, t, i, r, n, o) {\n        var s = e._mediaStreamTrack.kind,\n          a = this.rtpCapabilities.recv,\n          c = this.localCapabilities.send;\n        var d = [];\n        if (s === yg.VIDEO) {\n          var u, l;\n          if (HE(\"H264_PROFILE_LEVEL_ID\") && \"h264\" === r && (d = a.videoCodecs.filter(function (e) {\n            var t, i;\n            return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(r) && (null == e || null === (i = e.fmtp) || void 0 === i ? void 0 : i.parameters[\"profile-level-id\"]) === HE(\"H264_PROFILE_LEVEL_ID\");\n          })), !d || 0 === (null === (u = d) || void 0 === u ? void 0 : u.length)) {\n            var _e146 = c.videoCodecs.filter(function (e) {\n              var t;\n              return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(r);\n            });\n            0 !== _e146.length && (d = a.videoCodecs.filter(function (t) {\n              return _e146.some(function (e) {\n                return e.payloadType === t.payloadType;\n              });\n            }));\n          }\n          if (HE(\"USE_RTX\")) {\n            var _e147 = d.map(function (e) {\n                return e.payloadType.toString();\n              }),\n              _t168 = a.videoCodecs.filter(function (t) {\n                var i, r;\n                return \"rtx\" === (null === (i = t.rtpMap) || void 0 === i ? void 0 : i.encodingName) && _e147.includes((null === (r = t.fmtp) || void 0 === r ? void 0 : r.parameters.apt) || \"\");\n              });\n            d = [].concat(_toConsumableArray(d), _toConsumableArray(_t168));\n          }\n          if (0 === d.length) NE.warning(\"codec \".concat(r, \" not included in rtpCapabilities, fallback to default payloads: \").concat(null === (l = a.videoCodecs[0].rtpMap) || void 0 === l ? void 0 : l.encodingName)), d = a.videoCodecs;\n        } else d = a.audioCodecs.filter(function (e) {\n          var t;\n          return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(n);\n        }), 0 === d.length && (NE.warning(\"codec \".concat(n, \" not included in rtpCapabilities, fallback to opus\")), d = a.audioCodecs.filter(function (e) {\n          var t;\n          return ((null === (t = e.rtpMap) || void 0 === t ? void 0 : t.encodingName.toLowerCase()) || \"\").includes(\"opus\");\n        }));\n        var h = s === yg.VIDEO ? a.videoExtensions : a.audioExtensions;\n        this.currentMidIndex += 1;\n        var p = \"\".concat(this.currentMidIndex);\n        var _ = {\n          media: {\n            mediaType: s,\n            port: JP,\n            protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n            fmts: d.map(function (e) {\n              return e.payloadType.toString(10);\n            })\n          },\n          connections: [{\n            nettype: \"IN\",\n            addrtype: \"IP4\",\n            address: \"127.0.0.1\"\n          }],\n          bandwidths: [],\n          attributes: {\n            iceUfrag: this.iceParameters.iceUfrag,\n            icePwd: this.iceParameters.icePwd,\n            unrecognized: [],\n            candidates: this.candidates,\n            extmaps: h,\n            fingerprints: this.dtlsParameters.fingerprints,\n            imageattr: [],\n            msids: [],\n            remoteCandidatesList: [],\n            rids: [],\n            ssrcs: t,\n            ssrcGroups: [],\n            rtcpFeedbackWildcards: [],\n            payloads: d,\n            rtcp: {\n              port: \"9\",\n              netType: \"IN\",\n              addressType: \"IP4\",\n              address: \"0.0.0.0\"\n            },\n            setup: this.setup,\n            direction: i,\n            rtcpMux: !0,\n            rtcpRsize: !0,\n            mid: \"\".concat(p)\n          }\n        };\n        _ = this.mungRecvMediaDsec(_, e, o);\n        var E = this.findFirstClosedMedia(s);\n        if (E) {\n          var _e148 = this.sessionDesc.mediaDescriptions.indexOf(E);\n          this.sessionDesc.mediaDescriptions[_e148] = _;\n        } else this.sessionDesc.mediaDescriptions.push(_);\n        return _;\n      }\n    }, {\n      key: \"createOrRecycleSendMedia\",\n      value: function createOrRecycleSendMedia(e, t, i, r, n) {\n        var o = this.rtpCapabilities.send,\n          s = e === yg.VIDEO ? o.videoCodecs : o.audioCodecs,\n          a = e === yg.VIDEO ? o.videoExtensions : o.audioExtensions;\n        this.currentMidIndex += 1;\n        var c = \"\".concat(this.currentMidIndex);\n        var d = {\n          media: {\n            mediaType: e,\n            port: JP,\n            protos: [\"UDP\", \"TLS\", \"RTP\", \"SAVPF\"],\n            fmts: s.map(function (e) {\n              return e.payloadType.toString(10);\n            })\n          },\n          connections: [{\n            nettype: \"IN\",\n            addrtype: \"IP4\",\n            address: \"127.0.0.1\"\n          }],\n          bandwidths: [],\n          attributes: {\n            iceUfrag: this.iceParameters.iceUfrag,\n            icePwd: this.iceParameters.icePwd,\n            unrecognized: [],\n            candidates: this.candidates,\n            extmaps: a,\n            fingerprints: this.dtlsParameters.fingerprints,\n            imageattr: [],\n            msids: [],\n            remoteCandidatesList: [],\n            rids: [],\n            ssrcs: t,\n            ssrcGroups: i,\n            rtcpFeedbackWildcards: [],\n            payloads: s,\n            rtcp: {\n              port: \"9\",\n              netType: \"IN\",\n              addressType: \"IP4\",\n              address: \"0.0.0.0\"\n            },\n            setup: this.setup,\n            direction: r,\n            rtcpMux: !0,\n            rtcpRsize: !0,\n            mid: \"\".concat(c)\n          }\n        };\n        d = this.mungSendMediaDesc(d, n);\n        var u = this.findFirstClosedMedia(e);\n        if (u) {\n          var _e149 = this.sessionDesc.mediaDescriptions.indexOf(u);\n          this.sessionDesc.mediaDescriptions[_e149] = d;\n        } else this.sessionDesc.mediaDescriptions.push(d);\n        return d;\n      }\n    }, {\n      key: \"updateBundleMids\",\n      value: function updateBundleMids() {\n        this.sessionDesc.attributes.groups[0].identificationTag = this.sessionDesc.mediaDescriptions.filter(function (e) {\n          return \"0\" !== e.media.port;\n        }).map(function (e) {\n          return e.attributes.mid;\n        });\n      }\n    }, {\n      key: \"mungRecvMediaDsec\",\n      value: function mungRecvMediaDsec(e, t, i) {\n        var r = qR(e);\n        return xD(r), UD(r, t), VD(r, t), jD(r), FD(r, i, this.localCapabilities.send), r;\n      }\n    }, {\n      key: \"mungSendMediaDesc\",\n      value: function mungSendMediaDesc(e, t) {\n        var i = qR(e);\n        return FD(i, t, this.localCapabilities.recv), KD(i), i;\n      }\n    }, {\n      key: \"updateRecvMedia\",\n      value: function updateRecvMedia(e, t) {\n        var i = this.sessionDesc.mediaDescriptions.findIndex(function (t) {\n          return t.attributes.mid === e;\n        });\n        if (-1 !== i) {\n          var _e150 = this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i], t);\n          this.sessionDesc.mediaDescriptions[i] = _e150;\n        }\n      }\n    }, {\n      key: \"bumpMid\",\n      value: function bumpMid(e) {\n        this.currentMidIndex += e;\n      }\n    }, {\n      key: \"findFirstClosedMedia\",\n      value: function findFirstClosedMedia(e) {\n        return this.sessionDesc.mediaDescriptions.find(function (t) {\n          return Qh() ? \"0\" === t.media.port && t.media.mediaType === e : \"0\" === t.media.port;\n        });\n      }\n    }, {\n      key: \"findPreloadMediaDesc\",\n      value: function findPreloadMediaDesc(e) {\n        return this.sessionDesc.mediaDescriptions.find(function (t) {\n          var i, r;\n          return (null === (i = t.attributes) || void 0 === i || null === (r = i.ssrcs[0]) || void 0 === r ? void 0 : r.ssrcId) === e[0].ssrcId;\n        });\n      }\n    }, {\n      key: \"getSSRC\",\n      value: function getSSRC(e) {\n        var t;\n        return null === (t = this.sessionDesc.mediaDescriptions.find(function (t) {\n          return t.attributes.mid === e;\n        })) || void 0 === t ? void 0 : t.attributes.ssrcs;\n      }\n    }]);\n    return QP;\n  }();\n  var ZP;\n  function $P(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function eL(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? $P(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : $P(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var tL = (ZS((ZP = /*#__PURE__*/function (_xg3) {\n    _inherits(e, _xg3);\n    _createClass(e, [{\n      key: \"currentLocalDescription\",\n      get: function get() {\n        return this.peerConnection.currentLocalDescription;\n      }\n    }, {\n      key: \"currentRemoteDescription\",\n      get: function get() {\n        return this.peerConnection.currentRemoteDescription;\n      }\n    }, {\n      key: \"peerConnectionState\",\n      get: function get() {\n        return this.peerConnection.connectionState;\n      }\n    }, {\n      key: \"iceConnectionState\",\n      get: function get() {\n        return this.peerConnection.iceConnectionState;\n      }\n    }]);\n    function e(_e151, t, i) {\n      var _this216;\n      _classCallCheck(this, e);\n      _this216 = _possibleConstructorReturn(this, _getPrototypeOf(e).call(this, _e151, t)), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"peerConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"remoteSDP\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"initialOffer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"transportEventReceiver\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"statsFilter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"useRTX\", HE(\"USE_RTX\")), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"localCapabilities\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"localCandidateCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"allCandidatesReceived\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"mutex\", new OT(\"NVExtentionsConnection-mutex\")), mp(_assertThisInitialized(_assertThisInitialized(_this216)), \"rtcMedia\", void 0), _this216.store = t, _this216.peerConnection = i, _this216.statsFilter = pP(_this216.peerConnection, void 0, void 0, Qh() ? 1200 : void 0), _this216.bindPCEvents(), _this216.bindStatsEvents(), _this216.store.p2pId = _this216.store.p2pId + 1;\n      return _this216;\n    }\n    _createClass(e, [{\n      key: \"establish\",\n      value: function () {\n        var _establish3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee180(e) {\n          var _e152, t, i;\n          return _regeneratorRuntime().wrap(function _callee180$(_context180) {\n            while (1) switch (_context180.prev = _context180.next) {\n              case 0:\n                _context180.prev = 0;\n                _context180.next = 3;\n                return this.peerConnection.createOffer();\n              case 3:\n                _e152 = _context180.sent;\n                if (_e152.sdp) {\n                  _context180.next = 6;\n                  break;\n                }\n                throw new Error(\"Cannot get initialOffer.sdp when trying to establish PeerConnection.\");\n              case 6:\n                t = PD(_e152.sdp);\n                _context180.next = 9;\n                return GD(!this.useRTX, HE(\"FILTER_VIDEO_FEC\"), HE(\"FILTER_AUDIO_FEC\"));\n              case 9:\n                i = _context180.sent;\n                return _context180.abrupt(\"return\", (this.localCapabilities = i, this.initialOffer = _e152, eL(eL({}, t), {}, {\n                  rtpCapabilities: i,\n                  offerSDP: _e152.sdp\n                })));\n              case 13:\n                _context180.prev = 13;\n                _context180.t0 = _context180[\"catch\"](0);\n                throw new vE(TE.GET_LOCAL_CONNECTION_PARAMS_FAILED, _context180.t0.toString());\n              case 16:\n              case \"end\":\n                return _context180.stop();\n            }\n          }, _callee180, this, [[0, 13]]);\n        }));\n        function establish(_x277) {\n          return _establish3.apply(this, arguments);\n        }\n        return establish;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee181(e, t, i, r, n, o) {\n          var _s31, _a20, c, _d12, _u10;\n          return _regeneratorRuntime().wrap(function _callee181$(_context181) {\n            while (1) switch (_context181.prev = _context181.next) {\n              case 0:\n                _context181.prev = 0;\n                if (this.initialOffer) {\n                  _context181.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot establish NVConnection without initial offer.\");\n              case 3:\n                this.remoteSDP = new QP({\n                  remoteIceParameters: e,\n                  remoteDtlsParameters: t,\n                  candidates: i,\n                  remoteRTPCapabilities: r,\n                  remoteSetup: n,\n                  localCapabilities: HD(this.localCapabilities),\n                  cname: o\n                });\n                _s31 = this.remoteSDP.toString(), _a20 = bD.exports.parse(this.initialOffer.sdp), c = _a20.mediaDescriptions.find(function (e) {\n                  return \"audio\" === e.media.mediaType;\n                });\n                c && KD(c);\n                _d12 = bD.exports.print(_a20), _u10 = this.logSDPExchange(_d12 || \"\", \"offer\", \"local\", \"connect\");\n                _context181.next = 9;\n                return this.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: _d12\n                });\n              case 9:\n                null == _u10 || _u10(_s31);\n                _context181.next = 12;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _s31\n                });\n              case 12:\n                _context181.next = 17;\n                break;\n              case 14:\n                _context181.prev = 14;\n                _context181.t0 = _context181[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NV.connect failed; \".concat(_context181.t0.toString()));\n              case 17:\n              case \"end\":\n                return _context181.stop();\n            }\n          }, _callee181, this, [[0, 14]]);\n        }));\n        function connect(_x278, _x279, _x280, _x281, _x282, _x283) {\n          return _connect6.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"updateRemoteConnect\",\n      value: function () {\n        var _updateRemoteConnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee182(e) {\n          var t, i, r, n, o;\n          return _regeneratorRuntime().wrap(function _callee182$(_context182) {\n            while (1) switch (_context182.prev = _context182.next) {\n              case 0:\n                null === (t = this.remoteSDP) || void 0 === t || t.updateRemoteRTPCapabilities(e), null === (i = this.remoteSDP) || void 0 === i || i.preloadRemoteMedia(2);\n                n = null === (r = this.remoteSDP) || void 0 === r ? void 0 : r.toString();\n                _context182.next = 4;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: n\n                });\n              case 4:\n                _context182.next = 6;\n                return this.peerConnection.createAnswer();\n              case 6:\n                o = _context182.sent;\n                _context182.next = 9;\n                return this.peerConnection.setLocalDescription(o);\n              case 9:\n                NE.debug(\"[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.\");\n              case 10:\n              case \"end\":\n                return _context182.stop();\n            }\n          }, _callee182, this);\n        }));\n        function updateRemoteConnect(_x284) {\n          return _updateRemoteConnect.apply(this, arguments);\n        }\n        return updateRemoteConnect;\n      }()\n    }, {\n      key: \"send\",\n      value: function send(e, t, i) {\n        var r = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee183() {\n          var n, o, _s32, _a21, c, _d13, _u11, _l6, _o31, _h4, _p4;\n          return _regeneratorRuntime().wrap(function _callee183$(_context183) {\n            while (1) switch (_context183.prev = _context183.next) {\n              case 0:\n                _context183.next = 2;\n                return yD(r.mutex.lock(\"From NVExtentionsConnection.send\"));\n              case 2:\n                n = _context183.sent;\n                _context183.prev = 3;\n                if (r.remoteSDP) {\n                  _context183.next = 6;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.send before remote SDP created\");\n              case 6:\n                o = [];\n                e.forEach(function (e) {\n                  var t = r.peerConnection.addTransceiver(e._mediaStreamTrack, {\n                    direction: \"sendonly\"\n                  });\n                  o.push(t);\n                });\n                _context183.t0 = Qh() && !0 === HE(\"SIMULCAST\");\n                if (!_context183.t0) {\n                  _context183.next = 12;\n                  break;\n                }\n                _context183.next = 12;\n                return yD(r.applySimulcastForFirefox(o, e));\n              case 12:\n                _context183.next = 14;\n                return yD(r.peerConnection.createOffer());\n              case 14:\n                _s32 = _context183.sent;\n                _a21 = r.remoteSDP.predictReceivingMids(e.length);\n                c = r.mungSendOfferSDP(_s32.sdp, e, _a21);\n                _d13 = bD.exports.parse(c);\n                _u11 = _a21.map(function (e) {\n                  var t = _d13.mediaDescriptions.find(function (t) {\n                    return t.attributes.mid === e;\n                  });\n                  if (!t) throw new Error(\"Cannot extract ssrc from mediaDescription.\");\n                  return LD(t, r.useRTX);\n                });\n                _context183.prev = 19;\n                _context183.next = 22;\n                return _u11;\n              case 22:\n                _l6 = _context183.sent;\n                _context183.next = 36;\n                break;\n              case 25:\n                _context183.prev = 25;\n                _context183.t1 = _context183[\"catch\"](19);\n                _l6 = [], r.remoteSDP.receive(e, t, i, _l6);\n                _o31 = r.remoteSDP.toString();\n                _context183.next = 31;\n                return yD(r.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: c\n                }));\n              case 31:\n                _context183.next = 33;\n                return yD(r.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _o31\n                }));\n              case 33:\n                _context183.next = 35;\n                return yD(r.stopSending(_a21, !0));\n              case 35:\n                throw _context183.t1;\n              case 36:\n                r.remoteSDP.receive(e, t, i, _l6);\n                _h4 = r.remoteSDP.toString(), _p4 = r.logSDPExchange(c, \"offer\", \"local\", \"send\");\n                _context183.next = 40;\n                return yD(r.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: c\n                }));\n              case 40:\n                _context183.next = 42;\n                return yD(r.applySimulcastEncodings(o, e));\n              case 42:\n                _context183.next = 44;\n                return yD(r.applySendEncodings(o, e));\n              case 44:\n                null == _p4 || _p4(_h4);\n                _context183.next = 47;\n                return yD(r.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _h4\n                }));\n              case 47:\n                return _context183.abrupt(\"return\", o.map(function (e, t) {\n                  var i = _a21[t];\n                  return {\n                    localSSRC: _u11[t],\n                    id: i,\n                    transceiver: e\n                  };\n                }));\n              case 50:\n                _context183.prev = 50;\n                _context183.t2 = _context183[\"catch\"](3);\n                throw _context183.t2 instanceof vE ? _context183.t2 : new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.send failed; \".concat(_context183.t2.toString()));\n              case 53:\n                _context183.prev = 53;\n                n();\n                return _context183.finish(53);\n              case 56:\n              case \"end\":\n                return _context183.stop();\n            }\n          }, _callee183, null, [[3, 50, 53, 56], [19, 25]]);\n        }))();\n      }\n    }, {\n      key: \"stopSending\",\n      value: function () {\n        var _stopSending3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee184(e, t) {\n          var i, _t169, r, _n48, o;\n          return _regeneratorRuntime().wrap(function _callee184$(_context184) {\n            while (1) switch (_context184.prev = _context184.next) {\n              case 0:\n                if (!t) {\n                  _context184.next = 4;\n                  break;\n                }\n                _context184.t0 = void 0;\n                _context184.next = 7;\n                break;\n              case 4:\n                _context184.next = 6;\n                return this.mutex.lock(\"From NVExtentionsConnection.stopSending\");\n              case 6:\n                _context184.t0 = _context184.sent;\n              case 7:\n                i = _context184.t0;\n                _context184.prev = 8;\n                if (this.remoteSDP) {\n                  _context184.next = 11;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.stopSending before remote SDP created\");\n              case 11:\n                _t169 = this.peerConnection.getTransceivers().filter(function (t) {\n                  return -1 !== e.indexOf(t.mid);\n                });\n                if (!(_t169.length !== e.length)) {\n                  _context184.next = 14;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.\");\n              case 14:\n                _t169.map(function (e) {\n                  var t;\n                  e.direction = \"inactive\", null === (t = e.stop) || void 0 === t || t.call(e);\n                });\n                _context184.next = 17;\n                return this.peerConnection.createOffer();\n              case 17:\n                r = _context184.sent;\n                _n48 = this.logSDPExchange(r.sdp || \"\", \"offer\", \"local\", \"stopSending\");\n                _context184.next = 21;\n                return this.peerConnection.setLocalDescription(r);\n              case 21:\n                this.remoteSDP.stopReceiving(e);\n                o = this.remoteSDP.toString();\n                null == _n48 || _n48(o);\n                _context184.next = 26;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: o\n                });\n              case 26:\n                _context184.next = 31;\n                break;\n              case 28:\n                _context184.prev = 28;\n                _context184.t1 = _context184[\"catch\"](8);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.stopSending failed; \".concat(_context184.t1.toString()));\n              case 31:\n                _context184.prev = 31;\n                i && i();\n                return _context184.finish(31);\n              case 34:\n              case \"end\":\n                return _context184.stop();\n            }\n          }, _callee184, this, [[8, 28, 31, 34]]);\n        }));\n        function stopSending(_x285, _x286) {\n          return _stopSending3.apply(this, arguments);\n        }\n        return stopSending;\n      }()\n    }, {\n      key: \"receive\",\n      value: function () {\n        var _receive3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee185(e, t, i, r) {\n          var _this$remoteSDP$send3, _n49, o, _t170, _i96, _r50, _o32, _s33;\n          return _regeneratorRuntime().wrap(function _callee185$(_context185) {\n            while (1) switch (_context185.prev = _context185.next) {\n              case 0:\n                _context185.prev = 0;\n                if (this.remoteSDP) {\n                  _context185.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.receive \".concat(e, \" before remoteSDP created.\"));\n              case 3:\n                _this$remoteSDP$send3 = this.remoteSDP.send(e, t, i, r), _n49 = _this$remoteSDP$send3.mid, o = _this$remoteSDP$send3.needExchangeSDP;\n                if (!o) {\n                  _context185.next = 18;\n                  break;\n                }\n                _t170 = this.remoteSDP.toString(), _i96 = this.logSDPExchange(_t170, \"offer\", \"remote\", \"receive\");\n                _context185.next = 8;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: _t170\n                });\n              case 8:\n                _context185.next = 10;\n                return this.peerConnection.createAnswer();\n              case 10:\n                _r50 = _context185.sent;\n                _o32 = this.mungReceiveAnswerSDP(_r50.sdp, _n49, e);\n                null == _i96 || _i96(_o32 || \"\");\n                _context185.next = 15;\n                return this.peerConnection.setLocalDescription({\n                  type: \"answer\",\n                  sdp: _o32\n                });\n              case 15:\n                NE.debug(\"[NVExtentionsConnection] receive \".concat(e, \" by exchanging SDP.\"));\n                _context185.next = 19;\n                break;\n              case 18:\n                NE.debug(\"[NVExtentionsConnection] receive \".concat(e, \" no need to exchange SDP.\"));\n              case 19:\n                _s33 = this.peerConnection.getTransceivers().find(function (e) {\n                  return e.mid === _n49;\n                });\n                if (_s33) {\n                  _context185.next = 22;\n                  break;\n                }\n                throw new Error(\"Cannot get transceiver after setLocalDescription.\");\n              case 22:\n                return _context185.abrupt(\"return\", {\n                  track: _s33.receiver.track,\n                  id: _n49\n                });\n              case 25:\n                _context185.prev = 25;\n                _context185.t0 = _context185[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.receive failed; \".concat(_context185.t0.toString()));\n              case 28:\n              case \"end\":\n                return _context185.stop();\n            }\n          }, _callee185, this, [[0, 25]]);\n        }));\n        function receive(_x287, _x288, _x289, _x290) {\n          return _receive3.apply(this, arguments);\n        }\n        return receive;\n      }()\n    }, {\n      key: \"batchReceive\",\n      value: function () {\n        var _batchReceive3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee186(e) {\n          var _this217 = this;\n          var _this$remoteSDP$batch2, t, i, _e153, _t171, _i97;\n          return _regeneratorRuntime().wrap(function _callee186$(_context186) {\n            while (1) switch (_context186.prev = _context186.next) {\n              case 0:\n                _context186.prev = 0;\n                if (this.remoteSDP) {\n                  _context186.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.\");\n              case 3:\n                _this$remoteSDP$batch2 = this.remoteSDP.batchSend(e), t = _this$remoteSDP$batch2.mids, i = _this$remoteSDP$batch2.needExchangeSDP;\n                if (!i) {\n                  _context186.next = 17;\n                  break;\n                }\n                _e153 = this.remoteSDP.toString(), _t171 = this.logSDPExchange(_e153, \"offer\", \"remote\", \"receive\");\n                _context186.next = 8;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: _e153\n                });\n              case 8:\n                _context186.next = 10;\n                return this.peerConnection.createAnswer();\n              case 10:\n                _i97 = _context186.sent;\n                null == _t171 || _t171(_i97.sdp || \"\");\n                _context186.next = 14;\n                return this.peerConnection.setLocalDescription(_i97);\n              case 14:\n                NE.debug(\"[NVExtentionsConnection] batchReceive by exchanging SDP.\");\n                _context186.next = 18;\n                break;\n              case 17:\n                NE.debug(\"[NVExtentionsConnection] batchReceive no need to exchange SDP.\");\n              case 18:\n                return _context186.abrupt(\"return\", t.map(function (e) {\n                  var t = _this217.peerConnection.getTransceivers().find(function (t) {\n                    return t.mid === e;\n                  });\n                  if (!t) throw new Error(\"Cannot get transceiver after setLocalDescription.\");\n                  return {\n                    track: t.receiver.track,\n                    id: e\n                  };\n                }));\n              case 21:\n                _context186.prev = 21;\n                _context186.t0 = _context186[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.receive failed; \".concat(_context186.t0.toString()));\n              case 24:\n              case \"end\":\n                return _context186.stop();\n            }\n          }, _callee186, this, [[0, 21]]);\n        }));\n        function batchReceive(_x291) {\n          return _batchReceive3.apply(this, arguments);\n        }\n        return batchReceive;\n      }()\n    }, {\n      key: \"stopReceiving\",\n      value: function () {\n        var _stopReceiving3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee187(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee187$(_context187) {\n            while (1) switch (_context187.prev = _context187.next) {\n              case 0:\n                _context187.prev = 0;\n                if (this.remoteSDP) {\n                  _context187.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.\");\n              case 3:\n                this.remoteSDP.stopSending(e);\n                t = this.remoteSDP.toString(), i = this.logSDPExchange(t, \"offer\", \"remote\", \"stopReceiving\");\n                _context187.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context187.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                r = _context187.sent;\n                null == i || i(r.sdp || \"\");\n                _context187.next = 13;\n                return this.peerConnection.setLocalDescription(r);\n              case 13:\n                _context187.next = 18;\n                break;\n              case 15:\n                _context187.prev = 15;\n                _context187.t0 = _context187[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection stopReceiving failed; \".concat(_context187.t0.toString()));\n              case 18:\n              case \"end\":\n                return _context187.stop();\n            }\n          }, _callee187, this, [[0, 15]]);\n        }));\n        function stopReceiving(_x292) {\n          return _stopReceiving3.apply(this, arguments);\n        }\n        return stopReceiving;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee188(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee188$(_context188) {\n            while (1) switch (_context188.prev = _context188.next) {\n              case 0:\n                _context188.prev = 0;\n                if (this.remoteSDP) {\n                  _context188.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.muteRemote mid=\".concat(e, \" before remote SDP created.\"));\n              case 3:\n                this.remoteSDP.mute(e);\n                t = this.remoteSDP.toString(), i = this.logSDPExchange(t, \"offer\", \"remote\", \"muteRemote\");\n                _context188.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context188.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                r = _context188.sent;\n                null == i || i(r.sdp || \"\");\n                _context188.next = 13;\n                return this.peerConnection.setLocalDescription(r);\n              case 13:\n                _context188.next = 18;\n                break;\n              case 15:\n                _context188.prev = 15;\n                _context188.t0 = _context188[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.muteRemote failed; \".concat(_context188.t0.toString()));\n              case 18:\n              case \"end\":\n                return _context188.stop();\n            }\n          }, _callee188, this, [[0, 15]]);\n        }));\n        function muteRemote(_x293) {\n          return _muteRemote3.apply(this, arguments);\n        }\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee189(e) {\n          var t, i, r;\n          return _regeneratorRuntime().wrap(function _callee189$(_context189) {\n            while (1) switch (_context189.prev = _context189.next) {\n              case 0:\n                _context189.prev = 0;\n                if (this.remoteSDP) {\n                  _context189.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.unmuteRemote mid=\".concat(e, \" before remote SDP created.\"));\n              case 3:\n                this.remoteSDP.unmute(e);\n                t = this.remoteSDP.toString(), i = this.logSDPExchange(t, \"offer\", \"remote\", \"unmuteRemote\");\n                _context189.next = 7;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"offer\",\n                  sdp: t\n                });\n              case 7:\n                _context189.next = 9;\n                return this.peerConnection.createAnswer();\n              case 9:\n                r = _context189.sent;\n                null == i || i(r.sdp || \"\");\n                _context189.next = 13;\n                return this.peerConnection.setLocalDescription(r);\n              case 13:\n                _context189.next = 18;\n                break;\n              case 15:\n                _context189.prev = 15;\n                _context189.t0 = _context189[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.unmuteRemote failed; \".concat(_context189.t0.toString()));\n              case 18:\n              case \"end\":\n                return _context189.stop();\n            }\n          }, _callee189, this, [[0, 15]]);\n        }));\n        function unmuteRemote(_x294) {\n          return _unmuteRemote3.apply(this, arguments);\n        }\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee190(e) {\n          var t, i, r, _n50;\n          return _regeneratorRuntime().wrap(function _callee190$(_context190) {\n            while (1) switch (_context190.prev = _context190.next) {\n              case 0:\n                _context190.prev = 0;\n                if (this.remoteSDP) {\n                  _context190.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.muteLocal before remote SDP created.\");\n              case 3:\n                t = this.peerConnection.getTransceivers().filter(function (t) {\n                  return t.mid && -1 !== e.indexOf(t.mid);\n                });\n                if (!(t.length !== e.length)) {\n                  _context190.next = 6;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length.\");\n              case 6:\n                t.map(function (e) {\n                  e.direction = \"inactive\";\n                });\n                _context190.next = 9;\n                return this.peerConnection.createOffer();\n              case 9:\n                i = _context190.sent;\n                r = this.logSDPExchange(i.sdp || \"\", \"offer\", \"local\", \"muteLocal\");\n                _context190.next = 13;\n                return this.peerConnection.setLocalDescription(i);\n              case 13:\n                this.remoteSDP.muteRemote(e);\n                _n50 = this.remoteSDP.toString();\n                null == r || r(_n50);\n                _context190.next = 18;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _n50\n                });\n              case 18:\n                _context190.next = 23;\n                break;\n              case 20:\n                _context190.prev = 20;\n                _context190.t0 = _context190[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.muteLocal failed; \".concat(_context190.t0.toString()));\n              case 23:\n              case \"end\":\n                return _context190.stop();\n            }\n          }, _callee190, this, [[0, 20]]);\n        }));\n        function muteLocal(_x295) {\n          return _muteLocal4.apply(this, arguments);\n        }\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee192(e) {\n          var t, i, r, _n51;\n          return _regeneratorRuntime().wrap(function _callee192$(_context192) {\n            while (1) switch (_context192.prev = _context192.next) {\n              case 0:\n                _context192.prev = 0;\n                if (this.remoteSDP) {\n                  _context192.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.\");\n              case 3:\n                t = this.peerConnection.getTransceivers().filter(function (t) {\n                  return t.mid && -1 !== e.indexOf(t.mid);\n                });\n                if (!(t.length !== e.length)) {\n                  _context192.next = 6;\n                  break;\n                }\n                throw new Error(\"Transceivers' length doesn't match mids' length.\");\n              case 6:\n                t.map( /*#__PURE__*/function () {\n                  var _ref52 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee191(e, t) {\n                    return _regeneratorRuntime().wrap(function _callee191$(_context191) {\n                      while (1) switch (_context191.prev = _context191.next) {\n                        case 0:\n                          e.direction = \"sendonly\";\n                        case 1:\n                        case \"end\":\n                          return _context191.stop();\n                      }\n                    }, _callee191);\n                  }));\n                  return function (_x297, _x298) {\n                    return _ref52.apply(this, arguments);\n                  };\n                }());\n                _context192.next = 9;\n                return this.peerConnection.createOffer();\n              case 9:\n                i = _context192.sent;\n                r = this.logSDPExchange(i.sdp || \"\", \"offer\", \"local\", \"unmuteLocal\");\n                _context192.next = 13;\n                return this.peerConnection.setLocalDescription(i);\n              case 13:\n                this.remoteSDP.unmuteRemote(e);\n                _n51 = this.remoteSDP.toString();\n                null == r || r(_n51);\n                _context192.next = 18;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _n51\n                });\n              case 18:\n                _context192.next = 23;\n                break;\n              case 20:\n                _context192.prev = 20;\n                _context192.t0 = _context192[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, \"NVExtentionsConnection.unmuteLocal failed; \".concat(_context192.t0.toString()));\n              case 23:\n              case \"end\":\n                return _context192.stop();\n            }\n          }, _callee192, this, [[0, 20]]);\n        }));\n        function unmuteLocal(_x296) {\n          return _unmuteLocal4.apply(this, arguments);\n        }\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"restartICE\",\n      value: function restartICE() {\n        var e = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee193() {\n          var t, i, r, _yield$r$iceParameter3, _n52, o, _s34;\n          return _regeneratorRuntime().wrap(function _callee193$(_context193) {\n            while (1) switch (_context193.prev = _context193.next) {\n              case 0:\n                _context193.next = 2;\n                return yD(e.mutex.lock(\"From NVExtentionsConnection.restartICE\"));\n              case 2:\n                t = _context193.sent;\n                _context193.prev = 3;\n                _context193.next = 6;\n                return yD(e.peerConnection.createOffer({\n                  iceRestart: !0\n                }));\n              case 6:\n                i = _context193.sent;\n                if (i.sdp) {\n                  _context193.next = 9;\n                  break;\n                }\n                throw new Error(\"Cannot restartICE because restart offer SDP does not exist.\");\n              case 9:\n                r = PD(i.sdp);\n                _context193.next = 12;\n                return r.iceParameters;\n              case 12:\n                _yield$r$iceParameter3 = _context193.sent;\n                _n52 = _yield$r$iceParameter3.remoteIceParameters;\n                if (e.remoteSDP) {\n                  _context193.next = 16;\n                  break;\n                }\n                throw new Error(\"Cannot restartICE before remoteSDP created.\");\n              case 16:\n                e.remoteSDP.restartICE(_n52);\n                o = e.remoteSDP.toString(), _s34 = e.logSDPExchange(i.sdp || \"\", \"offer\", \"local\", \"restartICE\");\n                _context193.next = 20;\n                return yD(e.peerConnection.setLocalDescription(i));\n              case 20:\n                null == _s34 || _s34(o);\n                _context193.next = 23;\n                return yD(e.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: o\n                }));\n              case 23:\n                _context193.next = 28;\n                break;\n              case 25:\n                _context193.prev = 25;\n                _context193.t0 = _context193[\"catch\"](3);\n                NE.warning(\"restart ICE failed, abort operation\", _context193.t0);\n              case 28:\n                _context193.prev = 28;\n                t();\n                return _context193.finish(28);\n              case 31:\n              case \"end\":\n                return _context193.stop();\n            }\n          }, _callee193, null, [[3, 25, 28, 31]]);\n        }))();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        null === (e = this.onConnectionStateChange) || void 0 === e || e.call(this, \"closed\"), this.unbindPCEvents(), this.unbindStatsEvents(), this.removeAllListeners(), this.transportEventReceiver = void 0, this.statsFilter.destroy();\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        return this.statsFilter.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        return this.statsFilter.getVideoIsReady(e);\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function () {\n        var _updateEncoderConfig3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee194(e, t) {\n          var i, r, _n53, o;\n          return _regeneratorRuntime().wrap(function _callee194$(_context194) {\n            while (1) switch (_context194.prev = _context194.next) {\n              case 0:\n                _context194.prev = 0;\n                if (this.remoteSDP) {\n                  _context194.next = 3;\n                  break;\n                }\n                throw new Error(\"Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.\");\n              case 3:\n                _context194.next = 5;\n                return this.peerConnection.createOffer();\n              case 5:\n                i = _context194.sent;\n                r = this.mungSendOfferSDP(i.sdp, [t], [e]);\n                this.remoteSDP.updateRecvMedia(e, t);\n                _n53 = this.remoteSDP.toString(), o = this.logSDPExchange(r, \"offer\", \"local\", \"updateEncoderConfig\");\n                _context194.next = 11;\n                return this.peerConnection.setLocalDescription({\n                  type: \"offer\",\n                  sdp: r\n                });\n              case 11:\n                null == o || o(_n53);\n                _context194.next = 14;\n                return this.peerConnection.setRemoteDescription({\n                  type: \"answer\",\n                  sdp: _n53\n                });\n              case 14:\n                _context194.next = 19;\n                break;\n              case 16:\n                _context194.prev = 16;\n                _context194.t0 = _context194[\"catch\"](0);\n                throw new vE(TE.EXCHANGE_SDP_FAILED, _context194.t0.toString());\n              case 19:\n              case \"end\":\n                return _context194.stop();\n            }\n          }, _callee194, this, [[0, 16]]);\n        }));\n        function updateEncoderConfig(_x299, _x300) {\n          return _updateEncoderConfig3.apply(this, arguments);\n        }\n        return updateEncoderConfig;\n      }()\n    }, {\n      key: \"updateSendParameters\",\n      value: function () {\n        var _updateSendParameters3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee195(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee195$(_context195) {\n            while (1) switch (_context195.prev = _context195.next) {\n              case 0:\n                i = this.peerConnection.getTransceivers().filter(function (t) {\n                  return t.mid === e;\n                });\n                _context195.t0 = 1 === i.length;\n                if (!_context195.t0) {\n                  _context195.next = 12;\n                  break;\n                }\n                if (!this.isVP8Simulcast(t)) {\n                  _context195.next = 10;\n                  break;\n                }\n                _context195.t1 = Qh();\n                if (_context195.t1) {\n                  _context195.next = 8;\n                  break;\n                }\n                _context195.next = 8;\n                return this.applySimulcastEncodings(i, [t]);\n              case 8:\n                _context195.next = 12;\n                break;\n              case 10:\n                _context195.next = 12;\n                return this.applySendEncodings(i, [t]);\n              case 12:\n              case \"end\":\n                return _context195.stop();\n            }\n          }, _callee195, this);\n        }));\n        function updateSendParameters(_x301, _x302) {\n          return _updateSendParameters3.apply(this, arguments);\n        }\n        return updateSendParameters;\n      }()\n    }, {\n      key: \"setStatsRemoteVideoIsReady\",\n      value: function setStatsRemoteVideoIsReady(e, t) {\n        this.statsFilter.setVideoIsReady2(e, t);\n      }\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee196(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee196$(_context196) {\n            while (1) switch (_context196.prev = _context196.next) {\n              case 0:\n                i = this.peerConnection.getTransceivers().find(function (e) {\n                  return e.mid === t;\n                });\n                _context196.t0 = i;\n                if (!_context196.t0) {\n                  _context196.next = 5;\n                  break;\n                }\n                _context196.next = 5;\n                return i.sender.replaceTrack(e._mediaStreamTrack);\n              case 5:\n              case \"end\":\n                return _context196.stop();\n            }\n          }, _callee196, this);\n        }));\n        function replaceTrack(_x303, _x304) {\n          return _replaceTrack3.apply(this, arguments);\n        }\n        return replaceTrack;\n      }()\n    }, {\n      key: \"getP2PConnectionParams\",\n      value: function getP2PConnectionParams() {\n        var e;\n        if (null === (e = this.peerConnection.currentLocalDescription) || void 0 === e || !e.sdp || !this.localCapabilities) throw new Error();\n        return eL(eL({}, PD(this.peerConnection.currentLocalDescription.sdp)), {}, {\n          rtpCapabilities: this.localCapabilities\n        });\n      }\n    }, {\n      key: \"bindPCEvents\",\n      value: function bindPCEvents() {\n        var _this218 = this;\n        this.peerConnection.oniceconnectionstatechange = function () {\n          var e;\n          null === (e = _this218.onICEConnectionStateChange) || void 0 === e || e.call(_this218, _this218.peerConnection.iceConnectionState);\n        }, this.peerConnection.onconnectionstatechange = function () {\n          var e;\n          null === (e = _this218.onConnectionStateChange) || void 0 === e || e.call(_this218, _this218.peerConnection.connectionState);\n        }, this.peerConnection.onicecandidate = function (e) {\n          e.candidate ? _this218.localCandidateCount += 1 : (_this218.peerConnection.onicecandidate = null, _this218.allCandidatesReceived = !0, NE.debug(\"[pc-\".concat(_this218.store.p2pId, \"] local candidate count\"), _this218.localCandidateCount));\n        }, setTimeout(function () {\n          _this218.allCandidatesReceived || (_this218.allCandidatesReceived = !0, NE.debug(\"[pc-\".concat(_this218.store.p2pId, \"] onicecandidate timeout, local candidate count\"), _this218.localCandidateCount));\n        }, HE(\"CANDIDATE_TIMEOUT\"));\n      }\n    }, {\n      key: \"unbindPCEvents\",\n      value: function unbindPCEvents() {\n        this.peerConnection.oniceconnectionstatechange = null, this.peerConnection.onconnectionstatechange = null, this.peerConnection.onsignalingstatechange = null, this.peerConnection.onicecandidateerror = null, this.peerConnection.onicecandidate = null, this.peerConnection.ontrack = null;\n      }\n    }, {\n      key: \"applySendEncodings\",\n      value: function () {\n        var _applySendEncodings3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee197(e, t) {\n          var c, _d14, _u12, i, r, _e154, _t172, n, o, s, a, _e155, _c8, _l7;\n          return _regeneratorRuntime().wrap(function _callee197$(_context197) {\n            while (1) switch (_context197.prev = _context197.next) {\n              case 0:\n                _context197.prev = 0;\n                if (jg().supportSetRtpSenderParameters) {\n                  _context197.next = 3;\n                  break;\n                }\n                return _context197.abrupt(\"return\");\n              case 3:\n                if (!(e.length !== t.length)) {\n                  _context197.next = 5;\n                  break;\n                }\n                return _context197.abrupt(\"return\");\n              case 5:\n                c = 0;\n              case 6:\n                if (!(c < e.length)) {\n                  _context197.next = 32;\n                  break;\n                }\n                _d14 = e[c], _u12 = t[c];\n                if (!(_u12 && _u12 instanceof Ew)) {\n                  _context197.next = 29;\n                  break;\n                }\n                if (!this.isVP8Simulcast(_u12)) {\n                  _context197.next = 11;\n                  break;\n                }\n                return _context197.abrupt(\"continue\", 29);\n              case 11:\n                _e154 = {}, _t172 = {};\n                _context197.t0 = _u12._optimizationMode;\n                _context197.next = _context197.t0 === \"motion\" ? 15 : _context197.t0 === \"detail\" ? 17 : 19;\n                break;\n              case 15:\n                _e154.degradationPreference = \"maintain-framerate\";\n                return _context197.abrupt(\"break\", 20);\n              case 17:\n                _e154.degradationPreference = \"maintain-resolution\";\n                return _context197.abrupt(\"break\", 20);\n              case 19:\n                _e154.degradationPreference = \"balanced\";\n              case 20:\n                if (null !== (i = _u12._encoderConfig) && void 0 !== i && i.bitrateMax) _t172.maxBitrate = 1e3 * (null === (n = _u12._encoderConfig) || void 0 === n ? void 0 : n.bitrateMax);\n                if (_u12._hints.includes(lg.LOW_STREAM)) null !== (o = _u12._encoderConfig) && void 0 !== o && o.frameRate && (_t172.maxFramerate = RR(_u12._encoderConfig.frameRate)), null !== (s = _u12._encoderConfig) && void 0 !== s && s.scaleResolutionDownBy && (null === (a = _u12._encoderConfig) || void 0 === a ? void 0 : a.scaleResolutionDownBy) > 1 && (_t172.scaleResolutionDownBy = _u12._encoderConfig.scaleResolutionDownBy);\n                if (HE(\"DSCP_TYPE\") && ap()) {\n                  _e155 = HE(\"DSCP_TYPE\");\n                  [\"very-low\", \"low\", \"medium\", \"high\"].includes(_e155) && (_t172.networkPriority = _e155);\n                }\n                _c8 = _d14.sender.getParameters(), _l7 = null === (r = _c8.encodings) || void 0 === r ? void 0 : r[0];\n                Qh() && !_l7 && (_e154.encodings = [_t172]);\n                _l7 && Object.assign(_l7, _t172);\n                Object.assign(_c8, _e154);\n                _context197.next = 29;\n                return _d14.sender.setParameters(_c8);\n              case 29:\n                c++;\n                _context197.next = 6;\n                break;\n              case 32:\n                _context197.next = 37;\n                break;\n              case 34:\n                _context197.prev = 34;\n                _context197.t1 = _context197[\"catch\"](0);\n                NE.debug(\"Apply RTPSendEncodings failed.\");\n              case 37:\n              case \"end\":\n                return _context197.stop();\n            }\n          }, _callee197, this, [[0, 34]]);\n        }));\n        function applySendEncodings(_x305, _x306) {\n          return _applySendEncodings3.apply(this, arguments);\n        }\n        return applySendEncodings;\n      }()\n    }, {\n      key: \"mungSendOfferSDP\",\n      value: function mungSendOfferSDP(e, t, i) {\n        var _this219 = this;\n        var r = bD.exports.parse(e);\n        return t.forEach(function (e, t) {\n          var n = i[t],\n            o = r.mediaDescriptions.find(function (e) {\n              return e.attributes.mid === n;\n            });\n          o && (UD(o, e), BD(o, e, _this219.store.codec));\n        }), bD.exports.print(r);\n      }\n    }, {\n      key: \"mungReceiveAnswerSDP\",\n      value: function mungReceiveAnswerSDP(e, t, i) {\n        var r = bD.exports.parse(e),\n          n = r.mediaDescriptions.find(function (e) {\n            return e.attributes.mid === t;\n          });\n        return n && i === yg.AUDIO && \"audio\" === n.media.mediaType && KD(n), bD.exports.print(r);\n      }\n    }, {\n      key: \"bindStatsEvents\",\n      value: function bindStatsEvents() {\n        var _this220 = this;\n        this.statsFilter.onFirstAudioReceived = function (e) {\n          var t;\n          null === (t = _this220.onFirstAudioReceived) || void 0 === t || t.call(_this220, e);\n        }, this.statsFilter.onFirstVideoReceived = function (e) {\n          var t;\n          null === (t = _this220.onFirstVideoReceived) || void 0 === t || t.call(_this220, e);\n        }, this.statsFilter.onFirstAudioDecoded = function (e) {\n          var t;\n          null === (t = _this220.onFirstAudioDecoded) || void 0 === t || t.call(_this220, e);\n        }, this.statsFilter.onFirstVideoDecoded = function (e, t, i) {\n          var r;\n          null === (r = _this220.onFirstVideoDecoded) || void 0 === r || r.call(_this220, e, t, i);\n        }, this.statsFilter.onSelectedLocalCandidateChanged = function (e, t) {\n          var i;\n          null === (i = _this220.onSelectedLocalCandidateChanged) || void 0 === i || i.call(_this220, e, t);\n        }, this.statsFilter.onSelectedRemoteCandidateChanged = function (e, t) {\n          var i;\n          null === (i = _this220.onSelectedRemoteCandidateChanged) || void 0 === i || i.call(_this220, e, t);\n        }, this.statsFilter.onFirstVideoDecodedTimeout = function (e) {\n          var t;\n          null === (t = _this220.onFirstVideoDecodedTimeout) || void 0 === t || t.call(_this220, e);\n        };\n      }\n    }, {\n      key: \"unbindStatsEvents\",\n      value: function unbindStatsEvents() {\n        this.statsFilter.onFirstAudioReceived = void 0, this.statsFilter.onFirstVideoReceived = void 0, this.statsFilter.onFirstAudioDecoded = void 0, this.statsFilter.onFirstVideoDecoded = void 0, this.statsFilter.onSelectedLocalCandidateChanged = void 0, this.statsFilter.onSelectedRemoteCandidateChanged = void 0, this.statsFilter.onFirstVideoDecodedTimeout = void 0;\n      }\n    }, {\n      key: \"applySimulcastForFirefox\",\n      value: function () {\n        var _applySimulcastForFirefox2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee198(e, t) {\n          var _s35, i, r, n, o, _a22, c, _e156, _t173, _i98;\n          return _regeneratorRuntime().wrap(function _callee198$(_context198) {\n            while (1) switch (_context198.prev = _context198.next) {\n              case 0:\n                if (!(e.length === t.length)) {\n                  _context198.next = 13;\n                  break;\n                }\n                _s35 = 0;\n              case 2:\n                if (!(_s35 < e.length)) {\n                  _context198.next = 13;\n                  break;\n                }\n                _a22 = e[_s35], c = t[_s35];\n                if (!(c instanceof Ew && !c._hints.includes(lg.LOW_STREAM) && null !== (i = c._encoderConfig) && void 0 !== i && i.bitrateMax && (null === (r = c._encoderConfig) || void 0 === r ? void 0 : r.bitrateMax) > 200 && null !== (n = c._scalabiltyMode) && void 0 !== n && n.numSpatialLayers && (null === (o = c._scalabiltyMode) || void 0 === o ? void 0 : o.numSpatialLayers) > 1 && \"vp8\" === this.store.codec)) {\n                  _context198.next = 10;\n                  break;\n                }\n                _e156 = {}, _t173 = {\n                  high: 1e3 * (c._encoderConfig.bitrateMax - 50),\n                  medium: 5e4\n                };\n                _e156.encodings = [{\n                  rid: \"m\",\n                  active: !0,\n                  maxBitrate: _t173.medium,\n                  scaleResolutionDownBy: 4\n                }, {\n                  rid: \"h\",\n                  active: !0,\n                  maxBitrate: _t173.high\n                }];\n                _i98 = _a22.sender.getParameters();\n                _context198.next = 10;\n                return _a22.sender.setParameters(Object.assign(_i98, _e156));\n              case 10:\n                _s35++;\n                _context198.next = 2;\n                break;\n              case 13:\n              case \"end\":\n                return _context198.stop();\n            }\n          }, _callee198, this);\n        }));\n        function applySimulcastForFirefox(_x307, _x308) {\n          return _applySimulcastForFirefox2.apply(this, arguments);\n        }\n        return applySimulcastForFirefox;\n      }()\n    }, {\n      key: \"applySimulcastEncodings\",\n      value: function () {\n        var _applySimulcastEncodings2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee199(e, t) {\n          var i, r, _t174, _n54, o, _s36;\n          return _regeneratorRuntime().wrap(function _callee199$(_context199) {\n            while (1) switch (_context199.prev = _context199.next) {\n              case 0:\n                if (!(!Qh() && e.length === t.length)) {\n                  _context199.next = 13;\n                  break;\n                }\n                i = 0;\n              case 2:\n                if (!(i < e.length)) {\n                  _context199.next = 13;\n                  break;\n                }\n                r = t[i];\n                if (!(r instanceof Ew && this.isVP8Simulcast(r))) {\n                  _context199.next = 10;\n                  break;\n                }\n                _t174 = e[i], _n54 = {}, o = {\n                  high: 1e3 * (r._encoderConfig.bitrateMax - 50),\n                  medium: 5e4\n                };\n                _n54.encodings = [{\n                  active: !0,\n                  adaptivePtime: !1,\n                  networkPriority: \"high\",\n                  priority: \"high\",\n                  maxBitrate: o.high\n                }, {\n                  active: !0,\n                  adaptivePtime: !1,\n                  networkPriority: \"low\",\n                  priority: \"low\",\n                  maxBitrate: o.medium,\n                  scaleResolutionDownBy: 4\n                }];\n                _s36 = _t174.sender.getParameters();\n                _context199.next = 10;\n                return _t174.sender.setParameters(Object.assign(_s36, _n54));\n              case 10:\n                i++;\n                _context199.next = 2;\n                break;\n              case 13:\n              case \"end\":\n                return _context199.stop();\n            }\n          }, _callee199, this);\n        }));\n        function applySimulcastEncodings(_x309, _x310) {\n          return _applySimulcastEncodings2.apply(this, arguments);\n        }\n        return applySimulcastEncodings;\n      }()\n    }, {\n      key: \"isVP8Simulcast\",\n      value: function isVP8Simulcast(e) {\n        var t, i, r, n;\n        return !!(e instanceof Ew && HE(\"SIMULCAST\") && \"vp8\" === this.store.codec && !e._hints.includes(lg.LOW_STREAM) && null !== (t = e._encoderConfig) && void 0 !== t && t.bitrateMax && (null === (i = e._encoderConfig) || void 0 === i ? void 0 : i.bitrateMax) > 200 && null !== (r = e._scalabiltyMode) && void 0 !== r && r.numSpatialLayers && (null === (n = e._scalabiltyMode) || void 0 === n ? void 0 : n.numSpatialLayers) > 1);\n      }\n    }, {\n      key: \"logSDPExchange\",\n      value: function logSDPExchange(e, t, i, r) {\n        var _this221 = this;\n        if (HE(\"SDP_LOGGING\")) return NE.upload(\"exchanging \".concat(i, \" \").concat(t, \" SDP during NVExtentionsConnection.\").concat(r, \"\\n\"), e), \"offer\" === t ? function (e) {\n          _this221.logSDPExchange(e, \"answer\", \"local\" === i ? \"remote\" : \"local\", r);\n        } : void 0;\n      }\n    }, {\n      key: \"getRemoteSSRC\",\n      value: function () {\n        var _getRemoteSSRC3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee200(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee200$(_context200) {\n            while (1) switch (_context200.prev = _context200.next) {\n              case 0:\n                if (this.remoteSDP) {\n                  _context200.next = 2;\n                  break;\n                }\n                return _context200.abrupt(\"return\");\n              case 2:\n                t = this.remoteSDP.getSSRC(e);\n                return _context200.abrupt(\"return\", null == t ? void 0 : t[0].ssrcId);\n              case 4:\n              case \"end\":\n                return _context200.stop();\n            }\n          }, _callee200, this);\n        }));\n        function getRemoteSSRC(_x311) {\n          return _getRemoteSSRC3.apply(this, arguments);\n        }\n        return getRemoteSSRC;\n      }()\n    }], [{\n      key: \"resolvePCConfiguration\",\n      value: function resolvePCConfiguration(t) {\n        var _i$iceServers5, _i$iceServers6;\n        var i = {\n          iceServers: []\n        };\n        return t.iceServers ? i.iceServers = t.iceServers : t.turnServer && \"off\" !== t.turnServer.mode && (xm(t.turnServer.servers) ? i.iceServers = t.turnServer.servers : (i.iceServers && (_i$iceServers5 = i.iceServers).push.apply(_i$iceServers5, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.servers))), HE(\"USE_TURN_SERVER_OF_GATEWAY\") && i.iceServers && t.turnServer.serversFromGateway && (_i$iceServers6 = i.iceServers).push.apply(_i$iceServers6, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.serversFromGateway))), HE(\"FORCE_TURN_TCP\") ? i.iceTransportPolicy = \"relay\" : t.turnServer.servers.concat(t.turnServer.serversFromGateway || []).forEach(function (e) {\n          e.forceturn && (i.iceTransportPolicy = \"relay\");\n        }))), i;\n      }\n    }, {\n      key: \"turnServerConfigToIceServers\",\n      value: function turnServerConfigToIceServers(e) {\n        var t = [];\n        return e.forEach(function (e) {\n          e.security ? e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turns:\".concat(TR(e.turnServerURL), \":\").concat(e.tcpport, \"?transport=tcp\")\n          }) : (e.udpport && !HE(\"FORCE_TURN_TCP\") && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.udpport, \"?transport=udp\")\n          }), e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.tcpport, \"?transport=tcp\")\n          }));\n        }), t;\n      }\n    }]);\n    return e;\n  }(xg)).prototype, \"connect\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"connect\"), ZP.prototype), ZS(ZP.prototype, \"updateRemoteConnect\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"updateRemoteConnect\"), ZP.prototype), ZS(ZP.prototype, \"receive\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"receive\"), ZP.prototype), ZS(ZP.prototype, \"batchReceive\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"batchReceive\"), ZP.prototype), ZS(ZP.prototype, \"stopReceiving\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"stopReceiving\"), ZP.prototype), ZS(ZP.prototype, \"muteRemote\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"muteRemote\"), ZP.prototype), ZS(ZP.prototype, \"unmuteRemote\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"unmuteRemote\"), ZP.prototype), ZS(ZP.prototype, \"muteLocal\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"muteLocal\"), ZP.prototype), ZS(ZP.prototype, \"unmuteLocal\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"unmuteLocal\"), ZP.prototype), ZS(ZP.prototype, \"close\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"close\"), ZP.prototype), ZS(ZP.prototype, \"updateEncoderConfig\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"updateEncoderConfig\"), ZP.prototype), ZS(ZP.prototype, \"updateSendParameters\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"updateSendParameters\"), ZP.prototype), ZS(ZP.prototype, \"replaceTrack\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"replaceTrack\"), ZP.prototype), ZS(ZP.prototype, \"getRemoteSSRC\", [iL], Object.getOwnPropertyDescriptor(ZP.prototype, \"getRemoteSSRC\"), ZP.prototype), ZP);\n  function iL(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee201() {\n      var e,\n        i,\n        n,\n        o,\n        s,\n        _args201 = arguments;\n      return _regeneratorRuntime().wrap(function _callee201$(_context201) {\n        while (1) switch (_context201.prev = _context201.next) {\n          case 0:\n            e = this.mutex;\n            _context201.next = 3;\n            return e.lock(\"From NVExtentionsConnection.\".concat(t));\n          case 3:\n            i = _context201.sent;\n            _context201.prev = 4;\n            for (n = _args201.length, o = new Array(n), s = 0; s < n; s++) o[s] = _args201[s];\n            _context201.next = 8;\n            return r.apply(this, o);\n          case 8:\n            return _context201.abrupt(\"return\", _context201.sent);\n          case 9:\n            _context201.prev = 9;\n            i();\n            return _context201.finish(9);\n          case 12:\n          case \"end\":\n            return _context201.stop();\n        }\n      }, _callee201, this, [[4,, 9, 12]]);\n    })), i;\n  }\n  var rL;\n  function nL(e) {\n    var t,\n      i,\n      r,\n      n = 2;\n    for (\"undefined\" != typeof Symbol && (i = OD, r = Symbol.iterator); n--;) {\n      if (i && null != (t = e[i])) return t.call(e);\n      if (r && null != (t = e[r])) return new oL(t.call(e));\n      i = \"@@asyncIterator\", r = \"@@iterator\";\n    }\n    throw new TypeError(\"Object is not async iterable\");\n  }\n  function oL(e) {\n    function t(e) {\n      if (Object(e) !== e) return Cl.reject(new TypeError(e + \" is not an object.\"));\n      var t = e.done;\n      return Cl.resolve(e.value).then(function (e) {\n        return {\n          value: e,\n          done: t\n        };\n      });\n    }\n    return (oL = function oL(e) {\n      this.s = e, this.n = e.next;\n    }).prototype = {\n      s: null,\n      n: null,\n      next: function next() {\n        return t(this.n.apply(this.s, arguments));\n      },\n      return: function _return(e) {\n        var i = this.s.return;\n        return void 0 === i ? Cl.resolve({\n          value: e,\n          done: !0\n        }) : t(i.apply(this.s, arguments));\n      },\n      throw: function _throw(e) {\n        var i = this.s.return;\n        return void 0 === i ? Cl.reject(e) : t(i.apply(this.s, arguments));\n      }\n    }, new oL(e);\n  }\n  var sL = (ZS((rL = /*#__PURE__*/function (_xg4) {\n    _inherits(e, _xg4);\n    _createClass(e, [{\n      key: \"currentLocalDescription\",\n      get: function get() {\n        return this.peerConnection.currentLocalDescription;\n      }\n    }, {\n      key: \"currentRemoteDescription\",\n      get: function get() {\n        return this.peerConnection.currentRemoteDescription;\n      }\n    }, {\n      key: \"peerConnectionState\",\n      get: function get() {\n        return this.peerConnection.connectionState;\n      }\n    }, {\n      key: \"iceConnectionState\",\n      get: function get() {\n        return this.peerConnection.iceConnectionState;\n      }\n    }]);\n    function e(t, i) {\n      var _this222;\n      _classCallCheck(this, e);\n      _this222 = _possibleConstructorReturn(this, _getPrototypeOf(e).call(this, t, i)), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"peerConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"cname\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"mutex\", new OT(\"DataChannelConnection-mutex\")), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"dataChannel\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"_p2pConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this222)), \"_nvMedia\", void 0), _this222.store = i, _this222.store.dcId = _this222.store.dcId + 1, _this222.peerConnection = new RTCPeerConnection(e.resolvePCConfiguration(t), {\n        optional: [{\n          googDscp: !0\n        }]\n      }), _this222.dataChannel = _this222.peerConnection.createDataChannel(\"agora-signal\", {\n        ordered: !1,\n        maxPacketLifeTime: 50\n      }), _this222.dataChannel.binaryType = \"arraybuffer\", _this222._p2pConnection = new tL(t, i, _this222.peerConnection), _this222.bindPCEvents();\n      return _this222;\n    }\n    _createClass(e, [{\n      key: \"establish\",\n      value: function () {\n        var _establish4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee202() {\n          var e, t;\n          return _regeneratorRuntime().wrap(function _callee202$(_context202) {\n            while (1) switch (_context202.prev = _context202.next) {\n              case 0:\n                t = null === (e = this._nvMedia) || void 0 === e ? void 0 : e.getLocalRtpCapabilities();\n                _context202.next = 3;\n                return this._p2pConnection.establish(t);\n              case 3:\n                return _context202.abrupt(\"return\", _context202.sent);\n              case 4:\n              case \"end\":\n                return _context202.stop();\n            }\n          }, _callee202, this);\n        }));\n        function establish() {\n          return _establish4.apply(this, arguments);\n        }\n        return establish;\n      }()\n    }, {\n      key: \"getP2PConnectionParams\",\n      value: function getP2PConnectionParams() {\n        return this._p2pConnection.getP2PConnectionParams();\n      }\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee203(e, t, i, r, n, o) {\n          var _this223 = this;\n          return _regeneratorRuntime().wrap(function _callee203$(_context203) {\n            while (1) switch (_context203.prev = _context203.next) {\n              case 0:\n                this.cname = o;\n                _context203.next = 3;\n                return this._p2pConnection.connect(e, t, i, r, n, o);\n              case 3:\n                _context203.next = 5;\n                return new Cl(function (e, t) {\n                  var r = setTimeout(function () {\n                    _this223.closeSignal(), t(new vE(TE.DATACHANNEL_CONNECTION_TIMEOUT, \"Datachannel connection timed out, candidates: \".concat(JSON.stringify(i))));\n                  }, 2e3);\n                  _this223.dataChannel.onopen = function () {\n                    if (\"open\" === _this223.dataChannel.readyState) return clearTimeout(r), void e();\n                  }, _this223.dataChannel.onerror = function (e) {\n                    _this223.closeSignal(), t(e);\n                  };\n                });\n              case 5:\n                return _context203.abrupt(\"return\", {\n                  transmitter: this.dataChannel,\n                  close: this.closeSignal.bind(this)\n                });\n              case 6:\n              case \"end\":\n                return _context203.stop();\n            }\n          }, _callee203, this);\n        }));\n        function connect(_x312, _x313, _x314, _x315, _x316, _x317) {\n          return _connect7.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"send\",\n      value: function send(e, t, i) {\n        var r = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee204() {\n          var n;\n          return _regeneratorRuntime().wrap(function _callee204$(_context204) {\n            while (1) switch (_context204.prev = _context204.next) {\n              case 0:\n                _context204.next = 2;\n                return yD(r.mutex.lock(\"From DataChannelConnection.send\"));\n              case 2:\n                n = _context204.sent;\n                _context204.prev = 3;\n                return _context204.delegateYield(AD(nL(r._p2pConnection.send(e, t, i)), yD), \"t0\", 5);\n              case 5:\n                return _context204.abrupt(\"return\", _context204.t0);\n              case 6:\n                _context204.prev = 6;\n                n();\n                return _context204.finish(6);\n              case 9:\n              case \"end\":\n                return _context204.stop();\n            }\n          }, _callee204, null, [[3,, 6, 9]]);\n        }))();\n      }\n    }, {\n      key: \"stopSending\",\n      value: function () {\n        var _stopSending4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee205(e, t) {\n          return _regeneratorRuntime().wrap(function _callee205$(_context205) {\n            while (1) switch (_context205.prev = _context205.next) {\n              case 0:\n                return _context205.abrupt(\"return\", this._p2pConnection.stopSending(e, t));\n              case 1:\n              case \"end\":\n                return _context205.stop();\n            }\n          }, _callee205, this);\n        }));\n        function stopSending(_x318, _x319) {\n          return _stopSending4.apply(this, arguments);\n        }\n        return stopSending;\n      }()\n    }, {\n      key: \"receive\",\n      value: function () {\n        var _receive4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee206(e, t, i, r) {\n          return _regeneratorRuntime().wrap(function _callee206$(_context206) {\n            while (1) switch (_context206.prev = _context206.next) {\n              case 0:\n                if (!this._nvMedia) {\n                  _context206.next = 7;\n                  break;\n                }\n                NE.debug(\"[DataChannelConnection] receive \".concat(e, \" by DataChannel.\"));\n                _context206.next = 4;\n                return this._nvMedia.reveiveByRTCMedia(e, t, this.cname);\n              case 4:\n                _context206.t0 = _context206.sent;\n                _context206.next = 11;\n                break;\n              case 7:\n                NE.debug(\"[DataChannelConnection] receive \".concat(e, \" by WebRTC.\"));\n                _context206.next = 10;\n                return this._p2pConnection.receive(e, t, i, r);\n              case 10:\n                _context206.t0 = _context206.sent;\n              case 11:\n                return _context206.abrupt(\"return\", _context206.t0);\n              case 12:\n              case \"end\":\n                return _context206.stop();\n            }\n          }, _callee206, this);\n        }));\n        function receive(_x320, _x321, _x322, _x323) {\n          return _receive4.apply(this, arguments);\n        }\n        return receive;\n      }()\n    }, {\n      key: \"batchReceive\",\n      value: function () {\n        var _batchReceive4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee207(e) {\n          return _regeneratorRuntime().wrap(function _callee207$(_context207) {\n            while (1) switch (_context207.prev = _context207.next) {\n              case 0:\n                _context207.t0 = _toConsumableArray;\n                _context207.next = 3;\n                return this._p2pConnection.batchReceive(e);\n              case 3:\n                _context207.t1 = _context207.sent;\n                return _context207.abrupt(\"return\", (0, _context207.t0)(_context207.t1));\n              case 5:\n              case \"end\":\n                return _context207.stop();\n            }\n          }, _callee207, this);\n        }));\n        function batchReceive(_x324) {\n          return _batchReceive4.apply(this, arguments);\n        }\n        return batchReceive;\n      }()\n    }, {\n      key: \"stopReceiving\",\n      value: function () {\n        var _stopReceiving4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee208(e) {\n          return _regeneratorRuntime().wrap(function _callee208$(_context208) {\n            while (1) switch (_context208.prev = _context208.next) {\n              case 0:\n                _context208.next = 2;\n                return this._p2pConnection.stopReceiving(e);\n              case 2:\n                return _context208.abrupt(\"return\", _context208.sent);\n              case 3:\n              case \"end\":\n                return _context208.stop();\n            }\n          }, _callee208, this);\n        }));\n        function stopReceiving(_x325) {\n          return _stopReceiving4.apply(this, arguments);\n        }\n        return stopReceiving;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee209(e) {\n          return _regeneratorRuntime().wrap(function _callee209$(_context209) {\n            while (1) switch (_context209.prev = _context209.next) {\n              case 0:\n                _context209.next = 2;\n                return this._p2pConnection.muteRemote(e);\n              case 2:\n                return _context209.abrupt(\"return\", _context209.sent);\n              case 3:\n              case \"end\":\n                return _context209.stop();\n            }\n          }, _callee209, this);\n        }));\n        function muteRemote(_x326) {\n          return _muteRemote4.apply(this, arguments);\n        }\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee210(e) {\n          return _regeneratorRuntime().wrap(function _callee210$(_context210) {\n            while (1) switch (_context210.prev = _context210.next) {\n              case 0:\n                _context210.next = 2;\n                return this._p2pConnection.unmuteRemote(e);\n              case 2:\n                return _context210.abrupt(\"return\", _context210.sent);\n              case 3:\n              case \"end\":\n                return _context210.stop();\n            }\n          }, _callee210, this);\n        }));\n        function unmuteRemote(_x327) {\n          return _unmuteRemote4.apply(this, arguments);\n        }\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"muteLocal\",\n      value: function () {\n        var _muteLocal5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee211(e) {\n          return _regeneratorRuntime().wrap(function _callee211$(_context211) {\n            while (1) switch (_context211.prev = _context211.next) {\n              case 0:\n                _context211.next = 2;\n                return this._p2pConnection.muteLocal(e);\n              case 2:\n                return _context211.abrupt(\"return\", _context211.sent);\n              case 3:\n              case \"end\":\n                return _context211.stop();\n            }\n          }, _callee211, this);\n        }));\n        function muteLocal(_x328) {\n          return _muteLocal5.apply(this, arguments);\n        }\n        return muteLocal;\n      }()\n    }, {\n      key: \"unmuteLocal\",\n      value: function () {\n        var _unmuteLocal5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee212(e) {\n          return _regeneratorRuntime().wrap(function _callee212$(_context212) {\n            while (1) switch (_context212.prev = _context212.next) {\n              case 0:\n                _context212.next = 2;\n                return this._p2pConnection.unmuteLocal(e);\n              case 2:\n                return _context212.abrupt(\"return\", _context212.sent);\n              case 3:\n              case \"end\":\n                return _context212.stop();\n            }\n          }, _callee212, this);\n        }));\n        function unmuteLocal(_x329) {\n          return _unmuteLocal5.apply(this, arguments);\n        }\n        return unmuteLocal;\n      }()\n    }, {\n      key: \"restartICE\",\n      value: function restartICE() {\n        var e = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee213() {\n          return _regeneratorRuntime().wrap(function _callee213$(_context213) {\n            while (1) switch (_context213.prev = _context213.next) {\n              case 0:\n                return _context213.delegateYield(AD(nL(e._p2pConnection.restartICE()), yD), \"t0\", 1);\n              case 1:\n                return _context213.abrupt(\"return\", _context213.t0);\n              case 2:\n              case \"end\":\n                return _context213.stop();\n            }\n          }, _callee213);\n        }))();\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        var e;\n        null === (e = this._nvMedia) || void 0 === e || e.close(), this._p2pConnection.close(), this.unbindConnectionEvents(this._p2pConnection);\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        return this._p2pConnection.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        return this._p2pConnection.getRemoteVideoIsReady(e);\n      }\n    }, {\n      key: \"updateRemoteConnect\",\n      value: function updateRemoteConnect(e) {\n        var t;\n        null === (t = this._nvMedia) || void 0 === t || t.setRemoteRtpCapabilities(e), this._p2pConnection.updateRemoteConnect(e);\n      }\n    }, {\n      key: \"updateEncoderConfig\",\n      value: function () {\n        var _updateEncoderConfig4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee214(e, t) {\n          return _regeneratorRuntime().wrap(function _callee214$(_context214) {\n            while (1) switch (_context214.prev = _context214.next) {\n              case 0:\n                _context214.next = 2;\n                return this._p2pConnection.updateEncoderConfig(e, t);\n              case 2:\n                return _context214.abrupt(\"return\", _context214.sent);\n              case 3:\n              case \"end\":\n                return _context214.stop();\n            }\n          }, _callee214, this);\n        }));\n        function updateEncoderConfig(_x330, _x331) {\n          return _updateEncoderConfig4.apply(this, arguments);\n        }\n        return updateEncoderConfig;\n      }()\n    }, {\n      key: \"updateSendParameters\",\n      value: function () {\n        var _updateSendParameters4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee215(e, t) {\n          return _regeneratorRuntime().wrap(function _callee215$(_context215) {\n            while (1) switch (_context215.prev = _context215.next) {\n              case 0:\n                _context215.next = 2;\n                return this._p2pConnection.updateSendParameters(e, t);\n              case 2:\n                return _context215.abrupt(\"return\", _context215.sent);\n              case 3:\n              case \"end\":\n                return _context215.stop();\n            }\n          }, _callee215, this);\n        }));\n        function updateSendParameters(_x332, _x333) {\n          return _updateSendParameters4.apply(this, arguments);\n        }\n        return updateSendParameters;\n      }()\n    }, {\n      key: \"setStatsRemoteVideoIsReady\",\n      value: function setStatsRemoteVideoIsReady(e, t) {\n        this._p2pConnection.setStatsRemoteVideoIsReady(e, t);\n      }\n    }, {\n      key: \"replaceTrack\",\n      value: function () {\n        var _replaceTrack4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee216(e, t) {\n          return _regeneratorRuntime().wrap(function _callee216$(_context216) {\n            while (1) switch (_context216.prev = _context216.next) {\n              case 0:\n                _context216.next = 2;\n                return this._p2pConnection.replaceTrack(e, t);\n              case 2:\n                return _context216.abrupt(\"return\", _context216.sent);\n              case 3:\n              case \"end\":\n                return _context216.stop();\n            }\n          }, _callee216, this);\n        }));\n        function replaceTrack(_x334, _x335) {\n          return _replaceTrack4.apply(this, arguments);\n        }\n        return replaceTrack;\n      }()\n    }, {\n      key: \"getRemoteSSRC\",\n      value: function () {\n        var _getRemoteSSRC4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee217(e) {\n          return _regeneratorRuntime().wrap(function _callee217$(_context217) {\n            while (1) switch (_context217.prev = _context217.next) {\n              case 0:\n                return _context217.abrupt(\"return\", this._p2pConnection.getRemoteSSRC(e));\n              case 1:\n              case \"end\":\n                return _context217.stop();\n            }\n          }, _callee217, this);\n        }));\n        function getRemoteSSRC(_x336) {\n          return _getRemoteSSRC4.apply(this, arguments);\n        }\n        return getRemoteSSRC;\n      }()\n    }, {\n      key: \"logSDPExchange\",\n      value: function logSDPExchange(e, t, i, r) {\n        var _this224 = this;\n        if (HE(\"SDP_LOGGING\")) return NE.upload(\"exchanging \".concat(i, \" \").concat(t, \" SDP during DataChannelConnection.\").concat(r, \"\\n\"), e), \"offer\" === t ? function (e) {\n          _this224.logSDPExchange(e, \"answer\", \"local\" === i ? \"remote\" : \"local\", r);\n        } : void 0;\n      }\n    }, {\n      key: \"bindPCEvents\",\n      value: function bindPCEvents() {\n        var _this225 = this;\n        this._p2pConnection.onICEConnectionStateChange = function (e) {\n          var t;\n          return null === (t = _this225.onICEConnectionStateChange) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onConnectionStateChange = function (e) {\n          var t;\n          return null === (t = _this225.onConnectionStateChange) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onDTLSTransportStateChange = function (e) {\n          var t;\n          return null === (t = _this225.onDTLSTransportStateChange) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onDTLSTransportError = function (e) {\n          var t;\n          return null === (t = _this225.onDTLSTransportError) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onICETransportStateChange = function (e) {\n          var t;\n          return null === (t = _this225.onICETransportStateChange) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onFirstAudioReceived = function (e) {\n          var t;\n          return null === (t = _this225.onFirstAudioReceived) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onFirstVideoReceived = function (e) {\n          var t;\n          return null === (t = _this225.onFirstVideoReceived) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onFirstAudioDecoded = function (e) {\n          var t;\n          return null === (t = _this225.onFirstAudioDecoded) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onFirstVideoDecoded = function (e, t, i) {\n          var r;\n          return null === (r = _this225.onFirstVideoDecoded) || void 0 === r ? void 0 : r.call(_this225, e, t, i);\n        }, this._p2pConnection.onFirstVideoDecodedTimeout = function (e) {\n          var t;\n          return null === (t = _this225.onFirstVideoDecodedTimeout) || void 0 === t ? void 0 : t.call(_this225, e);\n        }, this._p2pConnection.onSelectedLocalCandidateChanged = function (e, t) {\n          var i;\n          return null === (i = _this225.onSelectedLocalCandidateChanged) || void 0 === i ? void 0 : i.call(_this225, e, t);\n        }, this._p2pConnection.onSelectedRemoteCandidateChanged = function (e, t) {\n          var i;\n          return null === (i = _this225.onSelectedRemoteCandidateChanged) || void 0 === i ? void 0 : i.call(_this225, e, t);\n        };\n      }\n    }, {\n      key: \"closeSignal\",\n      value: function closeSignal() {\n        this.dataChannel.close(), this.peerConnection.close();\n      }\n    }, {\n      key: \"unbindConnectionEvents\",\n      value: function unbindConnectionEvents(e) {\n        e.onConnectionStateChange = void 0, e.onICEConnectionStateChange = void 0, e.onICETransportStateChange = void 0, e.onDTLSTransportStateChange = void 0, e.onDTLSTransportError = void 0, e.onFirstAudioDecoded = void 0, e.onFirstAudioReceived = void 0, e.onFirstVideoDecoded = void 0, e.onFirstVideoReceived = void 0, e.onSelectedLocalCandidateChanged = void 0, e.onSelectedRemoteCandidateChanged = void 0, e.onFirstVideoDecodedTimeout = void 0;\n      }\n    }], [{\n      key: \"resolvePCConfiguration\",\n      value: function resolvePCConfiguration(t) {\n        var _i$iceServers7, _i$iceServers8;\n        var i = {\n          iceServers: []\n        };\n        return t.iceServers ? i.iceServers = t.iceServers : t.turnServer && \"off\" !== t.turnServer.mode && (xm(t.turnServer.servers) ? i.iceServers = t.turnServer.servers : (i.iceServers && (_i$iceServers7 = i.iceServers).push.apply(_i$iceServers7, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.servers))), HE(\"USE_TURN_SERVER_OF_GATEWAY\") && i.iceServers && t.turnServer.serversFromGateway && (_i$iceServers8 = i.iceServers).push.apply(_i$iceServers8, _toConsumableArray(e.turnServerConfigToIceServers(t.turnServer.serversFromGateway))), HE(\"FORCE_TURN_TCP\") ? i.iceTransportPolicy = \"relay\" : t.turnServer.servers.concat(t.turnServer.serversFromGateway || []).forEach(function (e) {\n          e.forceturn && (i.iceTransportPolicy = \"relay\");\n        }))), i;\n      }\n    }, {\n      key: \"turnServerConfigToIceServers\",\n      value: function turnServerConfigToIceServers(e) {\n        var t = [];\n        return e.forEach(function (e) {\n          e.security ? e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turns:\".concat(TR(e.turnServerURL), \":\").concat(e.tcpport, \"?transport=tcp\")\n          }) : (e.udpport && !HE(\"FORCE_TURN_TCP\") && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.udpport, \"?transport=udp\")\n          }), e.tcpport && t.push({\n            username: e.username,\n            credential: e.password,\n            credentialType: \"password\",\n            urls: \"turn:\".concat(e.turnServerURL, \":\").concat(e.tcpport, \"?transport=tcp\")\n          }));\n        }), t;\n      }\n    }]);\n    return e;\n  }(xg)).prototype, \"connect\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"connect\"), rL.prototype), ZS(rL.prototype, \"receive\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"receive\"), rL.prototype), ZS(rL.prototype, \"stopReceiving\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"stopReceiving\"), rL.prototype), ZS(rL.prototype, \"muteRemote\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"muteRemote\"), rL.prototype), ZS(rL.prototype, \"unmuteRemote\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"unmuteRemote\"), rL.prototype), ZS(rL.prototype, \"muteLocal\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"muteLocal\"), rL.prototype), ZS(rL.prototype, \"unmuteLocal\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"unmuteLocal\"), rL.prototype), ZS(rL.prototype, \"close\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"close\"), rL.prototype), ZS(rL.prototype, \"updateEncoderConfig\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"updateEncoderConfig\"), rL.prototype), ZS(rL.prototype, \"updateSendParameters\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"updateSendParameters\"), rL.prototype), ZS(rL.prototype, \"replaceTrack\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"replaceTrack\"), rL.prototype), ZS(rL.prototype, \"getRemoteSSRC\", [aL], Object.getOwnPropertyDescriptor(rL.prototype, \"getRemoteSSRC\"), rL.prototype), rL);\n  function aL(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee218() {\n      var e,\n        i,\n        n,\n        o,\n        s,\n        _args218 = arguments;\n      return _regeneratorRuntime().wrap(function _callee218$(_context218) {\n        while (1) switch (_context218.prev = _context218.next) {\n          case 0:\n            e = this.mutex;\n            _context218.next = 3;\n            return e.lock(\"From DataChannelConnection.\".concat(t));\n          case 3:\n            i = _context218.sent;\n            _context218.prev = 4;\n            for (n = _args218.length, o = new Array(n), s = 0; s < n; s++) o[s] = _args218[s];\n            _context218.next = 8;\n            return r.apply(this, o);\n          case 8:\n            return _context218.abrupt(\"return\", _context218.sent);\n          case 9:\n            _context218.prev = 9;\n            i();\n            return _context218.finish(9);\n          case 12:\n          case \"end\":\n            return _context218.stop();\n        }\n      }, _callee218, this, [[4,, 9, 12]]);\n    })), i;\n  }\n  var cL;\n  function dL(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function uL(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? dL(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : dL(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  function lL(e) {\n    var t,\n      i,\n      r,\n      n = 2;\n    for (\"undefined\" != typeof Symbol && (i = OD, r = Symbol.iterator); n--;) {\n      if (i && null != (t = e[i])) return t.call(e);\n      if (r && null != (t = e[r])) return new hL(t.call(e));\n      i = \"@@asyncIterator\", r = \"@@iterator\";\n    }\n    throw new TypeError(\"Object is not async iterable\");\n  }\n  function hL(e) {\n    function t(e) {\n      if (Object(e) !== e) return Cl.reject(new TypeError(e + \" is not an object.\"));\n      var t = e.done;\n      return Cl.resolve(e.value).then(function (e) {\n        return {\n          value: e,\n          done: t\n        };\n      });\n    }\n    return (hL = function hL(e) {\n      this.s = e, this.n = e.next;\n    }).prototype = {\n      s: null,\n      n: null,\n      next: function next() {\n        return t(this.n.apply(this.s, arguments));\n      },\n      return: function _return(e) {\n        var i = this.s.return;\n        return void 0 === i ? Cl.resolve({\n          value: e,\n          done: !0\n        }) : t(i.apply(this.s, arguments));\n      },\n      throw: function _throw(e) {\n        var i = this.s.return;\n        return void 0 === i ? Cl.reject(e) : t(i.apply(this.s, arguments));\n      }\n    }, new hL(e);\n  }\n  var pL = (ZS((cL = /*#__PURE__*/function (_gE29) {\n    _inherits(cL, _gE29);\n    _createClass(cL, [{\n      key: \"state\",\n      get: function get() {\n        return this._state;\n      },\n      set: function set(e) {\n        var t = this._state;\n        this._state = e, this.emit(Og.StateChange, t, this._state);\n      }\n    }]);\n    function cL(e, t) {\n      var _this226;\n      _classCallCheck(this, cL);\n      _this226 = _possibleConstructorReturn(this, _getPrototypeOf(cL).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"statsUploader\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"connection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"localTrackMap\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"remoteUserMap\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"pendingLocalTracks\", []), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"pendingRemoteTracks\", []), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"statsCollector\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"isPlanB\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"iceFailedCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"dtlsFailedCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"mutex\", new OT(\"P2PChannel-mutex\")), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"_state\", Ag.Disconnected), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleMuteLocalTrack\", /*#__PURE__*/function () {\n        var _ref55 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee219(e, t, i) {\n          var r, _n55, o, _s37;\n          return _regeneratorRuntime().wrap(function _callee219$(_context219) {\n            while (1) switch (_context219.prev = _context219.next) {\n              case 0:\n                _context219.next = 2;\n                return _this226.mutex.lock(\"Locking from P2PChannel.handleMuteLocalTrack\");\n              case 2:\n                r = _context219.sent;\n                _context219.prev = 3;\n                if (!(!_this226.connection || _this226.state !== Ag.Connected)) {\n                  _context219.next = 6;\n                  break;\n                }\n                return _context219.abrupt(\"return\", void i(new vE(TE.INVALID_OPERATION, \"Cannot call P2PChannel.handleMuteLocalTrack before connection established.\")));\n              case 6:\n                _n55 = _this226.filterTobeMutedTracks(e);\n                if (!(0 === _n55.length)) {\n                  _context219.next = 9;\n                  break;\n                }\n                return _context219.abrupt(\"return\", void t());\n              case 9:\n                o = _n55.find(function (e) {\n                  return \"videoLowTrack\" === e[0];\n                });\n                if (o) {\n                  o[1].track._originMediaStreamTrack.stop();\n                }\n                _context219.next = 13;\n                return _this226.connection.muteLocal(_n55.map(function (e) {\n                  var _e157 = _slicedToArray(e, 2),\n                    t = _e157[1].id;\n                  return t;\n                }));\n              case 13:\n                _s37 = _this226.createMuteMessage(_n55);\n                _context219.next = 16;\n                return BR(_assertThisInitialized(_assertThisInitialized(_this226)), Og.RequestMuteLocal, _s37);\n              case 16:\n                t();\n                _context219.next = 22;\n                break;\n              case 19:\n                _context219.prev = 19;\n                _context219.t0 = _context219[\"catch\"](3);\n                i(_context219.t0);\n              case 22:\n                _context219.prev = 22;\n                r();\n                return _context219.finish(22);\n              case 25:\n              case \"end\":\n                return _context219.stop();\n            }\n          }, _callee219, null, [[3, 19, 22, 25]]);\n        }));\n        return function (_x337, _x338, _x339) {\n          return _ref55.apply(this, arguments);\n        };\n      }()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleUnmuteLocalTrack\", /*#__PURE__*/function () {\n        var _ref56 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee220(e, t, i) {\n          var r, _n56, o, _t175, _i99, _i100, _s38;\n          return _regeneratorRuntime().wrap(function _callee220$(_context220) {\n            while (1) switch (_context220.prev = _context220.next) {\n              case 0:\n                _context220.next = 2;\n                return _this226.mutex.lock(\"Locking from P2PChannel.handleUnmuteLocalTrack\");\n              case 2:\n                r = _context220.sent;\n                _context220.prev = 3;\n                if (!(!_this226.connection || _this226.state !== Ag.Connected)) {\n                  _context220.next = 6;\n                  break;\n                }\n                return _context220.abrupt(\"return\", void i(new vE(TE.INVALID_OPERATION, \"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.\")));\n              case 6:\n                _n56 = _this226.filterTobeUnmutedTracks(e);\n                if (!(0 === _n56.length)) {\n                  _context220.next = 9;\n                  break;\n                }\n                return _context220.abrupt(\"return\", void t());\n              case 9:\n                o = _n56.find(function (e) {\n                  return \"videoLowTrack\" === e[0];\n                });\n                if (!o) {\n                  _context220.next = 15;\n                  break;\n                }\n                _t175 = o[1];\n                if (_t175.track._originMediaStreamTrack.stop(), jg().supportDualStreamEncoding) {\n                  _i99 = e._mediaStreamTrack.clone();\n                  _t175.track._mediaStreamTrack = _i99, _t175.track._originMediaStreamTrack = _i99;\n                } else {\n                  _i100 = AP(e, WR(_assertThisInitialized(_assertThisInitialized(_this226)), Og.RequestLowStreamParameter));\n                  _t175.track._mediaStreamTrack = _i100, _t175.track._originMediaStreamTrack = _i100;\n                }\n                _context220.next = 15;\n                return new Cl(function (e, i) {\n                  _this226.handleReplaceTrack(_t175.track, e, i, !0);\n                });\n              case 15:\n                _context220.next = 17;\n                return _this226.connection.unmuteLocal(_n56.map(function (e) {\n                  var _e158 = _slicedToArray(e, 2),\n                    t = _e158[1].id;\n                  return t;\n                }));\n              case 17:\n                _s38 = _this226.createUnmuteMessage(_n56);\n                _context220.next = 20;\n                return BR(_assertThisInitialized(_assertThisInitialized(_this226)), Og.RequestUnmuteLocal, _s38);\n              case 20:\n                t();\n                _context220.next = 26;\n                break;\n              case 23:\n                _context220.prev = 23;\n                _context220.t0 = _context220[\"catch\"](3);\n                i(_context220.t0);\n              case 26:\n                _context220.prev = 26;\n                r();\n                return _context220.finish(26);\n              case 29:\n              case \"end\":\n                return _context220.stop();\n            }\n          }, _callee220, null, [[3, 23, 26, 29]]);\n        }));\n        return function (_x340, _x341, _x342) {\n          return _ref56.apply(this, arguments);\n        };\n      }()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleUpdateVideoEncoder\", /*#__PURE__*/function () {\n        var _ref57 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee221(e, t, i) {\n          var r, _i101, _n57, o;\n          return _regeneratorRuntime().wrap(function _callee221$(_context221) {\n            while (1) switch (_context221.prev = _context221.next) {\n              case 0:\n                _context221.next = 2;\n                return _this226.mutex.lock(\"Locking from P2PChannel.handleSetVideoEncoder\");\n              case 2:\n                r = _context221.sent;\n                _context221.prev = 3;\n                _i101 = _this226.localTrackMap.get(Cg.LocalVideoTrack);\n                if (!(!_this226.connection || !_i101 || _i101.track !== e || _this226.state !== Ag.Connected)) {\n                  _context221.next = 7;\n                  break;\n                }\n                return _context221.abrupt(\"return\", void t());\n              case 7:\n                _n57 = _i101.id, o = _i101.track;\n                _context221.next = 10;\n                return _this226.connection.updateSendParameters(_n57, o);\n              case 10:\n                _context221.next = 12;\n                return _this226.connection.updateEncoderConfig(_n57, o);\n              case 12:\n                _this226.emit(Og.UpdateVideoEncoder, o);\n                t();\n                _context221.next = 19;\n                break;\n              case 16:\n                _context221.prev = 16;\n                _context221.t0 = _context221[\"catch\"](3);\n                i(_context221.t0);\n              case 19:\n                _context221.prev = 19;\n                r();\n                return _context221.finish(19);\n              case 22:\n              case \"end\":\n                return _context221.stop();\n            }\n          }, _callee221, null, [[3, 16, 19, 22]]);\n        }));\n        return function (_x343, _x344, _x345) {\n          return _ref57.apply(this, arguments);\n        };\n      }()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleSetOptimizationMode\", /*#__PURE__*/function () {\n        var _ref58 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee222(e, t, i) {\n          var r, _i102, _n58, o;\n          return _regeneratorRuntime().wrap(function _callee222$(_context222) {\n            while (1) switch (_context222.prev = _context222.next) {\n              case 0:\n                _context222.next = 2;\n                return _this226.mutex.lock(\"Locking from P2PChannel.handleSetOptimizationMode\");\n              case 2:\n                r = _context222.sent;\n                _context222.prev = 3;\n                _i102 = _this226.localTrackMap.get(Cg.LocalVideoTrack);\n                if (!(!_this226.connection || !_i102 || _i102.track !== e || _this226.state !== Ag.Connected)) {\n                  _context222.next = 7;\n                  break;\n                }\n                return _context222.abrupt(\"return\");\n              case 7:\n                _n58 = _i102.id, o = _i102.track;\n                _context222.next = 10;\n                return _this226.connection.updateSendParameters(_n58, o);\n              case 10:\n                t();\n                _context222.next = 16;\n                break;\n              case 13:\n                _context222.prev = 13;\n                _context222.t0 = _context222[\"catch\"](3);\n                i(_context222.t0);\n              case 16:\n                _context222.prev = 16;\n                r();\n                return _context222.finish(16);\n              case 19:\n              case \"end\":\n                return _context222.stop();\n            }\n          }, _callee222, null, [[3, 13, 16, 19]]);\n        }));\n        return function (_x346, _x347, _x348) {\n          return _ref58.apply(this, arguments);\n        };\n      }()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleReplaceTrack\", /*#__PURE__*/function () {\n        var _ref59 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee223(e, t, i, r) {\n          var n, o, _i103, _t177, _t178, _i104, s;\n          return _regeneratorRuntime().wrap(function _callee223$(_context223) {\n            while (1) switch (_context223.prev = _context223.next) {\n              case 0:\n                NE.debug(\"P2PChannel handleReplaceTrack for [track-id-\".concat(e.getTrackId(), \"]\"));\n                _context223.t0 = \"boolean\" == typeof r && r;\n                if (_context223.t0) {\n                  _context223.next = 6;\n                  break;\n                }\n                _context223.next = 5;\n                return _this226.mutex.lock(\"From P2PChannel.handleReplaceTrack\");\n              case 5:\n                n = _context223.sent;\n              case 6:\n                _context223.prev = 6;\n                _i103 = Array.from(_this226.localTrackMap.entries()).find(function (t) {\n                  var _t176 = _slicedToArray(t, 2),\n                    i = _t176[1].track;\n                  return e === i;\n                });\n                if (!(!_this226.connection || !_i103 || _this226.state !== Ag.Connected)) {\n                  _context223.next = 10;\n                  break;\n                }\n                return _context223.abrupt(\"return\", void t());\n              case 10:\n                _context223.next = 12;\n                return null === (o = _this226.connection) || void 0 === o ? void 0 : o.replaceTrack(e, _i103[1].id);\n              case 12:\n                if (!_this226.isPlanB) {\n                  _context223.next = 15;\n                  break;\n                }\n                _t177 = _i103[1];\n                _t177.id = e._mediaStreamTrack.id, _this226.localTrackMap.set(_i103[0], _t177);\n              case 15:\n                if (!(_i103[0] === Cg.LocalVideoTrack && jg().supportDualStreamEncoding)) {\n                  _context223.next = 24;\n                  break;\n                }\n                _t178 = _this226.localTrackMap.get(Cg.LocalVideoLowTrack);\n                if (!_t178) {\n                  _context223.next = 24;\n                  break;\n                }\n                _i104 = e._mediaStreamTrack.clone();\n                _t178.track._originMediaStreamTrack.stop();\n                _t178.track._mediaStreamTrack = _i104;\n                _t178.track._originMediaStreamTrack = _i104;\n                _context223.next = 24;\n                return new Cl(function (e, i) {\n                  _this226.handleReplaceTrack(_t178.track, e, i, !0);\n                });\n              case 24:\n                t();\n                _context223.next = 30;\n                break;\n              case 27:\n                _context223.prev = 27;\n                _context223.t1 = _context223[\"catch\"](6);\n                i(_context223.t1);\n              case 30:\n                _context223.prev = 30;\n                null === (s = n) || void 0 === s || s();\n                return _context223.finish(30);\n              case 33:\n              case \"end\":\n                return _context223.stop();\n            }\n          }, _callee223, null, [[6, 27, 30, 33]]);\n        }));\n        return function (_x349, _x350, _x351, _x352) {\n          return _ref59.apply(this, arguments);\n        };\n      }()), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleGetLocalVideoStats\", function (e) {\n        e(_this226.statsCollector.getLocalVideoTrackStats());\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleGetLocalAudioStats\", function (e) {\n        e(_this226.statsCollector.getLocalAudioTrackStats());\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleGetRemoteVideoStats\", function (e) {\n        return _this226.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid];\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this226)), \"handleGetRemoteAudioStats\", function (e) {\n        return _this226.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid];\n      }), _this226.store = e, _this226.statsCollector = t, _this226.statsCollector.addP2PChannel(_assertThisInitialized(_assertThisInitialized(_this226))), _this226.statsUploader = new YP(), _this226.bindStatsUploaderEvents(), _this226.isPlanB = !jg().supportUnifiedPlan || HE(\"CHROME_FORCE_PLAN_B\") && ap();\n      return _this226;\n    }\n    _createClass(cL, [{\n      key: \"startP2PConnection\",\n      value: function () {\n        var _startP2PConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee224(e, t) {\n          return _regeneratorRuntime().wrap(function _callee224$(_context224) {\n            while (1) switch (_context224.prev = _context224.next) {\n              case 0:\n                return _context224.abrupt(\"return\", (this.state = Ag.New, this.connection = t ? new sL(e, this.store) : this.isPlanB ? new fP(e, this.store) : new yP(e, this.store), this.bindConnectionEvents(this.connection), this.connection.establish()));\n              case 1:\n              case \"end\":\n                return _context224.stop();\n            }\n          }, _callee224, this);\n        }));\n        function startP2PConnection(_x353, _x354) {\n          return _startP2PConnection.apply(this, arguments);\n        }\n        return startP2PConnection;\n      }()\n    }, {\n      key: \"connect\",\n      value: function () {\n        var _connect8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee225(e, t, i, r, n, o) {\n          return _regeneratorRuntime().wrap(function _callee225$(_context225) {\n            while (1) switch (_context225.prev = _context225.next) {\n              case 0:\n                if (this.connection) {\n                  _context225.next = 2;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .\");\n              case 2:\n                if (!(this.connection instanceof sL)) {\n                  _context225.next = 6;\n                  break;\n                }\n                this.connection.updateRemoteConnect(r);\n                _context225.next = 12;\n                break;\n              case 6:\n                this.store.peerConnectionStart();\n                _context225.next = 9;\n                return this.connection.connect(e, t, i, r, n, o);\n              case 9:\n                this.statsUploader.startUploadTransportStats();\n                this.statsUploader.startUploadExtensionUsageStats();\n                this.state = Ag.Connected;\n              case 12:\n              case \"end\":\n                return _context225.stop();\n            }\n          }, _callee225, this);\n        }));\n        function connect(_x355, _x356, _x357, _x358, _x359, _x360) {\n          return _connect8.apply(this, arguments);\n        }\n        return connect;\n      }()\n    }, {\n      key: \"preConnect\",\n      value: function () {\n        var _preConnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee226(e, t, i, r, n, o) {\n          var s;\n          return _regeneratorRuntime().wrap(function _callee226$(_context226) {\n            while (1) switch (_context226.prev = _context226.next) {\n              case 0:\n                if (this.connection) {\n                  _context226.next = 2;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .\");\n              case 2:\n                this.store.peerConnectionStart();\n                _context226.next = 5;\n                return this.connection.connect(e, t, i, r, n, o);\n              case 5:\n                s = _context226.sent;\n                return _context226.abrupt(\"return\", (this.statsUploader.startUploadTransportStats(), this.statsUploader.startUploadExtensionUsageStats(), this.state = Ag.Connected, s));\n              case 7:\n              case \"end\":\n                return _context226.stop();\n            }\n          }, _callee226, this);\n        }));\n        function preConnect(_x361, _x362, _x363, _x364, _x365, _x366) {\n          return _preConnect.apply(this, arguments);\n        }\n        return preConnect;\n      }()\n    }, {\n      key: \"getEstablishParams\",\n      value: function getEstablishParams() {\n        if (this.connection instanceof sL) return this.connection.getP2PConnectionParams();\n        throw new Error(\"Only DataChannelConnection needs to obtain establishParams\");\n      }\n    }, {\n      key: \"publish\",\n      value: function publish(e, t, i) {\n        var r = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee227() {\n          var n, _t179, o;\n          return _regeneratorRuntime().wrap(function _callee227$(_context227) {\n            while (1) switch (_context227.prev = _context227.next) {\n              case 0:\n                _context227.next = 2;\n                return yD(r.mutex.lock(\"From P2PChannel.publish\"));\n              case 2:\n                n = _context227.sent;\n                _context227.prev = 3;\n                if (!(!r.connection || r.state !== Ag.Connected)) {\n                  _context227.next = 10;\n                  break;\n                }\n                if (!(r.state === Ag.Disconnected)) {\n                  _context227.next = 7;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"PeerConnection already disconnected.\");\n              case 7:\n                r.throwIfTrackTypeNotMatch(e);\n                _t179 = e.filter(function (e) {\n                  return -1 === r.pendingLocalTracks.indexOf(e);\n                });\n                return _context227.abrupt(\"return\", void (r.pendingLocalTracks = r.pendingLocalTracks.concat(_t179)));\n              case 10:\n                r.store.pubId = r.store.pubId + 1, pR.markPublishStart(r.store.clientId, r.store.pubId);\n                o = r.filterTobePublishedTracks(e, t, i);\n                if (!(0 === o.length)) {\n                  _context227.next = 16;\n                  break;\n                }\n                _context227.next = 15;\n                return yD(r.tryToUnmuteAudio(e));\n              case 15:\n                return _context227.abrupt(\"return\", void _context227.sent);\n              case 16:\n                return _context227.delegateYield(AD(lL(r.doPublish(r.connection, o)), yD), \"t0\", 17);\n              case 17:\n                _context227.prev = 17;\n                n();\n                return _context227.finish(17);\n              case 20:\n              case \"end\":\n                return _context227.stop();\n            }\n          }, _callee227, null, [[3,, 17, 20]]);\n        }))();\n      }\n    }, {\n      key: \"doPublish\",\n      value: function doPublish(e, t) {\n        var i = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee228() {\n          var r, n, o, s, a, c;\n          return _regeneratorRuntime().wrap(function _callee228$(_context228) {\n            while (1) switch (_context228.prev = _context228.next) {\n              case 0:\n                t.forEach(function (e) {\n                  var t = e.track,\n                    r = e.type;\n                  var n = Date.now();\n                  i.store.publish(t.getTrackId(), r === Cg.LocalAudioTrack ? \"audio\" : \"video\", n);\n                }), i.bindLocalTrackEvents(t);\n                _context228.next = 3;\n                return yD(e.send(t.map(function (e) {\n                  var t = e.track;\n                  return t;\n                }), i.store.codec, i.store.audioCodec));\n              case 3:\n                r = _context228.sent;\n                _context228.next = 6;\n                return yD(r.next());\n              case 6:\n                n = _context228.sent.value;\n                o = i.createGatewayPublishMessage(t, n);\n                _context228.prev = 8;\n                _context228.next = 11;\n                return o;\n              case 11:\n                s = _context228.sent;\n                _context228.next = 17;\n                break;\n              case 14:\n                _context228.prev = 14;\n                _context228.t0 = _context228[\"catch\"](8);\n                throw r.throw(_context228.t0), (null == _context228.t0 ? void 0 : _context228.t0.code) === TE.WS_ABORT && t.forEach(function (e) {\n                  var t = e.track;\n                  -1 === i.pendingLocalTracks.indexOf(t) && i.pendingLocalTracks.push(t);\n                }), i.unbindLocalTrackEvents(t), _context228.t0;\n              case 17:\n                a = i.mapPubResToRemoteConfig(o, s);\n                _context228.next = 20;\n                return yD(r.next(a));\n              case 20:\n                c = _context228.sent.value;\n                t.forEach(function (e) {\n                  var t = e.type;\n                  i.statsCollector.addLocalStats(t);\n                }), i.assignLocalTracks(t, c), i.statsUploader.startUploadUplinkStats(), t.forEach(function (e) {\n                  var t = e.track,\n                    r = e.type;\n                  var n = Date.now();\n                  i.store.publish(t.getTrackId(), r === Cg.LocalAudioTrack ? \"audio\" : \"video\", void 0, n);\n                });\n              case 22:\n              case \"end\":\n                return _context228.stop();\n            }\n          }, _callee228, null, [[8, 14]]);\n        }))();\n      }\n    }, {\n      key: \"publishLowStream\",\n      value: function publishLowStream(e) {\n        var t = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee229() {\n          var i, _n59, o, r, _e159;\n          return _regeneratorRuntime().wrap(function _callee229$(_context229) {\n            while (1) switch (_context229.prev = _context229.next) {\n              case 0:\n                if (!(!t.connection || t.state !== Ag.Connected)) {\n                  _context229.next = 2;\n                  break;\n                }\n                return _context229.abrupt(\"return\");\n              case 2:\n                _context229.next = 4;\n                return yD(t.mutex.lock(\"Locking from P2PChannel.publishLowStream\"));\n              case 4:\n                i = _context229.sent;\n                _context229.prev = 5;\n                _n59 = t.localTrackMap.get(Cg.LocalVideoTrack);\n                if (_n59) {\n                  _context229.next = 9;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"Could not find high stream\");\n              case 9:\n                if (!t.localTrackMap.has(Cg.LocalVideoLowTrack)) {\n                  _context229.next = 11;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"[\".concat(t.store.clientId, \"] Can't publish low stream when stream already publish\"));\n              case 11:\n                o = [{\n                  track: t.getLowVideoTrack(_n59.track, e),\n                  type: Cg.LocalVideoLowTrack\n                }];\n                return _context229.delegateYield(AD(lL(t.doPublish(t.connection, o)), yD), \"t0\", 13);\n              case 13:\n                if (!(_n59.track.muted || !_n59.track.enabled)) {\n                  _context229.next = 19;\n                  break;\n                }\n                _e159 = null === (r = t.localTrackMap.get(Cg.LocalVideoLowTrack)) || void 0 === r ? void 0 : r.id;\n                _context229.t1 = void 0 !== _e159;\n                if (!_context229.t1) {\n                  _context229.next = 19;\n                  break;\n                }\n                _context229.next = 19;\n                return yD(t.connection.muteLocal([_e159]));\n              case 19:\n                _context229.prev = 19;\n                i();\n                return _context229.finish(19);\n              case 22:\n              case \"end\":\n                return _context229.stop();\n            }\n          }, _callee229, null, [[5,, 19, 22]]);\n        }))();\n      }\n    }, {\n      key: \"republish\",\n      value: function () {\n        var _republish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee230() {\n          return _regeneratorRuntime().wrap(function _callee230$(_context230) {\n            while (1) switch (_context230.prev = _context230.next) {\n              case 0:\n                _context230.t0 = this.pendingLocalTracks.length > 0;\n                if (!_context230.t0) {\n                  _context230.next = 7;\n                  break;\n                }\n                NE.debug(\"Emit P2PChannelEvents.RequestRePublish to republish tracks.\");\n                _context230.next = 5;\n                return FR(this, Og.RequestRePublish, this.pendingLocalTracks);\n              case 5:\n                this.emit(Og.MediaReconnectEnd, this.store.uid);\n                this.pendingLocalTracks = [];\n              case 7:\n              case \"end\":\n                return _context230.stop();\n            }\n          }, _callee230, this);\n        }));\n        function republish() {\n          return _republish.apply(this, arguments);\n        }\n        return republish;\n      }()\n    }, {\n      key: \"reSubscribe\",\n      value: function () {\n        var _reSubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee231(e) {\n          var _this227 = this;\n          var _e160, _this$pendingRemoteTr, t, i, _iterator28, _step28, _step28$value, _e161, _t180;\n          return _regeneratorRuntime().wrap(function _callee231$(_context231) {\n            while (1) switch (_context231.prev = _context231.next) {\n              case 0:\n                for (_e160 = this.pendingRemoteTracks.length - 1; _e160 >= 0; _e160--) {\n                  _this$pendingRemoteTr = this.pendingRemoteTracks[_e160], t = _this$pendingRemoteTr.user, i = _this$pendingRemoteTr.kind;\n                  (i !== yg.AUDIO || t._audio_added_ && t._audioSSRC) && (i !== yg.VIDEO || t._video_added_ && t._videoSSRC) || this.pendingRemoteTracks.splice(_e160, 1);\n                }\n                if (!e) {\n                  _context231.next = 6;\n                  break;\n                }\n                _context231.next = 4;\n                return FR(this, Og.RequestReSubscribe, this.pendingRemoteTracks);\n              case 4:\n                _context231.next = 23;\n                break;\n              case 6:\n                _iterator28 = _createForOfIteratorHelper(this.pendingRemoteTracks);\n                _context231.prev = 7;\n                _iterator28.s();\n              case 9:\n                if ((_step28 = _iterator28.n()).done) {\n                  _context231.next = 15;\n                  break;\n                }\n                _step28$value = _step28.value, _e161 = _step28$value.user, _t180 = _step28$value.kind;\n                _context231.next = 13;\n                return this.subscribe(_e161, _t180, _t180 === yg.VIDEO ? _e161._videoSSRC : _e161._audioSSRC);\n              case 13:\n                _context231.next = 9;\n                break;\n              case 15:\n                _context231.next = 20;\n                break;\n              case 17:\n                _context231.prev = 17;\n                _context231.t0 = _context231[\"catch\"](7);\n                _iterator28.e(_context231.t0);\n              case 20:\n                _context231.prev = 20;\n                _iterator28.f();\n                return _context231.finish(20);\n              case 23:\n                this.pendingRemoteTracks.forEach(function (e) {\n                  var t = e.user;\n                  _this227.emit(Og.MediaReconnectEnd, t.uid);\n                }), this.pendingRemoteTracks = [];\n              case 24:\n              case \"end\":\n                return _context231.stop();\n            }\n          }, _callee231, this, [[7, 17, 20, 23]]);\n        }));\n        function reSubscribe(_x367) {\n          return _reSubscribe.apply(this, arguments);\n        }\n        return reSubscribe;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee232(e) {\n          var _this228 = this;\n          var t, i;\n          return _regeneratorRuntime().wrap(function _callee232$(_context232) {\n            while (1) switch (_context232.prev = _context232.next) {\n              case 0:\n                if (!(!this.connection || this.state !== Ag.Connected)) {\n                  _context232.next = 2;\n                  break;\n                }\n                return _context232.abrupt(\"return\", void e.forEach(function (e) {\n                  var t = _this228.pendingLocalTracks.indexOf(e);\n                  -1 !== t && _this228.pendingLocalTracks.splice(t, 1);\n                }));\n              case 2:\n                t = this.filterTobeUnpublishedTracks(e);\n                if (!(0 === t.length)) {\n                  _context232.next = 5;\n                  break;\n                }\n                return _context232.abrupt(\"return\");\n              case 5:\n                i = t.find(function (e) {\n                  return \"videoLowTrack\" === e[0];\n                });\n                if (i) {\n                  i[1].track.close();\n                }\n                return _context232.abrupt(\"return\", this.doUnpublish(this.connection, t));\n              case 8:\n              case \"end\":\n                return _context232.stop();\n            }\n          }, _callee232, this);\n        }));\n        function unpublish(_x368) {\n          return _unpublish2.apply(this, arguments);\n        }\n        return unpublish;\n      }()\n    }, {\n      key: \"unpublishLowStream\",\n      value: function () {\n        var _unpublishLowStream = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee233() {\n          var e, t;\n          return _regeneratorRuntime().wrap(function _callee233$(_context233) {\n            while (1) switch (_context233.prev = _context233.next) {\n              case 0:\n                if (!(!this.connection || this.state !== Ag.Connected)) {\n                  _context233.next = 2;\n                  break;\n                }\n                return _context233.abrupt(\"return\");\n              case 2:\n                e = this.localTrackMap.get(Cg.LocalVideoLowTrack);\n                if (e) {\n                  _context233.next = 5;\n                  break;\n                }\n                return _context233.abrupt(\"return\");\n              case 5:\n                e.track.close();\n                t = [[Cg.LocalVideoLowTrack, e]];\n                return _context233.abrupt(\"return\", this.doUnpublish(this.connection, t));\n              case 8:\n              case \"end\":\n                return _context233.stop();\n            }\n          }, _callee233, this);\n        }));\n        function unpublishLowStream() {\n          return _unpublishLowStream.apply(this, arguments);\n        }\n        return unpublishLowStream;\n      }()\n    }, {\n      key: \"doUnpublish\",\n      value: function () {\n        var _doUnpublish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee234(e, t) {\n          var _this229 = this;\n          var i;\n          return _regeneratorRuntime().wrap(function _callee234$(_context234) {\n            while (1) switch (_context234.prev = _context234.next) {\n              case 0:\n                i = this.createGatewayUnpublishMessage(t);\n                _context234.next = 3;\n                return e.stopSending(t.map(function (e) {\n                  var _e162 = _slicedToArray(e, 2),\n                    t = _e162[1].id;\n                  return t;\n                }));\n              case 3:\n                this.withdrawLocalTracks(t);\n                this.unbindLocalTrackEvents(t.map(function (e) {\n                  var _e163 = _slicedToArray(e, 2),\n                    t = _e163[0],\n                    i = _e163[1].track;\n                  return {\n                    type: t,\n                    track: i\n                  };\n                }));\n                t.forEach(function (e) {\n                  var _e164 = _slicedToArray(e, 1),\n                    t = _e164[0];\n                  _this229.statsCollector.removeLocalStats(t);\n                });\n                0 === this.localTrackMap.size && this.statsUploader.stopUploadUplinkStats();\n                return _context234.abrupt(\"return\", i);\n              case 8:\n              case \"end\":\n                return _context234.stop();\n            }\n          }, _callee234, this);\n        }));\n        function doUnpublish(_x369, _x370) {\n          return _doUnpublish.apply(this, arguments);\n        }\n        return doUnpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee235(e, t, i, r, n) {\n          var o, s, a, _i105, _r51, _n60, c, d;\n          return _regeneratorRuntime().wrap(function _callee235$(_context235) {\n            while (1) switch (_context235.prev = _context235.next) {\n              case 0:\n                if (!(!this.connection || this.state !== Ag.Connected)) {\n                  _context235.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Cannot subscribe remote user when peerConnection disconnected.\");\n              case 2:\n                if (!(null !== (o = this.remoteUserMap.get(e)) && void 0 !== o && o.has(t))) {\n                  _context235.next = 4;\n                  break;\n                }\n                return _context235.abrupt(\"return\");\n              case 4:\n                if (!n) {\n                  _context235.next = 14;\n                  break;\n                }\n                _i105 = n.find(function (e) {\n                  var i = e.stream_type;\n                  return i === t;\n                });\n                if (_i105) {\n                  _context235.next = 8;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"Cannot subscribe to remote \".concat(t, \" for user: \").concat(e.uid, \" because subscribe answer from gateway does not contain stream_type: \").concat(t, \".\"));\n              case 8:\n                _context235.next = 10;\n                return this.connection.receive(t, _i105.ssrcs, String(e._uintid), _i105.attributes);\n              case 10:\n                _r51 = _context235.sent;\n                s = _r51.track, a = _r51.id;\n                _context235.next = 18;\n                break;\n              case 14:\n                _context235.next = 16;\n                return this.connection.receive(t, [{\n                  ssrcId: i,\n                  rtx: r\n                }], String(e._uintid), void 0);\n              case 16:\n                _n60 = _context235.sent;\n                s = _n60.track, a = _n60.id;\n              case 18:\n                t === yg.AUDIO ? (e._audioTrack ? e._audioTrack._updateOriginMediaStreamTrack(s) : (e._audioTrack = new WP(s, e.uid, e._uintid, this.store), NE.info(\"[\".concat(this.store.p2pId, \"] create remote audio track: \").concat(e._audioTrack.getTrackId()))), this.bindRemoteTrackEvents(e, e._audioTrack)) : (e._videoTrack ? e._videoTrack._updateOriginMediaStreamTrack(s) : (e._videoTrack = new GP(s, e.uid, e._uintid, this.store), NE.info(\"[\".concat(this.store.p2pId, \"] create remote video track: \").concat(e._videoTrack.getTrackId()))), this.bindRemoteTrackEvents(e, e._videoTrack));\n                c = this.remoteUserMap.get(e);\n                c ? c.set(t, a) : this.remoteUserMap.set(e, new Map([[t, a]])), this.statsCollector.addRemoteStats(e.uid), this.statsUploader.startUploadDownlinkStats();\n                d = this.pendingRemoteTracks.findIndex(function (i) {\n                  var r = i.user,\n                    n = i.kind;\n                  return r.uid === e.uid && t === n;\n                });\n                -1 !== d && (this.pendingRemoteTracks.splice(d, 1), this.emit(Og.MediaReconnectEnd, e.uid));\n              case 23:\n              case \"end\":\n                return _context235.stop();\n            }\n          }, _callee235, this);\n        }));\n        function subscribe(_x371, _x372, _x373, _x374, _x375) {\n          return _subscribe2.apply(this, arguments);\n        }\n        return subscribe;\n      }()\n    }, {\n      key: \"massSubscribe\",\n      value: function () {\n        var _massSubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee236(e) {\n          return _regeneratorRuntime().wrap(function _callee236$(_context236) {\n            while (1) switch (_context236.prev = _context236.next) {\n              case 0:\n                return _context236.abrupt(\"return\", this.massSubscribeNoLock(e));\n              case 1:\n              case \"end\":\n                return _context236.stop();\n            }\n          }, _callee236, this);\n        }));\n        function massSubscribe(_x376) {\n          return _massSubscribe.apply(this, arguments);\n        }\n        return massSubscribe;\n      }()\n    }, {\n      key: \"massSubscribeNoLock\",\n      value: function () {\n        var _massSubscribeNoLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee237(e) {\n          var _this230 = this;\n          var t;\n          return _regeneratorRuntime().wrap(function _callee237$(_context237) {\n            while (1) switch (_context237.prev = _context237.next) {\n              case 0:\n                if (!(!this.connection || this.state !== Ag.Connected)) {\n                  _context237.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Cannot subscribeAll remote users when peerConnection disconnected.\");\n              case 2:\n                e = e.filter(function (e) {\n                  var t;\n                  var i = e.user,\n                    r = e.mediaType;\n                  return !(null !== (t = _this230.remoteUserMap.get(i)) && void 0 !== t && t.has(r));\n                });\n                _context237.next = 5;\n                return this.connection.batchReceive(e.map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType,\n                    r = e.ssrcId,\n                    n = e.rtxSsrcId;\n                  return {\n                    kind: i,\n                    ssrcMsg: [{\n                      ssrcId: r,\n                      rtx: n\n                    }],\n                    mslabel: String(t._uintid)\n                  };\n                }));\n              case 5:\n                t = _context237.sent;\n                e.forEach(function (e, i) {\n                  var r = e.user,\n                    n = e.mediaType;\n                  var _t$i = t[i],\n                    o = _t$i.track,\n                    s = _t$i.id;\n                  n === yg.AUDIO ? (r._audioTrack ? r._audioTrack._updateOriginMediaStreamTrack(o) : (r._audioTrack = new WP(o, r.uid, r._uintid, _this230.store), NE.info(\"[\".concat(_this230.store.p2pId, \"] create remote audio track: \").concat(r._audioTrack.getTrackId()))), _this230.bindRemoteTrackEvents(r, r._audioTrack)) : (r._videoTrack ? r._videoTrack._updateOriginMediaStreamTrack(o) : (r._videoTrack = new GP(o, r.uid, r._uintid, _this230.store), NE.info(\"[\".concat(_this230.store.p2pId, \"] create remote video track: \").concat(r._videoTrack.getTrackId()))), _this230.bindRemoteTrackEvents(r, r._videoTrack));\n                  var a = _this230.remoteUserMap.get(r);\n                  a ? a.set(n, s) : _this230.remoteUserMap.set(r, new Map([[n, s]])), _this230.statsCollector.addRemoteStats(r.uid), _this230.statsUploader.startUploadDownlinkStats();\n                  var c = _this230.pendingRemoteTracks.findIndex(function (e) {\n                    var t = e.user,\n                      i = e.kind;\n                    return t.uid === r.uid && n === i;\n                  });\n                  -1 !== c && (_this230.pendingRemoteTracks.splice(c, 1), _this230.emit(Og.MediaReconnectEnd, r.uid));\n                });\n              case 7:\n              case \"end\":\n                return _context237.stop();\n            }\n          }, _callee237, this);\n        }));\n        function massSubscribeNoLock(_x377) {\n          return _massSubscribeNoLock.apply(this, arguments);\n        }\n        return massSubscribeNoLock;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee238(e, t, i) {\n          var _this231 = this;\n          var r, n, o;\n          return _regeneratorRuntime().wrap(function _callee238$(_context238) {\n            while (1) switch (_context238.prev = _context238.next) {\n              case 0:\n                r = this.pendingRemoteTracks.filter(function (i) {\n                  var r = i.user,\n                    n = i.kind;\n                  return void 0 !== t ? r.uid === e.uid && t === n : r.uid === e.uid;\n                });\n                if (!(r.forEach(function (e) {\n                  var t = _this231.pendingRemoteTracks.indexOf(e);\n                  _this231.pendingRemoteTracks.splice(t, 1);\n                }), this.connection || i || r.forEach(function (t) {\n                  var i = t.kind;\n                  var r;\n                  if (i === yg.AUDIO) null === (r = e._audioTrack) || void 0 === r || r._destroy(), e._audioTrack = void 0;else if (i === yg.VIDEO) {\n                    var n;\n                    null === (n = e._videoTrack) || void 0 === n || n._destroy(), e._videoTrack = void 0;\n                  }\n                }), !this.connection)) {\n                  _context238.next = 3;\n                  break;\n                }\n                return _context238.abrupt(\"return\");\n              case 3:\n                n = this.filterTobeUnSubscribedTracks(e, t);\n                if (!(0 === n.length)) {\n                  _context238.next = 6;\n                  break;\n                }\n                return _context238.abrupt(\"return\");\n              case 6:\n                _context238.next = 8;\n                return this.connection.stopReceiving(n.map(function (e) {\n                  var _e165 = _slicedToArray(e, 2),\n                    t = _e165[1].id;\n                  return t;\n                }));\n              case 8:\n                o = this.createUnsubscribeMessage(n);\n                return _context238.abrupt(\"return\", (this.withdrawRemoteTracks(n), 0 === this.remoteUserMap.size && this.statsUploader.stopUploadDownlinkStats(), n.forEach(function (e) {\n                  var _e166 = _slicedToArray(e, 2),\n                    t = _e166[0],\n                    r = _e166[1].kind;\n                  var n, o;\n                  r === yg.VIDEO && t._videoSSRC && (null === (n = _this231.connection) || void 0 === n || n.setStatsRemoteVideoIsReady(t._videoSSRC, !1));\n                  if (r === yg.VIDEO) _this231.unbindRemoteTrackEvents(t._videoTrack), i || (null === (o = t._videoTrack) || void 0 === o || o._destroy(), t._videoTrack = void 0);else if (r === yg.AUDIO) {\n                    var s;\n                    if (_this231.unbindRemoteTrackEvents(t._audioTrack), !i) null === (s = t._audioTrack) || void 0 === s || s._destroy(), t._audioTrack = void 0;\n                  }\n                }), o));\n              case 10:\n              case \"end\":\n                return _context238.stop();\n            }\n          }, _callee238, this);\n        }));\n        function unsubscribe(_x378, _x379, _x380) {\n          return _unsubscribe2.apply(this, arguments);\n        }\n        return unsubscribe;\n      }()\n    }, {\n      key: \"massUnsubscribe\",\n      value: function () {\n        var _massUnsubscribe2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee239(e) {\n          return _regeneratorRuntime().wrap(function _callee239$(_context239) {\n            while (1) switch (_context239.prev = _context239.next) {\n              case 0:\n                return _context239.abrupt(\"return\", this.massUnsubscribeNoLock(e));\n              case 1:\n              case \"end\":\n                return _context239.stop();\n            }\n          }, _callee239, this);\n        }));\n        function massUnsubscribe(_x381) {\n          return _massUnsubscribe2.apply(this, arguments);\n        }\n        return massUnsubscribe;\n      }()\n    }, {\n      key: \"massUnsubscribeNoLock\",\n      value: function () {\n        var _massUnsubscribeNoLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee240(e) {\n          var _this232 = this;\n          var t, _iterator29, _step29, _loop4, i, r;\n          return _regeneratorRuntime().wrap(function _callee240$(_context241) {\n            while (1) switch (_context241.prev = _context241.next) {\n              case 0:\n                t = [];\n                _iterator29 = _createForOfIteratorHelper(e);\n                _context241.prev = 2;\n                _loop4 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop4() {\n                  var _step29$value, i, r, e;\n                  return _regeneratorRuntime().wrap(function _loop4$(_context240) {\n                    while (1) switch (_context240.prev = _context240.next) {\n                      case 0:\n                        _step29$value = _step29.value, i = _step29$value.user, r = _step29$value.mediaType;\n                        e = _this232.pendingRemoteTracks.filter(function (e) {\n                          var t = e.user,\n                            n = e.kind;\n                          return void 0 !== r ? t.uid === i.uid && r === n : t.uid === i.uid;\n                        });\n                        e.forEach(function (e) {\n                          var t = _this232.pendingRemoteTracks.indexOf(e);\n                          _this232.pendingRemoteTracks.splice(t, 1);\n                        }), t = t.concat(e);\n                      case 3:\n                      case \"end\":\n                        return _context240.stop();\n                    }\n                  }, _loop4);\n                });\n                _iterator29.s();\n              case 5:\n                if ((_step29 = _iterator29.n()).done) {\n                  _context241.next = 9;\n                  break;\n                }\n                return _context241.delegateYield(_loop4(), \"t0\", 7);\n              case 7:\n                _context241.next = 5;\n                break;\n              case 9:\n                _context241.next = 14;\n                break;\n              case 11:\n                _context241.prev = 11;\n                _context241.t1 = _context241[\"catch\"](2);\n                _iterator29.e(_context241.t1);\n              case 14:\n                _context241.prev = 14;\n                _iterator29.f();\n                return _context241.finish(14);\n              case 17:\n                if (this.connection) {\n                  _context241.next = 19;\n                  break;\n                }\n                return _context241.abrupt(\"return\", void t.forEach(function (e) {\n                  var t = e.user,\n                    i = e.kind;\n                  var r;\n                  if (i === yg.AUDIO) null === (r = t._audioTrack) || void 0 === r || r._destroy(), t._audioTrack = void 0;else if (i === yg.VIDEO) {\n                    var n;\n                    null === (n = t._videoTrack) || void 0 === n || n._destroy(), t._videoTrack = void 0;\n                  }\n                }));\n              case 19:\n                i = zi(e).call(e, function (e, t) {\n                  var i = t.user,\n                    r = t.mediaType;\n                  var n = _this232.filterTobeUnSubscribedTracks(i, r);\n                  return e.concat(n);\n                }, []);\n                if (!(0 === i.length)) {\n                  _context241.next = 22;\n                  break;\n                }\n                return _context241.abrupt(\"return\");\n              case 22:\n                _context241.next = 24;\n                return this.connection.stopReceiving(i.map(function (e) {\n                  var _e167 = _slicedToArray(e, 2),\n                    t = _e167[1].id;\n                  return t;\n                }));\n              case 24:\n                r = this.createUnsubscribeAllMessage(i);\n                return _context241.abrupt(\"return\", (this.withdrawRemoteTracks(i), 0 === this.remoteUserMap.size && this.statsUploader.stopUploadDownlinkStats(), i.forEach(function (e) {\n                  var _e168 = _slicedToArray(e, 2),\n                    t = _e168[0],\n                    i = _e168[1].kind;\n                  var r, n;\n                  i === yg.VIDEO && t._videoSSRC && (null === (r = _this232.connection) || void 0 === r || r.setStatsRemoteVideoIsReady(t._videoSSRC, !1));\n                  if (i === yg.VIDEO) _this232.unbindRemoteTrackEvents(t._videoTrack), null === (n = t._videoTrack) || void 0 === n || n._destroy(), t._videoTrack = void 0;else if (i === yg.AUDIO) {\n                    var o;\n                    _this232.unbindRemoteTrackEvents(t._audioTrack), null === (o = t._audioTrack) || void 0 === o || o._destroy(), t._audioTrack = void 0;\n                  }\n                }), r));\n              case 26:\n              case \"end\":\n                return _context241.stop();\n            }\n          }, _callee240, this, [[2, 11, 14, 17]]);\n        }));\n        function massUnsubscribeNoLock(_x382) {\n          return _massUnsubscribeNoLock.apply(this, arguments);\n        }\n        return massUnsubscribeNoLock;\n      }()\n    }, {\n      key: \"muteRemote\",\n      value: function () {\n        var _muteRemote5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee241(e, t) {\n          var i, r;\n          return _regeneratorRuntime().wrap(function _callee241$(_context242) {\n            while (1) switch (_context242.prev = _context242.next) {\n              case 0:\n                if (this.connection) {\n                  _context242.next = 2;\n                  break;\n                }\n                return _context242.abrupt(\"return\");\n              case 2:\n                i = this.remoteUserMap.get(e);\n                if (i) {\n                  _context242.next = 5;\n                  break;\n                }\n                return _context242.abrupt(\"return\", void NE.warning(\"P2PChannel.muteRemote has no remote user \".concat(e.uid, \".\")));\n              case 5:\n                if (i.get(t)) {\n                  _context242.next = 7;\n                  break;\n                }\n                return _context242.abrupt(\"return\", void NE.warning(\"P2PChannel.muteRemote has no remote user \".concat(e.uid, \" media type \").concat(t, \".\")));\n              case 7:\n                r = t === yg.VIDEO ? e._videoSSRC : e._audioSSRC;\n                void 0 !== r && this.connection.setStatsRemoteVideoIsReady(r, !1);\n              case 9:\n              case \"end\":\n                return _context242.stop();\n            }\n          }, _callee241, this);\n        }));\n        function muteRemote(_x383, _x384) {\n          return _muteRemote5.apply(this, arguments);\n        }\n        return muteRemote;\n      }()\n    }, {\n      key: \"unmuteRemote\",\n      value: function () {\n        var _unmuteRemote5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee242(e, t) {\n          return _regeneratorRuntime().wrap(function _callee242$(_context243) {\n            while (1) switch (_context243.prev = _context243.next) {\n              case 0:\n                return _context243.abrupt(\"return\", this.unmuteRemoteNoLock(e, t));\n              case 1:\n              case \"end\":\n                return _context243.stop();\n            }\n          }, _callee242, this);\n        }));\n        function unmuteRemote(_x385, _x386) {\n          return _unmuteRemote5.apply(this, arguments);\n        }\n        return unmuteRemote;\n      }()\n    }, {\n      key: \"unmuteRemoteNoLock\",\n      value: function () {\n        var _unmuteRemoteNoLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee243(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee243$(_context244) {\n            while (1) switch (_context244.prev = _context244.next) {\n              case 0:\n                if (this.connection) {\n                  _context244.next = 2;\n                  break;\n                }\n                return _context244.abrupt(\"return\");\n              case 2:\n                i = this.remoteUserMap.get(e);\n                if (i) {\n                  _context244.next = 5;\n                  break;\n                }\n                return _context244.abrupt(\"return\", void NE.warning(\"P2PChannel.unmuteRemote has no remote user \".concat(e.uid, \".\")));\n              case 5:\n                i.get(t) || NE.warning(\"P2PChannel.unmuteRemote has no remote user \".concat(e.uid, \" media type \").concat(t, \".\"));\n              case 6:\n              case \"end\":\n                return _context244.stop();\n            }\n          }, _callee243, this);\n        }));\n        function unmuteRemoteNoLock(_x387, _x388) {\n          return _unmuteRemoteNoLock.apply(this, arguments);\n        }\n        return unmuteRemoteNoLock;\n      }()\n    }, {\n      key: \"getAllTracks\",\n      value: function getAllTracks(e) {\n        var t = this.localTrackMap.get(Cg.LocalAudioTrack);\n        if ((null == t ? void 0 : t.track) instanceof uR) {\n          var i = t.track;\n          return Array.from(this.localTrackMap.entries()).filter(function (e) {\n            var _e169 = _slicedToArray(e, 1),\n              t = _e169[0];\n            return t !== Cg.LocalAudioTrack;\n          }).filter(function (t) {\n            var _t181 = _slicedToArray(t, 1),\n              i = _t181[0];\n            return !(e && i === Cg.LocalVideoLowTrack);\n          }).map(function (e) {\n            var _e170 = _slicedToArray(e, 2),\n              t = _e170[1].track;\n            return t;\n          }).concat(i.trackList);\n        }\n        return Array.from(this.localTrackMap.entries()).filter(function (t) {\n          var _t182 = _slicedToArray(t, 1),\n            i = _t182[0];\n          return !(e && i === Cg.LocalVideoLowTrack);\n        }).map(function (e) {\n          var _e171 = _slicedToArray(e, 2),\n            t = _e171[1].track;\n          return t;\n        });\n      }\n    }, {\n      key: \"reportPublishEvent\",\n      value: function reportPublishEvent(e, t, i, r, n) {\n        if (e) {\n          var _i106 = this.localTrackMap.get(Cg.LocalAudioTrack),\n            _o33 = r ? this.localTrackMap.get(Cg.LocalVideoLowTrack) : this.localTrackMap.get(Cg.LocalVideoTrack);\n          IT.publish(this.store.sessionId, {\n            eventElapse: pR.measureFromPublishStart(this.store.clientId, this.store.pubId),\n            succ: e,\n            ec: t,\n            audioName: null == _i106 ? void 0 : _i106.track.getTrackLabel(),\n            videoName: null == _o33 ? void 0 : _o33.track.getTrackLabel(),\n            screenshare: -1 !== (null == _o33 ? void 0 : _o33.track._hints.indexOf(lg.SCREEN_TRACK)),\n            audio: !!_i106,\n            video: !!_o33,\n            p2pid: this.store.p2pId,\n            publishRequestid: this.store.pubId,\n            extend: n\n          });\n        } else {\n          var o;\n          i || (i = []);\n          var _s39 = i.find(function (e) {\n              return e instanceof aR;\n            }),\n            _a23 = r ? null === (o = this.localTrackMap.get(Cg.LocalVideoTrack)) || void 0 === o ? void 0 : o.track : i.find(function (e) {\n              return e instanceof Ew;\n            });\n          IT.publish(this.store.sessionId, {\n            eventElapse: pR.measureFromPublishStart(this.store.clientId, this.store.pubId),\n            succ: e,\n            ec: t,\n            audioName: null == _s39 ? void 0 : _s39.getTrackLabel(),\n            videoName: null == _a23 ? void 0 : _a23.getTrackLabel(),\n            screenshare: -1 !== (null == _a23 ? void 0 : _a23._hints.indexOf(lg.SCREEN_TRACK)),\n            audio: !!_s39,\n            video: !!_a23,\n            p2pid: this.store.p2pId,\n            publishRequestid: this.store.pubId,\n            extend: n\n          });\n        }\n      }\n    }, {\n      key: \"reportSubscribeEvent\",\n      value: function reportSubscribeEvent(e, t, i, r) {\n        var n = r === yg.VIDEO ? i._videoSSRC : i._audioSSRC;\n        n && IT.subscribe(this.store.sessionId, {\n          succ: e,\n          ec: t,\n          video: r === yg.VIDEO,\n          audio: r === yg.AUDIO,\n          peerid: i.uid,\n          subscribeRequestid: r === yg.VIDEO ? i._videoSSRC : i._audioSSRC,\n          p2pid: this.store.p2pId,\n          eventElapse: pR.measureFromSubscribeStart(this.store.clientId, n)\n        });\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        NE.debug(\"P2PChannel.reset\"), this.mutex = new OT(\"P2PChannel-mutex\"), this.connection && (this.connection.close(), this.unbindConnectionEvents(this.connection), this.connection = void 0), this.statsUploader.stopUploadUplinkStats(), this.statsUploader.stopUploadDownlinkStats(), this.statsUploader.stopUploadTransportStats(), this.statsUploader.stopUploadExtensionUsageStats(), this.unbindLocalTrackEvents(), this.unbindAllRemoteTrackEvents(), this.localTrackMap.clear(), this.remoteUserMap.clear(), this.statsCollector.removeRemoteStats(), this.statsCollector.removeLocalStats(), this.iceFailedCount = 0, this.dtlsFailedCount = 0, this.pendingLocalTracks = [], this.pendingRemoteTracks = [], this.state = Ag.Disconnected;\n      }\n    }, {\n      key: \"getStats\",\n      value: function getStats() {\n        var e;\n        return null === (e = this.connection) || void 0 === e ? void 0 : e.getStats();\n      }\n    }, {\n      key: \"getRemoteVideoIsReady\",\n      value: function getRemoteVideoIsReady(e) {\n        var t;\n        return (null === (t = this.connection) || void 0 === t ? void 0 : t.getRemoteVideoIsReady(e)) || !1;\n      }\n    }, {\n      key: \"getLocalAudioVolume\",\n      value: function getLocalAudioVolume() {\n        var e = this.localTrackMap.get(Cg.LocalAudioTrack);\n        if (e) return e.track.getVolumeLevel();\n      }\n    }, {\n      key: \"getLocalVideoSize\",\n      value: function getLocalVideoSize() {\n        var e = this.localTrackMap.get(Cg.LocalVideoTrack);\n        if (e) return {\n          width: e.track._videoWidth || 0,\n          height: e.track._videoHeight || 0\n        };\n      }\n    }, {\n      key: \"getEncoderConfig\",\n      value: function getEncoderConfig(e) {\n        var t = this.localTrackMap.get(e);\n        return t && t.track instanceof Ew || t && t.track instanceof aR ? t.track._encoderConfig : void 0;\n      }\n    }, {\n      key: \"getLocalMedia\",\n      value: function getLocalMedia(e) {\n        return this.localTrackMap.get(e);\n      }\n    }, {\n      key: \"hasLocalMedia\",\n      value: function hasLocalMedia() {\n        return this.localTrackMap.size > 0;\n      }\n    }, {\n      key: \"hasRemoteMedia\",\n      value: function hasRemoteMedia(e, t) {\n        if (!e) return this.remoteUserMap.size > 0;\n        var i = this.remoteUserMap.get(e);\n        return !!i && (!t || i.has(t));\n      }\n    }, {\n      key: \"hasRemoteMediaWithLock\",\n      value: function () {\n        var _hasRemoteMediaWithLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee244(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee244$(_context245) {\n            while (1) switch (_context245.prev = _context245.next) {\n              case 0:\n                if (e) {\n                  _context245.next = 2;\n                  break;\n                }\n                return _context245.abrupt(\"return\", this.remoteUserMap.size > 0);\n              case 2:\n                i = this.remoteUserMap.get(e);\n                return _context245.abrupt(\"return\", !!i && (!t || i.has(t)));\n              case 4:\n              case \"end\":\n                return _context245.stop();\n            }\n          }, _callee244, this);\n        }));\n        function hasRemoteMediaWithLock(_x389, _x390) {\n          return _hasRemoteMediaWithLock.apply(this, arguments);\n        }\n        return hasRemoteMediaWithLock;\n      }()\n    }, {\n      key: \"getRemoteMedia\",\n      value: function getRemoteMedia(e) {\n        var t;\n        var i = Array.from(sT(t = this.remoteUserMap).call(t)).find(function (t) {\n          return t.uid === e;\n        });\n        return i ? {\n          audioTrack: i.audioTrack,\n          audioSSRC: i._audioSSRC,\n          videoTrack: i.videoTrack,\n          videoSSRC: i._videoSSRC\n        } : {};\n      }\n    }, {\n      key: \"getAudioLevels\",\n      value: function getAudioLevels() {\n        var e = Array.from(this.remoteUserMap.entries()).map(function (e) {\n          var _e172 = _slicedToArray(e, 1),\n            t = _e172[0];\n          return {\n            uid: t.uid,\n            level: t.audioTrack ? 100 * t.audioTrack._source.getAccurateVolumeLevel() : 0\n          };\n        });\n        var t = this.localTrackMap.get(Cg.LocalAudioTrack);\n        return t && e.push({\n          level: 100 * t.track._source.getAccurateVolumeLevel(),\n          uid: this.store.uid\n        }), e = Yf(e).call(e, function (e, t) {\n          return e.level - t.level;\n        }), e;\n      }\n    }, {\n      key: \"disconnectForReconnect\",\n      value: function () {\n        var _disconnectForReconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee245() {\n          var _this233 = this;\n          return _regeneratorRuntime().wrap(function _callee245$(_context246) {\n            while (1) switch (_context246.prev = _context246.next) {\n              case 0:\n                this.connection && (NE.debug(\"P2PChannel.disconnectForReconnect closing P2PConnection\"), this.state = Ag.Reconnecting, this.connection.close(), this.unbindConnectionEvents(this.connection), this.connection = void 0, 0 !== this.localTrackMap.size && (Array.from(this.localTrackMap.entries()).forEach(function (e) {\n                  var _e173 = _slicedToArray(e, 2),\n                    t = _e173[0],\n                    i = _e173[1].track;\n                  switch (t) {\n                    case Cg.LocalVideoTrack:\n                      i._hints.includes(lg.LOW_STREAM) ? i.close() : _this233.pendingLocalTracks.push(i);\n                      break;\n                    case Cg.LocalAudioTrack:\n                      i instanceof uR ? _this233.pendingLocalTracks = _this233.pendingLocalTracks.concat(i.trackList) : _this233.pendingLocalTracks.push(i);\n                      break;\n                    case Cg.LocalVideoLowTrack:\n                  }\n                }), this.emit(Og.MediaReconnectStart, this.store.uid)), this.unbindLocalTrackEvents(), this.localTrackMap.clear(), 0 !== this.remoteUserMap.size && Array.from(this.remoteUserMap.entries()).forEach(function (e) {\n                  var _e174 = _slicedToArray(e, 2),\n                    t = _e174[0],\n                    i = _e174[1];\n                  Array.from(sT(i).call(i)).forEach(function (e) {\n                    _this233.setPendingRemoteMedia(t, e);\n                  }), _this233.emit(Og.MediaReconnectStart, t.uid);\n                }), this.unbindAllRemoteTrackEvents(), this.remoteUserMap.clear(), this.statsUploader.stopUploadUplinkStats(), this.statsUploader.stopUploadDownlinkStats(), this.statsUploader.stopUploadTransportStats(), NE.debug(\"P2PChannel disconnected, waiting to reconnect.\"));\n              case 1:\n              case \"end\":\n                return _context246.stop();\n            }\n          }, _callee245, this);\n        }));\n        function disconnectForReconnect() {\n          return _disconnectForReconnect.apply(this, arguments);\n        }\n        return disconnectForReconnect;\n      }()\n    }, {\n      key: \"hasPendingRemoteMedia\",\n      value: function hasPendingRemoteMedia(e, t) {\n        var _iterator30 = _createForOfIteratorHelper(this.pendingRemoteTracks),\n          _step30;\n        try {\n          for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n            var i = _step30.value;\n            var r = i.user,\n              _n61 = i.kind;\n            if ((e instanceof mw ? e.uid : e) === r.uid && t === _n61) return !0;\n          }\n        } catch (err) {\n          _iterator30.e(err);\n        } finally {\n          _iterator30.f();\n        }\n        return !1;\n      }\n    }, {\n      key: \"setPendingRemoteMedia\",\n      value: function setPendingRemoteMedia(e, t) {\n        this.hasPendingRemoteMedia(e, t) || this.pendingRemoteTracks.push({\n          user: e,\n          kind: t\n        });\n      }\n    }, {\n      key: \"restartICE\",\n      value: function restartICE() {\n        var e = this;\n        return ID( /*#__PURE__*/_regeneratorRuntime().mark(function _callee246() {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee246$(_context247) {\n            while (1) switch (_context247.prev = _context247.next) {\n              case 0:\n                if (e.connection) {\n                  _context247.next = 2;\n                  break;\n                }\n                throw new Error();\n              case 2:\n                _context247.next = 4;\n                return yD(e.mutex.lock(\"From P2PChannel.restartICE\"));\n              case 4:\n                t = _context247.sent;\n                _context247.prev = 5;\n                return _context247.delegateYield(AD(lL(e.connection.restartICE()), yD), \"t0\", 7);\n              case 7:\n                _context247.prev = 7;\n                t();\n                return _context247.finish(7);\n              case 10:\n              case \"end\":\n                return _context247.stop();\n            }\n          }, _callee246, null, [[5,, 7, 10]]);\n        }))();\n      }\n    }, {\n      key: \"getUplinkNetworkQuality\",\n      value: function getUplinkNetworkQuality() {\n        if (!this.connection) return 0;\n        var e = this.connection.getStats(),\n          t = this.localTrackMap.get(Cg.LocalVideoTrack),\n          i = this.localTrackMap.get(Cg.LocalAudioTrack),\n          r = e.videoSend.find(function (e) {\n            return e.ssrc === (null == t ? void 0 : t.ssrcs[0].ssrcId);\n          }),\n          n = e.audioSend.find(function (e) {\n            return e.ssrc === (null == i ? void 0 : i.ssrcs[0].ssrcId);\n          });\n        if (!r || !n) return 1;\n        var o = GR(this, Og.NeedSignalRTT),\n          s = r ? r.rttMs : void 0,\n          a = n ? n.rttMs : void 0,\n          c = s && a ? (s + a) / 2 : s || a,\n          d = (c && o ? (c + o) / 2 : c || o) || 0,\n          u = 100 * e.sendPacketLossRate * .7 / 50 + .3 * d / 1500,\n          l = u < .17 ? 1 : u < .36 ? 2 : u < .59 ? 3 : u < .1 ? 4 : 5,\n          h = null == t ? void 0 : t.track;\n        if (h && h._encoderConfig && -1 === h._hints.indexOf(lg.SCREEN_TRACK)) {\n          var _t183 = h._encoderConfig.bitrateMax,\n            _i107 = e.bitrate.actualEncoded;\n          if (_t183 && _i107) {\n            var _e175 = (1e3 * _t183 - _i107) / (1e3 * _t183);\n            return QE[_e175 < .15 ? 0 : _e175 < .3 ? 1 : _e175 < .45 ? 2 : _e175 < .6 ? 3 : 4][l];\n          }\n        }\n        return l;\n      }\n    }, {\n      key: \"getDownlinkNetworkQuality\",\n      value: function getDownlinkNetworkQuality() {\n        var _this234 = this;\n        if (!this.connection) return 0;\n        var e = this.connection.getStats();\n        var t = 0;\n        return Array.from(this.remoteUserMap.entries()).forEach(function (i) {\n          var _i108 = _slicedToArray(i, 1),\n            r = _i108[0];\n          var n = r._audioSSRC,\n            o = r._videoSSRC,\n            s = e.audioRecv.find(function (e) {\n              return e.ssrc === n;\n            }),\n            a = e.videoRecv.find(function (e) {\n              return e.ssrc === o;\n            });\n          if (!s && !a) return void (t += 1);\n          var c = GR(_this234, Og.NeedSignalRTT),\n            d = e.rtt,\n            u = (d && c ? (d + c) / 2 : d || c) || 0,\n            l = s ? s.jitterMs : void 0,\n            h = e.recvPacketLossRate;\n          var p = .7 * h * 100 / 50 + .3 * u / 1500;\n          l && (p = .6 * h * 100 / 50 + .2 * u / 1500 + .2 * l / 400);\n          t += p < .1 ? 1 : p < .17 ? 2 : p < .36 ? 3 : p < .59 ? 4 : 5;\n        }), this.remoteUserMap.size > 0 ? Math.round(t / this.remoteUserMap.size) : t;\n      }\n    }, {\n      key: \"muteLocalTrack\",\n      value: function () {\n        var _muteLocalTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee247(e) {\n          var _this235 = this;\n          return _regeneratorRuntime().wrap(function _callee247$(_context248) {\n            while (1) switch (_context248.prev = _context248.next) {\n              case 0:\n                return _context248.abrupt(\"return\", new Cl(function (t, i) {\n                  _this235.handleMuteLocalTrack(e, t, i);\n                }));\n              case 1:\n              case \"end\":\n                return _context248.stop();\n            }\n          }, _callee247);\n        }));\n        function muteLocalTrack(_x391) {\n          return _muteLocalTrack.apply(this, arguments);\n        }\n        return muteLocalTrack;\n      }()\n    }, {\n      key: \"filterTobePublishedTracks\",\n      value: function filterTobePublishedTracks(e, t, i) {\n        var r = [],\n          n = jg(),\n          o = this.getAllTracks();\n        e = KR(e = e.filter(function (e) {\n          return -1 === o.indexOf(e);\n        }));\n        var s = !1,\n          a = !1;\n        var _iterator31 = _createForOfIteratorHelper(e),\n          _step31;\n        try {\n          for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n            var _o34 = _step31.value;\n            if (_o34 instanceof Ew && (this.localTrackMap.has(Cg.LocalVideoTrack) || s ? new vE(TE.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw() : (r.push({\n              track: _o34,\n              type: Cg.LocalVideoTrack\n            }), s = !0), t)) {\n              var _e176 = this.getLowVideoTrack(_o34, i);\n              r.push({\n                track: _e176,\n                type: Cg.LocalVideoLowTrack\n              });\n            }\n            if (_o34 instanceof aR) {\n              var _e177 = this.localTrackMap.get(Cg.LocalAudioTrack);\n              if (_e177) {\n                if (!(_e177.track instanceof uR)) throw new vE(TE.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");\n                if (_o34._bypassWebAudio) throw new vE(TE.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio\");\n                _e177.track.addAudioTrack(_o34), this.bindLocalAudioTrackEvents(_o34, !0);\n              } else if (a) {\n                var _e178 = r.find(function (e) {\n                  var t = e.type;\n                  return t === Cg.LocalAudioTrack;\n                });\n                if (!(_e178.track instanceof uR)) throw new vE(TE.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing\");\n                if (_o34._bypassWebAudio) throw new vE(TE.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio\");\n                _e178.track.addAudioTrack(_o34);\n              } else {\n                if (!n.webAudioMediaStreamDest || _o34 instanceof uR || _o34._bypassWebAudio) r.push({\n                  track: _o34,\n                  type: Cg.LocalAudioTrack\n                });else {\n                  var _e179 = new uR();\n                  _e179.addAudioTrack(_o34), r.push({\n                    track: _e179,\n                    type: Cg.LocalAudioTrack\n                  });\n                }\n                a = !0;\n              }\n            }\n          }\n        } catch (err) {\n          _iterator31.e(err);\n        } finally {\n          _iterator31.f();\n        }\n        return r;\n      }\n    }, {\n      key: \"filterTobeUnpublishedTracks\",\n      value: function filterTobeUnpublishedTracks(e) {\n        var t = [],\n          i = this.getAllTracks();\n        e = KR(e = e.filter(function (e) {\n          return -1 !== i.indexOf(e);\n        }));\n        var _iterator32 = _createForOfIteratorHelper(e),\n          _step32;\n        try {\n          for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n            var _i109 = _step32.value;\n            if (_i109 instanceof aR) {\n              var _e180 = this.localTrackMap.get(Cg.LocalAudioTrack);\n              if (!_e180) continue;\n              _e180.track instanceof uR ? (_e180.track.removeAudioTrack(_i109), this.unbindLocalAudioTrackEvents(_i109), 0 === _e180.track.trackList.length && (t.push([Cg.LocalAudioTrack, _e180]), _e180.track.close())) : t.push([Cg.LocalAudioTrack, _e180]);\n            }\n            if (_i109 instanceof Ew) {\n              var _e181 = this.localTrackMap.get(Cg.LocalVideoTrack);\n              if (!_e181) continue;\n              t.push([Cg.LocalVideoTrack, _e181]);\n              var _i110 = this.localTrackMap.get(Cg.LocalVideoLowTrack);\n              _i110 && t.push([Cg.LocalVideoLowTrack, _i110]);\n            }\n          }\n        } catch (err) {\n          _iterator32.e(err);\n        } finally {\n          _iterator32.f();\n        }\n        return t;\n      }\n    }, {\n      key: \"bindLocalTrackEvents\",\n      value: function bindLocalTrackEvents(e) {\n        var _this236 = this;\n        e.forEach(function (e) {\n          var t = e.track,\n            i = e.type;\n          switch (i) {\n            case Cg.LocalVideoTrack:\n              t.addListener(ug.GET_STATS, _this236.handleGetLocalVideoStats), t.addListener(ug.NEED_DISABLE_TRACK, _this236.handleMuteLocalTrack), t.addListener(ug.NEED_ENABLE_TRACK, _this236.handleUnmuteLocalTrack), t.addListener(ug.NEED_UPDATE_VIDEO_ENCODER, _this236.handleUpdateVideoEncoder), t.addListener(ug.SET_OPTIMIZATION_MODE, _this236.handleSetOptimizationMode), t.addListener(ug.NEED_REPLACE_TRACK, _this236.handleReplaceTrack), t.addListener(ug.NEED_MUTE_TRACK, _this236.handleMuteLocalTrack), t.addListener(ug.NEED_UNMUTE_TRACK, _this236.handleUnmuteLocalTrack);\n              break;\n            case Cg.LocalAudioTrack:\n              _this236.bindLocalAudioTrackEvents(t);\n              break;\n            case Cg.LocalVideoLowTrack:\n          }\n        });\n      }\n    }, {\n      key: \"bindLocalAudioTrackEvents\",\n      value: function bindLocalAudioTrackEvents(e, t) {\n        var _this237 = this;\n        e instanceof uR ? e.trackList.forEach(function (e) {\n          e.addListener(ug.NEED_DISABLE_TRACK, _this237.handleMuteLocalTrack), e.addListener(ug.NEED_ENABLE_TRACK, _this237.handleUnmuteLocalTrack), e.addListener(ug.GET_STATS, _this237.handleGetLocalAudioStats), e.addListener(ug.NEED_MUTE_TRACK, _this237.handleMuteLocalTrack), e.addListener(ug.NEED_UNMUTE_TRACK, _this237.handleUnmuteLocalTrack);\n        }) : (e.addListener(ug.GET_STATS, this.handleGetLocalAudioStats), e.addListener(ug.NEED_DISABLE_TRACK, this.handleMuteLocalTrack), e.addListener(ug.NEED_ENABLE_TRACK, this.handleUnmuteLocalTrack), e.addListener(ug.NEED_MUTE_TRACK, this.handleMuteLocalTrack), e.addListener(ug.NEED_UNMUTE_TRACK, this.handleUnmuteLocalTrack), t || e.addListener(ug.NEED_REPLACE_TRACK, this.handleReplaceTrack));\n      }\n    }, {\n      key: \"unbindLocalTrackEvents\",\n      value: function unbindLocalTrackEvents(e) {\n        var _this238 = this;\n        e || (e = Array.from(this.localTrackMap.entries()).map(function (e) {\n          var _e182 = _slicedToArray(e, 2),\n            t = _e182[0],\n            i = _e182[1].track;\n          return {\n            track: i,\n            type: t\n          };\n        })), e.forEach(function (e) {\n          var t = e.track,\n            i = e.type;\n          switch (i) {\n            case Cg.LocalVideoTrack:\n              t.off(ug.GET_STATS, _this238.handleGetLocalVideoStats), t.off(ug.NEED_DISABLE_TRACK, _this238.handleMuteLocalTrack), t.off(ug.NEED_ENABLE_TRACK, _this238.handleUnmuteLocalTrack), t.off(ug.NEED_UPDATE_VIDEO_ENCODER, _this238.handleUpdateVideoEncoder), t.off(ug.SET_OPTIMIZATION_MODE, _this238.handleSetOptimizationMode), t.off(ug.NEED_REPLACE_TRACK, _this238.handleReplaceTrack), t.off(ug.NEED_MUTE_TRACK, _this238.handleMuteLocalTrack), t.off(ug.NEED_UNMUTE_TRACK, _this238.handleUnmuteLocalTrack);\n              break;\n            case Cg.LocalAudioTrack:\n              _this238.unbindLocalAudioTrackEvents(t);\n              break;\n            case Cg.LocalVideoLowTrack:\n          }\n        });\n      }\n    }, {\n      key: \"unbindLocalAudioTrackEvents\",\n      value: function unbindLocalAudioTrackEvents(e) {\n        var _this239 = this;\n        e instanceof uR ? e.trackList.forEach(function (e) {\n          e.off(ug.NEED_DISABLE_TRACK, _this239.handleMuteLocalTrack), e.off(ug.NEED_ENABLE_TRACK, _this239.handleUnmuteLocalTrack), e.off(ug.GET_STATS, _this239.handleGetLocalAudioStats), e.off(ug.NEED_MUTE_TRACK, _this239.handleMuteLocalTrack), e.off(ug.NEED_UNMUTE_TRACK, _this239.handleUnmuteLocalTrack);\n        }) : (e.off(ug.GET_STATS, this.handleGetLocalAudioStats), e.off(ug.NEED_DISABLE_TRACK, this.handleMuteLocalTrack), e.off(ug.NEED_ENABLE_TRACK, this.handleUnmuteLocalTrack), e.off(ug.NEED_REPLACE_TRACK, this.handleReplaceTrack), e.off(ug.NEED_MUTE_TRACK, this.handleMuteLocalTrack), e.off(ug.NEED_UNMUTE_TRACK, this.handleUnmuteLocalTrack));\n      }\n    }, {\n      key: \"bindRemoteTrackEvents\",\n      value: function bindRemoteTrackEvents(e, t) {\n        var _this240 = this;\n        t instanceof GP && t.addListener(ug.GET_STATS, function (t) {\n          t(_this240.handleGetRemoteVideoStats(e));\n        }), t instanceof WP && t.addListener(ug.GET_STATS, function (t) {\n          t(_this240.handleGetRemoteAudioStats(e));\n        });\n      }\n    }, {\n      key: \"unbindRemoteTrackEvents\",\n      value: function unbindRemoteTrackEvents(e) {\n        e && e.removeAllListeners(ug.GET_STATS);\n      }\n    }, {\n      key: \"unbindAllRemoteTrackEvents\",\n      value: function unbindAllRemoteTrackEvents() {\n        var _this241 = this;\n        Array.from(this.remoteUserMap.entries()).forEach(function (e) {\n          var _e183 = _slicedToArray(e, 2),\n            t = _e183[0],\n            i = _e183[1];\n          i.has(yg.AUDIO) && _this241.unbindRemoteTrackEvents(t._audioTrack), i.has(yg.VIDEO) && _this241.unbindRemoteTrackEvents(t._videoTrack);\n        });\n      }\n    }, {\n      key: \"createGatewayPublishMessage\",\n      value: function createGatewayPublishMessage(e, t) {\n        var _this242 = this;\n        return e.map(function (e, i) {\n          var r,\n            n,\n            o = e.track,\n            s = e.type;\n          switch (s) {\n            case Cg.LocalAudioTrack:\n              r = ag.Audio, n = {\n                dtx: o instanceof cR && o._config.DTX,\n                hq: !1,\n                lq: !1,\n                stereo: !1,\n                speech: !1\n              };\n              break;\n            case Cg.LocalVideoTrack:\n              r = o._hints.includes(lg.SCREEN_TRACK) ? ag.Screen : ag.High, n = uL(uL({}, IR(o)), {}, {\n                codec: _this242.store.codec\n              });\n              break;\n            case Cg.LocalVideoLowTrack:\n              r = ag.Low, n = uL(uL({}, IR(o)), {}, {\n                codec: _this242.store.codec\n              });\n          }\n          return {\n            stream_type: r,\n            attributes: n,\n            ssrcs: t[i]\n          };\n        });\n      }\n    }, {\n      key: \"createGatewayUnpublishMessage\",\n      value: function createGatewayUnpublishMessage(e) {\n        return e.map(function (e) {\n          var t,\n            _e184 = _slicedToArray(e, 2),\n            i = _e184[0],\n            _e184$ = _e184[1],\n            r = _e184$.track,\n            n = _e184$.ssrcs,\n            o = _e184$.id;\n          switch (i) {\n            case Cg.LocalVideoTrack:\n              t = r._hints.includes(lg.SCREEN_TRACK) ? ag.Screen : ag.High;\n              break;\n            case Cg.LocalAudioTrack:\n              t = ag.Audio;\n              break;\n            case Cg.LocalVideoLowTrack:\n              t = ag.Low;\n          }\n          return {\n            stream_type: t,\n            ssrcs: n,\n            mid: o\n          };\n        });\n      }\n    }, {\n      key: \"assignLocalTracks\",\n      value: function assignLocalTracks(e, t) {\n        var _this243 = this;\n        e.forEach(function (e, i) {\n          var r = e.track,\n            n = e.type;\n          _this243.localTrackMap.set(n, {\n            track: r,\n            id: t[i].id,\n            ssrcs: t[i].localSSRC\n          });\n        });\n      }\n    }, {\n      key: \"withdrawLocalTracks\",\n      value: function withdrawLocalTracks(e) {\n        var _this244 = this;\n        e.forEach(function (e) {\n          var _e185 = _slicedToArray(e, 1),\n            t = _e185[0];\n          _this244.localTrackMap.delete(t);\n        });\n      }\n    }, {\n      key: \"bindConnectionEvents\",\n      value: function bindConnectionEvents(e) {\n        var _this245 = this;\n        e.onConnectionStateChange = /*#__PURE__*/function () {\n          var _ref60 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee248(t) {\n            return _regeneratorRuntime().wrap(function _callee248$(_context249) {\n              while (1) switch (_context249.prev = _context249.next) {\n                case 0:\n                  if (!(NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.onConnectionStateChange(\").concat(t, \")\")), _this245.emit(Og.PeerConnectionStateChange, t), \"connected\" !== t || _this245.store.keyMetrics.peerConnectionEnd || _this245.store.peerConnectionEnd(), \"disconnected\" === t && \"disconnected\" === e.iceConnectionState)) {\n                    _context249.next = 2;\n                    break;\n                  }\n                  return _context249.abrupt(\"return\", (setTimeout(function () {\n                    if (\"disconnected\" === e.iceConnectionState && HE(\"ICE_RESTART\")) {\n                      \"CONNECTED\" === GR(_this245, Og.QueryClientConnectionState) && _this245.emit(Og.RequestRestartICE);\n                    }\n                  }, 800), void setTimeout(function () {\n                    \"disconnected\" === e.peerConnectionState && (NE.debug(\"P2PConnection disconnected timeout 4000ms, force reconnect\"), setTimeout(function () {\n                      return _this245.emit(Og.P2PLost);\n                    }, 0), _this245.iceFailedCount += 1, _this245.requestReconnect());\n                  }, 4e3)));\n                case 2:\n                  _context249.t0 = \"failed\" === t;\n                  if (!_context249.t0) {\n                    _context249.next = 9;\n                    break;\n                  }\n                  NE.debug(\"P2PConnection state failed, force reconnect\");\n                  setTimeout(function () {\n                    return _this245.emit(Og.P2PLost);\n                  }, 0);\n                  _this245.iceFailedCount += 1;\n                  _context249.next = 9;\n                  return _this245.requestReconnect();\n                case 9:\n                case \"end\":\n                  return _context249.stop();\n              }\n            }, _callee248);\n          }));\n          return function (_x392) {\n            return _ref60.apply(this, arguments);\n          };\n        }(), e.onICEConnectionStateChange = function (e) {\n          \"connected\" !== e || _this245.store.keyMetrics.iceConnectionEnd || _this245.store.iceConnectionEnd(), NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.onICEConnectionStateChange(\").concat(e, \")\")), IT.reportApiInvoke(_this245.store.sessionId, {\n            name: \"ICEConnectionStateChange\",\n            options: e,\n            tag: fm.TRACER\n          }).onSuccess(), _this245.emit(Og.IceConnectionStateChange, e);\n        }, e.onICETransportStateChange = function (e) {\n          NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.onICETransportStateChange(\").concat(e, \")\"));\n        }, e.onDTLSTransportStateChange = function (e) {\n          NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.onDTLSTransportStateChange(\").concat(e, \")\"));\n        }, e.onDTLSTransportError = function (e) {\n          NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.onDTLSTransportError(\").concat(e, \")\"));\n        }, e.onFirstAudioDecoded = function (e) {\n          var t;\n          var i = Array.from(sT(t = _this245.remoteUserMap).call(t)).find(function (t) {\n            return t._audioSSRC === e;\n          });\n          var r;\n          i && (_this245.store.subscribe(i.uid, \"audio\", void 0, void 0, void 0, Date.now()), null === (r = i.audioTrack) || void 0 === r || r.emit(Eg.FIRST_FRAME_DECODED), IT.firstRemoteFrame(_this245.store.sessionId, lm.FIRST_AUDIO_DECODE, hm.FIRST_AUDIO_DECODE, {\n            peer: i._uintid,\n            subscribeElapse: pR.measureFromSubscribeStart(_this245.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this245.store.p2pId\n          }));\n        }, e.onFirstAudioReceived = function (e) {\n          var t;\n          var i = Array.from(sT(t = _this245.remoteUserMap).call(t)).find(function (t) {\n            return t._audioSSRC === e;\n          });\n          i && IT.firstRemoteFrame(_this245.store.sessionId, lm.FIRST_AUDIO_RECEIVED, hm.FIRST_AUDIO_RECEIVED, {\n            peer: i._uintid,\n            subscribeElapse: pR.measureFromSubscribeStart(_this245.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this245.store.p2pId\n          });\n        }, e.onFirstVideoDecoded = function (e, t, i) {\n          _this245.reportVideoFirstFrameDecoded(e, t, i);\n        }, e.onFirstVideoReceived = function (e) {\n          var t;\n          var i = Array.from(sT(t = _this245.remoteUserMap).call(t)).find(function (t) {\n            return t._videoSSRC === e;\n          });\n          i && IT.firstRemoteFrame(_this245.store.sessionId, lm.FIRST_VIDEO_RECEIVED, hm.FIRST_VIDEO_RECEIVED, {\n            peer: i._uintid,\n            subscribeElapse: pR.measureFromSubscribeStart(_this245.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: _this245.store.p2pId\n          });\n        }, e.onSelectedLocalCandidateChanged = function (e, t) {\n          var i = \"relay\" === e.candidateType,\n            r = \"relay\" === t.candidateType;\n          \"unknown\" !== t.candidateType && i === r || _this245.emit(Og.ConnectionTypeChange, i), NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.SelectedLocalCandidateChanged(\").concat(JSON.stringify(wR(t)), \" -> \").concat(JSON.stringify(wR(e)), \")\"));\n        }, e.onSelectedRemoteCandidateChanged = function (e, t) {\n          NE.info(\"[p2pId: \".concat(_this245.store.p2pId, \"]: P2PConnection.SelectedRemoteCandidateChanged(\").concat(JSON.stringify(wR(t)), \" -> \").concat(JSON.stringify(wR(e)), \")\"));\n        }, e.onFirstVideoDecodedTimeout = function (e) {\n          _this245.reportVideoFirstFrameDecoded(e, void 0, void 0, !0);\n        };\n      }\n    }, {\n      key: \"unbindConnectionEvents\",\n      value: function unbindConnectionEvents(e) {\n        e.onConnectionStateChange = void 0, e.onICEConnectionStateChange = void 0, e.onICETransportStateChange = void 0, e.onDTLSTransportStateChange = void 0, e.onDTLSTransportError = void 0, e.onFirstAudioDecoded = void 0, e.onFirstAudioReceived = void 0, e.onFirstVideoDecoded = void 0, e.onFirstVideoReceived = void 0, e.onSelectedLocalCandidateChanged = void 0, e.onSelectedRemoteCandidateChanged = void 0, e.onFirstVideoDecodedTimeout = void 0;\n      }\n    }, {\n      key: \"filterTobeMutedTracks\",\n      value: function filterTobeMutedTracks(e) {\n        var t = [];\n        if (-1 === this.getAllTracks().indexOf(e)) return t;\n        var i = this.localTrackMap.get(Cg.LocalAudioTrack);\n        if (e instanceof aR && (null == i ? void 0 : i.track) instanceof uR) return i.track.isActive || t.push([Cg.LocalAudioTrack, i]), t;\n        var r = Array.from(this.localTrackMap.entries()).find(function (t) {\n          var _t184 = _slicedToArray(t, 2),\n            i = _t184[1].track;\n          return e === i;\n        });\n        if (r && (t.push(r), r[0] === Cg.LocalVideoTrack)) {\n          var _e186 = this.localTrackMap.get(Cg.LocalVideoLowTrack);\n          _e186 && t.push([Cg.LocalVideoLowTrack, _e186]);\n        }\n        return t;\n      }\n    }, {\n      key: \"filterTobeUnmutedTracks\",\n      value: function filterTobeUnmutedTracks(e) {\n        var t = [],\n          i = this.localTrackMap.get(Cg.LocalAudioTrack);\n        if (e instanceof aR && (null == i ? void 0 : i.track) instanceof uR) return i.track.isActive && t.push([Cg.LocalAudioTrack, i]), t;\n        var r = Array.from(this.localTrackMap.entries()).find(function (t) {\n          var _t185 = _slicedToArray(t, 2),\n            i = _t185[1].track;\n          return e === i;\n        });\n        if (r) if (r[0] === Cg.LocalVideoTrack) {\n          t.push(r);\n          var _e187 = this.localTrackMap.get(Cg.LocalVideoLowTrack);\n          _e187 && t.push([Cg.LocalVideoLowTrack, _e187]);\n        } else t.push(r);\n        return t;\n      }\n    }, {\n      key: \"createMuteMessage\",\n      value: function createMuteMessage(e) {\n        return e.map(function (e) {\n          var t,\n            _e188 = _slicedToArray(e, 2),\n            i = _e188[0],\n            _e188$ = _e188[1],\n            r = _e188$.track,\n            n = _e188$.ssrcs,\n            o = _e188$.id;\n          switch (i) {\n            case Cg.LocalAudioTrack:\n              t = ag.Audio;\n              break;\n            case Cg.LocalVideoTrack:\n              t = r._hints.includes(lg.SCREEN_TRACK) ? ag.Screen : ag.High;\n              break;\n            case Cg.LocalVideoLowTrack:\n              t = ag.Low;\n          }\n          return {\n            stream_type: t,\n            ssrcs: n,\n            mid: o\n          };\n        });\n      }\n    }, {\n      key: \"createUnmuteMessage\",\n      value: function createUnmuteMessage(e) {\n        return e.map(function (e) {\n          var t,\n            _e189 = _slicedToArray(e, 2),\n            i = _e189[0],\n            _e189$ = _e189[1],\n            r = _e189$.track,\n            n = _e189$.ssrcs,\n            o = _e189$.id;\n          switch (i) {\n            case Cg.LocalAudioTrack:\n              t = ag.Audio;\n              break;\n            case Cg.LocalVideoTrack:\n              t = r._hints.includes(lg.SCREEN_TRACK) ? ag.Screen : ag.High;\n              break;\n            case Cg.LocalVideoLowTrack:\n              t = ag.Low;\n          }\n          return {\n            stream_type: t,\n            ssrcs: n,\n            mid: o\n          };\n        });\n      }\n    }, {\n      key: \"filterTobeUnSubscribedTracks\",\n      value: function filterTobeUnSubscribedTracks(e, t) {\n        var i = [],\n          r = this.remoteUserMap.get(e);\n        if (!r) return i;\n        if (t) {\n          var _n62 = r.get(t);\n          if (!_n62) return i;\n          i.push([e, {\n            kind: t,\n            id: _n62\n          }]);\n        } else Array.from(r.entries()).forEach(function (t) {\n          var _t186 = _slicedToArray(t, 2),\n            r = _t186[0],\n            n = _t186[1];\n          i.push([e, {\n            kind: r,\n            id: n\n          }]);\n        });\n        return i;\n      }\n    }, {\n      key: \"createUnsubscribeMessage\",\n      value: function createUnsubscribeMessage(e) {\n        var t = [];\n        return e.forEach(function (e) {\n          var _e190 = _slicedToArray(e, 2),\n            i = _e190[0],\n            _e190$ = _e190[1],\n            r = _e190$.kind,\n            n = _e190$.id;\n          switch (r) {\n            case yg.VIDEO:\n              return void (i._videoSSRC && t.push({\n                stream_type: yg.VIDEO,\n                ssrcId: i._videoSSRC\n              }));\n            case yg.AUDIO:\n              return void (i._audioSSRC && t.push({\n                stream_type: yg.AUDIO,\n                ssrcId: i._audioSSRC\n              }));\n          }\n        }), t;\n      }\n    }, {\n      key: \"createUnsubscribeAllMessage\",\n      value: function createUnsubscribeAllMessage(e) {\n        var t = new Map();\n        return e.forEach(function (e) {\n          var _e191 = _slicedToArray(e, 2),\n            i = _e191[0],\n            r = _e191[1].kind;\n          if (t.has(i)) {\n            var _e192 = t.get(i);\n            r === yg.VIDEO ? _e192 |= dg.Video : _e192 |= dg.Audio, t.set(i, _e192);\n          } else r === yg.VIDEO ? t.set(i, dg.Video) : t.set(i, dg.Audio);\n        }), {\n          users: Array.from(t.entries()).map(function (e) {\n            var _e193 = _slicedToArray(e, 2),\n              t = _e193[0],\n              i = _e193[1];\n            return {\n              stream_id: t.uid,\n              stream_type: i\n            };\n          })\n        };\n      }\n    }, {\n      key: \"withdrawRemoteTracks\",\n      value: function withdrawRemoteTracks(e) {\n        var _this246 = this;\n        e.forEach(function (e) {\n          var _e194 = _slicedToArray(e, 2),\n            t = _e194[0],\n            i = _e194[1].kind;\n          var r = _this246.remoteUserMap.get(t);\n          r && (r.delete(i), 0 === Array.from(r.entries()).length && _this246.remoteUserMap.delete(t));\n        });\n      }\n    }, {\n      key: \"updateBitrateLimit\",\n      value: function () {\n        var _updateBitrateLimit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee249(e) {\n          var t, i;\n          return _regeneratorRuntime().wrap(function _callee249$(_context250) {\n            while (1) switch (_context250.prev = _context250.next) {\n              case 0:\n                t = this.localTrackMap.get(Cg.LocalVideoTrack), i = this.localTrackMap.get(Cg.LocalVideoLowTrack);\n                _context250.t0 = t;\n                if (!_context250.t0) {\n                  _context250.next = 5;\n                  break;\n                }\n                _context250.next = 5;\n                return t.track.setBitrateLimit(e.uplink);\n              case 5:\n                _context250.t1 = i && e.low_stream_uplink;\n                if (!_context250.t1) {\n                  _context250.next = 9;\n                  break;\n                }\n                _context250.next = 9;\n                return i.track.setBitrateLimit({\n                  max_bitrate: e.low_stream_uplink.bitrate,\n                  min_bitrate: e.low_stream_uplink.bitrate || 0\n                });\n              case 9:\n              case \"end\":\n                return _context250.stop();\n            }\n          }, _callee249, this);\n        }));\n        function updateBitrateLimit(_x393) {\n          return _updateBitrateLimit.apply(this, arguments);\n        }\n        return updateBitrateLimit;\n      }()\n    }, {\n      key: \"isP2PDisconnected\",\n      value: function isP2PDisconnected() {\n        if (this.connection) {\n          return \"connected\" !== this.connection.peerConnectionState;\n        }\n        return !0;\n      }\n    }, {\n      key: \"mapPubResToRemoteConfig\",\n      value: function mapPubResToRemoteConfig(e, t) {\n        return e.map(function (e, i) {\n          var r;\n          var n = e.stream_type;\n          return null === (r = t.find(function (e) {\n            var t = e.stream_type;\n            return n === t;\n          })) || void 0 === r ? void 0 : r.attributes;\n        });\n      }\n    }, {\n      key: \"tryToUnmuteAudio\",\n      value: function () {\n        var _tryToUnmuteAudio = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee250(e) {\n          var i, t, r, _n63;\n          return _regeneratorRuntime().wrap(function _callee250$(_context251) {\n            while (1) switch (_context251.prev = _context251.next) {\n              case 0:\n                i = 0;\n              case 1:\n                if (!(i < e.length)) {\n                  _context251.next = 15;\n                  break;\n                }\n                if (!(e[i] instanceof aR)) {\n                  _context251.next = 12;\n                  break;\n                }\n                r = this.filterTobeUnmutedTracks(e[i]);\n                if (!(0 === r.length)) {\n                  _context251.next = 6;\n                  break;\n                }\n                return _context251.abrupt(\"continue\", 12);\n              case 6:\n                _context251.next = 8;\n                return null === (t = this.connection) || void 0 === t ? void 0 : t.unmuteLocal(r.map(function (e) {\n                  var _e195 = _slicedToArray(e, 2),\n                    t = _e195[1].id;\n                  return t;\n                }));\n              case 8:\n                _n63 = this.createUnmuteMessage(r);\n                _context251.next = 11;\n                return BR(this, Og.RequestUnmuteLocal, _n63);\n              case 11:\n                return _context251.abrupt(\"return\", void _context251.sent);\n              case 12:\n                i++;\n                _context251.next = 1;\n                break;\n              case 15:\n              case \"end\":\n                return _context251.stop();\n            }\n          }, _callee250, this);\n        }));\n        function tryToUnmuteAudio(_x394) {\n          return _tryToUnmuteAudio.apply(this, arguments);\n        }\n        return tryToUnmuteAudio;\n      }()\n    }, {\n      key: \"bindStatsUploaderEvents\",\n      value: function bindStatsUploaderEvents() {\n        var _this247 = this;\n        this.statsUploader.requestStats = function () {\n          return _this247.getStats();\n        }, this.statsUploader.requestLocalMedia = function () {\n          return Array.from(_this247.localTrackMap.entries());\n        }, this.statsUploader.requestRemoteMedia = function () {\n          return Array.from(_this247.remoteUserMap.entries());\n        }, this.statsUploader.requestVideoIsReady = function (e) {\n          var t;\n          return !(null === (t = _this247.connection) || void 0 === t || !t.getRemoteVideoIsReady(e));\n        }, this.statsUploader.requestUpload = function (e, t) {\n          return _this247.emit(Og.RequestUploadStats, e, t);\n        }, this.statsUploader.requestAllTracks = function () {\n          return _this247.getAllTracks();\n        };\n      }\n    }, {\n      key: \"unbindStatsUploaderEvents\",\n      value: function unbindStatsUploaderEvents() {\n        this.statsUploader.requestStats = void 0, this.statsUploader.requestLocalMedia = void 0, this.statsUploader.requestRemoteMedia = void 0, this.statsUploader.requestVideoIsReady = void 0;\n      }\n    }, {\n      key: \"requestReconnect\",\n      value: function () {\n        var _requestReconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee251() {\n          return _regeneratorRuntime().wrap(function _callee251$(_context252) {\n            while (1) switch (_context252.prev = _context252.next) {\n              case 0:\n                this.dtlsFailedCount += 1;\n                _context252.next = 3;\n                return LR(IE(this.dtlsFailedCount, RE));\n              case 3:\n                this.emit(Og.RequestReconnect);\n              case 4:\n              case \"end\":\n                return _context252.stop();\n            }\n          }, _callee251, this);\n        }));\n        function requestReconnect() {\n          return _requestReconnect.apply(this, arguments);\n        }\n        return requestReconnect;\n      }()\n    }, {\n      key: \"reconnectP2P\",\n      value: function () {\n        var _reconnectP2P = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee252() {\n          var e, t;\n          return _regeneratorRuntime().wrap(function _callee252$(_context253) {\n            while (1) switch (_context253.prev = _context253.next) {\n              case 0:\n                e = Array.from(this.localTrackMap.entries()), t = this.createGatewayUnpublishMessage(e);\n                Array.from(this.remoteUserMap.entries());\n                _context253.t0 = t.length > 0;\n                if (!_context253.t0) {\n                  _context253.next = 6;\n                  break;\n                }\n                _context253.next = 6;\n                return FR(this, Og.RequestUnpublishForReconnectPC, t);\n              case 6:\n                this.disconnectForReconnect();\n                this.emit(Og.RequestReconnectPC);\n              case 8:\n              case \"end\":\n                return _context253.stop();\n            }\n          }, _callee252, this);\n        }));\n        function reconnectP2P() {\n          return _reconnectP2P.apply(this, arguments);\n        }\n        return reconnectP2P;\n      }()\n    }, {\n      key: \"canPublishLowStream\",\n      value: function canPublishLowStream() {\n        return this.localTrackMap.has(Cg.LocalVideoTrack) || this.pendingLocalTracks.some(function (e) {\n          return e instanceof Ew;\n        });\n      }\n    }, {\n      key: \"throwIfTrackTypeNotMatch\",\n      value: function throwIfTrackTypeNotMatch(e) {\n        if (e.filter(function (e) {\n          return e instanceof Ew;\n        }).length > 1) throw new vE(TE.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);\n        if (e.filter(function (e) {\n          return e instanceof aR;\n        }).length > 1 && (e.some(function (e) {\n          return e instanceof aR && e._bypassWebAudio;\n        }) || !jg().webAudioMediaStreamDest)) throw new vE(TE.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");\n        var _iterator33 = _createForOfIteratorHelper(e),\n          _step33;\n        try {\n          for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n            var t = _step33.value;\n            if (t instanceof Ew && this.pendingLocalTracks.some(function (e) {\n              return e instanceof Ew;\n            })) throw new vE(TE.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);\n            if (t instanceof aR && this.pendingLocalTracks.some(function (e) {\n              return e instanceof aR;\n            }) && (!jg().webAudioMediaStreamDest || t._bypassWebAudio || this.pendingLocalTracks.some(function (e) {\n              return e instanceof aR && e._bypassWebAudio;\n            }))) throw new vE(TE.NOT_SUPPORTED, \"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode\");\n          }\n        } catch (err) {\n          _iterator33.e(err);\n        } finally {\n          _iterator33.f();\n        }\n      }\n    }, {\n      key: \"getLowVideoTrack\",\n      value: function getLowVideoTrack(e, t) {\n        var i = jg().supportDualStreamEncoding,\n          r = uL(uL({}, {\n            width: 160,\n            height: 120,\n            framerate: 15,\n            bitrate: 50\n          }), t);\n        var n;\n        n = i ? e._mediaStreamTrack.clone() : AP(e, r);\n        var o = MR(8, \"track-low-\"),\n          s = new Ew(n, uL(uL({}, i && {\n            scaleResolutionDownBy: bR(r, e)\n          }), {}, {\n            frameRate: r.framerate,\n            bitrateMax: r.bitrate,\n            bitrateMin: r.bitrate\n          }), void 0, void 0, o);\n        return s._hints.push(lg.LOW_STREAM), e.addListener(ug.NEED_CLOSE, function () {\n          s.close();\n        }), s;\n      }\n    }, {\n      key: \"globalLock\",\n      value: function () {\n        var _globalLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee253() {\n          return _regeneratorRuntime().wrap(function _callee253$(_context254) {\n            while (1) switch (_context254.prev = _context254.next) {\n              case 0:\n                return _context254.abrupt(\"return\", this.mutex.lock(\"From P2PChannel.globalLock\"));\n              case 1:\n              case \"end\":\n                return _context254.stop();\n            }\n          }, _callee253, this);\n        }));\n        function globalLock() {\n          return _globalLock.apply(this, arguments);\n        }\n        return globalLock;\n      }()\n    }, {\n      key: \"reportVideoFirstFrameDecoded\",\n      value: function reportVideoFirstFrameDecoded(e, t, i, r) {\n        var n;\n        var o = Array.from(sT(n = this.remoteUserMap).call(n)).find(function (t) {\n          return t._videoSSRC === e;\n        });\n        if (o) {\n          r || this.store.subscribe(o.uid, \"video\", void 0, void 0, void 0, void 0, Date.now());\n          var _n64 = this.store.keyMetrics,\n            _s40 = _n64.subscribe.find(function (e) {\n              return e.userId === o.uid && \"video\" === e.type;\n            });\n          IT.firstRemoteVideoDecode(this.store.sessionId, lm.FIRST_VIDEO_DECODE, hm.FIRST_VIDEO_DECODE, {\n            peer: o._uintid,\n            videowidth: t,\n            videoheight: i,\n            subscribeElapse: pR.measureFromSubscribeStart(this.store.clientId, e),\n            subscribeRequestid: e,\n            p2pid: this.store.p2pId,\n            apEnd: _n64.requestAPEnd || 0,\n            apStart: _n64.requestAPStart || 0,\n            joinGwEnd: _n64.joinGatewayEnd || 0,\n            joinGwStart: _n64.joinGatewayStart || 0,\n            pcEnd: _n64.peerConnectionEnd || 0,\n            pcStart: _n64.peerConnectionStart || 0,\n            subscriberEnd: (null == _s40 ? void 0 : _s40.subscribeEnd) || 0,\n            subscriberStart: (null == _s40 ? void 0 : _s40.subscribeStart) || 0,\n            videoAddNotify: (null == _s40 ? void 0 : _s40.streamAdded) || 0,\n            state: r ? 1 : 0\n          });\n        }\n      }\n    }, {\n      key: \"remoteMediaSsrcChanged\",\n      value: function () {\n        var _remoteMediaSsrcChanged = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee254(e, t, i) {\n          var r, n, o;\n          return _regeneratorRuntime().wrap(function _callee254$(_context255) {\n            while (1) switch (_context255.prev = _context255.next) {\n              case 0:\n                if (this.connection) {\n                  _context255.next = 2;\n                  break;\n                }\n                return _context255.abrupt(\"return\", !1);\n              case 2:\n                r = this.remoteUserMap.get(e);\n                if (r) {\n                  _context255.next = 5;\n                  break;\n                }\n                return _context255.abrupt(\"return\", !1);\n              case 5:\n                n = r.get(t);\n                if (n) {\n                  _context255.next = 8;\n                  break;\n                }\n                return _context255.abrupt(\"return\", !1);\n              case 8:\n                _context255.next = 10;\n                return this.connection.getRemoteSSRC(n);\n              case 10:\n                o = _context255.sent;\n                return _context255.abrupt(\"return\", void 0 !== o && o !== i);\n              case 12:\n              case \"end\":\n                return _context255.stop();\n            }\n          }, _callee254, this);\n        }));\n        function remoteMediaSsrcChanged(_x395, _x396, _x397) {\n          return _remoteMediaSsrcChanged.apply(this, arguments);\n        }\n        return remoteMediaSsrcChanged;\n      }()\n    }]);\n    return cL;\n  }(gE)).prototype, \"startP2PConnection\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"startP2PConnection\"), cL.prototype), ZS(cL.prototype, \"connect\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"connect\"), cL.prototype), ZS(cL.prototype, \"preConnect\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"preConnect\"), cL.prototype), ZS(cL.prototype, \"unpublish\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"unpublish\"), cL.prototype), ZS(cL.prototype, \"unpublishLowStream\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"unpublishLowStream\"), cL.prototype), ZS(cL.prototype, \"subscribe\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"subscribe\"), cL.prototype), ZS(cL.prototype, \"massSubscribe\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"massSubscribe\"), cL.prototype), ZS(cL.prototype, \"unsubscribe\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"unsubscribe\"), cL.prototype), ZS(cL.prototype, \"massUnsubscribe\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"massUnsubscribe\"), cL.prototype), ZS(cL.prototype, \"muteRemote\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"muteRemote\"), cL.prototype), ZS(cL.prototype, \"unmuteRemote\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"unmuteRemote\"), cL.prototype), ZS(cL.prototype, \"hasRemoteMediaWithLock\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"hasRemoteMediaWithLock\"), cL.prototype), ZS(cL.prototype, \"disconnectForReconnect\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"disconnectForReconnect\"), cL.prototype), ZS(cL.prototype, \"updateBitrateLimit\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"updateBitrateLimit\"), cL.prototype), ZS(cL.prototype, \"remoteMediaSsrcChanged\", [_L], Object.getOwnPropertyDescriptor(cL.prototype, \"remoteMediaSsrcChanged\"), cL.prototype), cL);\n  function _L(e, t, i) {\n    var r = e[t];\n    if (\"function\" != typeof r) throw new Error(\"Cannot use mutex on object property.\");\n    return i.value = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee255() {\n      var e,\n        i,\n        n,\n        o,\n        s,\n        _args256 = arguments;\n      return _regeneratorRuntime().wrap(function _callee255$(_context256) {\n        while (1) switch (_context256.prev = _context256.next) {\n          case 0:\n            e = this.mutex;\n            _context256.next = 3;\n            return e.lock(\"From P2PChannel.\".concat(t));\n          case 3:\n            i = _context256.sent;\n            _context256.prev = 4;\n            for (n = _args256.length, o = new Array(n), s = 0; s < n; s++) o[s] = _args256[s];\n            _context256.next = 8;\n            return r.apply(this, o);\n          case 8:\n            return _context256.abrupt(\"return\", _context256.sent);\n          case 9:\n            _context256.prev = 9;\n            i();\n            return _context256.finish(9);\n          case 12:\n          case \"end\":\n            return _context256.stop();\n        }\n      }, _callee255, this, [[4,, 9, 12]]);\n    })), i;\n  }\n  function EL(e) {\n    return \"Minified Redux error #\" + e + \"; visit https://redux.js.org/Errors?code=\" + e + \" for the full message or use the non-minified dev environment for full errors. \";\n  }\n  var fL,\n    mL = \"function\" == typeof Symbol && Symbol.observable || \"@@observable\",\n    gL = function gL() {\n      return Math.random().toString(36).substring(7).split(\"\").join(\".\");\n    },\n    SL = {\n      INIT: \"@@redux/INIT\" + gL(),\n      REPLACE: \"@@redux/REPLACE\" + gL(),\n      PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n        return \"@@redux/PROBE_UNKNOWN_ACTION\" + gL();\n      }\n    };\n  function TL(e) {\n    if (\"object\" != typeof e || null === e) return !1;\n    for (var t = e; null !== Object.getPrototypeOf(t);) t = Object.getPrototypeOf(t);\n    return Object.getPrototypeOf(e) === t;\n  }\n  function vL(e, t, i) {\n    var r;\n    if (\"function\" == typeof t && \"function\" == typeof i || \"function\" == typeof i && \"function\" == typeof arguments[3]) throw new Error(EL(0));\n    if (\"function\" == typeof t && void 0 === i && (i = t, t = void 0), void 0 !== i) {\n      if (\"function\" != typeof i) throw new Error(EL(1));\n      return i(vL)(e, t);\n    }\n    if (\"function\" != typeof e) throw new Error(EL(2));\n    var n = e,\n      o = t,\n      s = [],\n      a = s,\n      c = !1;\n    function d() {\n      a === s && (a = s.slice());\n    }\n    function u() {\n      if (c) throw new Error(EL(3));\n      return o;\n    }\n    function l(e) {\n      if (\"function\" != typeof e) throw new Error(EL(4));\n      if (c) throw new Error(EL(5));\n      var t = !0;\n      return d(), a.push(e), function () {\n        if (t) {\n          if (c) throw new Error(EL(6));\n          t = !1, d();\n          var i = a.indexOf(e);\n          a.splice(i, 1), s = null;\n        }\n      };\n    }\n    function h(e) {\n      if (!TL(e)) throw new Error(EL(7));\n      if (void 0 === e.type) throw new Error(EL(8));\n      if (c) throw new Error(EL(9));\n      try {\n        c = !0, o = n(o, e);\n      } finally {\n        c = !1;\n      }\n      for (var t = s = a, i = 0; i < t.length; i++) {\n        (0, t[i])();\n      }\n      return e;\n    }\n    function p(e) {\n      if (\"function\" != typeof e) throw new Error(EL(10));\n      n = e, h({\n        type: SL.REPLACE\n      });\n    }\n    function _() {\n      var e,\n        t = l;\n      return (e = {\n        subscribe: function subscribe(e) {\n          if (\"object\" != typeof e || null === e) throw new Error(EL(11));\n          function i() {\n            e.next && e.next(u());\n          }\n          return i(), {\n            unsubscribe: t(i)\n          };\n        }\n      })[mL] = function () {\n        return this;\n      }, e;\n    }\n    return h({\n      type: SL.INIT\n    }), (r = {\n      dispatch: h,\n      subscribe: l,\n      getState: u,\n      replaceReducer: p\n    })[mL] = _, r;\n  }\n  function RL(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function IL(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? RL(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : RL(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  !function (e) {\n    e.SET_SESSION_ID = \"SET_SESSION_ID\", e.SET_P2P_ID = \"SET_P2P_id\", e.SET_DC_ID = \"SET_DC_id\", e.SET_UID = \"SET_UID\", e.SET_PUB_ID = \"SET_PUB_ID\", e.SET_CLOUD_PROXY_SERVER_MODE = \"SET_CLOUD_PROXY_SERVER_MODE\", e.KEY_METRIC_CLIENT_CREATED = \"KEY_METRIC_CLIENT_CREATED\", e.KEY_METRIC_JOIN_START = \"KEY_METRIC_JOIN_START\", e.AVOID_JOIN_START = \"AVOID_JOIN_START\", e.KEY_METRIC_JOIN_END = \"KEY_METRIC_JOIN_END\", e.KEY_METRIC_REQUEST_AP_START = \"KEY_METRIC_REQUEST_AP_START\", e.KEY_METRIC_REQUEST_AP_END = \"KEY_METRIC_REQUEST_AP_END\", e.KEY_METRIC_JOIN_GATEWAY_START = \"KEY_METRIC_JOIN_GATEWAY_START\", e.KEY_METRIC_JOIN_GATEWAY_END = \"KEY_METRIC_JOIN_GATEWAY_END\", e.KEY_METRIC_PEER_CONNECTION_START = \"KEY_METRIC_PEER_CONNECTION_START\", e.KEY_METRIC_PEER_CONNECTION_END = \"KEY_METRIC_PEER_CONNECTION_END\", e.KEY_METRIC_ICE_CONNECTION_END = \"KEY_METRIC_ICE_CONNECTION_END\", e.KEY_METRIC_SIGNAL_CHANNEL_OPEN = \"KEY_METRIC_SIGNAL_CHANNEL_OPEN\", e.KEY_METRIC_PUBLISH = \"KEY_METRIC_PUBLISH\", e.KEY_METRIC_SUBSCRIBE = \"KEY_METRIC_SUBSCRIBE\", e.RECORD_JOIN_CHANNEL_SERVICE = \"RECORD_JOIN_CHANNEL_SERVICE\", e.RESET_JOIN_CHANNEL_SERVICE_RECORDS = \"RESET_JOIN_CHANNEL_SERVICE_RECORDS\", e.RESET_KEY_METRICS = \"RESET_KEY_METRICS\";\n  }(fL || (fL = {}));\n  var yL = /*#__PURE__*/function () {\n    function yL(e, t, i, r) {\n      _classCallCheck(this, yL);\n      mp(this, \"store\", void 0), mp(this, \"reducer\", void 0);\n      var n = {\n        codec: e,\n        audioCodec: t,\n        mode: i,\n        clientId: r,\n        sessionId: null,\n        p2pId: 0,\n        dcId: 0,\n        pubId: 0,\n        subId: 0,\n        avoidJoinStart: 0,\n        keyMetrics: {\n          publish: [],\n          subscribe: []\n        },\n        joinChannelServiceRecords: [],\n        cloudProxyServerMode: \"disabled\"\n      };\n      this.reducer = function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : n,\n          t = arguments.length > 1 ? arguments[1] : void 0;\n        switch (t.type) {\n          case fL.SET_SESSION_ID:\n            return IL(IL({}, e), {}, {\n              sessionId: t.sessionId\n            });\n          case fL.SET_P2P_ID:\n            return IL(IL({}, e), {}, {\n              p2pId: t.p2pId\n            });\n          case fL.SET_UID:\n            return IL(IL({}, e), {}, {\n              uid: t.uid\n            });\n          case fL.SET_PUB_ID:\n            return IL(IL({}, e), {}, {\n              pubId: t.pubId\n            });\n          case fL.KEY_METRIC_CLIENT_CREATED:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                clientCreated: t.metric\n              })\n            });\n          case fL.KEY_METRIC_JOIN_START:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                joinStart: t.metric\n              })\n            });\n          case fL.AVOID_JOIN_START:\n            return IL(IL({}, e), {}, {\n              avoidJoinStart: t.avoidJoinStart\n            });\n          case fL.KEY_METRIC_JOIN_END:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                joinEnd: t.metric\n              })\n            });\n          case fL.KEY_METRIC_REQUEST_AP_START:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                requestAPStart: t.metric\n              })\n            });\n          case fL.KEY_METRIC_REQUEST_AP_END:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                requestAPEnd: t.metric\n              })\n            });\n          case fL.KEY_METRIC_JOIN_GATEWAY_START:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                joinGatewayStart: t.metric\n              })\n            });\n          case fL.KEY_METRIC_JOIN_GATEWAY_END:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                joinGatewayEnd: t.metric\n              })\n            });\n          case fL.KEY_METRIC_PEER_CONNECTION_START:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                peerConnectionStart: t.metric\n              })\n            });\n          case fL.KEY_METRIC_PEER_CONNECTION_END:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                peerConnectionEnd: t.metric\n              })\n            });\n          case fL.KEY_METRIC_SIGNAL_CHANNEL_OPEN:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                signalChannelOpen: t.metric\n              })\n            });\n          case fL.KEY_METRIC_ICE_CONNECTION_END:\n            return IL(IL({}, e), {}, {\n              keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                iceConnectionEnd: t.metric\n              })\n            });\n          case fL.KEY_METRIC_PUBLISH:\n            {\n              var _i111 = e.keyMetrics.publish,\n                _r52 = _i111.findIndex(function (e) {\n                  return e.trackId === t.metric.trackId;\n                });\n              return -1 !== _r52 ? (_i111[_r52] = IL(IL({}, _i111[_r52]), t.metric), IL(IL({}, e), {}, {\n                keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                  publish: _toConsumableArray(_i111)\n                })\n              })) : IL(IL({}, e), {}, {\n                keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                  publish: [].concat(_toConsumableArray(e.keyMetrics.publish), [t.metric])\n                })\n              });\n            }\n          case fL.KEY_METRIC_SUBSCRIBE:\n            {\n              var _i112 = e.keyMetrics.subscribe,\n                _r53 = _i112.findIndex(function (e) {\n                  return e.userId === t.metric.userId && e.type === t.metric.type;\n                });\n              return -1 !== _r53 ? (_i112[_r53] = IL(IL({}, _i112[_r53]), t.metric), IL(IL({}, e), {}, {\n                keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                  subscribe: _toConsumableArray(_i112)\n                })\n              })) : IL(IL({}, e), {}, {\n                keyMetrics: IL(IL({}, e.keyMetrics), {}, {\n                  subscribe: [].concat(_toConsumableArray(e.keyMetrics.subscribe), [t.metric])\n                })\n              });\n            }\n          case fL.SET_CLOUD_PROXY_SERVER_MODE:\n            return e.cloudProxyServerMode = t.mode, e;\n          case fL.RECORD_JOIN_CHANNEL_SERVICE:\n            return \"number\" != typeof t.index ? e.joinChannelServiceRecords = [].concat(_toConsumableArray(e.joinChannelServiceRecords), [t.record]) : (e.joinChannelServiceRecords[t.index] = IL(IL({}, e.joinChannelServiceRecords[t.index]), t.record), e.joinChannelServiceRecords = _toConsumableArray(e.joinChannelServiceRecords)), e;\n          case fL.RESET_JOIN_CHANNEL_SERVICE_RECORDS:\n            return e.joinChannelServiceRecords = [], e;\n          case fL.RESET_KEY_METRICS:\n            return e.keyMetrics = {\n              publish: [],\n              subscribe: []\n            }, e;\n          default:\n            return e;\n        }\n      }, this.store = vL(this.reducer);\n    }\n    _createClass(yL, [{\n      key: \"clientCreated\",\n      value: function clientCreated() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_CLIENT_CREATED,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"joinStart\",\n      value: function joinStart() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_JOIN_START,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"joinEnd\",\n      value: function joinEnd() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_JOIN_END,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"requestAPStart\",\n      value: function requestAPStart() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_REQUEST_AP_START,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"requestAPEnd\",\n      value: function requestAPEnd() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_REQUEST_AP_END,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"joinGatewayStart\",\n      value: function joinGatewayStart() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_JOIN_GATEWAY_START,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"joinGatewayEnd\",\n      value: function joinGatewayEnd() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_JOIN_GATEWAY_END,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"peerConnectionStart\",\n      value: function peerConnectionStart() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_PEER_CONNECTION_START,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"peerConnectionEnd\",\n      value: function peerConnectionEnd() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_PEER_CONNECTION_END,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"signalChannelOpen\",\n      value: function signalChannelOpen() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_SIGNAL_CHANNEL_OPEN,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"iceConnectionEnd\",\n      value: function iceConnectionEnd() {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_ICE_CONNECTION_END,\n          metric: Date.now()\n        });\n      }\n    }, {\n      key: \"publish\",\n      value: function publish(e, t, i, r) {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_PUBLISH,\n          metric: IL(IL({\n            trackId: e,\n            type: t\n          }, i && {\n            publishStart: i\n          }), r && {\n            publishEnd: r\n          })\n        });\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(e, t, i, r, n, o, s) {\n        this.store.dispatch({\n          type: fL.KEY_METRIC_SUBSCRIBE,\n          metric: IL(IL(IL(IL(IL({\n            userId: e,\n            type: t\n          }, i && {\n            subscribeStart: i\n          }), r && {\n            subscribeEnd: r\n          }), n && {\n            firstFrame: n\n          }), o && {\n            streamAdded: o\n          }), s && {\n            firstDecoded: s\n          })\n        });\n      }\n    }, {\n      key: \"massSubscribe\",\n      value: function massSubscribe(e, t, i, r) {\n        var _this248 = this;\n        e.forEach(function (e) {\n          _this248.store.dispatch({\n            type: fL.KEY_METRIC_SUBSCRIBE,\n            metric: IL(IL(IL({\n              userId: e.userId,\n              type: e.type\n            }, t && {\n              subscribeStart: t\n            }), i && {\n              subscribeEnd: i\n            }), r && {\n              firstFrame: r\n            })\n          });\n        });\n      }\n    }, {\n      key: \"recordJoinChannelService\",\n      value: function recordJoinChannelService(e, t) {\n        \"gateway\" === e.service && Array.isArray(e.urls) && (e.urls = e.urls.map(function (e) {\n          return e.replace(/(\\d+)-\\d+-\\d+-(\\d+)/, \"$1-*-*-$2\");\n        }));\n        try {\n          return \"number\" != typeof t ? (this.store.dispatch({\n            type: fL.RECORD_JOIN_CHANNEL_SERVICE,\n            record: IL(IL({}, e), {}, {\n              sessionId: this.sessionId,\n              cloudProxyMode: this.cloudProxyServerMode,\n              uid: this.uid\n            })\n          }), this.store.getState().joinChannelServiceRecords.length - 1) : (t < 0 || t >= this.store.getState().joinChannelServiceRecords.length || this.store.dispatch({\n            type: fL.RECORD_JOIN_CHANNEL_SERVICE,\n            record: e,\n            index: t\n          }), t);\n        } catch (e) {\n          return 0;\n        }\n      }\n    }, {\n      key: \"resetJoinChannelServiceRecords\",\n      value: function resetJoinChannelServiceRecords() {\n        this.store.dispatch({\n          type: fL.RESET_JOIN_CHANNEL_SERVICE_RECORDS\n        });\n      }\n    }, {\n      key: \"resetKeyMetrics\",\n      value: function resetKeyMetrics() {\n        this.store.dispatch({\n          type: fL.RESET_KEY_METRICS\n        });\n      }\n    }, {\n      key: \"sessionId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.SET_SESSION_ID,\n          sessionId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().sessionId;\n      }\n    }, {\n      key: \"codec\",\n      get: function get() {\n        return this.store.getState().codec;\n      }\n    }, {\n      key: \"audioCodec\",\n      get: function get() {\n        return this.store.getState().audioCodec;\n      }\n    }, {\n      key: \"clientId\",\n      get: function get() {\n        return this.store.getState().clientId;\n      }\n    }, {\n      key: \"p2pId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.SET_P2P_ID,\n          p2pId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().p2pId;\n      }\n    }, {\n      key: \"dcId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.SET_DC_ID,\n          dcId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().dcId;\n      }\n    }, {\n      key: \"uid\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.SET_UID,\n          uid: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().uid;\n      }\n    }, {\n      key: \"pubId\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.SET_PUB_ID,\n          pubId: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().pubId;\n      }\n    }, {\n      key: \"cloudProxyServerMode\",\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.SET_CLOUD_PROXY_SERVER_MODE,\n          mode: e\n        });\n      },\n      get: function get() {\n        return this.store.getState().cloudProxyServerMode;\n      }\n    }, {\n      key: \"keyMetrics\",\n      get: function get() {\n        return this.store.getState().keyMetrics;\n      }\n    }, {\n      key: \"joinChannelServiceRecords\",\n      get: function get() {\n        try {\n          return this.store.getState().joinChannelServiceRecords;\n        } catch (e) {\n          return [];\n        }\n      }\n    }, {\n      key: \"avoidJoinStart\",\n      get: function get() {\n        return this.store.getState().avoidJoinStart;\n      },\n      set: function set(e) {\n        this.store.dispatch({\n          type: fL.AVOID_JOIN_START,\n          avoidJoinStart: e\n        });\n      }\n    }]);\n    return yL;\n  }();\n  var CL;\n  var AL = function AL() {\n      return \"HTTPS\" === (CL || CL || (CL = (window.location.protocol.split(\":\")[0] || \"\").toUpperCase(), CL));\n    },\n    OL = function OL() {\n      return void 0 !== window.isSecureContext;\n    };\n  function bL(e) {\n    var t = jL();\n    return function (e, t) {\n      var i = e.appId;\n      void 0 !== i && ($L(t, 10), YL(t, i));\n      var r = e.cid;\n      void 0 !== r && ($L(t, 16), $L(t, r));\n      var n = e.cname;\n      void 0 !== n && ($L(t, 26), YL(t, n));\n      var o = e.deviceId;\n      void 0 !== o && ($L(t, 34), YL(t, o));\n      var s = e.elapse;\n      void 0 !== s && ($L(t, 40), ek(t, s));\n      var a = e.fileSize;\n      void 0 !== a && ($L(t, 48), ek(t, xL(a)));\n      var c = e.height;\n      void 0 !== c && ($L(t, 56), ek(t, xL(c)));\n      var d = e.jpg;\n      void 0 !== d && ($L(t, 66), $L(t, d.length), function (e, t) {\n        var i = WL(e, t.length);\n        e.bytes.set(t, i);\n      }(t, d));\n      var u = e.networkType;\n      void 0 !== u && ($L(t, 72), ek(t, xL(u)));\n      var l = e.osType;\n      void 0 !== l && ($L(t, 80), ek(t, xL(l)));\n      var h = e.requestId;\n      void 0 !== h && ($L(t, 90), YL(t, h));\n      var p = e.sdkVersion;\n      void 0 !== p && ($L(t, 98), YL(t, p));\n      var _ = e.sequence;\n      void 0 !== _ && ($L(t, 104), ek(t, xL(_)));\n      var E = e.sid;\n      void 0 !== E && ($L(t, 114), YL(t, E));\n      var f = e.timestamp;\n      void 0 !== f && ($L(t, 120), ek(t, f));\n      var m = e.uid;\n      void 0 !== m && ($L(t, 128), $L(t, m));\n      var g = e.vid;\n      void 0 !== g && ($L(t, 136), $L(t, g));\n      var S = e.width;\n      void 0 !== S && ($L(t, 144), ek(t, xL(S)));\n      var T = e.service;\n      void 0 !== T && ($L(t, 152), $L(t, T));\n      var v = e.callbackData;\n      void 0 !== v && ($L(t, 162), YL(t, v));\n      var R = e.jpgEncryption;\n      void 0 !== R && ($L(t, 168), $L(t, R));\n      var I = e.requestType;\n      void 0 !== I && ($L(t, 176), $L(t, I));\n      var y = e.scorePorn;\n      void 0 !== y && ($L(t, 185), QL(t, y));\n      var C = e.scoreSexy;\n      void 0 !== C && ($L(t, 193), QL(t, C));\n      var A = e.scoreNeutral;\n      void 0 !== A && ($L(t, 201), QL(t, A));\n      var O = e.scene;\n      void 0 !== O && ($L(t, 208), $L(t, O));\n      var b = e.ossFilePrefix;\n      void 0 !== b && ($L(t, 218), YL(t, b));\n      var w = e.serviceVendor;\n      if (void 0 !== w) {\n        var _iterator34 = _createForOfIteratorHelper(w),\n          _step34;\n        try {\n          for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n            var _e196 = _step34.value;\n            $L(t, 226);\n            var _i113 = jL();\n            DL(_e196, _i113), $L(t, _i113.limit), qL(t, _i113), FL(_i113);\n          }\n        } catch (err) {\n          _iterator34.e(err);\n        } finally {\n          _iterator34.f();\n        }\n      }\n    }(e, t), function (e) {\n      var t = e.bytes,\n        i = e.limit;\n      return t.length === i ? t : t.subarray(0, i);\n    }(t);\n  }\n  function wL(e) {\n    return function (e) {\n      var t = {};\n      e: for (; !GL(e);) {\n        var i = ZL(e);\n        switch (i >>> 3) {\n          case 0:\n            break e;\n          case 1:\n            t.code = ZL(e);\n            break;\n          case 2:\n            t.msg = KL(e, ZL(e));\n            break;\n          case 3:\n            {\n              var _i114 = PL(e);\n              t.data = NL(e), e.limit = _i114;\n              break;\n            }\n          default:\n            LL(e, 7 & i);\n        }\n      }\n      return t;\n    }({\n      bytes: t = e,\n      offset: 0,\n      limit: t.length\n    });\n    var t;\n  }\n  function NL(e) {\n    var t = {};\n    e: for (; !GL(e);) {\n      var i = ZL(e);\n      switch (i >>> 3) {\n        case 0:\n          break e;\n        case 1:\n          t.requestId = KL(e, ZL(e));\n          break;\n        case 2:\n          t.requestType = ZL(e) >>> 0;\n          break;\n        case 3:\n          t.scorePorn = zL(e);\n          break;\n        case 4:\n          t.scoreSexy = zL(e);\n          break;\n        case 5:\n          t.scoreNeutral = zL(e);\n          break;\n        case 6:\n          t.requestScene = ZL(e) >>> 0;\n          break;\n        case 7:\n          t.scene = ZL(e) >>> 0;\n          break;\n        default:\n          LL(e, 7 & i);\n      }\n    }\n    return t;\n  }\n  function DL(e, t) {\n    var i = e.service;\n    void 0 !== i && ($L(t, 8), $L(t, i));\n    var r = e.vendor;\n    void 0 !== r && ($L(t, 16), $L(t, r));\n    var n = e.token;\n    void 0 !== n && ($L(t, 26), YL(t, n));\n    var o = e.callbackUrl;\n    void 0 !== o && ($L(t, 34), YL(t, o));\n  }\n  function PL(e) {\n    var t = ZL(e),\n      i = e.limit;\n    return e.limit = e.offset + t, i;\n  }\n  function LL(e, t) {\n    switch (t) {\n      case 0:\n        for (; 128 & JL(e););\n        break;\n      case 2:\n        BL(e, ZL(e));\n        break;\n      case 5:\n        BL(e, 4);\n        break;\n      case 1:\n        BL(e, 8);\n        break;\n      default:\n        throw new Error(\"Unimplemented type: \" + t);\n    }\n  }\n  var kL = new Float32Array(1);\n  new Uint8Array(kL.buffer);\n  var ML = new Float64Array(1),\n    UL = new Uint8Array(ML.buffer);\n  function xL(e) {\n    return {\n      low: e |= 0,\n      high: e >> 31,\n      unsigned: e >= 0\n    };\n  }\n  var VL = [];\n  function jL() {\n    var e = VL.pop();\n    return e ? (e.offset = e.limit = 0, e) : {\n      bytes: new Uint8Array(64),\n      offset: 0,\n      limit: 0\n    };\n  }\n  function FL(e) {\n    VL.push(e);\n  }\n  function BL(e, t) {\n    if (e.offset + t > e.limit) throw new Error(\"Skip past limit\");\n    e.offset += t;\n  }\n  function GL(e) {\n    return e.offset >= e.limit;\n  }\n  function WL(e, t) {\n    var i = e.bytes,\n      r = e.offset,\n      n = e.limit,\n      o = r + t;\n    if (o > i.length) {\n      var _t187 = new Uint8Array(2 * o);\n      _t187.set(i), e.bytes = _t187;\n    }\n    return e.offset = o, o > n && (e.limit = o), r;\n  }\n  function HL(e, t) {\n    var i = e.offset;\n    if (i + t > e.limit) throw new Error(\"Read past limit\");\n    return e.offset += t, i;\n  }\n  function KL(e, t) {\n    var i = HL(e, t),\n      r = String.fromCharCode,\n      n = e.bytes,\n      o = \"ï¿½\",\n      s = \"\";\n    for (var _e197 = 0; _e197 < t; _e197++) {\n      var _a24 = void 0,\n        c = void 0,\n        _d15 = void 0,\n        _u13 = void 0,\n        _l8 = n[_e197 + i];\n      0 == (128 & _l8) ? s += r(_l8) : 192 == (224 & _l8) ? _e197 + 1 >= t ? s += o : (_a24 = n[_e197 + i + 1], 128 != (192 & _a24) ? s += o : (_u13 = (31 & _l8) << 6 | 63 & _a24, _u13 < 128 ? s += o : (s += r(_u13), _e197++))) : 224 == (240 & _l8) ? _e197 + 2 >= t ? s += o : (_a24 = n[_e197 + i + 1], c = n[_e197 + i + 2], 32896 != (49344 & (_a24 | c << 8)) ? s += o : (_u13 = (15 & _l8) << 12 | (63 & _a24) << 6 | 63 & c, _u13 < 2048 || _u13 >= 55296 && _u13 <= 57343 ? s += o : (s += r(_u13), _e197 += 2))) : 240 == (248 & _l8) ? _e197 + 3 >= t ? s += o : (_a24 = n[_e197 + i + 1], c = n[_e197 + i + 2], _d15 = n[_e197 + i + 3], 8421504 != (12632256 & (_a24 | c << 8 | _d15 << 16)) ? s += o : (_u13 = (7 & _l8) << 18 | (63 & _a24) << 12 | (63 & c) << 6 | 63 & _d15, _u13 < 65536 || _u13 > 1114111 ? s += o : (_u13 -= 65536, s += r(55296 + (_u13 >> 10), 56320 + (1023 & _u13)), _e197 += 3))) : s += o;\n    }\n    return s;\n  }\n  function YL(e, t) {\n    var i = t.length,\n      r = 0;\n    for (var _e198 = 0; _e198 < i; _e198++) {\n      var _n65 = t.charCodeAt(_e198);\n      _n65 >= 55296 && _n65 <= 56319 && _e198 + 1 < i && (_n65 = (_n65 << 10) + t.charCodeAt(++_e198) - 56613888), r += _n65 < 128 ? 1 : _n65 < 2048 ? 2 : _n65 < 65536 ? 3 : 4;\n    }\n    $L(e, r);\n    var n = WL(e, r),\n      o = e.bytes;\n    for (var _e199 = 0; _e199 < i; _e199++) {\n      var _r54 = t.charCodeAt(_e199);\n      _r54 >= 55296 && _r54 <= 56319 && _e199 + 1 < i && (_r54 = (_r54 << 10) + t.charCodeAt(++_e199) - 56613888), _r54 < 128 ? o[n++] = _r54 : (_r54 < 2048 ? o[n++] = _r54 >> 6 & 31 | 192 : (_r54 < 65536 ? o[n++] = _r54 >> 12 & 15 | 224 : (o[n++] = _r54 >> 18 & 7 | 240, o[n++] = _r54 >> 12 & 63 | 128), o[n++] = _r54 >> 6 & 63 | 128), o[n++] = 63 & _r54 | 128);\n    }\n  }\n  function qL(e, t) {\n    var i = WL(e, t.limit),\n      r = e.bytes,\n      n = t.bytes;\n    for (var _e200 = 0, o = t.limit; _e200 < o; _e200++) r[_e200 + i] = n[_e200];\n  }\n  function JL(e) {\n    return e.bytes[HL(e, 1)];\n  }\n  function XL(e, t) {\n    var i = WL(e, 1);\n    e.bytes[i] = t;\n  }\n  function zL(e) {\n    var t = HL(e, 8),\n      i = e.bytes;\n    return UL[0] = i[t++], UL[1] = i[t++], UL[2] = i[t++], UL[3] = i[t++], UL[4] = i[t++], UL[5] = i[t++], UL[6] = i[t++], UL[7] = i[t++], ML[0];\n  }\n  function QL(e, t) {\n    var i = WL(e, 8),\n      r = e.bytes;\n    ML[0] = t, r[i++] = UL[0], r[i++] = UL[1], r[i++] = UL[2], r[i++] = UL[3], r[i++] = UL[4], r[i++] = UL[5], r[i++] = UL[6], r[i++] = UL[7];\n  }\n  function ZL(e) {\n    var t,\n      i = 0,\n      r = 0;\n    do {\n      t = JL(e), i < 32 && (r |= (127 & t) << i), i += 7;\n    } while (128 & t);\n    return r;\n  }\n  function $L(e, t) {\n    for (t >>>= 0; t >= 128;) XL(e, 127 & t | 128), t >>>= 7;\n    XL(e, t);\n  }\n  function ek(e, t) {\n    var i = t.low >>> 0,\n      r = (t.low >>> 28 | t.high << 4) >>> 0,\n      n = t.high >>> 24,\n      o = 0 === n ? 0 === r ? i < 16384 ? i < 128 ? 1 : 2 : i < 1 << 21 ? 3 : 4 : r < 16384 ? r < 128 ? 5 : 6 : r < 1 << 21 ? 7 : 8 : n < 128 ? 9 : 10,\n      s = WL(e, o),\n      a = e.bytes;\n    switch (o) {\n      case 10:\n        a[s + 9] = n >>> 7 & 1;\n      case 9:\n        a[s + 8] = 9 !== o ? 128 | n : 127 & n;\n      case 8:\n        a[s + 7] = 8 !== o ? r >>> 21 | 128 : r >>> 21 & 127;\n      case 7:\n        a[s + 6] = 7 !== o ? r >>> 14 | 128 : r >>> 14 & 127;\n      case 6:\n        a[s + 5] = 6 !== o ? r >>> 7 | 128 : r >>> 7 & 127;\n      case 5:\n        a[s + 4] = 5 !== o ? 128 | r : 127 & r;\n      case 4:\n        a[s + 3] = 4 !== o ? i >>> 21 | 128 : i >>> 21 & 127;\n      case 3:\n        a[s + 2] = 3 !== o ? i >>> 14 | 128 : i >>> 14 & 127;\n      case 2:\n        a[s + 1] = 2 !== o ? i >>> 7 | 128 : i >>> 7 & 127;\n      case 1:\n        a[s] = 1 !== o ? 128 | i : 127 & i;\n    }\n  }\n  var tk = {};\n  Object.defineProperty(tk, \"__esModule\", {\n    value: !0\n  });\n  var ik = function () {\n      function e() {\n        this._dataLength = 0, this._bufferLength = 0, this._state = new Int32Array(4), this._buffer = new ArrayBuffer(68), this._buffer8 = new Uint8Array(this._buffer, 0, 68), this._buffer32 = new Uint32Array(this._buffer, 0, 17), this.start();\n      }\n      return e.hashStr = function (e, t) {\n        return void 0 === t && (t = !1), this.onePassHasher.start().appendStr(e).end(t);\n      }, e.hashAsciiStr = function (e, t) {\n        return void 0 === t && (t = !1), this.onePassHasher.start().appendAsciiStr(e).end(t);\n      }, e._hex = function (t) {\n        var i,\n          r,\n          n,\n          o,\n          s = e.hexChars,\n          a = e.hexOut;\n        for (o = 0; o < 4; o += 1) for (r = 8 * o, i = t[o], n = 0; n < 8; n += 2) a[r + 1 + n] = s.charAt(15 & i), i >>>= 4, a[r + 0 + n] = s.charAt(15 & i), i >>>= 4;\n        return a.join(\"\");\n      }, e._md5cycle = function (e, t) {\n        var i = e[0],\n          r = e[1],\n          n = e[2],\n          o = e[3];\n        r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & n | ~r & o) + t[0] - 680876936 | 0) << 7 | i >>> 25) + r | 0) & r | ~i & n) + t[1] - 389564586 | 0) << 12 | o >>> 20) + i | 0) & i | ~o & r) + t[2] + 606105819 | 0) << 17 | n >>> 15) + o | 0) & o | ~n & i) + t[3] - 1044525330 | 0) << 22 | r >>> 10) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & n | ~r & o) + t[4] - 176418897 | 0) << 7 | i >>> 25) + r | 0) & r | ~i & n) + t[5] + 1200080426 | 0) << 12 | o >>> 20) + i | 0) & i | ~o & r) + t[6] - 1473231341 | 0) << 17 | n >>> 15) + o | 0) & o | ~n & i) + t[7] - 45705983 | 0) << 22 | r >>> 10) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & n | ~r & o) + t[8] + 1770035416 | 0) << 7 | i >>> 25) + r | 0) & r | ~i & n) + t[9] - 1958414417 | 0) << 12 | o >>> 20) + i | 0) & i | ~o & r) + t[10] - 42063 | 0) << 17 | n >>> 15) + o | 0) & o | ~n & i) + t[11] - 1990404162 | 0) << 22 | r >>> 10) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & n | ~r & o) + t[12] + 1804603682 | 0) << 7 | i >>> 25) + r | 0) & r | ~i & n) + t[13] - 40341101 | 0) << 12 | o >>> 20) + i | 0) & i | ~o & r) + t[14] - 1502002290 | 0) << 17 | n >>> 15) + o | 0) & o | ~n & i) + t[15] + 1236535329 | 0) << 22 | r >>> 10) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & o | n & ~o) + t[1] - 165796510 | 0) << 5 | i >>> 27) + r | 0) & n | r & ~n) + t[6] - 1069501632 | 0) << 9 | o >>> 23) + i | 0) & r | i & ~r) + t[11] + 643717713 | 0) << 14 | n >>> 18) + o | 0) & i | o & ~i) + t[0] - 373897302 | 0) << 20 | r >>> 12) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & o | n & ~o) + t[5] - 701558691 | 0) << 5 | i >>> 27) + r | 0) & n | r & ~n) + t[10] + 38016083 | 0) << 9 | o >>> 23) + i | 0) & r | i & ~r) + t[15] - 660478335 | 0) << 14 | n >>> 18) + o | 0) & i | o & ~i) + t[4] - 405537848 | 0) << 20 | r >>> 12) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & o | n & ~o) + t[9] + 568446438 | 0) << 5 | i >>> 27) + r | 0) & n | r & ~n) + t[14] - 1019803690 | 0) << 9 | o >>> 23) + i | 0) & r | i & ~r) + t[3] - 187363961 | 0) << 14 | n >>> 18) + o | 0) & i | o & ~i) + t[8] + 1163531501 | 0) << 20 | r >>> 12) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r & o | n & ~o) + t[13] - 1444681467 | 0) << 5 | i >>> 27) + r | 0) & n | r & ~n) + t[2] - 51403784 | 0) << 9 | o >>> 23) + i | 0) & r | i & ~r) + t[7] + 1735328473 | 0) << 14 | n >>> 18) + o | 0) & i | o & ~i) + t[12] - 1926607734 | 0) << 20 | r >>> 12) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r ^ n ^ o) + t[5] - 378558 | 0) << 4 | i >>> 28) + r | 0) ^ r ^ n) + t[8] - 2022574463 | 0) << 11 | o >>> 21) + i | 0) ^ i ^ r) + t[11] + 1839030562 | 0) << 16 | n >>> 16) + o | 0) ^ o ^ i) + t[14] - 35309556 | 0) << 23 | r >>> 9) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r ^ n ^ o) + t[1] - 1530992060 | 0) << 4 | i >>> 28) + r | 0) ^ r ^ n) + t[4] + 1272893353 | 0) << 11 | o >>> 21) + i | 0) ^ i ^ r) + t[7] - 155497632 | 0) << 16 | n >>> 16) + o | 0) ^ o ^ i) + t[10] - 1094730640 | 0) << 23 | r >>> 9) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r ^ n ^ o) + t[13] + 681279174 | 0) << 4 | i >>> 28) + r | 0) ^ r ^ n) + t[0] - 358537222 | 0) << 11 | o >>> 21) + i | 0) ^ i ^ r) + t[3] - 722521979 | 0) << 16 | n >>> 16) + o | 0) ^ o ^ i) + t[6] + 76029189 | 0) << 23 | r >>> 9) + n | 0, r = ((r += ((n = ((n += ((o = ((o += ((i = ((i += (r ^ n ^ o) + t[9] - 640364487 | 0) << 4 | i >>> 28) + r | 0) ^ r ^ n) + t[12] - 421815835 | 0) << 11 | o >>> 21) + i | 0) ^ i ^ r) + t[15] + 530742520 | 0) << 16 | n >>> 16) + o | 0) ^ o ^ i) + t[2] - 995338651 | 0) << 23 | r >>> 9) + n | 0, r = ((r += ((o = ((o += (r ^ ((i = ((i += (n ^ (r | ~o)) + t[0] - 198630844 | 0) << 6 | i >>> 26) + r | 0) | ~n)) + t[7] + 1126891415 | 0) << 10 | o >>> 22) + i | 0) ^ ((n = ((n += (i ^ (o | ~r)) + t[14] - 1416354905 | 0) << 15 | n >>> 17) + o | 0) | ~i)) + t[5] - 57434055 | 0) << 21 | r >>> 11) + n | 0, r = ((r += ((o = ((o += (r ^ ((i = ((i += (n ^ (r | ~o)) + t[12] + 1700485571 | 0) << 6 | i >>> 26) + r | 0) | ~n)) + t[3] - 1894986606 | 0) << 10 | o >>> 22) + i | 0) ^ ((n = ((n += (i ^ (o | ~r)) + t[10] - 1051523 | 0) << 15 | n >>> 17) + o | 0) | ~i)) + t[1] - 2054922799 | 0) << 21 | r >>> 11) + n | 0, r = ((r += ((o = ((o += (r ^ ((i = ((i += (n ^ (r | ~o)) + t[8] + 1873313359 | 0) << 6 | i >>> 26) + r | 0) | ~n)) + t[15] - 30611744 | 0) << 10 | o >>> 22) + i | 0) ^ ((n = ((n += (i ^ (o | ~r)) + t[6] - 1560198380 | 0) << 15 | n >>> 17) + o | 0) | ~i)) + t[13] + 1309151649 | 0) << 21 | r >>> 11) + n | 0, r = ((r += ((o = ((o += (r ^ ((i = ((i += (n ^ (r | ~o)) + t[4] - 145523070 | 0) << 6 | i >>> 26) + r | 0) | ~n)) + t[11] - 1120210379 | 0) << 10 | o >>> 22) + i | 0) ^ ((n = ((n += (i ^ (o | ~r)) + t[2] + 718787259 | 0) << 15 | n >>> 17) + o | 0) | ~i)) + t[9] - 343485551 | 0) << 21 | r >>> 11) + n | 0, e[0] = i + e[0] | 0, e[1] = r + e[1] | 0, e[2] = n + e[2] | 0, e[3] = o + e[3] | 0;\n      }, e.prototype.start = function () {\n        return this._dataLength = 0, this._bufferLength = 0, this._state.set(e.stateIdentity), this;\n      }, e.prototype.appendStr = function (t) {\n        var i,\n          r,\n          n = this._buffer8,\n          o = this._buffer32,\n          s = this._bufferLength;\n        for (r = 0; r < t.length; r += 1) {\n          if ((i = t.charCodeAt(r)) < 128) n[s++] = i;else if (i < 2048) n[s++] = 192 + (i >>> 6), n[s++] = 63 & i | 128;else if (i < 55296 || i > 56319) n[s++] = 224 + (i >>> 12), n[s++] = i >>> 6 & 63 | 128, n[s++] = 63 & i | 128;else {\n            if ((i = 1024 * (i - 55296) + (t.charCodeAt(++r) - 56320) + 65536) > 1114111) throw new Error(\"Unicode standard supports code points up to U+10FFFF\");\n            n[s++] = 240 + (i >>> 18), n[s++] = i >>> 12 & 63 | 128, n[s++] = i >>> 6 & 63 | 128, n[s++] = 63 & i | 128;\n          }\n          s >= 64 && (this._dataLength += 64, e._md5cycle(this._state, o), s -= 64, o[0] = o[16]);\n        }\n        return this._bufferLength = s, this;\n      }, e.prototype.appendAsciiStr = function (t) {\n        for (var i, r = this._buffer8, n = this._buffer32, o = this._bufferLength, s = 0;;) {\n          for (i = Math.min(t.length - s, 64 - o); i--;) r[o++] = t.charCodeAt(s++);\n          if (o < 64) break;\n          this._dataLength += 64, e._md5cycle(this._state, n), o = 0;\n        }\n        return this._bufferLength = o, this;\n      }, e.prototype.appendByteArray = function (t) {\n        for (var i, r = this._buffer8, n = this._buffer32, o = this._bufferLength, s = 0;;) {\n          for (i = Math.min(t.length - s, 64 - o); i--;) r[o++] = t[s++];\n          if (o < 64) break;\n          this._dataLength += 64, e._md5cycle(this._state, n), o = 0;\n        }\n        return this._bufferLength = o, this;\n      }, e.prototype.getState = function () {\n        var e = this._state;\n        return {\n          buffer: String.fromCharCode.apply(null, Array.from(this._buffer8)),\n          buflen: this._bufferLength,\n          length: this._dataLength,\n          state: [e[0], e[1], e[2], e[3]]\n        };\n      }, e.prototype.setState = function (e) {\n        var t,\n          i = e.buffer,\n          r = e.state,\n          n = this._state;\n        for (this._dataLength = e.length, this._bufferLength = e.buflen, n[0] = r[0], n[1] = r[1], n[2] = r[2], n[3] = r[3], t = 0; t < i.length; t += 1) this._buffer8[t] = i.charCodeAt(t);\n      }, e.prototype.end = function (t) {\n        void 0 === t && (t = !1);\n        var i = this._bufferLength,\n          r = this._buffer8,\n          n = this._buffer32,\n          o = 1 + (i >> 2);\n        this._dataLength += i;\n        var s = 8 * this._dataLength;\n        if (r[i] = 128, r[i + 1] = r[i + 2] = r[i + 3] = 0, n.set(e.buffer32Identity.subarray(o), o), i > 55 && (e._md5cycle(this._state, n), n.set(e.buffer32Identity)), s <= 4294967295) n[14] = s;else {\n          var a = s.toString(16).match(/(.*?)(.{0,8})$/);\n          if (null === a) return;\n          var c = parseInt(a[2], 16),\n            d = parseInt(a[1], 16) || 0;\n          n[14] = c, n[15] = d;\n        }\n        return e._md5cycle(this._state, n), t ? this._state : e._hex(this._state);\n      }, e.stateIdentity = new Int32Array([1732584193, -271733879, -1732584194, 271733878]), e.buffer32Identity = new Int32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), e.hexChars = \"0123456789abcdef\", e.hexOut = [], e.onePassHasher = new e(), e;\n    }(),\n    rk = tk.Md5 = ik;\n  if (\"5d41402abc4b2a76b9719d911017c592\" !== ik.hashStr(\"hello\")) throw new Error(\"Md5 self test failed.\");\n  var nk = /*#__PURE__*/function () {\n    var _ref62 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee257(e, t, i) {\n      return _regeneratorRuntime().wrap(function _callee257$(_context258) {\n        while (1) switch (_context258.prev = _context258.next) {\n          case 0:\n            _context258.next = 2;\n            return function () {\n              var _ref63 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee256(e, t, i) {\n                var r, n, o, s;\n                return _regeneratorRuntime().wrap(function _callee256$(_context257) {\n                  while (1) switch (_context257.prev = _context257.next) {\n                    case 0:\n                      r = \"\" + t + i;\n                      n = new Uint8Array(rk.hashStr(r, !0).buffer).slice(0, 16);\n                      o = n.slice(0, 12);\n                      _context257.next = 5;\n                      return window.crypto.subtle.importKey(\"raw\", n, \"AES-GCM\", !0, [\"encrypt\"]);\n                    case 5:\n                      s = _context257.sent;\n                      _context257.t0 = Uint8Array;\n                      _context257.next = 9;\n                      return window.crypto.subtle.encrypt({\n                        name: \"AES-GCM\",\n                        iv: o\n                      }, s, e);\n                    case 9:\n                      _context257.t1 = _context257.sent;\n                      return _context257.abrupt(\"return\", new _context257.t0(_context257.t1));\n                    case 11:\n                    case \"end\":\n                      return _context257.stop();\n                  }\n                }, _callee256);\n              }));\n              return function (_x401, _x402, _x403) {\n                return _ref63.apply(this, arguments);\n              };\n            }()(e.buffer, t, i);\n          case 2:\n            return _context258.abrupt(\"return\", _context258.sent);\n          case 3:\n          case \"end\":\n            return _context258.stop();\n        }\n      }, _callee257);\n    }));\n    return function nk(_x398, _x399, _x400) {\n      return _ref62.apply(this, arguments);\n    };\n  }();\n  function ok(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  var sk = new Map([[\"moderation\", 1], [\"supervise\", 2]]);\n  var ak = /*#__PURE__*/function (_gE30) {\n    _inherits(ak, _gE30);\n    _createClass(ak, [{\n      key: \"connectionState\",\n      get: function get() {\n        return this._connectionState;\n      },\n      set: function set(e) {\n        if (this._connectionState === e) return;\n        var t = this._connectionState;\n        this._connectionState = e, this.emit(kg.CONNECTION_STATE_CHANGE, t, e);\n      }\n    }, {\n      key: \"inspectType\",\n      get: function get() {\n        return this._inspectType;\n      },\n      set: function set(e) {\n        var t;\n        this._inspectMode = zi(t = e.map(function (e) {\n          return sk.get(e) || 0;\n        })).call(t, function (e, t) {\n          return e + t;\n        }), this._inspectType = e;\n      }\n    }, {\n      key: \"quality\",\n      get: function get() {\n        return this._quality;\n      },\n      set: function set(e) {\n        var _this250 = this;\n        this._quality = e > 1 ? 1 : e < .1 ? .1 : e, this.qualityTimer && (window.clearTimeout(this.qualityTimer), this.qualityTimer = null), this._quality >= 1 || (this.qualityTimer = window.setTimeout(function () {\n          _this250.quality = _this250._quality / _this250.qualityRatio;\n        }, 6e4));\n      }\n    }]);\n    function ak(e) {\n      var _this249;\n      _classCallCheck(this, ak);\n      _this249 = _possibleConstructorReturn(this, _getPrototypeOf(ak).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"name\", \"AgoraRTCVideoContentInspect\"), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_connectionState\", Pg.CONNECTING), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_innerConnectionState\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"sequence\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"inspectStartTime\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"workerManagerConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"workerConnection\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"workerMessageLengthLimit\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"inspectIntervalMinimum\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"qualityRatio\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_connectInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_cancelTokenSource\", fE.CancelToken.source()), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_retryConfig\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"wmSequence\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"inspectInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"inspectTimer\", null), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"ossFilePrefix\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"extraInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_inspectType\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_inspectMode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_quality\", 1), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"qualityTimer\", null), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_inspectId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"_needWorkUrlOnly\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this249)), \"inspectImage\", function () {\n        if (_this249.connectionState !== Pg.CONNECTED) throw new vE(TE.OPERATION_ABORTED, \"content inspect service connection status is \".concat(_this249.connectionState));\n        _this249.inspectTimer && (window.clearInterval(_this249.inspectTimer), _this249.inspectTimer = null), _this249.inspectTimer = window.setInterval(function () {\n          _this249.connectionState === Pg.CONNECTED ? _this249.requestToInspectImage() : NE.debug(\"[\".concat(_this249._inspectId, \"] Inspect State is not connected , \"), _this249.connectionState);\n        }, _this249.inspectInterval < _this249.inspectIntervalMinimum ? _this249.inspectIntervalMinimum : _this249.inspectInterval), _this249.requestToInspectImage();\n      }), _this249._inspectId = MR(5, \"inspect-\"), _this249.workerMessageLengthLimit = HE(\"VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT\"), _this249.inspectIntervalMinimum = HE(\"VIDEO_INSPECT_INTERVAL_MINIMUM\"), _this249.qualityRatio = HE(\"VIDEO_INSPECT_QUALITY_RATIO\"), _this249.inspectInterval = e.interval, _this249.ossFilePrefix = e.ossFilePrefix, _this249.extraInfo = e.extraInfo, _this249.inspectType = e.inspectType, _this249.inspectStartTime = Number(Date.now()), _this249.workerManagerConnection = new $A(\"worker-manager-\" + _this249._inspectId, RE), _this249.on(kg.STATE_CHANGE, function (e, t) {\n        _this249._innerConnectionState = e, NE.debug(\"[\".concat(_this249._inspectId, \"] Inspect operation :\").concat(Lg[e], \" \").concat(t || \"\"));\n      }), _this249.handleWorkerManagerEvents(), _this249.workerConnection = new $A(\"worker-\" + _this249._inspectId, RE), _this249.handleWorkerEvents();\n      return _this249;\n    }\n    _createClass(ak, [{\n      key: \"init\",\n      value: function () {\n        var _init3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee258(e, t) {\n          var _this251 = this;\n          var i;\n          return _regeneratorRuntime().wrap(function _callee258$(_context259) {\n            while (1) switch (_context259.prev = _context259.next) {\n              case 0:\n                this.emit(kg.STATE_CHANGE, Lg.CONNECT_AP), this._connectInfo = e;\n                i = this._cancelTokenSource.token;\n                return _context259.abrupt(\"return\", (this._retryConfig = t, new Cl(function (r, n) {\n                  _this251.on(kg.CONNECTION_STATE_CHANGE, function (e, t) {\n                    t === Pg.CONNECTED && r();\n                  }), _this251.requestAP(e, i, t).then(function (e) {\n                    _this251.connectWorkerManager(e);\n                  }).catch(function (e) {\n                    n(e);\n                  });\n                })));\n              case 3:\n              case \"end\":\n                return _context259.stop();\n            }\n          }, _callee258, this);\n        }));\n        function init(_x404, _x405) {\n          return _init3.apply(this, arguments);\n        }\n        return init;\n      }()\n    }, {\n      key: \"requestAP\",\n      value: function () {\n        var _requestAP = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee260(e, t, i) {\n          var r, n, o;\n          return _regeneratorRuntime().wrap(function _callee260$(_context261) {\n            while (1) switch (_context261.prev = _context261.next) {\n              case 0:\n                r = HE(\"WEBCS_DOMAIN\").map(function (e) {\n                  return \"https://\".concat(e, \"/api/v1\");\n                });\n                _context261.next = 3;\n                return function (e, t, i, r) {\n                  var n = t.appId,\n                    o = t.areaCode,\n                    s = t.cname,\n                    a = t.sid,\n                    c = t.token,\n                    d = t.uid;\n                  OO++;\n                  var u = \"image_moderation_api\",\n                    l = {\n                      service_name: u,\n                      json_body: JSON.stringify({\n                        appId: n,\n                        areaCode: o,\n                        cname: s,\n                        command: \"allocateEdge\",\n                        requestId: OO,\n                        seq: OO,\n                        sid: a,\n                        token: c,\n                        ts: Date.now(),\n                        uid: d + \"\"\n                      })\n                    };\n                  var h,\n                    p,\n                    _ = e[0];\n                  return yE( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee259() {\n                    var e, _t188, t, _e201, _e202, r, n;\n                    return _regeneratorRuntime().wrap(function _callee259$(_context260) {\n                      while (1) switch (_context260.prev = _context260.next) {\n                        case 0:\n                          h = Date.now();\n                          _context260.next = 3;\n                          return lT(_, {\n                            data: l,\n                            cancelToken: i,\n                            headers: {\n                              \"X-Packet-Service-Type\": \"0\",\n                              \"X-Packet-URI\": \"61\"\n                            },\n                            params: {\n                              action: \"wrtc_gateway\"\n                            }\n                          });\n                        case 3:\n                          e = _context260.sent;\n                          if (!(p = Date.now() - h, 0 !== e.code)) {\n                            _context260.next = 7;\n                            break;\n                          }\n                          _t188 = new vE(TE.UNEXPECTED_RESPONSE, \"image inspect ap error, code\" + e.code, {\n                            retry: !0,\n                            responseTime: p\n                          });\n                          throw NE.error(_t188.toString()), _t188;\n                        case 7:\n                          t = JSON.parse(e.json_body);\n                          if (!(200 !== t.code)) {\n                            _context260.next = 11;\n                            break;\n                          }\n                          _e201 = new vE(TE.UNEXPECTED_RESPONSE, \"image inspect ap error, code: \".concat(t.code, \", reason: \").concat(t.reason), {\n                            code: t.code,\n                            responseTime: p\n                          });\n                          throw NE.error(_e201.toString()), _e201;\n                        case 11:\n                          if (!(!t.servers || !Array.isArray(t.servers) || 0 === t.servers.length)) {\n                            _context260.next = 14;\n                            break;\n                          }\n                          _e202 = new vE(TE.UNEXPECTED_RESPONSE, \"image inspect ap empty server\", {\n                            code: t.code,\n                            responseTime: p\n                          });\n                          throw NE.error(_e202.toString()), _e202;\n                        case 14:\n                          r = HE(\"VIDEO_INSPECT_WORKER_MANAGER_HOST\"), n = HE(\"VIDEO_INSPECT_WORKER_MANAGER_PORT\");\n                          return _context260.abrupt(\"return\", {\n                            addressList: t.servers.map(function (e) {\n                              var t = e.address,\n                                i = e.wss;\n                              if (t && i) return \"wss://\".concat(t.replace(/\\./g, \"-\"), \".\").concat(r, \":\").concat(n || i);\n                            }).filter(function (e) {\n                              return !!e;\n                            }),\n                            workerToken: t.workerToken,\n                            vid: t.vid,\n                            responseTime: p\n                          });\n                        case 16:\n                        case \"end\":\n                          return _context260.stop();\n                      }\n                    }, _callee259);\n                  })), function (t, i) {\n                    return IT.apworkerEvent(a, {\n                      success: !0,\n                      sc: 200,\n                      serviceName: u,\n                      responseDetail: JSON.stringify(t.addressList),\n                      firstSuccess: 0 === i,\n                      responseTime: p,\n                      serverIp: e[i % e.length]\n                    }), !1;\n                  }, function (t, i) {\n                    return IT.apworkerEvent(a, {\n                      success: !1,\n                      sc: t.data && t.data.code || 200,\n                      serviceName: u,\n                      responseTime: p,\n                      serverIp: e[i % e.length]\n                    }), !!(t.code !== TE.OPERATION_ABORTED && t.code !== TE.UNEXPECTED_RESPONSE || t.data && t.data.retry) && (_ = e[(i + 1) % e.length], !0);\n                  }, r);\n                }(r, e, t, i);\n              case 3:\n                n = _context261.sent;\n                this.emit(kg.STATE_CHANGE, Lg.AP_CONNECTED);\n                o = n.addressList;\n                return _context261.abrupt(\"return\", (this.wmSequence++, o));\n              case 7:\n              case \"end\":\n                return _context261.stop();\n            }\n          }, _callee260, this);\n        }));\n        function requestAP(_x406, _x407, _x408) {\n          return _requestAP.apply(this, arguments);\n        }\n        return requestAP;\n      }()\n    }, {\n      key: \"connectWorkerManager\",\n      value: function () {\n        var _connectWorkerManager = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee261(e) {\n          var t,\n            _args262 = arguments;\n          return _regeneratorRuntime().wrap(function _callee261$(_context262) {\n            while (1) switch (_context262.prev = _context262.next) {\n              case 0:\n                t = _args262.length > 1 && void 0 !== _args262[1] && _args262[1];\n                this._needWorkUrlOnly = t;\n                this.emit(kg.STATE_CHANGE, Lg.CONNECT_WORKER_MANAGER);\n                _context262.next = 5;\n                return this.workerManagerConnection.init(e, 1e4);\n              case 5:\n              case \"end\":\n                return _context262.stop();\n            }\n          }, _callee261, this);\n        }));\n        function connectWorkerManager(_x409) {\n          return _connectWorkerManager.apply(this, arguments);\n        }\n        return connectWorkerManager;\n      }()\n    }, {\n      key: \"connectWorker\",\n      value: function () {\n        var _connectWorker = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee262(e) {\n          return _regeneratorRuntime().wrap(function _callee262$(_context263) {\n            while (1) switch (_context263.prev = _context263.next) {\n              case 0:\n                _context263.next = 2;\n                return this.workerConnection.init([e]);\n              case 2:\n              case \"end\":\n                return _context263.stop();\n            }\n          }, _callee262, this);\n        }));\n        function connectWorker(_x410) {\n          return _connectWorker.apply(this, arguments);\n        }\n        return connectWorker;\n      }()\n    }, {\n      key: \"handleWorkerManagerEvents\",\n      value: function handleWorkerManagerEvents() {\n        var _this252 = this;\n        this.workerManagerConnection.on(Km.CONNECTED, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee263() {\n          return _regeneratorRuntime().wrap(function _callee263$(_context264) {\n            while (1) switch (_context264.prev = _context264.next) {\n              case 0:\n                _this252.emit(kg.STATE_CHANGE, Lg.WORKER_MANAGER_CONNECTED, _this252.workerManagerConnection.url), _this252.workerManagerConnection.sendMessage({\n                  appId: _this252._connectInfo.appId,\n                  cname: _this252._connectInfo.cname,\n                  uid: _this252._connectInfo.uid + \"\",\n                  sdkVersion: \"4.16.1\",\n                  sid: _this252._connectInfo.sid,\n                  seq: _this252.wmSequence,\n                  ts: Number(Date.now()),\n                  requestId: Math.floor(1e12 * Math.random()),\n                  allocate: !0,\n                  clientRequest: {\n                    command: \"join\"\n                  }\n                }, !0);\n              case 1:\n              case \"end\":\n                return _context264.stop();\n            }\n          }, _callee263);\n        }))), this.workerManagerConnection.on(Km.CLOSED, function () {\n          _this252._innerConnectionState < Lg.GET_WORKER_MANAGER_RESPONSE && NE.debug(\"[\".concat(_this252._inspectId, \"] Inspect worker manager is closed before connecting worker\"));\n        }), this.workerManagerConnection.on(Km.FAILED, function () {\n          _this252._innerConnectionState < Lg.GET_WORKER_MANAGER_RESPONSE && NE.debug(\"[\".concat(_this252._inspectId, \"] Connecting inspect worker manager is failed before connecting worker\"));\n        }), this.workerManagerConnection.on(Km.RECONNECTING, function () {\n          _this252._innerConnectionState < Lg.GET_WORKER_MANAGER_RESPONSE && NE.debug(\"[\".concat(_this252._inspectId, \"] Inspect worker manager is reconnecting before connecting worker\"));\n        }), this.workerManagerConnection.on(Km.ON_MESSAGE, /*#__PURE__*/function () {\n          var _ref66 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee264(e) {\n            var t, i, _e203, r;\n            return _regeneratorRuntime().wrap(function _callee264$(_context265) {\n              while (1) switch (_context265.prev = _context265.next) {\n                case 0:\n                  _this252.emit(kg.STATE_CHANGE, Lg.GET_WORKER_MANAGER_RESPONSE);\n                  t = _this252.workerManagerConnection.url;\n                  _this252.workerManagerConnection.close();\n                  i = JSON.parse(e.data);\n                  if (!(200 !== i.code)) {\n                    _context265.next = 6;\n                    break;\n                  }\n                  throw NE.error(\"[\".concat(_this252._inspectId, \"] Unexpected code \").concat(i.code, \" from worker manager\")), new vE(TE.UNEXPECTED_RESPONSE, \"response code of worker is unexpected\", i);\n                case 6:\n                  if (i.serverResponse && i.serverResponse.portWss && t) {\n                    _context265.next = 8;\n                    break;\n                  }\n                  throw NE.error(\"[\".concat(_this252._inspectId, \"] Unexpected content from worker manager : \").concat(JSON.stringify(i))), new vE(TE.UNEXPECTED_RESPONSE, \"response content of worker is unexpected\", i);\n                case 8:\n                  _e203 = HE(\"VIDEO_INSPECT_WORKER_PORT\") || i.serverResponse.portWss, r = t.replace(/:\\d+\\/?$/, \":\".concat(_e203));\n                  _this252.emit(kg.STATE_CHANGE, Lg.CONNECT_WORKER, r);\n                  if (!_this252._needWorkUrlOnly) {\n                    _context265.next = 14;\n                    break;\n                  }\n                  _this252.emit(kg.REQUEST_NEW_WORKER_URL, r);\n                  _context265.next = 16;\n                  break;\n                case 14:\n                  _context265.next = 16;\n                  return _this252.connectWorker(r);\n                case 16:\n                case \"end\":\n                  return _context265.stop();\n              }\n            }, _callee264);\n          }));\n          return function (_x411) {\n            return _ref66.apply(this, arguments);\n          };\n        }()), this.workerManagerConnection.on(Km.WILL_RECONNECT, function (e, t) {\n          t(e);\n        }), this.workerManagerConnection.on(Km.REQUEST_NEW_URLS, function (e, t) {\n          _this252.requestAP(_this252._connectInfo, _this252._cancelTokenSource.token, _this252._retryConfig).then(e).catch(t);\n        });\n      }\n    }, {\n      key: \"handleWorkerEvents\",\n      value: function handleWorkerEvents() {\n        var _this253 = this;\n        this.workerConnection.on(Km.CONNECTED, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee265() {\n          return _regeneratorRuntime().wrap(function _callee265$(_context266) {\n            while (1) switch (_context266.prev = _context266.next) {\n              case 0:\n                _this253.emit(kg.STATE_CHANGE, Lg.WORKER_CONNECTED, _this253.workerConnection.url), _this253.connectionState = Pg.CONNECTED;\n              case 1:\n              case \"end\":\n                return _context266.stop();\n            }\n          }, _callee265);\n        }))), this.workerConnection.on(Km.ON_MESSAGE, /*#__PURE__*/function () {\n          var _ref68 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee266(e) {\n            var i, t, _e204, r, _n66;\n            return _regeneratorRuntime().wrap(function _callee266$(_context267) {\n              while (1) switch (_context267.prev = _context267.next) {\n                case 0:\n                  if (!(e.data instanceof ArrayBuffer)) {\n                    _context267.next = 11;\n                    break;\n                  }\n                  i = wL(new Uint8Array(e.data));\n                  if (!(HE(\"SHOW_VIDEO_INSPECT_WORKER_MESSAGE\") && NE.debug(\"[\".concat(_this253._inspectId, \"] Response message for worker of inspect content \"), JSON.stringify(i)), 200 === i.code)) {\n                    _context267.next = 8;\n                    break;\n                  }\n                  if (!(Array.isArray(_this253.inspectType) && 1 === _this253.inspectType.length && \"supervise\" === _this253.inspectType[0])) {\n                    _context267.next = 5;\n                    break;\n                  }\n                  return _context267.abrupt(\"return\", void _this253.emit(kg.INSPECT_RESULT, void 0, void 0));\n                case 5:\n                  if (i.data && i.data.scorePorn && i.data.scoreSexy && i.data.scoreNeutral) {\n                    _e204 = {\n                      porn: i.data.scorePorn,\n                      sexy: i.data.scoreSexy,\n                      neutral: i.data.scoreNeutral\n                    }, r = zi(t = Object.keys(_e204)).call(t, function (t, i) {\n                      return _e204[t] > _e204[i] ? t : i;\n                    }, \"porn\"), _n66 = Object.keys(_e204).find(function (e) {\n                      return e === r;\n                    });\n                    _this253.emit(kg.INSPECT_RESULT, _n66);\n                  } else _this253.emit(kg.INSPECT_RESULT, void 0, new vE(TE.UNEXPECTED_RESPONSE, i.code + \"\", \"There is an unexpected data on message\"));\n                  _context267.next = 9;\n                  break;\n                case 8:\n                  _this253.emit(kg.INSPECT_RESULT, void 0, new vE(TE.UNEXPECTED_RESPONSE, i.code + \"\", i.msg));\n                case 9:\n                  _context267.next = 12;\n                  break;\n                case 11:\n                  NE.error(\"[\".concat(_this253._inspectId, \"] Unexpected message type from worker\")), _this253.emit(kg.INSPECT_RESULT, void 0, new vE(TE.UNEXPECTED_RESPONSE, \"invalid worker message type\"));\n                case 12:\n                case \"end\":\n                  return _context267.stop();\n              }\n            }, _callee266);\n          }));\n          return function (_x412) {\n            return _ref68.apply(this, arguments);\n          };\n        }()), this.workerConnection.on(Km.CLOSED, function () {\n          _this253.connectionState = Pg.CLOSED;\n        }), this.workerConnection.on(Km.FAILED, function () {\n          _this253.connectionState = Pg.CLOSED;\n        }), this.workerConnection.on(Km.RECONNECTING, function () {\n          _this253.connectionState = _this253.connectionState === Pg.CONNECTED ? Pg.RECONNECTING : Pg.CONNECTING;\n        }), this.workerConnection.on(Km.WILL_RECONNECT, function (e, t) {\n          \"recover\" === e && t(e), t(\"tryNext\");\n        }), this.workerConnection.on(Km.REQUEST_NEW_URLS, function (e, t) {\n          _this253.workerManagerConnection.close(), _this253.once(kg.REQUEST_NEW_WORKER_URL, function (t) {\n            e([t]);\n          }), _this253.requestAP(_this253._connectInfo, _this253._cancelTokenSource.token, _this253._retryConfig).then(function (e) {\n            _this253.connectWorkerManager(e, !0);\n          }).catch(function (e) {\n            t(e);\n          });\n        });\n      }\n    }, {\n      key: \"requestToInspectImage\",\n      value: function () {\n        var _requestToInspectImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee267() {\n          var e, t, i;\n          return _regeneratorRuntime().wrap(function _callee267$(_context268) {\n            while (1) switch (_context268.prev = _context268.next) {\n              case 0:\n                this.sequence++;\n                e = GR(this, kg.CLIENT_LOCAL_VIDEO_TRACK), t = {\n                  appId: this._connectInfo.appId,\n                  cname: this._connectInfo.cname,\n                  cid: this._connectInfo.cid,\n                  sid: this._connectInfo.sid,\n                  uid: this._connectInfo.uid,\n                  vid: this._connectInfo.vid\n                };\n                if (!e) {\n                  _context268.next = 11;\n                  break;\n                }\n                if (e.isPlaying) {\n                  _context268.next = 5;\n                  break;\n                }\n                return _context268.abrupt(\"return\", void this.emit(kg.INSPECT_RESULT, void 0, new vE(TE.INVALID_OPERATION, \"Only the track being played can be inspected\")));\n              case 5:\n                _context268.next = 7;\n                return this.generateRequestData(e, t);\n              case 7:\n                i = _context268.sent;\n                this.workerConnection.sendMessage(i, !0, !0);\n                _context268.next = 12;\n                break;\n              case 11:\n                this.emit(kg.INSPECT_RESULT, void 0, new vE(TE.INVALID_OPERATION, \"Only the track being published can be inspected\"));\n              case 12:\n              case \"end\":\n                return _context268.stop();\n            }\n          }, _callee267, this);\n        }));\n        function requestToInspectImage() {\n          return _requestToInspectImage.apply(this, arguments);\n        }\n        return requestToInspectImage;\n      }()\n    }, {\n      key: \"generateRequestData\",\n      value: function () {\n        var _generateRequestData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee268(e, t) {\n          var i, r, n, o, s, a, c, d, u, l, h, p, _e205, _t189;\n          return _regeneratorRuntime().wrap(function _callee268$(_context269) {\n            while (1) switch (_context269.prev = _context269.next) {\n              case 0:\n                i = t.appId, r = t.cname, n = t.cid, o = t.vid, s = t.sid, a = t.uid;\n                c = Date.now();\n                _context269.next = 4;\n                return e.getCurrentFrameImage(\"image/jpeg\", this.quality);\n              case 4:\n                d = _context269.sent;\n                _context269.next = 7;\n                return nk(d, i, r);\n              case 7:\n                u = _context269.sent;\n                l = this.sequence + \"-\" + n + \"-\" + a + \"-\" + c + \"-\" + MR(12, \"\");\n                h = {\n                  appId: i,\n                  cid: n,\n                  cname: r,\n                  deviceId: \"\",\n                  elapse: ak.intToLong(Number(c - this.inspectStartTime)),\n                  fileSize: u.byteLength,\n                  jpgEncryption: 2,\n                  height: d.height,\n                  width: d.width,\n                  jpg: u,\n                  networkType: 6,\n                  osType: 7,\n                  requestId: l,\n                  sdkVersion: \"4.16.1\",\n                  sequence: this.sequence,\n                  sid: s,\n                  timestamp: ak.intToLong(c),\n                  uid: a,\n                  vid: o,\n                  service: this._inspectMode,\n                  callbackData: this.extraInfo,\n                  ossFilePrefix: this.ossFilePrefix\n                };\n                void 0 === this.extraInfo && delete h.callbackData, void 0 === this.ossFilePrefix && delete h.ossFilePrefix;\n                p = bL(h);\n                if (!(p.byteLength < this.workerMessageLengthLimit)) {\n                  _context269.next = 15;\n                  break;\n                }\n                if (HE(\"SHOW_VIDEO_INSPECT_WORKER_MESSAGE\")) {\n                  _e205 = function (e) {\n                    for (var t = 1; t < arguments.length; t++) {\n                      var i = null != arguments[t] ? arguments[t] : {};\n                      t % 2 ? ok(Object(i), !0).forEach(function (t) {\n                        mp(e, t, i[t]);\n                      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : ok(Object(i)).forEach(function (t) {\n                        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n                      });\n                    }\n                    return e;\n                  }({}, h);\n                  delete _e205.jpg, NE.debug(\"[\".concat(this._inspectId, \"] Request message for worker of inspect content \"), JSON.stringify(_e205));\n                }\n                return _context269.abrupt(\"return\", p);\n              case 15:\n                _t189 = this.quality * this.qualityRatio;\n                this.quality = _t189;\n                _context269.next = 19;\n                return this.generateRequestData(e, {\n                  appId: i,\n                  cname: r,\n                  cid: n,\n                  vid: o,\n                  sid: s,\n                  uid: a\n                });\n              case 19:\n                return _context269.abrupt(\"return\", _context269.sent);\n              case 20:\n              case \"end\":\n                return _context269.stop();\n            }\n          }, _callee268, this);\n        }));\n        function generateRequestData(_x413, _x414) {\n          return _generateRequestData.apply(this, arguments);\n        }\n        return generateRequestData;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._cancelTokenSource.cancel(), this._cancelTokenSource = fE.CancelToken.source(), this.workerManagerConnection && this.workerManagerConnection.close(), this.workerConnection && this.workerConnection.close(), this.inspectTimer && window.clearInterval(this.inspectTimer), this.inspectTimer = null, this.connectionState = Pg.CLOSED, this.emit(kg.STATE_CHANGE, Lg.CLOSED);\n      }\n    }], [{\n      key: \"intToLong\",\n      value: function intToLong(e) {\n        return {\n          low: e |= 0,\n          high: e >> 31,\n          unsigned: e >= 0\n        };\n      }\n    }]);\n    return ak;\n  }(gE);\n  var ck, dk, uk, lk, hk, pk, _k, Ek, fk, mk, gk, Sk, Tk, vk, Rk, Ik, yk, Ck, Ak, Ok, bk, wk, Nk, Dk, Pk, Lk, kk, Mk, Uk, xk, Vk, jk, Fk, Bk, Gk, Wk, Hk, Kk, Yk;\n  function qk(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function Jk(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? qk(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : qk(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  var Xk = (ck = RT(), dk = RT({\n    argsMap: function argsMap(e, t) {\n      return Array.isArray(t) || (t = [t]), t.map(function (e) {\n        return e ? Object(e).toString() : \"null\";\n      });\n    }\n  }), uk = RT({\n    argsMap: function argsMap(e, t) {\n      return t || (t = []), Array.isArray(t) || (t = [t]), t.map(function (e) {\n        return e.getTrackId();\n      });\n    }\n  }), lk = RT({\n    argsMap: function argsMap(e, t, i) {\n      return [t.uid, i];\n    }\n  }), hk = RT({\n    argsMap: function argsMap(e, t) {\n      return t.map(function (e) {\n        var t = e.user,\n          i = e.mediaType;\n        return [null == t ? void 0 : t.uid, i];\n      });\n    }\n  }), pk = RT({\n    argsMap: function argsMap(e, t, i) {\n      return [t.uid, i];\n    }\n  }), _k = RT({\n    argsMap: function argsMap(e, t) {\n      return t.map(function (e) {\n        var t = e.user,\n          i = e.mediaType;\n        return {\n          uid: null == t ? void 0 : t.uid,\n          mediaType: i\n        };\n      });\n    }\n  }), Ek = RT(), fk = RT(), mk = RT(), gk = RT(), Sk = RT(), Tk = RT(), vk = RT(), Rk = RT(), Ik = RT(), yk = RT(), Ck = RT(), Ak = RT(), Ok = RT(), bk = RT(), wk = RT({\n    argsMap: function argsMap(e, t) {\n      return [t];\n    }\n  }), Nk = RT(), Dk = RT(), Pk = RT(), Lk = RT(), kk = RT(), Mk = RT(), Uk = RT(), xk = RT(), Vk = RT(), jk = RT(), Fk = RT({\n    argsMap: function argsMap(e, t) {\n      return Array.isArray(t) || (t = [t]), [JSON.stringify(t)];\n    }\n  }), Bk = RT(), Gk = RT(), Wk = RT(), Hk = RT({\n    reportResult: !0\n  }), Kk = RT(), ZS((Yk = /*#__PURE__*/function (_gE31) {\n    _inherits(Yk, _gE31);\n    _createClass(Yk, [{\n      key: \"connectionState\",\n      get: function get() {\n        return this._gateway.state;\n      }\n    }, {\n      key: \"remoteUsers\",\n      get: function get() {\n        return this._users;\n      }\n    }, {\n      key: \"localTracks\",\n      get: function get() {\n        return this._p2pChannel.getAllTracks(!0);\n      }\n    }, {\n      key: \"uid\",\n      get: function get() {\n        return this._uid;\n      }\n    }, {\n      key: \"channelName\",\n      get: function get() {\n        return this._channelName;\n      }\n    }, {\n      key: \"isStringUID\",\n      get: function get() {\n        return !!this._joinInfo && !!this._joinInfo.stringUid;\n      }\n    }, {\n      key: \"__className__\",\n      get: function get() {\n        return \"Client\";\n      }\n    }]);\n    function Yk(e) {\n      var _this254;\n      _classCallCheck(this, Yk);\n      var t;\n      if (_this254 = _possibleConstructorReturn(this, _getPrototypeOf(Yk).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"store\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_uid\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_channelName\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_uintUid\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_users\", []), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_codec\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_mode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_config\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_clientId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_appId\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_sessionId\", null), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_key\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_joinInfo\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_gateway\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_statsCollector\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_configDistribute\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_leaveMutex\", new OT(\"client-leave\")), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_publishMutex\", new OT(\"client-publish\")), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_renewTokenMutex\", new OT(\"client-renewtoken\")), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_subscribeMutex\", new OT(\"client-subscribe\")), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_encryptionMode\", \"none\"), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_encryptionSecret\", null), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_encryptionSalt\", null), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_proxyServer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_turnServer\", {\n        servers: [],\n        mode: \"auto\"\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_cloudProxyServerMode\", \"disabled\"), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_isDualStreamEnabled\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_defaultStreamFallbackType\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_lowStreamParameter\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_streamFallbackTypeCacheMap\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_remoteStreamTypeCacheMap\", new Map()), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_axiosCancelSource\", fE.CancelToken.source()), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_audioVolumeIndicationInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_networkQualityInterval\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_userOfflineTimeout\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_streamRemovedTimeout\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_injectStreamingClient\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_liveTranscodeStreamingClient\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_liveRawStreamingClient\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_channelMediaRelayClient\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_networkQualitySensitivity\", \"normal\"), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_p2pChannel\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_useLocalAccessPoint\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_setLocalAPVersion\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_joinAndNotLeaveYet\", !1), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_numberOfJoinCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_remoteDefaultVideoStreamType\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_inspect\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_license\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleLocalTrackEnable\", function (e, t, i) {\n        _this254.publish(e, !1).then(t).catch(i);\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleLocalTrackDisable\", function (e, t, i) {\n        _this254.unpublish(e).then(t).catch(i);\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleUserOnline\", function (e) {\n        _this254.isStringUID && \"string\" != typeof e.uid && NE.error(\"[\".concat(_this254._clientId, \"] StringUID is Mixed with UintUID\"));\n        var t = _this254._users.find(function (t) {\n          return t.uid === e.uid;\n        });\n        if (t) t._trust_in_room_ = !0;else {\n          var _t190 = new mw(e.uid, e.uint_id || e.uid);\n          _this254._users.push(_t190), NE.debug(\"[\".concat(_this254._clientId, \"] user online\"), e.uid), _this254.emit(Am.USER_JOINED, _t190);\n        }\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleUserOffline\", function (e) {\n        var t = _this254._users.find(function (t) {\n          return t.uid === e.uid;\n        });\n        t && (_this254._handleRemoveStream(e), HR(_this254._users, t), _this254._remoteStreamTypeCacheMap.delete(t.uid), _this254._streamFallbackTypeCacheMap.delete(t.uid), NE.debug(\"[\".concat(_this254._clientId, \"] user offline\"), e.uid, \"reason:\", e.reason), _this254.emit(Am.USER_LEAVED, t, e.reason));\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleAddAudioOrVideoStream\", function (e, t, i, r, n, o, s) {\n        var a = _this254._users.find(function (e) {\n          return e.uid === t;\n        });\n        if (!a) return void NE.error(\"[\".concat(_this254._clientId, \"] can not find target user!(on_add_stream)\"));\n        NE.debug(\"[\".concat(_this254._clientId, \"] stream added with uid \").concat(t, \", type \").concat(e)), _this254.store.subscribe(a.uid, e, void 0, void 0, void 0, Date.now());\n        var c = \"audio\" === e ? a.hasAudio : a.hasVideo;\n        a._uintid || (a._uintid = n || t), \"audio\" === e ? a._trust_audio_stream_added_state_ = !0 : a._trust_video_stream_added_state_ = !0, \"audio\" === e ? (a._audio_added_ = !0, void 0 !== i && (a._audioSSRC = i), void 0 !== r && (a._cname = r), o && (a._audioOrtc = o)) : (a._video_added_ = !0, void 0 !== i && (a._videoSSRC = i), void 0 !== r && (a._cname = r), void 0 !== s && (a._rtxSsrcId = s), o && (a._videoOrtc = o)), (\"audio\" === e ? a.hasAudio : a.hasVideo) && !c && (NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(a.uid, \" published \").concat(e)), _this254.emit(Am.USER_PUBLISHED, a, e)), \"video\" === e ? IT.onGatewayStream(_this254._sessionId, lm.ON_ADD_VIDEO_STREAM, hm.ON_ADD_VIDEO_STREAM, {\n          peer: n || t\n        }) : IT.onGatewayStream(_this254._sessionId, lm.ON_ADD_AUDIO_STREAM, hm.ON_ADD_AUDIO_STREAM, {\n          peer: n || t\n        }), _this254._p2pChannel.remoteMediaSsrcChanged(a, e, i).then(function (t) {\n          if (t) return NE.debug(\"[\".concat(_this254._clientId, \"] resubscribe \").concat(e, \" for user \").concat(a.uid, \" after rejoin because SSRC id changed.\")), _this254._p2pChannel.unsubscribe(a, e, !0).then(function () {\n            return _this254._subscribe(a, e, !0).catch(function (e) {\n              NE.error(\"[\".concat(_this254._clientId, \"] resubscribe error\"), e.toString());\n            });\n          });\n        }), _this254._p2pChannel.hasPendingRemoteMedia(a, e) && (NE.debug(\"[\".concat(_this254._clientId, \"] resubscribe \").concat(e, \" for user \").concat(a.uid, \" after reconnect.\")), _this254._subscribe(a, e, !0).catch(function (e) {\n          NE.error(\"[\".concat(_this254._clientId, \"] resubscribe error\"), e.toString());\n        }));\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleRemoveStream\", function (e) {\n        var t = _this254._users.find(function (t) {\n          return t.uid === e.uid;\n        });\n        if (!t) return void NE.warning(\"[\".concat(_this254._clientId, \"] can not find target user!(on_remove_stream)\"));\n        NE.debug(\"[\".concat(_this254._clientId, \"] stream removed with uid \").concat(e.uid));\n        var i = function i() {};\n        t.hasAudio && t.hasVideo ? i = function i() {\n          NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(t.uid, \" unpublished audio track\")), _this254.emit(Am.USER_UNPUBLISHED, t, \"audio\"), NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(t.uid, \" unpublished video track\")), _this254.emit(Am.USER_UNPUBLISHED, t, \"video\");\n        } : t.hasVideo ? i = function i() {\n          NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(t.uid, \" unpublished video track\")), _this254.emit(Am.USER_UNPUBLISHED, t, \"video\");\n        } : t.hasAudio && (i = function i() {\n          NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(t.uid, \" unpublished audio track\")), _this254.emit(Am.USER_UNPUBLISHED, t, \"audio\");\n        }), t._trust_audio_stream_added_state_ = !0, t._trust_video_stream_added_state_ = !0, t._audio_added_ = !1, t._video_added_ = !1, _this254._p2pChannel.unsubscribe(t).then(function (e) {\n          if (e) return _this254._gateway.unsubscribe(e, t.uid);\n        }), t._audioSSRC = void 0, t._videoSSRC = void 0, t._audioOrtc = void 0, t._videoOrtc = void 0, t._rtxSsrcId = void 0, IT.onGatewayStream(_this254._sessionId, lm.ON_REMOVE_STREAM, hm.ON_REMOVE_STREAM, {\n          peer: e.uint_id || e.uid\n        }), i();\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleSetStreamLocalEnable\", function (e, t, i) {\n        var r = _this254._users.find(function (e) {\n          return e.uid === t;\n        });\n        if (!r) return void NE.error(\"[\".concat(_this254._clientId, \"] can not find target user!(disable_local)\"));\n        NE.debug(\"[\".concat(_this254._clientId, \"] local \").concat(e, \" \").concat(i ? \"enabled\" : \"disabled\", \" with uid \").concat(t));\n        var n = \"audio\" === e ? r.hasAudio : r.hasVideo;\n        if (\"audio\" === e) {\n          r._trust_audio_enabled_state_ = !0;\n          var _e206 = r._audio_enabled_;\n          if (r._audio_enabled_ = i, r._audio_enabled_ === _e206) return;\n          {\n            var _e207 = r._audio_enabled_ ? \"enable-local-audio\" : \"disable-local-audio\";\n            NE.debug(\"[\".concat(_this254._clientId, \"] user-info-updated, uid: \").concat(t, \", msg: \").concat(_e207)), _this254.emit(Am.USER_INFO_UPDATED, t, _e207);\n          }\n        } else {\n          r._trust_video_enabled_state_ = !0;\n          var _e208 = r._video_enabled_;\n          if (r._video_enabled_ = i, r._video_enabled_ === _e208) return;\n          {\n            var _e209 = r._video_enabled_ ? \"enable-local-video\" : \"disable-local-video\";\n            NE.debug(\"[\".concat(_this254._clientId, \"] user-info-update, uid: \").concat(t, \", msg: \").concat(_e209)), _this254.emit(Am.USER_INFO_UPDATED, t, _e209);\n          }\n        }\n        var o = \"audio\" === e ? r.hasAudio : r.hasVideo;\n        return n !== o ? !n && o ? (NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(t, \" published \").concat(e)), void _this254.emit(Am.USER_PUBLISHED, r, e)) : (\"video\" === e && r._videoTrack && r._videoTrack._destroy(), \"audio\" === e && r._audioTrack, _this254._p2pChannel.muteRemote(r, e), NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(t, \" unpublished \").concat(e)), void _this254.emit(Am.USER_UNPUBLISHED, r, e)) : void 0;\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleMuteStream\", function (e, t, i) {\n        NE.debug(\"[\".concat(_this254._clientId, \"] receive mute message\"), e, t, i);\n        var r = _this254._users.find(function (t) {\n          return t.uid === e;\n        });\n        if (!r) return void NE.warning(\"[\".concat(_this254._clientId, \"] can not find remote user, ignore mute event, uid: \").concat(e));\n        var n = \"audio\" === t ? r.hasAudio : r.hasVideo;\n        if (\"audio\" === t) {\n          r._trust_audio_mute_state_ = !0;\n          var _t191 = r._audio_muted_;\n          if (r._audio_muted_ = i, r._audio_muted_ === _t191) return;\n          {\n            var _t192 = r._audio_muted_ ? \"mute-audio\" : \"unmute-audio\";\n            NE.debug(\"[\".concat(_this254._clientId, \"] user-info-update, uid: \").concat(e, \", msg: \").concat(_t192)), _this254.emit(Am.USER_INFO_UPDATED, e, _t192);\n          }\n        } else {\n          r._trust_video_mute_state_ = !0;\n          var _t193 = r._video_muted_;\n          if (r._video_muted_ = i, r._video_muted_ === _t193) return;\n          {\n            var _t194 = r._video_muted_ ? \"mute-video\" : \"unmute-video\";\n            NE.debug(\"[\".concat(_this254._clientId, \"] user-info-update, uid: \").concat(e, \", msg: \").concat(_t194)), _this254.emit(Am.USER_INFO_UPDATED, e, _t194);\n          }\n        }\n        var o = \"audio\" === t ? r.hasAudio : r.hasVideo;\n        if (n !== o) {\n          if (!n && o) {\n            return (\"audio\" === t ? r._audioSSRC : r._videoSSRC) ? (NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(e, \" published \").concat(t)), void _this254.emit(Am.USER_PUBLISHED, r, t)) : void NE.warning(\"[\".concat(_this254._clientId, \"] remote user \").concat(e, \" receive \").concat(t, \" unmute message  before add stream message, \").concat(t, \" SSRC doesn't exist yet.\"));\n          }\n          \"video\" === t && r._videoTrack && r._videoTrack._destroy(), \"audio\" === t && r._audioTrack, _this254._p2pChannel.muteRemote(r, t), NE.info(\"[\".concat(_this254._clientId, \"] remote user \").concat(e, \" unpublished \").concat(t)), _this254.emit(Am.USER_UNPUBLISHED, r, t);\n        }\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleP2PLost\", /*#__PURE__*/function () {\n        var _ref69 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee269(e) {\n          return _regeneratorRuntime().wrap(function _callee269$(_context270) {\n            while (1) switch (_context270.prev = _context270.next) {\n              case 0:\n                NE.debug(\"[\".concat(_this254._clientId, \"] receive p2p lost\"), e);\n                if (!(parseInt(e.p2pid, 10) === _this254.store.p2pId)) {\n                  _context270.next = 6;\n                  break;\n                }\n                _context270.next = 4;\n                return _this254._p2pChannel.requestReconnect();\n              case 4:\n                _context270.next = 7;\n                break;\n              case 6:\n                NE.warning(\"P2PLost stream not found\", e);\n              case 7:\n              case \"end\":\n                return _context270.stop();\n            }\n          }, _callee269);\n        }));\n        return function (_x415) {\n          return _ref69.apply(this, arguments);\n        };\n      }()), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleTokenWillExpire\", function () {\n        NE.debug(\"[\".concat(_this254._clientId, \"] received message onTokenPrivilegeWillExpire\")), _this254.emit(Am.ON_TOKEN_PRIVILEGE_WILL_EXPIRE);\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleBeforeUnload\", function (e) {\n        \"beforeunload\" === e.type && void 0 !== e.returnValue && \"\" !== e.returnValue || (_this254.leave(), NE.info(\"[\".concat(_this254._clientId, \"] auto leave onbeforeunload or pagehide\")));\n      }), mp(_assertThisInitialized(_assertThisInitialized(_this254)), \"_handleUpdateNetworkQuality\", function () {\n        if (\"normal\" === _this254._networkQualitySensitivity) return;\n        if (navigator && void 0 !== navigator.onLine && !navigator.onLine) return void _this254.emit(Am.NETWORK_QUALITY, {\n          downlinkNetworkQuality: 6,\n          uplinkNetworkQuality: 6\n        });\n        var e = {\n          downlinkNetworkQuality: 0,\n          uplinkNetworkQuality: 0\n        };\n        e.uplinkNetworkQuality = _this254._p2pChannel.getUplinkNetworkQuality(), e.downlinkNetworkQuality = _this254._p2pChannel.getDownlinkNetworkQuality(), _this254.emit(Am.NETWORK_QUALITY, e);\n      }), _this254._codec = e.codec, _this254._mode = e.mode, _this254._clientId = MR(5, \"client-\"), _this254.store = new yL(e.codec, e.audioCodec, e.mode, _this254._clientId), _this254.store.clientCreated(), e.proxyServer && _this254.setProxyServer(e.proxyServer, !0), e.turnServer && _this254.setTurnServer(e.turnServer, !0), NE.info(\"[\".concat(_this254._clientId, \"] Initializing AgoraRTC client v\").concat(PE, \" build: \").concat(DE, \", mode: \").concat(_this254._mode, \", codec: \").concat(_this254._codec)), e.clientRoleOptions) try {\n        jm(e.clientRoleOptions), t = Object.assign({}, e.clientRoleOptions);\n      } catch (e) {\n        NE.warning(\"[\".concat(_this254._clientId, \"] \").concat(e.toString()));\n      }\n      _this254._statsCollector = new fR(_this254.store), _this254._statsCollector.onStatsException = function (e, t, i) {\n        NE.debug(\"[\".concat(_this254._clientId, \"] receive exception msg, code: \").concat(e, \", msg: \").concat(t, \", uid: \").concat(i)), _this254.emit(Am.EXCEPTION, {\n          code: e,\n          msg: t,\n          uid: i\n        });\n      }, _this254._statsCollector.onUploadPublishDuration = function (e, t, i, r) {\n        var n = _this254._users.find(function (t) {\n          return t.uid === e;\n        });\n        n && IT.peerPublishStatus(_this254._sessionId, {\n          subscribeElapse: r,\n          audioPublishDuration: t,\n          videoPublishDuration: i,\n          peer: n._uintid\n        });\n      }, _this254._gateway = new _O(_this254.store, {\n        clientId: _this254._clientId,\n        mode: _this254._mode,\n        codec: _this254._codec,\n        websocketRetryConfig: e.websocketRetryConfig || RE,\n        httpRetryConfig: e.httpRetryConfig || RE,\n        forceWaitGatewayResponse: void 0 === e.forceWaitGatewayResponse || e.forceWaitGatewayResponse,\n        statsCollector: _this254._statsCollector,\n        role: e.role,\n        clientRoleOptions: t\n      }), _this254._config = e, _this254._configDistribute = new HO(), _this254._p2pChannel = new pL(_this254.store, _this254._statsCollector), _this254._handleP2PChannelEvents(), _this254._handleGatewayEvents(), _this254._handleGatewaySignalEvents();\n      return _possibleConstructorReturn(_this254);\n    }\n    _createClass(Yk, [{\n      key: \"join\",\n      value: function () {\n        var _join4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee271(e, t, i, r, n) {\n          var _this255 = this;\n          var o, s, a, _e210, c, d, _e211, u, l, _r55, _n67, _e212, _e213, _o35, _s41, _a25, _t195, h;\n          return _regeneratorRuntime().wrap(function _callee271$(_context272) {\n            while (1) switch (_context272.prev = _context272.next) {\n              case 0:\n                o = ++this._numberOfJoinCount;\n                this.store.joinStart(), r && (this.store.uid = r);\n                s = AL(), a = OL() ? window.isSecureContext : \"Browser Not Support\";\n                if (!OL() && !s || !window.isSecureContext) {\n                  _e210 = \"The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser\";\n                  NE.warning(_e210);\n                }\n                c = UR();\n                \"DISCONNECTED\" === this.connectionState && (this.store.avoidJoinStart = Math.round(Date.now()), NE.debug(\"[\".concat(this._clientId, \"] set avoidJoinStart to \").concat(this.store.avoidJoinStart)));\n                d = IT.reportApiInvoke(c, {\n                  name: Em.JOIN,\n                  options: [e, t, i, r],\n                  states: {\n                    isHttps: s,\n                    isSecureContext: a\n                  },\n                  tag: fm.TRACER\n                });\n                IT.setAppId(e);\n                _context272.prev = 8;\n                if (!(!i && null !== i)) {\n                  _context272.next = 11;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"Invalid token: \".concat(i, \". If you don not use token, set it to null\"));\n              case 11:\n                i && Qf(i, \"token\", 1, 2047), Qf(e, \"appid\", 1, 2047), $f(t), r && em(r), n && Qf(n, \"optionalInfo\", 1, 2047);\n                _context272.next = 17;\n                break;\n              case 14:\n                _context272.prev = 14;\n                _context272.t0 = _context272[\"catch\"](8);\n                throw d.onError(_context272.t0), _context272.t0;\n              case 17:\n                if (!(NE.info(\"[\".concat(this._clientId, \"] start join channel \").concat(t, \", join number: \").concat(o)), this._leaveMutex.isLocked)) {\n                  _context272.next = 24;\n                  break;\n                }\n                NE.debug(\"[\".concat(this._clientId, \"] join: waiting leave operation\"));\n                _context272.next = 21;\n                return this._leaveMutex.lock();\n              case 21:\n                _context272.t1 = _context272.sent;\n                (0, _context272.t1)();\n                NE.debug(\"[\".concat(this._clientId, \"] join: continue\"));\n              case 24:\n                if (!(this._joinAndNotLeaveYet = !0, \"DISCONNECTED\" !== this.connectionState)) {\n                  _context272.next = 27;\n                  break;\n                }\n                _e211 = new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already in connecting/connected state\"));\n                throw d.onError(_e211), _e211;\n              case 27:\n                this._sessionId || (this._sessionId = c, this.store.sessionId = this._sessionId), this._gateway.state = \"CONNECTING\";\n                u = Jk({\n                  clientId: this._clientId,\n                  appId: e,\n                  sid: this._sessionId,\n                  cname: t,\n                  uid: \"string\" != typeof r ? r : null,\n                  turnServer: this._turnServer,\n                  proxyServer: this._proxyServer,\n                  token: i || e,\n                  cloudProxyServer: this._cloudProxyServerMode,\n                  optionalInfo: n,\n                  license: this._license,\n                  useLocalAccessPoint: this._useLocalAccessPoint\n                }, void 0 !== this._remoteDefaultVideoStreamType && {\n                  defaultVideoStream: this._remoteDefaultVideoStreamType\n                });\n                if (!(this._useLocalAccessPoint && (u.setLocalAPVersion = this._setLocalAPVersion), \"string\" == typeof r && (u.stringUid = r, this._uintUid ? (u.uid = this._uintUid, this._uintUid = void 0) : u.uid = 0), \"none\" !== this._encryptionMode && this._encryptionSecret)) {\n                  _context272.next = 37;\n                  break;\n                }\n                u.aesmode = this._encryptionMode;\n                _context272.next = 33;\n                return function () {\n                  var _ref70 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee270(e) {\n                    var t, i, r, n;\n                    return _regeneratorRuntime().wrap(function _callee270$(_context271) {\n                      while (1) switch (_context271.prev = _context271.next) {\n                        case 0:\n                          t = zR(\"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\\nxQiYDz3vqa6bP29adwIDAQAB\");\n                          _context271.next = 3;\n                          return window.crypto.subtle.importKey(\"spki\", t, {\n                            name: \"RSA-OAEP\",\n                            hash: \"SHA-256\"\n                          }, !0, [\"encrypt\"]);\n                        case 3:\n                          i = _context271.sent;\n                          r = mT(e);\n                          _context271.next = 7;\n                          return window.crypto.subtle.encrypt({\n                            name: \"RSA-OAEP\"\n                          }, i, r);\n                        case 7:\n                          n = _context271.sent;\n                          return _context271.abrupt(\"return\", QR(new Uint8Array(n)));\n                        case 9:\n                        case \"end\":\n                          return _context271.stop();\n                      }\n                    }, _callee270);\n                  }));\n                  return function (_x421) {\n                    return _ref70.apply(this, arguments);\n                  };\n                }()(this._encryptionSecret);\n              case 33:\n                u.aespassword = _context272.sent;\n                if (this._joinAndNotLeaveYet) {\n                  _context272.next = 36;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already left\"));\n              case 36:\n                this._encryptionSalt && (u.aessalt = this._encryptionSalt);\n              case 37:\n                this._startSession(this._sessionId, {\n                  channel: t,\n                  appId: e\n                });\n                l = this._sessionId;\n                setTimeout(function () {\n                  \"CONNECTING\" === _this255.connectionState && l === _this255._sessionId && IT.joinChannelTimeout(_this255._sessionId, 5);\n                }, 5e3);\n                _context272.prev = 40;\n                _n67 = u.cloudProxyServer;\n                if ([\"proxy3\", \"proxy4\", \"proxy5\"].includes(_n67)) {\n                  _e212 = HE(\"PROXY_SERVER_TYPE3\");\n                  Array.isArray(_e212) ? u.proxyServer = _e212[0] : u.proxyServer = _e212;\n                }\n                if (!(IT.setProxyServer(u.proxyServer), NE.setProxyServer(u.proxyServer), this.store.requestAPStart(), u.stringUid && !u.uid)) {\n                  _context272.next = 54;\n                  break;\n                }\n                _context272.next = 46;\n                return UO(u.stringUid, u, this._axiosCancelSource.token, this._config.httpRetryConfig || RE, this.store);\n              case 46:\n                _e213 = _context272.sent;\n                NE.debug(\"getUserAccount Success \".concat(u.stringUid, \" => \").concat(_e213));\n                u.uid = _e213;\n                _context272.next = 51;\n                return MO(u, this._axiosCancelSource.token, this._config.httpRetryConfig || RE, !0, this.store);\n              case 51:\n                _r55 = _context272.sent;\n                _context272.next = 57;\n                break;\n              case 54:\n                _context272.next = 56;\n                return MO(u, this._axiosCancelSource.token, this._config.httpRetryConfig || RE, !0, this.store);\n              case 56:\n                _r55 = _context272.sent;\n              case 57:\n                if (this._joinAndNotLeaveYet) {\n                  _context272.next = 59;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already left\"));\n              case 59:\n                this.store.requestAPEnd(), setTimeout(function () {\n                  _this255._configDistribute.startGetConfigDistribute(u, _this255._axiosCancelSource.token), _this255._configDistribute.on(Rg.UPDATE_BITRATE_LIMIT, function (e) {\n                    _this255._p2pChannel.updateBitrateLimit(e);\n                  });\n                }, 0), this._key = i || e;\n                _o35 = _r55.gatewayInfo;\n                this._joinInfo = Jk(Jk({}, u), {}, {\n                  cid: _o35.cid,\n                  uid: u.uid ? u.uid : _o35.uid,\n                  vid: _o35.vid,\n                  apResponse: _o35.res,\n                  uni_lbs_ip: _o35.uni_lbs_ip,\n                  gatewayAddrs: _o35.gatewayAddrs\n                });\n                _context272.next = 64;\n                return this._joinGateway();\n              case 64:\n                _s41 = _context272.sent;\n                if (this._joinAndNotLeaveYet) {\n                  _context272.next = 67;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client already left\"));\n              case 67:\n                d.onSuccess(_s41), this._appId = e, this._channelName = u.cname, this._uid = _s41, this.store.uid = _s41, setTimeout(function () {\n                  _this255._networkQualityInterval && window.clearInterval(_this255._networkQualityInterval), _this255._networkQualityInterval = window.setInterval(_this255._handleUpdateNetworkQuality, 2e3), window.addEventListener(zh() ? \"beforeunload\" : \"pagehide\", _this255._handleBeforeUnload);\n                }, 0);\n                _a25 = u.stringUid ? \"string uid: \".concat(u.stringUid, \",uid: \").concat(u.uid) : \"uid: \".concat(this._uid);\n                return _context272.abrupt(\"return\", (NE.info(\"[\".concat(this._clientId, \"] Joining channel success: channel: \").concat(t, \",\").concat(_a25)), setTimeout(function () {\n                  NE.startUpload();\n                }, 5e3), this.store.joinEnd(), h = this, ZE.includes(h) || ZE.push(h), _s41));\n              case 72:\n                _context272.prev = 72;\n                _context272.t2 = _context272[\"catch\"](40);\n                _t195 = Array.isArray(_context272.t2) ? _context272.t2[0] : _context272.t2;\n                throw NE.error(\"[\".concat(this._clientId, \"] join number: \").concat(o, \", Joining channel failed, rollback\"), _t195), _t195.code !== TE.OPERATION_ABORTED && this._numberOfJoinCount === o && (this._gateway.state = \"DISCONNECTED\", this._reset()), d.onError(_t195), _t195;\n              case 76:\n              case \"end\":\n                return _context272.stop();\n            }\n          }, _callee271, this, [[8, 14], [40, 72]]);\n        }));\n        function join(_x416, _x417, _x418, _x419, _x420) {\n          return _join4.apply(this, arguments);\n        }\n        return join;\n      }()\n    }, {\n      key: \"_joinGateway\",\n      value: function _joinGateway() {\n        var _this256 = this;\n        if (!this._joinInfo || !this._key) throw new vE(TE.INVALID_OPERATION);\n        return this._gateway.join(this._joinInfo, this._key, !(\"disabled\" !== this._joinInfo.cloudProxyServer || this._joinInfo.proxyServer || !HE(\"JOIN_WITH_FALLBACK_SIGNAL_PROXY\"))).then(function (e) {\n          return e;\n        }).catch(function (e) {\n          if (e.code === TE.INIT_WEBSOCKET_TIMEOUT) return _this256._gateway.leave(!0, Cm.FALLBACK), e;\n          if (e.code === TE.INIT_DATACHANNEL_TIMEOUT) return _this256._gateway.leave(!0, Cm.FALLBACK), e;\n          throw e;\n        }).then(function (e) {\n          if (e instanceof vE) {\n            if (e.code === TE.INIT_WEBSOCKET_TIMEOUT) {\n              if (NE.info(\"[\".concat(_this256._clientId, \"] join timeout, fallback to proxy\")), !_this256._joinInfo || !_this256._key) throw new vE(TE.INVALID_OPERATION);\n              _this256._joinInfo.cloudProxyServer = \"fallback\", _this256._cloudProxyServerMode = \"fallback\", _this256.store.cloudProxyServerMode = \"fallback\";\n              var _e214 = HE(\"PROXY_SERVER_TYPE3\");\n              if (Array.isArray(_e214)) {\n                if (_this256._joinInfo.apUrl) {\n                  var _t196 = new YA(_this256._joinInfo.apUrl).host.split(\".\"),\n                    i = _t196.slice(_t196.length - 2).join(\".\");\n                  _e214.forEach(function (e) {\n                    _this256._joinInfo && e.includes(i) && (_this256._joinInfo.proxyServer = e);\n                  }), _this256._joinInfo.proxyServer || (_this256._joinInfo.proxyServer = _e214[0]);\n                } else _this256._joinInfo.proxyServer = _e214[0];\n              } else _this256._joinInfo.proxyServer = _e214;\n              var t = HE(\"LOG_UPLOAD_SERVER\").match(/.+:(\\d{1,5})$/);\n              t && t[1] && \"443\" !== t[1] && NE.setProxyServer(_this256._joinInfo.proxyServer), \"443\" !== HE(\"STATS_COLLECTOR_PORT\").toString() && IT.setProxyServer(_this256._joinInfo.proxyServer);\n              return IT.reportApiInvoke(_this256._sessionId, {\n                name: Em.JOIN_FALLBACK_TO_PROXY,\n                options: [_this256._joinInfo.proxyServer],\n                tag: fm.TRACER\n              }).onSuccess(), _this256.emit(Am.JOIN_FALLBACK_TO_PROXY, _this256._joinInfo.proxyServer), _this256._gateway.join(_this256._joinInfo, _this256._key);\n            }\n            if (NE.info(\"[\".concat(_this256._clientId, \"] join by datachannel timeout, fallback to websocket\")), !_this256._joinInfo || !_this256._key) throw new vE(TE.INVALID_OPERATION);\n            return IT.reportApiInvoke(_this256._sessionId, {\n              name: Em.DATACHANNEL_FAILBACK,\n              options: [_this256.store.clientId],\n              tag: fm.TRACER\n            }).onSuccess(), _this256._joinGateway();\n          }\n          return e;\n        }).then(function (e) {\n          return e;\n        });\n      }\n    }, {\n      key: \"leave\",\n      value: function () {\n        var _leave2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee272() {\n          var e;\n          return _regeneratorRuntime().wrap(function _callee272$(_context273) {\n            while (1) switch (_context273.prev = _context273.next) {\n              case 0:\n                NE.info(\"[\".concat(this._clientId, \"] Leaving channel\")), window.removeEventListener(zh() ? \"beforeunload\" : \"pagehide\", this._handleBeforeUnload), this._reset(), function (e) {\n                  var t = ZE.indexOf(e);\n                  -1 !== t && ZE.splice(t, 1);\n                }(this);\n                _context273.next = 3;\n                return this._leaveMutex.lock();\n              case 3:\n                e = _context273.sent;\n                if (!(\"DISCONNECTED\" === this.connectionState)) {\n                  _context273.next = 6;\n                  break;\n                }\n                return _context273.abrupt(\"return\", (NE.info(\"[\".concat(this._clientId, \"] Leaving channel repeated, success\")), void e()));\n              case 6:\n                _context273.next = 8;\n                return this._gateway.leave(\"CONNECTED\" !== this.connectionState);\n              case 8:\n                NE.info(\"[\".concat(this._clientId, \"] Leaving channel success\"));\n                this._joinAndNotLeaveYet = !1;\n                this.store.resetJoinChannelServiceRecords();\n                e();\n              case 12:\n              case \"end\":\n                return _context273.stop();\n            }\n          }, _callee272, this);\n        }));\n        function leave() {\n          return _leave2.apply(this, arguments);\n        }\n        return leave;\n      }()\n    }, {\n      key: \"publish\",\n      value: function () {\n        var _publish2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee273(e) {\n          var _this257 = this;\n          var t,\n            _iterator35,\n            _step35,\n            _i115,\n            i,\n            _args274 = arguments;\n          return _regeneratorRuntime().wrap(function _callee273$(_context274) {\n            while (1) switch (_context274.prev = _context274.next) {\n              case 0:\n                t = !(_args274.length > 1 && void 0 !== _args274[1]) || _args274[1];\n                if (!(Array.isArray(e) || (e = [e]), 0 === e.length)) {\n                  _context274.next = 3;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"track list is empty\");\n              case 3:\n                if (!(\"audience\" === this._gateway.role)) {\n                  _context274.next = 5;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"audience can not publish stream\");\n              case 5:\n                _iterator35 = _createForOfIteratorHelper(e);\n                _context274.prev = 6;\n                _iterator35.s();\n              case 8:\n                if ((_step35 = _iterator35.n()).done) {\n                  _context274.next = 16;\n                  break;\n                }\n                _i115 = _step35.value;\n                if (_i115 instanceof wT) {\n                  _context274.next = 12;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"parameter is not local track\");\n              case 12:\n                if (!(!_i115._enabled && t)) {\n                  _context274.next = 14;\n                  break;\n                }\n                throw new vE(TE.TRACK_IS_DISABLED, \"can not publish a disabled track: \".concat(_i115.getTrackId()));\n              case 14:\n                _context274.next = 8;\n                break;\n              case 16:\n                _context274.next = 21;\n                break;\n              case 18:\n                _context274.prev = 18;\n                _context274.t0 = _context274[\"catch\"](6);\n                _iterator35.e(_context274.t0);\n              case 21:\n                _context274.prev = 21;\n                _iterator35.f();\n                return _context274.finish(21);\n              case 24:\n                NE.info(\"[\".concat(this._clientId, \"] Publishing tracks, id \").concat(e.map(function (e) {\n                  return \"\".concat(e.getTrackId(), \" \");\n                })));\n                _context274.next = 27;\n                return this._configDistribute.awaitConfigDistributeComplete();\n              case 27:\n                t && e.forEach(function (e) {\n                  var t = _this257._configDistribute.getBitrateLimit();\n                  e instanceof Ew && t && e.setBitrateLimit(t.uplink);\n                });\n                _context274.next = 30;\n                return this._publishMutex.lock();\n              case 30:\n                i = _context274.sent;\n                _context274.prev = 31;\n                _context274.next = 34;\n                return this._publishHighStream(e);\n              case 34:\n                NE.info(\"[\".concat(this._clientId, \"] Publish success, id \").concat(e.map(function (e) {\n                  return \"\".concat(e.getTrackId(), \" \");\n                })));\n                _context274.next = 40;\n                break;\n              case 37:\n                _context274.prev = 37;\n                _context274.t1 = _context274[\"catch\"](31);\n                throw NE.error(\"[\".concat(this._clientId, \"] publish error\"), _context274.t1.toString()), _context274.t1;\n              case 40:\n                _context274.prev = 40;\n                i();\n                return _context274.finish(40);\n              case 43:\n              case \"end\":\n                return _context274.stop();\n            }\n          }, _callee273, this, [[6, 18, 21, 24], [31, 37, 40, 43]]);\n        }));\n        function publish(_x422) {\n          return _publish2.apply(this, arguments);\n        }\n        return publish;\n      }()\n    }, {\n      key: \"unpublish\",\n      value: function () {\n        var _unpublish3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee274(e) {\n          var t, i;\n          return _regeneratorRuntime().wrap(function _callee274$(_context275) {\n            while (1) switch (_context275.prev = _context275.next) {\n              case 0:\n                if (!(!this._joinInfo || void 0 === this._uid)) {\n                  _context275.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't unpublish stream, haven't joined yet!\");\n              case 2:\n                e ? Array.isArray(e) || (e = [e]) : e = this._p2pChannel.getAllTracks(!0), NE.info(\"[\".concat(this._clientId, \"] Unpublish tracks, tracks \").concat(e.map(function (e) {\n                  return \"\".concat(e.getTrackId(), \" \");\n                }), \" \"));\n                _context275.next = 5;\n                return this._publishMutex.lock();\n              case 5:\n                t = _context275.sent;\n                _context275.prev = 6;\n                _context275.next = 9;\n                return this._p2pChannel.unpublish(e);\n              case 9:\n                i = _context275.sent;\n                _context275.t0 = i;\n                if (!_context275.t0) {\n                  _context275.next = 14;\n                  break;\n                }\n                _context275.next = 14;\n                return this._gateway.unpublish(i, this._uid);\n              case 14:\n                NE.info(\"[\".concat(this._clientId, \"] Unpublish success,tracks \").concat(e.map(function (e) {\n                  return \"\".concat(e.getTrackId());\n                })));\n                _context275.next = 20;\n                break;\n              case 17:\n                _context275.prev = 17;\n                _context275.t1 = _context275[\"catch\"](6);\n                throw NE.error(\"[\".concat(this._clientId, \"] unpublish error\"), _context275.t1.toString()), _context275.t1;\n              case 20:\n                _context275.prev = 20;\n                t && t();\n                return _context275.finish(20);\n              case 23:\n              case \"end\":\n                return _context275.stop();\n            }\n          }, _callee274, this, [[6, 17, 20, 23]]);\n        }));\n        function unpublish(_x423) {\n          return _unpublish3.apply(this, arguments);\n        }\n        return unpublish;\n      }()\n    }, {\n      key: \"subscribe\",\n      value: function () {\n        var _subscribe3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee275(e, t) {\n          return _regeneratorRuntime().wrap(function _callee275$(_context276) {\n            while (1) switch (_context276.prev = _context276.next) {\n              case 0:\n                return _context276.abrupt(\"return\", this._subscribe(e, t));\n              case 1:\n              case \"end\":\n                return _context276.stop();\n            }\n          }, _callee275, this);\n        }));\n        function subscribe(_x424, _x425) {\n          return _subscribe3.apply(this, arguments);\n        }\n        return subscribe;\n      }()\n    }, {\n      key: \"_subscribe\",\n      value: function () {\n        var _subscribe4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee276(e, t, i) {\n          var _this258 = this;\n          var _t197, _t198, _i116, r, n, o, s, a, _i117;\n          return _regeneratorRuntime().wrap(function _callee276$(_context277) {\n            while (1) switch (_context277.prev = _context277.next) {\n              case 0:\n                if (!(Jf(t, \"mediaType\", [\"audio\", \"video\"]), !this._joinInfo)) {\n                  _context277.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't subscribe stream, not joined\");\n              case 2:\n                if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                  _context277.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't subscribe stream in \".concat(this.connectionState, \" state\"));\n              case 4:\n                if (this._users.find(function (t) {\n                  return t === e;\n                })) {\n                  _context277.next = 7;\n                  break;\n                }\n                _t197 = new vE(TE.INVALID_REMOTE_USER, \"user is not in the channel\");\n                throw NE.error(\"[\".concat(this._clientId, \"] can not subscribe \").concat(e.uid, \", this user is not in the channel\")), _t197;\n              case 7:\n                if (!(!e.hasAudio && !e.hasVideo)) {\n                  _context277.next = 10;\n                  break;\n                }\n                _t198 = new vE(TE.INVALID_REMOTE_USER, \"user is not published\");\n                throw NE.error(\"[\".concat(this._clientId, \"] can not subscribe \").concat(e.uid, \", user is not published\")), _t198;\n              case 10:\n                if (i || (\"audio\" !== t || e.hasAudio && void 0 !== e._audioSSRC) && (\"video\" !== t || e.hasVideo && void 0 !== e._videoSSRC)) {\n                  _context277.next = 13;\n                  break;\n                }\n                _i116 = new vE(TE.REMOTE_USER_IS_NOT_PUBLISHED);\n                throw NE.error(\"[\".concat(this._clientId, \"] can not subscribe \").concat(e.uid, \" with mediaType \").concat(t, \", remote track is not published\")), _i116;\n              case 13:\n                r = \"audio\" === t ? e._audioSSRC : e._videoSSRC;\n                n = \"audio\" === t ? e._audioOrtc : e._videoOrtc;\n                o = \"video\" === t ? e._rtxSsrcId : void 0;\n                s = {\n                  stream_type: \"audio\" === t ? yg.AUDIO : yg.VIDEO,\n                  ssrcId: r\n                };\n                _context277.next = 19;\n                return this._subscribeMutex.lock();\n              case 19:\n                a = _context277.sent;\n                NE.info(\"[\".concat(this._clientId, \"] subscribe user \").concat(e.uid, \", mediaType: \").concat(t));\n                _context277.prev = 21;\n                _context277.next = 24;\n                return this._p2pChannel.hasRemoteMediaWithLock(e, t);\n              case 24:\n                if (!_context277.sent) {\n                  _context277.next = 29;\n                  break;\n                }\n                _context277.next = 27;\n                return this._p2pChannel.unmuteRemote(e, t);\n              case 27:\n                _context277.next = 54;\n                break;\n              case 29:\n                _context277.prev = 29;\n                pR.markSubscribeStart(this.store.clientId, r);\n                this.store.subscribe(e.uid, t, Date.now());\n                _context277.next = 34;\n                return this._p2pChannel.subscribe(e, t, r, o, n);\n              case 34:\n                _context277.prev = 34;\n                _context277.next = 37;\n                return this._gateway.subscribe(e.uid, s, !0);\n              case 37:\n                _context277.next = 48;\n                break;\n              case 39:\n                _context277.prev = 39;\n                _context277.t0 = _context277[\"catch\"](34);\n                if (!((null == _context277.t0 ? void 0 : _context277.t0.code) !== TE.WS_ABORT)) {\n                  _context277.next = 45;\n                  break;\n                }\n                _context277.next = 44;\n                return this._p2pChannel.unsubscribe(e, t);\n              case 44:\n                throw _context277.t0;\n              case 45:\n                _context277.next = 47;\n                return this._p2pChannel.unsubscribe(e, t, !0);\n              case 47:\n                this._p2pChannel.setPendingRemoteMedia(e, t);\n              case 48:\n                this.store.subscribe(e.uid, t, void 0, Date.now()), this._p2pChannel.reportSubscribeEvent(!0, null, e, t);\n                _context277.next = 54;\n                break;\n              case 51:\n                _context277.prev = 51;\n                _context277.t1 = _context277[\"catch\"](29);\n                throw this._p2pChannel.reportSubscribeEvent(!1, null == _context277.t1 ? void 0 : _context277.t1.code, e, t), _context277.t1;\n              case 54:\n                NE.info(\"[\".concat(this._clientId, \"] subscribe success user \").concat(e.uid, \", mediaType: \").concat(t)), this._defaultStreamFallbackType && this.setStreamFallbackOption(e.uid, this._defaultStreamFallbackType).catch(function (e) {\n                  NE.warning(\"[\".concat(_this258._clientId, \"] auto set fallback failed\"), e);\n                });\n                _i117 = \"audio\" === t ? e._audioTrack : e._videoTrack;\n                if (_i117) {\n                  _context277.next = 58;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"can not find remote track in user object\");\n              case 58:\n                return _context277.abrupt(\"return\", _i117);\n              case 61:\n                _context277.prev = 61;\n                _context277.t2 = _context277[\"catch\"](21);\n                throw NE.error(\"[\".concat(this._clientId, \"] subscribe user \").concat(e.uid, \" error\"), _context277.t2), _context277.t2;\n              case 64:\n                _context277.prev = 64;\n                a();\n                return _context277.finish(64);\n              case 67:\n              case \"end\":\n                return _context277.stop();\n            }\n          }, _callee276, this, [[21, 61, 64, 67], [29, 51], [34, 39]]);\n        }));\n        function _subscribe(_x426, _x427, _x428) {\n          return _subscribe4.apply(this, arguments);\n        }\n        return _subscribe;\n      }()\n    }, {\n      key: \"massSubscribe\",\n      value: function () {\n        var _massSubscribe2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee277(e) {\n          var _this259 = this;\n          var t, i, r, n, o, s, _loop5, _t199, _ret, _t200, _r56, _n68, _o36, _s42, _r57, _a26, _i118, _e215, _e216, _iterator36, _step36, _e218, _t202, _i119, _t203;\n          return _regeneratorRuntime().wrap(function _callee277$(_context279) {\n            while (1) switch (_context279.prev = _context279.next) {\n              case 0:\n                if (!(Zf(e, \"subscribeList\"), !this._joinInfo)) {\n                  _context279.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't subscribe stream, not joined\");\n              case 2:\n                if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                  _context279.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't subscribe stream in \".concat(this.connectionState, \" state\"));\n              case 4:\n                t = Date.now();\n                i = new Map();\n                _context279.next = 8;\n                return this._subscribeMutex.lock();\n              case 8:\n                r = _context279.sent;\n                NE.info(\"[\".concat(this._clientId, \"]start massSubscribe user \").concat(e.map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType;\n                  return \"user: \".concat(null == t ? void 0 : t.uid, \", mediaType: \").concat(i);\n                }).join(\"; \")));\n                n = (e = _toConsumableArray(e)).map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType;\n                  return {\n                    user: t,\n                    mediaType: i\n                  };\n                });\n                _context279.next = 13;\n                return this._p2pChannel.globalLock();\n              case 13:\n                o = _context279.sent;\n                _context279.prev = 14;\n                _loop5 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop5() {\n                  var r, o, s, _e219, _i120, _i121, a, c;\n                  return _regeneratorRuntime().wrap(function _loop5$(_context278) {\n                    while (1) switch (_context278.prev = _context278.next) {\n                      case 0:\n                        r = e[_t199], o = r.user, s = r.mediaType;\n                        if (!(Jf(s, \"mediaType\", [\"audio\", \"video\"]), !o)) {\n                          _context278.next = 4;\n                          break;\n                        }\n                        _e219 = new vE(TE.INVALID_PARAMS, \"user property does not exist in subscribeList item\");\n                        throw NE.error(\"[\".concat(_this259._clientId, \"] user property does not exist in subscribeList item\")), _e219;\n                      case 4:\n                        if (_this259._users.find(function (e) {\n                          return e === o;\n                        })) {\n                          _context278.next = 8;\n                          break;\n                        }\n                        _i120 = new vE(TE.INVALID_REMOTE_USER, \"user is not in the channel\");\n                        NE.error(\"[\".concat(_this259._clientId, \"] can not massSubscribe \").concat(o.uid, \", this user is not in the channel\")), n[_t199].error = _i120, e.splice(_t199, 1);\n                        return _context278.abrupt(\"return\", \"continue\");\n                      case 8:\n                        if (!(\"audio\" === s && (!o.hasAudio || void 0 === o._audioSSRC) || \"video\" === s && (!o.hasVideo || void 0 === o._videoSSRC))) {\n                          _context278.next = 12;\n                          break;\n                        }\n                        _i121 = new vE(TE.REMOTE_USER_IS_NOT_PUBLISHED);\n                        NE.error(\"[\".concat(_this259._clientId, \"] can not subscribe \").concat(o.uid, \" with mediaType \").concat(s, \", remote user is not published\")), n[_t199].error = _i121, e.splice(_t199, 1);\n                        return _context278.abrupt(\"return\", \"continue\");\n                      case 12:\n                        a = dg.Video | dg.LwoVideo, c = i.get(o);\n                        if (!c) {\n                          _context278.next = 20;\n                          break;\n                        }\n                        if (!(\"video\" === s ? c & a : c & dg.Audio)) {\n                          _context278.next = 17;\n                          break;\n                        }\n                        e.splice(_t199, 1), NE.warning(\"repeat massSubscribe user:\".concat(o.uid, \", mediaType:\").concat(s, \" twice\"));\n                        return _context278.abrupt(\"return\", \"continue\");\n                      case 17:\n                        i.set(o, c | (\"video\" === s ? a : dg.Audio));\n                        _context278.next = 21;\n                        break;\n                      case 20:\n                        i.set(o, \"video\" === s ? a : dg.Audio);\n                      case 21:\n                      case \"end\":\n                        return _context278.stop();\n                    }\n                  }, _loop5);\n                });\n                _t199 = e.length - 1;\n              case 17:\n                if (!(_t199 >= 0)) {\n                  _context279.next = 25;\n                  break;\n                }\n                return _context279.delegateYield(_loop5(), \"t0\", 19);\n              case 19:\n                _ret = _context279.t0;\n                if (!(_ret === \"continue\")) {\n                  _context279.next = 22;\n                  break;\n                }\n                return _context279.abrupt(\"continue\", 22);\n              case 22:\n                _t199--;\n                _context279.next = 17;\n                break;\n              case 25:\n                _t200 = e.length - 1;\n              case 26:\n                if (!(_t200 >= 0)) {\n                  _context279.next = 36;\n                  break;\n                }\n                _r56 = e[_t200], _n68 = _r56.user, _o36 = _r56.mediaType, _s42 = dg.Video | dg.LwoVideo;\n                if (!this._p2pChannel.hasRemoteMedia(_n68, _o36)) {\n                  _context279.next = 33;\n                  break;\n                }\n                _context279.next = 31;\n                return this._p2pChannel.unmuteRemoteNoLock(_n68, _o36);\n              case 31:\n                _r57 = i.get(_n68);\n                i.set(_n68, \"video\" === _o36 ? _r57 ^ _s42 : _r57 ^ dg.Audio), e.splice(_t200, 1);\n              case 33:\n                _t200--;\n                _context279.next = 26;\n                break;\n              case 36:\n                this.store.massSubscribe(e.map(function (e) {\n                  return {\n                    userId: e.user.uid,\n                    type: e.mediaType\n                  };\n                }), t);\n                _a26 = zi(s = Array.from(i.entries())).call(s, function (e, t) {\n                  var _t201 = _slicedToArray(t, 2),\n                    i = _t201[0],\n                    r = _t201[1];\n                  if (0 === r) return e;\n                  var n = {\n                    stream_id: i.uid,\n                    stream_type: r\n                  };\n                  return r & dg.Audio && (n.audio_ssrc = i._audioSSRC), r & dg.Video && (n.video_ssrc = i._videoSSRC), e.push(n), e;\n                }, []);\n                _context279.prev = 38;\n                _context279.t1 = e.length > 0;\n                if (!_context279.t1) {\n                  _context279.next = 43;\n                  break;\n                }\n                _context279.next = 43;\n                return this._p2pChannel.massSubscribeNoLock(e.map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType;\n                  return {\n                    user: t,\n                    mediaType: i,\n                    ssrcId: i === yg.VIDEO ? t._videoSSRC : t._audioSSRC,\n                    rtxSsrcId: t._rtxSsrcId\n                  };\n                }));\n              case 43:\n                _i118 = new Map();\n                if (!(_a26.length > 0)) {\n                  _context279.next = 49;\n                  break;\n                }\n                _context279.next = 47;\n                return this._gateway.subscribeAll(_a26, !0);\n              case 47:\n                _e215 = _context279.sent;\n                ((null == _e215 ? void 0 : _e215.users) || []).forEach(function (e) {\n                  var t = e.stream_id,\n                    r = e.video_error_code,\n                    n = e.audio_error_code,\n                    o = e.error_code;\n                  (r || n || o) && _i118.set(t, {\n                    video_error_code: r,\n                    audio_error_code: n,\n                    error_code: o\n                  });\n                });\n              case 49:\n                if (!(Array.from(_i118.entries()).length > 0)) {\n                  _context279.next = 53;\n                  break;\n                }\n                _e216 = Array.from(_i118.entries()).map(function (e) {\n                  var t,\n                    _e217 = _slicedToArray(e, 2),\n                    i = _e217[0],\n                    r = _e217[1];\n                  r.error_code || r.video_error_code && r.audio_error_code ? t = void 0 : r.video_error_code ? t = yg.VIDEO : r.audio_error_code && (t = yg.AUDIO);\n                  return {\n                    user: _this259.remoteUsers.find(function (e) {\n                      return e.uid === i;\n                    }),\n                    mediaType: t\n                  };\n                });\n                _context279.next = 53;\n                return this._p2pChannel.massUnsubscribeNoLock(_e216);\n              case 53:\n                _iterator36 = _createForOfIteratorHelper(n);\n                try {\n                  for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n                    _e218 = _step36.value;\n                    _t202 = _i118.get(_e218.user.uid);\n                    if (_t202) {\n                      _i119 = _t202.error_code || \"audio\" === _e218.mediaType && _t202.audio_error_code || \"video\" === _e218.mediaType && _t202.video_error_code;\n                      if (_i119) {\n                        _t203 = zA(_i119);\n                        NE.error(\"user:\".concat(_e218.user.uid, \" mediaType:\").concat(_e218.mediaType, \" has massSubscribe error \").concat(_t203.desc)), _e218.error = new vE(TE.SUBSCRIBE_FAILED, \"code \".concat(_i119, \": \").concat(_t203.desc));\n                      }\n                    }\n                    _e218.error || (\"video\" === _e218.mediaType ? _e218.track = _e218.user.videoTrack : _e218.track = _e218.user.audioTrack);\n                  }\n                } catch (err) {\n                  _iterator36.e(err);\n                } finally {\n                  _iterator36.f();\n                }\n                return _context279.abrupt(\"return\", (this.store.massSubscribe(n.filter(function (e) {\n                  return !e.error;\n                }).map(function (e) {\n                  return {\n                    userId: e.user.uid,\n                    type: e.mediaType\n                  };\n                }), void 0, Date.now()), n.forEach(function (e) {\n                  var i;\n                  IT.subscribe(_this259.store.sessionId, {\n                    succ: !!e.error,\n                    ec: (null === (i = e.error) || void 0 === i ? void 0 : i.code) || null,\n                    video: e.mediaType === yg.VIDEO,\n                    audio: e.mediaType === yg.AUDIO,\n                    peerid: e.user.uid,\n                    subscribeRequestid: e.mediaType === yg.VIDEO ? e.user._videoSSRC : e.user._audioSSRC,\n                    p2pid: _this259.store.p2pId,\n                    eventElapse: Math.floor(performance.now() - t)\n                  }, !0);\n                }), NE.info(\"[\".concat(this._clientId, \"] massSubscribe success \").concat(e.map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType;\n                  return \"user: \".concat(null == t ? void 0 : t.uid, \", mediaType: \").concat(i);\n                }).join(\"; \"))), n));\n              case 58:\n                _context279.prev = 58;\n                _context279.t2 = _context279[\"catch\"](38);\n                _context279.next = 62;\n                return this._p2pChannel.massUnsubscribeNoLock(e);\n              case 62:\n                throw _context279.t2;\n              case 63:\n                _context279.prev = 63;\n                o(), r();\n                return _context279.finish(63);\n              case 66:\n              case \"end\":\n                return _context279.stop();\n            }\n          }, _callee277, this, [[14,, 63, 66], [38, 58]]);\n        }));\n        function massSubscribe(_x429) {\n          return _massSubscribe2.apply(this, arguments);\n        }\n        return massSubscribe;\n      }()\n    }, {\n      key: \"unsubscribe\",\n      value: function () {\n        var _unsubscribe3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee278(e, t) {\n          var _t204, i;\n          return _regeneratorRuntime().wrap(function _callee278$(_context280) {\n            while (1) switch (_context280.prev = _context280.next) {\n              case 0:\n                if (!(t && Jf(t, \"mediaType\", [\"audio\", \"video\"]), !this._joinInfo)) {\n                  _context280.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't unsubscribe stream, haven't joined yet!\");\n              case 2:\n                if (this._users.find(function (t) {\n                  return t === e;\n                })) {\n                  _context280.next = 5;\n                  break;\n                }\n                _t204 = new vE(TE.INVALID_REMOTE_USER, \"user is not in the channel\");\n                throw NE.error(\"[\".concat(this._clientId, \"] can not unsubscribe \").concat(e.uid, \", user is not in the channel\")), _t204;\n              case 5:\n                NE.info(\"[\".concat(this._clientId, \"] unsubscribe uid: \").concat(e.uid, \", mediaType: \").concat(t));\n                _context280.prev = 6;\n                _context280.next = 9;\n                return this._p2pChannel.unsubscribe(e, t);\n              case 9:\n                i = _context280.sent;\n                _context280.t0 = i;\n                if (!_context280.t0) {\n                  _context280.next = 14;\n                  break;\n                }\n                _context280.next = 14;\n                return this._gateway.unsubscribe(i, e.uid);\n              case 14:\n                NE.info(\"[\".concat(this._clientId, \"] unsubscribe success uid: \").concat(e.uid, \", mediaType: \").concat(t));\n                _context280.next = 22;\n                break;\n              case 17:\n                _context280.prev = 17;\n                _context280.t1 = _context280[\"catch\"](6);\n                if (!(_context280.t1.code === TE.DISCONNECT_P2P)) {\n                  _context280.next = 21;\n                  break;\n                }\n                return _context280.abrupt(\"return\", void NE.warning(\"disconnecting p2p, abort unsubscribe request.\"));\n              case 21:\n                throw NE.error(\"[\".concat(this._clientId, \"] unsubscribe user \").concat(e.uid, \" error\"), _context280.t1.toString()), _context280.t1;\n              case 22:\n              case \"end\":\n                return _context280.stop();\n            }\n          }, _callee278, this, [[6, 17]]);\n        }));\n        function unsubscribe(_x430, _x431) {\n          return _unsubscribe3.apply(this, arguments);\n        }\n        return unsubscribe;\n      }()\n    }, {\n      key: \"massUnsubscribe\",\n      value: function () {\n        var _massUnsubscribe3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee279(e) {\n          var _this260 = this;\n          var t, _loop6, i, _ret2, _t205;\n          return _regeneratorRuntime().wrap(function _callee279$(_context282) {\n            while (1) switch (_context282.prev = _context282.next) {\n              case 0:\n                if (!(Zf(e, \"unsubscribeList\"), !this._joinInfo)) {\n                  _context282.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't unsubscribeAll stream, haven't joined yet!\");\n              case 2:\n                NE.info(\"[\".concat(this._clientId, \"] start massUnsubscribe \").concat(e.map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType;\n                  return \"user: \".concat(null == t ? void 0 : t.uid, \", mediaType: \").concat(i, \";\");\n                }).join())), e = _toConsumableArray(e);\n                t = new Map();\n                _loop6 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop6() {\n                  var _e$i, r, n, _e220, o, _s43, _a27;\n                  return _regeneratorRuntime().wrap(function _loop6$(_context281) {\n                    while (1) switch (_context281.prev = _context281.next) {\n                      case 0:\n                        _e$i = e[i], r = _e$i.user, n = _e$i.mediaType;\n                        if (r) {\n                          _context281.next = 4;\n                          break;\n                        }\n                        _e220 = new vE(TE.INVALID_PARAMS, \"user property does not exist in unsubscribeList item\");\n                        throw NE.error(\"[\".concat(_this260._clientId, \"] user property does not exist in unsubscribeList item\")), _e220;\n                      case 4:\n                        Jf(n, \"mediaType\", [\"video\", \"audio\", void 0]);\n                        if (_this260._users.find(function (e) {\n                          return e === r;\n                        })) {\n                          _context281.next = 8;\n                          break;\n                        }\n                        NE.warning(\"[\".concat(_this260._clientId, \"] can not unsubscribe \").concat(r.uid, \", user is not in the channel\")), e.splice(i, 1);\n                        return _context281.abrupt(\"return\", \"continue\");\n                      case 8:\n                        o = dg.Video | dg.LwoVideo;\n                        if (!t.has(r)) {\n                          _context281.next = 25;\n                          break;\n                        }\n                        _s43 = t.get(r);\n                        _context281.t0 = n;\n                        _context281.next = _context281.t0 === \"video\" ? 14 : _context281.t0 === \"audio\" ? 16 : 18;\n                        break;\n                      case 14:\n                        _a27 = _s43 & o;\n                        return _context281.abrupt(\"break\", 19);\n                      case 16:\n                        _a27 = _s43 & dg.Audio;\n                        return _context281.abrupt(\"break\", 19);\n                      case 18:\n                        _a27 = _s43 & (dg.Audio | o);\n                      case 19:\n                        if (!_a27) {\n                          _context281.next = 22;\n                          break;\n                        }\n                        NE.warning(\"repeat massUnsubscribe user:\".concat(r.uid, \",mediaType:\").concat(n, \" twice.\")), e.splice(i, 1);\n                        return _context281.abrupt(\"return\", \"continue\");\n                      case 22:\n                        n ? \"audio\" === n ? t.set(r, _s43 | dg.Audio) : \"video\" === n && t.set(r, _s43 | o) : t.set(r, _s43 | dg.Audio | o);\n                        _context281.next = 26;\n                        break;\n                      case 25:\n                        n ? \"audio\" === n ? t.set(r, dg.Audio) : \"video\" === n && t.set(r, o) : t.set(r, dg.Audio | o);\n                      case 26:\n                      case \"end\":\n                        return _context281.stop();\n                    }\n                  }, _loop6);\n                });\n                i = e.length - 1;\n              case 6:\n                if (!(i >= 0)) {\n                  _context282.next = 14;\n                  break;\n                }\n                return _context282.delegateYield(_loop6(), \"t0\", 8);\n              case 8:\n                _ret2 = _context282.t0;\n                if (!(_ret2 === \"continue\")) {\n                  _context282.next = 11;\n                  break;\n                }\n                return _context282.abrupt(\"continue\", 11);\n              case 11:\n                i--;\n                _context282.next = 6;\n                break;\n              case 14:\n                _context282.prev = 14;\n                _context282.next = 17;\n                return this._p2pChannel.massUnsubscribe(e);\n              case 17:\n                _t205 = _context282.sent;\n                _context282.t1 = _t205;\n                if (!_context282.t1) {\n                  _context282.next = 22;\n                  break;\n                }\n                _context282.next = 22;\n                return this._gateway.massUnsubscribe(_t205);\n              case 22:\n                NE.info(\"[\".concat(this._clientId, \"] massUnsubscribe success \").concat(e.map(function (e) {\n                  var t = e.user,\n                    i = e.mediaType;\n                  return \"user: \".concat(null == t ? void 0 : t.uid, \", mediaType: \").concat(i, \";\");\n                }).join()));\n                _context282.next = 30;\n                break;\n              case 25:\n                _context282.prev = 25;\n                _context282.t2 = _context282[\"catch\"](14);\n                if (!(_context282.t2.code === TE.DISCONNECT_P2P)) {\n                  _context282.next = 29;\n                  break;\n                }\n                return _context282.abrupt(\"return\", void NE.warning(\"disconnecting p2p, abort unsubscribe request.\"));\n              case 29:\n                throw NE.error(\"[\".concat(this._clientId, \"] massUnsubscribe error\"), _context282.t2.toString()), _context282.t2;\n              case 30:\n              case \"end\":\n                return _context282.stop();\n            }\n          }, _callee279, this, [[14, 25]]);\n        }));\n        function massUnsubscribe(_x432) {\n          return _massUnsubscribe3.apply(this, arguments);\n        }\n        return massUnsubscribe;\n      }()\n    }, {\n      key: \"setLowStreamParameter\",\n      value: function setLowStreamParameter(e) {\n        !function (e) {\n          if (!e) throw new vE(TE.INVALID_PARAMS);\n          tm(e.width) || zf(e.width, \"streamParameter.width\"), tm(e.height) || zf(e.height, \"streamParameter.height\"), tm(e.framerate) || zf(e.framerate, \"streamParameter.framerate\"), tm(e.bitrate) || Xf(e.bitrate, \"streamParameter.bitrate\");\n        }(e), (!e.width && e.height || e.width && !e.height) && NE.warning(\"[\".concat(this._clientId, \"] The width and height parameters take effect only when both are set\")), NE.info(\"[\".concat(this._clientId, \"] set low stream parameter to\"), JSON.stringify(e));\n        var t = this._configDistribute.getLowStreamConfigDistribute();\n        t && t.bitrate && e.bitrate && t.bitrate < e.bitrate && (e.bitrate = t.bitrate), this._lowStreamParameter = e;\n      }\n    }, {\n      key: \"enableDualStream\",\n      value: function () {\n        var _enableDualStream = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee280() {\n          return _regeneratorRuntime().wrap(function _callee280$(_context283) {\n            while (1) switch (_context283.prev = _context283.next) {\n              case 0:\n                if (jg().supportDualStream) {\n                  _context283.next = 2;\n                  break;\n                }\n                throw IT.streamSwitch(this._sessionId, {\n                  lts: Date.now(),\n                  isdual: !0,\n                  succ: !1\n                }), new vE(TE.NOT_SUPPORTED, \"Your browser is not support dual stream\");\n              case 2:\n                if (!this._isDualStreamEnabled) {\n                  _context283.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Dual stream is already enabled\");\n              case 4:\n                if (!this._p2pChannel.canPublishLowStream()) {\n                  _context283.next = 13;\n                  break;\n                }\n                _context283.prev = 5;\n                _context283.next = 8;\n                return this._publishLowStream();\n              case 8:\n                _context283.next = 13;\n                break;\n              case 10:\n                _context283.prev = 10;\n                _context283.t0 = _context283[\"catch\"](5);\n                throw IT.streamSwitch(this._sessionId, {\n                  lts: Date.now(),\n                  isdual: !0,\n                  succ: !1\n                }), _context283.t0;\n              case 13:\n                this._isDualStreamEnabled = !0, IT.streamSwitch(this._sessionId, {\n                  lts: Date.now(),\n                  isdual: !0,\n                  succ: !0\n                }), NE.info(\"[\".concat(this._clientId, \"] enable dual stream\"));\n              case 14:\n              case \"end\":\n                return _context283.stop();\n            }\n          }, _callee280, this, [[5, 10]]);\n        }));\n        function enableDualStream() {\n          return _enableDualStream.apply(this, arguments);\n        }\n        return enableDualStream;\n      }()\n    }, {\n      key: \"disableDualStream\",\n      value: function () {\n        var _disableDualStream = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee281() {\n          var e;\n          return _regeneratorRuntime().wrap(function _callee281$(_context284) {\n            while (1) switch (_context284.prev = _context284.next) {\n              case 0:\n                if (!this._isDualStreamEnabled) {\n                  _context284.next = 18;\n                  break;\n                }\n                if (this._joinInfo) {\n                  _context284.next = 3;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n              case 3:\n                if (!this._p2pChannel.getLocalMedia(Cg.LocalVideoLowTrack)) {\n                  _context284.next = 17;\n                  break;\n                }\n                _context284.prev = 4;\n                _context284.next = 7;\n                return this._p2pChannel.unpublishLowStream();\n              case 7:\n                e = _context284.sent;\n                _context284.t0 = e;\n                if (!_context284.t0) {\n                  _context284.next = 12;\n                  break;\n                }\n                _context284.next = 12;\n                return this._gateway.unpublish(e, this._joinInfo.stringUid || this._joinInfo.uid);\n              case 12:\n                _context284.next = 17;\n                break;\n              case 14:\n                _context284.prev = 14;\n                _context284.t1 = _context284[\"catch\"](4);\n                throw IT.streamSwitch(this._sessionId, {\n                  lts: Date.now(),\n                  isdual: !1,\n                  succ: !1\n                }), _context284.t1;\n              case 17:\n                this._isDualStreamEnabled = !1, IT.streamSwitch(this._sessionId, {\n                  lts: Date.now(),\n                  isdual: !1,\n                  succ: !0\n                }), NE.info(\"[\".concat(this._clientId, \"] disable dual stream\"));\n              case 18:\n              case \"end\":\n                return _context284.stop();\n            }\n          }, _callee281, this, [[4, 14]]);\n        }));\n        function disableDualStream() {\n          return _disableDualStream.apply(this, arguments);\n        }\n        return disableDualStream;\n      }()\n    }, {\n      key: \"setClientRole\",\n      value: function () {\n        var _setClientRole2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee282(e, t) {\n          return _regeneratorRuntime().wrap(function _callee282$(_context285) {\n            while (1) switch (_context285.prev = _context285.next) {\n              case 0:\n                if (!(function (e) {\n                  Jf(e, \"role\", [\"audience\", \"host\"]);\n                }(e), t && jm(t), \"rtc\" === this._mode)) {\n                  _context285.next = 2;\n                  break;\n                }\n                throw NE.warning(\"[\".concat(this._clientId, \"]rtc mode can not use setClientRole\")), new vE(TE.INVALID_OPERATION, \"rtc mode can not use setClientRole\");\n              case 2:\n                if (!(t && t.level && \"host\" === e)) {\n                  _context285.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"host mode can not set audience latency level\");\n              case 4:\n                if (!(\"audience\" === e && this._p2pChannel.hasLocalMedia())) {\n                  _context285.next = 6;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not set client role to audience when publishing stream\");\n              case 6:\n                _context285.next = 8;\n                return this._gateway.setClientRole(e, t);\n              case 8:\n                NE.info(\"[\".concat(this._clientId, \"] set client role to \").concat(e, \", level: \").concat(t && t.level));\n              case 9:\n              case \"end\":\n                return _context285.stop();\n            }\n          }, _callee282, this);\n        }));\n        function setClientRole(_x433, _x434) {\n          return _setClientRole2.apply(this, arguments);\n        }\n        return setClientRole;\n      }()\n    }, {\n      key: \"setProxyServer\",\n      value: function setProxyServer(e, t) {\n        if (Qf(e, \"proxyServer\"), !t) {\n          if (\"DISCONNECTED\" !== this.connectionState) throw new vE(TE.INVALID_OPERATION, \"Set proxy server before join channel\");\n          if (\"disabled\" !== this._cloudProxyServerMode || this._useLocalAccessPoint) throw new vE(TE.INVALID_OPERATION, \"You have already set the proxy\");\n        }\n        this._proxyServer = e, IT.setProxyServer(this._proxyServer), NE.setProxyServer(this._proxyServer), NE.info(\"[\".concat(this._clientId, \"] Set proxy server \").concat(t ? \"by initialize call\" : \"\", \" success.\"));\n      }\n    }, {\n      key: \"setTurnServer\",\n      value: function setTurnServer(e, t) {\n        if (Array.isArray(e) || (e = [e]), !t) {\n          if (\"DISCONNECTED\" !== this.connectionState) throw new vE(TE.INVALID_OPERATION, \"Set turn server before join channel\");\n          if (\"disabled\" !== this._cloudProxyServerMode || this._useLocalAccessPoint) throw new vE(TE.INVALID_OPERATION, \"You have already set the proxy\");\n        }\n        if (xm(e)) return this._turnServer = {\n          servers: e,\n          mode: \"original-manual\"\n        }, void NE.info(\"[\".concat(this._clientId, \"] Set original turnserver \").concat(t ? \"by initialize call\" : \"\", \" success: \").concat(e.map(function (e) {\n          return e.urls;\n        }).join(\",\"), \".\"));\n        e.forEach(function (e) {\n          return Vm(e);\n        }), this._turnServer = {\n          servers: e,\n          mode: \"manual\"\n        }, NE.info(\"[\".concat(this._clientId, \"] Set turnserver \").concat(t ? \"by initialize call\" : \"\", \" success.\"));\n      }\n    }, {\n      key: \"setLicense\",\n      value: function setLicense(e) {\n        if (\"DISCONNECTED\" !== this.connectionState) {\n          throw new vE(TE.INVALID_OPERATION, \"you should set license before join channel\");\n        }\n        if (Qf(e, \"license\", 32, 32), !/^[A-Za-z\\d]+$/.test(e)) throw new vE(TE.INVALID_PARAMS, \"license should only contains characters from A-Z a-z 0-9\");\n        this._license = e, NE.info(\"[\".concat(this._clientId, \"] set license success\"), e);\n      }\n    }, {\n      key: \"startProxyServer\",\n      value: function startProxyServer(e) {\n        if (\"DISCONNECTED\" !== this.connectionState) throw new vE(TE.INVALID_OPERATION, \"Start proxy server before join channel\");\n        if (this._proxyServer || \"manual\" === this._turnServer.mode || this._useLocalAccessPoint) throw new vE(TE.INVALID_OPERATION, \"You have already set the proxy\");\n        var t = [3, 4, 5];\n        var i;\n        switch (void 0 === e && (e = 3), e) {\n          case 1:\n          case 2:\n            throw new vE(TE.NOT_SUPPORTED, \"proxy mode 1/2 has been deprecated and not supported.\");\n          case 3:\n            i = \"proxy3\";\n            break;\n          case 4:\n            i = \"proxy4\";\n            break;\n          case 5:\n            i = \"proxy5\";\n            break;\n          default:\n            throw new vE(TE.INVALID_PARAMS, \"proxy server mode must be \".concat(t.join(\"|\")));\n        }\n        this._cloudProxyServerMode = i, this.store.cloudProxyServerMode = i, NE.info(\"[\".concat(this._clientId, \"] set cloud proxy server mode to\"), this._cloudProxyServerMode);\n      }\n    }, {\n      key: \"stopProxyServer\",\n      value: function stopProxyServer() {\n        if (\"DISCONNECTED\" !== this.connectionState) throw new vE(TE.INVALID_OPERATION, \"Stop proxy server after leave channel\");\n        IT.setProxyServer(), NE.setProxyServer(), this._cloudProxyServerMode = \"disabled\", this.store.cloudProxyServerMode = \"disabled\", NE.info(\"[\".concat(this._clientId, \"] set cloud proxy server mode to\"), this._cloudProxyServerMode), this._proxyServer = void 0, this._turnServer = {\n          mode: \"auto\",\n          servers: []\n        };\n      }\n    }, {\n      key: \"setLocalAccessPointsV2\",\n      value: function setLocalAccessPointsV2(e) {\n        if (!e.accessPoints) throw new vE(TE.INVALID_PARAMS, \"accessPoints is required.\");\n        Zf(e.accessPoints.serverList, \"accessPoints.serverList\"), Qf(e.accessPoints.domain, \"accessPoints.domain\");\n        var t = function t(e, _t206) {\n          Xf(e, _t206, 0, 65535, !0);\n        };\n        var i = 443;\n        if (e.accessPoints.port && (t(e.accessPoints.port, \"accessPoints.port\"), i = e.accessPoints.port), this._proxyServer || \"disabled\" !== this._cloudProxyServerMode) throw new vE(TE.INVALID_OPERATION, \"set local access point failed, You have already set the cloud proxy\");\n        HE(\"CLOSE_AFB_FOR_LOCAL_AP\") && (WE(\"JOIN_WITH_FALLBACK_SIGNAL_PROXY\", !1), WE(\"JOIN_WITH_FALLBACK_MEDIA_PROXY\", !1));\n        var r = /^((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/,\n          n = e.accessPoints.domain,\n          o = e.accessPoints.serverList.map(function (e) {\n            return r.test(e) ? \"\".concat(e.replace(/\\./g, \"-\"), \".\").concat(n) : e;\n          }),\n          s = o.map(function (e) {\n            return \"\".concat(e, \":\").concat(i);\n          });\n        this._useLocalAccessPoint = !0, this._setLocalAPVersion = 2, WE(\"WEBCS_DOMAIN\", s), WE(\"WEBCS_DOMAIN_BACKUP_LIST\", s), WE(\"GATEWAY_DOMAINS\", [n]), e.report && e.report.hostname && Array.isArray(e.report.hostname) && e.report.hostname.length ? (Zf(e.report.hostname, \"report.hostname\"), WE(\"EVENT_REPORT_DOMAIN\", e.report.hostname[0]), WE(\"EVENT_REPORT_BACKUP_DOMAIN\", e.report.hostname[1] || e.report.hostname[0])) : (WE(\"EVENT_REPORT_DOMAIN\", o[0]), WE(\"EVENT_REPORT_BACKUP_DOMAIN\", o[1] || o[0]));\n        var a = 6443;\n        e.report && e.report.port && (t(e.report.port, \"report.port\"), a = e.report.port), WE(\"STATS_COLLECTOR_PORT\", a), e.report ? WE(\"ENABLE_EVENT_REPORT\", !0) : WE(\"ENABLE_EVENT_REPORT\", !1);\n        var c = \"\";\n        e.log && e.log.hostname && Array.isArray(e.log.hostname) && e.log.hostname.length ? (Zf(e.log.hostname, \"log.hostname\"), c = e.log.hostname[0]) : c = o[0];\n        var d = 6444;\n        e.log && e.log.port && (t(e.log.port, \"log.port\"), d = e.log.port), WE(\"LOG_UPLOAD_SERVER\", \"\".concat(c, \":\").concat(d));\n        var u = [];\n        e.cds && e.cds.hostname && Array.isArray(e.cds.hostname) && e.cds.hostname.length ? (Zf(e.cds.hostname, \"cds.hostname\"), u = e.cds.hostname) : u = o;\n        var l = 443;\n        e.cds && e.cds.port && (t(e.cds.port, \"cds.port\"), l = e.cds.port), WE(\"CDS_AP\", u.map(function (e) {\n          return \"\".concat(e, \":\").concat(l);\n        })), e.cds ? WE(\"ENABLE_CONFIG_DISTRIBUTE\", !0) : WE(\"ENABLE_CONFIG_DISTRIBUTE\", !1), NE.info(\"set local access point v2 success\");\n      }\n    }, {\n      key: \"setLocalAccessPoints\",\n      value: function setLocalAccessPoints(e, t) {\n        if (Zf(e, \"serverList\"), Qf(t, \"domain\"), this._proxyServer || \"disabled\" !== this._cloudProxyServerMode) throw new vE(TE.INVALID_OPERATION, \"set local access point failed, You have already set the cloud proxy\");\n        var i = /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/;\n        e = e.map(function (e) {\n          return i.test(e) ? \"\".concat(e.replace(/\\./g, \"-\"), \".\").concat(t) : e;\n        }), this._useLocalAccessPoint = !0, this._setLocalAPVersion = 1, WE(\"WEBCS_DOMAIN\", e), WE(\"WEBCS_DOMAIN_BACKUP_LIST\", e), WE(\"GATEWAY_DOMAINS\", [t]), WE(\"EVENT_REPORT_DOMAIN\", e[0]), WE(\"EVENT_REPORT_BACKUP_DOMAIN\", e[1] || e[0]), WE(\"LOG_UPLOAD_SERVER\", \"\".concat(e[0], \":6444\")), NE.info(\"set local access point success\");\n      }\n    }, {\n      key: \"setRemoteDefaultVideoStreamType\",\n      value: function () {\n        var _setRemoteDefaultVideoStreamType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee283(e) {\n          return _regeneratorRuntime().wrap(function _callee283$(_context286) {\n            while (1) switch (_context286.prev = _context286.next) {\n              case 0:\n                if (!(Jf(e, \"streamType\", [0, 1]), this._remoteDefaultVideoStreamType = e, this._joinInfo)) {\n                  _context286.next = 12;\n                  break;\n                }\n                _context286.prev = 1;\n                _context286.next = 4;\n                return this._gateway.setDefaultRemoteVideoStreamType(e);\n              case 4:\n                this._joinInfo.defaultVideoStream = this._remoteDefaultVideoStreamType;\n                _context286.next = 10;\n                break;\n              case 7:\n                _context286.prev = 7;\n                _context286.t0 = _context286[\"catch\"](1);\n                throw NE.error(\"[\".concat(this._clientId, \"] set default remote video stream type error\"), _context286.t0.toString()), _context286.t0;\n              case 10:\n                _context286.next = 13;\n                break;\n              case 12:\n                NE.debug(\"haven't joined yet, cache remoteDefaultVideoStreamType \".concat(e));\n              case 13:\n              case \"end\":\n                return _context286.stop();\n            }\n          }, _callee283, this, [[1, 7]]);\n        }));\n        function setRemoteDefaultVideoStreamType(_x435) {\n          return _setRemoteDefaultVideoStreamType.apply(this, arguments);\n        }\n        return setRemoteDefaultVideoStreamType;\n      }()\n    }, {\n      key: \"setRemoteVideoStreamType\",\n      value: function () {\n        var _setRemoteVideoStreamType2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee284(e, t) {\n          var _this261 = this;\n          return _regeneratorRuntime().wrap(function _callee284$(_context287) {\n            while (1) switch (_context287.prev = _context287.next) {\n              case 0:\n                Jf(t, \"streamType\", [0, 1]);\n                _context287.prev = 1;\n                _context287.next = 4;\n                return this._gateway.setRemoteVideoStreamType(e, t);\n              case 4:\n                setTimeout(function () {\n                  var t = _this261._users.find(function (t) {\n                    return t.uid === e;\n                  });\n                  t && t.videoTrack && t.videoTrack.updateMediaStreamTrackResolution();\n                }, 2e3);\n                _context287.next = 10;\n                break;\n              case 7:\n                _context287.prev = 7;\n                _context287.t0 = _context287[\"catch\"](1);\n                throw NE.error(\"[\".concat(this._clientId, \"] set remote video stream type error\"), _context287.t0.toString()), _context287.t0;\n              case 10:\n                NE.info(\"[\".concat(this._clientId, \"] set remote \").concat(e, \" video stream type to \").concat(t)), this._remoteStreamTypeCacheMap.set(e, t);\n              case 11:\n              case \"end\":\n                return _context287.stop();\n            }\n          }, _callee284, this, [[1, 7]]);\n        }));\n        function setRemoteVideoStreamType(_x436, _x437) {\n          return _setRemoteVideoStreamType2.apply(this, arguments);\n        }\n        return setRemoteVideoStreamType;\n      }()\n    }, {\n      key: \"setStreamFallbackOption\",\n      value: function () {\n        var _setStreamFallbackOption2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee285(e, t) {\n          return _regeneratorRuntime().wrap(function _callee285$(_context288) {\n            while (1) switch (_context288.prev = _context288.next) {\n              case 0:\n                Jf(t, \"fallbackType\", [0, 1, 2]);\n                _context288.prev = 1;\n                _context288.next = 4;\n                return this._gateway.setStreamFallbackOption(e, t);\n              case 4:\n                _context288.next = 9;\n                break;\n              case 6:\n                _context288.prev = 6;\n                _context288.t0 = _context288[\"catch\"](1);\n                throw NE.error(\"[\".concat(this._clientId, \"] set stream fallback option\"), _context288.t0.toString()), _context288.t0;\n              case 9:\n                NE.info(\"[\".concat(this._clientId, \"] set remote \").concat(e, \" stream fallback type to \").concat(t)), this._streamFallbackTypeCacheMap.set(e, t);\n              case 10:\n              case \"end\":\n                return _context288.stop();\n            }\n          }, _callee285, this, [[1, 6]]);\n        }));\n        function setStreamFallbackOption(_x438, _x439) {\n          return _setStreamFallbackOption2.apply(this, arguments);\n        }\n        return setStreamFallbackOption;\n      }()\n    }, {\n      key: \"setEncryptionConfig\",\n      value: function setEncryptionConfig(e, t, i) {\n        !function (e) {\n          Jf(e, \"encryptionMode\", [\"aes-128-xts\", \"aes-256-xts\", \"aes-128-ecb\", \"sm4-128-ecb\", \"aes-128-gcm\", \"aes-256-gcm\", \"aes-128-gcm2\", \"aes-256-gcm2\", \"none\"]);\n        }(e), Qf(t, \"secret\");\n        if ([\"aes-128-gcm2\", \"aes-256-gcm2\"].includes(e)) {\n          if (!i || !(i instanceof Uint8Array && 32 === i.length)) throw new vE(TE.INVALID_PARAMS, \"salt must be an Uint8Array and exactly equal to 32 bytes\");\n        } else if (i) throw new vE(TE.INVALID_PARAMS, \"current encrypt mode does not need salt\");\n        new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\\\"|{}\\\\[\\\\]])(?=.{8,})\").test(t) || NE.warning(\"The secret is not strong:\\n      The secret must contain at least 1 lowercase alphabetical character,\\n      The secret must contain at least 1 uppercase alphabetical character,\\n      The secret must contain at least 1 numeric character,\\n      The secret must contain at least one special character,\\n      The secret must be eight characters or longer.\\n      \"), this._encryptionMode = e, this._encryptionSecret = t, i && (this._encryptionSalt = QR(i));\n      }\n    }, {\n      key: \"renewToken\",\n      value: function () {\n        var _renewToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee286(e) {\n          var t, i, _t207;\n          return _regeneratorRuntime().wrap(function _callee286$(_context289) {\n            while (1) switch (_context289.prev = _context289.next) {\n              case 0:\n                if (!(Qf(e, \"token\", 1, 2047), !this._key || !this._joinInfo)) {\n                  _context289.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"renewToken should not be called before user join\");\n              case 2:\n                t = this._key;\n                this._key = e, this._joinInfo && (this._joinInfo.token = e);\n                _context289.next = 6;\n                return this._renewTokenMutex.lock();\n              case 6:\n                i = _context289.sent;\n                _context289.prev = 7;\n                if (!HE(\"USE_NEW_TOKEN\")) {\n                  _context289.next = 18;\n                  break;\n                }\n                NE.debug(\"start renew token with ticket from unilbs\");\n                _context289.next = 12;\n                return BO(this._joinInfo, this._axiosCancelSource.token, this._config.httpRetryConfig || RE);\n              case 12:\n                _t207 = _context289.sent;\n                NE.debug(\"[\".concat(this._clientId, \"] get ticket from unilbs success\"));\n                _context289.next = 16;\n                return this._gateway.renewToken({\n                  token: e,\n                  ticket: _t207\n                });\n              case 16:\n                _context289.next = 21;\n                break;\n              case 18:\n                NE.debug(\"start renew token without ticket\");\n                _context289.next = 21;\n                return this._gateway.renewToken({\n                  token: e\n                });\n              case 21:\n                NE.debug(\"[\".concat(this._clientId, \"] renewToken success\"));\n                _context289.next = 27;\n                break;\n              case 24:\n                _context289.prev = 24;\n                _context289.t0 = _context289[\"catch\"](7);\n                throw this._key = t, this._joinInfo.token = t, NE.error(\"[\".concat(this._clientId, \"] renewToken failed\"), _context289.t0.toString()), _context289.t0;\n              case 27:\n                _context289.prev = 27;\n                i();\n                return _context289.finish(27);\n              case 30:\n              case \"end\":\n                return _context289.stop();\n            }\n          }, _callee286, this, [[7, 24, 27, 30]]);\n        }));\n        function renewToken(_x440) {\n          return _renewToken.apply(this, arguments);\n        }\n        return renewToken;\n      }()\n    }, {\n      key: \"enableAudioVolumeIndicator\",\n      value: function enableAudioVolumeIndicator() {\n        var _this262 = this;\n        this._audioVolumeIndicationInterval ? NE.warning(\"you have already enabled audio volume indicator!\") : this._audioVolumeIndicationInterval = window.setInterval(function () {\n          var e = _this262._p2pChannel.getAudioLevels();\n          _this262.emit(Am.VOLUME_INDICATOR, e);\n        }, HE(\"AUDIO_VOLUME_INDICATION_INTERVAL\") || 2e3);\n      }\n    }, {\n      key: \"getRTCStats\",\n      value: function getRTCStats() {\n        var e = this._statsCollector.getRTCStats(),\n          t = this._gateway.getInChannelInfo();\n        return e.Duration = Math.round(t.duration / 1e3), e;\n      }\n    }, {\n      key: \"startLiveStreaming\",\n      value: function () {\n        var _startLiveStreaming = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee287(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee287$(_context290) {\n            while (1) switch (_context290.prev = _context290.next) {\n              case 0:\n                if (t) {\n                  _context290.next = 5;\n                  break;\n                }\n                if (!(\"h264\" !== this._codec)) {\n                  _context290.next = 3;\n                  break;\n                }\n                throw new vE(TE.LIVE_STREAMING_INVALID_RAW_STREAM, \"raw streaming is only support h264\");\n              case 3:\n                if (this._p2pChannel.hasLocalMedia()) {\n                  _context290.next = 5;\n                  break;\n                }\n                throw new vE(TE.LIVE_STREAMING_INVALID_RAW_STREAM, \"can not find stream to raw streaming\");\n              case 5:\n                if (!(this._liveRawStreamingClient && this._liveRawStreamingClient.hasUrl(e) || this._liveTranscodeStreamingClient && this._liveTranscodeStreamingClient.hasUrl(e))) {\n                  _context290.next = 7;\n                  break;\n                }\n                throw new vE(TE.LIVE_STREAMING_TASK_CONFLICT);\n              case 7:\n                i = t ? Ym.TRANSCODE : Ym.RAW;\n                return _context290.abrupt(\"return\", this._createLiveStreamingClient(i).startLiveStreamingTask(e, i));\n              case 9:\n              case \"end\":\n                return _context290.stop();\n            }\n          }, _callee287, this);\n        }));\n        function startLiveStreaming(_x441, _x442) {\n          return _startLiveStreaming.apply(this, arguments);\n        }\n        return startLiveStreaming;\n      }()\n    }, {\n      key: \"setLiveTranscoding\",\n      value: function setLiveTranscoding(e) {\n        return this._createLiveStreamingClient(Ym.TRANSCODE).setTranscodingConfig(e);\n      }\n    }, {\n      key: \"stopLiveStreaming\",\n      value: function () {\n        var _stopLiveStreaming = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee288(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee288$(_context291) {\n            while (1) switch (_context291.prev = _context291.next) {\n              case 0:\n                t = [this._liveRawStreamingClient, this._liveTranscodeStreamingClient].filter(function (t) {\n                  return t && t.hasUrl(e);\n                });\n                if (t.length) {\n                  _context291.next = 3;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"can not find live streaming url to stop\");\n              case 3:\n                _context291.next = 5;\n                return Cl.all(t.map(function (t) {\n                  return t && t.stopLiveStreamingTask(e);\n                }));\n              case 5:\n              case \"end\":\n                return _context291.stop();\n            }\n          }, _callee288, this);\n        }));\n        function stopLiveStreaming(_x443) {\n          return _stopLiveStreaming.apply(this, arguments);\n        }\n        return stopLiveStreaming;\n      }()\n    }, {\n      key: \"addInjectStreamUrl\",\n      value: function () {\n        var _addInjectStreamUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee289(e, t) {\n          var i;\n          return _regeneratorRuntime().wrap(function _callee289$(_context292) {\n            while (1) switch (_context292.prev = _context292.next) {\n              case 0:\n                if (this._joinInfo) {\n                  _context292.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not addInjectStreamUrl, no joininfo\");\n              case 2:\n                i = this._createLiveStreamingClient(Ym.INJECT);\n                i.setInjectStreamConfig(t, 0);\n                _context292.next = 6;\n                return i.startLiveStreamingTask(e, Ym.INJECT);\n              case 6:\n              case \"end\":\n                return _context292.stop();\n            }\n          }, _callee289, this);\n        }));\n        function addInjectStreamUrl(_x444, _x445) {\n          return _addInjectStreamUrl.apply(this, arguments);\n        }\n        return addInjectStreamUrl;\n      }()\n    }, {\n      key: \"removeInjectStreamUrl\",\n      value: function () {\n        var _removeInjectStreamUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee290() {\n          var e, t, i;\n          return _regeneratorRuntime().wrap(function _callee290$(_context293) {\n            while (1) switch (_context293.prev = _context293.next) {\n              case 0:\n                t = this._createLiveStreamingClient(Ym.INJECT), i = Array.from(zv(e = t.streamingTasks).call(e)).find(function (e) {\n                  return e.mode === Ym.INJECT;\n                });\n                if (!(!this._joinInfo || !i)) {\n                  _context293.next = 3;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can remove addInjectStreamUrl, no joininfo or inject task\");\n              case 3:\n                _context293.next = 5;\n                return t.stopLiveStreamingTask(i.url);\n              case 5:\n              case \"end\":\n                return _context293.stop();\n            }\n          }, _callee290, this);\n        }));\n        function removeInjectStreamUrl() {\n          return _removeInjectStreamUrl.apply(this, arguments);\n        }\n        return removeInjectStreamUrl;\n      }()\n    }, {\n      key: \"startChannelMediaRelay\",\n      value: function () {\n        var _startChannelMediaRelay2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee291(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee291$(_context294) {\n            while (1) switch (_context294.prev = _context294.next) {\n              case 0:\n                ZO(e);\n                t = this._createChannelMediaRelayClient();\n                _context294.next = 4;\n                return t.startChannelMediaRelay(e);\n              case 4:\n              case \"end\":\n                return _context294.stop();\n            }\n          }, _callee291, this);\n        }));\n        function startChannelMediaRelay(_x446) {\n          return _startChannelMediaRelay2.apply(this, arguments);\n        }\n        return startChannelMediaRelay;\n      }()\n    }, {\n      key: \"updateChannelMediaRelay\",\n      value: function () {\n        var _updateChannelMediaRelay2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee292(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee292$(_context295) {\n            while (1) switch (_context295.prev = _context295.next) {\n              case 0:\n                ZO(e);\n                t = this._createChannelMediaRelayClient();\n                _context295.next = 4;\n                return t.updateChannelMediaRelay(e);\n              case 4:\n              case \"end\":\n                return _context295.stop();\n            }\n          }, _callee292, this);\n        }));\n        function updateChannelMediaRelay(_x447) {\n          return _updateChannelMediaRelay2.apply(this, arguments);\n        }\n        return updateChannelMediaRelay;\n      }()\n    }, {\n      key: \"stopChannelMediaRelay\",\n      value: function () {\n        var _stopChannelMediaRelay2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee293() {\n          var e;\n          return _regeneratorRuntime().wrap(function _callee293$(_context296) {\n            while (1) switch (_context296.prev = _context296.next) {\n              case 0:\n                e = this._createChannelMediaRelayClient();\n                _context296.next = 3;\n                return e.stopChannelMediaRelay();\n              case 3:\n              case \"end\":\n                return _context296.stop();\n            }\n          }, _callee293, this);\n        }));\n        function stopChannelMediaRelay() {\n          return _stopChannelMediaRelay2.apply(this, arguments);\n        }\n        return stopChannelMediaRelay;\n      }()\n    }, {\n      key: \"sendStreamMessage\",\n      value: function sendStreamMessage(e) {\n        var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];\n        if (!this._joinInfo) throw new vE(TE.INVALID_OPERATION, \"can not send data stream, not joined\");\n        if (\"string\" == typeof e) {\n          e = new TextEncoder().encode(e);\n        }\n        if (new Blob([e]).size > 1024) throw new vE(TE.INVALID_PARAMS, \"stream message out of range.\");\n        return this._gateway.signal.request(Nm.DATA_STREAM, {\n          payload: QR(e)\n        }, !t);\n      }\n    }, {\n      key: \"sendMetadata\",\n      value: function sendMetadata(e) {\n        if (!this._joinInfo) throw new vE(TE.INVALID_OPERATION, \"can not send metadata, not joined\");\n        if (new Blob([e]).size > 1024) throw new vE(TE.METADATA_OUT_OF_RANGE);\n        return this._gateway.signal.request(Nm.SEND_METADATA, {\n          session_id: this._joinInfo.sid,\n          metadata: QR(e)\n        });\n      }\n    }, {\n      key: \"sendCustomReportMessage\",\n      value: function () {\n        var _sendCustomReportMessage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee294(e) {\n          return _regeneratorRuntime().wrap(function _callee294$(_context297) {\n            while (1) switch (_context297.prev = _context297.next) {\n              case 0:\n                if (!(Array.isArray(e) || (e = [e]), e.forEach(dm), !this._joinInfo)) {\n                  _context297.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not send custom report, not joined\");\n              case 2:\n                _context297.next = 4;\n                return IT.sendCustomReportMessage(this._joinInfo.sid, e);\n              case 4:\n              case \"end\":\n                return _context297.stop();\n            }\n          }, _callee294, this);\n        }));\n        function sendCustomReportMessage(_x448) {\n          return _sendCustomReportMessage2.apply(this, arguments);\n        }\n        return sendCustomReportMessage;\n      }()\n    }, {\n      key: \"getLocalAudioStats\",\n      value: function getLocalAudioStats() {\n        return this._statsCollector.getLocalAudioTrackStats();\n      }\n    }, {\n      key: \"getRemoteAudioStats\",\n      value: function getRemoteAudioStats() {\n        return this._statsCollector.getRemoteAudioTrackStats();\n      }\n    }, {\n      key: \"getLocalVideoStats\",\n      value: function getLocalVideoStats() {\n        return this._statsCollector.getLocalVideoTrackStats();\n      }\n    }, {\n      key: \"getRemoteVideoStats\",\n      value: function getRemoteVideoStats() {\n        return this._statsCollector.getRemoteVideoTrackStats();\n      }\n    }, {\n      key: \"getRemoteNetworkQuality\",\n      value: function getRemoteNetworkQuality() {\n        return this._statsCollector.getRemoteNetworkQualityStats();\n      }\n    }, {\n      key: \"pickSVCLayer\",\n      value: function () {\n        var _pickSVCLayer2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee295(e, t) {\n          return _regeneratorRuntime().wrap(function _callee295$(_context298) {\n            while (1) switch (_context298.prev = _context298.next) {\n              case 0:\n                Jf(t.spatialLayer, \"spatialLayer\", [0, 1, 2, 3]), Jf(t.temporalLayer, \"temporalLayer\", [0, 1, 2, 3]);\n                _context298.prev = 1;\n                _context298.next = 4;\n                return this._gateway.pickSVCLayer(e, t);\n              case 4:\n                _context298.next = 9;\n                break;\n              case 6:\n                _context298.prev = 6;\n                _context298.t0 = _context298[\"catch\"](1);\n                throw NE.error(\"[\".concat(this._clientId, \"] pick SVC layer failed\"), _context298.t0.toString()), _context298.t0;\n              case 9:\n              case \"end\":\n                return _context298.stop();\n            }\n          }, _callee295, this, [[1, 6]]);\n        }));\n        function pickSVCLayer(_x449, _x450) {\n          return _pickSVCLayer2.apply(this, arguments);\n        }\n        return pickSVCLayer;\n      }()\n    }, {\n      key: \"_reset\",\n      value: function _reset() {\n        if (NE.debug(\"[\".concat(this._clientId, \"] reset client\")), this._axiosCancelSource.cancel(), this._axiosCancelSource = fE.CancelToken.source(), this._streamFallbackTypeCacheMap = new Map(), this._remoteStreamTypeCacheMap = new Map(), this._configDistribute.stopGetConfigDistribute(), this._joinInfo = void 0, this._proxyServer = void 0, this._defaultStreamFallbackType = void 0, this._sessionId = null, this.store.sessionId = null, this._statsCollector.reset(), this._key = void 0, this._appId = void 0, this._uid = void 0, this.store.uid = void 0, this._channelName = void 0, this._encryptionMode = \"none\", this._encryptionSecret = null, this._encryptionSalt = null, this._users.forEach(function (e) {\n          e._audioTrack && e._audioTrack._destroy(), e._videoTrack && e._videoTrack._destroy();\n        }), this._users = [], this._audioVolumeIndicationInterval && (window.clearInterval(this._audioVolumeIndicationInterval), this._audioVolumeIndicationInterval = void 0), \"fallback\" === this._cloudProxyServerMode && (this._cloudProxyServerMode = \"disabled\", this.store.cloudProxyServerMode = \"disabled\"), this._p2pChannel.reset(), this._publishMutex = new OT(\"client-publish\"), this._subscribeMutex = new OT(\"client-subscribe\"), this._networkQualityInterval && (window.clearInterval(this._networkQualityInterval), this._networkQualityInterval = void 0), this._injectStreamingClient && (this._injectStreamingClient.terminate(), this._injectStreamingClient.removeAllListeners(), this._injectStreamingClient = void 0), this._liveRawStreamingClient && (this._liveRawStreamingClient.terminate(), this._liveRawStreamingClient.removeAllListeners(), this._liveRawStreamingClient = void 0), this._liveTranscodeStreamingClient && (this._liveTranscodeStreamingClient.terminate(), this._liveTranscodeStreamingClient.removeAllListeners(), this._liveTranscodeStreamingClient = void 0), this._channelMediaRelayClient && (this._channelMediaRelayClient.dispose(), this._channelMediaRelayClient = void 0), this._inspect) try {\n          this._inspect.close(), this._inspect = void 0;\n        } catch (e) {}\n      }\n    }, {\n      key: \"_startSession\",\n      value: function _startSession(e, t) {\n        var i = e || UR();\n        e ? NE.debug(\"[\".concat(this._clientId, \"] new Session \").concat(i)) : NE.debug(\"[\".concat(this._clientId, \"] renewSession \").concat(this._sessionId, \" => \").concat(i)), this._sessionId = i, this.store.sessionId = i, t ? IT.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: t.channel,\n          appid: t.appId,\n          mode: this._mode\n        }) : this._joinInfo ? IT.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: this._joinInfo.cname,\n          appid: this._joinInfo.appId,\n          mode: this._mode\n        }) : this._gateway.joinInfo && IT.sessionInit(this._sessionId, {\n          lts: new Date().getTime(),\n          cname: this._gateway.joinInfo.cname,\n          appid: this._gateway.joinInfo.appId,\n          mode: this._mode\n        }), this._joinInfo && (this._joinInfo.sid = i), this._gateway.joinInfo && (this._gateway.joinInfo.sid = i);\n      }\n    }, {\n      key: \"_publishHighStream\",\n      value: function () {\n        var _publishHighStream2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee296(e) {\n          var i, r, t, _e221, _iterator37, _step37, _t208;\n          return _regeneratorRuntime().wrap(function _callee296$(_context299) {\n            while (1) switch (_context299.prev = _context299.next) {\n              case 0:\n                if (!(!this._joinInfo || void 0 === this._uid)) {\n                  _context299.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n              case 2:\n                if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                  _context299.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not publish stream in \".concat(this.connectionState, \" state\"));\n              case 4:\n                if (!(\"auto\" === this._turnServer.mode && HE(\"FORCE_TURN\") && !HE(\"TURN_ENABLE_TCP\") && !HE(\"TURN_ENABLE_UDP\"))) {\n                  _context299.next = 6;\n                  break;\n                }\n                throw new vE(TE.UNEXPECTED_ERROR, \"force TURN With No TURN Configuration\");\n              case 6:\n                NE.debug(\"[\".concat(this._clientId, \"] publish high stream\"));\n                _context299.prev = 7;\n                _context299.next = 10;\n                return this._p2pChannel.publish(e, this._isDualStreamEnabled, this._lowStreamParameter);\n              case 10:\n                i = _context299.sent;\n                _context299.next = 13;\n                return i.next();\n              case 13:\n                r = _context299.sent.value;\n                if (!r) {\n                  _context299.next = 27;\n                  break;\n                }\n                _context299.prev = 15;\n                _context299.next = 18;\n                return this._gateway.publish(this._uid, r, !0);\n              case 18:\n                _e221 = _context299.sent;\n                _context299.next = 25;\n                break;\n              case 21:\n                _context299.prev = 21;\n                _context299.t0 = _context299[\"catch\"](15);\n                if (!(_context299.t0.code !== TE.DISCONNECT_P2P)) {\n                  _context299.next = 25;\n                  break;\n                }\n                throw i.throw(_context299.t0), _context299.t0;\n              case 25:\n                _context299.next = 27;\n                return i.next((null === (t = _e221) || void 0 === t ? void 0 : t.ortc) || []);\n              case 27:\n                this._p2pChannel.reportPublishEvent(!0, null);\n                _iterator37 = _createForOfIteratorHelper(e);\n                _context299.prev = 29;\n                _iterator37.s();\n              case 31:\n                if ((_step37 = _iterator37.n()).done) {\n                  _context299.next = 40;\n                  break;\n                }\n                _t208 = _step37.value;\n                _t208 instanceof Ew && _t208._encoderConfig && this._gateway.setVideoProfile(_t208._encoderConfig);\n                _context299.t1 = !_t208.muted && _t208.enabled;\n                if (_context299.t1) {\n                  _context299.next = 38;\n                  break;\n                }\n                _context299.next = 38;\n                return this._p2pChannel.muteLocalTrack(_t208);\n              case 38:\n                _context299.next = 31;\n                break;\n              case 40:\n                _context299.next = 45;\n                break;\n              case 42:\n                _context299.prev = 42;\n                _context299.t2 = _context299[\"catch\"](29);\n                _iterator37.e(_context299.t2);\n              case 45:\n                _context299.prev = 45;\n                _iterator37.f();\n                return _context299.finish(45);\n              case 48:\n                _context299.next = 55;\n                break;\n              case 50:\n                _context299.prev = 50;\n                _context299.t3 = _context299[\"catch\"](7);\n                if (!(this._p2pChannel.reportPublishEvent(!1, null == _context299.t3 ? void 0 : _context299.t3.code, e), (null == _context299.t3 ? void 0 : _context299.t3.code) === TE.WS_ABORT)) {\n                  _context299.next = 54;\n                  break;\n                }\n                return _context299.abrupt(\"return\");\n              case 54:\n                throw _context299.t3;\n              case 55:\n              case \"end\":\n                return _context299.stop();\n            }\n          }, _callee296, this, [[7, 50], [15, 21], [29, 42, 45, 48]]);\n        }));\n        function _publishHighStream(_x451) {\n          return _publishHighStream2.apply(this, arguments);\n        }\n        return _publishHighStream;\n      }()\n    }, {\n      key: \"_publishLowStream\",\n      value: function () {\n        var _publishLowStream2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee297() {\n          var e, _e222, i, t, r;\n          return _regeneratorRuntime().wrap(function _callee297$(_context300) {\n            while (1) switch (_context300.prev = _context300.next) {\n              case 0:\n                if (!(!this._joinInfo || void 0 === this._uid)) {\n                  _context300.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"Can't publish stream, haven't joined yet!\");\n              case 2:\n                if (!(\"CONNECTED\" !== this.connectionState && \"RECONNECTING\" !== this.connectionState)) {\n                  _context300.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"can not publish stream in \".concat(this.connectionState, \" state\"));\n              case 4:\n                NE.debug(\"[\".concat(this._clientId, \"] publish low stream\"));\n                e = this._configDistribute.getLowStreamConfigDistribute();\n                e && e.bitrate && (this._lowStreamParameter || (this._lowStreamParameter = {\n                  width: 160,\n                  height: 120,\n                  framerate: 15,\n                  bitrate: 50\n                }), this._lowStreamParameter && this._lowStreamParameter.bitrate && e.bitrate < this._lowStreamParameter.bitrate && (this._lowStreamParameter.bitrate = e.bitrate));\n                _context300.prev = 7;\n                _context300.next = 10;\n                return this._p2pChannel.publishLowStream(this._lowStreamParameter);\n              case 10:\n                _e222 = _context300.sent;\n                _context300.next = 13;\n                return _e222.next();\n              case 13:\n                i = _context300.sent.value;\n                if (!i) {\n                  _context300.next = 26;\n                  break;\n                }\n                _context300.prev = 15;\n                _context300.next = 18;\n                return this._gateway.publish(this._uid, i, !0);\n              case 18:\n                r = _context300.sent;\n                _context300.next = 25;\n                break;\n              case 21:\n                _context300.prev = 21;\n                _context300.t0 = _context300[\"catch\"](15);\n                if (!(_context300.t0.code !== TE.DISCONNECT_P2P)) {\n                  _context300.next = 25;\n                  break;\n                }\n                throw _e222.throw(_context300.t0), _context300.t0;\n              case 25:\n                _e222.next((null === (t = r) || void 0 === t ? void 0 : t.ortc) || []), this._p2pChannel.reportPublishEvent(!0, null, void 0, !0);\n              case 26:\n                _context300.next = 33;\n                break;\n              case 28:\n                _context300.prev = 28;\n                _context300.t1 = _context300[\"catch\"](7);\n                if (!(this._p2pChannel.reportPublishEvent(!1, null == _context300.t1 ? void 0 : _context300.t1.code, void 0, !0), (null == _context300.t1 ? void 0 : _context300.t1.code) === TE.WS_ABORT)) {\n                  _context300.next = 32;\n                  break;\n                }\n                return _context300.abrupt(\"return\");\n              case 32:\n                throw _context300.t1;\n              case 33:\n              case \"end\":\n                return _context300.stop();\n            }\n          }, _callee297, this, [[7, 28], [15, 21]]);\n        }));\n        function _publishLowStream() {\n          return _publishLowStream2.apply(this, arguments);\n        }\n        return _publishLowStream;\n      }()\n    }, {\n      key: \"_createLiveStreamingClient\",\n      value: function _createLiveStreamingClient(e) {\n        var _this263 = this;\n        if (!this._joinInfo || !this._appId) {\n          return new vE(TE.INVALID_OPERATION, \"can not create live streaming client, please join channel first\").throw();\n        }\n        var t = function t() {\n            return new zO(_this263._joinInfo, _this263._config.websocketRetryConfig || RE, _this263._config.httpRetryConfig || RE);\n          },\n          i = function i(e) {\n            e.onLiveStreamError = function (e, t) {\n              IT.reportApiInvoke(_this263._sessionId, {\n                name: Em.ON_LIVE_STREAM_ERROR,\n                options: [e, t],\n                tag: fm.TRACER\n              }).onSuccess(), _this263.emit(Am.LIVE_STREAMING_ERROR, e, t);\n            }, e.onLiveStreamWarning = function (e, t) {\n              IT.reportApiInvoke(_this263._sessionId, {\n                name: Em.ON_LIVE_STREAM_WARNING,\n                options: [e, t],\n                tag: fm.TRACER\n              }).onSuccess(), _this263.emit(Am.LIVE_STREAMING_WARNING, e, t);\n            }, e.on(eg.REQUEST_WORKER_MANAGER_LIST, function (e, t, i) {\n              if (!_this263._joinInfo) return i(new vE(TE.INVALID_OPERATION, \"can not find join info to get worker manager\"));\n              jO(e, _this263._joinInfo, _this263._axiosCancelSource.token, RE).then(t).catch(i);\n            });\n          };\n        switch (e) {\n          case Ym.RAW:\n            return this._liveRawStreamingClient || (this._liveRawStreamingClient = t(), i(this._liveRawStreamingClient)), this._liveRawStreamingClient;\n          case Ym.TRANSCODE:\n            return this._liveTranscodeStreamingClient || (this._liveTranscodeStreamingClient = t(), i(this._liveTranscodeStreamingClient)), this._liveTranscodeStreamingClient;\n          case Ym.INJECT:\n            return this._injectStreamingClient || (this._injectStreamingClient = t(), this._injectStreamingClient.on(eg.REQUEST_WORKER_MANAGER_LIST, function (e, t, i) {\n              if (!_this263._joinInfo) return i(new vE(TE.INVALID_OPERATION, \"can not find join info to get worker manager\"));\n              jO(e, _this263._joinInfo, _this263._axiosCancelSource.token, RE).then(t).catch(i);\n            }), this._injectStreamingClient.onInjectStatusChange = function (e, t, i) {\n              _this263.emit(Am.INJECT_STREAM_STATUS, e, t, i);\n            }), this._injectStreamingClient;\n        }\n      }\n    }, {\n      key: \"_createChannelMediaRelayClient\",\n      value: function _createChannelMediaRelayClient() {\n        var _this264 = this;\n        if (!this._joinInfo) {\n          return new vE(TE.INVALID_OPERATION, \"can not create channel media relay client, please join channel first\").throw();\n        }\n        return this._channelMediaRelayClient || (this._channelMediaRelayClient = new eb(this._joinInfo, this._clientId, this._config.websocketRetryConfig || RE, this._config.httpRetryConfig || RE), this._channelMediaRelayClient.on(\"state\", function (e) {\n          e === og.RELAY_STATE_FAILURE && _this264._channelMediaRelayClient && _this264._channelMediaRelayClient.dispose(), _this264.emit(Am.CHANNEL_MEDIA_RELAY_STATE, e);\n        }), this._channelMediaRelayClient.on(\"event\", function (e) {\n          _this264.emit(Am.CHANNEL_MEDIA_RELAY_EVENT, e);\n        })), this._channelMediaRelayClient;\n      }\n    }, {\n      key: \"_handleGatewayEvents\",\n      value: function _handleGatewayEvents() {\n        var _this265 = this;\n        this._gateway.on(cg.DISCONNECT_P2P, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee298() {\n          return _regeneratorRuntime().wrap(function _callee298$(_context301) {\n            while (1) switch (_context301.prev = _context301.next) {\n              case 0:\n                _context301.next = 2;\n                return _this265._p2pChannel.disconnectForReconnect();\n              case 2:\n              case \"end\":\n                return _context301.stop();\n            }\n          }, _callee298);\n        }))), this._gateway.on(cg.CONNECTION_STATE_CHANGE, function (e, t, i) {\n          var r;\n          if (i === Cm.FALLBACK) return;\n          var n = function n() {\n            _this265.emit(Am.CONNECTION_STATE_CHANGE, e, t, i);\n          };\n          if (IT.reportApiInvoke(_this265._sessionId || (null === (r = _this265._gateway.joinInfo) || void 0 === r ? void 0 : r.sid) || null, {\n            name: Em.CONNECTION_STATE_CHANGE,\n            options: [e, t, i],\n            tag: fm.TRACER\n          }).onSuccess(JSON.stringify({\n            cur: e,\n            prev: t,\n            reason: i\n          })), NE.info(\"[\".concat(_this265._clientId, \"] connection state change: \").concat(t, \" -> \").concat(e)), \"DISCONNECTED\" === e) return _this265._reset(), void n();\n          if (\"RECONNECTING\" === e) _this265._users.forEach(function (e) {\n            e._trust_in_room_ = !1, e._trust_audio_enabled_state_ = !1, e._trust_video_enabled_state_ = !1, e._trust_audio_mute_state_ = !1, e._trust_video_mute_state_ = !1, e._trust_audio_stream_added_state_ = !1, e._trust_video_stream_added_state_ = !1, e._audioSSRC = void 0, e._videoSSRC = void 0, e._videoOrtc = void 0, e._audioOrtc = void 0, e._cname = void 0, e._rtxSsrcId = void 0;\n          }), _this265._userOfflineTimeout && window.clearTimeout(_this265._userOfflineTimeout), _this265._streamRemovedTimeout && window.clearTimeout(_this265._streamRemovedTimeout), _this265._userOfflineTimeout = void 0, _this265._streamRemovedTimeout = void 0;else if (\"CONNECTED\" === e) {\n            var o;\n            _this265._streamFallbackTypeCacheMap.forEach(function (e, t) {\n              _this265._gateway.setStreamFallbackOption(t, e).catch(function (e) {\n                NE.warning(\"[\".concat(_this265._clientId, \"] auto set stream fallback option failed\"), e);\n              });\n            }), _this265._remoteStreamTypeCacheMap.forEach(function (e, t) {\n              _this265._gateway.setRemoteVideoStreamType(t, e).catch(function (e) {\n                NE.warning(\"[\".concat(_this265._clientId, \"] auto set remote stream type failed\"), e);\n              });\n            }), void 0 !== _this265._remoteDefaultVideoStreamType && void 0 === (null === (o = _this265._joinInfo) || void 0 === o ? void 0 : o.defaultVideoStream) && _this265.setRemoteDefaultVideoStreamType(_this265._remoteDefaultVideoStreamType).then(function () {\n              NE.debug(\"[\".concat(_this265._clientId, \"] setRemoteDefaultVideoStreamType after gateway connected\"));\n            }).catch(function (e) {\n              NE.error(\"[\".concat(_this265._clientId, \"] setRemoteDefaultVideoStreamType after gateway failed, \").concat(e));\n            }), _this265._p2pChannel.republish(), _this265._userOfflineTimeout = window.setTimeout(function () {\n              if (\"CONNECTED\" !== _this265.connectionState) return;\n              _this265._userOfflineTimeout = void 0;\n              _this265._users.filter(function (e) {\n                return !e._trust_in_room_;\n              }).forEach(function (e) {\n                NE.debug(\"[\".concat(_this265._clientId, \"] user offline timeout, emit user offline \").concat(e.uid)), _this265._handleUserOffline({\n                  uid: e.uid\n                });\n              });\n            }, 3e3), _this265._streamRemovedTimeout = window.setTimeout(function () {\n              \"CONNECTED\" === _this265.connectionState && (_this265._streamRemovedTimeout = void 0, _this265._users.forEach(function (e) {\n                e._trust_audio_mute_state_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch audio unmute event \").concat(e.uid)), _this265._handleMuteStream(e.uid, \"audio\", !1)), e._trust_video_mute_state_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch video unmute event \").concat(e.uid)), _this265._handleMuteStream(e.uid, \"video\", !1)), e._trust_audio_enabled_state_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch enable local audio \").concat(e.uid)), _this265._handleSetStreamLocalEnable(\"audio\", e.uid, !0)), e._trust_video_enabled_state_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch enable local video \").concat(e.uid)), _this265._handleSetStreamLocalEnable(\"video\", e.uid, !0)), e._trust_video_stream_added_state_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch reset video stream added \").concat(e.uid)), _this265._handleResetAddStream(e, \"video\")), e._trust_audio_stream_added_state_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch reset audio stream added \").concat(e.uid)), _this265._handleResetAddStream(e, \"audio\")), e._video_added_ || e._audio_added_ || (NE.debug(\"[\".concat(_this265._clientId, \"] auto dispatch stream remove \").concat(e.uid)), _this265._handleRemoveStream({\n                  uid: e.uid,\n                  uint_id: e._uintid\n                }));\n              }));\n            }, 1e3);\n          }\n          n();\n        }), this._gateway.on(cg.REQUEST_NEW_GATEWAY_LIST, function (e, t) {\n          if (!_this265._joinInfo) return t(new vE(TE.UNEXPECTED_ERROR, \"can not recover, no join info\"));\n          kO(_this265._joinInfo, _this265._axiosCancelSource.token, _this265._config.httpRetryConfig || RE, _this265.store).then(function (t) {\n            _this265._joinInfo && (_this265._joinInfo.apResponse = t.gatewayInfo.res, _this265._joinInfo.gatewayAddrs = t.gatewayInfo.gatewayAddrs, _this265._joinInfo.uni_lbs_ip = t.gatewayInfo.uni_lbs_ip), e(t.gatewayInfo.gatewayAddrs.map(function (e) {\n              if (_this265._joinInfo && _this265._joinInfo.proxyServer) {\n                var _t209 = e.address.split(\":\");\n                return \"wss://\".concat(_this265._joinInfo.proxyServer, \"/ws/?h=\").concat(_t209[0], \"&p=\").concat(_t209[1]);\n              }\n              return \"wss://\".concat(e.address);\n            }));\n          }).catch(t);\n        }), this._gateway.on(cg.NETWORK_QUALITY, function (e) {\n          \"normal\" === _this265._networkQualitySensitivity && _this265.emit(Am.NETWORK_QUALITY, e);\n        }), this._gateway.on(cg.STREAM_TYPE_CHANGE, function (e, t) {\n          _this265.emit(Am.STREAM_TYPE_CHANGED, e, t);\n          IT.reportApiInvoke(_this265._sessionId, {\n            name: Em.STREAM_TYPE_CHANGE,\n            options: [e, t],\n            tag: fm.TRACER\n          }).onSuccess(JSON.stringify({\n            uid: e,\n            streamType: t\n          }));\n        }), this._gateway.on(cg.IS_P2P_DISCONNECTED, function (e) {\n          _this265._p2pChannel.isP2PDisconnected() ? e(!0) : _this265._p2pChannel.hasLocalMedia() || _this265._p2pChannel.hasRemoteMedia() ? e(!1) : e(!0);\n        }), this._gateway.on(cg.NEED_RENEW_SESSION, function () {\n          _this265._startSession();\n        }), this._gateway.on(cg.REQUEST_P2P_CONNECTION_PARAMS, /*#__PURE__*/function () {\n          var _ref72 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee299(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee299$(_context302) {\n              while (1) switch (_context302.prev = _context302.next) {\n                case 0:\n                  _context302.prev = 0;\n                  _context302.t0 = t;\n                  _context302.next = 4;\n                  return _this265._p2pChannel.startP2PConnection(e);\n                case 4:\n                  _context302.t1 = _context302.sent;\n                  (0, _context302.t0)(_context302.t1);\n                  _context302.next = 11;\n                  break;\n                case 8:\n                  _context302.prev = 8;\n                  _context302.t2 = _context302[\"catch\"](0);\n                  i(_context302.t2);\n                case 11:\n                case \"end\":\n                  return _context302.stop();\n              }\n            }, _callee299, null, [[0, 8]]);\n          }));\n          return function (_x452, _x453, _x454) {\n            return _ref72.apply(this, arguments);\n          };\n        }()), this._gateway.on(cg.JOIN_RESPONSE, function (e, t) {\n          var _kD = kD(e.ortc, t),\n            i = _kD.dtlsParameters,\n            r = _kD.iceParameters,\n            n = _kD.candidates,\n            o = _kD.rtpCapabilities,\n            s = _kD.setup,\n            a = _kD.cname;\n          _this265._p2pChannel.connect(r, i, n, o, s, a);\n        }), this._gateway.on(cg.REQUEST_DC_CONNECTION_PARAMS, function (e) {\n          e(_this265._p2pChannel.getEstablishParams());\n        }), this._gateway.on(cg.RESET_CONNECTION_EVENTS, function () {\n          _this265._handleGatewaySignalEvents();\n        }), this._gateway.on(cg.DATACHANNEL_FAILBACK, function () {\n          _this265._joinGateway();\n        }), this._gateway.on(cg.DATACHANNEL_PRECONNECT, /*#__PURE__*/function () {\n          var _ref73 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee300(e, t, i, r) {\n            var n, o, s, a, c, d, u;\n            return _regeneratorRuntime().wrap(function _callee300$(_context303) {\n              while (1) switch (_context303.prev = _context303.next) {\n                case 0:\n                  _context303.next = 2;\n                  return _this265._p2pChannel.startP2PConnection({\n                    turnServer: null === (n = _this265._joinInfo) || void 0 === n ? void 0 : n.turnServer\n                  }, !0);\n                case 2:\n                  u = function (e, t) {\n                    var i;\n                    return t && t.ip && \"number\" == typeof t.port ? (i = [{\n                      foundation: \"udpcandidate\",\n                      componentId: \"1\",\n                      transport: \"udp\",\n                      priority: \"2103266323\",\n                      connectionAddress: t.ip,\n                      port: t.port.toString(),\n                      type: \"host\",\n                      extension: {}\n                    }], NE.debug(\"Using remote candidate from AP \".concat(t.ip, \":\").concat(t.port)), t.ip6 && (i.push({\n                      foundation: \"udpcandidate\",\n                      componentId: \"1\",\n                      transport: \"udp\",\n                      priority: \"2103266323\",\n                      connectionAddress: t.ip6,\n                      port: t.port.toString(),\n                      type: \"host\",\n                      extension: {}\n                    }), NE.debug(\"Using IPV6 remote candidate from AP \".concat(t.ip6, \":\").concat(t.port)))) : i = [{\n                      foundation: \"udpcandidate\",\n                      componentId: \"1\",\n                      transport: \"udp\",\n                      priority: \"2103266323\",\n                      connectionAddress: e.ip,\n                      port: e.port.toString(),\n                      type: \"host\",\n                      extension: {}\n                    }], i;\n                  }(e, t);\n                  return _context303.abrupt(\"return\", _this265._p2pChannel.preConnect({\n                    iceUfrag: \"\".concat(null === (o = _this265._joinInfo) || void 0 === o ? void 0 : o.apResponse.cid, \"_\").concat(null === (s = _this265._joinInfo) || void 0 === s ? void 0 : s.apResponse.cert),\n                    icePwd: \"\".concat(null === (a = _this265._joinInfo) || void 0 === a ? void 0 : a.apResponse.cid, \"_\").concat(null === (c = _this265._joinInfo) || void 0 === c ? void 0 : c.apResponse.cert)\n                  }, {\n                    fingerprints: [{\n                      hashFunction: \"sha-256\",\n                      fingerprint: null !== (d = HE(\"FINGERPRINT\")) && void 0 !== d ? d : e.fingerprint\n                    }]\n                  }, u, {\n                    send: {\n                      audioCodecs: [],\n                      videoCodecs: [],\n                      audioExtensions: [],\n                      videoExtensions: []\n                    },\n                    recv: {\n                      audioCodecs: [],\n                      videoCodecs: [],\n                      audioExtensions: [],\n                      videoExtensions: []\n                    }\n                  }, \"active\", \"o/i14u9pJrxRKAsu\").then(i).catch(r));\n                case 4:\n                case \"end\":\n                  return _context303.stop();\n              }\n            }, _callee300);\n          }));\n          return function (_x455, _x456, _x457, _x458) {\n            return _ref73.apply(this, arguments);\n          };\n        }());\n      }\n    }, {\n      key: \"_handleGatewaySignalEvents\",\n      value: function _handleGatewaySignalEvents() {\n        var _this266 = this;\n        this._gateway.signal.on(Pm.ON_USER_ONLINE, this._handleUserOnline), this._gateway.signal.on(Pm.ON_USER_OFFLINE, this._handleUserOffline), this._gateway.signal.on(Pm.ON_ADD_AUDIO_STREAM, function (e) {\n          return _this266._handleAddAudioOrVideoStream(\"audio\", e.uid, e.ssrcId, e.cname, e.uint_id, e.ortc);\n        }), this._gateway.signal.on(Pm.ON_ADD_VIDEO_STREAM, function (e) {\n          return _this266._handleAddAudioOrVideoStream(\"video\", e.uid, e.ssrcId, e.cname, e.uint_id, e.ortc, e.rtxSsrcId);\n        }), this._gateway.signal.on(Pm.ON_REMOVE_STREAM, this._handleRemoveStream), this._gateway.signal.on(Pm.ON_P2P_LOST, this._handleP2PLost), this._gateway.signal.on(Pm.MUTE_AUDIO, function (e) {\n          return _this266._handleMuteStream(e.uid, \"audio\", !0);\n        }), this._gateway.signal.on(Pm.UNMUTE_AUDIO, function (e) {\n          return _this266._handleMuteStream(e.uid, \"audio\", !1);\n        }), this._gateway.signal.on(Pm.MUTE_VIDEO, function (e) {\n          return _this266._handleMuteStream(e.uid, \"video\", !0);\n        }), this._gateway.signal.on(Pm.UNMUTE_VIDEO, function (e) {\n          return _this266._handleMuteStream(e.uid, \"video\", !1);\n        }), this._gateway.signal.on(Pm.RECEIVE_METADATA, function (e) {\n          var t = zR(e.metadata);\n          _this266.emit(Am.RECEIVE_METADATA, e.uid, t);\n        }), this._gateway.signal.on(Pm.ON_DATA_STREAM, function (e) {\n          e.seq && delete e.seq, e.payload = zR(e.payload), _this266.emit(Am.STREAM_MESSAGE, e.uid, e.payload), _this266.onStreamMessage && _this266.onStreamMessage(e);\n        }), this._gateway.signal.on(Pm.ON_CRYPT_ERROR, function () {\n          XR(function () {\n            NE.warning(\"[\".concat(_this266._clientId, \"] on crypt error\")), _this266.emit(Am.CRYPT_ERROR);\n          }, _this266._sessionId);\n        }), this._gateway.signal.on(Pm.ON_TOKEN_PRIVILEGE_WILL_EXPIRE, this._handleTokenWillExpire), this._gateway.signal.on(Pm.ON_TOKEN_PRIVILEGE_DID_EXPIRE, function () {\n          NE.warning(\"[\".concat(_this266._clientId, \"] received message onTokenPrivilegeDidExpire, please get new token and join again\")), _this266._gateway.leave(!0), _this266.emit(Am.ON_TOKEN_PRIVILEGE_DID_EXPIRE), _this266._reset();\n        }), this._gateway.signal.on(Pm.ON_STREAM_FALLBACK_UPDATE, function (e) {\n          NE.debug(\"[\".concat(_this266._clientId, \"] stream fallback peerId: \").concat(e.stream_id, \", attr: \").concat(e.stream_type)), _this266.emit(Am.STREAM_FALLBACK, e.stream_id, 1 === e.stream_type ? \"fallback\" : \"recover\");\n        }), this._gateway.signal.on(Pm.ON_PUBLISH_STREAM, function (e) {\n          _this266.uid === _this266._uid && (_this266._p2pChannel.reportPublishEvent(!0, null, void 0, !1, JSON.stringify({\n            proxy: e.proxy\n          })), NE.info(\"[\".concat(_this266._clientId, \"] on publish stream, \").concat(JSON.stringify(e))));\n        }), this._gateway.signal.on(Pm.ENABLE_LOCAL_VIDEO, function (e) {\n          _this266._handleSetStreamLocalEnable(\"video\", e.uid, !0);\n        }), this._gateway.signal.on(Pm.DISABLE_LOCAL_VIDEO, function (e) {\n          _this266._handleSetStreamLocalEnable(\"video\", e.uid, !1);\n        }), this._gateway.signal.on(wm.REQUEST_TIMEOUT, function (e, t) {\n          if (_this266._joinInfo) switch (e) {\n            case Nm.PUBLISH:\n              {\n                if (!t) return;\n                var _e223 = (t = t).ortc;\n                if (_e223) {\n                  var i, r, n, o;\n                  var _s44 = _e223.some(function (e) {\n                      var t = e.stream_type;\n                      return t === ag.Audio;\n                    }),\n                    _a28 = _e223.some(function (e) {\n                      var t = e.stream_type;\n                      return t !== ag.Audio;\n                    }),\n                    c = _e223.some(function (e) {\n                      var t = e.stream_type;\n                      return t === ag.Screen || t === ag.ScreenLow;\n                    });\n                  \"offer\" === t.state && IT.publish(_this266._joinInfo.sid, {\n                    eventElapse: pR.measureFromPublishStart(_this266.store.clientId, _this266.store.pubId),\n                    succ: !1,\n                    ec: TE.TIMEOUT,\n                    audio: _s44,\n                    video: _a28,\n                    p2pid: t.p2p_id,\n                    publishRequestid: _this266.store.pubId,\n                    screenshare: c,\n                    audioName: _s44 ? null === (i = _e223.find(function (e) {\n                      var t = e.stream_type;\n                      return t === ag.Audio;\n                    })) || void 0 === i || null === (r = i.ssrcs[0]) || void 0 === r ? void 0 : r.ssrcId.toString() : void 0,\n                    videoName: _a28 ? null === (n = _e223.find(function (e) {\n                      var t = e.stream_type;\n                      return t !== ag.Audio;\n                    })) || void 0 === n || null === (o = n.ssrcs[0]) || void 0 === o ? void 0 : o.ssrcId.toString() : void 0\n                  });\n                }\n                break;\n              }\n            case Nm.SUBSCRIBE:\n              (t = t) && IT.subscribe(_this266._joinInfo.sid, {\n                succ: !1,\n                ec: TE.TIMEOUT,\n                audio: t.stream_type === yg.AUDIO,\n                video: t.stream_type === yg.VIDEO,\n                peerid: t.stream_id,\n                subscribeRequestid: t.ssrcId,\n                p2pid: _this266.store.p2pId,\n                eventElapse: pR.measureFromSubscribeStart(_this266.store.clientId, t.ssrcId)\n              });\n          }\n        }), this._gateway.signal.on(Pm.ON_P2P_OK, function (e) {\n          _this266.uid, _this266._uid;\n        }), this._gateway.signal.on(Pm.ON_PUBLISHED_USER_LIST, function (e) {\n          if (null == e || !e.users) return;\n          var t = [],\n            i = [];\n          var _iterator38 = _createForOfIteratorHelper(e.users),\n            _step38;\n          try {\n            var _loop7 = function _loop7() {\n              var r = _step38.value;\n              var e = _this266._users.find(function (e) {\n                return e.uid === r.stream_id;\n              });\n              e ? e._trust_in_room_ = !0 : (e = new mw(r.stream_id, r.stream_id), _this266._users.push(e), 0 === _this266.getListeners(Am.PUBLISHED_USER_LIST).length && (NE.debug(\"[\".concat(_this266._clientId, \"] user online\"), r.stream_id), _this266.emit(Am.USER_JOINED, e)));\n              var n = dg.Audio & r.stream_type,\n                o = (dg.Video | dg.LwoVideo) & r.stream_type,\n                s = n && e.hasAudio,\n                a = o && e.hasVideo;\n              o && (e._trust_video_stream_added_state_ = !0, e._video_added_ = !0, e._videoSSRC = r.video_ssrc), n && (e._trust_audio_stream_added_state_ = !0, e._audio_added_ = !0, e._audioSSRC = r.audio_ssrc), n && !s && 0 === _this266.getListeners(Am.PUBLISHED_USER_LIST).length && (NE.info(\"[\".concat(_this266._clientId, \"] remote user \").concat(e.uid, \" published audio\")), _this266.emit(Am.USER_PUBLISHED, e, \"audio\")), o && !a && 0 === _this266.getListeners(Am.PUBLISHED_USER_LIST).length && (NE.info(\"[\".concat(_this266._clientId, \"] remote user \").concat(e.uid, \" published video\")), _this266.emit(Am.USER_PUBLISHED, e, \"video\")), (n && !s || o && !a) && t.push(e), o && _this266._p2pChannel.hasPendingRemoteMedia(e, \"video\") && i.push({\n                user: e,\n                mediaType: \"video\"\n              }), n && _this266._p2pChannel.hasPendingRemoteMedia(e, \"audio\") && i.push({\n                user: e,\n                mediaType: \"audio\"\n              });\n            };\n            for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n              _loop7();\n            }\n          } catch (err) {\n            _iterator38.e(err);\n          } finally {\n            _iterator38.f();\n          }\n          i.length > 0 && (NE.debug(\"[\".concat(_this266._clientId, \"] RE massSubscribe after reconnect \").concat(i.map(function (e) {\n            return \"user: \".concat(e.user.uid, \", mediaType: \").concat(e.mediaType);\n          }).join(\"; \"), \" \")), _this266.massSubscribe(i).catch(function (e) {\n            NE.error(\"[\".concat(_this266._clientId, \"] mass resubscribe error\"), e.toString());\n          })), _this266.getListeners(Am.PUBLISHED_USER_LIST).length > 0 ? (NE.info(\"[\".concat(_this266._clientId, \"] client emit user-list event, users: \").concat(t.map(function (e) {\n            return e.uid;\n          }).join(\", \"))), _this266.emit(Am.PUBLISHED_USER_LIST, t)) : NE.info(\"[\".concat(_this266._clientId, \"] client not emit user-list event case there is no user-list listener, users: \").concat(t.map(function (e) {\n            return e.uid;\n          }).join(\", \")));\n        });\n      }\n    }, {\n      key: \"_handleP2PChannelEvents\",\n      value: function _handleP2PChannelEvents() {\n        var _this267 = this;\n        this._p2pChannel.on(Og.RequestMuteLocal, /*#__PURE__*/function () {\n          var _ref74 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee301(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee301$(_context304) {\n              while (1) switch (_context304.prev = _context304.next) {\n                case 0:\n                  if (!_this267._joinInfo) {\n                    _context304.next = 12;\n                    break;\n                  }\n                  _context304.prev = 1;\n                  _context304.next = 4;\n                  return _this267._gateway.muteLocal(e, _this267._joinInfo.stringUid || _this267._joinInfo.uid);\n                case 4:\n                  t();\n                  _context304.next = 10;\n                  break;\n                case 7:\n                  _context304.prev = 7;\n                  _context304.t0 = _context304[\"catch\"](1);\n                  _context304.t0.code === TE.DISCONNECT_P2P ? t() : i(_context304.t0);\n                case 10:\n                  _context304.next = 13;\n                  break;\n                case 12:\n                  t();\n                case 13:\n                case \"end\":\n                  return _context304.stop();\n              }\n            }, _callee301, null, [[1, 7]]);\n          }));\n          return function (_x459, _x460, _x461) {\n            return _ref74.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(Og.RequestUnmuteLocal, /*#__PURE__*/function () {\n          var _ref75 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee302(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee302$(_context305) {\n              while (1) switch (_context305.prev = _context305.next) {\n                case 0:\n                  if (!_this267._joinInfo) {\n                    _context305.next = 12;\n                    break;\n                  }\n                  _context305.prev = 1;\n                  _context305.next = 4;\n                  return _this267._gateway.unmuteLocal(e, _this267._joinInfo.stringUid || _this267._joinInfo.uid);\n                case 4:\n                  t();\n                  _context305.next = 10;\n                  break;\n                case 7:\n                  _context305.prev = 7;\n                  _context305.t0 = _context305[\"catch\"](1);\n                  _context305.t0.code === TE.DISCONNECT_P2P ? t() : i(_context305.t0);\n                case 10:\n                  _context305.next = 13;\n                  break;\n                case 12:\n                  t();\n                case 13:\n                case \"end\":\n                  return _context305.stop();\n              }\n            }, _callee302, null, [[1, 7]]);\n          }));\n          return function (_x462, _x463, _x464) {\n            return _ref75.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(Og.RequestRePublish, function (e, t, i) {\n          _this267.publish(e, !1).then(t).catch(i);\n        }), this._p2pChannel.on(Og.RequestReSubscribe, /*#__PURE__*/function () {\n          var _ref76 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee303(e, t, i) {\n            var _iterator39, _step39, _step39$value, _t210, _i122;\n            return _regeneratorRuntime().wrap(function _callee303$(_context306) {\n              while (1) switch (_context306.prev = _context306.next) {\n                case 0:\n                  _context306.prev = 0;\n                  _iterator39 = _createForOfIteratorHelper(e);\n                  _context306.prev = 2;\n                  _iterator39.s();\n                case 4:\n                  if ((_step39 = _iterator39.n()).done) {\n                    _context306.next = 15;\n                    break;\n                  }\n                  _step39$value = _step39.value, _t210 = _step39$value.user, _i122 = _step39$value.kind;\n                  if (!(_i122 === yg.VIDEO)) {\n                    _context306.next = 11;\n                    break;\n                  }\n                  _context306.next = 9;\n                  return _this267.subscribe(_t210, \"video\");\n                case 9:\n                  _context306.next = 13;\n                  break;\n                case 11:\n                  _context306.next = 13;\n                  return _this267.subscribe(_t210, \"audio\");\n                case 13:\n                  _context306.next = 4;\n                  break;\n                case 15:\n                  _context306.next = 20;\n                  break;\n                case 17:\n                  _context306.prev = 17;\n                  _context306.t0 = _context306[\"catch\"](2);\n                  _iterator39.e(_context306.t0);\n                case 20:\n                  _context306.prev = 20;\n                  _iterator39.f();\n                  return _context306.finish(20);\n                case 23:\n                  t();\n                  _context306.next = 29;\n                  break;\n                case 26:\n                  _context306.prev = 26;\n                  _context306.t1 = _context306[\"catch\"](0);\n                  i(_context306.t1);\n                case 29:\n                case \"end\":\n                  return _context306.stop();\n              }\n            }, _callee303, null, [[0, 26], [2, 17, 20, 23]]);\n          }));\n          return function (_x465, _x466, _x467) {\n            return _ref76.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(Og.RequestUploadStats, function (e, t) {\n          _this267._gateway.uploadStats(e, t);\n        }), this._p2pChannel.on(Og.MediaReconnectStart, function (e) {\n          _this267.emit(Am.MEDIA_RECONNECT_START, e);\n        }), this._p2pChannel.on(Og.MediaReconnectEnd, function (e) {\n          _this267.emit(Am.MEDIA_RECONNECT_END, e);\n        }), this._p2pChannel.on(Og.NeedSignalRTT, function (e) {\n          e(_this267._gateway.getSignalRTT());\n        }), this._p2pChannel.on(Og.RequestRestartICE, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee304() {\n          var e, t, i, r, _ref78, n;\n          return _regeneratorRuntime().wrap(function _callee304$(_context307) {\n            while (1) switch (_context307.prev = _context307.next) {\n              case 0:\n                _context307.next = 2;\n                return _this267._p2pChannel.restartICE();\n              case 2:\n                e = _context307.sent;\n                _context307.next = 5;\n                return e.next();\n              case 5:\n                t = _context307.sent;\n                if (!t.done) {\n                  _context307.next = 8;\n                  break;\n                }\n                return _context307.abrupt(\"return\");\n              case 8:\n                i = t.value;\n                _context307.prev = 9;\n                _context307.next = 12;\n                return _this267._gateway.restartICE({\n                  iceParameters: i\n                });\n              case 12:\n                r = _context307.sent;\n                _context307.next = 18;\n                break;\n              case 15:\n                _context307.prev = 15;\n                _context307.t0 = _context307[\"catch\"](9);\n                return _context307.abrupt(\"return\", void e.throw(_context307.t0));\n              case 18:\n                _ref78 = function (e) {\n                  var t = e.iceParameters;\n                  return {\n                    iceParameters: {\n                      iceUfrag: t.iceUfrag,\n                      icePwd: t.icePwd\n                    }\n                  };\n                }(r), n = _ref78.iceParameters;\n                _context307.next = 21;\n                return e.next({\n                  remoteIceParameters: n\n                });\n              case 21:\n              case \"end\":\n                return _context307.stop();\n            }\n          }, _callee304, null, [[9, 15]]);\n        }))), this._p2pChannel.on(Og.RequestReconnect, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee305() {\n          return _regeneratorRuntime().wrap(function _callee305$(_context308) {\n            while (1) switch (_context308.prev = _context308.next) {\n              case 0:\n                _this267._gateway.reconnect();\n              case 1:\n              case \"end\":\n                return _context308.stop();\n            }\n          }, _callee305);\n        }))), this._p2pChannel.on(Og.RequestReconnectPC, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee306() {\n          var e, _yield$_this267$_p2pC, t, i, r, _yield$_this267$_gate, n, o, _kD2, s, a, c, d, u, l;\n          return _regeneratorRuntime().wrap(function _callee306$(_context309) {\n            while (1) switch (_context309.prev = _context309.next) {\n              case 0:\n                _context309.next = 2;\n                return _this267._p2pChannel.startP2PConnection({\n                  turnServer: null === (e = _this267._joinInfo) || void 0 === e ? void 0 : e.turnServer\n                });\n              case 2:\n                _yield$_this267$_p2pC = _context309.sent;\n                t = _yield$_this267$_p2pC.iceParameters;\n                i = _yield$_this267$_p2pC.dtlsParameters;\n                r = _yield$_this267$_p2pC.rtpCapabilities;\n                _context309.next = 8;\n                return _this267._gateway.reconnectPC({\n                  iceParameters: t,\n                  dtlsParameters: i,\n                  rtpCapabilities: r\n                });\n              case 8:\n                _yield$_this267$_gate = _context309.sent;\n                n = _yield$_this267$_gate.gatewayEstablishParams;\n                o = _yield$_this267$_gate.gatewayAddress;\n                _kD2 = kD(n, o);\n                s = _kD2.dtlsParameters;\n                a = _kD2.iceParameters;\n                c = _kD2.candidates;\n                d = _kD2.rtpCapabilities;\n                u = _kD2.setup;\n                l = _kD2.cname;\n                _context309.next = 20;\n                return _this267._p2pChannel.connect(a, s, c, d, u, l);\n              case 20:\n                _context309.next = 22;\n                return _this267._p2pChannel.republish();\n              case 22:\n                _context309.next = 24;\n                return _this267._p2pChannel.reSubscribe();\n              case 24:\n              case \"end\":\n                return _context309.stop();\n            }\n          }, _callee306);\n        }))), this._p2pChannel.on(Og.RequestUnpublishForReconnectPC, /*#__PURE__*/function () {\n          var _ref81 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee307(e, t, i) {\n            return _regeneratorRuntime().wrap(function _callee307$(_context310) {\n              while (1) switch (_context310.prev = _context310.next) {\n                case 0:\n                  if (!(_this267._joinInfo && void 0 !== _this267._uid)) {\n                    _context310.next = 6;\n                    break;\n                  }\n                  _context310.next = 3;\n                  return _this267._gateway.unpublish(e, _this267._uid);\n                case 3:\n                  t();\n                  _context310.next = 7;\n                  break;\n                case 6:\n                  i();\n                case 7:\n                case \"end\":\n                  return _context310.stop();\n              }\n            }, _callee307);\n          }));\n          return function (_x468, _x469, _x470) {\n            return _ref81.apply(this, arguments);\n          };\n        }()), this._p2pChannel.on(Og.P2PLost, function () {\n          _this267.emit(Am.P2P_LOST, _this267.store.uid);\n        }), this._p2pChannel.on(Og.UpdateVideoEncoder, function (e) {\n          e._encoderConfig && _this267._gateway.setVideoProfile(e._encoderConfig);\n        }), this._p2pChannel.on(Og.ConnectionTypeChange, function (e) {\n          _this267.emit(Am.IS_USING_CLOUD_PROXY, e);\n        }), this._p2pChannel.on(Og.RequestLowStreamParameter, function (e) {\n          e(_this267._lowStreamParameter || {\n            width: 160,\n            height: 120,\n            framerate: 15,\n            bitrate: 50\n          });\n        }), this._p2pChannel.on(Og.QueryClientConnectionState, function (e) {\n          e(_this267.connectionState);\n        });\n      }\n    }, {\n      key: \"getKeyMetrics\",\n      value: function getKeyMetrics() {\n        return this.store.keyMetrics;\n      }\n    }, {\n      key: \"enableContentInspect\",\n      value: function () {\n        var _enableContentInspect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee308(e) {\n          var _this268 = this;\n          var t, _t211;\n          return _regeneratorRuntime().wrap(function _callee308$(_context311) {\n            while (1) switch (_context311.prev = _context311.next) {\n              case 0:\n                if (!(\"CONNECTED\" !== this.connectionState || !this._joinInfo)) {\n                  _context311.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Client did not join channel\"));\n              case 2:\n                if (!this._inspect) {\n                  _context311.next = 4;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] Inspect content service already in connecting/connected state\"));\n              case 4:\n                if (e) {\n                  _context311.next = 6;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"[\".concat(this._clientId, \"] inspectConfig is necessary\"));\n              case 6:\n                if (!(!e.inspectType || !Array.isArray(e.inspectType))) {\n                  _context311.next = 8;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"[\".concat(this._clientId, \"] inspectConfig.inspectType is necessary and is an instance of Array.\"));\n              case 8:\n                t = _toConsumableArray(new Set(e.inspectType));\n                t.forEach(function (e) {\n                  if (![\"supervise\", \"moderation\"].includes(e)) throw new vE(TE.INVALID_PARAMS, \"[\".concat(_this268._clientId, \"] \").concat(e, \" is not a valid inspect type.\"));\n                }), e.inspectType = t;\n                if (!(e && e.extraInfo && e.extraInfo.length > 1024)) {\n                  _context311.next = 12;\n                  break;\n                }\n                throw new vE(TE.INVALID_PARAMS, \"[\".concat(this._clientId, \"] inspectConfig.extraInfo length cannot exceed 1024 bytes\"));\n              case 12:\n                _context311.prev = 12;\n                _t211 = new ak(e);\n                this._inspect = _t211;\n                this.handleVideoInspectEvents(this._inspect);\n                _context311.next = 18;\n                return _t211.init({\n                  appId: this._joinInfo.appId,\n                  areaCode: \"\",\n                  cname: this._joinInfo.cname,\n                  sid: this._joinInfo.sid,\n                  token: this._joinInfo.token,\n                  uid: this._joinInfo.uid,\n                  cid: this._joinInfo.cid,\n                  vid: this._joinInfo.vid ? Number(this._joinInfo.vid) : 0\n                }, RE);\n              case 18:\n                _context311.next = 23;\n                break;\n              case 20:\n                _context311.prev = 20;\n                _context311.t0 = _context311[\"catch\"](12);\n                throw Array.isArray(_context311.t0) ? _context311.t0[0] : _context311.t0;\n              case 23:\n              case \"end\":\n                return _context311.stop();\n            }\n          }, _callee308, this, [[12, 20]]);\n        }));\n        function enableContentInspect(_x471) {\n          return _enableContentInspect.apply(this, arguments);\n        }\n        return enableContentInspect;\n      }()\n    }, {\n      key: \"disableContentInspect\",\n      value: function () {\n        var _disableContentInspect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee309() {\n          return _regeneratorRuntime().wrap(function _callee309$(_context312) {\n            while (1) switch (_context312.prev = _context312.next) {\n              case 0:\n                if (this._inspect) {\n                  _context312.next = 2;\n                  break;\n                }\n                throw new vE(TE.INVALID_OPERATION, \"[\".concat(this._clientId, \"] inspectVideoContent not started\"));\n              case 2:\n                _context312.prev = 2;\n                this._inspect.close(), this._inspect = void 0;\n                _context312.next = 9;\n                break;\n              case 6:\n                _context312.prev = 6;\n                _context312.t0 = _context312[\"catch\"](2);\n                throw Array.isArray(_context312.t0) ? _context312.t0[0] : _context312.t0;\n              case 9:\n              case \"end\":\n                return _context312.stop();\n            }\n          }, _callee309, this, [[2, 6]]);\n        }));\n        function disableContentInspect() {\n          return _disableContentInspect.apply(this, arguments);\n        }\n        return disableContentInspect;\n      }()\n    }, {\n      key: \"handleVideoInspectEvents\",\n      value: function handleVideoInspectEvents(e) {\n        var _this269 = this;\n        e.on(kg.CONNECTION_STATE_CHANGE, function (t, i) {\n          switch (_this269.emit(Am.CONTENT_INSPECT_CONNECTION_STATE_CHANGE, t, i), i) {\n            case Pg.CONNECTED:\n              if (\"CONNECTED\" !== _this269.connectionState) return void _this269.emit(Am.CONTENT_INSPECT_ERROR, new vE(TE.OPERATION_ABORTED, \"Content inspect was cancelled because it left the channel\"));\n              e.inspectImage();\n          }\n        }), e.on(kg.INSPECT_RESULT, function (e, t) {\n          var i;\n          if ((null == t ? void 0 : t.code) === TE.INVALID_OPERATION && \"DISCONNECTED\" === _this269.connectionState) return NE.debug(\"Stop inspect content because that has left channel\"), null == _this269 || null === (i = _this269._inspect) || void 0 === i || i.close(), void (_this269._inspect = void 0);\n          _this269.emit(Am.CONTENT_INSPECT_RESULT, e, t);\n        }), e.on(kg.CLIENT_LOCAL_VIDEO_TRACK, function (e) {\n          e(_this269.localTracks.filter(function (e) {\n            return \"video\" === e.trackMediaType;\n          })[0]);\n        });\n      }\n    }, {\n      key: \"getJoinChannelServiceRecords\",\n      value: function getJoinChannelServiceRecords() {\n        return NE.debug(\"getJoinChannelServiceRecords\"), this.store.joinChannelServiceRecords;\n      }\n    }, {\n      key: \"setPublishAudioFilterEnabled\",\n      value: function () {\n        var _setPublishAudioFilterEnabled2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee310(e) {\n          return _regeneratorRuntime().wrap(function _callee310$(_context313) {\n            while (1) switch (_context313.prev = _context313.next) {\n              case 0:\n                qf(e, \"enabled\");\n                WE(\"ENABLE_PUBLISH_AUDIO_FILTER\", e);\n                _context313.t0 = this._joinInfo;\n                if (!_context313.t0) {\n                  _context313.next = 6;\n                  break;\n                }\n                _context313.next = 6;\n                return this._gateway.setPublishAudioFilterEnabled(e);\n              case 6:\n              case \"end\":\n                return _context313.stop();\n            }\n          }, _callee310, this);\n        }));\n        function setPublishAudioFilterEnabled(_x472) {\n          return _setPublishAudioFilterEnabled2.apply(this, arguments);\n        }\n        return setPublishAudioFilterEnabled;\n      }()\n    }, {\n      key: \"_handleResetAddStream\",\n      value: function _handleResetAddStream(e, t) {\n        switch (t) {\n          case \"audio\":\n            e._audio_added_ = !1, e._trust_audio_stream_added_state_ = !0;\n            break;\n          case \"video\":\n            e._video_added_ = !1, e._trust_video_stream_added_state_ = !0;\n        }\n      }\n    }]);\n    return Yk;\n  }(gE)).prototype, \"leave\", [ck], Object.getOwnPropertyDescriptor(Yk.prototype, \"leave\"), Yk.prototype), ZS(Yk.prototype, \"publish\", [dk], Object.getOwnPropertyDescriptor(Yk.prototype, \"publish\"), Yk.prototype), ZS(Yk.prototype, \"unpublish\", [uk], Object.getOwnPropertyDescriptor(Yk.prototype, \"unpublish\"), Yk.prototype), ZS(Yk.prototype, \"subscribe\", [lk], Object.getOwnPropertyDescriptor(Yk.prototype, \"subscribe\"), Yk.prototype), ZS(Yk.prototype, \"massSubscribe\", [hk], Object.getOwnPropertyDescriptor(Yk.prototype, \"massSubscribe\"), Yk.prototype), ZS(Yk.prototype, \"unsubscribe\", [pk], Object.getOwnPropertyDescriptor(Yk.prototype, \"unsubscribe\"), Yk.prototype), ZS(Yk.prototype, \"massUnsubscribe\", [_k], Object.getOwnPropertyDescriptor(Yk.prototype, \"massUnsubscribe\"), Yk.prototype), ZS(Yk.prototype, \"setLowStreamParameter\", [Ek], Object.getOwnPropertyDescriptor(Yk.prototype, \"setLowStreamParameter\"), Yk.prototype), ZS(Yk.prototype, \"enableDualStream\", [fk], Object.getOwnPropertyDescriptor(Yk.prototype, \"enableDualStream\"), Yk.prototype), ZS(Yk.prototype, \"disableDualStream\", [mk], Object.getOwnPropertyDescriptor(Yk.prototype, \"disableDualStream\"), Yk.prototype), ZS(Yk.prototype, \"setClientRole\", [gk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setClientRole\"), Yk.prototype), ZS(Yk.prototype, \"setProxyServer\", [Sk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setProxyServer\"), Yk.prototype), ZS(Yk.prototype, \"setTurnServer\", [Tk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setTurnServer\"), Yk.prototype), ZS(Yk.prototype, \"setLicense\", [vk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setLicense\"), Yk.prototype), ZS(Yk.prototype, \"startProxyServer\", [Rk], Object.getOwnPropertyDescriptor(Yk.prototype, \"startProxyServer\"), Yk.prototype), ZS(Yk.prototype, \"stopProxyServer\", [Ik], Object.getOwnPropertyDescriptor(Yk.prototype, \"stopProxyServer\"), Yk.prototype), ZS(Yk.prototype, \"setLocalAccessPointsV2\", [yk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setLocalAccessPointsV2\"), Yk.prototype), ZS(Yk.prototype, \"setLocalAccessPoints\", [Ck], Object.getOwnPropertyDescriptor(Yk.prototype, \"setLocalAccessPoints\"), Yk.prototype), ZS(Yk.prototype, \"setRemoteDefaultVideoStreamType\", [Ak], Object.getOwnPropertyDescriptor(Yk.prototype, \"setRemoteDefaultVideoStreamType\"), Yk.prototype), ZS(Yk.prototype, \"setRemoteVideoStreamType\", [Ok], Object.getOwnPropertyDescriptor(Yk.prototype, \"setRemoteVideoStreamType\"), Yk.prototype), ZS(Yk.prototype, \"setStreamFallbackOption\", [bk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setStreamFallbackOption\"), Yk.prototype), ZS(Yk.prototype, \"setEncryptionConfig\", [wk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setEncryptionConfig\"), Yk.prototype), ZS(Yk.prototype, \"renewToken\", [Nk], Object.getOwnPropertyDescriptor(Yk.prototype, \"renewToken\"), Yk.prototype), ZS(Yk.prototype, \"enableAudioVolumeIndicator\", [Dk], Object.getOwnPropertyDescriptor(Yk.prototype, \"enableAudioVolumeIndicator\"), Yk.prototype), ZS(Yk.prototype, \"startLiveStreaming\", [Pk], Object.getOwnPropertyDescriptor(Yk.prototype, \"startLiveStreaming\"), Yk.prototype), ZS(Yk.prototype, \"setLiveTranscoding\", [Lk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setLiveTranscoding\"), Yk.prototype), ZS(Yk.prototype, \"stopLiveStreaming\", [kk], Object.getOwnPropertyDescriptor(Yk.prototype, \"stopLiveStreaming\"), Yk.prototype), ZS(Yk.prototype, \"addInjectStreamUrl\", [Mk], Object.getOwnPropertyDescriptor(Yk.prototype, \"addInjectStreamUrl\"), Yk.prototype), ZS(Yk.prototype, \"removeInjectStreamUrl\", [Uk], Object.getOwnPropertyDescriptor(Yk.prototype, \"removeInjectStreamUrl\"), Yk.prototype), ZS(Yk.prototype, \"startChannelMediaRelay\", [xk], Object.getOwnPropertyDescriptor(Yk.prototype, \"startChannelMediaRelay\"), Yk.prototype), ZS(Yk.prototype, \"updateChannelMediaRelay\", [Vk], Object.getOwnPropertyDescriptor(Yk.prototype, \"updateChannelMediaRelay\"), Yk.prototype), ZS(Yk.prototype, \"stopChannelMediaRelay\", [jk], Object.getOwnPropertyDescriptor(Yk.prototype, \"stopChannelMediaRelay\"), Yk.prototype), ZS(Yk.prototype, \"sendCustomReportMessage\", [Fk], Object.getOwnPropertyDescriptor(Yk.prototype, \"sendCustomReportMessage\"), Yk.prototype), ZS(Yk.prototype, \"pickSVCLayer\", [Bk], Object.getOwnPropertyDescriptor(Yk.prototype, \"pickSVCLayer\"), Yk.prototype), ZS(Yk.prototype, \"enableContentInspect\", [Gk], Object.getOwnPropertyDescriptor(Yk.prototype, \"enableContentInspect\"), Yk.prototype), ZS(Yk.prototype, \"disableContentInspect\", [Wk], Object.getOwnPropertyDescriptor(Yk.prototype, \"disableContentInspect\"), Yk.prototype), ZS(Yk.prototype, \"getJoinChannelServiceRecords\", [Hk], Object.getOwnPropertyDescriptor(Yk.prototype, \"getJoinChannelServiceRecords\"), Yk.prototype), ZS(Yk.prototype, \"setPublishAudioFilterEnabled\", [Kk], Object.getOwnPropertyDescriptor(Yk.prototype, \"setPublishAudioFilterEnabled\"), Yk.prototype), Yk);\n  var zk = /*#__PURE__*/function (_GT2) {\n    _inherits(zk, _GT2);\n    _createClass(zk, [{\n      key: \"currentState\",\n      set: function set(e) {\n        e !== this._currentState && (this._currentState = e, this.emit(km.AUDIO_SOURCE_STATE_CHANGE, this._currentState));\n      },\n      get: function get() {\n        return this._currentState;\n      }\n    }]);\n    function zk(e) {\n      var _this270;\n      _classCallCheck(this, zk);\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n      _this270 = _possibleConstructorReturn(this, _getPrototypeOf(zk).call(this)), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"audioBuffer\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"sourceNode\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"startPlayTime\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"startPlayOffset\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"pausePlayTime\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"options\", void 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"currentLoopCount\", 0), mp(_assertThisInitialized(_assertThisInitialized(_this270)), \"_currentState\", \"stopped\"), _this270.audioBuffer = e, _this270.options = t, _this270.startPlayOffset = _this270.options.startPlayTime || 0;\n      return _this270;\n    }\n    _createClass(zk, [{\n      key: \"createWebAudioDiagram\",\n      value: function createWebAudioDiagram() {\n        return this.context.createGain();\n      }\n    }, {\n      key: \"updateOptions\",\n      value: function updateOptions(e) {\n        \"stopped\" === this.currentState ? (this.options = e, this.startPlayOffset = this.options.startPlayTime || 0) : NE.warning(\"can not set audio source options\");\n      }\n    }, {\n      key: \"startProcessAudioBuffer\",\n      value: function startProcessAudioBuffer() {\n        this.sourceNode && this.stopProcessAudioBuffer(), this.sourceNode = this.createSourceNode(), this.startSourceNode(), this.currentState = \"playing\";\n      }\n    }, {\n      key: \"pauseProcessAudioBuffer\",\n      value: function pauseProcessAudioBuffer() {\n        this.sourceNode && \"playing\" === this.currentState && (this.pausePlayTime = this.currentTime, this.sourceNode.onended = null, this.sourceNode.stop(), this.sourceNode.buffer = null, this.sourceNode = this.createSourceNode(), this.currentState = \"paused\");\n      }\n    }, {\n      key: \"seekAudioBuffer\",\n      value: function seekAudioBuffer(e) {\n        this.sourceNode && (this.sourceNode.onended = null, \"playing\" === this.currentState && this.sourceNode.stop(), this.sourceNode = this.createSourceNode(), \"playing\" === this.currentState ? (this.startPlayOffset = e, this.startSourceNode()) : \"paused\" === this.currentState && (this.pausePlayTime = e));\n      }\n    }, {\n      key: \"resumeProcessAudioBuffer\",\n      value: function resumeProcessAudioBuffer() {\n        \"paused\" === this.currentState && this.sourceNode && (this.startPlayOffset = this.pausePlayTime, this.pausePlayTime = 0, this.startSourceNode(), this.currentState = \"playing\");\n      }\n    }, {\n      key: \"stopProcessAudioBuffer\",\n      value: function stopProcessAudioBuffer() {\n        if (this.sourceNode) {\n          this.sourceNode.onended = null;\n          try {\n            this.sourceNode.stop();\n          } catch (e) {}\n          this.reset();\n        }\n      }\n    }, {\n      key: \"startSourceNode\",\n      value: function startSourceNode() {\n        this.sourceNode && this.sourceNode.buffer && (this.sourceNode.start(0, this.startPlayOffset), this.startPlayTime = this.context.currentTime, this.sourceNode.onended = this.handleSourceNodeEnded.bind(this));\n      }\n    }, {\n      key: \"createSourceNode\",\n      value: function createSourceNode() {\n        var e = this.context.createBufferSource();\n        return e.buffer = this.audioBuffer, e.loop = !!this.options.loop, e.connect(this.outputNode), e;\n      }\n    }, {\n      key: \"handleSourceNodeEnded\",\n      value: function handleSourceNodeEnded() {\n        if (this.currentLoopCount += 1, this.options.cycle && this.options.cycle > this.currentLoopCount) return this.startPlayOffset = 0, this.sourceNode = void 0, void this.startProcessAudioBuffer();\n        this.reset();\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.startPlayOffset = this.options.startPlayTime || 0, this.currentState = \"stopped\", this.sourceNode && (this.sourceNode.disconnect(), this.sourceNode = void 0), this.currentLoopCount = 0;\n      }\n    }, {\n      key: \"duration\",\n      get: function get() {\n        return this.audioBuffer.duration;\n      }\n    }, {\n      key: \"currentTime\",\n      get: function get() {\n        return \"stopped\" === this.currentState ? 0 : \"paused\" === this.currentState ? this.pausePlayTime : (this.context.currentTime - this.startPlayTime + this.startPlayOffset) % this.audioBuffer.duration;\n      }\n    }]);\n    return zk;\n  }(GT);\n  var Qk = new Map();\n  function Zk(_x473, _x474) {\n    return _Zk.apply(this, arguments);\n  }\n  function _Zk() {\n    _Zk = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee350(e, t) {\n      var i, _t217, _t218, r;\n      return _regeneratorRuntime().wrap(function _callee350$(_context353) {\n        while (1) switch (_context353.prev = _context353.next) {\n          case 0:\n            i = null;\n            if (!(\"string\" == typeof e)) {\n              _context353.next = 16;\n              break;\n            }\n            _t217 = Qk.get(e);\n            if (!_t217) {\n              _context353.next = 5;\n              break;\n            }\n            return _context353.abrupt(\"return\", (NE.debug(\"use cached audio resource: \", e), _t217));\n          case 5:\n            _context353.prev = 5;\n            _context353.next = 8;\n            return yE(function () {\n              return fE.get(e, {\n                responseType: \"arraybuffer\"\n              });\n            }, void 0, void 0, {\n              maxRetryCount: 3\n            });\n          case 8:\n            i = _context353.sent.data;\n            _context353.next = 14;\n            break;\n          case 11:\n            _context353.prev = 11;\n            _context353.t0 = _context353[\"catch\"](5);\n            throw new vE(TE.FETCH_AUDIO_FILE_FAILED, _context353.t0.toString());\n          case 14:\n            _context353.next = 20;\n            break;\n          case 16:\n            _t218 = new Cl(function (t, i) {\n              var r = new FileReader();\n              r.onload = function (e) {\n                e.target ? t(e.target.result) : i(new vE(TE.READ_LOCAL_AUDIO_FILE_ERROR));\n              }, r.onerror = function () {\n                i(new vE(TE.READ_LOCAL_AUDIO_FILE_ERROR));\n              }, r.readAsArrayBuffer(e);\n            });\n            _context353.next = 19;\n            return _t218;\n          case 19:\n            i = _context353.sent;\n          case 20:\n            _context353.next = 22;\n            return function (e) {\n              var t = MT();\n              return new Cl(function (i, r) {\n                t.decodeAudioData(e, function (e) {\n                  i(e);\n                }, function (e) {\n                  r(new vE(TE.DECODE_AUDIO_FILE_FAILED, e.toString()));\n                });\n              });\n            }(i);\n          case 22:\n            r = _context353.sent;\n            return _context353.abrupt(\"return\", (\"string\" == typeof e && t && Qk.set(e, r), r));\n          case 24:\n          case \"end\":\n            return _context353.stop();\n        }\n      }, _callee350, null, [[5, 11]]);\n    }));\n    return _Zk.apply(this, arguments);\n  }\n  function $k(e, t) {\n    var i = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var r = Object.getOwnPropertySymbols(e);\n      t && (r = r.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), i.push.apply(i, r);\n    }\n    return i;\n  }\n  function eM(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var i = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? $k(Object(i), !0).forEach(function (t) {\n        mp(e, t, i[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : $k(Object(i)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t));\n      });\n    }\n    return e;\n  }\n  function tM(e, t, i, r) {\n    i.optimizationMode && (r && r.width && r.height ? (i.encoderConfig = eM(eM({}, r), {}, {\n      bitrateMin: r.bitrateMin,\n      bitrateMax: r.bitrateMax\n    }), \"motion\" !== i.optimizationMode && \"detail\" !== i.optimizationMode || (t.contentHint = i.optimizationMode, t.contentHint === i.optimizationMode ? NE.debug(\"[\".concat(e, \"] set content hint to\"), i.optimizationMode) : NE.debug(\"[\".concat(e, \"] set content hint failed\")))) : NE.warning(\"[\".concat(e, \"] can not apply optimization mode bitrate config, no encoderConfig\")));\n  }\n  var iM = Bh().name;\n  function rM(e, t, i, r) {\n    var n,\n      o = 0,\n      s = null;\n    return new Cl(function (a, c) {\n      setTimeout(function () {\n        n && (n(), a(o));\n      }, t), n = VT(function () {\n        !function () {\n          o > r && n && (n(), a(o));\n          var t = i.getContext(\"2d\");\n          if (!t) {\n            var _e224 = new vE(TE.UNEXPECTED_ERROR, \"can not get canvas 2d context.\");\n            return NE.error(_e224.toString()), void c(_e224);\n          }\n          t.drawImage(e, 0, 0, 160, 120);\n          var d = t.getImageData(0, 0, i.width, i.height),\n            u = Math.floor(d.data.length / 3);\n          if (s) {\n            for (var _e225 = 0; _e225 < u; _e225 += 3) if (d.data[_e225] !== s[_e225]) return o += 1, void (s = d.data);\n            s = d.data;\n          } else s = d.data;\n        }();\n      }, 30);\n    });\n  }\n  var nM = /*#__PURE__*/function () {\n    function nM(e, t) {\n      _classCallCheck(this, nM);\n      mp(this, \"id\", 0), mp(this, \"element\", void 0), mp(this, \"peerPair\", void 0), mp(this, \"context\", void 0), mp(this, \"audioPlayerElement\", void 0), mp(this, \"audioTrack\", void 0), nM.count += 1, this.id = nM.count, this.element = e, this.context = t;\n    }\n    _createClass(nM, [{\n      key: \"initPeers\",\n      value: function initPeers() {\n        var _this271 = this;\n        this.peerPair = [new RTCPeerConnection(), new RTCPeerConnection()], this.peerPair[1].ontrack = function (e) {\n          var t = document.createElement(\"audio\");\n          t.srcObject = new MediaStream([e.track]), t.play(), _this271.audioPlayerElement = t;\n        };\n      }\n    }, {\n      key: \"switchSdp\",\n      value: function () {\n        var _switchSdp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee313() {\n          var e, t, i, r;\n          return _regeneratorRuntime().wrap(function _callee313$(_context316) {\n            while (1) switch (_context316.prev = _context316.next) {\n              case 0:\n                if (this.peerPair) {\n                  _context316.next = 2;\n                  break;\n                }\n                return _context316.abrupt(\"return\");\n              case 2:\n                e = /*#__PURE__*/function () {\n                  var _ref82 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee311(_e226, t) {\n                    var i;\n                    return _regeneratorRuntime().wrap(function _callee311$(_context314) {\n                      while (1) switch (_context314.prev = _context314.next) {\n                        case 0:\n                          if (!(\"offer\" === t)) {\n                            _context314.next = 6;\n                            break;\n                          }\n                          _context314.next = 3;\n                          return _e226.createOffer();\n                        case 3:\n                          _context314.t0 = _context314.sent;\n                          _context314.next = 9;\n                          break;\n                        case 6:\n                          _context314.next = 8;\n                          return _e226.createAnswer();\n                        case 8:\n                          _context314.t0 = _context314.sent;\n                        case 9:\n                          i = _context314.t0;\n                          _context314.next = 12;\n                          return _e226.setLocalDescription(i);\n                        case 12:\n                          return _context314.abrupt(\"return\", \"complete\" === _e226.iceGatheringState ? _e226.localDescription : new Cl(function (t) {\n                            _e226.onicegatheringstatechange = function () {\n                              \"complete\" === _e226.iceGatheringState && t(_e226.localDescription);\n                            };\n                          }));\n                        case 13:\n                        case \"end\":\n                          return _context314.stop();\n                      }\n                    }, _callee311);\n                  }));\n                  return function e(_x475, _x476) {\n                    return _ref82.apply(this, arguments);\n                  };\n                }(), t = /*#__PURE__*/function () {\n                  var _ref83 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee312(e, _t212) {\n                    return _regeneratorRuntime().wrap(function _callee312$(_context315) {\n                      while (1) switch (_context315.prev = _context315.next) {\n                        case 0:\n                          _context315.next = 2;\n                          return e.setRemoteDescription(_t212);\n                        case 2:\n                          return _context315.abrupt(\"return\", _context315.sent);\n                        case 3:\n                        case \"end\":\n                          return _context315.stop();\n                      }\n                    }, _callee312);\n                  }));\n                  return function t(_x477, _x478) {\n                    return _ref83.apply(this, arguments);\n                  };\n                }();\n                _context316.prev = 3;\n                _context316.next = 6;\n                return e(this.peerPair[0], \"offer\");\n              case 6:\n                i = _context316.sent;\n                _context316.next = 9;\n                return t(this.peerPair[1], i);\n              case 9:\n                _context316.next = 11;\n                return e(this.peerPair[1], \"answer\");\n              case 11:\n                r = _context316.sent;\n                _context316.next = 14;\n                return t(this.peerPair[0], r);\n              case 14:\n                _context316.next = 19;\n                break;\n              case 16:\n                _context316.prev = 16;\n                _context316.t0 = _context316[\"catch\"](3);\n                throw new vE(TE.LOCAL_AEC_ERROR, _context316.t0.toString()).print();\n              case 19:\n              case \"end\":\n                return _context316.stop();\n            }\n          }, _callee313, this, [[3, 16]]);\n        }));\n        function switchSdp() {\n          return _switchSdp.apply(this, arguments);\n        }\n        return switchSdp;\n      }()\n    }, {\n      key: \"getTracksFromMediaElement\",\n      value: function () {\n        var _getTracksFromMediaElement = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee314(e) {\n          var t, i;\n          return _regeneratorRuntime().wrap(function _callee314$(_context317) {\n            while (1) switch (_context317.prev = _context317.next) {\n              case 0:\n                if (!this.audioTrack) {\n                  _context317.next = 2;\n                  break;\n                }\n                return _context317.abrupt(\"return\", this.audioTrack);\n              case 2:\n                _context317.prev = 2;\n                e instanceof HTMLVideoElement && (e.captureStream ? e.captureStream() : e.mozCaptureStream()), t = this.context.createMediaStreamDestination();\n                this.context.createMediaElementSource(e).connect(t);\n                _context317.next = 10;\n                break;\n              case 7:\n                _context317.prev = 7;\n                _context317.t0 = _context317[\"catch\"](2);\n                throw new vE(TE.LOCAL_AEC_ERROR, _context317.t0.toString()).print();\n              case 10:\n                if (t) {\n                  _context317.next = 12;\n                  break;\n                }\n                throw new vE(TE.LOCAL_AEC_ERROR, \"no dest node when local aec\").print();\n              case 12:\n                i = t.stream.getAudioTracks()[0];\n                return _context317.abrupt(\"return\", (this.audioTrack = i, i));\n              case 14:\n              case \"end\":\n                return _context317.stop();\n            }\n          }, _callee314, this, [[2, 7]]);\n        }));\n        function getTracksFromMediaElement(_x479) {\n          return _getTracksFromMediaElement.apply(this, arguments);\n        }\n        return getTracksFromMediaElement;\n      }()\n    }, {\n      key: \"getElement\",\n      value: function getElement() {\n        return this.element;\n      }\n    }, {\n      key: \"startEchoCancellation\",\n      value: function () {\n        var _startEchoCancellation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee315() {\n          var e, t;\n          return _regeneratorRuntime().wrap(function _callee315$(_context318) {\n            while (1) switch (_context318.prev = _context318.next) {\n              case 0:\n                this.context.resume(), this.peerPair && this.close(), this.initPeers();\n                e = this.element;\n                _context318.next = 4;\n                return this.getTracksFromMediaElement(e);\n              case 4:\n                t = _context318.sent;\n                this.peerPair && this.peerPair[0].addTrack(t);\n                _context318.next = 8;\n                return this.switchSdp();\n              case 8:\n              case \"end\":\n                return _context318.stop();\n            }\n          }, _callee315, this);\n        }));\n        function startEchoCancellation() {\n          return _startEchoCancellation.apply(this, arguments);\n        }\n        return startEchoCancellation;\n      }()\n    }, {\n      key: \"close\",\n      value: function close() {\n        NE.debug(\"close echo cancellation unit, id is\", this.id), this.audioPlayerElement && this.audioPlayerElement.pause(), this.peerPair && this.peerPair.forEach(function (e) {\n          e.close();\n        }), this.peerPair = void 0, this.audioPlayerElement = void 0;\n      }\n    }]);\n    return nM;\n  }();\n  var oM, sM;\n  mp(nM, \"count\", 0);\n  var aM = window.AudioContext || window.webkitAudioContext;\n  var cM = new (oM = RT({\n    report: IT\n  }), ZS((sM = /*#__PURE__*/function () {\n    function sM() {\n      _classCallCheck(this, sM);\n      mp(this, \"units\", []), mp(this, \"context\", void 0);\n    }\n    _createClass(sM, [{\n      key: \"processExternalMediaAEC\",\n      value: function processExternalMediaAEC(e) {\n        if (!this._doesEnvironmentNeedAEC()) return NE.debug(\"the system does not need to process local aec\"), -1;\n        this.context || (this.context = new aM());\n        var t = this.units.find(function (t) {\n          return t && t.getElement() === e;\n        });\n        return t || (t = new nM(e, this.context), this.units.push(t)), t.startEchoCancellation(), NE.debug(\"start processing local audio echo cancellation, id is\", t.id), t.id;\n      }\n    }, {\n      key: \"_doesEnvironmentNeedAEC\",\n      value: function _doesEnvironmentNeedAEC() {\n        return Bh().name !== xh.SAFARI;\n      }\n    }]);\n    return sM;\n  }()).prototype, \"processExternalMediaAEC\", [oM], Object.getOwnPropertyDescriptor(sM.prototype, \"processExternalMediaAEC\"), sM.prototype), sM)();\n  WE(\"PROCESS_ID\", \"process-\".concat(MR(8, \"\"), \"-\").concat(MR(4, \"\"), \"-\").concat(MR(4, \"\"), \"-\").concat(MR(4, \"\"), \"-\").concat(MR(12, \"\"))), function () {\n    var e = Bh();\n    Vg.getDisplayMedia = function (e) {\n      if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) return !0;\n      return !1;\n    }(), Vg.getStreamFromExtension = e.name === xh.CHROME && Number(e.version) > 34, Vg.supportUnifiedPlan = function () {\n      if (!window.RTCRtpTransceiver) return !1;\n      if (!(\"currentDirection\" in RTCRtpTransceiver.prototype)) return !1;\n      var e = new RTCPeerConnection();\n      var t = !1;\n      try {\n        e.addTransceiver(\"audio\"), t = !0;\n      } catch (e) {}\n      return e.close(), t;\n    }(), Vg.supportMinBitrate = e.name === xh.CHROME || e.name === xh.EDGE, Vg.supportSetRtpSenderParameters = function () {\n      var e = Bh();\n      if (!window.RTCRtpSender || !window.RTCRtpSender.prototype.setParameters || !window.RTCRtpSender.prototype.getParameters) return !1;\n      return !!ap() || !(!zh() && !Yh()) || e.name === xh.FIREFOX && Number(e.version) >= 64;\n    }(), e.name === xh.SAFARI && (Number(e.version) >= 14 ? Vg.supportDualStream = !0 : Vg.supportDualStream = !1), Vg.webAudioMediaStreamDest = function () {\n      var e = Bh();\n      if (e.name === xh.SAFARI && Number(e.version) < 12) return !1;\n      return !0;\n    }(), Vg.supportReplaceTrack = function () {\n      if (!window.RTCRtpSender) return !1;\n      if (\"function\" == typeof RTCRtpSender.prototype.replaceTrack) return !0;\n      return !1;\n    }(), Vg.supportWebGL = \"undefined\" != typeof WebGLRenderingContext, Vg.supportRequestFrame = !!window.CanvasCaptureMediaStreamTrack, ap() || (Vg.webAudioWithAEC = !0), Vg.supportShareAudio = function () {\n      var e = Bh();\n      if ((e.os === Uh.WIN_10 || e.os === Uh.WIN_81 || e.os === Uh.WIN_7 || e.os === Uh.LINUX || e.os === Uh.MAC_OS) && e.name === xh.CHROME && Number(e.version) >= 74) return !0;\n      return !1;\n    }(), Vg.supportDualStreamEncoding = function () {\n      var e = Bh();\n      if (HE(\"DISABLE_WEBAUDIO\")) return !0;\n      return \"Safari\" === e.name && Number(e.version) >= 14 || !!(\"Chrome\" === e.name && /Windows/i.test(e.os || \"\") && Number(e.version) >= 100 && HE(\"CHROME_DUAL_STREAM_USE_ENCODING\"));\n    }(), Vg.supportDataChannel = function () {\n      if (function (e) {\n        var t = Bh();\n        return !(t.name !== xh.CHROME || !t.osVersion) && Number(t.version) >= e;\n      }(76) || function (e) {\n        var t = Bh();\n        return !(t.name !== xh.FIREFOX || !t.osVersion) && Number(t.version) >= e;\n      }(68) || function (e) {\n        var t = Bh();\n        return !(t.name !== xh.SAFARI || !t.osVersion) && Number(t.version) >= e;\n      }(14)) return !0;\n      return !1;\n    }(), NE.info(\"browser compatibility\", JSON.stringify(Vg), JSON.stringify(e));\n  }(), function () {\n    var e;\n    try {\n      e = window.localStorage.getItem(\"websdk_ng_global_parameter\");\n    } catch (e) {\n      return void NE.error(\"Error loading sdk config\", e.message);\n    }\n    if (e) try {\n      var t = JSON.parse(window.atob(e)),\n        i = Date.now();\n      NE.debug(\"Loading global parameters from cache\", t), Object.keys(t).forEach(function (e) {\n        if (Object.prototype.hasOwnProperty.call(KE, e)) {\n          var _t$e = t[e],\n            r = _t$e.value,\n            _n69 = _t$e.expires;\n          if (_n69 && _n69 <= i) return;\n          YE[e] = r, KE[e] = r;\n        }\n      });\n    } catch (t) {\n      NE.error(\"Error loading mutableParamsCache: \".concat(e), t.message);\n    }\n  }();\n  var dM = {\n      __CLIENT_LIST__: ZE,\n      __TRACK_LIST__: $E,\n      VERSION: PE,\n      BUILD: DE,\n      setParameter: function setParameter(e, t, i) {\n        NE.debug(\"setParameter key:\".concat(e, \", value:\").concat(JSON.stringify(t))), WE(e, t, i);\n      },\n      getParameter: HE,\n      getSupportedCodec: function () {\n        var _getSupportedCodec = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee316() {\n          var e, t, i;\n          return _regeneratorRuntime().wrap(function _callee316$(_context319) {\n            while (1) switch (_context319.prev = _context319.next) {\n              case 0:\n                e = {\n                  audio: [],\n                  video: []\n                };\n                _context319.prev = 1;\n                t = new RTCPeerConnection();\n                t.addTransceiver(\"video\", {\n                  direction: \"recvonly\"\n                }), t.addTransceiver(\"audio\", {\n                  direction: \"recvonly\"\n                });\n                _context319.next = 6;\n                return t.createOffer();\n              case 6:\n                i = _context319.sent.sdp;\n                if (i) {\n                  _context319.next = 9;\n                  break;\n                }\n                return _context319.abrupt(\"return\", e);\n              case 9:\n                t.close(), t = null, e = function (e) {\n                  var t = {\n                    video: [],\n                    audio: []\n                  };\n                  return e.match(/ VP8/i) && t.video.push(\"VP8\"), e.match(/ VP9/i) && t.video.push(\"VP9\"), e.match(/ AV1/i) && t.video.push(\"AV1\"), e.match(/ H264/i) && t.video.push(\"H264\"), e.match(/ opus/i) && t.audio.push(\"OPUS\"), e.match(/ PCMU/i) && t.audio.push(\"PCMU\"), e.match(/ PCMA/i) && t.audio.push(\"PCMA\"), e.match(/ G722/i) && t.audio.push(\"G722\"), t;\n                }(i);\n                _context319.next = 15;\n                break;\n              case 12:\n                _context319.prev = 12;\n                _context319.t0 = _context319[\"catch\"](1);\n                throw new vE(TE.CREATE_OFFER_FAILED, _context319.t0.toString && _context319.t0.toString()).print();\n              case 15:\n                return _context319.abrupt(\"return\", e);\n              case 16:\n              case \"end\":\n                return _context319.stop();\n            }\n          }, _callee316, null, [[1, 12]]);\n        }));\n        function getSupportedCodec() {\n          return _getSupportedCodec.apply(this, arguments);\n        }\n        return getSupportedCodec;\n      }(),\n      checkSystemRequirements: function checkSystemRequirements() {\n        var e = IT.reportApiInvoke(null, {\n          name: Em.CHECK_SYSTEM_REQUIREMENTS,\n          options: [],\n          tag: fm.TRACER\n        });\n        var t = !1;\n        try {\n          var _e227 = window.RTCPeerConnection,\n            _i123 = navigator.mediaDevices && navigator.mediaDevices.getUserMedia,\n            _r58 = window.WebSocket;\n          t = !!(_e227 && _i123 && _r58);\n        } catch (e) {\n          return NE.error(\"check system requirement failed: \", e), !1;\n        }\n        var i = !1;\n        var r = Bh();\n        r.name === xh.CHROME && Number(r.version) >= 58 && (!Jh() || qh()) && (i = !0), r.name === xh.FIREFOX && Number(r.version) >= 56 && (i = !0), r.name === xh.OPERA && Number(r.version) >= 45 && (i = !0), r.name === xh.SAFARI && Number(r.version) >= 11 && (i = !0), (op() || Bh().name === xh.QQ) && (i = !0), NE.debug(\"checkSystemRequirements, api:\", t, \"browser\", i);\n        var n = t && i;\n        return e.onSuccess(n), n;\n      },\n      getDevices: function getDevices(e) {\n        return iv.enumerateDevices(!0, !0, e);\n      },\n      getMicrophones: function getMicrophones(e) {\n        return iv.getRecordingDevices(e);\n      },\n      getCameras: function getCameras(e) {\n        return iv.getCamerasDevices(e);\n      },\n      getElectronScreenSources: YT,\n      getPlaybackDevices: function getPlaybackDevices(e) {\n        return iv.getSpeakers(e);\n      },\n      createClient: function createClient() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {\n          codec: \"vp8\",\n          audioCodec: \"opus\",\n          mode: \"rtc\"\n        };\n        var t = IT.reportApiInvoke(null, {\n          name: Em.CREATE_CLIENT,\n          options: [e],\n          tag: fm.TRACER\n        });\n        try {\n          Um(e);\n        } catch (e) {\n          throw t.onError(e), e;\n        }\n        return void 0 === e.audioCodec && (e.audioCodec = \"opus\"), t.onSuccess(), new Xk(Jk(Jk({\n          forceWaitGatewayResponse: !0\n        }, e), {}, {\n          role: \"rtc\" === e.mode ? \"host\" : e.role\n        }));\n      },\n      createCameraVideoTrack: function () {\n        var _createCameraVideoTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee317() {\n          var e,\n            t,\n            i,\n            r,\n            n,\n            _e228,\n            o,\n            _args320 = arguments;\n          return _regeneratorRuntime().wrap(function _callee317$(_context320) {\n            while (1) switch (_context320.prev = _context320.next) {\n              case 0:\n                e = _args320.length > 0 && void 0 !== _args320[0] ? _args320[0] : {\n                  encoderConfig: \"480p_1\"\n                };\n                t = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CREATE_CAM_VIDEO_TRACK,\n                  options: [eM({}, e)]\n                }), i = Nb(e), r = MR(8, \"track-cam-\");\n                n = null;\n                NE.info(\"start create camera video track with config\", JSON.stringify(e), \"trackId\", r);\n                _context320.prev = 4;\n                _context320.next = 7;\n                return ZT({\n                  video: i\n                }, r);\n              case 7:\n                _context320.t0 = _context320.sent.getVideoTracks()[0];\n                if (_context320.t0) {\n                  _context320.next = 10;\n                  break;\n                }\n                _context320.t0 = null;\n              case 10:\n                n = _context320.t0;\n                _context320.next = 16;\n                break;\n              case 13:\n                _context320.prev = 13;\n                _context320.t1 = _context320[\"catch\"](4);\n                throw t.onError(_context320.t1), _context320.t1;\n              case 16:\n                if (n) {\n                  _context320.next = 19;\n                  break;\n                }\n                _e228 = new vE(TE.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context320.abrupt(\"return\", (t.onError(_e228), _e228.throw()));\n              case 19:\n                e.optimizationMode && tM(r, n, e, e.encoderConfig && VE(e.encoderConfig));\n                o = new fw(n, e, i, e.scalabiltyMode ? FE(e.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, e.optimizationMode, r);\n                return _context320.abrupt(\"return\", (t.onSuccess(o.getTrackId()), NE.info(\"create camera video success, trackId:\", r), o));\n              case 22:\n              case \"end\":\n                return _context320.stop();\n            }\n          }, _callee317, null, [[4, 13]]);\n        }));\n        function createCameraVideoTrack() {\n          return _createCameraVideoTrack.apply(this, arguments);\n        }\n        return createCameraVideoTrack;\n      }(),\n      createCustomVideoTrack: function createCustomVideoTrack(e) {\n        var t = IT.reportApiInvoke(null, {\n            tag: fm.TRACER,\n            name: Em.CREATE_CUSTOM_VIDEO_TRACK,\n            options: [e]\n          }),\n          i = new Ew(e.mediaStreamTrack, {\n            bitrateMax: e.bitrateMax,\n            bitrateMin: e.bitrateMin\n          }, e.scalabiltyMode ? FE(e.scalabiltyMode) : {\n            numSpatialLayers: 1,\n            numTemporalLayers: 1\n          }, e.optimizationMode);\n        return t.onSuccess(i.getTrackId()), NE.info(\"create custom video track success with config\", e, \"trackId\", i.getTrackId()), i;\n      },\n      createScreenVideoTrack: function () {\n        var _createScreenVideoTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee318() {\n          var e,\n            t,\n            i,\n            r,\n            n,\n            o,\n            s,\n            a,\n            _e229,\n            _e230,\n            _e231,\n            _e232,\n            c,\n            d,\n            _args321 = arguments;\n          return _regeneratorRuntime().wrap(function _callee318$(_context321) {\n            while (1) switch (_context321.prev = _context321.next) {\n              case 0:\n                e = _args321.length > 0 && void 0 !== _args321[0] ? _args321[0] : {}, t = _args321.length > 1 && void 0 !== _args321[1] ? _args321[1] : \"disable\";\n                i = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CREATE_SCREEN_VIDEO_TRACK,\n                  options: [eM({}, e), t]\n                });\n                e.encoderConfig ? \"string\" == typeof e.encoderConfig || e.encoderConfig.width && e.encoderConfig.height || (e.encoderConfig.width = {\n                  max: 1920\n                }, e.encoderConfig.height = {\n                  max: 1080\n                }) : e.encoderConfig = \"1080p_2\";\n                r = Db(e), n = MR(8, \"track-scr\");\n                o = null, s = null;\n                a = jg();\n                if (!(!a.supportShareAudio && \"enable\" === t)) {\n                  _context321.next = 9;\n                  break;\n                }\n                _e229 = new vE(TE.NOT_SUPPORTED, \"your browser or platform is not support share-screen with audio\");\n                return _context321.abrupt(\"return\", (i.onError(_e229), _e229.throw()));\n              case 9:\n                NE.info(\"start create screen video track with config\", e, \"withAudio\", t, \"trackId\", n);\n                _context321.prev = 10;\n                _context321.next = 13;\n                return ZT({\n                  screen: r,\n                  screenAudio: \"auto\" === t ? a.supportShareAudio : \"enable\" === t\n                }, n);\n              case 13:\n                _e230 = _context321.sent;\n                o = _e230.getVideoTracks()[0] || null, s = _e230.getAudioTracks()[0] || null;\n                _context321.next = 20;\n                break;\n              case 17:\n                _context321.prev = 17;\n                _context321.t0 = _context321[\"catch\"](10);\n                throw i.onError(_context321.t0), _context321.t0;\n              case 20:\n                if (o) {\n                  _context321.next = 23;\n                  break;\n                }\n                _e231 = new vE(TE.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context321.abrupt(\"return\", (i.onError(_e231), _e231.throw()));\n              case 23:\n                if (!(!s && \"enable\" === t)) {\n                  _context321.next = 27;\n                  break;\n                }\n                o && o.stop();\n                _e232 = new vE(TE.SHARE_AUDIO_NOT_ALLOWED);\n                return _context321.abrupt(\"return\", (i.onError(_e232), _e232.throw()));\n              case 27:\n                e.optimizationMode || (e.optimizationMode = \"detail\"), e.optimizationMode && (tM(n, o, e, e.encoderConfig && jE(e.encoderConfig)), e.encoderConfig && \"string\" != typeof e.encoderConfig && (e.encoderConfig.bitrateMin = e.encoderConfig.bitrateMax));\n                c = new Ew(o, e.encoderConfig ? jE(e.encoderConfig) : {}, e.scalabiltyMode ? FE(e.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, e.optimizationMode, n, [lg.SCREEN_TRACK]);\n                if (s) {\n                  _context321.next = 31;\n                  break;\n                }\n                return _context321.abrupt(\"return\", (i.onSuccess(c.getTrackId()), NE.info(\"create screen video track success\", \"video:\", c.getTrackId()), c));\n              case 31:\n                d = new aR(s);\n                return _context321.abrupt(\"return\", (i.onSuccess([c.getTrackId(), d.getTrackId()]), NE.info(\"create screen video track success\", \"video:\", c.getTrackId(), \"audio:\", d.getTrackId()), [c, d]));\n              case 33:\n              case \"end\":\n                return _context321.stop();\n            }\n          }, _callee318, null, [[10, 17]]);\n        }));\n        function createScreenVideoTrack() {\n          return _createScreenVideoTrack.apply(this, arguments);\n        }\n        return createScreenVideoTrack;\n      }(),\n      createMicrophoneAndCameraTracks: function () {\n        var _createMicrophoneAndCameraTracks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee319() {\n          var e,\n            t,\n            i,\n            r,\n            n,\n            o,\n            s,\n            a,\n            c,\n            _e233,\n            _e234,\n            d,\n            u,\n            _args322 = arguments;\n          return _regeneratorRuntime().wrap(function _callee319$(_context322) {\n            while (1) switch (_context322.prev = _context322.next) {\n              case 0:\n                e = _args322.length > 0 && void 0 !== _args322[0] ? _args322[0] : {}, t = _args322.length > 1 && void 0 !== _args322[1] ? _args322[1] : {\n                  encoderConfig: \"480p_1\"\n                };\n                i = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CREATE_MIC_AND_CAM_TRACKS,\n                  options: [e, t]\n                }), r = Nb(t), n = Pb(e), o = MR(8, \"track-mic-\"), s = MR(8, \"track-cam-\");\n                a = null, c = null;\n                NE.info(\"start create camera video track(\".concat(s, \") and microphone audio track(\").concat(o, \") with config, audio: \").concat(JSON.stringify(e), \", video: \").concat(JSON.stringify(t)));\n                _context322.prev = 4;\n                _context322.next = 7;\n                return ZT({\n                  audio: n,\n                  video: r\n                }, \"\".concat(o, \"-\").concat(s));\n              case 7:\n                _e233 = _context322.sent;\n                a = _e233.getAudioTracks()[0], c = _e233.getVideoTracks()[0];\n                _context322.next = 14;\n                break;\n              case 11:\n                _context322.prev = 11;\n                _context322.t0 = _context322[\"catch\"](4);\n                throw i.onError(_context322.t0), _context322.t0;\n              case 14:\n                if (!(!a || !c)) {\n                  _context322.next = 17;\n                  break;\n                }\n                _e234 = new vE(TE.UNEXPECTED_ERROR, \"can not find tracks in media stream\");\n                return _context322.abrupt(\"return\", (i.onError(_e234), _e234.throw()));\n              case 17:\n                t.optimizationMode && tM(s, c, t, t.encoderConfig && VE(t.encoderConfig));\n                d = new cR(a, e, n, o), u = new fw(c, t, r, t.scalabiltyMode ? FE(t.scalabiltyMode) : {\n                  numSpatialLayers: 1,\n                  numTemporalLayers: 1\n                }, t.optimizationMode, s);\n                return _context322.abrupt(\"return\", (i.onSuccess([d.getTrackId(), u.getTrackId()]), NE.info(\"create camera video track(\".concat(s, \") and microphone audio track(\").concat(o, \") success\")), [d, u]));\n              case 20:\n              case \"end\":\n                return _context322.stop();\n            }\n          }, _callee319, null, [[4, 11]]);\n        }));\n        function createMicrophoneAndCameraTracks() {\n          return _createMicrophoneAndCameraTracks.apply(this, arguments);\n        }\n        return createMicrophoneAndCameraTracks;\n      }(),\n      createMicrophoneAudioTrack: function () {\n        var _createMicrophoneAudioTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee320() {\n          var e,\n            t,\n            i,\n            r,\n            n,\n            _e235,\n            o,\n            _args323 = arguments;\n          return _regeneratorRuntime().wrap(function _callee320$(_context323) {\n            while (1) switch (_context323.prev = _context323.next) {\n              case 0:\n                e = _args323.length > 0 && void 0 !== _args323[0] ? _args323[0] : {};\n                t = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CREATE_MIC_AUDIO_TRACK,\n                  options: [e]\n                }), i = Pb(e), r = MR(8, \"track-mic-\");\n                n = null;\n                NE.info(\"start create microphone audio track with config\", JSON.stringify(e), \"trackId\", r);\n                _context323.prev = 4;\n                _context323.next = 7;\n                return ZT({\n                  audio: i\n                }, r);\n              case 7:\n                _context323.t0 = _context323.sent.getAudioTracks()[0];\n                if (_context323.t0) {\n                  _context323.next = 10;\n                  break;\n                }\n                _context323.t0 = null;\n              case 10:\n                n = _context323.t0;\n                _context323.next = 16;\n                break;\n              case 13:\n                _context323.prev = 13;\n                _context323.t1 = _context323[\"catch\"](4);\n                throw t.onError(_context323.t1), _context323.t1;\n              case 16:\n                if (n) {\n                  _context323.next = 19;\n                  break;\n                }\n                _e235 = new vE(TE.UNEXPECTED_ERROR, \"can not find track in media stream\");\n                return _context323.abrupt(\"return\", (t.onError(_e235), _e235.throw()));\n              case 19:\n                o = new cR(n, e, i, r);\n                return _context323.abrupt(\"return\", (t.onSuccess(o.getTrackId()), NE.info(\"create microphone audio track success, trackId:\", r), o));\n              case 21:\n              case \"end\":\n                return _context323.stop();\n            }\n          }, _callee320, null, [[4, 13]]);\n        }));\n        function createMicrophoneAudioTrack() {\n          return _createMicrophoneAudioTrack.apply(this, arguments);\n        }\n        return createMicrophoneAudioTrack;\n      }(),\n      createCustomAudioTrack: function createCustomAudioTrack(e) {\n        var t = IT.reportApiInvoke(null, {\n            tag: fm.TRACER,\n            name: Em.CREATE_CUSTOM_AUDIO_TRACK,\n            options: [e]\n          }),\n          i = new aR(e.mediaStreamTrack, e.encoderConfig ? GE(e.encoderConfig) : {});\n        return NE.info(\"create custom audio track success with config\", e, \"trackId\", i.getTrackId()), t.onSuccess(i.getTrackId()), i;\n      },\n      createBufferSourceAudioTrack: function () {\n        var _createBufferSourceAudioTrack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee321(e) {\n          var t, i, r, n, o;\n          return _regeneratorRuntime().wrap(function _callee321$(_context324) {\n            while (1) switch (_context324.prev = _context324.next) {\n              case 0:\n                t = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CREATE_BUFFER_AUDIO_TRACK,\n                  options: [e]\n                });\n                if (!HE(\"DISABLE_WEBAUDIO\")) {\n                  _context324.next = 3;\n                  break;\n                }\n                throw new vE(TE.NOT_SUPPORTED, \"can not create BufferSourceAudioTrack when WebAudio disabled\");\n              case 3:\n                i = MR(8, \"track-buf-\");\n                NE.info(\"start create buffer source audio track with config\", JSON.stringify(e), \"trackId\", i);\n                r = e.source;\n                if (e.source instanceof AudioBuffer) {\n                  _context324.next = 16;\n                  break;\n                }\n                _context324.prev = 7;\n                _context324.next = 10;\n                return Zk(e.source, e.cacheOnlineFile);\n              case 10:\n                e.source = _context324.sent;\n                _context324.next = 16;\n                break;\n              case 13:\n                _context324.prev = 13;\n                _context324.t0 = _context324[\"catch\"](7);\n                return _context324.abrupt(\"return\", (t.onError(_context324.t0), _context324.t0.throw()));\n              case 16:\n                n = new zk(e.source), o = new dR(r, n, e.encoderConfig ? GE(e.encoderConfig) : {}, i);\n                return _context324.abrupt(\"return\", (NE.info(\"create buffer source audio track success, trackId:\", i), t.onSuccess(o.getTrackId()), o));\n              case 18:\n              case \"end\":\n                return _context324.stop();\n            }\n          }, _callee321, null, [[7, 13]]);\n        }));\n        function createBufferSourceAudioTrack(_x480) {\n          return _createBufferSourceAudioTrack.apply(this, arguments);\n        }\n        return createBufferSourceAudioTrack;\n      }(),\n      setAppType: function setAppType(e) {\n        if (NE.debug(\"setAppType: \".concat(e)), !(Number.isInteger(e) && e >= 0)) throw NE.debug(\"Invalid appType\"), new vE(TE.INVALID_PARAMS, \"invalid app type\", e);\n        WE(\"APP_TYPE\", Math.floor(e));\n      },\n      setLogLevel: function setLogLevel(e) {\n        NE.setLogLevel(e);\n      },\n      enableLogUpload: function enableLogUpload() {\n        HE(\"USE_NEW_LOG\") ? WE(\"UPLOAD_LOG\", !0) : NE.enableLogUpload();\n      },\n      disableLogUpload: function disableLogUpload() {\n        HE(\"USE_NEW_LOG\") ? WE(\"UPLOAD_LOG\", !1) : NE.disableLogUpload();\n      },\n      createChannelMediaRelayConfiguration: function createChannelMediaRelayConfiguration() {\n        return new QO();\n      },\n      checkAudioTrackIsActive: function () {\n        var _checkAudioTrackIsActive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee322(e) {\n          var t,\n            i,\n            _e236,\n            r,\n            n,\n            o,\n            s,\n            a,\n            _args325 = arguments;\n          return _regeneratorRuntime().wrap(function _callee322$(_context325) {\n            while (1) switch (_context325.prev = _context325.next) {\n              case 0:\n                t = _args325.length > 1 && void 0 !== _args325[1] ? _args325[1] : 5e3;\n                i = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CHECK_AUDIO_TRACK_IS_ACTIVE,\n                  options: [t]\n                });\n                if (e instanceof aR || e instanceof WP) {\n                  _context325.next = 5;\n                  break;\n                }\n                _e236 = new vE(TE.INVALID_TRACK, \"the parameter is not a audio track\");\n                return _context325.abrupt(\"return\", (i.onError(_e236), _e236.throw()));\n              case 5:\n                t && t < 1e3 && (t = 1e3);\n                r = e instanceof aR ? e.getTrackLabel() : \"remote_track\", n = e.getVolumeLevel();\n                o = n, s = n;\n                a = Date.now();\n                return _context325.abrupt(\"return\", new Cl(function (n) {\n                  var c = setInterval(function () {\n                    var d = e.getVolumeLevel();\n                    o = d > o ? d : o, s = d < s ? d : s;\n                    var u = o - s > 1e-4,\n                      l = Date.now() - a;\n                    if (u || l > t) {\n                      clearInterval(c);\n                      var _t213 = u,\n                        _s45 = {\n                          duration: l,\n                          deviceLabel: r,\n                          maxVolumeLevel: o,\n                          result: _t213\n                        };\n                      NE.info(\"[track-\".concat(e.getTrackId(), \"] check audio track active completed. \").concat(JSON.stringify(_s45))), i.onSuccess(_s45), n(_t213);\n                    }\n                  }, 200);\n                }));\n              case 10:\n              case \"end\":\n                return _context325.stop();\n            }\n          }, _callee322);\n        }));\n        function checkAudioTrackIsActive(_x481) {\n          return _checkAudioTrackIsActive.apply(this, arguments);\n        }\n        return checkAudioTrackIsActive;\n      }(),\n      checkVideoTrackIsActive: function () {\n        var _checkVideoTrackIsActive = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee323(e) {\n          var t,\n            i,\n            _e237,\n            r,\n            n,\n            o,\n            s,\n            a,\n            c,\n            d,\n            _e238,\n            u,\n            l,\n            _args326 = arguments;\n          return _regeneratorRuntime().wrap(function _callee323$(_context326) {\n            while (1) switch (_context326.prev = _context326.next) {\n              case 0:\n                t = _args326.length > 1 && void 0 !== _args326[1] ? _args326[1] : 5e3;\n                i = IT.reportApiInvoke(null, {\n                  tag: fm.TRACER,\n                  name: Em.CHECK_VIDEO_TRACK_IS_ACTIVE,\n                  options: [t]\n                });\n                if (e instanceof Ew || e instanceof GP) {\n                  _context326.next = 5;\n                  break;\n                }\n                _e237 = new vE(TE.INVALID_TRACK, \"the parameter is not a video track\");\n                return _context326.abrupt(\"return\", (i.onError(_e237), _e237.throw()));\n              case 5:\n                r = 4;\n                t && t < 1e3 && (t = 1e3);\n                n = e instanceof Ew ? e.getTrackLabel() : \"remote_track\", o = e.getMediaStreamTrack(!0), s = document.createElement(\"video\");\n                s.style.width = \"1px\", s.style.height = \"1px\", s.setAttribute(\"muted\", \"\"), s.muted = !0, s.setAttribute(\"playsinline\", \"\"), s.controls = !1, (zh() || Yh()) && (s.style.opacity = \"0.01\", s.style.position = \"fixed\", s.style.left = \"0\", s.style.top = \"0\", document.body.appendChild(s)), s.srcObject = new MediaStream([o]), s.play();\n                a = document.createElement(\"canvas\");\n                a.width = 160, a.height = 120;\n                c = 0, d = 0;\n                _context326.prev = 12;\n                _e238 = Date.now();\n                _context326.next = 16;\n                return rM(s, t, a, r);\n              case 16:\n                c = _context326.sent;\n                d = Date.now() - _e238;\n                _context326.next = 23;\n                break;\n              case 20:\n                _context326.prev = 20;\n                _context326.t0 = _context326[\"catch\"](12);\n                throw i.onError(_context326.t0), _context326.t0;\n              case 23:\n                iM === xh.SAFARI && (s.pause(), s.remove()), s.srcObject = null;\n                u = c > r, l = {\n                  duration: d,\n                  changedPicNum: c,\n                  deviceLabel: n,\n                  result: u\n                };\n                return _context326.abrupt(\"return\", (NE.info(\"[track-\".concat(e.getTrackId(), \"] check video track active completed. \").concat(JSON.stringify(l))), i.onSuccess(l), u));\n              case 26:\n              case \"end\":\n                return _context326.stop();\n            }\n          }, _callee323, null, [[12, 20]]);\n        }));\n        function checkVideoTrackIsActive(_x482) {\n          return _checkVideoTrackIsActive.apply(this, arguments);\n        }\n        return checkVideoTrackIsActive;\n      }(),\n      setArea: function setArea(e) {\n        var t = IT.reportApiInvoke(null, {\n          name: Em.SET_AREA,\n          options: e,\n          tag: fm.TRACER\n        });\n        try {\n          var _t214 = [];\n          if (\"string\" == typeof e && (_t214 = [e]), Array.isArray(e) && (e.forEach(function (e) {\n            if (!Sg.includes(e)) throw new vE(TE.INVALID_PARAMS, \"invalid area code\");\n          }), _t214 = e), \"[object Object]\" === Object.prototype.toString.call(e)) {\n            var _i124 = e.areaCode,\n              r = e.excludedArea;\n            if (!_i124) throw new vE(TE.INVALID_PARAMS, \"area code is needed\");\n            var _n70 = _i124;\n            \"string\" == typeof _i124 && (_n70 = [_i124]), _t214 = r ? LO(_n70, r) : _n70;\n          }\n          WE(\"AREAS\", _t214);\n          var i = function (e) {\n            var t = {\n              CODE: \"\",\n              WEBCS_DOMAIN: [],\n              WEBCS_DOMAIN_BACKUP_LIST: [],\n              PROXY_CS: [],\n              CDS_AP: [],\n              ACCOUNT_REGISTER: [],\n              UAP_AP: [],\n              EVENT_REPORT_DOMAIN: [],\n              EVENT_REPORT_BACKUP_DOMAIN: [],\n              LOG_UPLOAD_SERVER: [],\n              PROXY_SERVER_TYPE3: []\n            };\n            return e.map(function (e) {\n              var i = vg[e],\n                r = Object.keys(i);\n              r && r.map(function (e) {\n                \"CODE\" !== e && (t[e] = t[e].concat(i[e]));\n              });\n            }), t;\n          }(_t214);\n          Object.keys(i).map(function (e) {\n            if (\"LOG_UPLOAD_SERVER\" === e || \"EVENT_REPORT_DOMAIN\" === e || \"EVENT_REPORT_BACKUP_DOMAIN\" === e || \"PROXY_SERVER_TYPE3\" === e) {\n              WE(e, i[e][0]);\n            } else WE(e, i[e]);\n          }), NE.debug(\"set area success:\", _t214.join(\",\"));\n        } catch (e) {\n          throw t.onError(e), e;\n        }\n        t.onSuccess();\n      },\n      audioElementPlayCenter: nv,\n      processExternalMediaAEC: function processExternalMediaAEC(e) {\n        cM.processExternalMediaAEC(e);\n      },\n      registerExtensions: function registerExtensions(e) {\n        e.forEach(function (e) {\n          var t = e;\n          t.__registered__ = !0, t.logger.hookLog = NE.extLog, t.reporter.hookApiInvoke = IT.extApiInvoke, t.parameters && Object.keys(t.parameters).forEach(function (e) {\n            t.parameters[e] = HE(e);\n          });\n        });\n      },\n      ChannelMediaRelayError: sg,\n      ChannelMediaRelayEvent: ng,\n      ChannelMediaRelayState: og,\n      RemoteStreamFallbackType: pg,\n      RemoteStreamType: hg,\n      ConnectionDisconnectedReason: Cm,\n      AudienceLatencyLevelType: ym,\n      AREAS: fg\n    },\n    uM = window || document;\n  return Object.defineProperties(dM, {\n    onAudioAutoplayFailed: {\n      get: function get() {\n        return ET.onAudioAutoplayFailed;\n      },\n      set: function set(e) {\n        ET.onAudioAutoplayFailed = e;\n      }\n    },\n    onAutoplayFailed: {\n      get: function get() {\n        return ET.onAutoplayFailed;\n      },\n      set: function set(e) {\n        ET.onAutoplayFailed = e;\n      }\n    },\n    _onSecurityPolicyViolation: {\n      value: void 0,\n      writable: !0\n    },\n    _cspEventHandlerPointer: {\n      value: void 0,\n      writable: !0\n    },\n    onSecurityPolicyViolation: {\n      get: function get() {\n        return dM._onSecurityPolicyViolation;\n      },\n      set: function set(e) {\n        if (dM._onSecurityPolicyViolation = e, !uM) return;\n        var t = function t(e) {\n            if (!(e && e.blockedURI && dM.onSecurityPolicyViolation)) return;\n            var t = e.blockedURI;\n            HE(\"CSP_DETECTED_HOSTNAME_LIST\").some(function (e) {\n              return t.includes(e);\n            }) && dM.onSecurityPolicyViolation && \"function\" == typeof dM.onSecurityPolicyViolation && dM.onSecurityPolicyViolation(e);\n          },\n          i = dM._cspEventHandlerPointer;\n        i && uM.removeEventListener(\"securitypolicyviolation\", i), e && \"function\" == typeof e && uM.addEventListener(\"securitypolicyviolation\", t), dM._cspEventHandlerPointer = t;\n      }\n    }\n  }), iv.on(gm.CAMERA_DEVICE_CHANGED, function (e) {\n    NE.info(\"camera device changed\", JSON.stringify(e)), dM.onCameraChanged && dM.onCameraChanged(e);\n  }), iv.on(gm.RECORDING_DEVICE_CHANGED, function (e) {\n    NE.info(\"microphone device changed\", JSON.stringify(e)), dM.onMicrophoneChanged && dM.onMicrophoneChanged(e);\n  }), iv.on(gm.PLAYOUT_DEVICE_CHANGED, function (e) {\n    NE.debug(\"playout device changed\", JSON.stringify(e)), dM.onPlaybackDeviceChanged && dM.onPlaybackDeviceChanged(e);\n  }), nv.onAutoplayFailed = function () {\n    NE.info(\"detect audio element autoplay failed\"), ET.onAudioAutoplayFailed && ET.onAudioAutoplayFailed();\n  }, LT.on(\"autoplay-failed\", function () {\n    NE.info(\"detect webaudio autoplay failed\"), ET.onAudioAutoplayFailed && ET.onAudioAutoplayFailed();\n  }), window && (window.__ARTC__ = dM), dM;\n});","map":null,"metadata":{},"sourceType":"script"}